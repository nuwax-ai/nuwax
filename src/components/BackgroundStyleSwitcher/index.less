@import '@/styles/token.less';

/**
 * 背景风格切换组件样式
 */

.background-style-switcher {
  .background-selector {
    .background-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: @paddingSm;
      margin-top: @padding;

      .background-preview {
        position: relative;
        width: 120px;
        height: 80px;
        border-radius: @borderRadius;
        border: @lineWidth solid transparent;
        overflow: hidden;
        cursor: pointer;
        transition: all @motionDurationMid @motionEaseOut;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;

        &:hover {
          border-color: @colorPrimary;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px @boxShadowSecondary;
        }

        &.selected {
          border-color: @colorPrimary;
          box-shadow: 0 0 0 2px @colorPrimaryBg;
        }

        .background-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            to bottom,
            rgba(0, 0, 0, 10%),
            rgba(0, 0, 0, 60%)
          );
          display: flex;
          align-items: flex-end;
          padding: @paddingSm;
          opacity: 0;
          transition: opacity @motionDurationMid @motionEaseOut;
        }

        &:hover .background-overlay,
        &.selected .background-overlay {
          opacity: 1;
        }

        .background-info {
          display: flex;
          align-items: center;
          justify-content: space-between;
          width: 100%;

          .background-name {
            color: @colorWhite;
            font-size: @fontSizeSm;
            font-weight: @fontWeightStrong;
            text-shadow: 0 1px 2px @boxShadowSecondary;
          }

          .style-indicator {
            font-size: @fontSize;
          }
        }
      }
    }

    .background-radio-group {
      margin-top: 16px;

      .ant-radio-wrapper {
        padding: 8px 12px;
        border-radius: @borderRadius;
        margin: 4px 0;
        transition: all @motionDurationMid @motionEaseOut;

        &:hover {
          background: rgba(0, 0, 0, 4%);
        }
      }
    }
  }

  .style-switcher {
    .style-info {
      margin-top: 12px;
      padding: 12px;
      background: rgba(0, 0, 0, 4%);
      border-radius: 8px;
      border-left: 4px solid #5147ff;

      .ant-typography {
        margin: 0;

        & + .ant-typography {
          margin-top: 4px;
        }
      }
    }
  }

  .quick-switcher {
    .ant-btn {
      margin-right: 8px;
      margin-bottom: 8px;
    }
  }

  // 不同尺寸适配
  &.size-small {
    .background-grid {
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 8px;

      .background-preview {
        width: 80px;
        height: 60px;

        .background-info .background-name {
          font-size: 10px;
        }
      }
    }
  }

  &.size-large {
    .background-grid {
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 16px;

      .background-preview {
        width: 160px;
        height: 100px;

        .background-info .background-name {
          font-size: 14px;
        }
      }
    }
  }
}

.background-style-card {
  .ant-card-body {
    padding: @paddingLg;
  }

  .ant-card-head-title {
    font-size: @fontSizeLg;
    font-weight: @fontWeightStrong;
  }
}

// 全局风格类适配
.xagi-light-style {
  .background-style-switcher {
    .style-switcher .style-info {
      background: @colorBgTextHover;
      color: @colorText;
    }

    .background-radio-group .ant-radio-wrapper:hover {
      background: @colorBgTextHover;
    }
  }
}

.xagi-dark-style {
  .background-style-switcher {
    .style-switcher .style-info {
      background: @colorBgTextHover;
      color: @colorText;
    }

    .background-radio-group .ant-radio-wrapper:hover {
      background: @colorBgTextHover;
    }
  }

  .background-style-card {
    .ant-card {
      background: @colorBgElevated;
      border-color: @colorBorder;

      .ant-card-head {
        background: @colorBgTextHover;
        border-color: @colorBorder;

        .ant-card-head-title {
          color: @colorText;
        }
      }

      .ant-card-body {
        color: @colorText;
      }
    }
  }
}

// 响应式适配
@media (max-width: 768px) {
  .background-style-switcher {
    .background-grid {
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: @paddingXs;

      .background-preview {
        width: 100px;
        height: 70px;
      }
    }

    .style-switcher {
      .ant-space {
        flex-wrap: wrap;

        .ant-btn {
          margin-bottom: @paddingSm;
        }
      }
    }
  }
}

@media (max-width: 480px) {
  .background-style-switcher {
    .background-grid {
      grid-template-columns: repeat(2, 1fr);

      .background-preview {
        width: 100%;
        height: 60px;
      }
    }
  }
}
