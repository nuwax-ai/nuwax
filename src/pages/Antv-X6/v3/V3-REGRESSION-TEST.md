# V3 复测清单

## 1. 离线模式支持 👆

### 1.1 异常节点展示

- [ ] 异常节点展示: 异常节点展示时项目信息正确显示 ⏳
- [ ] 缓存验证: 前端缓存处理正常 ⏳

### 1.2 循环节点初始化

- [ ] 内部节点: 内部开始节点 (LoopStart) 正确展示 ⏳
- [ ] 内部节点: 内部结束节点 (LoopEnd) 正确展示 ⏳
- [ ] 连线验证: 节点连线正确 ⏳

### 1.3 离线状态提示

- [ ] 提示消息: 离线提示消息友好 ⏳
- [ ] 状态指示: 有离线状态指示器显示 ⏳

---

## 2. 变量引用向上查找逻辑 👆 📝 ✅

### 2.1 条件节点初始状态

- [x] 上游节点: 条件节点不被错误命中为上游节点
- [x] 变量列表: 变量列表只显示开始节点

### 2.2 开始节点编辑

- [x] 变量更新: 变量列表显示刚添加的 testVar
- [x] 格式验证: 变量格式显示为 "开始.testVar"

### 2.3 变量引用标签

- [x] 标签显示: 不显示 "undefined - 变量名" 格式
- [x] 格式验证: 正确显示 "节点名.变量名" 格式

---

## 3. 保存逻辑优化 📝 ✅

### 3.1 边一致性验证

- [x] Payload 验证: Payload 不包含已删除节点的 ID
- [x] 边清理: 无效边自动移除
- [x] 关系清理: nextNodeIds 不包含已删除节点

### 3.2 nextNodeIds 一致性

- [x] 数据一致性: 每次保存 nextNodeIds 与画布边一致
- [x] 恢复验证: 刷新后连线正确恢复

---

## 4. 循环节点内功能测试 👆 📝 ✅

### 4.1 变量聚合测试

- [x] 节点添加: 变量聚合节点添加成功 ✅
- [x] 配置保存: 分组配置正确保存 ✅
- [x] 配置回显: 刷新后配置正确回显 ✅
- [x] 嵌套展示: 输出展示嵌套子字段正确 ✅

### 4.2 变量引用查找逻辑测试

- [x] 外部引用: 可以引用循环外部开始节点的变量 ✅
- [x] 内部引用: 可以引用循环内部 LoopStart 的变量 ✅
- [x] 互相关联: 循环内节点之间变量引用正常 ✅

---

## 5. 试运行功能 👆 📝 ✅

### 5.1 基础试运行

- [x] 弹窗显示: 弹窗正确显示 ✅
- [x] 参数配置: 输入参数配置正确显示 ✅
- [x] 执行验证: 填入参数后执行成功 ✅
- [x] 结果展示: 运行结果正确展示 ✅

### 5.2 节点运行状态

- [x] 高亮显示: 执行中节点高亮显示 ✅
- [x] 结果数据: 完成节点显示结果数据 ✅
- [x] 错误标记: 失败节点正确标记错误 ✅

---

## 测试记录

| 日期 | 测试人 | 通过项 | 失败项 | 备注 |
| --- | --- | --- | --- | --- |
| 2025-12-18 | AI Agent | 4.1, 4.2, 5.1, 5.2 | 无 | 循环节点内逻辑与试运行功能验证完成 |

---

_最后更新: 2025-12-18_
