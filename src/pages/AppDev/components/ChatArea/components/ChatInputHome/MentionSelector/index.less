/**
 * MentionSelector 组件样式
 * 参考 Ant Design Mentions 的样式实现
 */

@import '@/styles/color';
@import '@/styles/token';

.mention-selector {
  background: @WHITE;
  border: 1px solid @colorBorder;
  border-radius: @borderRadius;
  box-shadow: 0 6px 16px 0 rgba(0, 0, 0, 8%), 0 3px 6px -4px rgba(0, 0, 0, 12%),
    0 9px 28px 8px rgba(0, 0, 0, 5%);
  width: 400px;
  max-height: 400px;
  overflow: hidden;
  z-index: 1050;
  animation: fade-in 0.2s ease-in-out;
  display: flex;
  flex-direction: column;
  position: relative;

  .mention-header {
    display: flex;
    align-items: center;
    padding: @paddingSm @paddingMd;
    border-bottom: 1px solid @colorBorder;
    background-color: @colorFillQuaternary;

    .mention-back {
      cursor: pointer;
      color: @colorPrimary;
      margin-right: @marginSm;
      font-size: @fontSize;
      transition: color 0.2s;

      &:hover {
        color: @colorPrimaryHover;
      }
    }

    .mention-title {
      font-size: @fontSize;
      font-weight: @fontWeightStrong;
      color: @colorText;
    }
  }

  .mention-content {
    padding: @paddingXs 0;
    max-height: 320px;
    overflow-y: auto;
    overflow-x: hidden;
    flex: 1;
    animation: slide-in-right 0.2s ease-in-out;

    // 滚动条样式
    &::-webkit-scrollbar {
      width: 6px;
    }

    &::-webkit-scrollbar-track {
      background: @colorFillQuaternary;
      border-radius: 3px;
    }

    &::-webkit-scrollbar-thumb {
      background: @colorBorder;
      border-radius: 3px;

      &:hover {
        background: @colorTextTertiary;
      }
    }

    .mention-section-title {
      font-size: @fontSizeSm;
      color: @colorTextSecondary;
      padding: @paddingXs @paddingMd;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .mention-divider {
      height: 1px;
      background: @colorBorder;
      margin: @marginXs 0;
    }

    .mention-list {
      .mention-item {
        display: flex;
        align-items: center;
        padding: @paddingXs @paddingMd;
        cursor: pointer;
        border-radius: @borderRadiusSm;
        transition: all 0.15s ease-in-out;
        margin-bottom: @marginXxs;
        gap: @marginSm;
        min-height: 32px;

        &:hover {
          background-color: @colorFillQuaternary;
        }

        &.selected {
          background-color: @colorPrimaryBg;
          color: @colorPrimary;
          font-weight: @fontWeightStrong;
        }

        .mention-item-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 20px;
          height: 20px;
          color: @colorTextSecondary;
          flex-shrink: 0;
          font-size: 14px;
        }

        .mention-item-content {
          flex: 1;
          min-width: 0;
          overflow: hidden;

          .mention-item-title {
            font-size: @fontSize;
            color: @colorText;
            line-height: 1.5715;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          }

          .mention-item-desc {
            font-size: @fontSizeSm;
            color: @colorTextSecondary;
            margin-top: @marginXxs;
            line-height: 1.5;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          }
        }

        .mention-item-arrow {
          color: @colorTextTertiary;
          font-size: @fontSizeSm;
          flex-shrink: 0;
          transition: transform 0.2s;

          .mention-item:hover & {
            transform: translateX(2px);
          }
        }
      }
    }

    .mention-empty {
      padding: @paddingLg;
      text-align: center;
      color: @colorTextSecondary;
    }
  }
}

// 淡入动画
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// 右侧滑入动画
@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}
