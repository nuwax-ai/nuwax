"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[657,1664,9981],{24019:function(Fe,ie,n){n.d(ie,{Z:function(){return b}});var re=n(87462),S=n(67294),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},h=k,ae=n(13401),u=function(Y,D){return S.createElement(ae.Z,(0,re.Z)({},Y,{ref:D,icon:h}))},V=S.forwardRef(u),b=V},88042:function(Fe,ie,n){n.d(ie,{Z:function(){return ee}});var re=n(22675),S=n(94184),k=n.n(S),h=n(67294),ae={avatar:"avatar___Q6WBB",nickname:"nickname___pjZCy"},u=n(85893),V=k().bind(ae),b=function(D){var a=D.className,Q=D.icon,N=D.name,B=D.extra;return(0,u.jsxs)("div",{className:V("flex","flex-col","items-center","content-center",a),children:[(0,u.jsx)("img",{className:V(ae.avatar),src:Q||re,alt:""}),(0,u.jsx)("h3",{className:V("w-full","text-ellipsis",ae.nickname),children:N}),B]})},ee=b},86088:function(Fe,ie,n){n.d(ie,{Z:function(){return Xe}});var re=n(9783),S=n.n(re),k=n(19632),h=n.n(k),ae=n(5574),u=n.n(ae),V=n(98761),b=n(75216),ee=n(13969),Y=n(1675),D=n(95141),a=n(82198),Q=n(52645),N=n(24969),B=n(1912),U=n(77171),C=n(25278),W=n(83062),me=n(75991),oe=n(94184),f=n.n(oe),s=n(67294),K={"chat-container":"chat-container___U9rVW",input:"input___FzMKA",footer:"footer___XnZKb",clear:"clear___GC9bK",disabled:"disabled___qSVoh",box:"box___Dlt8q","plus-box":"plus-box___kiHIR","upload-box-disabled":"upload-box-disabled___ydZqG","send-box":"send-box___h7b23","chat-action":"chat-action___CRGv7","to-bottom":"to-bottom___USy2v",visible:"visible___UwinV"},I={"manual-container":"manual-container___qrahR","manual-box":"manual-box___RFVBN",active:"active___EWeIJ"},O=n(85893),yn=f().bind(I),xe=function(Be){var ne=Be.manualComponents,e=Be.selectedComponentList,Ie=Be.onSelectComponent;return(0,O.jsx)("div",{className:yn("flex-1","flex","items-center",I["manual-container"]),children:ne?.map(function(ce,ye){return(0,O.jsx)("span",{className:yn(I["manual-box"],"flex","items-center","cursor-pointer",S()({},I.active,e?.some(function(he){return he.id===ce.id}))),onClick:function(){return Ie?.(ce)},children:ce.name},ye)})})},Qn=xe,Te=f().bind(K),$e=function(Be){var ne,e=Be.className,Ie=Be.wholeDisabled,ce=Ie===void 0?!1:Ie,ye=Be.clearDisabled,he=ye===void 0?!1:ye,z=Be.onEnter,Pe=Be.visible,ln=Be.selectedComponentList,An=Be.onSelectComponent,rn=Be.onClear,un=Be.isClearInput,en=un===void 0?!0:un,nn=Be.manualComponents,te=Be.onScrollBottom,Sn=(0,s.useState)([]),fn=u()(Sn,2),Dn=fn[0],ot=fn[1],Nt=(0,s.useState)([]),In=u()(Nt,2),Ze=In[0],Le=In[1],Un=(0,s.useState)(""),Ke=u()(Un,2),Qe=Ke[0],He=Ke[1],Re=(ne=localStorage.getItem(Y.LA))!==null&&ne!==void 0?ne:"",Bn=(0,s.useRef)(null);(0,s.useEffect)(function(){Le(Dn.filter(function(Rn){return Rn.status===D.KM.done&&Rn.url&&Rn.key}))},[Dn]);var tn=(0,s.useMemo)(function(){return!Qe&&!(Ze!=null&&Ze.length)},[Qe,Ze]),En=function(){tn||ce||(Qe||Ze?.length>0)&&(z(Qe,Ze),en&&(ot([]),He("")))},$n=function(zn){zn.preventDefault();var bt=zn.target,xt=bt.value,ua=bt.selectionStart,Ft=bt.selectionEnd;if(zn.nativeEvent.keyCode===13&&(zn.nativeEvent.shiftKey||zn.nativeEvent.ctrlKey)){var Ha=xt.slice(0,ua)+`
`+xt.slice(Ft);He(Ha)}else zn.nativeEvent.keyCode===13&&(xt.trim()||Ze!=null&&Ze.length)&&(z(xt,Ze),en&&(ot([]),He("")))},Mn=function(zn){var bt=zn.fileList;ot((0,a.G)(bt))},Zt=function(zn){var bt=h()(Dn);bt.splice(bt.findIndex(function(xt){return xt.uid===zn}),1),ot(bt)},Ea=function(){he||ce||rn?.()};return(0,O.jsxs)("div",{className:Te("w-full","relative",e),children:[(0,O.jsxs)("div",{className:Te(K["chat-container"],"flex","flex-col"),children:[(0,O.jsx)(b.Z,{condition:Dn?.length,children:(0,O.jsx)(V.Z,{files:Dn,onDel:Zt})}),(0,O.jsx)(C.Z.TextArea,{ref:Bn,disabled:ce,value:Qe,onChange:function(zn){return He(zn.target.value)},rootClassName:Te(K.input),onPressEnter:$n,placeholder:"\u76F4\u63A5\u8F93\u5165\u6307\u4EE4\uFF1B\u53EF\u901A\u8FC7\u56DE\u8F66\u53D1\u9001",autoSize:{minRows:2,maxRows:6}}),(0,O.jsxs)("footer",{className:Te("flex",K.footer),children:[(0,O.jsx)(b.Z,{condition:!!rn,children:(0,O.jsx)(W.Z,{title:"\u6E05\u7A7A\u4F1A\u8BDD\u8BB0\u5F55",children:(0,O.jsx)("span",{className:Te(K.clear,"flex","items-center","content-center","hover-box","cursor-pointer",S()({},K.disabled,he||ce)),onClick:Ea,children:(0,O.jsx)(Q.Z,{})})})}),(0,O.jsx)(me.Z,{action:ee.GI,disabled:ce,onChange:Mn,multiple:!0,fileList:Dn,headers:{Authorization:Re?"Bearer ".concat(Re):""},data:{type:"tmp"},showUploadList:!1,children:(0,O.jsx)("span",{className:Te("flex","items-center","content-center","cursor-pointer",K.box,K["plus-box"],S()({},K["upload-box-disabled"],ce)),children:(0,O.jsx)(N.Z,{})})}),(0,O.jsx)(Qn,{manualComponents:nn,selectedComponentList:ln,onSelectComponent:An}),(0,O.jsx)(W.Z,{title:tn?"\u8BF7\u8F93\u5165\u4F60\u7684\u95EE\u9898":"",children:(0,O.jsx)("span",{onClick:En,className:Te("flex","items-center","content-center","cursor-pointer",K.box,K["send-box"],S()({},K.disabled,tn||ce)),children:(0,O.jsx)(B.Z,{})})})]})]}),(0,O.jsx)("div",{className:Te(K["chat-action"]),children:(0,O.jsx)("div",{className:Te(K["to-bottom"],S()({},K.visible,Pe)),onClick:te,children:(0,O.jsx)(U.Z,{})})})]})},Xe=$e},98761:function(Fe,ie,n){n.d(ie,{Z:function(){return B}});var re=n(65774),S=n(32909),k=n(38678),h=n(82198),ae=n(18429),u=n(56595),V=n(26410),b=n(94184),ee=n.n(b),Y=n(67294),D={"files-container":"files-container___rrmlx","file-box":"file-box___jZnPB",del:"del___kwMAg",info:"info___IOZrP",size:"size___Q3woW","progress-upload-file":"progress-upload-file___jbzQC"},a=n(85893),Q=ee().bind(D),N=function(C){var W=C.files,me=C.onDel,oe=(0,Y.useCallback)(function(f){return(0,h.U)(f)},[]);return(0,a.jsx)("div",{className:Q(D["files-container"]),children:W?.map(function(f){var s;return(0,a.jsxs)("div",{className:Q(D["file-box"],"flex","items-center"),children:[(0,a.jsx)(u.Z,{width:50,height:50,src:f!=null&&(s=f.type)!==null&&s!==void 0&&s.includes("image/")?f?.url:re,fallback:S.Pc,preview:!1}),(0,a.jsxs)("div",{className:Q("flex-1","overflow-hide",D.info),children:[(0,a.jsx)("h4",{className:Q("text-ellipsis"),children:f?.name}),(0,a.jsx)("span",{className:D.size,children:(0,k.td)(f?.size)})]}),(0,a.jsx)(ae.Z,{className:Q(D.del),onClick:function(){return me(f.uid)}}),(0,a.jsx)(V.Z,{type:"circle",percent:Math.floor(f?.percent||0),status:oe(f),size:30,className:D["progress-upload-file"]})]},f.uid)})})},B=N},32544:function(Fe,ie,n){n.d(ie,{Z:function(){return ee}});var re=n(65774),S=n(94184),k=n.n(S),h=n(67294),ae={"files-container":"files-container___Ji5El","file-box":"file-box___BRhVF"},u=n(85893),V=k().bind(ae),b=function(D){var a=D.files;return(0,u.jsx)("div",{className:V(ae["files-container"]),children:a?.map(function(Q){return(0,u.jsxs)("div",{className:V(ae["file-box"],"flex","items-center"),children:[(0,u.jsx)("img",{src:Q.mimeType.includes("image/")?Q.fileUrl:re,alt:""}),(0,u.jsx)("div",{className:V("flex-1","overflow-hide"),children:(0,u.jsx)("h4",{className:V("text-ellipsis"),children:Q.fileName})})]},Q.fileKey)})})},ee=b},66371:function(Fe,ie,n){n.d(ie,{Z:function(){return Q}});var re=n(95141),S=n(66073),k=n(50888),h=n(80882),ae=n(55241),u=n(94184),V=n.n(u),b=n(67294),ee={"run-success":"run-success___PpO4f","status-name":"status-name___WZ9ni",icon:"icon___H_CtF","pop-content":"pop-content___cUwx3",row:"row___ajvPI",summary:"summary___QUk2k"},Y=n(85893),D=V().bind(ee),a=function(B){var U=B.messageInfo,C=U.finalResult,W=U.processingList,me=(0,b.useMemo)(function(){return C?((C?.endTime-C?.startTime)/1e3).toFixed(1):0},[C]),oe=function(K,I){var O=K-I;return O<1e3?"".concat(O,"ms"):"".concat((O/1e3).toFixed(1),"s")},f=(0,b.useMemo)(function(){var s=W?.length||0;return s>0?W?.[s-1]:null},[W]);return(0,Y.jsx)(ae.Z,{placement:"bottomLeft",styles:{body:{padding:0}},content:(0,Y.jsxs)("div",{className:D(ee["pop-content"]),children:[W?.map(function(s,K){return s.status!==re.Xk.EXECUTING&&(0,Y.jsxs)("div",{className:D(ee.row,"flex","items-center"),children:[(0,Y.jsx)(S.Z,{}),(0,Y.jsx)("span",{className:D("flex-1","text-ellipsis"),children:"\u5DF2\u8C03\u7528 ".concat(s.name)}),(0,Y.jsx)("span",{children:oe(s.result.endTime,s.result.startTime)})]},K)}),(0,Y.jsx)("span",{className:D(ee.summary),children:"\u8FD0\u884C\u5B8C\u6BD5 ".concat(me,"s")})]}),arrow:!1,trigger:"hover",children:(0,Y.jsx)("span",{className:D("cursor-pointer",ee["run-success"]),children:U?.status===re.ge.Loading||U?.status===re.ge.Incomplete?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(k.Z,{}),f&&(0,Y.jsxs)("span",{className:D(ee["status-name"]),children:[f.status===re.Xk.EXECUTING?"\u6B63\u5728\u8C03\u7528 ":"\u5DF2\u8C03\u7528 ",f.name]})]}):U?.status===re.ge.Error?(0,Y.jsx)("span",{children:"\u8FD0\u884C\u9519\u8BEF"}):(0,Y.jsxs)("span",{children:["\u8FD0\u884C\u5B8C\u6BD5",(0,Y.jsx)(h.Z,{className:D(ee.icon)})]})})})},Q=a},69478:function(Fe,ie,n){n.d(ie,{Z:function(){return Va}});var re=n(9783),S=n.n(re),k=n(5574),h=n.n(k),ae=n(22675),u=n(78987),V=n(72611),b=n(32544),ee=n(75216),Y=n(19632),D=n.n(Y),a=n(13769),Q=n.n(a),N=n(97857),B=n.n(N),U=n(94184),C=n.n(U),W=n(96486),me=n(9980),oe=n.n(me),f=n(67294),s=n(12444),K=n.n(s),I=n(72004),O=n.n(I),yn=n(19515),xe=n(45360),Qn=function(){function x(){K()(this,x),S()(this,"registeredFunctions",new Set),S()(this,"copyCallbacks",new Set),S()(this,"showDefaultCopyMessage",!0)}return O()(x,[{key:"registerClipboardHandler",value:function(){if(!this.registeredFunctions.has("handleClipboard")){var d=this;window.handleClipboard=function(v,i){var r=v.getAttribute("data-code")||"";if(!r){var y,X=v==null||(y=v.closest(".code-block-wrapper"))===null||y===void 0?void 0:y.querySelector(".code-content");r=X?.textContent||""}if(r=r.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),!r){xe.ZP.error("\u590D\u5236\u5931\u8D25\uFF1A\u672A\u627E\u5230\u4EE3\u7801\u5185\u5BB9");return}navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(r).then(function(){i?i(r):d.triggerCopyCallbacks()},function(_){console.error("\u590D\u5236\u5931\u8D25:",_),xe.ZP.error("\u590D\u5236\u5931\u8D25"),(0,yn.dY)(r,i)}):(0,yn.dY)(r,i)},this.registeredFunctions.add("handleClipboard")}}},{key:"registerImageModal",value:function(){if(!this.registeredFunctions.has("showImageInModal")){var d="image-overlay";window.showImageInModal=function(v){var i=document.createElement("div");i.className=d,i.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 0;
        transition: opacity 0.3s ease;
        cursor: pointer;
      `;var r=document.createElement("img");r.src=v,r.style.cssText=`
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
        transform: scale(0.9);
        transition: transform 0.3s ease;
        cursor: zoom-in;
      `,i.appendChild(r),document.body.appendChild(i),i.addEventListener("wheel",function(y){y.preventDefault();var X=window.getComputedStyle(r).transform,_=new DOMMatrix(X),ve=_.a,w=y.deltaY<0?ve+.3:ve-.4,je=Math.max(.1,Math.min(5,w));r.style.transform="scale(".concat(je,")")}),setTimeout(function(){i.style.opacity="1",r.style.transform="scale(1)"},10),i.addEventListener("click",function(){i.style.opacity="0",r.style.transform="scale(0.9)",setTimeout(function(){i?.remove()},300)})},this.registeredFunctions.add("showImageInModal")}}},{key:"registerCodeCollapse",value:function(){this.registeredFunctions.has("toggleCodeCollapse")||(window.toggleCodeCollapse=function(d){var v=d.closest(".code-block-wrapper"),i=v?.querySelector(".code-body"),r=d.querySelector(".collapse-text");if(v&&i&&r){var y=v.classList.contains("collapsed");y?(v.classList.remove("collapsed"),r.textContent="\u6298\u53E0"):(v.classList.add("collapsed"),r.textContent="\u5C55\u5F00")}},this.registeredFunctions.add("toggleCodeCollapse"))}},{key:"registerAllFunctions",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=d.handleClipboard,i=v===void 0?!0:v,r=d.showImageInModal,y=r===void 0?!0:r,X=d.toggleCodeCollapse,_=X===void 0?!0:X;i&&this.registerClipboardHandler(),y&&this.registerImageModal(),_&&this.registerCodeCollapse()}},{key:"cleanup",value:function(d){var v=this,i=d||Array.from(this.registeredFunctions);i.forEach(function(r){r in window&&(delete window[r],v.registeredFunctions.delete(r))})}},{key:"cleanupAll",value:function(){this.cleanup()}},{key:"getRegisteredFunctions",value:function(){return Array.from(this.registeredFunctions)}},{key:"addCopyCallback",value:function(d){this.copyCallbacks.add(d)}},{key:"removeCopyCallback",value:function(d){this.copyCallbacks.delete(d)}},{key:"triggerCopyCallbacks",value:function(){this.copyCallbacks.size>0?this.copyCallbacks.forEach(function(d){try{d()}catch(v){console.error("\u590D\u5236\u56DE\u8C03\u6267\u884C\u5931\u8D25:",v)}}):this.showDefaultCopyMessage&&xe.ZP.success("\u590D\u5236\u6210\u529F")}},{key:"setShowDefaultCopyMessage",value:function(d){this.showDefaultCopyMessage=d}},{key:"getCopyCallbackCount",value:function(){return this.copyCallbacks.size}}],[{key:"getInstance",value:function(){return x.instance||(x.instance=new x),x.instance}}]),x}();S()(Qn,"instance",void 0);var Te=Qn.getInstance(),$e=n(48340),Xe=function(c){return'<div class="mermaid-wrapper code-block-wrapper" id="'.concat(c,`">
      <div class="markdown-code-toolbar-container" 
        data-language="mermaid" 
        data-content=""
        data-container-id="`).concat(c,`">
      </div>
    <div class="mermaid-container"><div class="alert alert-danger">\u6E32\u67D3\u4E2D...</div></div></div>`)};function qe(x){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$e.o.initialize(Object.assign({securityLevel:"loose"},c));function d(y){return y.split(/\s+/g)[0]}var v=x.renderer.rules.fence,i="";function r(y,X,_,ve,w){var je=y[X],be=je.info.trim(),gn=be?d(be):"";if(["mermaid","{mermaid}"].indexOf(gn)===-1)return v!==void 0?v(y,X,_,ve,w):"";var We=je.meta||{},hn="".concat(We.requestId,"-").concat(We.id);if(!We.nextId)return Xe(hn);var wn="",pn=[],it=document.createElement("div");document.body.appendChild(it);try{var Cn="mermaid-container";$e.o.mermaidAPI.render(Cn,je.content,function(Rt){var Ca=document.getElementById(Cn);if(Ca!==null){var xa=Ca.style,Wt=xa.maxWidth,Qt=xa.maxHeight,Da="";Object.entries({"max-width":Wt,"max-height":Qt}).forEach(function(Nn){var jn=h()(Nn,2),Yn=jn[0],nt=jn[1];nt&&(Da+="".concat(Yn,":").concat(nt,";"))}),pn.push(["style",Da])}wn=Rt,i=Rt},it)}catch(Rt){return wn=i,console.warn("Mermaid\u6E32\u67D3\u9519\u8BEF:",Rt),Xe(hn)}finally{it.remove(),i=""}pn.push(["src","data:image/svg+xml,".concat(encodeURIComponent(wn))]);var ut=encodeURIComponent(je.content);return'<div class="mermaid-wrapper code-block-wrapper" id="'.concat(hn,`">
      <div class="markdown-code-toolbar-container" 
        data-language="mermaid" 
        data-content="`).concat(ut,`"
        data-container-id="`).concat(hn,`">
      </div>
      <div class="mermaid-container">
        <img class="mermaid-container-img markdownItImageClickable" `).concat(w.renderAttrs({attrs:pn}),` />
      </div>
    </div>`)}x.renderer.rules.fence=r}var Be=n(45529),ne=n(16051),e=n.n(ne),Ie={name:"katex",plugin:Be.Z,options:{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$$",right:"$$",display:!1}]}},ce={name:"multimd-table",plugin:e(),options:{multiline:!0,rowspan:!0,headerless:!1,multibody:!0,aotolabel:!0}},ye={name:"mermaid",plugin:qe,options:{delay:100,throttleDelay:200,theme:"default",securityLevel:"loose",suppressErrors:!0}},he={basic:function(){return{markdownItOptions:{html:!0,xhtmlOut:!0,breaks:!0,linkify:!0,typographer:!0,quotes:`""''`},plugins:[],globalFunctions:{handleClipboard:!0,showImageInModal:!0,toggleCodeCollapse:!0}}},standard:function(){return{markdownItOptions:{html:!0,xhtmlOut:!0,breaks:!0,linkify:!0,typographer:!0,quotes:`""''`},plugins:[Ie,ce],globalFunctions:{handleClipboard:!0,showImageInModal:!0,toggleCodeCollapse:!0}}},full:function(){return{markdownItOptions:{html:!0,xhtmlOut:!0,breaks:!0,linkify:!0,typographer:!0,quotes:`""''`},plugins:[Ie,ce,ye],globalFunctions:{handleClipboard:!0,showImageInModal:!0,toggleCodeCollapse:!0},cssClasses:{codeHeader:"code-header",copyImg:"copy-img",extBox:"ext-box"}}},chat:function(){return{markdownItOptions:{html:!0,xhtmlOut:!0,breaks:!0,linkify:!0,typographer:!0,quotes:`""''`},plugins:[Ie,ce,ye],globalFunctions:{handleClipboard:!0,showImageInModal:!0,toggleCodeCollapse:!0},cssClasses:{codeHeader:"code-header",copyImg:"copy-img",extBox:"ext-box"}}}},z={katex:Ie,multimdTable:ce,mermaid:ye},Pe=n(89575),ln=n(15660),An=n.n(ln),rn=n(87013),un=n(45477),en=n(17706),nn=n(30235),te=n(92771),Sn=n(8674),fn=n(81233),Dn=n(44002),ot=n(61762),Nt=n(90047),In=n(9509),Ze=n(93972),Le=n(77424),Un=n(29208),Ke=n(64297),Qe=n(23683),He=n(82720),Re=n(44833),Bn=n(76456),tn=n(56252),En=function(c){if(typeof c!="string")return"";var d=document.createElement("div");return d.textContent=c,d.innerHTML},$n=function(){try{var x=oe()();return x.utils}catch{return null}}(),Mn=function(c){return $n&&$n.escapeHtml?$n.escapeHtml(c):En(c)},Zt=function(c){var d,v=((d=c.info)===null||d===void 0?void 0:d.trim().split(/\s+/g)[0])||"text",i=c.content,r="";if(v&&An().languages[v])try{var y=An().highlight(i,An().languages[v],v);r='<pre class="language-'.concat(v,'"><code class="language-').concat(v,'">').concat(y,"</code></pre>")}catch{r="<pre><code>".concat(Mn(i),"</code></pre>")}else r="<pre><code>".concat(Mn(i),"</code></pre>");return r},Ea=Zt;function Rn(x){return x.children?x.children.map(function(c){return c.type==="text"?c.content:c.type==="code_inline"?"`".concat(c.content,"`"):c.type==="strong_open"||c.type==="strong_close"?"**":c.type==="em_open"||c.type==="em_close"?"*":""}).join(""):""}function zn(x,c){for(var d=[],v=c+1;v<x.length&&x[v].type!=="tr_close";){var i=x[v];if(i.type==="th_open"||i.type==="td_open"){var r="";for(v++;v<x.length&&x[v].type!=="th_close"&&x[v].type!=="td_close";)x[v].type==="inline"&&(r+=Rn(x[v])),v++;d.push(r.trim())}v++}return d}function bt(x,c){for(var d=c+1,v=[],i=!1;d<x.length&&x[d].type!=="table_close";){var r=x[d];if(r.type==="thead_open")for(d++;d<x.length&&x[d].type!=="thead_close";){if(x[d].type==="tr_open"){var y=zn(x,d);if(v.push("| ".concat(y.join(" | ")," |")),!i){var X=y.map(function(){return"---"});v.push("| ".concat(X.join(" | ")," |")),i=!0}for(;d<x.length&&x[d].type!=="tr_close";)d++}d++}else if(r.type==="tbody_open")for(d++;d<x.length&&x[d].type!=="tbody_close";){if(x[d].type==="tr_open"){var _=zn(x,d);for(v.push("| ".concat(_.join(" | ")," |"));d<x.length&&x[d].type!=="tr_close";)d++}d++}d++}return v.join(`
`)}var xt=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.codeBlockWrapper,v=d===void 0?"code-block-wrapper":d,i=c.customTable,r=i===void 0?"markdown-it-custom-table":i,y={html_block:function(_,ve){return(0,Pe.F1)(_[ve].content)},image:function(_,ve){var w,je=_[ve],be=je.attrGet?je.attrGet("src"):"",gn=je.attrGet&&je.attrGet("alt")||"";return(w=je.meta)!==null&&w!==void 0&&w.nextId?`<span class="markdownItImageContainer">
        <img 
          src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" 
          data-src="`.concat(be,`" 
          alt="`).concat(Mn(gn),`" 
          class="markdownItImageClickable markdownItLazyImage"
          loading="lazy"
          onload="this.classList.add('loaded'); if(this.dataset.src && this.src !== this.dataset.src) {this.src = this.dataset.src;}"
          onerror="this.classList.add('error'); this.style.display = 'none';"
        />
      </span>`):`<span class="markdownItImageContainer">
        <img 
          src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" 
          class="markdownItLazyImage"
        />
      </span>`},fence:function(_,ve){var w,je=_[ve],be=((w=je.info)===null||w===void 0?void 0:w.trim().split(/\s+/g)[0])||"text",gn=je.content,We=gn.split(`
`).length-1,hn=je.meta||{},wn="".concat(hn.requestId,"-").concat(hn.id),pn=Ea(je);return'<div class="'.concat(v,'" id="').concat(wn,`">
      <div class="markdown-code-toolbar-container" 
        data-language="`).concat(be,`" 
        data-content="`).concat(encodeURIComponent(gn),`"
        data-line-count="`).concat(We,`"
        data-container-id="`).concat(hn.requestId,`"
        data-id="`).concat(wn,`">
      </div>
      `).concat(pn,`
    </div>`)},table_open:function(_,ve){var w=_[ve+1],je=w.meta||{},be="".concat(je?.requestId||"","-").concat(je?.id||"");return'<div class="'.concat(r,'" id="').concat(be,`">
      <div class="markdown-code-toolbar-container" 
        data-title="\u8868\u683C" 
        data-language="text"
        data-container-id="`).concat(je?.requestId||"",`"
        data-id="`).concat(be,`"
        data-content="`).concat(encodeURIComponent(bt(_,ve)),`"
        ></div>
      <table>`)},table_close:function(){return"</table></div>"}};return y},ua=n(49215),Ft=n(95141),Ha=n(63606),Pt=n(45742),st=n(57132),oa=n(83062),Ut=n(85804),ba=n(39902),Gn={"markdown-custom-process":"markdown-custom-process___XbvIR","process-header":"process-header___PbJv3","process-title":"process-title___D5O_C","process-controls":"process-controls___dihqk","status-completed":"status-completed___MeIxv",anticon:"anticon___IplOJ","status-running":"status-running___DB0Uo","loading-spinner":"loading-spinner___UooYw",spin:"spin___XLinb","status-error":"status-error___YZemo","control-btn":"control-btn___ufUOD","process-controls-actions":"process-controls-actions___qY3sV","process-content":"process-content___ntUHU","default-content":"default-content___IvKuJ"},mo=n(58594),Wa=n(30881),qn=n(66015),At=n(85576),rt={"see-detail-modal":"see-detail-modal___O4Htz","see-detail-header":"see-detail-header___ckdmQ","see-detail-header-title":"see-detail-header-title___aaWbf","see-detail-header-actions":"see-detail-header-actions___Kj3tI","see-detail-content":"see-detail-content___K7JsV"},j=n(85893),da=C().bind(rt),Qa=function(c){var d=c.visible,v=c.onClose,i=c.data,r=c.title,y=(0,f.useCallback)(function(){i&&(0,qn.Nq)(i,2,function(){xe.ZP.success("\u590D\u5236\u6210\u529F")})},[i]);return!i||!d?null:(0,j.jsx)(At.Z,{open:d,onCancel:v,footer:null,width:800,className:da(rt["see-detail-modal"]),destroyOnClose:!0,title:(0,j.jsxs)("div",{className:da(rt["see-detail-header"]),children:[(0,j.jsx)("div",{className:da(rt["see-detail-header-title"]),children:r}),(0,j.jsx)("div",{className:da(rt["see-detail-header-actions"]),children:(0,j.jsx)(oa.Z,{title:"\u590D\u5236",children:(0,j.jsx)(Ut.ZP,{type:"text",icon:(0,j.jsx)(st.Z,{}),onClick:y})})})]}),children:(0,j.jsx)("div",{className:da(rt["see-detail-content"]),children:(0,j.jsx)(mo.Z,{height:"400px",codeLanguage:Wa.vQ.JSON,value:JSON.stringify(i,null,2),codeOptimizeVisible:!1,minimap:!1,readOnly:!0})})})},fo=Qa,wt=C().bind(Gn);function go(x){var c=(0,ba.useModel)("chat"),d=c.getProcessingById,v=c.processingList,i=(0,f.useState)(null),r=h()(i,2),y=r[0],X=r[1],_=(0,f.useState)(B()({},x)),ve=h()(_,2),w=ve[0],je=ve[1],be=(0,f.useState)(!1),gn=h()(be,2),We=gn[0],hn=gn[1];(0,f.useEffect)(function(){if(w.status===Ft.Xk.EXECUTING){var Cn=d(w.executeId);Cn&&Cn.status!==w.status&&je(Cn)}},[v,w.executeId]);var wn=(0,f.useCallback)(function(){switch(w.status){case Ft.Xk.FINISHED:return(0,j.jsxs)("div",{className:wt(Gn["status-completed"]),children:[(0,j.jsx)(Ha.Z,{}),"\u5DF2\u5B8C\u6210"]});case Ft.Xk.EXECUTING:return(0,j.jsxs)("div",{className:wt(Gn["status-running"]),children:[(0,j.jsx)("div",{className:wt(Gn["loading-spinner"])}),"\u8FD0\u884C\u4E2D"]});case Ft.Xk.FAILED:return(0,j.jsx)("div",{className:wt(Gn["status-error"]),children:"\u274C \u9519\u8BEF"});default:return null}},[w.status]),pn=(0,f.useCallback)(function(){if(!y){xe.ZP.error("\u6682\u65E0\u6570\u636E");return}(0,yn.Nq)(y,2,function(){xe.ZP.success("\u590D\u5236\u6210\u529F")})},[y]),it=(0,f.useCallback)(function(Cn){if(!Cn)return null;var ut=(0,Pe.Xh)(Cn);return{params:ut.input||{},response:ut.data||null}},[]);return(0,f.useEffect)(function(){if(w.executeId&&w.status===Ft.Xk.FINISHED){var Cn=it(w.result);if((0,W.isEqual)(Cn,y))return;X(Cn)}},[w.executeId,w.status]),w.executeId?(0,j.jsxs)("div",{className:wt(Gn["markdown-custom-process"]),children:[(0,j.jsxs)("div",{className:wt(Gn["process-header"]),children:[(0,j.jsx)("div",{className:wt(Gn["process-title"]),children:w.name||"\u6682\u65E0\u540D\u79F0"}),(0,j.jsxs)("div",{className:wt(Gn["process-controls"]),children:[wn(),(0,j.jsxs)("div",{className:wt(Gn["process-controls-actions"]),children:[(0,j.jsx)(oa.Z,{title:"\u67E5\u770B\u8BE6\u60C5",children:(0,j.jsx)(Ut.ZP,{type:"text",icon:(0,j.jsx)(Pt.Z,{}),onClick:function(){return hn(!0)}})}),(0,j.jsx)(oa.Z,{title:"\u590D\u5236",children:(0,j.jsx)(Ut.ZP,{type:"text",icon:(0,j.jsx)(st.Z,{}),onClick:pn})})]})]})]}),(0,j.jsx)(fo,{title:w.name||"\u6682\u65E0\u540D\u79F0",visible:We,onClose:function(){return hn(!1)},data:y},w.executeId)]}):null}var ca=(0,f.memo)(go,function(x,c){return x.executeId===c.executeId&&x.status===c.status}),ja=n(89035),Fa=n(23430),Ba=n(50136),ft={toolbar:"toolbar___Iga8_",toolbarContainer:"toolbarContainer___RhSiZ",info:"info___LE9SI",title:"title___iZdu2",lineCount:"lineCount___MBq6Q",zoomLevel:"zoomLevel___ZXkXD",actions:"actions___CrX20","ant-dropdown-menu":"ant-dropdown-menu___TogNW","ant-dropdown-menu-item":"ant-dropdown-menu-item___kVN2S",anticon:"anticon___VvVoP","ant-btn-sm":"ant-btn-sm___pHg0o","ant-btn-icon-only":"ant-btn-icon-only___CiLdQ"},Xt={MERMAID:"mermaid"},sa={MARKDOWN_CODE_TOOLBAR_CONTAINER:".markdown-code-toolbar-container",MERMAID_CONTAINER:".mermaid-container",MERMAID_SOURCE_CODE:".mermaid-source-code",MERMAID_CONTAINER_IMG:".mermaid-container-img"},za={TEXTAREA:{FONT_SIZE:"16px",POSITION:"fixed",LEFT:"-999999px",TOP:"-999999px"},DISPLAY:{BLOCK:"block",NONE:"none"}},va={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&"},Vt={COPY_FAILED:"\u590D\u5236\u5931\u8D25",COPY_FAILED_NO_CONTENT:"\u590D\u5236\u5931\u8D25\uFF1A\u672A\u627E\u5230\u4EE3\u7801\u5185\u5BB9",COPY_SUCCESS:"\u590D\u5236\u6210\u529F",COPYING:"\u590D\u5236\u4E2D",DOWNLOAD_FAILED:"\u4E0B\u8F7D\u5931\u8D25",DOWNLOAD_PNG_SUCCESS:function(c,d){return"PNG\u56FE\u7247\u4E0B\u8F7D\u6210\u529F (".concat(c,"\xD7").concat(d,")")},DOWNLOAD_SVG_SUCCESS:"SVG\u56FE\u7247\u4E0B\u8F7D\u6210\u529F",IMAGE_NOT_FOUND:"\u672A\u627E\u5230\u56FE\u7247\u5143\u7D20",IMAGE_LOAD_FAILED:"\u56FE\u7247\u52A0\u8F7D\u5931\u8D25",CANVAS_FAILED:"\u4E0B\u8F7D\u5931\u8D25",SIZE_GET_FAILED:"\u65E0\u6CD5\u83B7\u53D6\u56FE\u7247\u539F\u59CB\u5C3A\u5BF8",PNG_GENERATE_FAILED:"\u751F\u6210PNG\u5931\u8D25",SVG_DATA_FAILED:"\u65E0\u6CD5\u83B7\u53D6SVG\u6570\u636E"},ea={PNG:{MIME_TYPE:"image/png",QUALITY:1,SCALE_FACTOR:10},SVG:{MIME_TYPE:"image/svg+xml",DATA_PREFIX:"data:image/svg+xml,"}},Ya={POSITION_CALCULATION:300},Et={SMOOTHING_ENABLED:!0,SMOOTHING_QUALITY:"high"},Ma=function(c,d){var v,i=(v=document.getElementById(c))===null||v===void 0?void 0:v.querySelector(sa.MARKDOWN_CODE_TOOLBAR_CONTAINER),r=i?.dataset||{},y=r.content,X=r.title,_=r.language;return{content:y?decodeURIComponent(y):d.content,title:X||d.title,language:_||d.language}},ho=function(c,d,v){if(!c)return d;var i=document.getElementById(c);if(!i)return d;var r=i.querySelector(sa.MERMAID_CONTAINER);if(!r)return d;var y=i.querySelector(sa.MERMAID_SOURCE_CODE);if(d)r.style.display=za.DISPLAY.BLOCK,y&&y.remove();else{r.style.display=za.DISPLAY.NONE;var X=Ea({info:"mermaid",content:v}),_=document.createElement("div");_.className=sa.MERMAID_SOURCE_CODE.slice(1),_.innerHTML=X,i.appendChild(_)}return!d},po=function(c){var d;if(c){var v=(d=document.getElementById(c))===null||d===void 0?void 0:d.querySelector(sa.MERMAID_CONTAINER_IMG);if(!v){xe.ZP.error(Vt.IMAGE_NOT_FOUND);return}var i=document.createElement("canvas"),r=i.getContext("2d");if(!r){xe.ZP.error(Vt.CANVAS_FAILED);return}var y=function(){var _=v.naturalWidth*ea.PNG.SCALE_FACTOR,ve=v.naturalHeight*ea.PNG.SCALE_FACTOR;if(_===0||ve===0){xe.ZP.error(Vt.SIZE_GET_FAILED);return}i.width=_,i.height=ve,r.imageSmoothingEnabled=Et.SMOOTHING_ENABLED,r.imageSmoothingQuality=Et.SMOOTHING_QUALITY,r.drawImage(v,0,0,_,ve),i.toBlob(function(w){if(w){var je=URL.createObjectURL(w),be=document.createElement("a");be.href=je,be.download="mermaid-chart-".concat(Date.now(),".png"),be.click(),URL.revokeObjectURL(je),xe.ZP.success(Vt.DOWNLOAD_PNG_SUCCESS(_,ve))}else xe.ZP.error(Vt.PNG_GENERATE_FAILED)},ea.PNG.MIME_TYPE,ea.PNG.QUALITY)};v.complete&&v.naturalWidth!==0?y():(v.onload=y,v.onerror=function(){xe.ZP.error(Vt.IMAGE_LOAD_FAILED)})}},Co=function(c){var d;if(c){var v=(d=document.getElementById(c))===null||d===void 0?void 0:d.querySelector(sa.MERMAID_CONTAINER_IMG);if(!v){xe.ZP.error(Vt.IMAGE_NOT_FOUND);return}var i=v.src;if(i.startsWith(ea.SVG.DATA_PREFIX)){var r=decodeURIComponent(i.replace(ea.SVG.DATA_PREFIX,"")),y=new Blob([r],{type:ea.SVG.MIME_TYPE}),X=URL.createObjectURL(y),_=document.createElement("a");_.href=X,_.download="mermaid-chart-".concat(Date.now(),".svg"),_.click(),URL.revokeObjectURL(X),xe.ZP.success(Vt.DOWNLOAD_SVG_SUCCESS)}else xe.ZP.error(Vt.SVG_DATA_FAILED)}},xo=n(15009),lt=n.n(xo),Xa=n(99289),kt=n.n(Xa),Jt=function(c,d,v,i){var r=(0,f.useState)({top:0,left:0,width:0}),y=h()(r,2),X=y[0],_=y[1],ve=(0,f.useCallback)(function(je,be){var gn=document.getElementById(be);if(!gn){console.warn("\u672A\u627E\u5230 id: ".concat(be," \u5BF9\u5E94\u7684\u5143\u7D20"));return}var We=document.getElementById(je);if(!We){console.warn("\u672A\u627E\u5230 markdown-container \u7236\u5143\u7D20");return}var hn=Ma(be,{content:v.content,title:v.title,language:v.language});i(function(ut){return B()(B()({},ut),{},{content:hn.content,title:hn.title})});var wn=gn.getBoundingClientRect(),pn=We.getBoundingClientRect(),it=wn.top-pn.top,Cn=wn.left-pn.left;_({width:wn.width,top:it,left:Cn})},[v.content,v.title,v.language,i]),w=(0,W.debounce)(function(){ve(c,d)},200);return(0,f.useEffect)(function(){if(!(!d||!c)){var je=setTimeout(function(){var be;ve(c,d),(be=document.getElementById(d))===null||be===void 0||be.addEventListener("resize",w)},Ya.POSITION_CALCULATION);return function(){var be;clearTimeout(je),(be=document.getElementById(d))===null||be===void 0||be.removeEventListener("resize",w)}}},[d,c,ve]),X},_t=function(c){var d=(0,f.useState)(!1),v=h()(d,2),i=v[0],r=v[1],y=(0,f.useCallback)(kt()(lt()().mark(function X(){var _;return lt()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!i){w.next=2;break}return w.abrupt("return");case 2:return r(!0),w.prev=3,_=Ma(c.id,{content:c.content,title:c.title,language:c.language}),w.next=7,(0,yn.TE)(_.content,c.onCopy);case 7:w.next=12;break;case 9:w.prev=9,w.t0=w.catch(3),console.error("\u590D\u5236\u5931\u8D25:",w.t0);case 12:return w.prev=12,r(!1),w.finish(12);case 15:case"end":return w.stop()}},X,null,[[3,9,12,15]])})),[i,c.id,c.content,c.title,c.language,c.onCopy]);return{isCopying:i,handleCopy:y}},Ao=function(c){var d=(0,f.useState)(!1),v=h()(d,2),i=v[0],r=v[1],y=c.language.toLowerCase()===Xt.MERMAID,X=(0,f.useCallback)(function(_){var ve=ho(_,i,c.content);r(ve)},[i,c.content]);return{isMermaid:y,isCodeView:i,toggleCodeView:X}},Ja=function(c){var d=(0,f.useState)(c),v=h()(d,2),i=v[0],r=v[1],y=Jt(i.containerId,i.id,i,r),X=_t(i),_=X.isCopying,ve=X.handleCopy,w=Ao(i),je=w.isMermaid,be=w.isCodeView,gn=w.toggleCodeView,We=function(){gn(i.id||"")},hn=function(){po(i.id||"")},wn=function(){Co(i.id||"")};return(0,j.jsx)("div",{className:"".concat(ft.toolbar),style:{top:y.top,left:y.left,width:y.width},children:(0,j.jsxs)("div",{className:ft.toolbarContainer,children:[(0,j.jsx)("div",{className:ft.info,children:(0,j.jsx)("span",{className:ft.title,children:i.title})}),(0,j.jsxs)("div",{className:ft.actions,children:[je&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(oa.Z,{title:"\u67E5\u770B\u6E90\u4EE3\u7801",children:(0,j.jsx)(Ut.ZP,{type:be?"primary":"text",icon:(0,j.jsx)(ja.Z,{}),onClick:We})}),(0,j.jsx)(Ba.Z,{menu:{items:[{key:"svg",label:"\u4E0B\u8F7DSVG\u56FE\u7247",onClick:wn},{key:"png",label:"\u4E0B\u8F7DPNG\u56FE\u7247",onClick:hn}]},trigger:["click"],children:(0,j.jsx)(oa.Z,{title:"\u4E0B\u8F7D",children:(0,j.jsx)(Ut.ZP,{type:"text",icon:(0,j.jsx)(Fa.Z,{})})})})]}),(0,j.jsx)(oa.Z,{title:"\u590D\u5236",children:(0,j.jsx)(Ut.ZP,{type:"text",icon:(0,j.jsx)(st.Z,{}),loading:_,className:ft.copyBtn,onClick:ve})})]})]})})},_a=(0,f.memo)(Ja,function(x,c){return x.id===c.id}),ya={"markdown-container":"markdown-container___B4lMY","collapse-text":"collapse-text___r9y8q",katex:"katex___rSatW","katex-display":"katex-display___JzeuM"};function Ra(x,c){for(var d=0,v=c-1;v>=0;v--){var i=x[v];if(i.type==="list_item_close")d--;else if(i.type==="list_item_open"&&(d++,d>0))return!0;if(i.type==="bullet_list_close"||i.type==="ordered_list_close")break}return!1}function Kt(x){var c=x.renderer.rules.paragraph_open||function(v,i,r,y,X){return X.renderToken(v,i,r)},d=x.renderer.rules.paragraph_close||function(v,i,r,y,X){return X.renderToken(v,i,r)};x.renderer.rules.paragraph_open=function(v,i,r,y,X){return Ra(v,i)?'<div class="paragraph">':c(v,i,r,y,X)},x.renderer.rules.paragraph_close=function(v,i,r,y,X){return Ra(v,i)?"</div>":d(v,i,r,y,X)}}var Lt=function(x){return x.Custom="custom",x.Image="image",x.Standard="standard",x}({}),ma=["fence","thead_open"],fa=function(c){var d,v,i=c.findIndex(function(_){var ve;return(ve=_.children)===null||ve===void 0?void 0:ve.some(function(w){return w?.type===Lt.Image})});if(i!==-1&&(d=c[i+1])!==null&&d!==void 0&&(d=d.meta)!==null&&d!==void 0&&d.id&&(v=c[i-1])!==null&&v!==void 0&&(v=v.meta)!==null&&v!==void 0&&v.id){var r,y,X;c[i].children.forEach(function(_){var ve,w;_.meta=B()(B()({},_.meta),{},{nextId:(ve=c[i+1])===null||ve===void 0?void 0:ve.meta.id,prevId:(w=c[i-1])===null||w===void 0?void 0:w.meta.id})}),c[i+1].meta=B()(B()({},c[i+1].meta),{},{component:Lt.Image,prevId:(r=c[i])===null||r===void 0?void 0:r.meta.id}),c[i].meta=B()(B()({},c[i].meta),{},{component:Lt.Image,nextId:(y=c[i+1])===null||y===void 0?void 0:y.meta.id}),c[i-1].meta=B()(B()({},c[i-1].meta),{},{component:Lt.Image,prevId:(X=c[i])===null||X===void 0?void 0:X.meta.id})}return c};function Eo(x,c){var d=x.map(function(v,i){return B()(B()({},v),{},{meta:B()(B()({},v.meta),{},{requestId:c,id:"".concat(v?.type).concat(v!=null&&v.info?"-"+v?.info:"","-").concat(i),isFirst:i===0,isLast:i===x.length-1,toolbar:ma.includes(v.type)})})});return d.forEach(function(v,i){var r,y;v.meta.prevId=((r=d[i-1])===null||r===void 0||(r=r.meta)===null||r===void 0?void 0:r.id)||"",v.meta.nextId=((y=d[i+1])===null||y===void 0||(y=y.meta)===null||y===void 0?void 0:y.id)||""}),fa(d)}var $a=["config"],jo=C().bind(ya),qa=function(c,d){var v;if((v=c.meta)!==null&&v!==void 0&&v.component){var i=c.meta,r=i.props,y=i.component;if(y){var X=ca;return(0,f.createElement)(X,B()(B()({},r),{},{key:"process-".concat(y,"-").concat(r.executeId||d)}))}else return(0,j.jsxs)("div",{className:"custom-error",children:['Component "',y,'" not found']},"process-".concat(y,"-").concat(d,"-error"))}return null},eo=function(c,d){var v=[];d.renderer.render(c,d.options,{});var i=[],r=null;return c.forEach(function(y,X){var _,ve=(_=y.meta)===null||_===void 0?void 0:_.component,w=ve===Lt.Image?Lt.Image:ve?Lt.Custom:Lt.Standard;!r||r.type!==w?(r={type:w,tokens:[y],startIndex:X},i.push(r)):r.tokens.push(y)}),i.forEach(function(y,X){if(y.type===Lt.Custom)y.tokens.forEach(function(w,je){var be=qa(w,y.startIndex+je);be&&v.push(be)});else if(y.type===Lt.Image){var _=d.renderer.render(y.tokens,d.options,{});_&&v.push((0,j.jsx)("div",{dangerouslySetInnerHTML:{__html:_}},"image-group-".concat(y.startIndex,"-").concat(X)))}else if(y.tokens.length>0){var ve=d.renderer.render(y.tokens,d.options,{});ve&&v.push((0,j.jsx)("div",{dangerouslySetInnerHTML:{__html:ve}},"standard-group-".concat(y.startIndex,"-").concat(X)))}}),v},yo=(0,f.memo)(function(x){var c=x.id,d=x.content,v=x.config,i=v===void 0?he.chat():v,r=x.className,y=x.onCopy,X=(0,f.useRef)(null),_=(0,f.useRef)(!1),ve=(0,f.useRef)(null),w=(0,f.useState)([]),je=h()(w,2),be=je[0],gn=je[1],We=(0,f.useState)([]),hn=h()(We,2),wn=hn[0],pn=hn[1],it=(0,f.useState)([]),Cn=h()(it,2),ut=Cn[0],Rt=Cn[1],Ca=(0,f.useRef)(new Map),xa=(0,f.useRef)(),Wt=(0,f.useMemo)(function(){var Nn=i.markdownItOptions,jn=Nn===void 0?{html:!0,xhtmlOut:!0,breaks:!0,linkify:!0,typographer:!0,quotes:`""''`}:Nn,Yn=i.plugins,nt=Yn===void 0?[]:Yn,Xn=i.customRules,ht=Xn===void 0?{}:Xn,ka=i.cssClasses,bo=ka===void 0?{}:ka,dt=oe()(jn),ta=xt(bo);return Object.entries(ta).forEach(function(aa){var qt=h()(aa,2),et=qt[0],la=qt[1];dt.renderer.rules[et]=la}),Object.entries(ht).forEach(function(aa){var qt=h()(aa,2),et=qt[0],la=qt[1];dt.renderer.rules[et]=la}),new ua.ZP(dt,(0,ua.bd)()),Kt(dt),nt.forEach(function(aa){var qt=aa.plugin,et=aa.options,la=et===void 0?{}:et,so=aa.async,Fo=so===void 0?!1:so;Fo?dt.use(qt(dt,la)):dt.use(qt,la)}),X.current=dt,dt},[i]);(0,f.useEffect)(function(){if(!_.current){var Nn=i.globalFunctions,jn=Nn===void 0?{}:Nn;return Te.registerAllFunctions(jn),_.current=!0,function(){Te.registerAllFunctions({}),Ca.current.forEach(function(Yn){try{Yn.unmount()}catch(nt){console.error("\u6E05\u7406React\u6839\u8282\u70B9\u5931\u8D25:",nt)}}),Ca.current.clear(),xa.current&&clearTimeout(xa.current)}}},[i]);var Qt=(0,f.useCallback)(function(Nn){var jn,Yn=Nn.target,nt=(0,Pe.P4)(Yn,"markdownItImageClickable"),Xn=(nt==null||(jn=nt.dataset)===null||jn===void 0?void 0:jn.src)||nt?.src||"";if(Xn){window.showImageInModal(Xn);return}},[y]);(0,f.useEffect)(function(){var Nn=ve.current;return Nn&&Nn.addEventListener("click",Qt),function(){Nn&&Nn.removeEventListener("click",Qt)}},[Qt]),(0,f.useEffect)(function(){var Nn=d?Wt.parse(d,{}):[],jn=Eo(Nn,c);gn(jn)},[d,Wt,c]),(0,f.useEffect)(function(){var Nn=eo(be,Wt);Rt(Nn)},[Wt,be]),(0,f.useEffect)(function(){pn(be.filter(function(Nn){var jn;return(jn=Nn.meta)===null||jn===void 0?void 0:jn.toolbar}))},[be]);var Da=(0,f.useMemo)(function(){return wn.length?wn.map(function(Nn){var jn,Yn=Nn.meta||{};if(!(Yn!=null&&Yn.requestId)||!(Yn!=null&&Yn.id))return null;var nt="".concat(Yn.requestId,"-").concat(Yn.id),Xn=Nn.content,ht=((jn=Nn.info)===null||jn===void 0?void 0:jn.trim().split(/\s+/g)[0])||"text";return(0,j.jsx)("div",{children:(0,j.jsx)(_a,{title:ht,language:ht,containerId:Yn.requestId,content:Xn,id:nt,collapsible:!0,defaultCollapsed:!1,onCollapseChange:function(){},onCopy:y})},nt)}):null},[wn,c,y]);return(0,j.jsxs)("div",{ref:ve,id:"".concat(c),className:jo(ya["markdown-container"],r),children:[ut,Da]})},function(x,c){return x.content===c.content&&(0,W.isEqual)(x.config,c.config)&&x.className===c.className}),Gt=function(c){return(0,f.memo)(function(d){var v=d.config,i=v===void 0?{}:v,r=Q()(d,$a),y=(0,f.useMemo)(function(){return B()(B()(B()({},c),i),{},{plugins:[].concat(D()(c.plugins||[]),D()(i.plugins||[])),customRules:B()(B()({},c.customRules),i.customRules),globalFunctions:B()(B()({},c.globalFunctions),i.globalFunctions),cssClasses:B()(B()({},c.cssClasses),i.cssClasses)})},[i]);return(0,j.jsx)(yo,B()(B()({},r),{},{config:y}))})},Ta=Gt(he.chat()),Pa=Gt(he.standard()),na=Gt(he.basic()),Lo=Gt(he.full()),Oo=null,La=n(1675),ga=n(91120),Oa=n(74855),no=n.n(Oa),to=n(88773),So=n(88834),ao=n(71437),ra={container:"container___bqr6a","elapsed-time":"elapsed-time___NLFZM","vertical-line":"vertical-line___viPQ6","more-action":"more-action___oDxDL",icon:"icon___hoIgl","copy-image":"copy-image___YsG7v"},Sa=C().bind(ra),oo=function(c){var d=c.messageInfo,v=d||{},i=v.finalResult,r=(0,ba.useModel)("conversationInfo"),y=r.handleDebug,X=(0,f.useMemo)(function(){return i?((i?.endTime-i?.startTime)/1e3).toFixed(1):0},[i]);return(0,j.jsx)("div",{className:Sa(ra.container,"flex","content-between","items-center"),children:(0,j.jsxs)("div",{className:Sa("flex","items-center",ra["elapsed-time"]),children:[(0,j.jsxs)(ee.Z,{condition:!!i,children:[(0,j.jsx)("span",{children:"".concat(X,"s")}),(0,j.jsxs)(ee.Z,{condition:!!(i!=null&&i.totalTokens),children:[(0,j.jsx)("span",{className:Sa(ra["vertical-line"])}),(0,j.jsx)("span",{children:"".concat(i?.totalTokens," Tokens")})]})]}),(0,j.jsx)(ee.Z,{condition:!!i,children:(0,j.jsx)(ao.Z,{className:ra.icon,icon:(0,j.jsx)("img",{src:So,alt:""}),onClick:function(){return y(d)},title:"\u8C03\u8BD5",type:Ft.Ai.White})})]})})},Do=oo,$t={container:"container___I82RP","elapsed-time":"elapsed-time___VSdJP","vertical-line":"vertical-line___RYAxp","more-action":"more-action___J8lvL",icon:"icon___V_fce","copy-image":"copy-image___Lbh8o"},Za=C().bind($t),ha=function(c){var d=c.messageInfo,v=d||{},i=v.text,r=function(){xe.ZP.success("\u590D\u5236\u6210\u529F")};return(0,j.jsx)("div",{className:Za($t.container,"flex","content-between","items-center"),children:(0,j.jsx)("div",{className:Za("flex",$t["more-action"]),children:(0,j.jsx)(Oa.CopyToClipboard,{text:i||"",onCopy:r,children:(0,j.jsx)(ao.Z,{className:$t.icon,icon:(0,j.jsx)("img",{className:Za($t["copy-image"]),src:V,alt:""}),title:"\u590D\u5236",type:Ft.Ai.White})})})})},Io=ha,Ua={container:"container___bMNUQ","more-action":"more-action___PPoj0"},pa=C().bind(Ua),Ht=function(c){var d=c.messageInfo,v=function(){xe.ZP.success("\u590D\u5236\u6210\u529F")};return(0,j.jsxs)("div",{className:pa(Ua.container,"flex","content-between","items-center"),children:[(0,j.jsx)("div",{className:pa("flex",Ua["more-action"]),children:(0,j.jsx)(Oa.CopyToClipboard,{text:d?.text||"",onCopy:v,children:(0,j.jsxs)("span",{className:pa("flex","content-center","items-center","cursor-pointer"),children:[(0,j.jsx)("img",{src:V,alt:""}),(0,j.jsx)("span",{children:"\u590D\u5236"})]})})}),(0,j.jsx)("span",{children:(0,Pe.BK)(d?.time)})]})},Bt=Ht,No=n(66371),gt={container:"container___zSEQO",avatar:"avatar___IfDvJ",author:"author___AmRDb","inner-container":"inner-container___rireg","think-content":"think-content___Qas0a","chat-content":"chat-content___FWF0e",user:"user___mQCPt","user-action-box":"user-action-box___T2sE4","copy-btn":"copy-btn___vb1lQ","copy-image":"copy-image___Hbxu3"},Mt=C().bind(gt),wa=(0,f.memo)(function(x){var c,d=x.className,v=x.contentClassName,i=x.roleInfo,r=x.messageInfo,y=x.mode,X=y===void 0?"chat":y,_=(0,ba.useModel)("userInfo"),ve=_.userInfo,w=(0,f.useState)(""),je=h()(w,2),be=je[0],gn=je[1],We=ve||JSON.parse(localStorage.getItem(La.CD)),hn=function(){var Cn=i.assistant,ut=i.system;switch(r?.role){case ga.hZ.USER:return{name:We?.nickName||We?.userName||"\u6E38\u5BA2",avatar:We?.avatar||u};case ga.hZ.ASSISTANT:return{name:Cn.name,avatar:Cn.avatar||ae};case ga.hZ.SYSTEM:return{name:ut.name,avatar:ut.avatar||ae}}}(),wn=function(){xe.ZP.success("\u590D\u5236\u6210\u529F")},pn=function(){xe.ZP.success("\u4EE3\u7801\u590D\u5236\u6210\u529F")},it={cssClasses:{codeBlockWrapper:"code-block-wrapper",codeHeader:"code-header",extBox:"ext-box",copyImg:"copy-img",customTable:"markdown-it-custom-table",imageOverlay:"image-overlay"},globalFunctions:{handleClipboard:!0,showImageInModal:!0,toggleCodeCollapse:!0}};return(0,f.useEffect)(function(){return!(r!=null&&r.id)&&!be&&gn((0,to.Z)()),function(){gn("")}},[r?.id]),(0,j.jsxs)("div",{className:Mt(gt.container,"flex",d),children:[(0,j.jsx)("img",{className:Mt(gt.avatar),src:hn?.avatar,alt:""}),(0,j.jsxs)("div",{className:Mt("flex-1","overflow-hide"),children:[(0,j.jsx)("div",{className:Mt(gt.author),children:hn?.name}),!!(r!=null&&(c=r.attachments)!==null&&c!==void 0&&c.length)&&(0,j.jsx)(b.Z,{files:r?.attachments}),r?.role===ga.hZ.USER&&!!(r!=null&&r.text)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:Mt(gt["chat-content"],gt.user,"radius-6",v),children:(0,j.jsx)(Ta,{id:"text-".concat(r?.id||be),content:r.text,config:it,onCopy:pn})}),(0,j.jsx)("div",{className:Mt(gt["user-action-box"],"flex","items-center"),children:(0,j.jsx)(no(),{text:r.text||"",onCopy:wn,children:(0,j.jsxs)("span",{className:Mt("flex","items-center","cursor-pointer",gt["copy-btn"]),children:[(0,j.jsx)("img",{className:Mt(gt["copy-image"]),src:V,alt:""}),(0,j.jsx)("span",{children:"\u590D\u5236"})]})})})]}),(0,j.jsxs)(ee.Z,{condition:r?.role!==ga.hZ.USER,children:[(0,j.jsx)(ee.Z,{condition:!!(r!=null&&r.status),children:(0,j.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:12},children:(0,j.jsx)("div",{style:{flex:1},children:(0,j.jsx)(No.Z,{messageInfo:r})})})}),(!!(r!=null&&r.think)||!!(r!=null&&r.text))&&(0,j.jsxs)("div",{className:Mt(gt["inner-container"],v),children:[!!(r!=null&&r.think)&&(0,j.jsx)("div",{className:Mt(gt["think-content"],"radius-6","w-full"),children:(0,j.jsx)(Ta,{id:"think-".concat(r?.id||be),content:r.think,config:it,onCopy:pn})}),!!(r!=null&&r.text)&&(0,j.jsx)("div",{className:Mt(gt["chat-content"],"radius-6","w-full",S()({},gt.typing,r.status===Ft.ge.Incomplete||r.status===Ft.ge.Loading)),children:(0,j.jsx)(Ta,{id:"text-".concat(r?.id||be),content:r.text,config:it,onCopy:pn})})]}),(0,j.jsx)(ee.Z,{condition:r&&(r?.status===Ft.ge.Complete||!(r!=null&&r.status)),children:X==="chat"?(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:12},children:[(0,j.jsx)("div",{style:{flex:1},children:(0,j.jsx)(Io,{messageInfo:r})}),(0,j.jsx)(Do,{messageInfo:r})]}):X==="home"?(0,j.jsx)(Bt,{messageInfo:r}):null})]})]})]})},function(x,c){return(0,W.isEqual)(x.messageInfo,c.messageInfo)}),Va=wa},90740:function(Fe,ie,n){n.d(ie,{Z:function(){return W}});var re=n(9783),S=n.n(re),k=n(32544),h=n(75216),ae=n(91120),u=n(95141),V=n(94184),b=n.n(V),ee=n(9980),Y=n.n(ee),D=n(67294),a={container:"container___pzeXE",avatar:"avatar___QNC2R",author:"author___eO9xt","inner-container":"inner-container___MiyBz","think-content":"think-content___NYHs_","chat-content":"chat-content___voyQR",user:"user___loHh3"},Q=n(66371),N=n(85893),B=b().bind(a),U=Y()({html:!0,breaks:!0,linkify:!0}),C=function(oe){var f,s=oe.className,K=oe.contentClassName,I=oe.messageInfo;return(0,N.jsx)("div",{className:B(a.container,"flex",s),children:(0,N.jsxs)("div",{className:B("flex-1"),children:[!!(I!=null&&(f=I.attachments)!==null&&f!==void 0&&f.length)&&(0,N.jsx)(k.Z,{files:I?.attachments}),(0,N.jsxs)(h.Z,{condition:I?.role!==ae.hZ.USER,children:[I.status!==u.ge.Complete&&(0,N.jsx)(h.Z,{condition:!!(I!=null&&I.status),children:(0,N.jsx)(Q.Z,{messageInfo:I})}),(!!(I!=null&&I.think)||!!(I!=null&&I.text))&&(0,N.jsxs)("div",{className:B(a["inner-container"],K),children:[!!(I!=null&&I.think)&&!!U.render(I.think)&&(0,N.jsx)("div",{className:B(a["think-content"],"radius-6","w-full"),dangerouslySetInnerHTML:{__html:U.render(I.think)}}),!!(I!=null&&I.text)&&(0,N.jsx)("div",{className:B(a["chat-content"],"radius-6","w-full",S()({},a.typing,I.status===u.ge.Incomplete||I.status===u.ge.Loading)),dangerouslySetInnerHTML:{__html:U.render(I.text)}})]})]})]})})},W=C},58594:function(Fe,ie,n){n.d(ie,{Z:function(){return Be}});var re=n(97857),S=n.n(re),k=n(15009),h=n.n(k),ae=n(99289),u=n.n(ae),V=n(5574),b=n.n(V),ee=n(35044),Y=n(90740),D=n(87025),a=n(85576),Q=n(85804),N=n(25278),B=n(94184),U=n.n(B),C=n(67294),W=n(39902),me=n(88773),oe={btn:"btn___JOPmv","chat-wrapper":"chat-wrapper___PS6Tu","replace-btn":"replace-btn___AEijv",footer:"footer___MV0En","chat-input":"chat-input___wgxG5",input:"input___WoXKg","icon-box":"icon-box___cHWvw","send-image":"send-image___kjNJy"},f=n(85893),s=U().bind(oe),K=function(e){var Ie,ce,ye=e.title,he=e.open,z=e.onCancel,Pe=e.onReplace,ln=e.codeLanguage,An=(0,C.useState)(""),rn=b()(An,2),un=rn[0],en=rn[1],nn=(0,W.useModel)("assistantOptimize"),te=nn.messageList,Sn=nn.setMessageList,fn=nn.onMessageSend,Dn=nn.messageViewRef,ot=nn.allowAutoScrollRef,Nt=nn.resetInit,In=(0,C.useState)(""),Ze=b()(In,2),Le=Ze[0],Un=Ze[1];(0,C.useEffect)(function(){return Un((0,me.Z)()),function(){Nt()}},[]),(0,C.useEffect)(function(){var He=Dn.current;if(He){var Re=function(){var tn=He.scrollTop,En=He.scrollHeight,$n=He.clientHeight;tn+$n<En?ot.current=!1:ot.current=!0};return He.addEventListener("scroll",Re),function(){He.removeEventListener("scroll",Re)}}},[]);var Ke=function(){var He=u()(h()().mark(function Re(){var Bn;return h()().wrap(function(En){for(;;)switch(En.prev=En.next){case 0:Sn([]),un&&(en(""),Bn={requestId:Le,prompt:un,codeLanguage:ln},fn(Bn,D.L.code));case 2:case"end":return En.stop()}},Re)}));return function(){return He.apply(this,arguments)}}(),Qe=function(Re){Re.preventDefault();var Bn=Re.target,tn=Bn.value,En=Bn.selectionStart,$n=Bn.selectionEnd;if(Re.nativeEvent.keyCode===13&&(Re.nativeEvent.shiftKey||Re.nativeEvent.ctrlKey)){var Mn=tn.slice(0,En)+`
`+tn.slice($n);en(Mn)}else if(Re.nativeEvent.keyCode===13&&tn.trim()){var Zt={requestId:Le,prompt:un,codeLanguage:ln};fn(Zt,D.L.code),en("")}};return(0,f.jsxs)(a.Z,{title:ye,open:he,onCancel:function(Re){Sn([]),z?.(Re)},mask:!1,maskClosable:!1,footer:null,children:[(0,f.jsx)("div",{ref:Dn,className:s(oe["chat-wrapper"],"flex-1"),children:te?.length>0?(0,f.jsx)(f.Fragment,{children:te?.map(function(He,Re){return(0,f.jsx)(Y.Z,{ifShowReplace:!0,onReplace:Pe,messageInfo:He},Re)})}):(0,f.jsx)("div",{})}),te?.length>0?(0,f.jsxs)("div",{className:s("flex"),children:[(0,f.jsx)(Q.ZP,{className:s(oe["replace-btn"],oe.btn),loading:(te==null||(Ie=te[te?.length-1])===null||Ie===void 0?void 0:Ie.status)!=="complete",disabled:(te==null||(ce=te[te?.length-1])===null||ce===void 0?void 0:ce.status)!=="complete",onClick:function(){var Re;return Pe?.(te==null||(Re=te[te?.length-1])===null||Re===void 0?void 0:Re.text)},children:"\u66FF\u6362"}),(0,f.jsx)(Q.ZP,{onClick:function(Re){Sn([]),z?.(Re)},className:s(oe.btn,"ml-10 "),children:"\u9000\u51FA"})]}):(0,f.jsx)("div",{}),(0,f.jsx)("div",{className:s(oe.footer,"flex","items-center"),children:(0,f.jsxs)("div",{className:s(oe["chat-input"],"flex","items-center","w-full"),children:[(0,f.jsx)(N.Z.TextArea,{value:un,onChange:function(Re){return en(Re.target.value)},rootClassName:oe.input,onPressEnter:Qe,placeholder:"\u8BF7\u63CF\u8FF0\u4F60\u7684\u5177\u4F53\u4E1A\u52A1\u9700\u6C42\uFF0C\u903B\u8F91\u5C3D\u91CF\u63CF\u8FF0\u8BE6\u7EC6",autoSize:{minRows:1,maxRows:3}}),(0,f.jsx)("img",{onClick:function(){return Ke()},className:s(oe["send-image"],"cursor-pointer"),src:ee,alt:""})]})})]})},I=K,O=n(32909),yn=n(30881),xe=n(63764),Qn=n(99859),Te=n(75763),$e=n(55826),Xe=n(75216),qe=function(e){var Ie=e.value,ce=Ie===void 0?"":Ie,ye=e.className,he=e.onChange,z=e.height,Pe=z===void 0?"400px":z,ln=e.codeLanguage,An=e.minimap,rn=An===void 0?!1:An,un=e.form,en=e.codeOptimizeVisible,nn=en===void 0?!0:en,te=e.readOnly,Sn=te===void 0?!1:te,fn=(0,C.useState)(!1),Dn=b()(fn,2),ot=Dn[0],Nt=Dn[1],In=(0,C.useState)(!1),Ze=b()(In,2),Le=Ze[0],Un=Ze[1],Ke=(0,W.useModel)("model"),Qe=Ke.testRun;if((0,C.useEffect)(function(){xe._m.config({monaco:$e,paths:{vs:"/vs"}});var Bn=function(){var tn=u()(h()().mark(function En(){var $n,Mn,Zt;return h()().wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return Rn.prev=0,Rn.next=3,n.e(7287).then(n.bind(n,37287));case 3:return $n=Rn.sent,Mn=$n.conf,Zt=$n.language,Rn.next=8,xe._m.init();case 8:$e.languages.register({id:"python"}),$e.languages.setMonarchTokensProvider("python",Zt),$e.languages.setLanguageConfiguration("python",Mn),window.MonacoEnvironment={getWorkerUrl:function(bt,xt){return xt==="json"?"/vs/json.worker.js":xt==="typescript"||xt==="javascript"||xt==="python"?"/vs/ts.worker.js":"/vs/editor.worker.js"}},Nt(!0),Rn.next=18;break;case 15:Rn.prev=15,Rn.t0=Rn.catch(0),console.error("Failed to initialize Monaco Editor:",Rn.t0);case 18:case"end":return Rn.stop()}},En,null,[[0,15]])}));return function(){return tn.apply(this,arguments)}}();Bn()},[]),!ot)return(0,f.jsx)("div",{children:"Loading editor..."});var He=function(tn){he&&he(tn||"")},Re=function(){var tn={selectOnLineNumbers:!0,folding:!0,automaticLayout:!0,minimap:{enabled:rn},readOnly:Sn};return ln.toLowerCase()==="json"?S()(S()({},tn),{},{quickSuggestions:!1,suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",tabCompletion:"off",wordBasedSuggestions:!1,parameterHints:{enabled:!1},hover:{enabled:!1},snippetSuggestions:"none"}):tn};return(0,f.jsxs)(f.Fragment,{children:[un?(0,f.jsx)(Qn.Z.Item,{noStyle:!0,name:un?.getFieldValue("codeLanguage")===yn.vQ.JavaScript?"codeJavaScript":"codePython",children:(0,f.jsx)(xe.ZP,{className:ye,height:Pe,language:ln.toLowerCase(),theme:"vs-dark",value:ce,onChange:He,options:Re()})}):(0,f.jsx)(xe.ZP,{className:ye,height:Pe,language:ln.toLowerCase(),theme:"vs-dark",value:ce,onChange:He,options:Re()}),(0,f.jsxs)(Xe.Z,{condition:nn&&!Sn,children:[(0,f.jsx)(Te.Z,{shape:"circle",type:"primary",style:{insetInlineEnd:94,display:Qe?"none":"block"},icon:(0,f.jsx)(O.jY,{}),tooltip:"\u4EE3\u7801\u52A9\u624B",onClick:function(){Un(!0)}}),(0,f.jsx)(I,{title:"\u4EE3\u7801\u52A9\u624B",open:Le,codeLanguage:ln,onCancel:function(){Un(!1)},onReplace:function(tn){if(tn){var En=tn;En.includes("```")&&(En=En.replace(/```/g,"")),he?.(En||""),Un(!1)}}})]})]})},Be=qe},75216:function(Fe,ie,n){var re=n(67294),S=n(85893),k=function(ae){var u=ae.children,V=ae.condition;return V?(0,S.jsx)(S.Fragment,{children:u}):null};ie.Z=k},39207:function(Fe,ie,n){n.d(ie,{Z:function(){return a}});var re=n(5574),S=n.n(re),k=n(90814),h=n(69234),ae=n(94184),u=n.n(ae),V=n(67294),b={header:"header___t5fwB"},ee=n(85893),Y=u().bind(b),D=function(N){var B=N.className,U=N.items,C=N.defaultActiveKey,W=N.onChangeCollapse,me=(0,V.useState)([]),oe=S()(me,2),f=oe[0],s=oe[1];(0,V.useEffect)(function(){C?.length>0&&s(C)},[C]);var K=function(O){s(O),W?.(O)};return(0,ee.jsx)(h.Z,{bordered:!1,expandIcon:function(O){var yn=O.isActive;return(0,ee.jsx)(k.Z,{rotate:yn?90:0})},className:Y(b.header,B),activeKey:f,onChange:K,items:U})},a=D},1078:function(Fe,ie,n){var re=n(97857),S=n.n(re),k=n(5574),h=n.n(k),ae=n(22675),u=n(4141),V=n(83926),b=n(68104),ee=n(89299),Y=n(95141),D=n(30961),a=n(99859),Q=n(45360),N=n(25278),B=n(67294),U=n(39902),C=n(85893),W=function(oe){var f=oe.spaceId,s=oe.mode,K=s===void 0?Y.jA.Create:s,I=oe.agentConfigInfo,O=oe.open,yn=oe.onCancel,xe=oe.onConfirmCreate,Qn=oe.onConfirmUpdate,Te=a.Z.useForm(),$e=h()(Te,1),Xe=$e[0],qe=(0,B.useState)(""),Be=h()(qe,2),ne=Be[0],e=Be[1],Ie=(0,B.useState)(!1),ce=h()(Ie,2),ye=ce[0],he=ce[1],z=(0,U.useRequest)(ee.YS,{manual:!0,debounceInterval:300,onSuccess:function(Sn){e(""),xe?.(Sn),Q.ZP.success("\u667A\u80FD\u4F53\u5DF2\u521B\u5EFA"),he(!1)},onError:function(){he(!1)}}),Pe=z.run,ln=(0,U.useRequest)(ee.mp,{manual:!0,debounceInterval:300,onSuccess:function(Sn,fn){Q.ZP.success("\u667A\u80FD\u4F53\u7F16\u8F91\u6210\u529F"),he(!1);var Dn=fn[0];Qn?.(Dn)},onError:function(){he(!1)}}),An=ln.run,rn=function(){e(I?.icon),Xe.setFieldsValue({name:I?.name,description:I?.description})};(0,B.useEffect)(function(){O&&rn()},[O,I]);var un=function(Sn){he(!0),K===Y.jA.Create?Pe(S()(S()({},Sn),{},{icon:ne,spaceId:f})):An(S()(S()({},Sn),{},{icon:ne,id:I?.id}))},en=function(){Xe.submit()},nn=function(){yn(),rn()};return(0,C.jsx)(u.Z,{form:Xe,title:K===Y.jA.Create?"\u521B\u5EFA\u667A\u80FD\u4F53":"\u66F4\u65B0\u667A\u80FD\u4F53",open:O,loading:ye,onCancel:nn,onConfirm:en,children:(0,C.jsxs)(a.Z,{form:Xe,requiredMark:D.N,layout:"vertical",onFinish:un,autoComplete:"off",children:[(0,C.jsx)(a.Z.Item,{name:"name",label:"\u667A\u80FD\u4F53\u540D\u79F0",validateTrigger:"onBlur",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u667A\u80FD\u4F53\u540D\u79F0"},{validator:function(Sn,fn){return!fn||fn?.length<=20?Promise.resolve():fn?.length>20?Promise.reject(new Error("\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC720\u4E2A\u5B57\u7B26!")):Promise.reject(new Error("\u8BF7\u8F93\u5165\u667A\u80FD\u4F53\u540D\u79F0!"))}}],children:(0,C.jsx)(N.Z,{placeholder:"\u7ED9\u667A\u80FD\u4F53\u8D77\u4E00\u4E2A\u72EC\u4E00\u65E0\u4E8C\u7684\u540D\u5B57",showCount:!0,maxLength:20})}),(0,C.jsx)(V.Z,{name:"description",label:"\u667A\u80FD\u4F53\u529F\u80FD\u4ECB\u7ECD",initialValue:I?.description,placeholder:"\u4ECB\u7ECD\u667A\u80FD\u4F53\u7684\u529F\u80FD\uFF0C\u5C06\u4F1A\u5C55\u793A\u7ED9\u667A\u80FD\u4F53\u7684\u7528\u6237",maxLength:500}),(0,C.jsx)(a.Z.Item,{name:"icon",label:"\u56FE\u6807",children:(0,C.jsx)(b.Z,{onUploadSuccess:e,imageUrl:ne,defaultImage:ae})})]})})};ie.Z=W},18966:function(Fe,ie,n){n.d(ie,{H:function(){return b}});var re=n(5574),S=n.n(re),k=n(83062),h=n(94184),ae=n.n(h),u=n(67294),V=n(85893),b=function(Y){var D=Y.className,a=Y.text,Q=Y.onClick,N=Y.placement,B=N===void 0?"top":N,U=(0,u.useRef)(null),C=(0,u.useState)(!1),W=S()(C,2),me=W[0],oe=W[1];return(0,u.useEffect)(function(){var f=function(){if(U.current){var I=U.current,O=I.scrollWidth>I.clientWidth;oe(O)}},s=requestAnimationFrame(f);return function(){cancelAnimationFrame(s)}},[a]),(0,V.jsx)("div",{className:ae()("text-ellipsis",D),ref:U,onClick:Q,children:(0,V.jsx)(k.Z,{title:me?a:"",placement:B,children:a})})}},8380:function(Fe,ie,n){n.d(ie,{Z:function(){return b}});var re=n(94184),S=n.n(re),k=n(67294),h={container:"container___dApW8",star:"star___pESlW"},ae=n(85893),u=S().bind(h),V=function(Y){var D=Y.className,a=Y.label;return(0,ae.jsxs)("span",{className:u(h.container,"flex",D),children:[(0,ae.jsx)("span",{children:a}),(0,ae.jsx)("span",{className:u(h.star),children:"*"})]})},b=V},56265:function(Fe,ie,n){n.d(ie,{Z:function(){return oe}});var re=n(5574),S=n.n(re),k=n(91120),h=n(30961),ae=n(80882),u=n(38089),V=n(25278),b=n(37720),ee=n(99859),Y=n(85804),D=n(94184),a=n.n(D),Q=n(67294),N=n(75216),B={"variables-box":"variables-box___zOde3",header:"header____mIzl",text:"text___XcdJn","down-icon":"down-icon___nE2JF","rotate-90":"rotate-90___n3jXV","conversation-container":"conversation-container___wfpdk","close-form":"close-form___uaNXu","form-box":"form-box___AloSZ",desc:"desc___XIVD5"},U=n(85893),C=a().bind(B),W=u.Z.SHOW_CHILD,me=function(s){var K=s.className,I=s.form,O=s.isFilled,yn=O===void 0?!1:O,xe=s.disabled,Qn=xe===void 0?!1:xe,Te=s.showSubmitButton,$e=Te===void 0?!1:Te,Xe=s.variables,qe=s.onConfirm,Be=(0,Q.useState)(!0),ne=S()(Be,2),e=ne[0],Ie=ne[1];if(!(Xe!=null&&Xe.length))return null;var ce=function(Pe){Ie(!1),qe?.(Pe)},ye=e?B["conversation-container"]:yn?B["close-form"]:null,he=function(Pe){var ln,An=Pe.inputType,rn=Pe.description,un=[k.oI.Select,k.oI.MultipleSelect].includes(An),en;switch(An){case k.oI.Text:en=(0,U.jsx)(V.Z,{variant:"filled",placeholder:rn||"\u8BF7\u8F93\u5165",allowClear:!0});break;case k.oI.Paragraph:case k.oI.AutoRecognition:en=(0,U.jsx)(V.Z.TextArea,{variant:"filled",placeholder:rn||"\u8BF7\u8F93\u5165",allowClear:!0});break;case k.oI.Number:en=(0,U.jsx)(b.Z,{variant:"filled",className:"w-full",placeholder:rn||"\u8BF7\u8F93\u5165"});break;case k.oI.Select:case k.oI.MultipleSelect:en=(0,U.jsx)(u.Z,{variant:"filled",expandTrigger:"hover",multiple:An===k.oI.MultipleSelect,maxTagCount:"responsive",showCheckedStrategy:W,placeholder:rn||"\u8BF7\u9009\u62E9",options:((ln=Pe.selectConfig)===null||ln===void 0?void 0:ln.options)||[],allowClear:!0});break;default:en=(0,U.jsx)(V.Z,{placeholder:rn||"\u8BF7\u8F93\u5165",allowClear:!0})}return{isSelect:un,content:en}};return(0,U.jsxs)("div",{className:C(B["variables-box"],"flex","flex-col",K),children:[(0,U.jsxs)("header",{className:C(B.header,"flex","items-center","content-between"),children:[(0,U.jsx)("span",{children:"\u5BF9\u8BDD\u8BBE\u7F6E"}),(0,U.jsx)(N.Z,{condition:yn,children:(0,U.jsx)("span",{className:C(B.text,"cursor-pointer"),onClick:function(){return Ie(!e)},children:(0,U.jsx)(ae.Z,{className:C(e?"":B["rotate-90"],B["down-icon"])})})})]}),(0,U.jsxs)("div",{className:C(ye),children:[(0,U.jsxs)(ee.Z,{form:I,rootClassName:B["form-box"],disabled:Qn,preserve:!1,layout:"vertical",onFinish:ce,requiredMark:h.N,autoComplete:"off",children:[Xe?.map(function(z){var Pe=z.name,ln=z.displayName,An=z.require,rn=z.key,un=he(z),en=un.isSelect,nn=un.content;return(0,U.jsx)(ee.Z.Item,{name:Pe,label:ln,rules:[{required:An,message:"\u8BF7".concat(en?"\u9009\u62E9":"\u8F93\u5165").concat(ln)}],children:nn},rn)}),(0,U.jsx)(N.Z,{condition:$e,children:(0,U.jsx)(ee.Z.Item,{children:(0,U.jsx)(Y.ZP,{type:"primary",htmlType:"submit",block:!0,children:"\u5F00\u59CB\u5BF9\u8BDD"})})})]}),(0,U.jsx)(N.Z,{condition:Qn,children:(0,U.jsx)("p",{className:C(B.desc),children:"\u5BF9\u8BDD\u5F00\u59CB\u540E\uFF0C\u5BF9\u8BDD\u8BBE\u7F6E\u5C06\u65E0\u6CD5\u4FEE\u6539\u3002"})})]})]})},oe=me},17176:function(Fe,ie,n){n.d(ie,{Z:function(){return xe}});var re=n(9783),S=n.n(re),k=n(5574),h=n.n(k),ae=n(61474),u=n(13969),V=n(91120),b=n(95141),ee=n(3622),Y=n(11475),D=n(83062),a=n(42075),Q=n(25278),N=n(34041),B=n(55241),U=n(59637),C=n(79368),W=n(85804),me=n(94184),oe=n.n(me),f=n(96486),s=n(67294),K={container:"container___oFiVs","params-td":"params-td___jx0pi","params-name":"params-name___sE7JM",desc:"desc___Gm1Qx",select:"select___psDV2",footer:"footer___y2QiJ","btn-disabled":"btn-disabled___zbgUs"},I=n(85893),O=oe().bind(K),yn=function(Te){var $e=Te.inputArgBindConfigs,Xe=Te.variables,qe=Te.onSaveSet,Be=Te.style,ne=Be===void 0?{}:Be,e=Te.scroll,Ie=e===void 0?{y:480}:e,ce=(0,s.useState)([]),ye=h()(ce,2),he=ye[0],z=ye[1],Pe=(0,s.useState)([]),ln=h()(Pe,2),An=ln[0],rn=ln[1],un=(0,s.useState)(!1),en=h()(un,2),nn=en[0],te=en[1];(0,s.useEffect)(function(){if($e!=null&&$e.length){te(!1),rn($e);var In=(0,ee.kS)($e||[]);z(In)}else te(!0),rn([]),z([])},[$e]);var Sn=(0,s.useMemo)(function(){return Xe?.map(function(In){return{label:In.name,value:In.name}})||[]},[Xe]),fn=function(Ze,Le,Un){var Ke=(0,f.cloneDeep)(An)||[],Qe=(0,ee.mG)(Ke,Ze,Le,Un);rn(Qe)},Dn=function(Ze){var Le;return b.Gi.Object===Ze.dataType||b.Gi.Array_Object===Ze.dataType||((Le=Ze.dataType)===null||Le===void 0?void 0:Le.includes("Array"))||!Ze.enable},ot=[{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"name",key:"name",className:"flex items-center table-params-name-td",render:function(Ze,Le){var Un;return(0,I.jsxs)("div",{className:O("flex","flex-col",K["params-td"]),children:[(0,I.jsx)("span",{className:O(K["params-name"],"text-ellipsis-2"),children:Le.name}),(0,I.jsx)(D.Z,{title:((Un=Le.description)===null||Un===void 0?void 0:Un.length)>10?Le.description:"",placement:"top",children:(0,I.jsx)("span",{className:O("text-ellipsis",K.desc),children:Le.description})})]})}},{title:"\u53C2\u6570\u7C7B\u578B",dataIndex:"dataType",key:"dataType",width:120,render:function(Ze){return(0,I.jsx)("div",{className:O("h-full","flex","items-center"),children:Ze})}},{title:"\u5FC5\u586B",dataIndex:"require",key:"require",width:85,render:function(Ze){return(0,I.jsx)("div",{className:O("h-full","flex","items-center"),children:Ze?"\u5FC5\u586B":"\u975E\u5FC5\u586B"})}},{title:"\u9ED8\u8BA4\u503C",key:"default",width:232,render:function(Ze,Le){return(0,I.jsx)("div",{className:O("h-full","flex","items-center"),children:(0,I.jsxs)(a.Z.Compact,{block:!0,children:[(0,I.jsx)(ae.Z,{className:O(K.select),disabled:Dn(Le),value:Le.bindValueType,onChange:function(Ke){return fn(Le.key,"bindValueType",Ke)},options:u.lt}),Le.bindValueType===V.Oy.Input?(0,I.jsx)(Q.Z,{rootClassName:O(K.select),placeholder:"\u8BF7\u586B\u5199",disabled:Dn(Le),value:Le.bindValue,onChange:function(Ke){return fn(Le.key,"bindValue",Ke.target.value)}}):(0,I.jsx)(N.Z,{placeholder:"\u8BF7\u9009\u62E9",disabled:Dn(Le),rootClassName:O(K.select),popupMatchSelectWidth:!1,value:Le.bindValue||null,onChange:function(Ke){return fn(Le.key,"bindValue",Ke)},options:Sn})]})})}},{title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{children:"\u5F00\u542F"}),(0,I.jsx)(B.Z,{content:"\u5F53\u53C2\u6570\u8BBE\u7F6E\u4E3A\u5173\u95ED\u65F6\uFF0C\u5927\u6A21\u578B\u5C06\u65E0\u6CD5\u770B\u5230\u8BE5\u53C2\u6570\u3002\u5982\u679C\u8BE5\u53C2\u6570\u8BBE\u7F6E\u4E86\u9ED8\u8BA4\u503C\u5E76\u4E14\u4E0D\u53EF\u89C1\uFF0C\u5219\u5728\u8C03\u7528\u65F6\uFF0C\u667A\u80FD\u4F53\u4F1A\u9ED8\u8BA4\u53EA\u4F7F\u7528\u8FD9\u4E2A\u8BBE\u5B9A\u503C",styles:{body:{width:"300px"}},children:(0,I.jsx)(Y.Z,{className:"ml-12"})})]}),dataIndex:"enable",key:"enable",width:100,align:"center",render:function(Ze,Le){return(0,I.jsx)("div",{className:O("h-full","flex","items-center"),children:(0,I.jsx)(D.Z,{title:Le.require&&!Le.bindValue&&"\u6B64\u53C2\u6570\u662F\u5FC5\u586B\u53C2\u6570\uFF0C\u586B\u5199\u9ED8\u8BA4\u503C\u540E\uFF0C\u6B64\u5F00\u5173\u53EF\u7528",children:(0,I.jsx)(U.Z,{disabled:Le.require&&!Le.bindValue,checked:Le.enable,onChange:function(Ke){return fn(Le.key,"enable",Ke)}})})})}}],Nt=function(){var Ze={inputArgBindConfigs:An};qe(Ze)};return(0,I.jsxs)("div",{className:O(K.container,"flex","flex-col"),style:ne,children:[(0,I.jsx)(C.Z,{className:O("mb-16","flex-1"),columns:ot,dataSource:An,pagination:!1,virtual:!0,scroll:Ie,expandable:{childrenColumnName:"subArgs",defaultExpandAllRows:!0,expandedRowKeys:he,expandIcon:function(){return null}}}),(0,I.jsx)("footer",{className:O(K.footer),children:(0,I.jsx)(W.ZP,{type:"primary",onClick:Nt,className:O(S()({},K["btn-disabled"],nn)),disabled:nn,children:"\u4FDD\u5B58"})})]})},xe=yn},4735:function(Fe,ie,n){n.d(ie,{Z:function(){return s}});var re=n(15009),S=n.n(re),k=n(99289),h=n.n(k),ae=n(5574),u=n.n(ae),V=n(35044),b=n(90740),ee=n(87025),Y=n(85576),D=n(85804),a=n(25278),Q=n(94184),N=n.n(Q),B=n(67294),U=n(39902),C=n(88773),W={btn:"btn___ru2xz","chat-wrapper":"chat-wrapper___GBMoh","replace-btn":"replace-btn___Xl1q3",footer:"footer___Ij_cp","chat-input":"chat-input___lsiAA",input:"input___dR5Yj","icon-box":"icon-box___aXEus","send-image":"send-image___L_DDB","no-hover-bg":"no-hover-bg___mz7Mk"},me=n(85893),oe=N().bind(W),f=function(I){var O,yn,xe=I.title,Qn=I.open,Te=I.onCancel,$e=I.onReplace,Xe=I.defaultValue,qe=I.targetId,Be=I.type,ne=Be===void 0?ee.U.AGENT:Be,e=(0,B.useState)(""),Ie=u()(e,2),ce=Ie[0],ye=Ie[1],he=(0,U.useModel)("assistantOptimize"),z=he.messageList,Pe=he.setMessageList,ln=he.onMessageSend,An=he.messageViewRef,rn=he.allowAutoScrollRef,un=he.resetInit,en=(0,B.useState)(""),nn=u()(en,2),te=nn[0],Sn=nn[1],fn=(0,B.useState)(!1),Dn=u()(fn,2),ot=Dn[0],Nt=Dn[1],In=(0,B.useCallback)(function(){Pe([])},[]),Ze=(0,B.useCallback)(function(Ke){In(),Te?.(Ke)},[]);(0,B.useEffect)(function(){return Sn((0,C.Z)()),function(){un(),In()}},[]),(0,B.useEffect)(function(){var Ke=An.current;if(Ke){var Qe=function(){var Re=Ke.scrollTop,Bn=Ke.scrollHeight,tn=Ke.clientHeight;Re+tn<Bn?rn.current=!1:rn.current=!0};return Ke.addEventListener("scroll",Qe),function(){Ke.removeEventListener("scroll",Qe)}}},[]);var Le=function(){var Ke=h()(S()().mark(function Qe(He){var Re;return S()().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:Pe([]),ye(""),Re={requestId:te,prompt:He||ce,type:ne,id:qe},ln(Re,ee.L.prompt);case 4:case"end":return tn.stop()}},Qe)}));return function(He){return Ke.apply(this,arguments)}}(),Un=function(Qe){Qe.preventDefault();var He=Qe.target,Re=He.value,Bn=He.selectionStart,tn=He.selectionEnd;if(Qe.nativeEvent.keyCode===13&&(Qe.nativeEvent.shiftKey||Qe.nativeEvent.ctrlKey)){var En=Re.slice(0,Bn)+`
`+Re.slice(tn);ye(En)}else if(Qe.nativeEvent.keyCode===13&&Re.trim()){var $n={requestId:te,prompt:ce,type:ne,id:qe};ln($n,ee.L.prompt),ye("")}};return(0,B.useEffect)(function(){!ce||ce.trim()===""?Nt(!0):Nt(!1)},[ce]),(0,me.jsxs)(Y.Z,{title:xe,open:Qn,onCancel:Ze,maskClosable:!1,footer:null,children:[(0,me.jsx)("div",{ref:An,className:oe(W["chat-wrapper"],"flex-1"),children:z?.length>0&&(0,me.jsx)(me.Fragment,{children:z?.map(function(Ke,Qe){return(0,me.jsx)(b.Z,{onReplace:$e,messageInfo:Ke},Qe)})})}),z?.length>0?(0,me.jsxs)("div",{className:oe("flex"),children:[(0,me.jsx)(D.ZP,{className:oe(W["replace-btn"],W.btn),loading:(z==null||(O=z[z?.length-1])===null||O===void 0?void 0:O.status)!=="complete",disabled:(z==null||(yn=z[z?.length-1])===null||yn===void 0?void 0:yn.status)!=="complete",onClick:function(){var Qe;return $e?.(z==null||(Qe=z[z?.length-1])===null||Qe===void 0?void 0:Qe.text)},children:"\u66FF\u6362"}),(0,me.jsx)(D.ZP,{onClick:Ze,className:oe(W.btn,"ml-10 "),children:"\u9000\u51FA"})]}):(0,me.jsx)(D.ZP,{type:"default",className:oe(W.btn),onClick:function(){return Le(Xe||"\u4E00\u4E2A\u80FD\u4E3A\u4F60\u63D0\u4F9B\u5DE5\u4F5C\u5E2E\u52A9\u548C\u5EFA\u8BAE\u7684\u667A\u80FD\u673A\u5668\u4EBA")},children:"\u81EA\u52A8\u4F18\u5316"}),(0,me.jsx)("div",{className:oe(W.footer,"flex","items-center"),children:(0,me.jsxs)("div",{className:oe(W["chat-input"],"flex","items-center","w-full"),children:[(0,me.jsx)(a.Z.TextArea,{value:ce,onChange:function(Qe){return ye(Qe.target.value)},rootClassName:W.input,onPressEnter:Un,placeholder:"\u8BF7\u63CF\u8FF0\u4F60\u7684\u63D0\u793A\u8BCD\u9700\u6C42\uFF0C\u6BD4\u5982\u89D2\u8272\u5B9A\u4E49\u3001\u6280\u80FD\u8981\u6C42\u7B49",autoSize:{minRows:1,maxRows:3}}),(0,me.jsx)(D.ZP,{type:"text",onClick:function(){return Le()},disabled:ot,className:oe(W["no-hover-bg"]),icon:(0,me.jsx)("img",{className:oe(W["send-image"]),src:V,alt:""}),size:"small"})]})})]})},s=f},88639:function(Fe,ie,n){n.d(ie,{Z:function(){return ee}});var re=n(50888),S=n(94184),k=n.n(S),h=n(67294),ae={container:"container___eQEDc",box:"box___qQPTu"},u=n(85893),V=k().bind(ae),b=function(D){var a=D.className,Q=D.itemClassName,N=D.loading,B=D.chatSuggestList,U=D.onClick;return(0,u.jsx)("div",{className:V(ae.container,"flex","flex-col",a),children:N?(0,u.jsx)("div",{className:V("flex"),children:(0,u.jsx)(re.Z,{})}):B?.map(function(C,W){return C?(0,u.jsx)("div",{onClick:function(){return U(C)},className:V(ae.box,"px-16","cursor-pointer","hover-box",Q),children:C},W):null})})},ee=b},76523:function(Fe,ie,n){n.d(ie,{Z:function(){return qe}});var re=n(97857),S=n.n(re),k=n(95141),h=n(67294),ae=n(94184),u=n.n(ae),V={container:"container___bLyIn"},b=n(85893),ee=u().bind(V),Y=function(ne){var e=ne.className,Ie=ne.title,ce=ne.content,ye=ne.onClick;return(0,b.jsxs)("div",{className:ee(V.container,"flex","flex-col","cursor-pointer",e),onClick:ye,children:[(0,b.jsx)("h3",{children:Ie}),(0,b.jsx)("p",{className:"text-ellipsis-2",children:ce})]})},D=Y,a=n(75216),Q={container:"container___uoSDc",box:"box___on4p2"},N=u().bind(Q),B=function(ne){var e=ne.className,Ie=ne.title,ce=ne.content,ye=ne.image,he=ne.onClick;return(0,b.jsxs)("div",{className:N(Q.container,"flex","cursor-pointer",e),onClick:he,children:[(0,b.jsx)(a.Z,{condition:ye,children:(0,b.jsx)("img",{className:"radius-6",src:ye,alt:""})}),(0,b.jsxs)("div",{className:N(Q.box,"flex-1"),children:[(0,b.jsx)("h3",{className:"text-ellipsis-2",children:Ie}),(0,b.jsx)("p",{className:"text-ellipsis-2",children:ce})]})]})},U=B,C={container:"container___ujWA4"},W=u().bind(C),me=function(ne){var e=ne.className,Ie=ne.title,ce=ne.content,ye=ne.image,he=ne.onClick;return(0,b.jsxs)("div",{className:W(C.container,"cursor-pointer",e),onClick:he,children:[(0,b.jsx)("h3",{children:Ie}),(0,b.jsx)(a.Z,{condition:ye,children:(0,b.jsx)("img",{className:"radius-6",src:ye,alt:""})}),(0,b.jsx)("p",{className:"text-ellipsis-2",children:ce})]})},oe=me,f={container:"container___mGrAV"},s=u().bind(f),K=function(ne){var e=ne.className,Ie=ne.title,ce=ne.content,ye=ne.image,he=ne.onClick;return(0,b.jsxs)("div",{className:s(f.container,"flex","flex-col","cursor-pointer",e),onClick:he,children:[(0,b.jsx)("h3",{children:Ie}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("p",{className:"flex-1 text-ellipsis-2",children:ce}),(0,b.jsx)(a.Z,{condition:ye,children:(0,b.jsx)("img",{className:"radius-6",src:ye,alt:""})})]})]})},I=K,O=function(ne){var e=ne.cardKey,Ie=ne.bindLinkUrl,ce=function(){Ie&&window.open(Ie)};switch(e){case k.H1.ONE:return(0,b.jsx)(U,S()(S()({},ne),{},{onClick:ce}));case k.H1.TWO:return(0,b.jsx)(I,S()(S()({},ne),{},{onClick:ce}));case k.H1.THREE:return(0,b.jsx)(oe,S()(S()({},ne),{},{onClick:ce}));case k.H1.FOUR:return(0,b.jsx)(D,S()(S()({},ne),{},{onClick:ce}))}},yn=O,xe=n(57882),Qn=n(32983),Te={"inner-container":"inner-container____n5mL","card-item-container":"card-item-container___rBOVp"},$e=u().bind(Te),Xe=function(ne){var e=ne.className,Ie=ne.visible,ce=ne.onClose,ye=ne.cardList;return(0,b.jsx)(xe.Z,{title:"\u5C55\u793A\u53F0",className:e,visible:Ie,onClose:ce,children:ye?.length>0?(0,b.jsx)("div",{className:$e(Te["inner-container"],"scrollbar"),children:(0,b.jsx)("div",{className:$e(Te["card-item-container"]),children:ye?.map(function(he,z){return(0,b.jsx)(yn,S()({},he),"".concat(he.cardKey).concat(z))})})}):(0,b.jsx)("div",{className:$e("flex","h-full","items-center","content-center"),children:(0,b.jsx)(Qn.Z,{description:"\u6682\u65E0\u6570\u636E"})})})},qe=Xe},71437:function(Fe,ie,n){n.d(ie,{Z:function(){return D}});var re=n(95141),S=n(24969),k=n(83062),h=n(94184),ae=n.n(h),u=n(67294),V={box:"box___khloQ"},b=n(85893),ee=ae().bind(V),Y=function(Q){var N=Q.className,B=Q.type,U=B===void 0?re.Ai.Blank:B,C=Q.icon,W=Q.title,me=Q.onClick,oe=U===re.Ai.Blank?"tooltip-blank":"tooltip-white";return(0,b.jsx)(k.Z,{title:W,classNames:{root:oe},children:(0,b.jsx)("span",{className:ee("hover-box","flex","content-center","items-center","cursor-pointer",V.box,N),onClick:me,children:C||(0,b.jsx)(S.Z,{})})})},D=Y},1367:function(Fe,ie,n){n.d(ie,{Z:function(){return S}});var re=function(k){return k.NewNotifyMessage="new_notify_message",k.RefreshChatMessage="refresh_chat_message",k}({}),S={NewNotifyMessage:re.NewNotifyMessage,RefreshChatMessage:re.RefreshChatMessage}},67522:function(Fe,ie,n){var re=n(15009),S=n.n(re),k=n(99289),h=n.n(k),ae=n(89299),u=n(99659),V=n(39902),b=function(){var Y=(0,u.Z)(ae.co,{manual:!0,debounceMaxWait:300}),D=Y.runAsync,a=function(){var Q=h()(S()().mark(function N(B,U){var C,W,me,oe,f;return S()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return C=U?.variableParams,K.next=3,D({agentId:B,devMode:!1,variables:C});case 3:W=K.sent,me=W.success,oe=W.data,me&&(f=oe?.id,V.history.push("/home/chat/".concat(f,"/").concat(B),U));case 7:case"end":return K.stop()}},N)}));return function(B,U){return Q.apply(this,arguments)}}();return{handleCreateConversation:a,runAsyncConversationCreate:D}};ie.Z=b},97745:function(Fe,ie,n){var re=n(19632),S=n.n(re),k=n(5574),h=n.n(k),ae=n(91120),u=n(67294),V=function(){var ee=(0,u.useState)([]),Y=h()(ee,2),D=Y[0],a=Y[1],Q=function(U){var C=S()(D);if(C.some(function(me){return me.id===U.id})){var W=C.findIndex(function(me){return me.id===U.id});C.splice(W,1)}else C.push({id:U.id,type:U.type});a(C)},N=function(U){if(U!=null&&U.length){var C=U.filter(function(W){return W.defaultSelected===ae.Km.Yes}).map(function(W){return{id:W.id,type:W.type}});a(C||[])}};return{selectedComponentList:D,setSelectedComponentList:a,handleSelectComponent:Q,initSelectedComponentList:N}};ie.Z=V},71566:function(Fe,ie,n){n.r(ie),n.d(ie,{default:function(){return Ts}});var re=n(9783),S=n.n(re),k=n(97857),h=n.n(k),ae=n(5574),u=n.n(ae),V=n(1078),b=n(97630),ee=n(76523),Y=n(72568),D=n(89299),a=n(91120),Q=n(95141),N=n(1322),B=n(89575),U=n(94184),C=n.n(U),W=n(50361),me=n.n(W),oe=n(30381),f=n.n(oe),s=n(67294),K=n(39902),I=n(15009),O=n.n(I),yn=n(19632),xe=n.n(yn),Qn=n(99289),Te=n.n(Qn),$e=n(16921),Xe=n(61474),qe=n(71437),Be=n(11843),ne={container:"container___BIda5",box:"box___HxIHi"},e=n(85893),Ie=C().bind(ne),ce=function(o){var l=o.textClassName,t=o.list,p=o.onClick,m=(0,s.useState)([]),L=u()(m,2),E=L[0],F=L[1];return(0,s.useEffect)(function(){var R=t?.filter(function(T){return!T.systemVariable})||[];F(R)},[t]),(0,e.jsx)(e.Fragment,{children:E?.length>0?(0,e.jsx)("div",{className:Ie("flex","items-center",ne.container),children:E?.map(function(R){return(0,e.jsx)("span",{className:Ie(ne.box,"radius-6","hover-box","cursor-pointer"),onClick:p,children:R.name},R.key)})}):(0,e.jsx)("p",{className:Ie(l),children:"\u7528\u4E8E\u4FDD\u5B58\u7528\u6237\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u8BA9\u667A\u80FD\u4F53\u8BB0\u4F4F\u7528\u6237\u7684\u7279\u5F81\uFF0C\u4F7F\u56DE\u590D\u66F4\u52A0\u4E2A\u6027\u5316\u3002"})})},ye=ce,he=n(39207),z=n(99659),Pe=n(45360),ln={container:"container___n4vwB"},An=C().bind(ln),rn=function(o){var l=o.children,t=o.title;return(0,e.jsxs)("div",{className:An(ln.container,"flex","content-between","items-center","px-6"),children:[(0,e.jsx)("span",{children:t}),l]})},un=rn,en=n(8380),nn=n(88135),te=n(30881),Sn=n(45605),fn=[{value:a.Qr.AUTO,label:"\u81EA\u52A8\u8C03\u7528"},{value:a.Qr.ON_DEMAND,label:"\u6309\u9700\u8C03\u7528"},{value:a.Qr.MANUAL,label:"\u624B\u52A8\u9009\u62E9"},{value:a.Qr.MANUAL_ON_DEMAND,label:"\u624B\u52A8\u9009\u62E9+\u6309\u9700\u8C03\u7528"}],Dn=[{value:a.Km.No,label:"\u5426"},{value:a.Km.Yes,label:"\u662F"}],ot=[{value:a.E8.No,label:"\u5426"},{value:a.E8.Yes,label:"\u662F"}],Nt=[{value:a.kD.MIXED,label:(0,e.jsxs)("span",{className:"flex items-center",children:[(0,e.jsx)("span",{children:"\u6DF7\u5408"}),(0,e.jsx)(qe.Z,{title:"\u7ED3\u5408\u5168\u6587\u68C0\u7D22\u4E0E\u8BED\u4E49\u68C0\u7D22\u7684\u4F18\u52BF,\u5E76\u5BF9\u7ED3\u679C\u8FDB\u884C\u7EFC\u5408\u6392\u5E8F",icon:(0,e.jsx)(Sn.Z,{})})]})},{value:a.kD.SEMANTIC,label:(0,e.jsxs)("span",{className:"flex items-center",children:[(0,e.jsx)("span",{children:"\u8BED\u4E49"}),(0,e.jsx)(qe.Z,{title:"\u57FA\u4E8E\u5411\u91CF\u7684\u6587\u672C\u76F8\u5173\u6027\u67E5\u8BE2,\u63A8\u8350\u5728\u9700\u8981\u7406\u89E3\u8BED\u4E49\u5173\u8054\u5EA6\u548C\u8DE8\u8BED\u8A00\u67E5\u8BE2\u7684\u573A\u666F\u4F7F\u7528\u3002",icon:(0,e.jsx)(Sn.Z,{})})]})},{value:a.kD.FULL_TEXT,label:(0,e.jsxs)("span",{className:"flex items-center",children:[(0,e.jsx)("span",{children:"\u5168\u6587"}),(0,e.jsx)(qe.Z,{title:"\u4F9D\u8D56\u4E8E\u5173\u952E\u8BCD\u7684\u5168\u6587\u641C\u7D22,\u63A8\u8350\u5728\u641C\u7D22\u5177\u6709\u7279\u5B9A\u540D\u79F0\u3001\u7F29\u5199\u8BCD\u3001\u77ED\u8BED\u6216ID\u7684\u573A\u666F\u4F7F\u7528\u3002",icon:(0,e.jsx)(Sn.Z,{})})]})}],In=[{value:a.E3.DEFAULT,label:"\u9ED8\u8BA4"},{value:a.E3.CUSTOM,label:"\u81EA\u5B9A\u4E49"}],Ze=[{value:a.c0.TIME,label:"\u5B9A\u65F6\u89E6\u53D1",img:""},{value:a.c0.EVENT,label:"\u4E8B\u4EF6\u89E6\u53D1",img:""}],Le=[{value:te.tJ.SINGLE,label:"\u5355\u5F20\u5361\u7247"},{value:te.tJ.LIST,label:"\u7AD6\u5411\u5217\u8868"}],Un=[{label:"\u7CBE\u786E\u6A21\u5F0F",value:nn.jD.Precision},{label:"\u5E73\u8861\u6A21\u5F0F",value:nn.jD.Balanced},{label:"\u521B\u610F\u6A21\u5F0F",value:nn.jD.Creative},{label:"\u81EA\u5B9A\u4E49",value:nn.jD.Customization}],Ke=S()(S()(S()({},nn.jD.Precision,{temperature:.1,topP:.7,contextRounds:100,maxTokens:1024}),nn.jD.Balanced,{temperature:1,topP:.7,contextRounds:100,maxTokens:1024}),nn.jD.Creative,{temperature:1,topP:.8,contextRounds:100,maxTokens:1024}),Qe=[{value:te.HD.Tenant,label:"\u5168\u5C40"},{value:te.HD.Space,label:"\u5DE5\u4F5C\u7A7A\u95F4"}],He=[{value:a.oI.Text,label:"\u5355\u884C\u6587\u672C"},{value:a.oI.Paragraph,label:"\u6BB5\u843D"},{value:a.oI.Number,label:"\u6570\u5B57"},{value:a.oI.Select,label:"\u5355\u9009"},{value:a.oI.MultipleSelect,label:"\u591A\u9009"},{value:a.oI.AutoRecognition,label:"\u667A\u80FD\u8BC6\u522B"}],Re={options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",children:[]}]}]},Bn=n(29751),tn=n(77123),En=n(48689),$n=n(24969),Mn=n(60887),Zt=n(24285);function Ea(se){return o=>{let{transform:l}=o;return{...l,x:Math.ceil(l.x/se)*se,y:Math.ceil(l.y/se)*se}}}const Rn=se=>{let{transform:o}=se;return{...o,y:0}};function zn(se,o,l){const t={...se};return o.top+se.y<=l.top?t.y=l.top-o.top:o.bottom+se.y>=l.top+l.height&&(t.y=l.top+l.height-o.bottom),o.left+se.x<=l.left?t.x=l.left-o.left:o.right+se.x>=l.left+l.width&&(t.x=l.left+l.width-o.right),t}const bt=se=>{let{containerNodeRect:o,draggingNodeRect:l,transform:t}=se;return!l||!o?t:zn(t,l,o)},xt=se=>{let{draggingNodeRect:o,transform:l,scrollableAncestorRects:t}=se;const p=t[0];return!o||!p?l:zn(l,o,p)},ua=se=>{let{transform:o}=se;return{...o,x:0}},Ft=se=>{let{transform:o,draggingNodeRect:l,windowRect:t}=se;return!l||!t?o:zn(o,l,t)},Ha=se=>{let{activatorEvent:o,draggingNodeRect:l,transform:t}=se;if(l&&o){const p=getEventCoordinates(o);if(!p)return t;const m=p.x-l.left,L=p.y-l.top;return{...t,x:t.x+m-l.width/2,y:t.y+L-l.height/2}}return t};var Pt=n(45587),st=n(85804),oa=n(42075),Ut=n(85576),ba=n(79368),Gn=n(88773),mo=n(4141),Wa=n(30961),qn=n(99859),At=n(25278),rt=n(78045),j=n(80688),da=n(84567),Qa=s.createContext({}),fo=function(){var o=(0,s.useContext)(Qa),l=o.setActivatorNodeRef,t=o.listeners;return(0,e.jsx)(st.ZP,h()({type:"text",size:"small",icon:(0,e.jsx)(Bn.Z,{}),style:{cursor:"move"},ref:l},t))},wt=function(o){var l=o.id,t=o.value,p=o.onChange,m=o.onDelete,L=(0,Pt.nB)({id:l}),E=L.attributes,F=L.listeners,R=L.setNodeRef,T=L.setActivatorNodeRef,G=L.transform,$=L.transition,M=L.isDragging,g={transform:Zt.ux.Translate.toString(G),transition:$,zIndex:M?10:1,opacity:M?.8:1,paddingRight:"10px"},pe=(0,s.useMemo)(function(){return{setActivatorNodeRef:T,listeners:F,attributes:E}},[T,F,E]);return(0,e.jsx)(Qa.Provider,{value:pe,children:(0,e.jsx)("div",{ref:R,style:g,className:"flex items-center gap-10",children:(0,e.jsx)(At.Z,{onChange:p,defaultValue:t,prefix:(0,e.jsx)(fo,{}),suffix:(0,e.jsx)(En.Z,{onClick:m})})})})},go=wt,ca={"modal-body-container":"modal-body-container___iqS7z","radio-group":"radio-group___uJ5NF",tab:"tab___iCYZL","add-item-btn":"add-item-btn___ok9vO"},ja=n(26145),Fa=n(83352),Ba=n(80882),ft={"bind-box":"bind-box___RRQok","component-image":"component-image___tjc0T","example-box":"example-box___m9xlQ","e-header":"e-header___lPvLG",icon:"icon___RW1tv","icon-rotate":"icon-rotate___zDrWT","rotate-box":"rotate-box___BOAGL"},Xt=C().bind(ft),sa=function(o){var l=o.selectConfig,t=o.targetComponentInfo,p=o.onClick,m=s.useState(!0),L=u()(m,2),E=L[0],F=L[1],R=l||{},T=R.targetType,G=R.targetName,$=R.targetIcon,M=[t?.targetType,T].includes(a.qR.Plugin)?ja:Fa;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Xt(ft["bind-box"],"mb-16"),children:!t&&!G?(0,e.jsx)("div",{className:Xt("flex","items-center","content-center","h-full","cursor-pointer"),onClick:p,children:"\u8BF7\u9009\u62E9\u7B26\u5408\u6570\u636E\u89C4\u8303\u7684\u63D2\u4EF6\u6216\u5DE5\u4F5C\u6D41"}):(0,e.jsxs)("div",{className:Xt("flex","items-center","h-full","cursor-pointer","px-16","gap-10"),onClick:p,children:[(0,e.jsx)("img",{className:Xt(ft["component-image"],"radius-6"),src:t?.icon||$||M,alt:""}),(0,e.jsx)("span",{children:t?.name||G})]})}),(0,e.jsxs)("div",{className:Xt(ft["example-box"]),children:[(0,e.jsxs)("div",{className:Xt("flex","items-center","content-between","cursor-pointer",ft["e-header"]),onClick:function(){return F(!E)},children:[(0,e.jsx)("span",{children:"\u63D2\u4EF6\u6216\u5DE5\u4F5C\u6D41\u8FD4\u56DE\u6570\u636E\u7ED3\u6784\u4EE5\u53CA\u793A\u4F8B"}),(0,e.jsx)(Ba.Z,{className:Xt(ft.icon,S()({},ft["icon-rotate"],!E))})]}),(0,e.jsxs)("div",{className:Xt(S()({},ft["rotate-box"],E)),children:[(0,e.jsx)("p",{children:"//options \u9009\u9879\u5217\u8868\uFF1B"}),(0,e.jsx)("p",{children:"//value\uFF1A\u9009\u9879\u503C\uFF1Blabel\u9009\u9879\u540D\u79F0\uFF1Bchildren\u4E0B\u7EA7\u9009\u9879"}),(0,e.jsx)("pre",{children:(0,e.jsx)("code",{children:JSON.stringify(Re,null,2)})})]})]})]})},za=sa,va=C().bind(ca),Vt=function(o){var l=o.mode,t=l===void 0?Q.jA.Create:l,p=o.currentVariable,m=o.id,L=o.targetId,E=o.inputData,F=o.open,R=o.onCancel,T=o.onConfirm,G=qn.Z.useForm(),$=u()(G,1),M=$[0],g=(0,s.useState)(a.oI.Text),pe=u()(g,2),ue=pe[0],A=pe[1],H=(0,s.useState)(a.z1.MANUAL),fe=u()(H,2),P=fe[0],we=fe[1],dn=(0,s.useState)([{id:(0,Gn.Z)(),value:"",label:""},{id:(0,Gn.Z)(),value:"",label:""}]),Tn=u()(dn,2),Ve=Tn[0],Ue=Tn[1],xn=(0,s.useState)(""),Jn=u()(xn,2),ze=Jn[0],Ce=Jn[1],Pn=(0,s.useState)(!1),ke=u()(Pn,2),de=ke[0],Oe=ke[1],Je=(0,s.useState)([]),Zn=u()(Je,2),Vn=Zn[0],kn=Zn[1],Se=(0,s.useState)(null),q=u()(Se,2),Z=q[0],le=q[1],Ne=(0,s.useRef)([]),Ae=(0,s.useState)(!1),J=u()(Ae,2),Ge=J[0],On=J[1];(0,s.useEffect)(function(){if(F){if(le(null),t===Q.jA.Create)A(a.oI.Text),M.setFieldValue("inputType",a.oI.Text),kn([]),we(a.z1.MANUAL),Ue([{id:(0,Gn.Z)(),value:"",label:""},{id:(0,Gn.Z)(),value:"",label:""}]),Ce("");else if(t===Q.jA.Update&&p){var Fn=p.name,mn=p.displayName,Kn=p.require,Wn=p.inputType,Ct=p.description,Ye=p.selectConfig,St=p.bindValue;if(A(Wn),we(Ye?.dataSourceType),Ye?.dataSourceType===a.z1.BINDING)kn([{type:Ye?.targetType,targetId:Ye?.targetId,status:a.BQ.Added}]),Ue([{id:(0,Gn.Z)(),value:"",label:""},{id:(0,Gn.Z)(),value:"",label:""}]);else{var Tt;if(kn([]),Ye&&(Ye==null||(Tt=Ye.options)===null||Tt===void 0?void 0:Tt.length)>0){var zt;Ue((Ye==null||(zt=Ye.options)===null||zt===void 0?void 0:zt.map(function(To){return h()(h()({},To),{},{id:(0,Gn.Z)()})}))||[])}}Ce(St||""),M.setFieldsValue({name:Fn,displayName:mn,require:Kn,inputType:Wn,description:Ct})}}},[F,t,p]);var on=(0,Mn.Dy)((0,Mn.VT)(Mn.we),(0,Mn.VT)(Mn.Lg,{coordinateGetter:Pt.is})),sn=function(mn){var Kn=mn.active,Wn=mn.over;Wn&&Kn.id!==Wn.id&&Ue(function(Ct){var Ye=Ct.findIndex(function(Tt){return Tt.id===Kn.id}),St=Ct.findIndex(function(Tt){return Tt.id===Wn.id});return(0,Pt.Rp)(Ct,Ye,St)})},cn=function(mn){Ue(function(Kn){return Kn.filter(function(Wn){return Wn.id!==mn})})},bn=function(){Ue(function(mn){return[].concat(xe()(mn),[{id:(0,Gn.Z)(),value:"",label:""}])})},at=function(mn,Kn){var Wn=mn.target.value;Ue(function(Ct){var Ye=xe()(Ct),St=Ye.findIndex(function(Tt){return Tt.id===Kn});return St!==-1&&(Ye[St].value=Wn,Ye[St].label=Wn),Ye})},Me=function(mn){var Kn=mn.targetId,Wn=mn.targetType;le(mn),kn([{type:Wn,targetId:Kn,status:a.BQ.Added}])},Ee=[{key:a.z1.MANUAL,label:"\u624B\u52A8\u521B\u5EFA",children:(0,e.jsxs)("div",{className:va("flex","flex-col","gap-10"),children:[(0,e.jsx)(Mn.LB,{modifiers:[ua],sensors:on,collisionDetection:Mn.pE,onDragEnd:sn,children:(0,e.jsx)(Pt.Fo,{items:Ve.map(function(Fn){return Fn.id}),strategy:Pt.qw,children:Ve?.map(function(Fn){var mn=Fn.id,Kn=Fn.value;return(0,e.jsx)(go,{id:mn,value:Kn,onChange:function(Ct){return at(Ct,mn)},onDelete:function(){return cn(mn)}},mn)})})}),(0,e.jsxs)("div",{className:va(ca["add-item-btn"]),onClick:bn,children:[(0,e.jsx)($n.Z,{}),"\u6DFB\u52A0\u9009\u9879"]})]})},{key:a.z1.BINDING,label:"\u6570\u636E\u7ED1\u5B9A",children:(0,e.jsx)(za,{selectConfig:p?.selectConfig,targetComponentInfo:Z,onClick:function(){return Oe(!0)}})}],vn=(0,K.useRequest)(D.D$,{manual:!0,debounceInterval:300,onSuccess:function(){On(!1),Pe.ZP.success("\u53D8\u91CF\u66F4\u65B0\u6210\u529F"),T(Ne.current)},onError:function(){On(!1)}}),Ln=vn.run,vt=function(mn){var Kn=null,Wn=ze;if([a.oI.Select,a.oI.MultipleSelect].includes(ue)){if(P===a.z1.MANUAL){if(Ve!=null&&Ve.length){if(Ve!=null&&Ve.some(function(zt){return!zt.value})){Pe.ZP.error("\u8BF7\u586B\u5199\u9009\u9879\u503C");return}}else{Pe.ZP.error("\u8BF7\u6DFB\u52A0\u9009\u9879");return}Kn={dataSourceType:P,targetType:null,targetId:null,targetName:null,targetIcon:null,targetDescription:null,options:Ve}}else{var Ct;if(!Z&&!(p!=null&&(Ct=p.selectConfig)!==null&&Ct!==void 0&&Ct.targetId)){Pe.ZP.error("\u8BF7\u9009\u62E9\u7ED1\u5B9A\u7EC4\u4EF6");return}Kn=Z?{dataSourceType:P,targetType:Z?.targetType,targetId:Z?.targetId,targetName:Z?.name,targetIcon:Z?.icon,targetDescription:Z?.description,options:[]}:p?.selectConfig}Wn=""}var Ye=h()(h()({},mn),{},{bindValue:Wn,systemVariable:!1,selectConfig:Kn}),St;t===Q.jA.Update&&p?St=E.map(function(zt){return zt.key===p.key?h()(h()({},zt),Ye):zt}):St=[].concat(xe()(E),[h()(h()({},Ye),{},{key:(0,Gn.Z)()})]),Ne.current=St;var Tt={id:m,targetId:L,bindConfig:{variables:St}};On(!0),Ln(Tt)},yt=function(){M.submit()};return(0,e.jsxs)(mo.Z,{form:M,open:F,loading:Ge,classNames:{body:va(ca["modal-body-container"])},title:"\u7F16\u8F91\u6216\u6DFB\u52A0\u53D8\u91CF",onCancel:R,onConfirm:yt,children:[(0,e.jsxs)(qn.Z,{form:M,preserve:!1,layout:"vertical",requiredMark:Wa.N,onFinish:vt,autoComplete:"off",children:[(0,e.jsx)(qn.Z.Item,{name:"name",label:"\u5B57\u6BB5\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0"}],children:(0,e.jsx)(At.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0\uFF0C\u7B26\u5408\u5B57\u6BB5\u547D\u540D\u89C4\u5212",showCount:!0,maxLength:30})}),(0,e.jsx)(qn.Z.Item,{name:"displayName",label:"\u5C55\u793A\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u5C55\u793A\u540D\u79F0"}],children:(0,e.jsx)(At.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u5C55\u793A\u540D\u79F0\uFF0C\u4F9B\u524D\u7AEF\u5C55\u793A\u4F7F\u7528",showCount:!0,maxLength:30})}),(0,e.jsx)(qn.Z.Item,{name:"description",label:"\u63CF\u8FF0",children:(0,e.jsx)(At.Z.TextArea,{className:"dispose-textarea-count",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u63CF\u8FF0",showCount:!0,maxLength:200,autoSize:{minRows:3,maxRows:5}})}),(0,e.jsx)(qn.Z.Item,{name:"inputType",label:"\u8F93\u5165\u65B9\u5F0F",children:(0,e.jsx)(rt.ZP.Group,{className:va(ca["radio-group"]),options:He,value:ue,onChange:function(mn){return A(mn.target.value)}})}),[a.oI.Select,a.oI.MultipleSelect].includes(ue)?(0,e.jsx)(j.Z,{rootClassName:va(ca.tab),activeKey:P,onChange:function(mn){return we(mn)},items:Ee}):(0,e.jsx)(qn.Z.Item,{className:va("mb-16"),label:"\u9ED8\u8BA4\u503C",children:(0,e.jsx)(At.Z.TextArea,{value:ze,onChange:function(mn){return Ce(mn.target.value)},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",autoSize:{minRows:3,maxRows:5}})}),(0,e.jsx)(qn.Z.Item,{name:"require",valuePropName:"checked",children:(0,e.jsx)(da.Z,{children:"\u5FC5\u586B"})})]}),(0,e.jsx)($e.Z,{open:de,onCancel:function(){return Oe(!1)},checkTag:a.qR.Plugin,addComponents:Vn,onAdded:Me,hideTop:[a.qR.Knowledge,a.qR.Table,a.qR.MCP]})]})},ea=Vt,Ya={"table-container":"table-container___TK9dV"},Et=C().bind(Ya),Ma=s.createContext({}),ho=function(){var o=(0,s.useContext)(Ma),l=o.setActivatorNodeRef,t=o.listeners;return(0,e.jsx)(st.ZP,h()({type:"text",size:"small",icon:(0,e.jsx)(Bn.Z,{}),style:{cursor:"move"},ref:l},t))},po=function(o){var l=(0,Pt.nB)({id:o["data-row-key"]}),t=l.attributes,p=l.listeners,m=l.setNodeRef,L=l.setActivatorNodeRef,E=l.transform,F=l.transition,R=l.isDragging,T=h()(h()(h()({},o.style),R?{position:"relative"}:{}),{},{transform:Zt.ux.Translate.toString(E),transition:F,zIndex:R?10:1,opacity:R?.8:1,paddingRight:"10px"}),G=(0,s.useMemo)(function(){return{setActivatorNodeRef:L,listeners:p}},[L,p]);return(0,e.jsx)(Ma.Provider,{value:G,children:(0,e.jsx)("tr",h()(h()({},o),{},{ref:m,style:T},t))})},Co=function(o){var l=o.open,t=o.variablesInfo,p=o.onCancel,m=o.onConfirm,L=(0,s.useState)([]),E=u()(L,2),F=E[0],R=E[1],T=(0,s.useState)(Q.jA.Create),G=u()(T,2),$=G[0],M=G[1],g=(0,s.useState)(),pe=u()(g,2),ue=pe[0],A=pe[1],H=(0,s.useState)(!1),fe=u()(H,2),P=fe[0],we=fe[1],dn=(0,s.useRef)(!1),Tn=(0,s.useRef)(null),Ve=(0,s.useRef)([]),Ue=(0,s.useRef)(a.tE.Delete);(0,s.useEffect)(function(){var Se,q=(t==null||(Se=t.bindConfig)===null||Se===void 0?void 0:Se.variables)||[];if(q?.length>0){var Z=q.map(function(le){return h()(h()({},le),{},{key:(0,Gn.Z)()})});R(Z)}},[t]);var xn=function(q){we(!0),M(Q.jA.Update),A(q)},Jn=function(){we(!0),M(Q.jA.Create),A(null)},ze=(0,K.useRequest)(D.D$,{manual:!0,debounceInterval:300,onSuccess:function(){Ue.current===a.tE.Delete?Pe.ZP.success("\u5220\u9664\u6210\u529F"):Pe.ZP.success("\u66F4\u65B0\u6210\u529F"),dn.current=!0,R(Ve.current)}}),Ce=ze.run,Pn=function(q){var Z={id:t?.id,targetId:t?.targetId,bindConfig:{variables:q}};Ce(Z)},ke=function(q){var Z=F.filter(function(le){return le.key!==q});Ve.current=Z,Ue.current=a.tE.Delete,Pn(Z)},de=[{dataIndex:"sort",key:"sort",align:"center",width:40,fixed:"left",render:function(q,Z){return!Z.systemVariable&&(0,e.jsx)("span",{className:Et("flex","items-center","h-full"),children:(0,e.jsx)(ho,{})})}},{title:(0,e.jsx)(en.Z,{label:"\u540D\u79F0"}),dataIndex:"name",key:"name",width:180,fixed:"left",render:function(q){return(0,e.jsx)("div",{className:Et("flex","items-center","h-full"),children:(0,e.jsx)("span",{className:Et("text-ellipsis"),children:q||"--"})})}},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description",ellipsis:!0,width:180,render:function(q){return(0,e.jsx)("span",{className:Et("flex","items-center","h-full"),children:q||"--"})}},{title:"\u7C7B\u578B",dataIndex:"systemVariable",key:"systemVariable",width:100,ellipsis:!0,render:function(q){return(0,e.jsx)("span",{className:Et("flex","items-center","h-full"),children:q?"\u7CFB\u7EDF\u53D8\u91CF":"\u81EA\u5B9A\u4E49\u53D8\u91CF"})}},{title:"\u8F93\u5165\u65B9\u5F0F",dataIndex:"inputType",key:"inputType",width:100,render:function(q){var Z;return(0,e.jsx)("span",{className:Et("flex","items-center","h-full"),children:((Z=He.find(function(le){return le.value===q}))===null||Z===void 0?void 0:Z.label)||"--"})}},{title:"\u662F\u5426\u5FC5\u987B",dataIndex:"require",key:"require",width:100,align:"center",render:function(q){return(0,e.jsx)("span",{className:Et("flex","items-center","content-center","h-full"),children:q?"\u662F":"\u5426"})}},{title:"",dataIndex:"action",width:100,fixed:"right",render:function(q,Z){return(0,e.jsx)(e.Fragment,{children:Z!=null&&Z.systemVariable?(0,e.jsx)("span",{children:"--"}):(0,e.jsxs)(oa.Z,{className:Et("flex","content-between","items-center"),children:[(0,e.jsx)(st.ZP,{type:"text",icon:(0,e.jsx)(tn.Z,{className:Et("cursor-pointer"),onClick:function(){return xn(Z)}})}),(0,e.jsx)(st.ZP,{type:"text",icon:(0,e.jsx)(En.Z,{className:Et("cursor-pointer"),onClick:function(){return ke(Z.key)}})})]})})}}],Oe=function(){var q,Z;(q=Tn.current)===null||q===void 0||q.scrollTo({top:(Z=Tn.current)===null||Z===void 0?void 0:Z.scrollHeight,behavior:"smooth"})};(0,s.useEffect)(function(){l&&Oe()},[l]);var Je=function(q){we(!1),R(q),dn.current=!0},Zn=function(){we(!1),dn.current?m():p()},Vn=function(q){var Z=q.active,le=q.over;if(le&&Z.id!==le.id){Ue.current=a.tE.Drag;var Ne=F.findIndex(function(Ge){return Ge.key===Z?.id}),Ae=F.findIndex(function(Ge){return Ge.key===le?.id}),J=(0,Pt.Rp)(F,Ne,Ae);Ve.current=J,R(J),Pn(J)}},kn=(0,Mn.Dy)((0,Mn.VT)(Mn.we),(0,Mn.VT)(Mn.Lg,{coordinateGetter:Pt.is}));return(0,e.jsxs)(Ut.Z,{width:870,title:"\u53D8\u91CF",open:l,footer:null,onCancel:Zn,children:[(0,e.jsx)(Mn.LB,{modifiers:[ua],sensors:kn,collisionDetection:Mn.pE,onDragEnd:Vn,children:(0,e.jsx)(Pt.Fo,{items:F.map(function(Se){return Se.key}),strategy:Pt.qw,children:(0,e.jsx)(ba.Z,{ref:Tn,rowKey:"key",components:{body:{row:po}},className:Et(Ya["table-container"]),columns:de,dataSource:F,pagination:!1,scroll:{y:F?.length>=10?560:void 0},footer:function(){return(0,e.jsx)(st.ZP,{icon:(0,e.jsx)($n.Z,{}),onClick:Jn,children:"\u65B0\u589E"})}})})}),(0,e.jsx)(ea,{id:t?.id,targetId:t?.targetId,mode:$,currentVariable:ue,inputData:F,open:P,onCancel:function(){return we(!1)},onConfirm:Je})]})},xo=Co,lt={select:"select___GzVHt",text:"text___Prt2n"},Xa=n(92973),kt=n(75216),Jt={container:"container___CqnIK","extra-box":"extra-box___y8u7O","gap-6":"gap-6___L0Qqc","img-box":"img-box___DFhgw",name:"name___MaQ7a",desc:"desc___POp__"},_t=C().bind(Jt),Ao=function(o){var l=o.className,t=o.showImage,p=t===void 0?!0:t,m=o.agentComponentInfo,L=o.defaultImage,E=o.extra,F=(0,s.useMemo)(function(){var T=m.targetId,G=m.type,$=m.targetConfig,M=m.spaceId;if($&&M===$.spaceId)switch(G){case a.qR.Plugin:return $?.type===te.AQ.HTTP?"/space/".concat(M,"/plugin/").concat(T):"/space/".concat(M,"/plugin/").concat(T,"/cloud-tool");case a.qR.Workflow:return"/space/".concat(M,"/workflow/").concat(T);case a.qR.Table:return"/space/".concat(M,"/table/").concat(T);case a.qR.Knowledge:return"/space/".concat(M,"/knowledge/").concat(T)}},[m]),R=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:_t("radius-6",Jt["img-box"]),children:p&&(0,e.jsx)("img",{src:m.icon||L,alt:""})}),(0,e.jsxs)("div",{className:_t("flex-1","flex","flex-col","content-center","overflow-hide"),children:[(0,e.jsx)("h3",{className:_t("text-ellipsis",Jt.name),children:m.name}),(0,e.jsx)(kt.Z,{condition:m.description,children:(0,e.jsx)("p",{className:_t("text-ellipsis",Jt.desc),children:m.description})})]})]});return(0,e.jsxs)("div",{className:_t("flex","items-center",Jt.container,l),children:[F?(0,e.jsx)(K.Link,{to:F,target:"_blank",className:_t("flex-1","flex","items-center","overflow-hide",Jt["gap-6"]),children:R}):(0,e.jsx)("div",{className:_t("flex-1","flex","items-center","overflow-hide",Jt["gap-6"]),children:R}),(0,e.jsx)("div",{className:_t(Jt["extra-box"],"flex","items-center"),children:E})]})},Ja=Ao,_a=n(39398),ya=n(50888),Ra={"knowledge-extra":"knowledge-extra___TBNaC"},Kt=n(64345),Lt=n(48115),ma={"space-box":"space-box___UoAwt","input-number-arrow":"input-number-arrow___NSxlF","input-disabled":"input-disabled___jdded"},fa=C().bind(ma),Eo=function(o){var l=o.value,t=o.onChange,p=o.placeholder,m=p===void 0?"\u8BF7\u8F93\u5165":p,L=o.min,E=L===void 0?0:L,F=o.max,R=o.step,T=R===void 0?1:R,G=Number(l)===F?ma["input-disabled"]:"",$=Number(l)===E?ma["input-disabled"]:"",M=function(fe){var P=fe.target.value,we=/^-?\d*(\.\d*)?$/;(we.test(P)||P===""||P==="-")&&t(P)},g=function(fe){var P=Math.max(fe,E);F&&fe>F&&(P=F),T.toString().includes(".")&&(P=parseFloat(P.toFixed(2))),t(P.toString())},pe=function(){var fe,P=l?.toString()||"0";(P&&P.charAt(P.length-1)==="."||P==="-")&&(P=P.slice(0,-1));var we=(fe=P)===null||fe===void 0?void 0:fe.replace(/0*(\d+)/,"$1");g(Number(we))},ue=function(){var fe=l?Number(l):0,P=fe+T;g(P)},A=function(){var fe=l?Number(l):0,P=fe-T;g(P)};return(0,e.jsxs)("div",{className:fa("flex",ma["space-box"]),children:[(0,e.jsx)(At.Z,{rootClassName:fa("flex-1"),placeholder:m,value:l,onChange:M,onBlur:pe}),(0,e.jsxs)("div",{className:fa("flex","flex-col","content-between",ma["input-number-arrow"]),children:[(0,e.jsx)(Lt.Z,{className:fa("cursor-pointer",G),onClick:ue}),(0,e.jsx)(Ba.Z,{className:fa("cursor-pointer",$),onClick:A})]})]})},$a=Eo,jo=n(19979),qa={"slider-box":"slider-box___gGjDf"},eo=C().bind(qa),yo=function(o){var l=o.value,t=o.onChange,p=o.min,m=p===void 0?0:p,L=o.max,E=o.step,F=E===void 0?1:E;return(0,e.jsxs)("div",{className:eo("flex-1","flex"),children:[(0,e.jsx)(jo.Z,{className:eo(qa["slider-box"]),min:m,max:L,step:F,onChange:t,value:Number(l)||0}),(0,e.jsx)($a,{value:l,min:m,max:L,step:F,onChange:t})]})},Gt=yo,Ta=n(96074),Pa={container:"container___ZTPVh",title:"title___C_jJg"},na=C().bind(Pa),Lo=function(o){var l=o.open,t=o.agentComponentInfo,p=o.onCancel,m=(0,K.useModel)("spaceAgent"),L=m.agentComponentList,E=m.setAgentComponentList,F=(0,s.useState)({invokeType:a.Qr.AUTO,searchStrategy:a.kD.MIXED,maxRecallCount:5,matchingDegree:.5,noneRecallReplyType:a.E3.DEFAULT,noneRecallReply:""}),R=u()(F,2),T=R[0],G=R[1],$=(0,K.useRequest)(D.Uc,{manual:!0,debounceInterval:300}),M=$.run;(0,s.useEffect)(function(){t!=null&&t.bindConfig&&G(t.bindConfig)},[t]);var g=function(H,fe){var P=h()(h()({},T),{},S()({},H,fe));if(G(P),H==="invokeType"){var we=L.map(function(dn){return dn.id===t?.id&&(dn.bindConfig.invokeType=fe),dn});E(we)}M({id:t?.id,targetId:t?.targetId,bindConfig:P})},pe=function(H){Number.isNaN(H)||g("maxRecallCount",H)},ue=function(H){Number.isNaN(H)||g("matchingDegree",H)};return(0,e.jsx)(Ut.Z,{title:"\u77E5\u8BC6\u5E93\u8BBE\u7F6E",open:l,footer:null,onCancel:p,children:(0,e.jsxs)("div",{className:na(Pa.container),children:[(0,e.jsx)("h3",{className:na(Pa.title),children:"\u53EC\u56DE"}),(0,e.jsxs)("div",{className:na("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u8C03\u7528\u65B9\u5F0F",title:"\u9009\u62E9\u662F\u5426\u6BCF\u8F6E\u5BF9\u8BDD\u81EA\u52A8\u53EC\u56DE\u6216\u6309\u9700\u4ECE\u7279\u5B9A\u77E5\u8BC6\u5E93\u53EC\u56DE"}),(0,e.jsx)(rt.ZP.Group,{onChange:function(H){return g("invokeType",H.target.value)},value:T.invokeType,options:fn.filter(function(A){return A.value!==a.Qr.MANUAL&&A.value!==a.Qr.MANUAL_ON_DEMAND})})]}),(0,e.jsxs)("div",{className:na("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u641C\u7D22\u7B56\u7565",title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u83B7\u53D6\u77E5\u8BC6\u7684\u68C0\u7D22\u65B9\u5F0F,\u4E0D\u540C\u7684\u68C0\u7D22\u7B56\u7565\u53EF\u4EE5\u66F4\u6709\u6548\u5730\u627E\u5230\u6B63\u786E\u7684\u4FE1\u606F,\u63D0\u9AD8\u5176\u751F\u6210\u7684\u7B54\u6848\u7684\u51C6\u786E\u6027\u548C\u53EF\u7528\u6027\u3002"}),(0,e.jsx)(rt.ZP.Group,{onChange:function(H){return g("searchStrategy",H.target.value)},value:T.searchStrategy,options:Nt})]}),(0,e.jsxs)("div",{className:na("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u6700\u5927\u53EC\u56DE\u6570\u91CF",title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B\u7684\u6700\u5927\u6BB5\u843D\u6570,\u6570\u503C\u8D8A\u5927\u8FD4\u56DE\u7684\u5185\u5BB9\u8D8A\u591A"}),(0,e.jsx)(Gt,{min:1,max:10,value:T.maxRecallCount.toString(),onChange:pe})]}),(0,e.jsxs)("div",{className:na("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u6700\u5C0F\u5339\u914D\u5EA6",title:"\u6839\u636E\u8BBE\u7F6E\u7684\u5339\u914D\u5EA6\u9009\u53D6\u6BB5\u843D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B,\u4F4E\u4E8E\u8BBE\u5B9A\u5339\u914D\u5EA6\u7684\u5185\u5BB9\u4E0D\u4F1A\u88AB\u53EC\u56DE"}),(0,e.jsx)(Gt,{min:.01,max:.99,step:.01,value:T.matchingDegree.toString(),onChange:ue})]}),(0,e.jsx)(Ta.Z,{}),(0,e.jsx)("h3",{className:na(Pa.title),children:"\u56DE\u590D"}),(0,e.jsxs)("div",{className:na("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u65E0\u53EC\u56DE\u56DE\u590D",title:"\u5F53\u77E5\u8BC6\u5E93\u6CA1\u6709\u53EC\u56DE\u6709\u6548\u5207\u7247\u65F6\u7684\u56DE\u590D\u8BDD\u672F"}),(0,e.jsx)(rt.ZP.Group,{onChange:function(H){return g("noneRecallReplyType",H.target.value)},value:T.noneRecallReplyType,options:In})]}),(0,e.jsx)(kt.Z,{condition:T.noneRecallReplyType===a.E3.CUSTOM,children:(0,e.jsx)(At.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165",value:T.noneRecallReply,onChange:function(H){return g("noneRecallReply",H.target.value)},autoSize:{minRows:3,maxRows:5}})})]})})},Oo=Lo,La=C().bind(Ra),ga=function(o){var l=o.textClassName,t=o.list,p=o.deleteList,m=o.onDel,L=(0,s.useState)(!1),E=u()(L,2),F=E[0],R=E[1],T=(0,s.useState)(),G=u()(T,2),$=G[0],M=G[1],g=function(H){R(!0),M(H)},pe=function(H,fe){return p?.some(function(P){return P.targetId===H&&P.type===fe})},ue=function(H){var fe=H.targetId,P=H.type;pe(fe,P)||m(H.id,H.targetId,H.type)};return t!=null&&t.length?(0,e.jsxs)(e.Fragment,{children:[t.map(function(A){var H;return(0,e.jsx)(Ja,{agentComponentInfo:A,defaultImage:Xa,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:La("cursor-pointer","hover-box",Ra["knowledge-extra"]),onClick:function(){return g(A)},children:[(A==null||(H=A.bindConfig)===null||H===void 0?void 0:H.invokeType)===a.Qr.AUTO?"\u81EA\u52A8\u8C03\u7528":"\u6309\u9700\u8C03\u7528",(0,e.jsx)(_a.Z,{})]}),(0,e.jsx)(qe.Z,{title:"\u53D6\u6D88\u77E5\u8BC6\u5E93",icon:pe(A.targetId,A.type)?(0,e.jsx)(ya.Z,{}):(0,e.jsx)(En.Z,{className:La("cursor-pointer")}),onClick:function(){return ue(A)}})]})},A.id)}),(0,e.jsx)(Oo,{agentComponentInfo:$,open:F,onCancel:function(){return R(!1)}})]}):(0,e.jsx)("p",{className:La(l),children:"\u5C06\u6587\u6863\u3001URL\u3001\u4E09\u65B9\u6570\u636E\u6E90\u4E0A\u4F20\u4E3A\u6587\u672C\u77E5\u8BC6\u5E93\u540E\uFF0C\u7528\u6237\u53D1\u9001\u6D88\u606F\u65F6\uFF0C\u667A\u80FD\u4F53\u80FD\u591F\u5F15\u7528\u6587\u672C\u77E5\u8BC6\u4E2D\u7684\u5185\u5BB9\u56DE\u7B54\u7528\u6237\u95EE\u9898\u3002"})},Oa=ga,no={},to=C().bind(no),So=function(o){var l=o.textClassName,t=o.openLongMemory,p=t===void 0?N.nb.Close:t;return console.log(p),(0,e.jsx)("div",{className:to(no.container),children:(0,e.jsx)("p",{className:to(l),children:"\u603B\u7ED3\u804A\u5929\u5BF9\u8BDD\u7684\u5185\u5BB9\uFF0C\u5E76\u7528\u4E8E\u66F4\u597D\u7684\u54CD\u5E94\u7528\u6237\u7684\u6D88\u606F\u3002"})})},ao=So,ra=n(46388),Sa=n(10802),oo=n(32909),Do=function(o){var l,t=o.textClassName,p=o.itemClassName,m=o.type,L=o.list,E=o.deleteList,F=o.onSet,R=o.onDel,T=function(g){switch(g){case a.qR.Plugin:return{text:"\u63D2\u4EF6\u80FD\u591F\u8BA9\u667A\u80FD\u4F53\u8C03\u7528\u5916\u90E8API\uFF0C\u4F8B\u5982\u641C\u7D22\u4FE1\u606F\u3001\u6D4F\u89C8\u7F51\u9875\u3001\u751F\u6210\u56FE\u7247\u7B49\uFF0C\u6269\u5C55\u667A\u80FD\u4F53\u7684\u80FD\u529B\u548C\u4F7F\u7528\u573A\u666F\u3002",image:ja};case a.qR.Workflow:return{text:"\u5DE5\u4F5C\u6D41\u652F\u6301\u901A\u8FC7\u53EF\u89C6\u5316\u7684\u65B9\u5F0F\uFF0C\u5BF9\u63D2\u4EF6\u3001\u5927\u8BED\u8A00\u6A21\u578B\u3001\u4EE3\u7801\u5757\u7B49\u529F\u80FD\u8FDB\u884C\u7EC4\u5408\uFF0C\u4ECE\u800C\u5B9E\u73B0\u590D\u6742\u3001\u7A33\u5B9A\u7684\u4E1A\u52A1\u6D41\u7A0B\u7F16\u6392\uFF0C\u4F8B\u5982\u65C5\u884C\u89C4\u5212\u3001\u62A5\u544A\u5206\u6790\u7B49\u3002",image:Fa};case a.qR.MCP:return{text:"\u667A\u80FD\u4F53\u53EF\u4EE5\u901A\u8FC7\u6807\u51C6\u5316\u534F\u8BAE\uFF08MCP\uFF09\u8FDE\u63A5\u5404\u7C7B\u670D\u52A1API\u5E76\u53D1\u8D77\u8C03\u7528\u3002",image:Sa};case a.qR.Table:return{text:"\u4EE5\u8868\u683C\u7ED3\u6784\u7EC4\u7EC7\u6570\u636E\uFF0C\u53EF\u5B9E\u73B0\u7C7B\u4F3C\u4E66\u7B7E\u548C\u56FE\u4E66\u7BA1\u7406\u7B49\u529F\u80FD\u3002",image:ra}}},G=function(g,pe,ue){return E?.some(function(A){return A.id===g&&A.targetId===pe&&A.type===ue})},$=function(g){var pe,ue=g.id,A=g.targetId,H=g.type;G(ue,A,H)||R(g.id,g.targetId,g.type,((pe=g.bindConfig)===null||pe===void 0?void 0:pe.toolName)||"")};return L!=null&&L.length?L.map(function(M){var g;return(0,e.jsx)(Ja,{className:p,showImage:m!==a.qR.MCP,agentComponentInfo:M,defaultImage:(g=T(m))===null||g===void 0?void 0:g.image,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qe.Z,{title:"\u8BBE\u7F6E",icon:(0,e.jsx)(oo.Mf,{className:"cursor-pointer"}),onClick:function(){return F(M.id)}}),(0,e.jsx)(qe.Z,{title:"\u5220\u9664",icon:G(M.id,M.targetId,M.type)?(0,e.jsx)(ya.Z,{}):(0,e.jsx)(En.Z,{className:"cursor-pointer"}),onClick:function(){return $(M)}})]})},M.id)}):(0,e.jsx)("p",{className:t,children:(l=T(m))===null||l===void 0?void 0:l.text})},$t=Do,Za=n(13969),ha=n(3622),Io=n(17176),Ua=n(97937),pa=n(59637),Ht={container:"container___bIAoA",header:"header___xEh8u",desc:"desc___iAhI9","reply-content":"reply-content___DGIN1",textarea:"textarea___RVpuC",tips:"tips___lKH6p",footer:"footer___zzeZr","btn-disabled":"btn-disabled___gaWUM"},Bt=C().bind(Ht),No=function(o){var l=o.async,t=o.asyncReplyContent,p=o.onSaveSet,m=(0,s.useState)(),L=u()(m,2),E=L[0],F=L[1],R=(0,s.useState)(""),T=u()(R,2),G=T[0],$=T[1];(0,s.useEffect)(function(){$(t||"\u5DF2\u7ECF\u5F00\u59CB\u4E3A\u60A8\u5904\u7406\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\u8FD0\u884C\u7ED3\u679C"),F(l||a.Km.No)},[l,t]);var M=(0,s.useMemo)(function(){return E===a.Km.Yes&&!G},[E,G]),g=function(){var A={async:E,asyncReplyContent:G};p(A)},pe=function(A){var H=A?a.Km.Yes:a.Km.No;F(H)};return(0,e.jsxs)("div",{className:Bt("flex","flex-col","h-full",Ht.container),children:[(0,e.jsxs)("div",{className:Bt("flex-1"),children:[(0,e.jsxs)("header",{className:Bt("flex","items-center",Ht.header),children:[(0,e.jsx)("div",{className:Bt("flex-1"),children:"\u5F02\u6B65\u8FD0\u884C"}),(0,e.jsx)(pa.Z,{checked:E===a.Km.Yes,onChange:pe})]}),(0,e.jsx)("p",{className:Bt(Ht.desc),children:"\u4EFB\u52A1\u8FDB\u5165\u5F02\u6B65\u8FD0\u884C\u65F6\u9ED8\u8BA4\u8FD4\u56DE\u4E00\u6761\u56DE\u590D\u5185\u5BB9\uFF0C\u7528\u6237\u53EF\u4EE5\u7EE7\u7EED\u5BF9\u8BDD\uFF0C\u4EFB\u52A1\u5728\u540E\u53F0\u8FD0\u884C\u5B8C\u6210\u540E\u4F1A\u901A\u77E5\u7528\u6237"}),(0,e.jsxs)(kt.Z,{condition:E,children:[(0,e.jsx)(en.Z,{className:Bt(Ht["reply-content"]),label:"\u56DE\u590D\u5185\u5BB9"}),(0,e.jsx)(At.Z.TextArea,{className:Bt("dispose-textarea-count"),classNames:{textarea:Bt(Ht.textarea)},placeholder:"\u60A8\u53EF\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u6D88\u606F\u56DE\u590D,\u4EFB\u52A1\u8FD0\u884C\u65F6\u5C06\u81EA\u52A8\u56DE\u590D,\u6BD4\u5982: \u4EFB\u52A1\u5DF2\u5728\u8FDB\u884C\u4E2D,\u4E00\u65E6\u5B8C\u6210\u6211\u5C06\u7B2C\u4E00\u65F6\u95F4\u5411\u60A8\u62A5\u544A\u7ED3\u679C,\u60A8\u8FD8\u6709\u5176\u4ED6\u9700\u8981\u6211\u534F\u52A9\u7684\u4E8B\u9879\u5417?",autoSize:{minRows:5,maxRows:6},maxLength:1e3,showCount:!0,value:G,onChange:function(A){return $(A.target.value)}}),(0,e.jsx)(kt.Z,{condition:!G,children:(0,e.jsx)("p",{className:Bt(Ht.tips),children:"\u56DE\u590D\u5185\u5BB9\u5FC5\u987B\u8BBE\u7F6E"})})]})]}),(0,e.jsx)("footer",{className:Bt(Ht.footer),children:(0,e.jsx)(st.ZP,{type:"primary",onClick:g,className:Bt(S()({},Ht["btn-disabled"],M)),disabled:M,children:"\u4FDD\u5B58"})})]})},gt=No,Mt=n(70852),wa=n(34041),Va=n(42834),x=n(32983),c={"space-box":"space-box___KVU7O","radius-number":"radius-number___pKpEO","link-switch":"link-switch___BekgU",footer:"footer___xsshb"},d=C().bind(c),v=function(o){var l,t,p=o.componentInfo,m=o.cardInfo,L=o.onSaveSet,E=(0,s.useState)(te.tJ.SINGLE),F=u()(E,2),R=F[0],T=F[1],G=(0,s.useState)("5"),$=u()(G,2),M=$[0],g=$[1],pe=(0,s.useState)(""),ue=u()(pe,2),A=ue[0],H=ue[1],fe=(0,s.useState)([]),P=u()(fe,2),we=P[0],dn=P[1],Tn=(0,s.useState)(!1),Ve=u()(Tn,2),Ue=Ve[0],xn=Ve[1],Jn=(0,s.useState)([]),ze=u()(Jn,2),Ce=ze[0],Pn=ze[1],ke=(0,s.useState)(!1),de=u()(ke,2),Oe=de[0],Je=de[1],Zn=(0,s.useState)(!1),Vn=u()(Zn,2),kn=Vn[0],Se=Vn[1],q=(0,s.useState)(""),Z=u()(q,2),le=Z[0],Ne=Z[1],Ae=p==null||(l=p.bindConfig)===null||l===void 0?void 0:l.outputArgBindConfigs,J=p==null||(t=p.bindConfig)===null||t===void 0?void 0:t.cardBindConfig;(0,s.useEffect)(function(){if(R===te.tJ.LIST){var Me=me()(Ae),Ee=(0,ha.Lg)(Me),vn=(0,ha.y7)(Ee);dn(vn)}},[Ae,R]),(0,s.useEffect)(function(){if(J&&m?.id===J.cardId){var Me;if(T(J.bindCardStyle),g(J?.maxCardCount||"5"),H(J?.bindArray),J!=null&&J.bindLinkUrl&&(Se(!0),Ne(J?.bindLinkUrl)),J!=null&&(Me=J.cardArgsBindConfigs)!==null&&Me!==void 0&&Me.length){var Ee,vn=J==null||(Ee=J.cardArgsBindConfigs)===null||Ee===void 0?void 0:Ee.map(function(Ln){return{key:Ln.key,cardKey:Ln.bindValue}});Pn(vn)}}else T(te.tJ.SINGLE),H(""),g("5"),Se(!1),Ne(""),Pn(m?.argList||[])},[m,J]);var Ge=(0,s.useMemo)(function(){var Me=me()(Ae);if(R===te.tJ.SINGLE)return(0,ha.k$)(Me);var Ee;return A?((Ee=(0,ha.DY)(Me,A))===null||Ee===void 0?void 0:Ee.subArgs)||[]:[]},[Ae,R,A]),On=function(Ee){var vn=Ee.target.value;T(vn),Se(!1),Ne(""),Pn(m?.argList||[])},on=function(Ee,vn){var Ln=vn.node;H(String(Ln.key)),xn(!1)},sn=function(Ee,vn){var Ln=me()(Ce);Ln[Ee].open=vn,Pn(Ln)},cn=function(Ee,vn){var Ln=me()(Ce);Ln[vn].open=!1,Ln[vn].cardKey=Ee.key,Pn(Ln)},bn=function(Ee){Se(Ee),Ee||Ne("")},at=function(){var Ee=Ce?.map(function(yt){return{key:yt.key,bindValue:yt?.cardKey||""}}),vn={cardId:m?.id,cardKey:m?.cardKey,bindCardStyle:R,cardArgsBindConfigs:Ee,bindLinkUrl:le},Ln=R===te.tJ.SINGLE?vn:h()(h()({},vn),{},{maxCardCount:M,bindArray:A}),vt={cardBindConfig:Ln};L(vt)};return(0,e.jsxs)("div",{className:d("flex-1","flex","flex-col"),children:[(0,e.jsxs)(qn.Z,{layout:"vertical",preserve:!1,rootClassName:d("flex-1"),requiredMark:Wa.N,children:[(0,e.jsx)(qn.Z.Item,{label:"\u9009\u62E9\u5361\u7247\u6837\u5F0F",children:(0,e.jsx)(rt.ZP.Group,{onChange:On,value:R,options:Le})}),R===te.tJ.LIST&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qn.Z.Item,{label:(0,e.jsx)(en.Z,{label:"\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6"}),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6"}],children:(0,e.jsx)($a,{value:M,onChange:function(Ee){return g(Ee)},placeholder:"\u8BF7\u8F93\u5165\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6",max:20,min:1})}),(0,e.jsx)(qn.Z.Item,{label:"\u4E3A\u5361\u7247\u6574\u4F53\u7ED1\u5B9A\u4E00\u4E2A\u6570\u7EC4",children:(0,e.jsx)(wa.Z,{popupMatchSelectWidth:!1,open:Ue,value:A||null,onDropdownVisibleChange:function(Ee){xn(Ee)},onClick:function(){return xn(!0)},placeholder:"\u8BF7\u4E3A\u5361\u7247\u6574\u4F53\u7ED1\u5B9A\u4E00\u4E2A\u6570\u7EC4",dropdownRender:function(){return we?.length>0?(0,e.jsx)(Va.Z,{treeData:we,height:300,blockNode:!0,onClick:function(vn){vn.stopPropagation()},onSelect:on,fieldNames:{title:"name",key:"key",children:"subArgs"}}):(0,e.jsx)(x.Z,{description:"\u6682\u65E0\u6570\u636E"})}})})]}),(0,e.jsx)(qn.Z.Item,{label:"\u4E3A\u5361\u7247\u5185\u7684\u5217\u8868\u9879\u7ED1\u5B9A\u6570\u636E",children:Ce?.map(function(Me,Ee){return(0,e.jsx)(qn.Z.Item,{className:d("mb-16"),children:(0,e.jsxs)("div",{className:d("flex","items-center",c["space-box"]),children:[(0,e.jsx)("span",{className:d(c["radius-number"]),children:Ee+1}),(0,e.jsx)(wa.Z,{rootClassName:d("flex-1"),popupMatchSelectWidth:!1,disabled:R===te.tJ.LIST&&!A,open:!!Me?.open,value:Me?.cardKey,onDropdownVisibleChange:function(Ln){return sn(Ee,Ln)},onClick:function(){return sn(Ee,!0)},dropdownRender:function(){return Ge?.length>0?(0,e.jsx)(Va.Z,{treeData:Ge,height:300,blockNode:!0,onClick:function(vt){vt.stopPropagation()},onSelect:function(vt,yt){var Fn=yt.node;return cn(Fn,Ee)},fieldNames:{title:"name",key:"key",children:"subArgs"}}):(0,e.jsx)(x.Z,{description:"\u6682\u65E0\u6570\u636E"})},placeholder:Me.placeholder||"\u8BF7\u9009\u62E9"})]})},Me.key)})}),(0,e.jsxs)(qn.Z.Item,{label:"\u70B9\u51FB\u5361\u7247\u8DF3\u8F6C",tooltip:{title:"\u7ED1\u5B9A\u540E\uFF0C\u7528\u6237\u5728\u667A\u80FD\u4F53\u5BF9\u8BDD\u6D41\u4E2D\u70B9\u51FB \u5361\u7247\u53EF\u8DF3\u8F6C\u81F3\u5176\u4ED6\u9875\u9762",icon:(0,e.jsx)(Sn.Z,{})},children:[(0,e.jsx)(pa.Z,{className:d(c["link-switch"]),disabled:!(Ge!=null&&Ge.length),size:"small",checked:kn,onChange:bn}),(0,e.jsx)(kt.Z,{condition:kn,children:(0,e.jsx)(wa.Z,{allowClear:!0,rootClassName:d("flex-1"),popupMatchSelectWidth:!1,open:Oe,value:le||null,onDropdownVisibleChange:function(Ee){return Je(Ee)},onClick:function(){return Je(!0)},dropdownRender:function(){return(0,e.jsx)(Va.Z,{treeData:Ge,height:300,blockNode:!0,onClick:function(vn){vn.stopPropagation()},onSelect:function(vn,Ln){var vt=Ln.node;Ne(vt.key),Je(!1)},fieldNames:{title:"name",key:"key",children:"subArgs"}})},placeholder:"\u4E3Aurl\u9009\u62E9\u6570\u636E\u6765\u6E90"})})]})]}),(0,e.jsx)("footer",{className:d(c.footer),children:(0,e.jsx)(st.ZP,{type:"primary",onClick:at,children:"\u4FDD\u5B58"})})]})},i=v,r={"card-box":"card-box___L2_At",radio:"radio___oRbG0"},y=C().bind(r),X=function(o){var l=o.cardKey,t=o.list,p=o.onChoose;return(0,e.jsx)("div",{className:y("h-full","overflow-y"),children:t?.map(function(m){return(0,e.jsxs)("div",{className:y(r["card-box"],"flex","hover-box","cursor-pointer"),onClick:function(){return p(m)},children:[(0,e.jsx)("img",{className:"radius-6",src:m.imageUrl,alt:""}),(0,e.jsx)(rt.ZP,{checked:m.cardKey===l,className:y(r.radio)})]},m.id)})})},_=X,ve={container:"container___KJPJn",title:"title___J7PRF"},w=C().bind(ve),je=function(o){var l=o.loading,t=o.agentCardList,p=o.componentInfo,m=o.onSaveSet,L=(0,s.useState)(),E=u()(L,2),F=E[0],R=E[1];return(0,s.useEffect)(function(){var T,G=p==null||(T=p.bindConfig)===null||T===void 0||(T=T.cardBindConfig)===null||T===void 0?void 0:T.cardId;R(G?t.find(function($){return $.id===G}):t[0])},[t,p]),(0,e.jsx)("div",{className:w("flex","h-full",ve.container),children:l?(0,e.jsx)(Mt.Z,{className:w("h-full")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:w("flex-1","px-16","py-16"),children:[(0,e.jsx)("h3",{className:w(ve.title),children:"\u9009\u62E9\u5361\u7247\u6837\u5F0F"}),(0,e.jsx)(_,{cardKey:F?.cardKey,list:t,onChoose:R})]}),(0,e.jsxs)("div",{className:w("flex-1","flex","flex-col","px-16","py-16"),children:[(0,e.jsx)("h3",{className:w(ve.title),children:"\u4E3A\u5361\u7247\u7ED1\u5B9A\u6570\u636E\u6E90"}),(0,e.jsx)(i,{cardInfo:F,componentInfo:p,onSaveSet:m})]})]})})},be=je,gn={container:"container___f5OC_",header:"header____Mhqp",desc:"desc___zrBqq","reply-content":"reply-content___e4lnw",textarea:"textarea___I5Ny2",tips:"tips___gxuIs",footer:"footer___v3HYH","btn-disabled":"btn-disabled___pDNWH"},We=C().bind(gn),hn=function(o){var l=o.exceptionOut,t=o.fallbackMsg,p=o.onSaveSet,m=(0,s.useState)(),L=u()(m,2),E=L[0],F=L[1],R=(0,s.useState)(""),T=u()(R,2),G=T[0],$=T[1];(0,s.useEffect)(function(){$(t||""),F(l||a.Km.No)},[l,t]);var M=(0,s.useMemo)(function(){return E===a.Km.Yes&&!G},[E,G]),g=function(){var A={exceptionOut:E,fallbackMsg:G};p(A)},pe=function(A){var H=A?a.Km.Yes:a.Km.No;F(H)};return(0,e.jsxs)("div",{className:We("flex","flex-col","h-full",gn.container),children:[(0,e.jsxs)("div",{className:We("flex-1"),children:[(0,e.jsxs)("header",{className:We("flex","items-center",gn.header),children:[(0,e.jsx)("div",{className:We("flex-1"),children:"\u5F02\u5E38\u65F6\u4E2D\u65AD\u6D41\u7A0B"}),(0,e.jsx)(pa.Z,{checked:E===a.Km.Yes,onChange:pe})]}),(0,e.jsx)("p",{className:We(gn.desc),children:"\u5F02\u5E38\u65F6\u8F93\u51FA\u7ED9\u5927\u6A21\u578B\u7684\u9ED8\u8BA4\u4FE1\u606F"}),(0,e.jsxs)(kt.Z,{condition:E,children:[(0,e.jsx)(en.Z,{className:We(gn["reply-content"]),label:"\u9ED8\u8BA4\u4FE1\u606F"}),(0,e.jsx)(At.Z.TextArea,{className:We("dispose-textarea-count"),classNames:{textarea:We(gn.textarea)},placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u65F6\u8F93\u51FA\u7ED9\u5927\u6A21\u578B\u7684\u9ED8\u8BA4\u4FE1\u606F",autoSize:{minRows:5,maxRows:6},maxLength:1e3,showCount:!0,value:G,onChange:function(A){return $(A.target.value)}})]})]}),(0,e.jsx)("footer",{className:We(gn.footer),children:(0,e.jsx)(st.ZP,{type:"primary",onClick:g,className:We(S()({},gn["btn-disabled"],M)),disabled:M,children:"\u4FDD\u5B58"})})]})},wn=hn,pn={"modal-container":"modal-container___DIR0N",container:"container___jZY5S",left:"left___zfIP5",item:"item___kItJN",checked:"checked___Q1XQY",right:"right___AZIcw",close:"close___bZkPm"},it=n(11475),Cn=n(83062),ut={container:"container___n6D12",icon:"icon___CDvAh",footer:"footer___bl30K"},Rt=C().bind(ut),Ca=function(o){var l=o.invokeType,t=o.onSaveSet,p=o.defaultSelected,m=(0,s.useState)(),L=u()(m,2),E=L[0],F=L[1],R=(0,s.useState)(a.Km.No),T=u()(R,2),G=T[0],$=T[1];(0,s.useEffect)(function(){F(l||a.Qr.AUTO),$(p||a.Km.No)},[l,p]);var M=function(ue){var A=ue.target.value;F(A)},g=function(){var ue={invokeType:E,defaultSelected:G};t(ue)};return(0,e.jsxs)("div",{className:Rt(ut.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:Rt("flex-1"),children:[(0,e.jsxs)("h3",{className:Rt("gap-6","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u8C03\u7528\u65B9\u5F0F"}),(0,e.jsx)(Cn.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:"\u81EA\u52A8\u8C03\u7528\uFF1A\u7528\u6237\u6BCF\u6B21\u53D1\u9001\u6D88\u606F\u540E\u90FD\u4F1A\u89E6\u53D1\u8C03\u7528\u4E00\u6B21"}),(0,e.jsx)("p",{children:"\u6309\u9700\u8C03\u7528\uFF1A\u7531\u6A21\u578B\u6839\u636E\u4EFB\u52A1\u60C5\u51B5\u51B3\u5B9A\u662F\u5426\u9700\u8981\u8C03\u7528"}),(0,e.jsx)("p",{children:"\u624B\u52A8\u9009\u62E9\uFF1A\u7531\u7528\u6237\u51B3\u5B9A\u662F\u5426\u4F7F\u7528\u8BE5\u5DE5\u5177\uFF0C\u5728\u7528\u6237\u9009\u62E9\u7684\u60C5\u51B5\u4E0B\u548C\u81EA\u52A8\u8C03\u7528\u6548\u679C\u4E00\u6837"}),(0,e.jsx)("p",{children:"\u624B\u52A8\u9009\u62E9+\u6309\u9700\u8C03\u7528\uFF1A\u7528\u6237\u9009\u62E9\u540E\uFF0C\u7531\u6A21\u578B\u6839\u636E\u4EFB\u52A1\u60C5\u51B5\u9009\u62E9\u662F\u5426\u9700\u8981\u8C03\u7528\uFF1B\u7528\u6237\u4E0D\u9009\u62E9\u5219\u4E0D\u4F1A\u8C03\u7528"})]}),children:(0,e.jsx)(it.Z,{className:Rt(ut.icon)})})]}),(0,e.jsx)(rt.ZP.Group,{options:fn,onChange:M,value:E}),(0,e.jsxs)(kt.Z,{condition:E===a.Qr.MANUAL||E===a.Qr.MANUAL_ON_DEMAND,children:[(0,e.jsx)("h3",{className:Rt("mt-16"),children:"\u662F\u5426\u9ED8\u8BA4\u9009\u4E2D"}),(0,e.jsx)(rt.ZP.Group,{options:Dn,onChange:function(ue){return $(ue.target.value)},value:G})]})]}),(0,e.jsx)("footer",{className:Rt(ut.footer),children:(0,e.jsx)(st.ZP,{type:"primary",onClick:g,children:"\u4FDD\u5B58"})})]})},xa=(0,s.memo)(Ca),Wt={container:"container___IwVbE",icon:"icon___yZKCd",footer:"footer___gT5kO"},Qt=C().bind(Wt),Da=function(o){var l=o.directOutput,t=o.onSaveSet,p=(0,s.useState)(),m=u()(p,2),L=m[0],E=m[1];(0,s.useEffect)(function(){E(l||a.E8.No)},[l]);var F=function(G){var $=G.target.value;E($)},R=function(){var G={directOutput:L};t(G)};return(0,e.jsxs)("div",{className:Qt(Wt.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:Qt("flex-1"),children:[(0,e.jsxs)("h3",{className:Qt("gap-6","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u662F\u5426\u76F4\u63A5\u8F93\u51FA"}),(0,e.jsx)(Cn.Z,{title:"\u5982\u679C\u9009\u62E9\u201C\u662F\u201D\uFF0C\u5C06\u4F1A\u628A\u5DE5\u4F5C\u6D41\u8FD0\u884C\u7ED3\u679C\u76F4\u63A5\u8F93\u51FA\u5230\u4F1A\u8BDD\u6846\u4E2D\uFF0C\u4E0D\u4F1A\u518D\u7ECF\u8FC7\u5927\u6A21\u578B\u603B\u7ED3\u8F93\u51FA\u3002",children:(0,e.jsx)(it.Z,{className:Qt(Wt.icon)})})]}),(0,e.jsx)(rt.ZP.Group,{options:ot,onChange:F,value:L})]}),(0,e.jsx)("footer",{className:Qt(Wt.footer),children:(0,e.jsx)(st.ZP,{type:"primary",onClick:R,children:"\u4FDD\u5B58"})})]})},Nn=(0,s.memo)(Da),jn=C().bind(pn),Yn=function(o){var l=o.open,t=o.currentComponentInfo,p=o.variables,m=o.onCancel,L=o.settingActionList,E=L===void 0?Be.a$:L,F=(0,s.useState)(N.wQ.Params),R=u()(F,2),T=R[0],G=R[1],$=(0,s.useState)(),M=u()($,2),g=M[0],pe=M[1],ue=(0,s.useState)(!1),A=u()(ue,2),H=A[0],fe=A[1],P=(0,s.useState)([]),we=u()(P,2),dn=we[0],Tn=we[1],Ve=(0,K.useModel)("spaceAgent"),Ue=Ve.setAgentComponentList;(0,s.useEffect)(function(){G(N.wQ.Params),pe(t)},[t]);var xn={manual:!0,debounceWait:300},Jn=(0,z.Z)(D.Cd,xn),ze=Jn.runAsync,Ce=(0,z.Z)(D.ao,xn),Pn=Ce.runAsync,ke=(0,z.Z)(D.M8,xn),de=ke.runAsync,Oe=(0,z.Z)(D.Nc,xn),Je=Oe.runAsync,Zn=(0,z.Z)(D.P4,h()(h()({},xn),{},{onSuccess:function(le){var Ne=le.data;Ne!=null&&Ne.length&&Tn(Ne),fe(!1)},onError:function(){fe(!1)}})),Vn=Zn.run;(0,s.useEffect)(function(){fe(!0),Vn()},[]);var kn=function(){var Z=Te()(O()().mark(function le(Ne){return O()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(g?.type!==a.qR.Plugin){J.next=3;break}return J.next=3,ze(Ne);case 3:if(g?.type!==a.qR.Workflow){J.next=6;break}return J.next=6,Pn(Ne);case 6:if(g?.type!==a.qR.Table){J.next=9;break}return J.next=9,de(Ne);case 9:if(g?.type!==a.qR.MCP){J.next=12;break}return J.next=12,Je(Ne);case 12:case"end":return J.stop()}},le)}));return function(Ne){return Z.apply(this,arguments)}}(),Se=function(){var Z=Te()(O()().mark(function le(Ne,Ae){var J,Ge,On;return O()().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return J=g?.id||0,Ge=Ne??{},On=h()({id:J,bindConfig:h()(h()({},g?.bindConfig),Ge)},Ae||{}),sn.next=5,kn(On);case 5:pe(function(cn){return cn&&("bindConfig"in cn&&(cn.bindConfig=h()(h()({},cn.bindConfig),Ge)),Ae&&(cn.exceptionOut=Ae.exceptionOut,cn.fallbackMsg=Ae.fallbackMsg)),cn}),Ue(function(cn){return cn.map(function(bn){return bn.id===J&&(bn.bindConfig=h()(h()({},bn.bindConfig),Ge),Ae&&(bn.exceptionOut=Ae.exceptionOut,bn.fallbackMsg=Ae.fallbackMsg)),bn})}),Pe.ZP.success("\u4FDD\u5B58\u6210\u529F");case 8:case"end":return sn.stop()}},le)}));return function(Ne,Ae){return Z.apply(this,arguments)}}(),q=function(){var le,Ne,Ae,J,Ge,On;switch(T){case N.wQ.Params:return(0,e.jsx)(Io.Z,{variables:p||[],inputArgBindConfigs:g==null||(le=g.bindConfig)===null||le===void 0?void 0:le.inputArgBindConfigs,onSaveSet:Se});case N.wQ.Method_Call:return(0,e.jsx)(xa,{invokeType:g==null||(Ne=g.bindConfig)===null||Ne===void 0?void 0:Ne.invokeType,defaultSelected:g==null||(Ae=g.bindConfig)===null||Ae===void 0?void 0:Ae.defaultSelected,onSaveSet:Se});case N.wQ.Output_Way:return(0,e.jsx)(Nn,{directOutput:g==null||(J=g.bindConfig)===null||J===void 0?void 0:J.directOutput,onSaveSet:Se});case N.wQ.Async_Run:return(0,e.jsx)(gt,{async:g==null||(Ge=g.bindConfig)===null||Ge===void 0?void 0:Ge.async,asyncReplyContent:g==null||(On=g.bindConfig)===null||On===void 0?void 0:On.asyncReplyContent,onSaveSet:Se});case N.wQ.Exception_Handling:return(0,e.jsx)(wn,{exceptionOut:g?.exceptionOut||a.Km.No,fallbackMsg:g?.fallbackMsg||"",onSaveSet:function(sn){return Se(null,sn)}});case N.wQ.Card_Bind:return(0,e.jsx)(be,{loading:H,agentCardList:dn,componentInfo:g,onSaveSet:Se})}};return(0,e.jsx)(Ut.Z,{centered:!0,open:l,onCancel:m,destroyOnClose:!0,className:jn(pn["modal-container"]),modalRender:function(){return(0,e.jsxs)("div",{className:jn(pn.container,"flex","overflow-hide"),children:[(0,e.jsxs)("div",{className:jn(pn.left),children:[(0,e.jsx)("h3",{children:"\u8BBE\u7F6E"}),(0,e.jsx)("ul",{children:E.map(function(le){return t?.type===a.qR.Table&&[N.wQ.Method_Call,N.wQ.Async_Run,N.wQ.Exception_Handling].includes(le.type)||t?.type!==a.qR.Workflow&&le.type===N.wQ.Output_Way?null:(0,e.jsx)("li",{className:jn(pn.item,"cursor-pointer",S()({},pn.checked,T===le.type)),onClick:function(){return G(le.type)},children:le.label},le.type)})})]}),(0,e.jsx)("div",{className:jn("flex-1",pn.right),children:q()}),(0,e.jsx)(Ua.Z,{className:jn(pn.close,"cursor-pointer"),onClick:m})]})}})},nt=Yn,Xn={container:"container___pz0mN","group-mcp-item":"group-mcp-item___akoCX",border:"border___qpNFT","img-box":"img-box___DKgNV",name:"name___zlseW",desc:"desc___In9oO","extra-box":"extra-box___KlFIX","down-icon":"down-icon___EAqjU","down-icon-rotate":"down-icon-rotate___HuIxH","group-mcp-item-children":"group-mcp-item-children___Ren3g"},ht=C().bind(Xn),ka=function(o){var l=o.item,t=o.deleteList,p=o.onSet,m=o.onDel,L=(0,s.useState)(!1),E=u()(L,2),F=E[0],R=E[1];return(0,e.jsxs)("div",{className:ht(Xn.container),children:[(0,e.jsxs)("div",{className:ht("flex","items-center",Xn["group-mcp-item"],S()({},Xn.border,F)),onClick:function(){return R(!F)},children:[(0,e.jsx)("span",{className:ht("radius-6",Xn["img-box"]),children:(0,e.jsx)("img",{src:l.icon,alt:""})}),(0,e.jsxs)("div",{className:ht("flex","flex-col","flex-1","overflow-hide"),children:[(0,e.jsx)("h3",{className:ht("text-ellipsis",Xn.name),children:l.groupName}),(0,e.jsx)("p",{className:ht("text-ellipsis",Xn.desc),children:l.groupDescription})]}),(0,e.jsxs)("div",{className:ht(Xn["extra-box"],"flex","items-center","cursor-pointer"),children:[(0,e.jsx)("span",{children:"\u5DE5\u5177\uFF08".concat(l.children.length,"\uFF09")}),(0,e.jsx)(Ba.Z,{className:ht(Xn["down-icon"],S()({},Xn["down-icon-rotate"],F))})]})]}),F&&(0,e.jsx)($t,{textClassName:ht(Xn.text),itemClassName:ht(Xn["group-mcp-item-children"]),type:a.qR.MCP,list:l.children,deleteList:t,onSet:p,onDel:m})]})},bo=ka,dt={title:"title___ku1cn","content-box":"content-box___fiZV5",add:"add___TngwK",input:"input___fm7tL"},ta=C().bind(dt),aa=function(o){var l=o.agentConfigInfo,t=o.onChangeAgent,p=(0,s.useState)(""),m=u()(p,2),L=m[0],E=m[1],F=(0,s.useState)([""]),R=u()(F,2),T=R[0],G=R[1];(0,s.useEffect)(function(){if(l){var ue;E(l.openingChatMsg),((ue=l.openingGuidQuestions)===null||ue===void 0?void 0:ue.length)>0&&G(l.openingGuidQuestions)}},[l]);var $=function(){var A=xe()(T);A.push(""),G(A)},M=function(A){var H=xe()(T);H.splice(A,1),G(H),t(H,"openingGuidQuestions")},g=function(A){E(A),t(A,"openingChatMsg")},pe=function(A,H){var fe=xe()(T);fe[A]=H,G(fe),t(fe,"openingGuidQuestions")};return(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:ta(dt.title),children:"\u5F00\u573A\u767D\u6587\u6848"}),(0,e.jsx)("div",{className:ta(dt["content-box"]),children:(0,e.jsx)(At.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u5F00\u573A\u767D",value:L,onChange:function(A){return g(A.target.value)},autoSize:{minRows:3,maxRows:5}})}),(0,e.jsxs)("div",{className:ta("flex","content-between"),children:[(0,e.jsx)("p",{className:ta(dt.title),children:"\u5F00\u573A\u767D\u9884\u7F6E\u95EE\u9898"}),(0,e.jsx)($n.Z,{className:ta(dt.add,"cursor-pointer"),onClick:$})]}),(0,e.jsx)("div",{children:T?.map(function(ue,A){return(0,e.jsx)(At.Z,{rootClassName:ta(dt.input),placeholder:"\u8F93\u5165\u5F00\u573A\u767D\u5F15\u5BFC\u95EE\u9898",value:ue,onChange:function(fe){return pe(A,fe.target.value)},suffix:(0,e.jsx)(En.Z,{className:ta("cursor-pointer"),onClick:function(){return M(A)}})},A)})})]})},qt=aa,et=C().bind(lt),la=function(o){var l,t,p=o.agentId,m=o.agentConfigInfo,L=o.onChangeAgent,E=(0,s.useState)(!1),F=u()(E,2),R=F[0],T=F[1],G=(0,s.useState)(!1),$=u()(G,2),M=$[0],g=$[1],pe=(0,s.useState)(a.qR.Plugin),ue=u()(pe,2),A=ue[0],H=ue[1],fe=(0,s.useState)([N.bX.Opening_Remarks]),P=u()(fe,2),we=P[0],dn=P[1],Tn=(0,s.useState)([]),Ve=u()(Tn,2),Ue=Ve[0],xn=Ve[1],Jn=(0,s.useState)(),ze=u()(Jn,2),Ce=ze[0],Pn=ze[1],ke=(0,s.useState)([]),de=u()(ke,2),Oe=de[0],Je=de[1],Zn=(0,K.useModel)("model"),Vn=Zn.show,kn=Zn.setShow,Se=(0,K.useModel)("spaceAgent"),q=Se.agentComponentList,Z=Se.setAgentComponentList,le=(0,K.useModel)("conversationInfo"),Ne=le.handleVariables,Ae=function(ge){return q?.filter(function(_e){return _e.type===ge})||[]},J=(0,s.useMemo)(function(){var De=Ae(a.qR.MCP),ge=new Map;return De.forEach(function(_e){var an=_e.targetId,_n=_e.icon,mt=_e.groupName,Dt=_e.groupDescription,It=an.toString();ge.has(It)||ge.set(It,{targetId:an,icon:_n,groupName:mt,groupDescription:Dt,children:[]});var ia=ge.get(It);ia.children.push(_e)}),Array.from(ge.values())},[q]),Ge=(0,s.useMemo)(function(){return q?.find(function(De){return De.type===a.qR.Variable})},[q]),On=function(ge){return q?.some(function(_e){return _e.type===ge})},on=(0,s.useMemo)(function(){var De=[];return On(a.qR.Plugin)&&De.push(N.bX.Plugin),On(a.qR.Workflow)&&De.push(N.bX.Workflow),On(a.qR.Trigger)&&De.push(N.bX.Trigger),On(a.qR.MCP)&&De.push(N.bX.MCP),De},[q]),sn=(0,s.useMemo)(function(){return On(a.qR.Knowledge)?[N.bX.Text]:[]},[q]),cn=(0,s.useMemo)(function(){var De=[];return On(a.qR.Variable)&&De.push(N.bX.Variable),On(a.qR.Table)&&De.push(N.bX.Table),De},[q]),bn=(0,z.Z)(D.dO,{manual:!0,debounceWait:300}),at=bn.runAsync,Me=(0,z.Z)(D.Nu,{manual:!0,debounceWait:300}),Ee=Me.runAsync,vn=(0,z.Z)(D.Wu,{manual:!0,debounceWait:300}),Ln=vn.runAsync,vt=function(){var De=Te()(O()().mark(function ge(_e,an,_n,mt){var Dt,It,ia,co;return O()().wrap(function(vo){for(;;)switch(vo.prev=vo.next){case 0:return Dt=[].concat(xe()(Oe),[{id:_e,targetId:an,type:_n}]),Je(Dt),vo.next=4,Ee(_e);case 4:Pe.ZP.success("\u5DF2\u6210\u529F\u5220\u9664"),It=q?.filter(function(Yt){var Po;return!(Yt.id===_e&&Yt.type===_n&&(((Po=Yt.bindConfig)===null||Po===void 0?void 0:Po.toolName)||"")===(mt||""))})||[],Z(It),ia=Ue?.filter(function(Yt){return!(Yt.targetId===an&&Yt.type===_n&&(Yt.toolName||"")===(mt||""))})||[],xn(ia),co=Oe.filter(function(Yt){return Yt.id!==_e&&Yt.targetId!==an&&Yt.type!==_n}),Je(co);case 11:case"end":return vo.stop()}},ge)}));return function(_e,an,_n,mt){return De.apply(this,arguments)}}(),yt=function(){var De=Te()(O()().mark(function ge(){var _e,an,_n;return O()().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,at(p);case 2:_e=Dt.sent,an=_e.data,Z(an),_n=an?.map(function(It){var ia,co=It.type===a.qR.MCP?(ia=It.bindConfig)===null||ia===void 0?void 0:ia.toolName:"";return{type:It.type,targetId:It.targetId,status:a.BQ.Added,toolName:co}})||[],xn(_n);case 7:case"end":return Dt.stop()}},ge)}));return function(){return De.apply(this,arguments)}}(),Fn=(0,z.Z)(D.AM,{manual:!0,debounceWait:300,onSuccess:function(){var De=Te()(O()().mark(function _e(){return O()().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:return Pe.ZP.success("\u5DF2\u6210\u529F\u6DFB\u52A0"),_n.next=3,yt();case 3:case"end":return _n.stop()}},_e)}));function ge(){return De.apply(this,arguments)}return ge}(),onError:function(ge,_e){var an=_e[0],_n=an.targetId,mt=an.type;xn(function(Dt){return Dt.filter(function(It){return It.type===mt&&It.targetId!==_n})})}}),mn=Fn.run;(0,s.useEffect)(function(){yt()},[p]);var Kn=function(ge,_e){ge.stopPropagation(),H(_e),kn(!0)},Wn=function(ge){ge.stopPropagation(),g(!0)},Ct=function(){var De=Te()(O()().mark(function ge(){var _e,an;return O()().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return g(!1),yt(),mt.next=4,Ln(p);case 4:_e=mt.sent,an=_e.data,Ne(an);case 7:case"end":return mt.stop()}},ge)}));return function(){return De.apply(this,arguments)}}(),Ye=function(ge){var _e,an=q?.find(function(Dt){return Dt.id===ge}),_n=an==null||(_e=an.bindConfig)===null||_e===void 0?void 0:_e.inputArgBindConfigs,mt=(0,ha.T6)(_n||[]);an&&an.bindConfig&&(an.bindConfig.inputArgBindConfigs=mt),an?.type===a.qR.Workflow&&(an.bindConfig.argBindConfigs=null),Pn(an),T(!0)},St=[{key:N.bX.Plugin,label:"\u63D2\u4EF6",children:(0,e.jsx)($t,{textClassName:et(lt.text),type:a.qR.Plugin,list:Ae(a.qR.Plugin),deleteList:Oe,onSet:Ye,onDel:vt}),extra:(0,e.jsx)(qe.Z,{title:"\u6DFB\u52A0\u63D2\u4EF6",onClick:function(ge){return Kn(ge,a.qR.Plugin)}})},{key:N.bX.Workflow,label:"\u5DE5\u4F5C\u6D41",children:(0,e.jsx)($t,{textClassName:et(lt.text),type:a.qR.Workflow,list:Ae(a.qR.Workflow),deleteList:Oe,onSet:Ye,onDel:vt}),extra:(0,e.jsx)(qe.Z,{title:"\u6DFB\u52A0\u5DE5\u4F5C\u6D41",onClick:function(ge){return Kn(ge,a.qR.Workflow)}})},{key:N.bX.MCP,label:"MCP",children:J!=null&&J.length?J.map(function(De){return(0,e.jsx)(bo,{item:De,deleteList:Oe,onSet:Ye,onDel:vt},De.targetId)}):(0,e.jsx)("p",{className:et(lt.text),children:"\u667A\u80FD\u4F53\u53EF\u4EE5\u901A\u8FC7\u6807\u51C6\u5316\u534F\u8BAE\uFF08MCP\uFF09\u8FDE\u63A5\u5404\u7C7B\u670D\u52A1API\u5E76\u53D1\u8D77\u8C03\u7528\u3002"}),extra:(0,e.jsx)(qe.Z,{title:"\u6DFB\u52A0MCP",onClick:function(ge){return Kn(ge,a.qR.MCP)}})}],Tt=[{key:N.bX.Text,label:"\u6587\u672C",children:(0,e.jsx)(Oa,{textClassName:et(lt.text),list:Ae(a.qR.Knowledge),deleteList:Oe,onDel:vt}),extra:(0,e.jsx)(qe.Z,{title:"\u6DFB\u52A0\u77E5\u8BC6\u5E93",onClick:function(ge){return Kn(ge,a.qR.Knowledge)}})}],zt=[{key:N.bX.Variable,label:"\u53D8\u91CF",children:(0,e.jsx)(ye,{textClassName:et(lt.text),list:(Ge==null||(l=Ge.bindConfig)===null||l===void 0?void 0:l.variables)||[],onClick:Wn}),extra:(0,e.jsx)(qe.Z,{title:"\u6DFB\u52A0\u53D8\u91CF",onClick:Wn})},{key:N.bX.Table,label:"\u6570\u636E\u8868",children:(0,e.jsx)($t,{textClassName:et(lt.text),type:a.qR.Table,list:Ae(a.qR.Table),onSet:Ye,onDel:vt}),extra:(0,e.jsx)(qe.Z,{title:"\u6DFB\u52A0\u6570\u636E\u8868",onClick:function(ge){return Kn(ge,a.qR.Table)}})},{key:N.bX.Long_Memory,label:"\u957F\u671F\u8BB0\u5FC6",children:(0,e.jsx)(ao,{textClassName:et(lt.text),openLongMemory:m?.openLongMemory}),extra:(0,e.jsx)(Xe.Z,{className:et(lt.select),size:"small",value:m?.openLongMemory,onChange:function(ge){return L(ge,"openLongMemory")},options:Be.RT})}],To=[{key:N.bX.Opening_Remarks,label:"\u5F00\u573A\u767D",children:(0,e.jsx)(qt,{agentConfigInfo:m,onChangeAgent:L})},{key:N.bX.User_Problem_Suggestion,label:"\u7528\u6237\u95EE\u9898\u5EFA\u8BAE",children:(0,e.jsx)("p",{className:et(lt.text),children:"\u5728\u6BCF\u6B21\u667A\u80FD\u4F53\u56DE\u590D\u540E\uFF0C\u4E0D\u4F1A\u63D0\u4F9B\u4EFB\u4F55\u7528\u6237\u95EE\u9898\u5EFA\u8BAE"}),extra:(0,e.jsx)(Xe.Z,{className:et(lt.select),size:"small",value:m?.openSuggest,onChange:function(ge){return L(ge,"openSuggest")},options:Be.RT})},{key:N.bX.Open_Scheduled_Task,label:"\u5B9A\u65F6\u4EFB\u52A1",children:(0,e.jsx)("p",{className:et(lt.text),children:"\u5F00\u542F\u540E\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1\u7684\u65B9\u5F0F\u8BA9\u667A\u80FD\u4F53\u6267\u884C\u4EFB\u52A1"}),extra:(0,e.jsx)(Xe.Z,{className:et(lt.select),size:"small",value:m?.openScheduledTask||N.nb.Close,onChange:function(ge){return L(ge,"openScheduledTask")},options:Be.RT})}],Ps=function(ge){xn(function(_e){return[].concat(xe()(_e),[{type:ge.targetType,targetId:ge.targetId,status:a.BQ.Loading,toolName:ge.toolName||""}])}),mn({agentId:p,type:ge.targetType,targetId:ge.targetId,toolName:ge.toolName||""})},Ls=(0,s.useCallback)(function(De){return De===a.qR.MCP?Be.a$.filter(function(ge){return![N.wQ.Method_Call,N.wQ.Async_Run,N.wQ.Card_Bind].includes(ge.type)}):Be.a$},[]);return(0,e.jsxs)("div",{className:C()("overflow-y","flex-1","px-16","py-12"),children:[(0,e.jsx)(un,{title:"\u6280\u80FD"}),(0,e.jsx)(he.Z,{items:St,defaultActiveKey:on}),(0,e.jsx)(un,{title:"\u77E5\u8BC6"}),(0,e.jsx)(he.Z,{items:Tt,defaultActiveKey:sn}),(0,e.jsx)(un,{title:"\u8BB0\u5FC6"}),(0,e.jsx)(he.Z,{items:zt,defaultActiveKey:cn}),(0,e.jsx)(un,{title:"\u5BF9\u8BDD\u4F53\u9A8C"}),(0,e.jsx)(he.Z,{items:To,onChangeCollapse:dn,defaultActiveKey:we}),(0,e.jsx)($e.Z,{open:Vn,onCancel:function(){return kn(!1)},checkTag:A,addComponents:Ue,onAdded:Ps,tabs:Za.Ne.filter(function(De){return De.key!==a.qR.Agent})}),(0,e.jsx)(xo,{open:M,variablesInfo:Ge,onCancel:function(){return g(!1)},onConfirm:Ct}),(0,e.jsx)(nt,{open:R,variables:(Ge==null||(t=Ge.bindConfig)===null||t===void 0?void 0:t.variables)||[],currentComponentInfo:Ce,settingActionList:Ls(Ce?.type),onCancel:function(){return T(!1)}})]})},so=la,Fo=n(22675),Ko=n(48),Go=n(86384),Ho=n(6171),Wo=n(24019),Qo=n(66309),jt={header:"header___NlYJu",avatar:"avatar___Erdew","header-info":"header-info___ij1jH","h-title":"h-title___fTG4i","edit-ico":"edit-ico___GDJ3n","agent-rel-info":"agent-rel-info____068A","space-name":"space-name___YpRDg","save-time":"save-time___dyOcH","header-title":"header-title___u7b9G","right-box":"right-box___eAszv",fold:"fold___V7K4E",ico:"ico___zKzSv","publish-btn":"publish-btn___GXQ6m"},pt=C().bind(jt),zo=function(o){var l,t,p,m=o.agentConfigInfo,L=o.onToggleShowStand,E=o.onToggleVersionHistory,F=o.onEditAgent,R=o.onPublish,T=(0,K.useParams)(),G=T.spaceId,$=(0,s.useMemo)(function(){if(m){var M;return!(m!=null&&(M=m.permissions)!==null&&M!==void 0&&M.includes(Q.jE.Publish))}else return!1},[m]);return(0,e.jsxs)("header",{className:pt("flex","items-center","px-16","py-16","relative",jt.header),children:[(0,e.jsx)(Ho.Z,{className:pt("hover-box"),onClick:function(){return(0,Go.bC)("/space/".concat(G,"/develop"))}}),(0,e.jsx)("img",{className:pt("radius-6",jt.avatar),src:m?.icon||Fo,alt:""}),(0,e.jsxs)("div",{className:pt("flex","flex-col",jt["header-info"]),children:[(0,e.jsxs)("div",{className:pt("flex","items-center"),children:[(0,e.jsx)("h3",{className:pt(jt["h-title"],"text-ellipsis"),children:m?.name}),(0,e.jsx)(tn.Z,{className:pt(jt["edit-ico"]),onClick:F}),m?.publishDate!==null&&f()(m?.publishDate).isBefore(m?.modified)&&(0,e.jsx)(Qo.Z,{bordered:!1,color:"volcano",style:{marginLeft:"6px"},children:"\u6709\u66F4\u65B0\u672A\u53D1\u5E03"})]}),(0,e.jsxs)("div",{className:pt("flex","items-center",jt["agent-rel-info"]),children:[(0,e.jsx)(kt.Z,{condition:m==null||(l=m.space)===null||l===void 0?void 0:l.icon,children:(0,e.jsx)("img",{src:m==null||(t=m.space)===null||t===void 0?void 0:t.icon,alt:""})}),(0,e.jsx)("span",{className:pt(jt["space-name"],"text-ellipsis"),children:m==null||(p=m.space)===null||p===void 0?void 0:p.name}),(0,e.jsxs)("span",{className:pt(jt["save-time"]),children:["\u8349\u7A3F\u81EA\u52A8\u4FDD\u5B58\u4E8E",f()(m?.modified).format("HH:mm")]})]})]}),(0,e.jsx)("h2",{className:pt("absolute",jt["header-title"]),children:"\u7F16\u6392"}),(0,e.jsxs)("div",{className:pt(jt["right-box"],"flex","items-center"),children:[(0,e.jsx)("img",{src:Ko,className:pt("cursor-pointer",jt.fold),onClick:L,alt:""}),(0,e.jsx)(Wo.Z,{className:pt(jt.ico,"cursor-pointer"),onClick:E}),(0,e.jsx)(st.ZP,{type:"primary",className:pt(jt["publish-btn"]),onClick:R,disabled:$,children:"\u53D1\u5E03"})]})]})},Yo=zo,Xo=n(8643),Jo=n(47960),_o=n(86250),$o=n(31530),Ot={"modal-wrapper":"modal-wrapper___zxeVv",select:"select___s38yZ",title:"title___bLrDJ","generate-name":"generate-name___dwPDv"},ct=C().bind(Ot),qo=function(o){var l=o.spaceId,t=o.modelComponentConfig,p=o.open,m=o.onCancel,L=(0,s.useState)(0),E=u()(L,2),F=E[0],R=E[1],T=(0,s.useState)([]),G=u()(T,2),$=G[0],M=G[1],g=(0,s.useRef)([]),pe=(0,s.useState)({contextRounds:0,maxTokens:0,mode:nn.jD.Precision,temperature:0,topP:0,reasoningModelId:null}),ue=u()(pe,2),A=ue[0],H=ue[1],fe=(0,s.useRef)(0),P=(0,K.useRequest)(Xo.Bj,{manual:!0,debounceInterval:300,onSuccess:function(de){g.current=de;var Oe=de?.map(function(Je){return{label:Je.name,value:Je.id}})||[];M(Oe)}}),we=P.run,dn=(0,K.useRequest)(D.VV,{manual:!0,debounceInterval:1e3}),Tn=dn.run;(0,s.useEffect)(function(){p&&t&&(fe.current=t.id,H(t.bindConfig),R(t.targetId))},[p,t]),(0,s.useEffect)(function(){we({spaceId:l,modelType:Jo.Mj.Chat})},[l]);var Ve=(0,s.useMemo)(function(){var ke;return((ke=g.current)===null||ke===void 0||(ke=ke.filter(function(de){return de.isReasonModel===1&&de.id!==F}))===null||ke===void 0?void 0:ke.map(function(de){return{label:de.name,value:de.id}}))||[]},[g.current,F]),Ue=(0,s.useMemo)(function(){var ke;return(ke=g.current)===null||ke===void 0?void 0:ke.find(function(de){return de.id===F})},[g.current,F]),xn=function(de){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F;Tn({id:fe.current,targetId:Oe,bindConfig:de})},Jn=function(de){var Oe,Je=Number(de);R(Je);var Zn=(Oe=g.current)===null||Oe===void 0?void 0:Oe.find(function(kn){return kn.id===Je}),Vn=h()({},A);Zn&&Zn.maxTokens<Vn.maxTokens&&(Vn=h()(h()({},Vn),{},{maxTokens:Zn.maxTokens})),Je===A.reasoningModelId&&(Vn=h()(h()({},Vn),{},{reasoningModelId:null})),H(Vn),xn(Vn,Je)},ze=function(de){var Oe;de===nn.jD.Customization?Oe=h()(h()({},A),{},{mode:de}):Oe=h()(h()({},Ke[de]),{},{mode:de,reasoningModelId:A.reasoningModelId}),H(Oe),xn(Oe)},Ce=function(de,Oe){var Je;Oe==="reasoningModelId"?Je=Number(de)||null:Je=Number(de)||0;var Zn=h()(h()({},A),{},S()(S()({},Oe,Je),"mode",nn.jD.Customization));H(Zn),xn(Zn)},Pn=function(){var de=$?.find(function(Je){return Je.value===F}),Oe=String(de?.label)||"";m(F,Oe,A)};return(0,e.jsxs)(Ut.Z,{title:"\u6A21\u578B\u8BBE\u7F6E",classNames:{content:ct(Ot["modal-wrapper"])},open:p,footer:null,onCancel:Pn,children:[(0,e.jsxs)(_o.Z,{gap:20,children:[(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h3",{className:ct(Ot.title),children:"\u4F1A\u8BDD\u6A21\u578B"}),(0,e.jsx)(Xe.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F1A\u8BDD\u6A21\u578B",className:ct(Ot.select),onChange:Jn,options:$,value:F})]}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h3",{className:ct(Ot.title),children:"\u63A8\u7406\u6A21\u578B(\u53EF\u9009)"}),(0,e.jsx)(Xe.Z,{placeholder:"\u8BF7\u9009\u62E9\u63A8\u7406\u6A21\u578B",className:ct(Ot.select),onChange:function(de){return Ce(de,"reasoningModelId")},options:Ve,value:A.reasoningModelId,allowClear:!0})]})]}),(0,e.jsxs)("h3",{className:ct(Ot.title,"flex","items-center"),children:["\u751F\u6210\u591A\u6837\u6027",(0,e.jsx)(qe.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h4",{className:ct(Ot["generate-name"]),children:"\u7CBE\u786E\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u4E25\u683C\u9075\u5FAA\u6307\u4EE4\u751F\u6210\u5185\u5BB9"}),(0,e.jsx)("p",{children:"\u9002\u7528\u4E8E\u9700\u51C6\u786E\u65E0\u8BEF\u7684\u573A\u5408\uFF0C\u5982\u6B63\u5F0F\u6587\u6863\u3001\u4EE3\u7801\u7B49"}),(0,e.jsx)("h4",{className:ct(Ot["generate-name"]),children:"\u5E73\u8861\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u5728\u521B\u65B0\u548C\u7CBE\u786E\u4E4B\u95F4\u5BFB\u6C42\u5E73\u8861"}),(0,e.jsx)("p",{children:"\u9002\u7528\u4E8E\u5927\u591A\u6570\u65E5\u5E38\u5E94\u7528\u573A\u666F\uFF0C\u751F\u6210\u6709\u8DA3\u4F46\u4E0D\u5931\u4E25\u8C28\u7684\u5185\u5BB9"}),(0,e.jsx)("h4",{className:ct(Ot["generate-name"]),children:"\u521B\u610F\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u6FC0\u53D1\u521B\u610F\uFF0C\u63D0\u4F9B\u65B0\u9896\u72EC\u7279\u7684\u60F3\u6CD5"}),(0,e.jsx)("p",{children:"\u9002\u5408\u9700\u8981\u7075\u611F\u548C\u72EC\u7279\u89C2\u70B9\u7684\u573A\u666F\uFF0C\u5982\u5934\u8111\u98CE\u66B4\u3001\u521B\u610F\u5199\u4F5C\u7B49"}),(0,e.jsx)("h4",{className:ct(Ot["generate-name"]),children:"\u81EA\u5B9A\u4E49\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u901A\u8FC7\u9AD8\u7EA7\u8BBE\u7F6E\uFF0C\u81EA\u5B9A\u4E49\u751F\u6210\u65B9\u5F0F"}),(0,e.jsx)("p",{children:"\u6839\u636E\u9700\u6C42\uFF0C\u8FDB\u884C\u7CBE\u7EC6\u8C03\u6574\uFF0C\u5B9E\u73B0\u4E2A\u6027\u5316\u4F18\u5316"})]}),icon:(0,e.jsx)(Sn.Z,{}),type:Q.Ai.White})]}),(0,e.jsx)($o.Z,{options:Un,rootClassName:ct("mb-16"),value:A?.mode,onChange:ze,block:!0}),(0,e.jsxs)("div",{className:ct("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u751F\u6210\u968F\u673A\u6027",title:"temperature: \u8C03\u9AD8\u6E29\u5EA6\u4F1A\u4F7F\u5F97\u6A21\u578B\u7684\u8F93\u51FA\u66F4\u591A\u6837\u6027\u548C\u521B\u65B0\u6027\uFF0C\u53CD\u4E4B\uFF0C\u964D\u4F4E\u6E29\u5EA6\u4F1A\u4F7F\u8F93\u51FA\u5185\u5BB9\u66F4\u52A0\u9075\u5FAA\u6307\u4EE4\u8981\u6C42\u4F46\u51CF\u5C11\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E \u201CTop p\u201D \u540C\u65F6\u8C03\u6574"}),(0,e.jsx)(Gt,{min:0,max:1,step:.1,value:String(A?.temperature),onChange:function(de){return Ce(de,"temperature")}})]}),(0,e.jsxs)("div",{className:ct("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"Top p",title:"Top p \u4E3A\u7D2F\u8BA1\u6982\u7387: \u6A21\u578B\u5728\u751F\u6210\u8F93\u51FA\u65F6\u4F1A\u4ECE\u6982\u7387\u6700\u9AD8\u7684\u8BCD\u6C47\u5F00\u59CB\u9009\u62E9\uFF0C\u76F4\u5230\u8FD9\u4E9B\u8BCD\u6C47\u7684\u603B\u6982\u7387\u7D2F\u79EF\u8FBE\u5230 Top p \u503C\u3002\u8FD9\u6837\u53EF\u4EE5\u9650\u5236\u6A21\u578B\u53EA\u9009\u62E9\u8FD9\u4E9B\u9AD8\u6982\u7387\u7684\u8BCD\u6C47\uFF0C\u4ECE\u800C\u63A7\u5236\u8F93\u51FA\u5185\u5BB9\u7684\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E \u201C\u751F\u6210\u968F\u673A\u6027\u201D \u540C\u65F6\u8C03\u6574\u3002"}),(0,e.jsx)(Gt,{min:0,max:1,step:.1,value:String(A?.topP),onChange:function(de){return Ce(de,"topP")}})]}),(0,e.jsx)("h3",{className:ct(Ot.title),children:"\u8F93\u5165\u53CA\u8F93\u51FA\u8BBE\u7F6E"}),(0,e.jsxs)("div",{className:ct("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u643A\u5E26\u4E0A\u4E0B\u6587\u8F6E\u6570",title:"\u8BBE\u7F6E\u5E26\u5165\u6A21\u578B\u4E0A\u4E0B\u6587\u7684\u5BF9\u8BDD\u5386\u53F2\u8F6E\u6570\u3002\u8F6E\u6570\u8D8A\u591A\uFF0C\u591A\u8F6E\u5BF9\u8BDD\u7684\u76F8\u5173\u6027\u8D8A\u9AD8\uFF0C\u4F46\u6D88\u8017\u7684 Token \u4E5F\u8D8A\u591A"}),(0,e.jsx)(Gt,{min:0,max:100,step:1,value:String(A?.contextRounds),onChange:function(de){return Ce(de,"contextRounds")}})]}),(0,e.jsxs)("div",{className:ct("flex","mb-16"),children:[(0,e.jsx)(Kt.Z,{label:"\u6700\u5927\u56DE\u590D\u957F\u5EA6",title:"\u63A7\u5236\u6A21\u578B\u8F93\u51FA\u7684 Tokens \u957F\u5EA6\u4E0A\u9650\u3002\u901A\u5E38 100 Tokens \u7EA6\u7B49\u4E8E 150 \u4E2A\u4E2D\u6587\u6C49\u5B57\u3002"}),(0,e.jsx)(Gt,{min:1,max:Ue?.maxTokens||4096,step:1,value:String(A?.maxTokens),onChange:function(de){return Ce(de,"maxTokens")}})]})]})},es=qo,Bo={"edit-header":"edit-header___LXHm6","drop-box":"drop-box___RbaYp"},Zo=C().bind(Bo),ns=function(o){var l=o.icon,t=o.modelName,p=o.onClick;return(0,e.jsxs)("div",{className:Zo("flex","content-between","items-center","px-16",Bo["edit-header"]),children:[(0,e.jsx)("h3",{children:"\u7F16\u6392"}),(0,e.jsxs)("div",{className:Zo("flex","items-center","cursor-pointer",Bo["drop-box"]),onClick:p,children:[(0,e.jsx)(kt.Z,{condition:!!l,children:(0,e.jsx)("img",{src:l,alt:""})}),(0,e.jsx)("span",{children:t}),(0,e.jsx)(_a.Z,{})]})]})},ts=ns,as=n(77992),os=n(26292),ss=n(57882),rs=n(57132),ls=n(9980),is=n.n(ls),us=n(45529),ds=n(16051),cs=n.n(ds),vs=n(74855),Hn={header:"header___Zhp3M","time-box":"time-box___MlxEC",num:"num___pCG3M","vertical-line":"vertical-line___zScjb",box:"box___DfwY3",value:"value___G3F6B",wrap:"wrap___SC3yY",title:"title___Lh0ck","execute-box":"execute-box___GwF5n","component-img":"component-img___a4HVL",name:"name___mFM56",active:"active___vF1vf","render-container":"render-container___EHMbK"},ms=n(18966),Aa={container:"container___TOg3u",box:"box___NOAzh","mt-10":"mt-10___DaRdj",label:"label___kH9Er",value:"value___PNdD7"},ro=C().bind(Aa),fs=function(o){var l=o.node,t=function(E,F,R){return(0,e.jsxs)("div",{className:ro("flex",Aa.box,R),children:[(0,e.jsxs)("span",{className:ro(Aa.label),children:[E,"\uFF1A"]}),(0,e.jsx)(ms.H,{text:F||"--",className:ro(Aa.value,"flex-1")})]})},p=l?"".concat(l?.endTime-l?.startTime,"ms"):"--",m=(0,s.useMemo)(function(){switch(l?.type){case a.qR.Plugin:return"\u63D2\u4EF6";case a.qR.Workflow:return"\u5DE5\u4F5C\u6D41";case a.qR.Knowledge:return"\u77E5\u8BC6\u5E93";case a.qR.Variable:return"\u53D8\u91CF";case a.qR.Table:return"\u6570\u636E\u8868";case a.qR.Model:return"\u6A21\u578B";case a.qR.MCP:return"MCP";default:return"--"}},[l?.type]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:ro(Aa.container),children:[t("\u7C7B\u578B",m),t("\u72B6\u6001","\u6210\u529F"),t("\u540D\u79F0",l?.name),t("\u8017\u65F6",p)]}),t("\u53D1\u8D77\u65F6\u95F4",l!=null&&l.startTime?f()(l?.startTime).format("YYYY-MM-DD HH:mm"):"",Aa["mt-10"]),t("\u7ED3\u675F\u65F6\u95F4",l!=null&&l.endTime?f()(l?.endTime).format("YYYY-MM-DD HH:mm"):"",Aa["mt-10"])]})},tt=C().bind(Hn),Mo=is()({html:!0,xhtmlOut:!0,breaks:!0,linkify:!0,typographer:!0,quotes:`""''`});Mo.use(us.Z,{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$$",right:"$$",display:!1}]}),Mo.use(cs(),{multiline:!0,rowspan:!0,headerless:!1,multibody:!0,aotolabel:!0}),Mo.renderer.rules.html_block=function(se,o){return(0,B.F1)(se[o].content)};var gs=function(o){var l,t=o.visible,p=o.onClose,m=(0,K.useModel)("conversationInfo"),L=m.requestId,E=m.finalResult,F=m.setFinalResult,R=(0,s.useState)(),T=u()(R,2),G=T[0],$=T[1],M=(0,s.useState)(0),g=u()(M,2),pe=g[0],ue=g[1],A=(0,s.useState)(""),H=u()(A,2),fe=H[0],P=H[1],we=(0,s.useState)(""),dn=u()(we,2),Tn=dn[0],Ve=dn[1],Ue=function(Ce){return typeof Ce=="string"?Ce:JSON.stringify(Ce,null,2)};(0,s.useEffect)(function(){var ze=E?.componentExecuteResults||[];if(ze?.length>0){var Ce=ze[pe];if($(Ce),Ce){var Pn=Ue(Ce.input);P(Pn);var ke=Ue(Ce.data);Ve(ke)}}else $(null),P(""),Ve("")},[E,pe]),(0,s.useEffect)(function(){ue(0)},[E]),(0,s.useEffect)(function(){return function(){F(null)}},[]);var xn=function(){Pe.ZP.success("\u590D\u5236\u6210\u529F")},Jn=function(Ce){if(Ce!=null&&Ce.icon)return Ce.icon;switch(Ce.type){case a.qR.Plugin:return ja;case a.qR.Workflow:return Fa;case a.qR.Knowledge:return Xa;case a.qR.Variable:return os;case a.qR.Table:return ra;case a.qR.Model:return as;case a.qR.MCP:return Sa;default:return ja}};return(0,e.jsx)(ss.Z,{title:"\u8C03\u8BD5\u8BE6\u60C5",onClose:p,visible:t,children:E?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("header",{className:tt(Hn.header),children:[(0,e.jsx)("div",{className:tt("flex",Hn["time-box"]),children:(0,e.jsxs)("div",{className:tt(Hn.num,"flex","items-center"),children:[(0,e.jsxs)("span",{children:["\u8017\u65F6",E.endTime-E.startTime," ms"]}),(0,e.jsx)("span",{className:tt(Hn["vertical-line"])}),(0,e.jsxs)("span",{children:[E.totalTokens," Tokens"]})]})}),(0,e.jsxs)("div",{className:tt("flex",Hn.box),children:[(0,e.jsx)("span",{children:"requestId:"}),(0,e.jsx)("span",{className:tt(Hn.value,"text-ellipsis"),children:L}),(0,e.jsx)(vs.CopyToClipboard,{text:L||"",onCopy:xn,children:(0,e.jsx)(rs.Z,{})})]})]}),(0,e.jsxs)("div",{className:tt(Hn.wrap),children:[(0,e.jsx)("h5",{className:tt(Hn.title),children:"\u8C03\u7528\u7EC4\u4EF6"}),E==null||(l=E.componentExecuteResults)===null||l===void 0?void 0:l.map(function(ze,Ce){return(0,e.jsxs)("div",{className:tt(Hn["execute-box"],"flex","items-center"),children:[(0,e.jsx)("img",{className:tt(Hn["component-img"]),src:Jn(ze),alt:""}),(0,e.jsx)("span",{className:tt(Hn.name,"cursor-pointer",S()({},Hn.active,pe===Ce)),onClick:function(){return ue(Ce)},children:ze.name})]},ze?.id||Ce)})]}),(0,e.jsxs)("div",{className:tt(Hn.wrap),children:[(0,e.jsx)("h5",{className:tt(Hn.title),children:"\u8282\u70B9\u8BE6\u60C5"}),(0,e.jsx)(fs,{node:G})]}),(0,e.jsxs)("div",{className:tt(Hn.wrap,Hn["render-container"]),children:[(0,e.jsx)("h5",{className:tt(Hn.title),children:"\u8F93\u5165"}),(0,e.jsx)("pre",{children:fe})]}),(0,e.jsxs)("div",{className:tt(Hn.wrap,Hn["render-container"]),children:[(0,e.jsx)("h5",{className:tt(Hn.title),children:"\u8F93\u51FA"}),(0,e.jsx)("pre",{children:Tn})]})]}):(0,e.jsx)("div",{className:tt("flex","h-full","items-center","content-center"),children:(0,e.jsx)(x.Z,{description:"\u6682\u65E0\u6570\u636E"})})})},hs=(0,s.memo)(gs),Ka={container:"container___NqsMD",section:"section___tvgXt","edit-info":"edit-info___B_f4_","h-line":"h-line___sXIzi"},ps=n(88042),Cs=n(86088),xs=n(69478),As=n(56265),Uo=n(88639),wo=n(1367),Es=n(67522),js=n(97745),Vo=n(96231),ko=n(96486),Ia={container:"container___Kt1nG",loading:"loading___tGVwz","divider-horizontal":"divider-horizontal___vSfFS","main-content":"main-content___YdPCn","chat-wrapper":"chat-wrapper___IAYX5"},ys=n(88834),lo={container:"container___bIrt_","extra-box":"extra-box___CdP4P",debug:"debug___pjPlo"},Ro=C().bind(lo),Ss=function(o){var l=o.onPressDebug;return(0,e.jsxs)("header",{className:Ro("flex","content-between","items-center",lo.container),children:[(0,e.jsx)("h3",{children:"\u9884\u89C8\u4E0E\u8C03\u8BD5"}),(0,e.jsx)("div",{className:Ro(lo["extra-box"],"flex"),children:(0,e.jsxs)("span",{className:Ro("hover-box","cursor-pointer","flex","items-center","content-center",lo.debug),onClick:l,children:[(0,e.jsx)("img",{src:ys,alt:""}),"\u8C03\u8BD5"]})})]})},Ds=Ss,Na=C().bind(Ia),Is=function(o){var l=o.agentId,t=o.agentConfigInfo,p=o.onPressDebug,m=qn.Z.useForm(),L=u()(m,1),E=L[0],F=(0,s.useRef)(0),R=(0,s.useState)(null),T=u()(R,2),G=T[0],$=T[1],M=(0,K.useModel)("conversationInfo"),g=M.messageList,pe=M.setMessageList,ue=M.chatSuggestList,A=M.loadingConversation,H=M.runQueryConversation,fe=M.isLoadingConversation,P=M.setIsLoadingConversation,we=M.loadingSuggest,dn=M.onMessageSend,Tn=M.messageViewRef,Ve=M.allowAutoScrollRef,Ue=M.scrollTimeoutRef,xn=M.handleClearSideEffect,Jn=M.showScrollBtn,ze=M.setShowScrollBtn,Ce=M.resetInit,Pn=M.manualComponents,ke=M.variables,de=M.userFillVariables,Oe=M.requiredNameList,Je=qn.Z.useWatch([],{form:E,preserve:!0});s.useEffect(function(){Je&&Object.keys(Je).length===0||E.validateFields({validateOnly:!0}).then(function(){return $(Je)}).catch(function(){return $(null)})},[E,Je]),(0,s.useEffect)(function(){de&&(E.setFieldsValue(de),$(de))},[de]);var Zn=(0,s.useMemo)(function(){if(Oe?.length>0){if(!G)return!0;var on=(0,B.VL)(Oe,Object.keys(G));return!on}return!1},[Oe,G]),Vn=(0,Es.Z)(),kn=Vn.runAsyncConversationCreate,Se=(0,js.Z)(),q=Se.selectedComponentList,Z=Se.handleSelectComponent,le=Se.initSelectedComponentList,Ne=(0,s.useMemo)(function(){return{assistant:{name:t?.name,avatar:t?.icon},system:{name:t?.name,avatar:t?.icon}}},[t]);(0,s.useEffect)(function(){var on=Tn.current;if(on){var sn=function(){var bn=on.scrollTop,at=on.scrollHeight,Me=on.clientHeight;bn+Me<at?(Ve.current=!1,Ue.current&&(clearTimeout(Ue.current),Ue.current=null),ze(!0)):(Ve.current=!0,ze(!1))};return on.addEventListener("wheel",(0,ko.throttle)(sn,300)),function(){on.removeEventListener("wheel",(0,ko.throttle)(sn,300)),Ce()}}},[]),(0,s.useEffect)(function(){le(Pn)},[Pn]),(0,s.useEffect)(function(){if(t){var on=t.devConversationId;F.current=on,P(!1),H(on)}},[t?.devConversationId]);var Ae=function(sn){var cn=sn.conversationId,bn=sn.message;if(F.current===Number(cn)&&(pe(function(Ee){return[].concat(xe()(Ee),[bn])}),Ve.current)){var at,Me;(at=Tn.current)===null||at===void 0||at.scrollTo({top:(Me=Tn.current)===null||Me===void 0?void 0:Me.scrollHeight,behavior:"smooth"})}};(0,s.useEffect)(function(){return Vo.Z.on(wo.Z.RefreshChatMessage,Ae),function(){Vo.Z.off(wo.Z.RefreshChatMessage,Ae)}},[]);var J=(0,s.useCallback)(Te()(O()().mark(function on(){var sn,cn,bn,at;return O()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return xn(),pe([]),P(!1),Ee.next=5,kn({agentId:l,devMode:!0});case 5:sn=Ee.sent,cn=sn.success,bn=sn.data,cn&&(at=bn?.id,F.current=at,H(at));case 9:case"end":return Ee.stop()}},on)})),[l]),Ge=function(sn,cn){var bn=F.current;if(bn){if(Zn){E.validateFields(),Pe.ZP.warning("\u8BF7\u586B\u5199\u5FC5\u586B\u53C2\u6570");return}dn(bn,sn,cn,[],G,!0,!1)}},On=function(){var sn,cn;Ve.current=!0,(sn=Tn.current)===null||sn===void 0||sn.scrollTo({top:(cn=Tn.current)===null||cn===void 0?void 0:cn.scrollHeight,behavior:"smooth"}),ze(!1)};return(0,e.jsxs)("div",{className:Na(Ia.container,"h-full","flex","flex-col"),children:[(0,e.jsx)(Ds,{onPressDebug:p}),(0,e.jsx)("div",{className:Na(Ia["divider-horizontal"])}),(0,e.jsxs)("div",{className:Na(Ia["main-content"],"flex-1","flex","flex-col","overflow-hide"),children:[(0,e.jsx)(As.Z,{form:E,variables:ke,isFilled:!0}),(0,e.jsx)("div",{className:Na(Ia["chat-wrapper"],"flex-1"),ref:Tn,children:A?(0,e.jsx)("div",{className:Na("flex","items-center","content-center","h-full"),children:(0,e.jsx)(ya.Z,{className:Na(Ia.loading)})}):g?.length>0?(0,e.jsxs)(e.Fragment,{children:[g?.map(function(on){return(0,e.jsx)(xs.Z,{messageInfo:on,roleInfo:Ne,mode:"chat"},on?.id)}),(0,e.jsx)(Uo.Z,{loading:we,chatSuggestList:ue,onClick:Ge})]}):fe&&(0,e.jsx)(ps.Z,{className:"h-full",icon:t?.icon,name:t?.name,extra:(0,e.jsx)(Uo.Z,{className:"mt-16",loading:we,chatSuggestList:ue,onClick:Ge})})}),(0,e.jsx)(Cs.Z,{clearDisabled:!(g!=null&&g.length),onEnter:Ge,onClear:J,wholeDisabled:Zn,visible:Jn,manualComponents:Pn,selectedComponentList:q,onSelectComponent:Z,onScrollBottom:On})]})]})},Ns=Is,bs=n(4735),io={"system-tips":"system-tips___GQnw1","optimize-btn":"optimize-btn___SX6yI","text-area":"text-area___eJKj6"},uo=C().bind(io),Fs=At.Z.TextArea,Bs=function(o){var l=o.value,t=o.agentConfigInfo,p=o.onChange,m=o.onReplace,L=(0,s.useState)(!1),E=u()(L,2),F=E[0],R=E[1],T=(0,s.useRef)(null),G=function(M){R(!1),m(M)};return(0,e.jsxs)("div",{className:uo("flex","flex-col","flex-1","px-16","py-16"),children:[(0,e.jsxs)("div",{className:uo("flex","items-center","content-between","mb-16","py-6"),children:[(0,e.jsx)("span",{className:uo(io["system-tips"]),children:"\u7CFB\u7EDF\u63D0\u793A\u8BCD"}),(0,e.jsx)(Cn.Z,{title:"\u81EA\u52A8\u4F18\u5316\u63D0\u793A\u8BCD",placement:"top",children:(0,e.jsx)(st.ZP,{className:uo(io["optimize-btn"]),icon:(0,e.jsx)(oo.jY,{}),onClick:function(){return R(!0)},children:"\u4F18\u5316"})})]}),(0,e.jsx)(Fs,{classNames:{textarea:"flex-1"},ref:T,rootClassName:io["text-area"],placeholder:"\u8F93\u5165\u7CFB\u7EDF\u63D0\u793A\u8BCD\uFF0C\u5BF9\u5927\u6A21\u578B\u8FDB\u884C\u89D2\u8272\u5851\u9020",variant:"borderless",value:l,onChange:function(M){return p(M.target.value)}}),(0,e.jsx)(bs.Z,{open:F,onCancel:function(){return R(!1)},onReplace:G,targetId:t?.id,defaultValue:l||"".concat(t?.name||"")+"".concat(t?.description||"")})]})},Ms=Bs,Ga=C().bind(Ka),Rs=function(){var o,l,t=(0,K.useParams)(),p=Number(t.spaceId),m=Number(t.agentId),L=(0,s.useState)(!1),E=u()(L,2),F=E[0],R=E[1],T=(0,s.useState)(!1),G=u()(T,2),$=G[0],M=G[1],g=(0,s.useState)(!1),pe=u()(g,2),ue=pe[0],A=pe[1],H=(0,s.useState)(),fe=u()(H,2),P=fe[0],we=fe[1],dn=(0,K.useModel)("conversationInfo"),Tn=dn.cardList,Ve=dn.showType,Ue=dn.setShowType,xn=dn.setIsSuggest,Jn=dn.messageList,ze=dn.setChatSuggestList,Ce=(0,K.useModel)("tenantConfigInfo"),Pn=Ce.setTitle,ke=(0,K.useRequest)(D.T_,{manual:!0,debounceInterval:300,onSuccess:function(le){we(le)}}),de=ke.run,Oe=(0,K.useRequest)(D.mp,{manual:!0,debounceInterval:1e3}),Je=Oe.run;(0,s.useEffect)(function(){de(m),Pn()},[m]),(0,s.useEffect)(function(){(0,B.t7)()},[]);var Zn=function(le){var Ne=h()(h()({},P),le);we(Ne),M(!1)},Vn=function(le,Ne,Ae){A(!1);var J=me()(P);J.modelComponentConfig.bindConfig=Ae,J.modelComponentConfig.targetId=le,J.modelComponentConfig.name=Ne,we(J)},kn=function(le,Ne){var Ae=h()(h()({},P),{},S()({},Ne,le));if(Ae.publishStatus===Q.xH.Published&&(Ae.modified=f()().toISOString()),we(Ae),Ne==="openSuggest"&&xn(le===N.nb.Open),Ne==="openingGuidQuestions"&&!(Jn!=null&&Jn.length)){var J=le,Ge=J?.filter(function(Fn){return!!Fn})||[];ze(Ge)}var On=Ae.id,on=Ae.name,sn=Ae.description,cn=Ae.icon,bn=Ae.userPrompt,at=Ae.openSuggest,Me=Ae.systemPrompt,Ee=Ae.suggestPrompt,vn=Ae.openingChatMsg,Ln=Ae.openScheduledTask,vt=Ae.openingGuidQuestions,yt=Ae.openLongMemory;Je({id:On,name:on,description:sn,icon:cn,systemPrompt:Me,userPrompt:bn,openSuggest:at,suggestPrompt:Ee,openingChatMsg:vn,openScheduledTask:Ln,openingGuidQuestions:vt,openLongMemory:yt})},Se=function(){Ve===N.wv.Debug_Details?Ue(N.wv.Hide):Ue(N.wv.Debug_Details)},q=function(){R(!1);var le=f()().toISOString(),Ne=h()(h()({},P),{},{publishDate:le,modified:le,publishStatus:Q.xH.Published});we(Ne)};return(0,e.jsxs)("div",{className:Ga(Ka.container,"h-full","flex","flex-col"),children:[(0,e.jsx)(Yo,{agentConfigInfo:P,onToggleShowStand:function(){return Ue(N.wv.Show_Stand)},onToggleVersionHistory:function(){return Ue(N.wv.Version_History)},onEditAgent:function(){return M(!0)},onPublish:function(){return R(!0)}}),(0,e.jsxs)("section",{className:Ga("flex","flex-1","px-16","py-16",Ka.section),children:[(0,e.jsxs)("div",{className:Ga("radius-6","flex","flex-col",Ka["edit-info"]),children:[(0,e.jsx)(ts,{icon:P==null||(o=P.modelComponentConfig)===null||o===void 0?void 0:o.icon,modelName:P==null||(l=P.modelComponentConfig)===null||l===void 0?void 0:l.name,onClick:function(){return A(!0)}}),(0,e.jsxs)("div",{className:Ga("flex-1","flex","overflow-y"),children:[(0,e.jsx)(Ms,{agentConfigInfo:P,value:P?.systemPrompt,onChange:function(le){return kn(le,"systemPrompt")},onReplace:function(le){return kn(le,"systemPrompt")}}),(0,e.jsx)("div",{className:Ga(Ka["h-line"])}),(0,e.jsx)(so,{agentId:m,agentConfigInfo:P,onChangeAgent:kn})]})]}),(0,e.jsx)(Ns,{agentConfigInfo:P,agentId:m,onPressDebug:Se}),(0,e.jsx)(hs,{visible:Ve===N.wv.Debug_Details,onClose:function(){return Ue(N.wv.Hide)}}),(0,e.jsx)(ee.Z,{cardList:Tn,visible:Ve===N.wv.Show_Stand,onClose:function(){return Ue(N.wv.Hide)}}),(0,e.jsx)(Y.Z,{targetId:m,targetName:P?.name,targetType:a.qR.Agent,permissions:P?.permissions||[],visible:Ve===N.wv.Version_History,onClose:function(){return Ue(N.wv.Hide)}})]}),(0,e.jsx)(b.Z,{targetId:m,open:F,spaceId:p,category:P?.category,onCancel:function(){return R(!1)},onConfirm:q}),(0,e.jsx)(V.Z,{spaceId:p,mode:Q.jA.Update,agentConfigInfo:P,open:$,onCancel:function(){return M(!1)},onConfirmUpdate:Zn}),(0,e.jsx)(es,{spaceId:p,modelComponentConfig:P?.modelComponentConfig,open:ue,onCancel:Vn})]})},Ts=Rs},87025:function(Fe,ie,n){n.d(ie,{L:function(){return S},U:function(){return re}});var re=function(k){return k.WORKFLOW_LLM_NODE="WORKFLOW_LLM_NODE",k.AGENT="AGENT",k}({}),S=function(k){return k.prompt="prompt",k.code="code",k.sql="sql",k}({})},38678:function(Fe,ie,n){n.d(ie,{td:function(){return re}});function re(u){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;if(u===0)return"0 Bytes";var b=1024,ee=V<0?0:V,Y=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],D=Math.floor(Math.log(u)/Math.log(b));return Number.parseFloat((u/Math.pow(b,D)).toFixed(ee))+" "+Y[D]}function S(u){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.parseFloat((u/1024).toFixed(V))}function k(u){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.parseFloat((u/(1024*1024)).toFixed(V))}function h(u){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return"".concat(S(u,V)," KB")}function ae(u){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return"".concat(k(u,V)," MB")}},30961:function(Fe,ie,n){n.d(ie,{N:function(){return k},g:function(){return h}});var re=n(67294),S=n(85893),k=function(u,V){var b=V.required;return(0,S.jsxs)(S.Fragment,{children:[u,b?(0,S.jsx)("span",{style:{color:"red",fontWeight:600,marginLeft:"4px"},children:"*"}):null]})},h=function(u){return(0,S.jsx)(S.Fragment,{children:u})}},82198:function(Fe,ie,n){n.d(ie,{G:function(){return k},U:function(){return h}});var re=n(70490),S=n(95141),k=function(u){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:99;return u.filter(function(b){return b.status!==S.KM.removed}).map(function(b){var ee=b.response||{},Y=ee.data,D=Y===void 0?{}:Y,a=ee.code,Q=b.status,N=b.percent;return a&&a!==re.Gh&&(Q=S.KM.error),b?.percent===100&&Q===S.KM.uploading&&(N=V),{key:D?.key||"",name:D?.fileName||b.name||"",size:D?.size||b.size||0,url:D?.url||b.url||"",type:D?.mimeType||b.type||"",uid:b.uid,status:Q,percent:N,response:b.response}})},h=function(u){return u?.status===S.KM.error?"exception":u?.status===S.KM.uploading?"active":u?.status===S.KM.done||Math.floor(u?.percent||0)===100?"success":"active"}},22675:function(Fe){Fe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAtJSURBVHgB7Z09bBNJFMefP0B3fEg5CaQTBQkdFDhcoIACLlRQUAQKBArSISSgJFBQAFKSAqRrIOkQFOcDg6jIFRRAQ/gorgFMIgHdGboTSJcrQCcg8c1/5YkW4/XO7MfszOz8JMcb27Hjff95783sm5kCJcDQ0FDPypUrh+bn5zcVi8XeQqGwqdls9rCnesiRCOycNtg5bSwsLLxgv9bZ/fStW7caFJMCRQRGX7FixQl2ONi6OdQDIUzGEYO0AHyGHyHXwrWBeYcq88DjskKQEsChQ4dGyRled8Zqtdq46IuFBHDgwIG+Uqk0hdhODu1BrsC8wU4Rb1AMe8Hw8PAv5XL5uTO+OTBb9cFmzGMPhb221O1JuHz2ZhPs8DtymAZsdqBSqdDMzMzDoBcFCqAV78fIYTqD3UTQUQAHDx4cYv35y+SwhcGNGzc2ZmdnX7Q/8U0SiIQP8YNcpm8bc1++fPmpPTH8Jglk2f4Dcsa3kR7WsKfaH/wqBLSSvtDM0WEsP7J8oMDygWn+wGIIaLn+v8hhO3PMzuuq1eocflkMAcz1j5EjD/SwXGCE/+J5ANf6c8eiF/A8AOvyDZIjTyx6AS6AE+TIGz/jR8G5//zC7P5D0bn//PLp0yeM+BbdVb6cAtsjB+gnRy5pNpt9EMA6cuSVfgiglxy5hA3794RWBDmspqdMlrNs2TJau3Ytbd68mXp7e2n16tW0atUq77mPHz/Su3fv6P379/Tq1St6+vSpd5wnCuwKYJMsBIbftWsX7d692zsWBUJ4/Pixd8sD1gkgquHbefPmDU1MTFjvEawSwPr16+nYsWOem0+KR48e0dTUlLVCsCIHQEyH4Tds2EBJs2PHDu997927591sw2gPABe/d+9ez92rAAkjvIFN+YGxAkCc37dvX6w4HxWbwoJxAkCch+HTcPey3L592wsL6E6aijECQJyHu0dM1gnTw4L2SWBS3Tq0Urju169fe108sHz5cm+QCB6FDw7Jgh4HElD8PYRgGlp7gKS6dRjcuXr1qtdag9i+fXssIYDz5897AusGRKxTyNDSA2DIdnh4OHacR0u/ceOGJ4Aw4MJhPAgBoSYKGG7uJgC8N7zZuXPnSBe0EkBS3Tq0MLjju3fvSv0dPAQSO4gB/wcMJkNYiIJHg7jhZXTpQWgjgKS6dTA6jB/HzUIIV65c8TyHTFgI+0zu0eApdBlUylwASXXrYCwYXsTdi8IvCuH/gzcIE8L9+/cDn0OyyXMZHOtCZgJIyt3DldZqNe9SblqIhAW8pluSuWXLlq+OkZvokAyWKpXKGCkGLWl0dJT6+6OXI+Lk3blzx3PVb9++pbTB50FkT548+ao1c88T5tKPHj3qdTvBkiVL6PPnz6E9BhUo9wAw/pkzZ2J17WAItKBuLS4t8JkXLlyQ+huEkPbvC88Hr5J1MqhUAHGNL9Ot04WgbiVC4MjIiCemLEOB0oGgixcvRjJ+1G5d1qBnw85v19dkXXiizAN0coMiJNGtU41MzwbjAvCKWV1PUOIB4PovXbok9Tdw83D3fNxeZ9oLT6N2aSFyXpyKexVeQYkHkBlaxZfmgzAmgBgPN59EXQLeAyLCDUD8aQ8bKxGAaIuAC0Sf3iR3j64cxgBgtKRqFNAIXr58Sc+ePaO0SV0AOCkisR9uDy3fNNAt5PWCaMH4vhCD7HUEiB7vgUvWKhPC1AUwMDAQ+hp8YcR70+GDRbghqUNyJ3IdIctEN/WpYUiKwkC8z2JQJ03wfc6ePRuaxMLrZTksnLoARNw/3J6NwKgY6Aly6TB81qVkqQtAxAWqGMvPCoigU24Dw+swsKXF7GCTq2pFQIhr79bqUj/opocrwm9weDxdch4jp4ZhqJUPluBkqho1i/O5/mQQfXxdME4AKBZtLyJJuzY/aO4hPndyclJouJoP8+I90ixekcWoEIALLJ0qiHhtPq42JlluxauWUO7daZQPn4u+vugwMC8A0aEQhGOUB8Dl1W7AIDBWEnP3RMf4+cQVkaQOHkq3hNcYAaAFirY0TB/DDWP0stl2lCJVkcEugJChW02DMQL48OEDycKreUXygzhFqlnMUE4KYwQAdw73KXuyeX4AIWBAplNY4IaPasgoySc8DfcySA6zyguMEQCMD5ceVmIVBE42ilL8+UEScw/xPjLG47WA7SEmq9Iwo5JAXC5FaXXUuXsAuQHq8hGPRWN3EDAWxvplBnWClrLB/4LnZCuO42LcSCC8wKlTp2JVDKEVxjE+L1LF1T4Z4/NagW7PwyupxMiRQF6bn8SUblniVC2JjFFABCrzAaNXCfPP3YsTFkRIYu6hjr0FK5aJizOlOwy0dLR4W1cOtWatYD6lG4kisuwkwgKfjGLz5WrrFotGd+rkyZOx8gORJWVswdrVwvmSLzJhwbQ5CUlg9XLxPCzAlUMIyLA7eYS8rRDux/r9AgAXAkD/n2fjfL8A20vSupELAfgxYa6hSlxNYM5xAsg5TgA5xwkg5zgB5BwtBGBySZXppC4AkQoXnVbOTBOR76l6TCJ1AYiMp+uw+0faYATSv1poEKrHKVIXgMgXirsZhAmI7nSieqZ06gIQWeeGF0raCoafRQpWYHzrQgA8gMiXQhhAUaRtngA1fpg+JkIWk0ZSXywaiyIvXbpUeNHErVu3eoIxfdEICHn//v105MgRb3FoEbJYKkZJN1CmqoZP5BBdYElHMFcQcxBkZhnhUnQWBShKlouX8QIcCAEnECLIIjZGgbv7bdu2Cbd6gK4yKpCy+I7KLgejcBNLxsnW4/O9e3Xemy/u3sVhm02kidINI2ZnZ72JEbKJHmYD8cUXkVTqsuESvseePXvo+PHjtGbNGooC3300K5QKAC4O3cIoIgAQAjyCDmEBYjx9+jSx8yfl7v3Ao2W9QGYmG0fylTXiJnlR5v/HJalNrrL43zuRyZ5B3BPEnaMHI6Alqug2+rt1cWcTYxawLvlM5lvHQgBJTORAZW/Q/P+4xF0/gKPjRBNt9g5OaqJnEusDcVTuXZwVWm0ejROdxPy+uMvGxe3WcUyYaKLl7uEQAtYD7DaXXgQIAVm26Lp8fMUveKI48LX/kejpjtbbx6sMC0lt/WLaJldaC4ADEaBlxjUOhODfrNG/w4eOexerwAgBgKTyg6Qxff0AYwTASarbGBce501fP8A4AXCyWB+IY9P6AcZODuXz/5EbhK0hnBQ2rh9grAfwk1S3MQiTunWyWCEAThphwcS9i2WAAP5h9z1kEUl0G03t1skCATTYfbw1UzWEdxuDloUJIi+GB81ms1FmP+qFQsE6AfiXhYEIeDkahMEFAbeOG6qM+K7dulQbqYDZ/U2Z/WiQ5XTats3hUS8yAdTJkUtg+2KpVPqDHLmE2X66WK1W59jxNDnyRp3ZvsFnBj0kR65g7n8S954AyuXyBLubI0dugPvHvSeAVhiYJEcuYK2/CveP48XJoc4L5AfW+scXj/lBvV7/r1KpfM8OB8lhM+PXrl1b7PkV2p9lQ8PP2d0mclgHBv2uX7++zv/YN+sDsFCAtUxcKLAMZvw55vp3tj9ean+AhYK5/v7+v9nhEDls4iBz/X+2P1jq9MqZmZk6ywcQHgbJYQPjtVrtcqcnSkF/wUQw7URgBTD+WNCTBQqBJYUIBb+RZUUjtoOYPz8/f/LmzZvVrq8jAQ4fPtzH3uxBs9nsI4cJ1JHM88GebggJgMO8wRi7GyWHlqDVs0Y62c3lt1MiCZAXDAwM/L6wsPADubECbYDh2d2vrNUj05dabVLKA/hphYVBpjis8dpPjizAVdxpDOO3rudIE1kAfnxigFfArY8sLDTNipZr/7dVv9lAJQ8KeaIa3c//0T0eLD/uaA4AAAAASUVORK5CYII="},72611:function(Fe){Fe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFwSURBVEiJ7ZbRTcNADIY/J5f3jhA2gAmACQgjMAHlualqlHsHNqATABNQNugGZATee5V5oKDSVtRBgITU/ym6s+/zXXz2wU7/XbJpUFXLEMI50HOu8yIi48FgMO0MbJqmEpE7J+gTNKV0oKrtV0ZhLQKR0eLzFph4SCJSmVlVFMUJcNMJCOwDpJQuVPXFA1TVhzzPx3Vd328NbnUgxmgAdV1/zKlqL8uyKsuyQ08AIjKdzWbjTQFv2uEnLRLoESg9MAAzI4TQV9Xj1X+6FVgUxZWZlUArItdm5jlmBcoQwgg46wQ0syMAETn1pD2Aqj6FEJ6BahWYOfx7AF7YAtgu+3YF/qh2wL8Dqmr5V8AJQAjhOwW8OzCldAa0+FtTJ61d/MUd2vsNGPiSpoW3PuldtGmao2XfZXlK21hERiJyF2OcAp5a+g5c640bnxirijFeAX2P7bvM7HI4HOq3gPDWE/M83/fYzufzdttTY6cf0yt+NXkX7pGGegAAAABJRU5ErkJggg=="},88834:function(Fe){Fe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAERSURBVCiRjZFBccNADEWfdgrAYeAwcBmYQSwGMYKkCOwwKIOYgZZBITQQzCBBsOoh25lN7ab9pz3ozftaCTlmtkfkADTADbjg3qvqzEpC8a4zdEFkBGpEPs2sWQNfzOwIVKo6mhmIDKS0AV4ROSNiwHZpFNkhMpjZqKojEBEZgBb3N6A2s26tapvrDRajAR0wqWrM+83pvsJjVeCGyERKm2yatOv6YqYKIVzXjBH3o6qOuGsJmVkNVLi3S9D9BFQW4wdwKaBGVWfce6CzGM8lKN9D+fdqYAaqbOpVdco3PpdrSGGoPISdp7QNIVxxb4D9b7DwJLneEhZ5fwquwveTtX+CDzBEoMP99C/wh/mkquMXpnqTpDNkdZAAAAAASUVORK5CYII="},65774:function(Fe,ie,n){Fe.exports=n.p+"static/doc_image.5415f2c1.jpg"},48:function(Fe){Fe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATCAYAAACdkl3yAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACmSURBVDiN7Y+xDcIwFETvLA/gETJKFohkupSUaT0BYgJaOlrKbMAKbEBG8AL4KBJLUQhRgDavOt0/Pdms6mZP8gTA4TeipGD+lACAI3mwg+RupN3oWCTyRqClFJYsT+BCsrQAICm213OXj75u+jDp56iGrfn+J/Nsok20iRaxOfi6KUZ9n0k36d9IpMuijmSZgMd0JMCL9CseFI2kI4C4YvxRIim8AORcM3XSp3dOAAAAAElFTkSuQmCC"},10802:function(Fe){Fe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAYAAAAdHLWhAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAbsSURBVHic7Zw/TBtXHMe/7xmDy9D4xJApKllCN7NFYihEkcpERZayVaAEVHUJkTqXo3MkyBKhkChWtnQJKVOrRjVLKja8NVniqEuHIh+Vyj/D/TqYcy/Hs3ln+917577Pxv3zz/e997l3751haJM7bnWCMV4A0QQYGwYwDCDf7vF6DA+AB6IdMFYi8suPXafUzoFYnI2/dqvDp+BLYJhAPRCLPB6R/+AEWC26jie7k1RAoWBm2y7PEuAxQvEY/rJMUBcGNO9WZ8H4EmyL6TaeT/7cE9fZaLVRy4AW3L0VYljsbl2WMIyw+si9dK/petHCWbeaz/LMUxBNqyvN0oCxjZp/OidSXp9oextOwhBNZ3kGAG5FV/HoggV3b8WGowGi6QV3byW6+APF3Xar05zxF8lVZTkH+XPrrlMM/mwENOtW81nG38E+bOqmkiH/xprrVICQ4vrBl2DDMYH6M+cZDLCtx0Qy5F9dc50KB4A+YBE2HKMIWhEHAMb4Xb3lWM5RH+8EOxuV/lVzORYBRP4Nzhgv6C7EIoYxXuAgmtBdiKUJRBMcjI3qrsPSBMaGOWzvzWRsQIaTPzdYajEL4XRDWhkdqX+dt+9PsX9ImqvpDj0R0Fghi6nxAQydCWHX8/H8p0PsvDnRXFnnpDqgoTzHzOcDGP00e275NzODeFs5wdMfD7Hr+Zoq7Bw2v7yXOhcM5hhuXu/H1PiA1PabW0d4tX2cSu2lrgVFdSbD1PgAxgrZVGovNQE101mc/dOoPeMVF1dnsqRFe0a3oHZ0JktatGdkQJ3qLM7nmK49oxSnSmeymKg9Y1qQSp3JYqL2tAeUlM5kMU172hSnW2ey6NaelhZkgs5k0a29RAMyTWey6NReIopLi85kSVJ7ylvQUJ7j268GU6EzWQLt3X+2r7w1KT9rY4VsT4UTMJTnGCuoV7XyM/e6XNPeVVXBrufjdbmm/HPsPagNeuoeBAD7h4TNrSO8Ltcw90UO14a1Px+3xc7vNTz/+aj3enFRRkf6MDOZS829adfzGxdY0mi5lHfenODt+39Sob3/5UgCYL72dOhMhDHTDaZoT6fORBhz2ZqgPd06E2FMQIA+7ZmiMxGJ+2R0pA+Dudb/w2nX83H/2T4ePlc7lLLr+Si+PMDDHw6kPufK5eT1m1gLGsrzxhhWcGLevD9tuY9K7cXRWXh6JOkR7UQ6CVPjA8ITHOfLDuV5V7QXR2fhiyrM/iHh1fYxNreOOqpFBuUB3bzej5nJXNP1wZeVvZrb7e3F7Z01u6jCFF8eKO/tKVfcwQUnfTDHGlepKu21qzMTSERxY4UsvpzMXdg5ALqrvW7oTESSz0qJPagGLeXm9f4Lt+1Ueyp0FvBq+xi/bB/3VichzJXLHDOTcjd72d4e8N+UBgAlOvvjz1Pp7ng30TbUo0p7MpiqMxFax+JUaq8ZJutMhBGDpaq0FyYNOhNhREABKrSXJp2JMCogoLvaS5vORBgXUEAn2kurzkQkGtBQnmPqs378Vq5J30Piau+vPVKis7FCFqMjfb350ojotas4Xec42pMhjs5E97AkJ/aUB9Tq1d+4Xec42hMRV2et7mHBnJXq1qQ8IJkbddyucxztBcePqzOZe9jm1pHyKQetLSiKCu11qrNm9EwLAuK9+tst7XVTZ1F66h4UJs6saLvaOwi9eCK7n2yX3L76KyCu9j7KsVTP/0RJxY+IuzVQGmCqzkRoH0lQqb0oputMhPaAAlRpD0iPzkQYExCgRntp0pkIowIK6Ib20qgzEUYGFNCO9gCkVmcijA4IiK892eEfE3UmwviAAnS8+msCqQkoIKlXf03BqN8HyaD61V/TSF1AgPwPvdKmMxGpU5yITl/9NZlUtqAogfaufZJp/N0r9ERAQF17vRRMgBk/grE0hQPwdBdhaYrHAVR0V2FpisdBVNFdhaUJRDscjJV012FpAmMlTuSXdddhEUPklxkAzC/vvQMwrLccSwRvfemSU+9mE0p6a7FEIfIfAGfPQRn4y3rLsUTwToBV4CygNdepgFDUWpKlASMUi67jAaGRhLNWVNFVlKWBdxwyWiOgeiuyqtONT/5c0HqAyFjcuusUGdXdZ0keRlh94jobHywTbTj//d8vQDSdTFkWAABjG+vffXwrulg4ml3zT+fA2IZonUUBjG3U/NM54apW+y24eyvEsKimKgtQ19oj99K9pusvOsBttzrNGX8KIN/VyiwVkL+87jrFVhtdOGH3xHU2auRfPes82LmjbkAoZsi/cVE4gEQLCjPrVvN9wCJj/C5si4pLBYRSBv7ymutUZHeKFVCYO251gjFeANEEGBtFPTAbWh0PQAVEFTBWIvLLj12n1M6B/gWdLkpDqhynIgAAAABJRU5ErkJggg=="},35044:function(Fe){Fe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAH1SURBVEiJvZaxbtNQFIb///q67YDUDAwMDJHqoQ/A2KE3UCkSCwMvgBBTB54A0ZFKIBUhBAxIvEEHhhIHeh+AB2BB6sJQqUtGGtf+WRrHVZI6dm3+6crnHH86v3TuPRwMvj8CzAcSVtL7lRVz4JwboSUxjo/PANwufBtJetsWmHF8/AvA5pxYK2BD8tuCWIfkyyTRyWDwY89732kEmKbpoCSnUTC997eSRGcA1pasGZF8bS3eOOf+VgYCwHDovaTtKoUSTkm+CkN8qgI2AJBlWZmtMyJxB9DBeKyTOPbPvfdLOUQAiGN/D9DPqtCilu2Yk8OceWwFbArsReNRSWVW5x0Oh35Lwi6gLolIunm3QN7xXhjis3PugosSvfedJEFXSiOAEWk2SHUlbAK4W4P9m0yfLAReJ++9HY/RJ/W1YukfU54zV9YYBXUKF3Z4eOg76+vayDJGWYYugAhQJCEi61rKqaVHR8PtILC7gC5/jkYuaxKnkl6EofninLuwk0AQ2KeAHjcBmYDSVPurq+ajc718Hu00Rf2mQTs7vZnBt0B+td1o7spAV4AA7rcNugIk0ZfaBeV1dR5gSfuXu07lB9ien6dbxphlYIWlqld7qbLGBA+Ba/1sBJQDAT34H6ACcOYZagWUAyU+I/UOwNp01W8eNNE/wcEU7Dx0xUMAAAAASUVORK5CYII="},26292:function(Fe){Fe.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAMRSURBVFiFzZm/TxNhGMe/74Uci69p0om61MHiAA0BGZwQEyZNMQ5Eo4OkSZFNBkcD/QtgU0iInR3ANhgGE6A7GkMXr4vHUqaLTc6FDn0dnr68x/WuvLWV6ye53Hu997187v3x3MsDQwhia/wVYMwAYgJAEkAsrO4/UqeDHUE0i2yp8jmoEgsWY6stqevEhhArflHDeyE202sA+4jrlwOAJBjbJQfFRQ+KzfQaGFavXSsIgTxbOlkDWoJic/wJGNuNVKoNschylQINMWPrEdsEwFYBgA1m70nEogFmzEetEY4xYwDiQdQa4YgJA/0PwP0kOQRdQZ4AJpeBVAZwa8CXLJ11MDnw9BMwzAHHAsrvdNvGjKvrtOQebZOcvDa5nhwAxEdVm5F79Cye0GqqJ3gnox5oH1IPOJa+4NkxtTk7pms5GhoMadVKTNPZrQFf3+iLeamW6Hi2T4J97UHJH80518dndCfox+TA/bfA2Iv2e6kM3dPsqTD0hjiMVAYYe0nl4ZvAt/dUnloGJl9T+dwFvn+ISPD0kGRMroQAVW64VKcHrh7i+CgdQbg1YC9LIlLMK7eXDV/tnZ7bleDjbRXz7IP2+45FIl46yclQY3JgbqMPgueuKvNbwXWSDy9fm7z9N4kQqqyxoq8W9H7SgobEuyAa7uXhngoIxjKmNlwK3j0LurXwN03Ots85/5yUn0c/jqX1Pe49DnrlHEvNyYbbua0mvYWZakn1sLc3HAvYWaApYfcWZnoTBNSq9OPW9LdjHehuiG90uc3yY3K10M71poCeYLVIZ54Anu9TbOxWbG6D2soXdH72U7Ckgq7cdGp8BS7gCVrxF3KW9vdZfw7uLNCuZWSaFkU3G1bHoo1E/C5wekAvrAkTW+nfGNw/nOoGADtqiw7UDYD9iNoiHHZkAM1y1BqhiGaRsltb6V+IJifYCZvlTm63wozIR+sSgBArQCsOslylAIHBkRTIy1TwpRz1QGRZPdlVICiJTvnCdUSRRIfIs1yl4P2xTVBCosZ8Kz0Xw//5N4RNYa5Z9otJ/gI08QqsvSbWIgAAAABJRU5ErkJggg=="}}]);})();
