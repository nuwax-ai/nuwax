(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[9699],{94003:function(Yt,Ct,i){"use strict";i.d(Ct,{Z:function(){return zt}});var Ye="data:image/png;base64,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",v="data:image/png;base64,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",St="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA3bSURBVHgB7V1JsBXlFf5OK4MgSgxgKUZBLcUwJTgEUwqapExYWEbLZSpVLGIqi1hm60ZTlmt0FV1ZUbPEIaYibhSpsrBU5EWQKS/k4RCVQYnMUx/7n8//931wb9/ufg+43wNu3+6+PZzvnO+c//x9H8AAAwwwwADnKwh94rl5r90FpvuKI/2awXNwNoCwf8E91wwVr389hVNrb3/qxyMYI1Qm4Lk5L0/HRRc8xkyP4CzE/F9e7RZHmPD00qcWP4UxQIYKUMbnSRe+dbYaP8EcYqx6/+FNj2EMUIkA5flF7PwI5xByyh8fCxJ6JuC5eS/POUc8v4SxIKFCBEwYk1BtC22T0DMBTHxOSU8ntElC7xHA55b2j4a2SKiWhM8TtEHCgIAzoGkSBgR0gSZJGBDQJZoiYUBAD2iChAEBPaJuEgYEVECdJJy3BJw4chL9oC4SzlsCvt19BP2iDhLGDwGEeHZCvCeisC3dryIO1ECAQr8kjB0BlLyy/UvqhaNdmfPyvvI4FUg59PVRfL3rAOqAIuHdR/5VqUPcPgGdjGXXKcMzB+uqZRZ06PduXTGLArJb+DTHPg12D/8fRw8cRx0oLuWxjY9snI4e0S4B0jjW0N6o9j3ZnSQR5r2KArEP+0OY4yb7dxMZp07mGHlvd12RMP04sp6j4EK0DTaernRdGVkZU0oOCy1KpYj8HsHyEVEJicnHO0KR8MW2b7C3IGHW9Zdi8rQJxd+JqAJiWo4e0R4B2kvNa3Gh3nBCYBAbPY8/hDg3SOIocXNNMIuEQXRGMlRZ+vmmfegLFaZpmycgTZxcNnpYk4PleiU7o0hIMH6akynaR1dQ3B0JfYPRcw5ongC2/1AiF96EIRcQ2fV6d5Vow3YJGRdOxCTT0VlYkOA+TWiejC7RTgRw6n3GYCT1nKz6W0PlUX4Qmm9NLlkw6zJxQrfOno3jywnXhTFHKxHAHe5UGtYJD2yJOWHqBNxwz1WYu+xKHDt8Avt3HcTml3bi0N4jwe7sgisQRZ4MEgJl1MefwhFoEQXHGKBZAjoNnCLpUYbKvUarLVNnTsZdj96MqTMm672mYDK+d/U0zLppOrav+QQ73vjEEEUhhsj+wJWnSCSfpVAFKdSVWHq9LZPRzjjAO1xIvsb/c+99qs5Xi/Pvv9YbX2LqjIuw5Dc34t5Vd2DOsiv0Z3P9eTOGUJ/O9THMAM0N2BxCepeSZiXP5RpOr7d5tEMAx4veFGze+Z/CgLOXzDjtoRQRSx9agJ/8bgGmzJikP2eIyP1y7kbLHI4tzx7On4sjJ+5fob1RBc1K0GjSw67CMZ7JCEQo/e8G1y6brf/uXPc5Nr08jEN7joZy044hzACZvdAzObEKKTrsYy7NBIOsqppF4xFgejaIfFC/ZxZyUJaMbqFI+MWjtxUJ+wpfRTkpCq8s2hXpuexySBjoNApvCs0R4FrJoM6RQLEgAFz5pqfOvAi3P7QI961ahtk3z7RGP6XJz2F6SCxlicL5hCCFH2pPihqNAHfDCnK8azYGz8ttAtYVUR9QRCz/05KCjIV6OXRPc30Om7ZjMhLSS+LDYmUDRDRHABvv96NbuSkaGTmJymsLeiVL961ajgUPXIcJUy4MSdkmXnbVEwLxMhrytDiwjhIqpvrQfA7gtPYI/7q2Q4iGenV30QPXY8WTP8XcO68URucQCbDlL8eFAHuXj6Uo9JVQGxomwNwU+bFnMHKsvWZ13qcEdcLFKj/8fqGOCDXI89LDoXRl4SLpdfk7idreqI2ERpOwGO6UNkezWyhr8Wh465n3cWDPIfQKlRMUCWoM4YhwfSRXKYUojCPC16euegCjy8s9I1qYDwglnSuvZd1twGH9GbDj7f9i5P3PsHDFDbjlwfnoFSo/XHXLLGxbs6voL/3HyArkYJhs6wJ2TGG3sqGD4lZs32g0Cfu70qAOja/e70AZ4djh4/hg9Wb87eF/YPvbI+gVE6dM0PlBla1z77wCXPqBjw53Tn9+fV/1JYFmxwHCw8NNhGWWM4fcXVhLufp290G8+Zd38fcn3qosS0uLkvXnj95StDUmB7mJTQ55zWG6sx4NajYCgCSRyWVncI579N0c2iZRZ5zPP/4KL/7xtSI/vFeJiFk3XYZfPXm7J8FXRyjLInv9Jy9f/aDxkbACS60HwoSK1any/PDoCPumEsHYtnYnXn3iTXz0z+3oFROL8cLSh+ZH1+mTrz9LfL5uC4fTodEy1LW+Ukfh6DXcRJhIP+1BAS8V8bGUQVQEvPP8Rrz48GvYvm4EvWD6NZdEEtcxim3E1iNALbQiOl2qs6HsRJqysJskEKtzOI9dsmWk+jNtxhT0AhUFSCLMH893T8PETh1otAx1jeHQ67VtYb+KovnC7r1KfiZOmpOLdvaiFfNw64ML0Cs+3fCVuJLczDOTF0o00QxqjgBGqZIIls/F+ioFRTC4lINFK27EbQ8uwqQu5xQkjh86gQ0vbnWHt7am4DcI5g8PBYiNFdHik3FkJIalsIpZEO7Wu2IFVlTM/uHlhccv1K9V8OXWfVj/7EfFpP/Rwudd29MNIMVAzccCR3PQ/aBxAvyjJdwpH9iqKM7KZ0DYadrMi3HHb5fg2luvQhUc3HMY772wGZ9t2G2LBWXULL42UBwRQFx+9pmRW44AhAjwXm/kyA/zuziOkpiFhdwsLrS+qtx8vGYYW9bsxInDpyKv12egkHAhlt3lpQ8S94PmCCDr/TLpSnTw+m4cad7yuUUPaCEumTkVVbBj3S5sXL21mEM+Utg2s4k2gzcxIZYYyAfEKM4D3V70adDipLxYIdf7BlF3evqzPyxFFfxvyx58uHoLvtyyVxs+EybWc0KRp4cnjWB7PyX/Ie5u3HIGNFwFuVC1q5z6kMsLoa526+vGsUJu1r8whOF1n9hzZEFa2Oo+uWqnfH4SJVDw/uAz4zcCkovjdJ1sT+ibzLtqR3cLZfjNa3Zg8+vDhc6ftJdk1V55tDW+/ilOm3WIAJ+URAJ2uasuV2l4IEZ28s9CsOC4YLFvXRGg5ObtYuJGVTnmmOSPT5qGzHp0ZuXF5ICMsujqg+dTaV1dzw41LkFhMtIlMZeULRHuyxo1hPO+Xd9g/fMf4YuCAG1YcvVN5qXEkWAMLp8qTSKA/F4d7k2OEPpDaxLkB5YuD3OiRSwLvd6g5ObD1R8XkjNszkXGy52RvNRI40vTUxZJTxqJpetyhUMNitloBMhkK+HKPVOmkv4yBirez6bXd+jq5nih87EvwxjZykpmZYas9GRW40s/FI7hKJKR7O+tFv9vPALibpDc5qTH3aq7STVImtjF4Mrr/N7DkKkTJQmxqp8kWUeDX2erIlMZ2YuE+4y4dKqn/ndo+PsBQXN86iVZfoYU7CTr0w1f4rplPxj1kAeLfv/aZz4odH6v9WZpfFtmctDuzOk/Yk1P1d9URZm9yqD7ZhggylSvaxjfEpQEQFw3iwec3DddyHzjAkMv7cDlN30fF8+Me/nHdVk5XMjNVn2QoOf2uSNX38PmAMpiA2si4Gv/KFrgPDtIjb9UWOMDiDLveI+AtNnpvgFjdN/dmjOC+jak8rpctwjeeHI9Fj9wAy675lI9SfLvYhClejcq2UpvdwnURVRcwZAnBoirG/ceCFIFcUzIPSieMq1j9CvRcCtCfl+LRQCQDwkzpIdZtkZSJLzz7FDp4VlpQP/eyZcwvC8+tfHg6/sgP0iiI/zrvR7B+F6CUD8arYI0SJY3ZNVH6hEQMgT5SJBVVPpISOqzELpP0V5ZnCc8IbGXp16vl4iiV9Sk+SkabkeXtd5JE3mNgihJc02D/n4LmcfWCSFdl6oRlgaiUFpyJFIQSi+6CyEHdIKv0BoyvEPz35Lk+A4ya2D2JBjIWklLhpvug5MBSYAkzixE2k9ppFhiInNTqGog5AbuK6/1lpujoZ0JGZGR3WMdGlYS5HsXJsbjM8gELlM3xGfCukyouTB8NHAKWh8Zl0WOYTRueIdWvikfKh+7AoGOYBi1PdOjYtk30lusZ2ZAqXXtyldJQ/D4sBzXkDGJ8hq4JcM7tPe7IhB8L8gNbBsi1eGg+2afkviE9yRignzMiPMJkbIDLa9uTMlBqTXPd2h+RqyUxOKk6kfHan08WsNoGVAaHKKdQYg93Xu/aAB6W6fGb9nwDu3kANGSsCsghmVBiELRZPfqbJe4W5khfkhBkoFSknU5wWOMDO/QCgF+MOPDn7w3yhkD/UgIxQ08CjoU1sqGWeTI1JE0ssw2XdNXQSs5gDr5tE+iACeyEaVrkUDNttw310pyIz/nl+P9xovhHdp7LkjaQD4bhNhvGWmNInZMOpUxscnu3GH7ODO+Quu/M062dDltVQNCjmDHCSyqJ0JctsYVjx9Acfm84xXt/dpKTl4R6hyzLMXcbikNoGJx8XuSOTC541OH845TtP9rKyMbek3SyYDEiDkM1dKPU0lxkp7euDe6xJj83tAS5ExTvCHkYMB3Rt3ot3Sss8jwDu0T0AmpPElCpGRJfT8Ljd0J4+e3p0uMZuRzxOgS45OA8wg9E1Co8ggG6AzCEHpElf9L8lUM0BFFcdA8AUWp+AoGGAUX/Bk9omcCVm67d20Rak9jgBiMp1duWzGCHlEpCdOkk49TBb07Z8EYomMnH0cFVCJg5dD9+zHp5N2DSID2/ML4d68cKWxSAYQ+of+Lc1xQRAQt5vPk/xpWlWDRJHy1UIFXtCQPMMAAAwwwQAV8B/XyGPQip3WxAAAAAElFTkSuQmCC",q="data:image/png;base64,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",ue="data:image/png;base64,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",f=i(73415),Pe=i(94484),u=i(94581),Me=i.n(u),I=i(75271),_e={"file-type-icon":"file-type-icon___HPeox"},w=i(52676),je=Me().bind(_e),vt=function(ze){var He=ze.fileType,qe=ze.fileName,$e=ze.fileUrl,it=ze.size,_t=it===void 0?50:it,Fe=ze.preview,Ce=Fe===void 0?!1:Fe,ct=ze.className,oe=ze.style,se=(0,I.useCallback)(function(ee,bt){if(ee!=null&&ee.includes("image/"))return null;var Xe=bt?.toLowerCase().split(".").pop()||"";return ee!=null&&ee.includes("word")||Xe==="doc"||Xe==="docx"?Ye:ee!=null&&ee.includes("excel")||ee!=null&&ee.includes("spreadsheet")||Xe==="xls"||Xe==="xlsx"||Xe==="csv"?v:ee!=null&&ee.includes("powerpoint")||ee!=null&&ee.includes("presentation")||Xe==="ppt"||Xe==="pptx"?ue:ee!=null&&ee.includes("pdf")||Xe==="pdf"?q:ee!=null&&ee.includes("video/")||ee!=null&&ee.includes("audio/")||Xe==="mp4"||Xe==="avi"||Xe==="mov"||Xe==="mp3"||Xe==="wav"||Xe==="flac"?St:Ye},[]),et=se(He||"",qe||""),ot=He?.includes("image/");return(0,w.jsx)(Pe.Z,{width:_t,height:_t,src:ot?$e:et,fallback:f.Pc,preview:Ce,className:je(_e["file-type-icon"],ct),style:oe})},Ne=vt,Oe=i(18631),Qe=i(73888),st=i(14258),nt=i(24573),le=i(42599),Ie={"xagi-nav-style2":"xagi-nav-style2___hhbn6",text:"text___qMlKf","page-container":"page-container___xzPhP","files-container":"files-container___rrmlx","file-box":"file-box___jZnPB","image-box":"image-box___lEnte",del:"del___kwMAg",info:"info___IOZrP",size:"size___Q3woW","icon-container":"icon-container___ukPo7","status-icon":"status-icon___xJLOX","status-success":"status-success___yyF3C","status-error":"status-error___MX8J3","status-loading":"status-loading___hl8sd","file-image":"file-image___mahtI",spin:"spin___wReYv"},dt=Me().bind(Ie),Ae=function(ze){var He=ze.files,qe=ze.onDel,$e=(0,I.useCallback)(function(Fe){return(0,Qe.U)(Fe)},[]),it=function(Ce){var ct=$e(Ce);return(0,w.jsxs)("div",{className:dt(Ie["file-box"],Ie["image-box"],"flex","items-center"),children:[(0,w.jsxs)("div",{className:dt(Ie["image-container"],"relative"),children:[(0,w.jsx)(Pe.Z,{src:Ce?.url,fallback:f.Pc,preview:!1,className:Ie["file-image"]}),ct==="exception"&&(0,w.jsx)(st.Z,{className:dt(Ie["status-icon"],Ie["status-error"])}),ct==="active"&&(0,w.jsx)("div",{className:dt(Ie["status-icon"],Ie["status-loading"]),children:(0,w.jsx)(nt.Z,{spin:!0})})]}),(0,w.jsx)(le.Z,{className:dt(Ie.del),onClick:function(){return qe(Ce.uid)}})]},Ce.uid)},_t=function(Ce){var ct=$e(Ce);return(0,w.jsxs)("div",{className:dt(Ie["file-box"],"flex","items-center"),children:[(0,w.jsxs)("div",{className:dt(Ie["icon-container"],"relative"),children:[(0,w.jsx)(Ne,{fileType:Ce?.type,fileName:Ce?.name,size:50,preview:!1}),ct==="exception"&&(0,w.jsx)(st.Z,{className:dt(Ie["status-icon"],Ie["status-error"])}),ct==="active"&&(0,w.jsx)("div",{className:dt(Ie["status-icon"],Ie["status-loading"]),children:(0,w.jsx)(nt.Z,{spin:!0})})]}),(0,w.jsxs)("div",{className:dt("flex-1","overflow-hide",Ie.info),children:[(0,w.jsx)("h4",{className:dt("text-ellipsis"),children:Ce?.name}),(0,w.jsx)("span",{className:Ie.size,children:(0,Oe.td)(Ce?.size)})]}),(0,w.jsx)(le.Z,{className:dt(Ie.del),onClick:function(){return qe(Ce.uid)}})]},Ce.uid)};return(0,w.jsx)("div",{className:dt(Ie["files-container"]),children:He?.map(function(Fe){var Ce;return Fe!=null&&(Ce=Fe.type)!==null&&Ce!==void 0&&Ce.includes("image/")?it(Fe):_t(Fe)})})},zt=Ae},70375:function(Yt,Ct,i){"use strict";i.d(Ct,{Z:function(){return w}});var Ye=i(59261),v=i(64799),St=i(45019),q=i(94581),ue=i.n(q),f=i(75271),Pe=i(87453),u={"xagi-nav-style2":"xagi-nav-style2___mMXYN",text:"text___QMrw8","page-container":"page-container___OILW5",container:"container___CqnIK","extra-box":"extra-box___y8u7O","gap-6":"gap-6___L0Qqc","img-box":"img-box___DFhgw","content-box":"content-box___YPipV",name:"name___MaQ7a",desc:"desc___POp__"},Me=i(52676),I=ue().bind(u),_e=function(vt){var Ne=vt.className,Oe=vt.showImage,Qe=Oe===void 0?!0:Oe,st=vt.agentComponentInfo,nt=vt.defaultImage,le=vt.extra,Ie=(0,f.useMemo)(function(){var Ae=st.targetId,zt=st.type,ut=st.targetConfig,ze=st.spaceId;if(ut&&ze===ut.spaceId)switch(zt){case v.qR.Plugin:return ut?.type===St.AQ.HTTP?"/space/".concat(ze,"/plugin/").concat(Ae):"/space/".concat(ze,"/plugin/").concat(Ae,"/cloud-tool");case v.qR.Workflow:return"/space/".concat(ze,"/workflow/").concat(Ae);case v.qR.Table:return"/space/".concat(ze,"/table/").concat(Ae);case v.qR.Knowledge:return"/space/".concat(ze,"/knowledge/").concat(Ae)}},[st]),dt=(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("span",{className:I("radius-6",u["img-box"]),children:Qe&&(0,Me.jsx)("img",{src:st.icon||nt,alt:""})}),(0,Me.jsxs)("div",{className:I("flex-1","flex","flex-col","content-center","overflow-hide",u["content-box"]),children:[(0,Me.jsx)("h3",{className:I("text-ellipsis",u.name),children:st.name}),(0,Me.jsx)(Ye.Z,{condition:st.description,children:(0,Me.jsx)("p",{className:I("text-ellipsis",u.desc),children:st.description})})]})]});return(0,Me.jsxs)("div",{className:I("flex","items-center",u.container,Ne),children:[Ie?(0,Me.jsx)(Pe.Link,{to:Ie,target:"_blank",className:I("flex-1","flex","items-center","overflow-hide",u["gap-6"]),children:dt}):(0,Me.jsx)("div",{className:I("flex-1","flex","items-center","overflow-hide",u["gap-6"]),children:dt}),(0,Me.jsx)("div",{className:I(u["extra-box"],"flex","items-center"),children:le})]})},w=_e},48614:function(Yt,Ct,i){"use strict";i.d(Ct,{Z:function(){return qt}});var Ye=i(26068),v=i.n(Ye),St=i(48305),q=i.n(St),ue=i(92973),f=i(88459),Pe=i(86743),u=i(63876),Me=i(94581),I=i.n(Me),_e=i(75271),w={"xagi-nav-style2":"xagi-nav-style2___ZnOEk",text:"text___I_DzH","page-container":"page-container____iz0C","skill-item-style":"skill-item-style___N0WID","skill-item-icon":"skill-item-icon___jliak","skill-item-content-style":"skill-item-content-style___RWsv5","skill-item-title-style":"skill-item-title-style___RPCqS","skill-item-desc-style":"skill-item-desc-style___nXwpy","mask-layer-style":"mask-layer-style___uLo49",white:"white___PmcIw"},je=i(52676),vt=I().bind(w),Ne=function(pt){var wt=pt.item,ce=pt.onDelete;return(0,je.jsxs)("div",{className:vt(w["skill-item-style"],"dis-left"),children:[(0,je.jsx)("img",{src:wt.icon,alt:"",className:vt(w["skill-item-icon"])}),(0,je.jsxs)("div",{className:vt(w["skill-item-content-style"]),children:[(0,je.jsx)("div",{className:vt(w["skill-item-title-style"]),children:wt.name}),(0,je.jsx)("div",{className:vt(w["skill-item-desc-style"]),children:wt.description})]}),(0,je.jsx)("div",{className:vt(w["mask-layer-style"]),children:(0,je.jsx)("div",{style:{color:"#fff",backgroundColor:"transparent"},children:(0,je.jsx)(u.Z,{content:"\u79FB\u9664",trigger:"hover",children:(0,je.jsx)(Pe.Z,{className:"ml-12  white",style:{cursor:"pointer"},onClick:ce})})})})]})},Oe=Ne,Qe=i(48279),st=i(94201),nt=i(10560),le=i(61265),Ie=i(48528),dt=i(99730),Ae=i(64799),zt=i(92122),ut=i(49528),ze=i(80110),He=i(26324),qe=i(28190),$e=i(41249),it=i(63619),_t=i(17701),Fe=i(30967),Ce=i(87453),ct=i(7098),oe={"xagi-nav-style2":"xagi-nav-style2___fHzli",text:"text___srgXE","page-container":"page-container____zQ5I",header:"header___ZEU6y",box:"box___su6_r",active:"active___qQari"},se={"xagi-nav-style2":"xagi-nav-style2___GME40",text:"text___B9pND","page-container":"page-container___Gqdvl","workflow-desc":"workflow-desc___yLObd"},et=I().bind(se),ot=function(pt){var wt=pt.title,ce=wt===void 0?"\u8BF7\u9009\u62E9\u5DE5\u4F5C\u6D41":wt,Jt=pt.onClick;return(0,je.jsx)("div",{className:et(se["workflow-desc"]),onClick:Jt,children:ce})},ee=ot,bt=I().bind(oe),Xe=function(pt){var wt=pt.mode,ce=wt===void 0?zt.jA.Create:wt,Jt=pt.spaceId,cr=pt.knowledgeInfo,Sr=pt.open,dr=pt.onCancel,Tt=pt.onConfirm,yr=qe.Z.useForm(),Jr=q()(yr,1),yt=Jr[0],pr=(0,_e.useState)(!1),Pr=q()(pr,2),rn=Pr[0],Kr=Pr[1],Bt=(0,_e.useState)(""),hn=q()(Bt,2),Hr=hn[0],nn=hn[1],Lr=(0,_e.useState)(ut.u6.Text),Fr=q()(Lr,2),jt=Fr[0],Ot=Fr[1],Zt=(0,_e.useState)([]),rr=q()(Zt,2),Gt=rr[0],sr=rr[1],fr=(0,_e.useState)("default"),$=q()(fr,2),be=$[0],Re=$[1],_=(0,_e.useState)(null),Mt=q()(_,2),Ut=Mt[0],Mr=Mt[1],Qr=(0,_e.useState)(!1),Xr=q()(Qr,2),qr=Xr[0],gn=Xr[1],Rn=(0,_e.useState)(Ae.qR.Plugin),kn=q()(Rn,2),Nr=kn[0],ra=kn[1],Wr=(0,_e.useState)([]),Pt=q()(Wr,2),na=Pt[0],Cn=Pt[1],an=(0,Ce.useRequest)(Ie.qx,{manual:!0,debounceInterval:300,onSuccess:function(mt){$e.ZP.success("\u77E5\u8BC6\u5E93\u5DF2\u521B\u5EFA\u6210\u529F"),Kr(!1),dr(),Ce.history.push("/space/".concat(Jt,"/knowledge/").concat(mt))},onError:function(){Kr(!1)}}),xn=an.run,sn=(0,Ce.useRequest)(Ie.ei,{manual:!0,debounceInterval:300,onSuccess:function(mt,nr){$e.ZP.success("\u77E5\u8BC6\u5E93\u66F4\u65B0\u6210\u529F"),Kr(!1);var jr=nr[0];Tt?.(jr)},onError:function(){Kr(!1)}}),aa=sn.run,Sn=(0,Ce.useRequest)(Ie.Wi,{manual:!0,debounceInterval:300,onSuccess:function(mt){nn(mt.icon),Ot(mt.dataType),yt.setFieldsValue({name:mt.name,description:mt.description,embeddingModelId:mt.embeddingModelId,dataParsingMethod:mt.workflowId?"workflow":"default"}),mt.workflowId&&(Re(mt.workflowId?"workflow":"default"),Mr({id:mt.workflowId,name:mt.workflowName,icon:mt.workflowIcon,description:mt.workflowDescription}))},onError:function(){}}),yn=Sn.run,En=(0,Ce.useRequest)(dt.Bj,{manual:!0,debounceInterval:300,onSuccess:function(mt){var nr=mt?.map(function(jr){return{label:jr.name,value:jr.id}})||[];sr(nr)}}),Wn=En.run;(0,_e.useEffect)(function(){Sr&&(Wn({spaceId:Jt,modelType:ze.Mj.Embeddings}),Re("default"),Mr(null),cr&&yn(cr.id))},[Jt,Sr,cr]);var An=function(mt){var nr={spaceId:Jt,name:mt.name,description:mt.description,embeddingModelId:mt.embeddingModelId,icon:Hr,dataType:jt};be==="workflow"&&(nr.workflowId=Ut?.id),Kr(!0),ce===zt.jA.Create?xn(nr):aa(v()({id:cr?.id},nr))},_n=function(mt){mt.dataParsingMethod&&Re(mt.dataParsingMethod)},Ln=function(mt){Cn(function(){return[{type:mt.targetType,targetId:mt.targetId,status:Ae.BQ.Added,toolName:mt.toolName||""}]}),(0,Fe.flushSync)(function(){Mr({id:mt.targetId,name:mt.name,icon:mt.icon,description:mt.description})}),gn(!1)},Mn=function(mt,nr){mt.stopPropagation(),ra(nr),gn(!0)},bn=function(mt){Mn(mt,Ae.qR.Workflow)},$t=function(){Mr(null),Cn([])},De=function(){yt.submit()};return(0,je.jsx)(je.Fragment,{children:(0,je.jsxs)(Qe.Z,{form:yt,title:ce===zt.jA.Create?"\u521B\u5EFA\u77E5\u8BC6\u5E93":"\u66F4\u65B0\u77E5\u8BC6\u5E93",open:Sr,loading:rn,onCancel:dr,onConfirm:De,children:[(0,je.jsxs)(qe.Z,{form:yt,className:bt("mt-16"),requiredMark:He.N,layout:"vertical",onFinish:An,onValuesChange:_n,preserve:!1,autoComplete:"off",initialValues:{dataParsingMethod:"default"},children:[(0,je.jsx)(qe.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8F93\u5165\u77E5\u8BC6\u5E93\u540D\u79F0"}],children:(0,je.jsx)(it.Z,{placeholder:"\u8F93\u5165\u77E5\u8BC6\u5E93\u540D\u79F0",showCount:!0,maxLength:100})}),(0,je.jsx)(st.Z,{name:"description",label:"\u63CF\u8FF0",initialValue:cr?.description,placeholder:"\u8F93\u5165\u77E5\u8BC6\u5E93\u5185\u5BB9\u7684\u63CF\u8FF0",maxLength:1e4}),(0,je.jsx)(qe.Z.Item,{name:"embeddingModelId",label:"\u5411\u91CF\u6A21\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5411\u91CF\u6A21\u578B"}],children:(0,je.jsx)(ct.Z,{placeholder:"\u8BF7\u9009\u62E9\u5411\u91CF\u6A21\u578B",disabled:ce===zt.jA.Update,options:Gt,allowClear:!0})}),(0,je.jsx)(qe.Z.Item,{name:"dataParsingMethod",label:"\u6587\u6863\u5185\u5BB9\u63D0\u53D6\u65B9\u5F0F",tooltip:"\u9009\u62E9\u5DE5\u4F5C\u6D41\u540E\u6240\u6709\u6587\u6863\u3001\u56FE\u7247\u7B49\u90FD\u5C06\u901A\u8FC7\u5DE5\u4F5C\u6D41\u89E3\u6790\uFF0C\u8BBE\u8BA1\u5DE5\u4F5C\u6D41\u65F6\u8BF7\u6CE8\u610F\u56FA\u5B9A\u5165\u53C2\u4E3A\uFF1Afile_url\uFF0C\u51FA\u53C2\u8BF7\u5728\u201C\u7ED3\u675F\u201D\u8282\u70B9\u9009\u62E9\u201C\u8FD4\u56DE\u6587\u672C\u201D\uFF0C\u5E76\u5728\u201C\u8F93\u51FA\u5185\u5BB9\u201D\u533A\u57DF\u8BBE\u7F6E\u8FD4\u56DE\u7684\u53D8\u91CF\u3002",children:(0,je.jsx)(_t.default,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6587\u6863\u5185\u5BB9\u63D0\u53D6\u65B9\u5F0F",options:[{value:"default",label:"\u7CFB\u7EDF\u9ED8\u8BA4"},{value:"workflow",label:"\u81EA\u5B9A\u4E49\u5DE5\u4F5C\u6D41"}]})}),be==="workflow"&&(0,je.jsx)(qe.Z.Item,{style:{marginTop:"-15px"},children:Ut?(0,je.jsx)(Oe,{item:Ut,onDelete:$t}):(0,je.jsx)(ee,{onClick:bn})}),(0,je.jsx)(qe.Z.Item,{name:"icon",label:"\u56FE\u6807",children:(0,je.jsx)(nt.Z,{className:bt(oe["upload-box"]),onUploadSuccess:nn,imageUrl:Hr,defaultImage:ue,svgIconName:"icons-workspace-knowledge"})})]}),(0,je.jsx)(f.Z,{open:qr,onCancel:function(){return gn(!1)},checkTag:Nr,addComponents:na,onAdded:Ln,tabs:le.Ne.filter(function(n){return n.key===Ae.qR.Workflow})})]})})},qt=Xe},75484:function(Yt,Ct,i){"use strict";i.d(Ct,{Z:function(){return Ae}});var Ye=i(26068),v=i.n(Ye),St=i(48305),q=i.n(St),ue=i(83352),f=i(48279),Pe=i(94201),u=i(10560),Me=i(53361),I=i(92122),_e=i(26324),w=i(28190),je=i(41249),vt=i(63619),Ne=i(94581),Oe=i.n(Ne),Qe=i(75271),st=i(87453),nt={container:"container___etrGg",header:"header___qw2yv"},le=i(52676),Ie=Oe().bind(nt),dt=function(ut){var ze=ut.type,He=ze===void 0?I.jA.Create:ze,qe=ut.name,$e=ut.spaceId,it=ut.id,_t=ut.icon,Fe=ut.description,Ce=ut.open,ct=ut.onCancel,oe=ut.onConfirm,se=w.Z.useForm(),et=q()(se,1),ot=et[0],ee=(0,Qe.useState)(""),bt=q()(ee,2),Xe=bt[0],qt=bt[1],Ue=(0,st.useRequest)(Me.Kt,{manual:!0,debounceInterval:300,onSuccess:function(dr){je.ZP.success("\u5DE5\u4F5C\u6D41\u5DF2\u521B\u5EFA\u6210\u529F"),ct(),st.history.push("/space/".concat($e,"/workflow/").concat(dr))}}),pt=Ue.run,wt=(0,st.useRequest)(Me.sN,{manual:!0,debounceInterval:300,onSuccess:function(dr,Tt){je.ZP.success("\u5DE5\u4F5C\u6D41\u66F4\u65B0\u6210\u529F");var yr=Tt[0];oe?.(yr)}}),ce=wt.run;(0,Qe.useEffect)(function(){Ce&&(qt(_t||""),ot.setFieldsValue({name:qe,description:Fe}))},[Ce,_t,qe,Fe]);var Jt=function(dr){var Tt={name:dr?.name,description:dr?.description,icon:Xe};He===I.jA.Create?pt(v()({spaceId:$e},Tt)):ce(v()({id:it},Tt))},cr=function(){ot.submit()};return(0,le.jsx)(f.Z,{form:ot,title:He===I.jA.Create?"\u521B\u5EFA\u5DE5\u4F5C\u6D41":"\u66F4\u65B0\u5DE5\u4F5C\u6D41",classNames:{content:Ie(nt.container),header:Ie(nt.header)},open:Ce,onCancel:ct,onConfirm:cr,children:(0,le.jsxs)(w.Z,{form:ot,requiredMark:_e.N,layout:"vertical",onFinish:Jt,autoComplete:"off",children:[(0,le.jsx)(w.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5DE5\u4F5C\u6D41\u540D\u79F0"},{validator:function(dr,Tt){return!Tt||Tt?.length<=30?Promise.resolve():Tt?.length>30?Promise.reject(new Error("\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26!")):Promise.reject(new Error("\u8F93\u5165\u5DE5\u4F5C\u6D41\u540D\u79F0!"))}}],children:(0,le.jsx)(vt.Z,{placeholder:"\u8F93\u5165\u5DE5\u4F5C\u6D41\u540D\u79F0",showCount:!0,maxLength:30})}),(0,le.jsx)(Pe.Z,{name:"description",label:"\u63CF\u8FF0",initialValue:Fe,placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\uFF0C\u8BA9\u5927\u6A21\u578B\u7406\u89E3\u4EC0\u4E48\u60C5\u51B5\u4E0B\u5E94\u8BE5\u8C03\u7528\u6B64\u5DE5\u4F5C\u6D41",maxLength:1e4}),(0,le.jsx)(w.Z.Item,{name:"icon",label:"\u56FE\u6807",children:(0,le.jsx)(u.Z,{onUploadSuccess:qt,imageUrl:Xe,defaultImage:ue,svgIconName:"icons-workspace-workflow"})})]})})},Ae=dt},88459:function(Yt,Ct,i){"use strict";i.d(Ct,{Z:function(){return Lr}});var Ye=i(90228),v=i.n(Ye),St=i(15558),q=i.n(St),ue=i(26068),f=i.n(ue),Pe=i(87999),u=i.n(Pe),Me=i(48305),I=i.n(Me),_e=i(59934),w=i(61265),je=i(28359),vt=i(3440),Ne=i(52909),Oe=i(64799),Qe=i(92122),st=i(75076),nt=i(44953),le=i(86230),Ie=i(61884),dt=i(28057),Ae=i(98493),zt=i(17023),ut=i(16621),ze=i(41249),He=i(73981),qe=i(44384),$e=i(9504),it=i(14719),_t=i(63619),Fe=i(58130),Ce=i(70183),ct=i(94581),oe=i.n(ct),se=i(75271),et=i(87453),ot=i(80774),ee=i(48614),bt=i(30704),Xe=i(75484),qt=i(3055),Ue={"xagi-nav-style2":"xagi-nav-style2___Hhx24",text:"text___fY1wP","page-container":"page-container___mEK5C","created-modal-style":"created-modal-style___NYAVL","segmented-style":"segmented-style___nKwTz","created-title-text":"created-title-text___AjELa","created-list-spin-style":"created-list-spin-style___zM15H","created-list-empty-style":"created-list-empty-style___oCfaM","create-button":"create-button___coqIa","aside-header":"aside-header___jACDw","aside-menu":"aside-menu___m045Q","add-button":"add-button___TndZY","add-button-added":"add-button-added___MdC2h","created-container":"created-container___AGXz5","aside-style":"aside-style___CaDQZ","main-style":"main-style___GSDxU","list-item-style":"list-item-style___WKFIL","left-image-style":"left-image-style___GMm3v","content-font":"content-font___ycx8_","count-div-style":"count-div-style___Zd48s","label-font-style":"label-font-style___HZB9A","collect-star":"collect-star___bLtFf","icon-margin":"icon-margin___HgnVb","created-description-style":"created-description-style___Cm4V4"},pt=i(13143),wt={"xagi-nav-style2":"xagi-nav-style2___XdLTv",text:"text___tQ5I5","page-container":"page-container___s_CSV","mcp-tools-style":"mcp-tools-style___u92JF","mcp-tools-item-style":"mcp-tools-item-style___sidZr","add-button":"add-button___mejhX","add-button-added":"add-button-added___iY7_z","mcp-tools-item-content-style":"mcp-tools-item-content-style___ku31r","mcp-tools-item-name-style":"mcp-tools-item-name-style___oOtSe","mcp-tools-item-description-style":"mcp-tools-item-description-style___FlirP","mcp-tools-item-button-style":"mcp-tools-item-button-style___MPtXV"},ce=i(52676),Jt=oe().bind(wt),cr=Oe.BQ.Added,Sr=function(jt){var Ot=jt.tools,Zt=jt.item,rr=jt.onAddTool,Gt=jt.fold,sr=jt.getToolLoading,fr=jt.addedComponents,$=(0,se.useCallback)(function(Re,_){rr(f()(f()({},Zt),{},{name:"".concat(Zt.name,"/").concat(Re),description:_,toolName:Re}))},[rr,Zt]),be=(0,se.useCallback)(function(Re,_){return fr?.some(function(Mt){return Mt.type===Re.targetType&&Mt.targetId===Re.targetId&&(Mt.toolName||"")===(Re.toolName||"")&&Mt.status===_})},[fr,Zt]);return Gt?null:(0,ce.jsx)("div",{className:Jt(wt["mcp-tools-style"]),children:Ot.map(function(Re,_){var Mt=be(f()(f()({},Zt),{},{toolName:Re.name}),cr),Ut=sr(f()(f()({},Zt),{},{toolName:Re.name}));return(0,ce.jsxs)("div",{className:Jt(wt["mcp-tools-item-style"]),children:[(0,ce.jsxs)("div",{className:Jt("dis-sb",wt["mcp-tools-item-content-style"]),children:[(0,ce.jsx)("div",{className:Jt(wt["mcp-tools-item-name-style"]),children:Re.name}),(0,ce.jsx)("div",{className:Jt(wt["mcp-tools-item-description-style"]),children:Re.description||"\u6682\u65E0\u63CF\u8FF0"})]}),(0,ce.jsx)("div",{className:Jt(wt["mcp-tools-item-button-style"],"dis-sb"),children:(0,ce.jsx)($e.ZP,{color:"default",variant:"filled",className:Jt(wt["add-button"],Mt&&wt["add-button-added"]),onClick:function(){return $(Re.name,Re.description)},disabled:Ut?!1:Mt,loading:Ut,children:Mt?"\u5DF2\u6DFB\u52A0":"\u6DFB\u52A0"})})]},"".concat(Zt.targetId,"-").concat(_,"-tools-").concat(Re.name))})},"".concat(Zt.targetId,"-tools"))},dr=Sr,Tt={"xagi-nav-style2":"xagi-nav-style2___AR6lO",text:"text___C_yvr","page-container":"page-container___Tl8wQ",container:"container___Xs6nx","left-image-style":"left-image-style___QkQAk","content-font":"content-font___gLvK8","count-div-style":"count-div-style___bhUoi","fold-icon-style":"fold-icon-style___iClGH","label-font-style":"label-font-style___R72Ym","created-description-style":"created-description-style___fbx01"},yr=oe().bind(Tt),Jr=function(jt){var Ot,Zt,rr,Gt=jt.item,sr=jt.index,fr=jt.selected,$=jt.onAddNode,be=jt.getToolLoading,Re=jt.addedComponents,_=(0,se.useState)(!0),Mt=I()(_,2),Ut=Mt[0],Mr=Mt[1];return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:yr("dis-sb",Tt.container,"cursor-pointer"),style:{height:"unset"},onClick:function(){return Mr(!Ut)},children:[(0,ce.jsx)("img",{src:Gt.icon||(0,Ie.Pk)(fr.key),alt:"",className:yr(Tt["left-image-style"])}),(0,ce.jsxs)("div",{className:yr("flex-1",Tt["content-font"]),children:[(0,ce.jsx)("p",{className:yr(Tt["label-font-style"]),children:Gt.name}),(0,ce.jsx)("p",{className:yr(Tt["created-description-style"],"text-ellipsis-2"),title:Gt.description,children:Gt.description}),(0,ce.jsx)("div",{className:yr("dis-sb",Tt["count-div-style"]),children:(0,ce.jsxs)("div",{className:"dis-left",children:[(0,ce.jsx)("img",{src:((Ot=Gt.publishUser)===null||Ot===void 0?void 0:Ot.avatar)||i(78987),style:{borderRadius:"50%"},alt:"\u7528\u6237\u5934\u50CF"}),(0,ce.jsx)("span",{children:(Zt=Gt.publishUser)===null||Zt===void 0?void 0:Zt.nickName}),(0,ce.jsx)(qe.Z,{type:"vertical"}),(0,ce.jsxs)("span",{children:["\u90E8\u7F72\u4E8E",(0,nt.hK)(Gt.deployed)]})]})})]}),(0,ce.jsx)(pt.Z,{onClick:function(){return Mr(!Ut)},className:yr(Tt["fold-icon-style"]),style:{transform:Ut?"rotate(-90deg)":"rotate(0)"}})]},"".concat(Gt.targetId,"-").concat(sr)),(0,ce.jsx)(dr,{fold:Ut,tools:(Gt==null||(rr=Gt.config)===null||rr===void 0?void 0:rr.tools)||[],item:Gt,getToolLoading:be,onAddTool:$,addedComponents:Re})]})},yt=Jr,pr={"xagi-nav-style2":"xagi-nav-style2___oSLyM",text:"text___Y7g4H","page-container":"page-container___HAi1o",container:"container___RB6dU","left-image-style":"left-image-style___cOdxC","content-font":"content-font___rKg1c","count-div-style":"count-div-style___fmK9k","label-font-style":"label-font-style___ftppD","created-description-style":"created-description-style___KPAuu"},Pr=oe().bind(pr),rn=function(jt){var Ot=jt.item,Zt=jt.index,rr=jt.isAddedState,Gt=jt.onAddNode,sr=jt.isCurrentLoading;return(0,ce.jsxs)("div",{className:Pr("dis-sb",pr.container,"cursor-pointer"),style:{height:"unset"},children:[(0,ce.jsx)("img",{src:Ot.icon,alt:"",className:Pr(pr["left-image-style"])}),(0,ce.jsxs)("div",{className:Pr("flex-1",pr["content-font"]),children:[(0,ce.jsx)("p",{className:Pr(pr["label-font-style"]),children:Ot.name}),(0,ce.jsx)("p",{className:Pr(pr["created-description-style"],"text-ellipsis-2"),title:Ot.description,children:Ot.description}),(0,ce.jsx)("div",{className:Pr("dis-sb",pr["count-div-style"]),children:(0,ce.jsxs)("div",{className:"dis-left",children:[(0,ce.jsx)("img",{src:Ot?.creatorAvatar||i(78987),style:{borderRadius:"50%"},alt:"\u7528\u6237\u5934\u50CF"}),(0,ce.jsx)("span",{children:Ot.creatorNickName}),(0,ce.jsx)(qe.Z,{type:"vertical"}),(0,ce.jsxs)("span",{children:["\u521B\u5EFA\u4E8E",(0,nt.hK)(Ot.created)]})]})})]}),(0,ce.jsx)($e.ZP,{color:"default",variant:"filled",className:Pr(pr["add-button"],rr&&pr["add-button-added"]),onClick:function(){return Gt(Ot)},disabled:sr?!1:rr,loading:sr,children:rr?"\u5DF2\u6DFB\u52A0":"\u6DFB\u52A0"})]},"".concat(Ot.projectId,"-").concat(Zt))},Kr=rn,Bt=oe().bind(Ue),hn=[Oe.qR.Plugin,Oe.qR.Workflow,Oe.qR.Knowledge,Oe.qR.Table],Hr=w.Ne.filter(function(Fr){return hn.includes(Fr.key)}),nn=function(jt){var Ot=jt.open,Zt=jt.onCancel,rr=jt.checkTag,Gt=jt.onAdded,sr=jt.addComponents,fr=jt.addSkillLoading,$=fr===void 0?void 0:fr,be=jt.tabs,Re=be===void 0?Hr:be,_=jt.hideTop,Mt=(0,et.useParams)(),Ut=Number(Mt.spaceId),Mr=(0,se.useState)(!1),Qr=I()(Mr,2),Xr=Qr[0],qr=Qr[1],gn=(0,se.useState)(""),Rn=I()(gn,2),kn=Rn[0],Nr=Rn[1],ra=(0,se.useState)({label:"\u63D2\u4EF6",key:Oe.qR.Plugin}),Wr=I()(ra,2),Pt=Wr[0],na=Wr[1],Cn=(0,se.useState)({page:1,pageSize:20}),an=I()(Cn,2),xn=an[0],sn=an[1],aa=(0,se.useState)(100),Sn=I()(aa,2),yn=Sn[0],En=Sn[1],Wn=(0,se.useState)("all"),An=I()(Wn,2),_n=An[0],Ln=An[1],Mn=(0,se.useState)(),bn=I()(Mn,2),$t=bn[0],De=bn[1],n=(0,se.useState)([]),mt=I()(n,2),nr=mt[0],jr=mt[1],er=(0,se.useState)([]),sa=I()(er,2),Br=sa[0],ia=sa[1],Vn=(0,se.useState)(!1),zn=I()(Vn,2),Pa=zn[0],Rr=zn[1],Fa=(0,se.useState)({list:[],searching:!1}),oa=I()(Fa,2),wn=oa[0],Nn=oa[1],$r=(0,se.useRef)(!1),jn=(0,se.useRef)(null),la=[{key:"all",label:"\u5168\u90E8"},{key:"library",label:"\u7EC4\u4EF6\u5E93".concat(Pt.label)},{key:"collect",label:"\u6536\u85CF"}],Ra=[{key:"all",label:"\u5168\u90E8"}],ka=[{key:"all",label:"\u5168\u90E8"},{key:1,label:"\u6587\u6863"}],ua=[{key:"all",label:"\u7EC4\u4EF6\u5E93\u6570\u636E\u8868"}],xa=[{key:"all",label:"\u5168\u90E8"},{key:"custom",label:"\u81EA\u5B9A\u4E49\u670D\u52A1"}],La=function(){switch(Pt.key){case Oe.qR.Knowledge:return ka;case Oe.qR.Table:return ua;case Oe.qR.MCP:return xa;case Oe.qR.Page:return Ra;default:return la}},ca=(0,se.useRef)(null),In=(0,se.useRef)(!1),Dn=function(){var Ze=u()(v()().mark(function ye(Ge,ht){var Rt,tr,kt,Qt;return v()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(Nn({list:[],searching:!1}),Be.prev=1,Ut!==0){Be.next=4;break}return Be.abrupt("return");case 4:if(!(ht.page>yn&&ht.page!==1||In.current)){Be.next=6;break}return Be.abrupt("return");case 6:return In.current=!0,ht.page===1&&Rr(!0),$r.current&&(ht.justReturnSpaceData=!0),jn.current&&(ht.dataType=jn.current),Be.next=12,je.ZP.getList(Ge,f()(f()({},ht),{},{spaceId:Ut}));case 12:if(Rt=Be.sent,tr=Rt.code,kt=Rt.data,Qt=Rt.message,In.current=!1,Rr(!1),tr===_e.Gh){Be.next=21;break}return ze.ZP.error(Qt),Be.abrupt("return");case 21:En(kt.pages),sn(function(Yn){return f()(f()({},Yn),{},{page:kt.current,total:kt.total})}),jr(function(Yn){var Wt=ht.page===1?q()(kt.records):[].concat(q()(Yn),q()(kt.records));return Nn(f()(f()({},wn),{},{list:Wt})),Wt}),Be.next=31;break;case 26:Be.prev=26,Be.t0=Be.catch(1),In.current=!1,Rr(!1),En(100);case 31:case"end":return Be.stop()}},ye,null,[[1,26]])}));return function(Ge,ht){return Ze.apply(this,arguments)}}(),Ma=function(){var Ze=u()(v()().mark(function ye(Ge){var ht,Rt,tr;return v()().wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:return Qt.prev=0,Rr(!0),Rt=(ht=Pt.key)===null||ht===void 0?void 0:ht.toLowerCase(),Qt.next=5,je.ZP.collectList(Rt,Ge);case 5:tr=Qt.sent,jr(q()(tr.data)),Rr(!1),Qt.next=13;break;case 10:Qt.prev=10,Qt.t0=Qt.catch(0),Rr(!1);case 13:case"end":return Qt.stop()}},ye,null,[[0,10]])}));return function(Ge){return Ze.apply(this,arguments)}}(),da=function(){var Ze=u()(v()().mark(function ye(Ge){var ht,Rt,tr,kt;return v()().wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:if(Rt=(ht=Pt.key)===null||ht===void 0?void 0:ht.toLowerCase(),!Ge.collect){Ar.next=7;break}return Ar.next=4,je.ZP.unCollect(Rt,Ge.targetId);case 4:tr=Ar.sent,Ar.next=10;break;case 7:return Ar.next=9,je.ZP.collect(Rt,Ge.targetId);case 9:tr=Ar.sent;case 10:tr.code===_e.ZP.success&&(kt=nr.map(function(Be){return Ge.targetId===Be.targetId&&(Be.collect?(Be.collect=!1,Be.statistics&&(Be.statistics.collectCount=(Be.statistics.collectCount||1)-1)):(Be.collect=!0,Be.statistics&&(Be.statistics.collectCount=(Be.statistics.collectCount||0)+1))),Be}),jr(kt));case 11:case"end":return Ar.stop()}},ye)}));return function(Ge){return Ze.apply(this,arguments)}}(),Tn=function(){var Ze=u()(v()().mark(function ye(Ge){var ht,Rt;return v()().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(Pt.key!==Oe.qR.Table){kt.next=11;break}return kt.prev=1,ht={tableName:Ge.name,tableDescription:Ge.description,spaceId:Ut,icon:Ge.icon},kt.next=5,(0,vt.AY)(ht);case 5:Rt=kt.sent,et.history.push("/space/".concat(Ut,"/table/").concat(Rt.data)),kt.next=11;break;case 9:kt.prev=9,kt.t0=kt.catch(1);case 11:case"end":return kt.stop()}},ye,null,[[1,9]])}));return function(Ge){return Ze.apply(this,arguments)}}(),pa=function(ye){Gt(ye),De(ye)},Na=function(ye){var Ge={kw:ye,page:1,pageSize:20};Nr(ye),sn({page:1,pageSize:20}),jr([]),Dn(Pt.key,Ge)},on=function(ye,Ge){switch(En(100),ye){case"collect":Ma(Ge);break;case"library":$r.current=!0,Dn(Pt.key,f()(f()({},Ge),{},{justReturnSpaceData:!0}));break;default:Dn(Pt.key,Ge);break}},Ba=(0,et.useRequest)(Ne.ci,{manual:!0,debounceInterval:300,onSuccess:function(ye){ia(ye),Rr(!1)},onError:function(){Rr(!1)}}),ln=Ba.run,fa=function(){Rr(!0),ln({spaceId:Ut,publishType:st.sO.PAGE,buildRunning:!0})},Oa=function(ye){var Ge=Br?.filter(function(ht){return ht.name.includes(ye)})||[];ia(Ge)},as=function(ye){if(Nr(""),Ln(ye),Pt.key===Oe.qR.Page){fa();return}sn({page:1,pageSize:20}),jr([]),$r.current=!1,jn.current=null;var Ge={page:1,pageSize:20};Pt.key===Oe.qR.Knowledge&&ye!=="all"&&(Ge.dataType=Number(ye),jn.current=Number(ye)),Pt.key===Oe.qR.MCP&&ye==="custom"&&($r.current=!0),on(ye,Ge)},va=function(ye){if(ye){jn.current=null,$r.current=!1;var Ge=ye,ht=Re.find(function(Rt){return Rt.key===Ge});if(ht)if(Ln("all"),Nr(""),na(ht),ye===Oe.qR.Page){jr([]),Rr(!0),ln({spaceId:Ut,publishType:st.sO.PAGE,buildRunning:!0});return}else sn({page:1,pageSize:20}),En(100),Dn(ht.key,{page:1,pageSize:20})}},ma=(0,se.useCallback)(function(){if(!(_n==="collect"||In.current)){var Ze=ca.current;if(Ze){var ye=Ze.scrollHeight-Ze.scrollTop-Ze.clientHeight,Ge=nr.length>0&&ye<50&&xn.page<yn;if(Ge){var ht=xn.page+1,Rt={pageSize:20,page:ht};sn(function(tr){return f()(f()({},tr),{},{page:ht})}),Dn(Pt.key,Rt)}}}},[xn,_n,yn,In,Pt.key,nr.length]);(0,se.useEffect)(function(){var Ze=ca.current;if(Ot&&Ze)return Ze.addEventListener("scroll",ma),function(){Ze.removeEventListener("scroll",ma)}},[Ot,ma]),(0,se.useEffect)(function(){Ot&&setTimeout(function(){va(rr)},100)},[rr,Ot]);var Ua=(0,ce.jsxs)("div",{className:Bt("dis-left",Ue["created-title"]),children:[(0,ce.jsx)("h3",{className:Ue["created-title-text"],children:"\u6DFB\u52A0"}),(0,ce.jsx)(He.Z,{value:Pt.key,size:"large",onChange:va,options:Re.filter(function(Ze){return!(_!=null&&_.includes(Ze.key))}).map(function(Ze){return{label:Ze.label,value:Ze.key}}),className:Ue["segmented-style"]})]}),un=(0,se.useCallback)(function(Ze,ye){return sr?.some(function(Ge){return Ge.type===Ze.targetType&&Ge.targetId===Ze.targetId&&Ge.status===ye&&(Ge?.toolName||"")===(Ze.toolName||"")})},[sr]),ss=(0,se.useCallback)(function(Ze){return un(Ze,Oe.BQ.Added)},[un]),ha=(0,se.useCallback)(function(Ze,ye){return $===void 0?un(Ze,Oe.BQ.Loading):!!($&&$t?.targetId===Ze.targetId&&($t?.toolName||"")===(ye||""))},[un,$t,$]),ga=function(ye,Ge,ht){return(0,ce.jsx)(yt,{item:ye,index:Ge,getToolLoading:ha,selected:ht,onAddNode:pa,addedComponents:sr||[]},"".concat(ye.targetId,"-").concat(Ge))},Pn=function(ye){Gt({targetType:Oe.qR.Page,targetId:ye.projectId})},Za=function(ye,Ge){var ht=un({targetType:Oe.qR.Page,targetId:ye.projectId},Oe.BQ.Added),Rt=un({targetType:Oe.qR.Page,targetId:ye.projectId},Oe.BQ.Loading);return(0,ce.jsx)(Kr,{item:ye,index:Ge,onAddNode:Pn,isAddedState:ht,isCurrentLoading:Rt},"".concat(ye.projectId,"-").concat(Ge))},Ga=function(ye,Ge){var ht,Rt,tr=ha(ye),kt=ss(ye);return(0,ce.jsxs)("div",{className:Bt("dis-sb",Ue["list-item-style"]),children:[(0,ce.jsx)("img",{src:ye.icon||(0,Ie.Pk)(Pt.key),alt:"",className:Bt(Ue["left-image-style"])}),(0,ce.jsxs)("div",{className:Bt("flex-1",Ue["content-font"]),children:[(0,ce.jsx)("p",{className:Bt(Ue["label-font-style"],"text-ellipsis-2"),children:ye.name}),(0,ce.jsx)("p",{className:Bt(Ue["created-description-style"],"text-ellipsis"),children:ye.description}),(0,ce.jsx)("div",{className:Bt("dis-sb",Ue["count-div-style"]),children:(0,ce.jsxs)("div",{className:"dis-left",children:[(0,ce.jsx)("img",{src:((ht=ye.publishUser)===null||ht===void 0?void 0:ht.avatar)||i(78987),style:{borderRadius:"50%"},alt:"\u7528\u6237\u5934\u50CF"}),(0,ce.jsx)("span",{children:(Rt=ye.publishUser)===null||Rt===void 0?void 0:Rt.nickName}),(0,ce.jsx)(qe.Z,{type:"vertical"}),(0,ce.jsx)("span",{children:"\u53D1\u5E03\u4E8E".concat((0,nt.hK)(ye.created))}),![Oe.qR.Knowledge,Oe.qR.MCP].includes(Pt.key)&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(qe.Z,{type:"vertical"}),ye.collect&&(0,ce.jsx)(dt.Z,{className:Bt(Ue["collect-star"],Ue["icon-margin"]),onClick:function(){return da(ye)}}),!ye.collect&&(0,ce.jsx)(Ae.Z,{className:Bt(Ue["icon-margin"]),onClick:function(){return da(ye)}}),(0,ce.jsx)("span",{children:ye.statistics?ye.statistics.collectCount:0})]})]})})]}),(0,ce.jsx)($e.ZP,{color:"default",variant:"filled",onClick:function(){return pa(ye)},loading:tr,className:Bt(Ue["add-button"],kt&&Ue["add-button-added"]),disabled:tr?!1:kt,children:kt?"\u5DF2\u6DFB\u52A0":"\u6DFB\u52A0"})]},"".concat(ye.targetId,"-").concat(Ge))},Ka=function(ye,Ge){ye===Oe.qR.MCP?(0,le._x)(Ge):ye===Oe.qR.Page?(0,le.sK)(Ge):qr(!0)};return(0,ce.jsxs)(it.Z,{keyboard:!1,maskClosable:!1,open:Ot,footer:null,centered:!0,title:Ua,onCancel:Zt,className:Bt(Ue["created-modal-style"]),width:1096,children:[(0,ce.jsxs)("div",{className:Bt(Ue["created-container"],"dis-sb-start"),children:[(0,ce.jsxs)("div",{className:Bt(Ue["aside-style"]),children:[(0,ce.jsxs)("div",{className:Bt(Ue["aside-header"]),children:[(0,ce.jsx)(_t.Z,{allowClear:!0,value:kn,variant:"filled",placeholder:"\u641C\u7D22",prefix:(0,ce.jsx)(zt.Z,{}),onChange:function(ye){Nr(ye.target.value)},onClear:function(){Nr(""),Pt.key===Oe.qR.Page?fa():Dn(Pt.key,{page:1,pageSize:20})},onPressEnter:function(ye){var Ge=ye.currentTarget.value;ye.key==="Enter"&&(Pt.key===Oe.qR.Page?Oa(Ge):(Nn(f()(f()({},wn),{},{searching:!0})),Na(Ge)))}}),(0,ce.jsx)($e.ZP,{type:"primary",className:Bt(Ue["create-button"]),icon:(0,ce.jsx)(ut.Z,{}),block:!0,onClick:function(){return Ka(Pt.key,Ut)},children:"\u521B\u5EFA".concat(Pt.label)})]}),(0,ce.jsx)(Fe.Z,{className:Bt(Ue["aside-menu"]),onClick:function(ye){return as(ye.key)},selectedKeys:[_n],mode:"vertical",items:La()})]}),(0,ce.jsx)("div",{className:Bt(Ue["main-style"],"flex-1","overflow-y"),ref:ca,children:Pa?(0,ce.jsx)(qt.Z,{className:Bt("h-full")}):Pt.key===Oe.qR.Page&&Br!==null&&Br!==void 0&&Br.length?Br?.map(function(Ze,ye){return Za(Ze,ye)}):nr!=null&&nr.length?nr.map(function(Ze,ye){return Pt.key===Oe.qR.MCP?ga(Ze,ye,Pt):Ga(Ze,ye)}):(0,ce.jsx)("div",{className:Bt(Ue["created-list-empty-style"]),children:(0,ce.jsx)(Ce.Z,{description:wn.searching?"\u6682\u65E0\u6570\u636E\uFF0C\u8BF7\u91CD\u65B0\u641C\u7D22":"\u6682\u65E0\u6570\u636E"})})})]}),(0,ce.jsx)(Xe.Z,{onConfirm:Tn,onCancel:function(){return qr(!1)},open:Xr&&Pt.key===Oe.qR.Workflow,type:Qe.jA.Create,spaceId:Ut}),(0,ce.jsx)(bt.Z,{onConfirm:Tn,spaceId:Ut,onCancel:function(){return qr(!1)},open:Xr&&Pt.key===Oe.qR.Plugin,mode:Qe.jA.Create}),(0,ce.jsx)(ee.Z,{spaceId:Ut,onConfirm:Tn,onCancel:function(){return qr(!1)},open:Xr&&Pt.key===Oe.qR.Knowledge,mode:Qe.jA.Create}),(0,ce.jsx)(ot.Z,{spaceId:Ut,type:Oe.qR.Table,mode:Qe.jA.Create,Confirm:Tn,onCancel:function(){return qr(!1)},open:Xr&&Pt.key===Oe.qR.Table})]})},Lr=nn},80774:function(Yt,Ct,i){"use strict";var Ye=i(82092),v=i.n(Ye),St=i(48305),q=i.n(St),ue=i(46388),f=i(92973),Pe=i(26145),u=i(83352),Me=i(7098),I=i(10560),_e=i(87620),w=i(64799),je=i(92122),vt=i(26324),Ne=i(28190),Oe=i(63619),Qe=i(51430),st=i(75271),nt=i(48279),le=i(52676),Ie=function(Ae){var zt=Ae.loading,ut=Ae.mode,ze=ut===void 0?je.jA.Create:ut,He=Ae.type,qe=Ae.info,$e=Ae.open,it=Ae.onCancel,_t=Ae.Confirm,Fe=Ne.Z.useForm(),Ce=q()(Fe,1),ct=Ce[0],oe=(0,st.useState)(""),se=q()(oe,2),et=se[0],ot=se[1];(0,st.useEffect)(function(){$e&&qe&&(ct.setFieldsValue(qe),ot(qe.icon||""))},[$e,qe]);var ee=function(){var pt=v()(v()({},je.jA.Create,"\u521B\u5EFA"),je.jA.Update,"\u7F16\u8F91"),wt=v()(v()(v()(v()({},w.qR.Table,"\u6570\u636E\u8868"),w.qR.Knowledge,"\u77E5\u8BC6\u5E93"),w.qR.Plugin,"\u63D2\u4EF6"),w.qR.Workflow,"\u5DE5\u4F5C\u6D41");return"".concat(pt[ze]).concat(wt[He])},bt=function(){var pt=v()(v()(v()(v()({},w.qR.Table,ue),w.qR.Knowledge,f),w.qR.Plugin,Pe),w.qR.Workflow,u);return pt[He]},Xe=function(pt){_t(pt,He,ze)},qt=function(){ct.submit()};return(0,le.jsx)(nt.Z,{form:ct,title:ee(),open:$e,loading:zt,onCancel:it,onConfirm:qt,children:(0,le.jsxs)(Ne.Z,{form:ct,layout:"vertical",onFinish:Xe,requiredMark:vt.N,children:[(He===w.qR.Plugin||He===w.qR.Table)&&(0,le.jsx)(Ne.Z.Item,{name:"icon",children:(0,le.jsx)("div",{className:"dis-center",children:(0,le.jsx)(I.Z,{className:"upload-box",onUploadSuccess:function(pt){ct.setFieldValue("icon",pt),ot(pt)},imageUrl:ct.getFieldValue("icon")||et,defaultImage:bt(),svgIconName:"icons-workspace-table"})})}),(0,le.jsx)(Ne.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},{validator:function(pt,wt){return!wt||wt?.length<=30?Promise.resolve():wt?.length>30?Promise.reject(new Error("\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26!")):Promise.reject(new Error("\u8BF7\u8F93\u5165\u540D\u79F0!"))}}],children:(0,le.jsx)(Oe.Z,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",showCount:!0,maxLength:30})}),(0,le.jsx)(Ne.Z.Item,{name:"description",label:"\u63CF\u8FF0",className:"position-relative",children:(0,le.jsx)(Oe.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",autoSize:{minRows:3,maxRows:6},maxLength:1e4,showCount:!0,className:"dispose-textarea-count"})}),(He===w.qR.Workflow||He===w.qR.Knowledge)&&(0,le.jsx)(Ne.Z.Item,{name:"icon",children:(0,le.jsx)("div",{children:(0,le.jsx)(I.Z,{className:"upload-box",onUploadSuccess:function(pt){ct.setFieldValue("icon",pt)},imageUrl:et,defaultImage:bt(),svgIconName:"icons-workspace-knowledge"})})}),He===w.qR.Plugin&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(Ne.Z.Item,{shouldUpdate:!0,label:"\u5DE5\u5177\u521B\u5EFA\u65B9\u5F0F",name:"type",children:(0,le.jsx)(Qe.ZP.Group,{options:_e.B1})}),(0,le.jsx)(Ne.Z.Item,{shouldUpdate:!0,children:function(){return ct.getFieldValue("type")==="CODE"&&(0,le.jsx)(Ne.Z.Item,{label:"IDE \u8FD0\u884C\u65F6",name:"codeLang",children:(0,le.jsx)(Me.Z,{options:_e._n})})}})]})]})})};Ct.Z=Ie},57209:function(Yt,Ct,i){"use strict";i.d(Ct,{B$:function(){return q},E1:function(){return St},Mu:function(){return f},ZW:function(){return v},qb:function(){return ue}});var Ye=i(75076),v=[{value:Ye.wI.Import_Project,label:"\u5BFC\u5165\u9879\u76EE"},{value:Ye.wI.Online_Develop,label:"\u5728\u7EBF\u5F00\u53D1"}],St=[{value:Ye.Yg.All_Type,label:"\u6240\u6709\u7C7B\u578B"},{value:Ye.Yg.AGENT,label:"\u667A\u80FD\u5E94\u7528"},{value:Ye.Yg.PAGE,label:"\u9875\u9762\u7EC4\u4EF6"}],q=[{type:Ye.ai.Dev,label:"\u5F00\u53D1\u8C03\u8BD5"},{type:Ye.ai.Production,label:"\u6B63\u5F0F\u73AF\u5883"}],ue=[{value:Ye.Tv.Reverse_Proxy_Config,label:"\u53CD\u5411\u4EE3\u7406\u914D\u7F6E"},{value:Ye.Tv.Path_Params_Config,label:"\u8DEF\u5F84\u53C2\u6570\u914D\u7F6E"},{value:Ye.Tv.Auth_Config,label:"\u8BA4\u8BC1\u914D\u7F6E"},{value:Ye.Tv.Page_Preview,label:"\u9875\u9762\u9884\u89C8"},{value:Ye.Tv.Copy_To_Space,label:"\u590D\u5236\u5230\u7A7A\u95F4"},{value:Ye.Tv.Delete,label:"\u5220\u9664"}],f=[{value:Ye.sO.PAGE,label:"\u53D1\u5E03\u6210\u7EC4\u4EF6"},{value:Ye.sO.AGENT,label:"\u53D1\u5E03\u6210\u5E94\u7528"}]},76571:function(Yt,Ct,i){"use strict";var Ye=i(75271),v=function(q){var ue="drawer-scroll-hidden";if(!document.getElementById("drawer-scroll-style")){var f=document.createElement("style");f.id="drawer-scroll-style",f.innerHTML=`
        .`.concat(ue,` {
          overflow-x: hidden !important;
        }
      `),document.head.appendChild(f)}(0,Ye.useEffect)(function(){q?(document.body.classList.add(ue),document.documentElement.classList.add(ue)):setTimeout(function(){document.body.classList.remove(ue),document.documentElement.classList.remove(ue)},400)},[q])};Ct.Z=v},27689:function(Yt,Ct,i){"use strict";i.d(Ct,{K:function(){return _e}});var Ye=i(90228),v=i.n(Ye),St=i(87999),q=i.n(St),ue=i(48305),f=i.n(ue),Pe=i(92068),u=i(14334),Me=i(75271),I=i(87453),_e=function(){var je=(0,Me.useState)(Pe.unifiedThemeService.getCurrentData()),vt=f()(je,2),Ne=vt[0],Oe=vt[1],Qe=(0,Me.useState)(!1),st=f()(Qe,2),nt=st[0],le=st[1],Ie=(0,I.useModel)("tenantConfigInfo"),dt=Ie.tenantConfigInfo;(0,Me.useEffect)(function(){var bt=function(qt){Oe(qt),le(!1)};return Pe.unifiedThemeService.addListener(bt),function(){Pe.unifiedThemeService.removeListener(bt)}},[]);var Ae=(0,Me.useCallback)(function(bt){return q()(v()().mark(function Xe(){var qt=arguments;return v()().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return le(!0),pt.prev=1,pt.next=4,bt.apply(void 0,qt);case 4:pt.next=11;break;case 6:throw pt.prev=6,pt.t0=pt.catch(1),console.error("\u4E3B\u9898\u66F4\u65B0\u5931\u8D25:",pt.t0),le(!1),pt.t0;case 11:case"end":return pt.stop()}},Xe,null,[[1,6]])}))},[]),zt=Ae(Pe.unifiedThemeService.updatePrimaryColor.bind(Pe.unifiedThemeService)),ut=Ae(Pe.unifiedThemeService.updateAntdTheme.bind(Pe.unifiedThemeService)),ze=Ae(Pe.unifiedThemeService.updateNavigationStyle.bind(Pe.unifiedThemeService)),He=Ae(Pe.unifiedThemeService.updateLayoutStyle.bind(Pe.unifiedThemeService)),qe=Ae(Pe.unifiedThemeService.updateBackground.bind(Pe.unifiedThemeService)),$e=Ae(Pe.unifiedThemeService.updateLanguage.bind(Pe.unifiedThemeService)),it=(0,Me.useCallback)(q()(v()().mark(function bt(){var Xe;return v()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Xe=Ne.antdTheme==="light"?"dark":"light",Ue.next=3,ut(Xe);case 3:case"end":return Ue.stop()}},bt)})),[Ne.antdTheme,ut]),_t=(0,Me.useCallback)(q()(v()().mark(function bt(){var Xe;return v()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Xe=Ne.layoutStyle===u.B.DARK?u.B.LIGHT:u.B.DARK,Ue.next=3,He(Xe);case 3:case"end":return Ue.stop()}},bt)})),[Ne.layoutStyle,He]),Fe=(0,Me.useCallback)(q()(v()().mark(function bt(){var Xe;return v()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Xe=Ne.navigationStyle===u.F.STYLE1?u.F.STYLE2:u.F.STYLE1,Ue.next=3,ze(Xe);case 3:case"end":return Ue.stop()}},bt)})),[Ne.navigationStyle,ze]),Ce=(0,Me.useCallback)(q()(v()().mark(function bt(){var Xe;return v()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Xe=Ne.language==="zh-CN"?"en-US":"zh-CN",Ue.next=3,$e(Xe);case 3:case"end":return Ue.stop()}},bt)})),[Ne.language,$e]),ct=Ae(Pe.unifiedThemeService.resetToDefault.bind(Pe.unifiedThemeService)),oe=Ne.antdTheme==="dark",se=Ne.layoutStyle===u.B.DARK,et=Ne.navigationStyle===u.F.STYLE2,ot=Ne.language==="zh-CN",ee=(0,Me.useMemo)(function(){return Pe.unifiedThemeService.getExtraColors()},[dt]);return{data:Ne,isLoading:nt,updatePrimaryColor:zt,updateAntdTheme:ut,updateNavigationStyle:ze,updateLayoutStyle:He,updateBackground:qe,updateLanguage:$e,toggleAntdTheme:it,toggleNavigationTheme:_t,toggleNavigationStyle:Fe,toggleLanguage:Ce,resetToDefault:ct,primaryColor:Ne.primaryColor,antdTheme:Ne.antdTheme,navigationStyle:Ne.navigationStyle,layoutStyle:Ne.layoutStyle,backgroundId:Ne.backgroundId,language:Ne.language,isDarkMode:oe,isNavigationDark:se,isNavigationExpanded:et,isChineseLanguage:ot,extraColors:ee}};Ct.Z=_e},68593:function(Yt,Ct,i){"use strict";i.r(Ct),i.d(Ct,{default:function(){return il}});var Ye=i(15558),v=i.n(Ye),St=i(335),q=i.n(St),ue=i(26068),f=i.n(ue),Pe=i(90228),u=i.n(Pe),Me=i(87999),I=i.n(Me),_e=i(48305),w=i.n(_e),je=i(63741),vt=i(59261),Ne=i(88459),Oe=i(56716),Qe=i(27791),st={DEFAULT_MESSAGES:[{id:"1",type:"ai",content:"\u4F60\u597D\uFF01\u6211\u662FAI\u52A9\u624B\uFF0C\u53EF\u4EE5\u5E2E\u4F60\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u3001\u95EE\u9898\u89E3\u7B54\u7B49\u3002\u6709\u4EC0\u4E48\u53EF\u4EE5\u5E2E\u52A9\u4F60\u7684\u5417\uFF1F",timestamp:new Date}],DEFAULT_USER_ID:"app-dev-user",MODEL_NAME:"deepseek-v3",SSE_HEARTBEAT_INTERVAL:3e4,REQUEST_ID_PREFIX:"req_",SESSION_ID_PREFIX:"session_"},nt={SUPPORTED_EXTENSIONS:["jpg","jpeg","png","gif","bmp","webp","svg","ico","tiff","ts","tsx","js","jsx","mjs","cjs","css","less","scss","sass","html","htm","vue","json","jsonc","yaml","yml","xml","toml","ini","py","java","c","cpp","cs","php","rb","go","rs","swift","kt","scala","sh","bash","zsh","fish","ps1","bat","sql","dockerfile","makefile","txt","md","markdown","log","csv","tsv","rtf"],IGNORED_FILE_PATTERNS:[/^\./,/^\.DS_Store$/,/^Thumbs\.db$/,/\.tmp$/,/\.bak$/],DEFAULT_FILE_LANGUAGE:"Plain Text",FALLBACK_SIZE:0,TREE_ROOT_LEVEL:0,INDENT_SIZE:16,REQUEST_ID_PREFIX:"req_",SESSION_ID_PREFIX:"session_"},le={DEFAULT_PORT_RANGE:[3e3,4e3],STATUS_MESSAGES:{STARTING:"\u6B63\u5728\u542F\u52A8\u5F00\u53D1\u73AF\u5883...",RUNNING:"\u5F00\u53D1\u73AF\u5883\u8FD0\u884C\u4E2D",STOPPED:"\u5F00\u53D1\u73AF\u5883\u5DF2\u505C\u6B62",ERROR:"\u5F00\u53D1\u73AF\u5883\u542F\u52A8\u5931\u8D25"},API_TIMEOUT:1e4,SSE_HEARTBEAT_INTERVAL:3e4},Ie={MODAL_WIDTHS:{UPLOAD_PROJECT:500,UPLOAD_SINGLE_FILE:500},LOADING_MESSAGES:{FILE_CONTENT:"\u6B63\u5728\u52A0\u8F7D\u6587\u4EF6\u5185\u5BB9...",FILE_TREE:"\u6B63\u5728\u52A0\u8F7D\u6587\u4EF6\u6811...",UPLOADING:"\u6B63\u5728\u4E0A\u4F20\u6587\u4EF6..."},ANIMATION_DURATION:300,DEBOUNCE_DELAY:300,PRELOAD_DELAY:1e3},dt={DEFAULT_SETTINGS:{theme:"light",fontSize:14,tabSize:2},MONACO_OPTIONS:{minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!0}},Ae={SEND_MESSAGE:"Enter",SAVE_FILE:"s",RESTART_DEV:"r",MODIFIER_KEYS:{CTRL:"ctrlKey",META:"metaKey"}},zt={AVAILABLE_VERSIONS:["v1","v2","v3","v4","v5"],DEFAULT_VERSION:"v4",READ_ONLY_MESSAGE:"\u65E7\u7248\u672C\u4E3A\u53EA\u8BFB\u6A21\u5F0F\u3002\u6062\u590D\u6216\u5207\u6362\u5230\u6700\u65B0\u7248\u672C\u4EE5\u8FDB\u884C\u7F16\u8F91\u3002",PREVIEW_DISABLED_MESSAGE:"\u7248\u672C\u9884\u89C8\u6A21\u5F0F\u4E0B\u65E0\u6CD5\u67E5\u770B\u9875\u9762\u9884\u89C8"},ut={ALLOWED_PROJECT_TYPES:[".zip",".tar.gz",".rar"],MAX_FILE_SIZE:50*1024*1024},ze={NO_PROJECT_ID:"\u8BF7\u5148\u521B\u5EFA\u6216\u9009\u62E9\u9879\u76EE",EMPTY_FILE_PATH:"\u8BF7\u8F93\u5165\u6587\u4EF6\u8DEF\u5F84",NO_FILE_SELECTED:"\u8BF7\u9009\u62E9\u6587\u4EF6",UPLOAD_FAILED:"\u4E0A\u4F20\u5931\u8D25",LOAD_FILE_FAILED:"\u52A0\u8F7D\u6587\u4EF6\u5931\u8D25",SAVE_FILE_FAILED:"\u4FDD\u5B58\u6587\u4EF6\u5931\u8D25",DEV_SERVER_START_FAILED:"\u5F00\u53D1\u73AF\u5883\u542F\u52A8\u5931\u8D25",CHAT_SEND_FAILED:"\u53D1\u9001\u6D88\u606F\u5931\u8D25"},He={FILE_SAVED:"\u6587\u4EF6\u5DF2\u4FDD\u5B58",FILE_UPLOADED:"\u6587\u4EF6\u4E0A\u4F20\u6210\u529F",PROJECT_UPLOADED:"\u9879\u76EE\u4E0A\u4F20\u5E76\u542F\u52A8\u6210\u529F",DEV_SERVER_STARTED:"\u5F00\u53D1\u73AF\u5883\u542F\u52A8\u6210\u529F",CHAT_CANCELLED:"\u5DF2\u53D6\u6D88AI\u4EFB\u52A1"},qe=i(59934),$e=i(61265),it=i(82092),_t=i.n(it),Fe=function(c){return c.RUNNING="running",c.STOPPED="stopped",c.STARTING="starting",c.ERROR="error",c}({}),Ce=function(c){return c.SESSION_PROMPT_START="sessionPromptStart",c.SESSION_PROMPT_END="sessionPromptEnd",c.AGENT_SESSION_UPDATE="agentSessionUpdate",c.HEARTBEAT="heartbeat",c}({}),ct=function(c){return c[c.NOT_DEPLOYED=-1]="NOT_DEPLOYED",c[c.DEPLOYED=1]="DEPLOYED",c}({}),oe=function(c){return c.REVERSE_PROXY="REVERSE_PROXY",c.ONLINE_DEPLOY="ONLINE_DEPLOY",c}({}),se=function(c){return c.NORMAL="NORMAL",c.INFO="INFO",c.WARN="WARN",c.ERROR="ERROR",c}({}),et=i(16483),ot=i.n(et),ee=function(e){var r=[/ERROR/i,/FATAL/i,/Exception/i,/Failed/i,/Internal server error/i,/Module not found/i,/Can't resolve/i,/ELIFECYCLE/i,/npm ERR!/i,/PostCSS Error/i,/SyntaxError/i,/ReferenceError/i,/TypeError/i],s=r.some(function(a){return a.test(e)});return s?{level:se.ERROR,isError:!0}:/WARN/i.test(e)||/Warning/i.test(e)?{level:se.WARN,isError:!1}:/ready in|Network:|Local:|VITE|/i.test(e)?{level:se.INFO,isError:!1}:{level:se.NORMAL,isError:!1}},bt=function(e){var r=e.match(/\[(\d{4}\/\d{2}\/\d{2}\s+\d{2}:\d{2}:\d{2})\]/);return r?.[1]},Xe=function(e){return e.isError===!0||e.level===se.ERROR},qt=function(e,r){var s=[],a=e[r];if(!a||!Xe(a))return s;s.push(a);for(var o=r+1;o<e.length;o++){var l=e[o];if(l.timestamp&&l.timestamp!==a.timestamp)break;if(l.content.startsWith("    ")||l.content.startsWith("	"))s.push(l);else break}return s},Ue=function(e,r){var s=e[r];if(!s||!Xe(s))return"";var a=Math.max(0,r-25),o=Math.min(e.length,r+25),l=e.slice(a,o),p=qt(e,r),d=`\u{1F6A8} \u68C0\u6D4B\u5230\u5F00\u53D1\u670D\u52A1\u5668\u9519\u8BEF\uFF0C\u76F8\u5173\u65E5\u5FD7\u5982\u4E0B\uFF1A

`;return d+=`**\u9519\u8BEF\u6458\u8981\uFF1A**
`,d+="- \u9519\u8BEF\u884C\u53F7: ".concat(s.line,`
`),d+="- \u65F6\u95F4: ".concat(s.timestamp||"\u672A\u77E5",`
`),d+="- \u9519\u8BEF\u5185\u5BB9: ".concat(s.content,`

`),p.length>1&&(d+=`**\u9519\u8BEF\u5806\u6808\uFF1A**
`,p.forEach(function(y){d+="".concat(y.line,"| ").concat(y.content,`
`)}),d+=`
`),d+=`**\u4E0A\u4E0B\u6587\u65E5\u5FD7\uFF08\u6700\u8FD150\u884C\uFF09\uFF1A**
`,l.forEach(function(y){var M=Xe(y)?"\u274C":y.level===LogLevel.WARN?"\u26A0\uFE0F":"\u2139\uFE0F";d+="".concat(M," ").concat(y.line,"| ").concat(y.content,`
`)}),d+=`
\u8BF7\u5206\u6790\u4E0A\u8FF0\u9519\u8BEF\u5E76\u63D0\u4F9B\u4FEE\u590D\u5EFA\u8BAE\u3002`,d},pt=function(e){if(!Xe(e))return"";var r=e.content.match(/File:\s+(.+?)(?:\s|$)/),s=r?.[1]||"",a=e.content.match(/(ERROR|FATAL|Exception|Failed|Internal server error|Module not found|Can't resolve|ELIFECYCLE|PostCSS Error|SyntaxError|ReferenceError|TypeError)/i),o=a?.[1]||"UNKNOWN",l=e.content.substring(0,100).replace(/\s+/g," ").trim();return"".concat(s,"-").concat(o,"-").concat(l)},wt=function(e,r){var s=bt(e),a=ee(e),o=a.level,l=a.isError,p={line:r,timestamp:s,level:o,content:e,isError:l};return l&&(p.errorFingerprint=pt(p)),p},ce=function(e){return e.filter(Xe)},Jt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,s=ce(e);return s.slice(-r)},cr=function(e,r){var s=ce(e),a=ce(r),o=new Set(a.map(function(l){return l.line}));return s.filter(function(l){return!o.has(l.line)})},Sr=function(e){var r=_defineProperty(_defineProperty(_defineProperty(_defineProperty({},LogLevel.NORMAL,0),LogLevel.INFO,0),LogLevel.WARN,0),LogLevel.ERROR,0);return e.forEach(function(s){r[s.level]++}),r},dr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a="";return s&&(a+="".concat(e.line,"| ")),r&&e.timestamp&&(a+="[".concat(e.timestamp,"] ")),a+=e.content,a},Tt=function(e,r){var s=r.filter(function(p){return p.level===se.ERROR}).length,a=r.filter(function(p){return p.level===se.WARN}).length,o=r.filter(function(p){return p.level===se.INFO}).length,l=r.filter(function(p){return p.level===se.NORMAL}).length;return{timestamp:e||"\u672A\u77E5\u65F6\u95F4",logs:r,errorCount:s,warnCount:a,infoCount:o,normalCount:l}},yr=function(e){var r=[],s=[],a="";return e.forEach(function(o){var l=bt(o.content);l&&(s.length>0&&(r.push(Tt(a,s)),s=[]),a=l),s.push(o)}),s.length>0&&r.push(Tt(a,s)),r},Jr=function(e){if(e.includes("/")&&e.includes(":"))return e;try{var r=ot()(e);if(r.isValid())return r.format("YYYY/MM/DD HH:mm:ss")}catch(s){console.warn("\u65F6\u95F4\u6233\u89E3\u6790\u5931\u8D25:",e,s)}return e},yt=i(87453),pr=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/start-dev",{method:"POST",data:{projectId:r}}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Pr=null,rn=null,Kr=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/restart-dev",{method:"POST",data:{projectId:r}}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Bt=function(){var c=I()(u()().mark(function e(r,s){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,yt.request)("/api/custom-page/build",{method:"POST",skipErrorHandler:!0,data:{projectId:r,publishType:s}}));case 1:case"end":return o.stop()}},e)}));return function(r,s){return c.apply(this,arguments)}}(),hn=null,Hr=function(){var c=I()(u()().mark(function e(r){var s,a,o,l,p,d,y;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return s=r.file,a=r.projectName,o=r.projectId,l=r.spaceId,p=r.projectDesc,d=r.icon,y=new FormData,y.append("file",s),y.append("projectName",a),o&&y.append("projectId",o),l&&y.append("spaceId",l.toString()),p&&y.append("projectDesc",p),d&&y.append("icon",d),C.abrupt("return",(0,yt.request)("/api/custom-page/upload-and-start",{method:"POST",data:y}));case 9:case"end":return C.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),nn=function(){var c=I()(u()().mark(function e(r){var s,a,o,l;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=r.file,a=r.projectId,o=r.filePath,l=new FormData,l.append("file",s),l.append("projectId",a),l.append("filePath",o),d.abrupt("return",(0,yt.request)("/api/custom-page/upload-single-file",{method:"POST",data:l}));case 6:case"end":return d.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Lr=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/get-project-content?projectId=".concat(encodeURIComponent(r.toString())),{method:"GET"}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Fr=function(){var c=I()(u()().mark(function e(r,s){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,yt.request)("/api/custom-page/file-content",{method:"POST",data:{projectId:r,filePath:s}}));case 1:case"end":return o.stop()}},e)}));return function(r,s){return c.apply(this,arguments)}}(),jt=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/keepalive",{method:"POST",data:{projectId:r}}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Ot=null,Zt=function(){var c=I()(u()().mark(function e(r,s){var a;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=s.map(function(p){return f()(f()({},p),{},{contents:p.contents?encodeURIComponent(p.contents):p.contents})}),l.abrupt("return",(0,yt.request)("/api/custom-page/submit-files-update",{method:"POST",data:{projectId:r,files:a}}));case 2:case"end":return l.stop()}},e)}));return function(r,s){return c.apply(this,arguments)}}(),rr=null,Gt=function(){var c=I()(u()().mark(function e(r,s){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.info(s),o.abrupt("return",(0,yt.request)("/api/custom-page/ai-session-cancel",{method:"POST",data:{project_id:r}}));case 2:case"end":return o.stop()}},e)}));return function(r,s){return c.apply(this,arguments)}}(),sr=function(){var c=I()(u()().mark(function e(r,s){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,yt.request)("/api/custom-page/ai-chat-terminate",{method:"POST",data:{project_id:r,session_id:s}}));case 1:case"end":return o.stop()}},e)}));return function(r,s){return c.apply(this,arguments)}}(),fr=null,$=null,be=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/get-project-info?projectId=".concat(encodeURIComponent(r)),{method:"GET"}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Re=function(){var c=I()(u()().mark(function e(r,s){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,yt.request)("/api/custom-page/get-project-content-by-version?projectId=".concat(encodeURIComponent(r),"&codeVersion=").concat(s),{method:"GET"}));case 1:case"end":return o.stop()}},e)}));return function(r,s){return c.apply(this,arguments)}}(),_=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/export-project?projectId=".concat(encodeURIComponent(r)),{method:"GET",responseType:"blob",getResponse:!0}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Mt=function(){var c=I()(u()().mark(function e(r){var s;return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("\u{1F4E4} [API] \u8C03\u7528\u4FDD\u5B58\u4F1A\u8BDD\u63A5\u53E3:",{url:"/api/custom-page/save-conversation",method:"POST",params:r}),o.next=3,(0,yt.request)("/api/custom-page/save-conversation",{method:"POST",data:r});case 3:return s=o.sent,console.log("\u{1F4E5} [API] \u4FDD\u5B58\u4F1A\u8BDD\u63A5\u53E3\u54CD\u5E94:",s),o.abrupt("return",s);case 6:case"end":return o.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Ut=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/page-query-conversations",{method:"POST",data:{queryFilter:{projectId:r.projectId},current:1,pageSize:20}}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Mr=null,Qr=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/agent/stop?project_id=".concat(r),{method:"POST"}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Xr=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/bind-data-source",{method:"POST",data:r}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),qr=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/unbind-data-source",{method:"POST",data:r}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),gn=function(){var c=I()(u()().mark(function e(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,yt.request)("/api/custom-page/list-models?projectId=".concat(r),{method:"GET"}));case 1:case"end":return a.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Rn=function(){var c=I()(u()().mark(function e(r){var s,a,o,l,p=arguments;return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=p.length>1&&p[1]!==void 0?p[1]:1,y.next=3,(0,yt.request)("/api/custom-page/get-dev-log",{method:"POST",data:{projectId:Number(r),startIndex:a}});case 3:return o=y.sent,l=((s=o.data)===null||s===void 0||(s=s.logs)===null||s===void 0?void 0:s.length)>0?o.data.logs.map(function(M){return!M.level||!M.isError?wt(M.content,M.line):M}):[],y.abrupt("return",f()(f()({},o),{},{data:f()(f()({},o.data),{},{logs:l,hasMore:o.data.startIndex+o.data.logs.length<o.data.totalLines})}));case 6:case"end":return y.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),kn=function(e){var r=[],s=new Map,a=e.filter(function(l){var p=l.name.split("/").pop();return!nt.IGNORED_FILE_PATTERNS.some(function(d){return d.test(p||"")})});a.forEach(function(l){var p,d=l.name.split("/").filter(Boolean),y=d[d.length-1],M=y.includes("."),C={id:l.name,name:y,type:M?"file":"folder",path:l.name,children:[],binary:l.binary||!1,size:l.size||l.sizeExceeded?nt.FALLBACK_SIZE:((p=l.contents)===null||p===void 0?void 0:p.length)||nt.FALLBACK_SIZE,status:l.status||null,fullPath:l.name,parentPath:d.slice(0,-1).join("/")||null,content:l.contents||"",lastModified:Date.now()};if(s.set(l.name,C),d.length>1)for(var R=d.length-2;R>=0;R--){var P=d.slice(0,R+1).join("/"),A=d[R];if(!s.has(P)){var k={id:P,name:A,type:"folder",path:P,children:[],parentPath:R>0?d.slice(0,R).join("/"):null,lastModified:Date.now()};s.set(P,k)}}}),s.forEach(function(l){if(l.parentPath&&s.has(l.parentPath)){var p,d=s.get(l.parentPath);if(!((p=d.children)!==null&&p!==void 0&&p.find(function(M){return M.id===l.id}))){var y;(y=d.children)===null||y===void 0||y.push(l)}}else l.parentPath||r.find(function(M){return M.id===l.id})||r.push(l)});var o=function(p){return p.sort(function(d,y){return d.type!==y.type?d.type==="folder"?-1:1:d.name.localeCompare(y.name)})};return o(r).map(function(l){return f()(f()({},l),{},{children:l.children?o(l.children):void 0})})},Nr=function(e){var r=[],s=function a(o){var l=q()(o),p;try{for(l.s();!(p=l.n()).done;){var d=p.value;d.type==="file"&&r.push({name:d.id,binary:d.binary||!1,sizeExceeded:d.sizeExceeded||!1,contents:d.content||"",size:d.size||nt.FALLBACK_SIZE,status:d.status||null}),d.children&&d.children.length>0&&a(d.children)}}catch(y){l.e(y)}finally{l.f()}};return s(e),r},ra=function c(e){var r=_createForOfIteratorHelper(e),s;try{var a=function(){var p=s.value;if(p.type==="file"){var d=p.name||p.id||"";return FILE_CONSTANTS.IGNORED_FILE_PATTERNS.some(function(M){return M.test(d)})||d.startsWith(".")?0:{v:p.id}}if(p.children&&p.children.length>0){var y=c(p.children);if(y)return{v:y}}},o;for(r.s();!(s=r.n()).done;)if(o=a(),o!==0&&o)return o.v}catch(l){r.e(l)}finally{r.f()}return null},Wr=function c(e,r){var s=q()(r),a;try{for(s.s();!(a=s.n()).done;){var o=a.value;if(o.id===e)return o;if(o.children){var l=c(e,o.children);if(l)return l}}}catch(p){s.e(p)}finally{s.f()}return null},Pt=function c(e,r){var s=_createForOfIteratorHelper(r),a;try{for(s.s();!(a=s.n()).done;){var o=a.value;if(o.id===e)return o.name;if(o.children){var l=c(e,o.children);if(l)return"".concat(o.name,"/").concat(l)}}}catch(p){s.e(p)}finally{s.f()}return null},na=function(c){return c.SUPPORTED="supported",c.UNSUPPORTED="unsupported",c}({}),Cn=function(e){var r,s=((r=e.split(".").pop())===null||r===void 0?void 0:r.toLowerCase())||"",a=["jpg","jpeg","png","gif","bmp","webp","svg","ico","tiff"];return a.includes(s)},an=function(e){var r;if(!e||typeof e!="string")return!1;var s=((r=e.split(".").pop())===null||r===void 0?void 0:r.toLowerCase())||"";return nt.SUPPORTED_EXTENSIONS.includes(s)},xn=function(e){var r,s=(r=e.split(".").pop())===null||r===void 0?void 0:r.toLowerCase();switch(s){case"tsx":case"jsx":return"TypeScript React";case"ts":return"TypeScript";case"js":case"mjs":case"cjs":return"JavaScript";case"css":return"CSS";case"less":return"Less";case"scss":return"SCSS";case"sass":return"Sass";case"html":case"htm":return"HTML";case"vue":return"Vue (HTML)";case"xml":return"XML";case"json":return"JSON";case"jsonc":return"JSON";case"yaml":case"yml":return"YAML";case"toml":return"TOML";case"ini":return"INI";case"md":case"markdown":return"Markdown";case"txt":return FILE_CONSTANTS.DEFAULT_FILE_LANGUAGE;case"php":return"PHP";case"py":return"Python";case"java":return"Java";case"go":return"Go";case"rs":return"Rust";case"cpp":case"cc":case"cxx":return"C++";case"c":return"C";case"cs":return"C#";case"vb":return"VB";case"swift":return"Swift";case"kt":return"Kotlin";case"scala":return"Scala";case"rb":return"Ruby";case"dart":return"Dart";case"lua":return"Lua";case"r":return"R";case"sh":case"bash":case"zsh":return"Shell";case"ps1":return"PowerShell";case"bat":case"cmd":return"Batch";case"sql":return"SQL";case"dockerfile":return"Dockerfile";case"makefile":return"Makefile";case"gitignore":case"dockerignore":return FILE_CONSTANTS.DEFAULT_FILE_LANGUAGE;case"log":return"Log";case"csv":return"CSV";default:return FILE_CONSTANTS.DEFAULT_FILE_LANGUAGE}},sn=function(){return"".concat(FILE_CONSTANTS.REQUEST_ID_PREFIX).concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,9))},aa=function(){return"".concat(FILE_CONSTANTS.SESSION_ID_PREFIX).concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,9))},Sn=function(e,r){var s;return function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];clearTimeout(s),s=setTimeout(function(){return e.apply(void 0,o)},r)}},yn=function(e,r){return e!==r},En=function(e){if(e===0)return"0 B";var r=1024,s=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,a)).toFixed(2))+" "+s[a]},Wn=function(e){if(!e||typeof e!="string")return!1;if(e.startsWith("data:"))return/^data:image\/[a-zA-Z0-9]+;base64,/.test(e);var r=/^[A-Za-z0-9+/]*={0,2}$/;return r.test(e)&&e.length>0&&e.length%4===0},An=function(e){if(!e||typeof e!="string")return!1;if(e.startsWith("data:image/"))return/^data:image\/[a-zA-Z0-9]+;base64,/.test(e);if(Wn(e)){var r=["/9j/","iVBORw0KGgo","R0lGOD","UklGR","Qk0="];return r.some(function(s){return e.startsWith(s)})}return!1},_n=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"image/png";return!e||typeof e!="string"?"":e.startsWith("data:")?e:"data:".concat(r,";base64,").concat(e)},Ln=function(e){if(!e||typeof e!="string")return"image/png";if(e.startsWith("data:")){var r=e.match(/^data:([^;]+);base64,/);return r?r[1]:"image/png"}return e.startsWith("/9j/")?"image/jpeg":e.startsWith("iVBORw0KGgo")?"image/png":e.startsWith("R0lGOD")?"image/gif":e.startsWith("UklGR")?"image/webp":e.startsWith("Qk0=")?"image/bmp":"image/png"},Mn=function(e,r){if(!e)return r||"";if(An(e)){var s=Ln(e);return _n(e,s)}return e},bn=i(95468),$t=i(14719),De=i(41249),n=i(75271),mt=function(e,r){var s=JSON.stringify(r),a=`

<div><appdev-plan data="`.concat(encodeURIComponent(s),`"></appdev-plan></div>

`),o="".concat(e).concat(a);return o},nr=function(e,r,s){var a=JSON.stringify(s),o=`

<div><appdev-toolcall toolcallid="`.concat(r,'" type="tool_call" data="').concat(encodeURIComponent(a),`"></appdev-toolcall></div>

`),l="".concat(e).concat(o);return l},jr=function(e,r,s){var a=JSON.stringify(s),o=`

<div><appdev-toolcall toolcallid="`.concat(r,'" type="tool_call_update" data="').concat(encodeURIComponent(a),`"></appdev-toolcall></div>

`),l="".concat(e).concat(o);return l},er=i(64799),sa=function(e){var r,s,a,o,l,p,d,y,M,C,R=["install_package","uninstall_package","update_package","add_dependency","remove_dependency","update_dependency"],P=e.toolName||"",A=((r=e.rawInput)===null||r===void 0?void 0:r.command)||"",k=((s=e.rawInput)===null||s===void 0?void 0:s.description)||"",F=e.kind||"",j=e.title||"",Z=((a=e.rawInput)===null||a===void 0?void 0:a.file_path)||"",b=((o=e.rawInput)===null||o===void 0||(o=o.new_string)===null||o===void 0?void 0:o.includes("package.json"))||((l=e.rawInput)===null||l===void 0||(l=l.old_string)===null||l===void 0?void 0:l.includes("package.json")),g=e.content||[],D=g.some(function(U){return U.type==="diff"&&U.path&&U.path.includes("package.json")}),x=((p=e.rawInput)===null||p===void 0?void 0:p.dependencies)||((d=e.rawInput)===null||d===void 0?void 0:d.devDependencies)||((y=e.rawInput)===null||y===void 0?void 0:y.peerDependencies)||((M=e.rawInput)===null||M===void 0?void 0:M.package_name)||((C=e.rawInput)===null||C===void 0?void 0:C.package_version);return R.some(function(U){return P.includes(U)})||F==="install"||F==="uninstall"||F==="update"||A.includes("npm install")||A.includes("npm uninstall")||A.includes("npm update")||A.includes("yarn add")||A.includes("yarn remove")||A.includes("yarn upgrade")||A.includes("pnpm add")||A.includes("pnpm remove")||A.includes("pnpm update")||A.includes("pip install")||A.includes("pip uninstall")||A.includes("pip install --upgrade")||A.includes("package.json")||Z.includes("package.json")||b||D||x||j.toLowerCase().includes("dependency")||j.toLowerCase().includes("package")||j.toLowerCase().includes("install")||j.toLowerCase().includes("uninstall")||j.toLowerCase().includes("update")||k.toLowerCase().includes("dependency")||k.toLowerCase().includes("package")||k.toLowerCase().includes("install")||k.toLowerCase().includes("uninstall")||k.toLowerCase().includes("update")},Br=function(e){var r,s,a,o,l,p=["write_file","edit_file","delete_file","create_directory"],d=e.toolName||"",y=((r=e.rawInput)===null||r===void 0?void 0:r.command)||"",M=((s=e.rawInput)===null||s===void 0?void 0:s.description)||"",C=e.kind||"",R=e.title||"",P=((a=e.rawInput)===null||a===void 0?void 0:a.file_path)||"",A=((o=e.rawInput)===null||o===void 0?void 0:o.new_string)||((l=e.rawInput)===null||l===void 0?void 0:l.old_string),k=e.content||[],F=k.some(function(j){return j.type==="diff"&&j.path});return p.some(function(j){return d.includes(j)})||C==="edit"||C==="write"||y.includes("rm ")||y.includes("mv ")||y.includes("cp ")||y.includes("mkdir ")||y.includes("touch ")||y.includes("echo ")||M.includes("\u5220\u9664")||M.includes("\u521B\u5EFA")||M.includes("\u79FB\u52A8")||M.includes("\u91CD\u547D\u540D")||M.includes("\u7F16\u8F91")||M.includes("\u5199\u5165")||P&&A||F||R.includes("Edit ")&&R.includes("/")||R.includes("Write ")&&R.includes("/")||R.includes("Create ")&&R.includes("/")||R.includes("Delete ")&&R.includes("/")},ia=function(e){return Br(e)||sa(e)},Vn=function(){return"req_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,9))},zn=function(e,r){var s=Date.now(),a=Math.random().toString(36).slice(2,9);return r?"".concat(e,"_").concat(r,"_").concat(s,"_").concat(a):"".concat(e,"_").concat(s,"_").concat(a)},Pa=function(e){return"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,9))},Rr=function(e){return{id:"datasource-".concat(e.dataSourceId,"-").concat(e.type),dataSourceId:e.dataSourceId,type:e.type,name:e.name}},Fa=function(e,r,s,a,o){return{id:zn("user",r),role:"USER",type:er.Zy.CHAT,text:e,time:new Date().toISOString(),status:null,requestId:r,timestamp:new Date,attachments:s,dataSources:o,attachmentPrototypeImages:a}},oa=function(e,r){return{id:zn("assistant",e),role:"ASSISTANT",type:er.Zy.CHAT,text:"",think:"",time:new Date().toISOString(),status:null,requestId:e,sessionId:r,isStreaming:!0,timestamp:new Date}},wn=function(e,r,s,a){var o=e.findIndex(function(p){return p.requestId===r&&p.role===s});if(o>=0){var l=v()(e);return l[o]=f()(f()({},l[o]),a),l}return e},Nn=function(e,r){return wn(e,r,"ASSISTANT",{isStreaming:!1})},$r=function(e,r,s){var a;return wn(e,r,"ASSISTANT",{isStreaming:!1,text:(((a=e.find(function(o){return o.requestId===r&&o.role==="ASSISTANT"}))===null||a===void 0?void 0:a.text)||"")+`

[\u5DF2\u51FA\u9519] `+s})},jn=function(e,r){var s;return wn(e,r,"ASSISTANT",{isStreaming:!1,text:(((s=e.find(function(a){return a.requestId===r&&a.role==="ASSISTANT"}))===null||s===void 0?void 0:s.text)||"")+`

[\u5DF2\u53D6\u6D88]`})},la=function(e,r,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=e.findIndex(function(y){return y.requestId===r&&y.role==="ASSISTANT"});if(o>=0){var l=e[o],p=l.text||"",d=s.includes("<appdev-plan")||s.includes("<appdev-toolcall");d?l.text=s:l.text="".concat(p).concat(s),l.isStreaming=!a}return e},Ra=function(e){var r=e.find(function(s){return s.role==="USER"});return r?r.text.substring(0,50):"\u65B0\u4F1A\u8BDD"},ka=function(e){return JSON.stringify(e)},ua=function(e){try{return JSON.parse(e)}catch{return[]}},xa=function(e,r){return e.map(function(s,a){return f()(f()({},s),{},{id:"".concat(s.id,"_").concat(r.created,"_").concat(a),sessionId:r.sessionId,conversationTopic:r.topic,conversationCreated:r.created})})},La=function(e){return e.sort(function(r,s){var a=new Date(r.timestamp||r.time).getTime(),o=new Date(s.timestamp||s.time).getTime();return a-o})},ca=function(e){return e.filter(function(r,s,a){return a.findIndex(function(o){return o.id===r.id})!==s}).map(function(r){return r.id})},In=function(e){return e.reduce(function(r,s){var a=s.conversationTopic||"unknown";return r[a]=(r[a]||0)+1,r},{})},Dn=function(e,r){return e===r},Ma=function(e){return"".concat("","/api/custom-page/ai-session-sse?session_id=").concat(e)},da=function(){return"".concat("","/api/custom-page/ai-chat-flux")},Tn=function(){var e,r=(e=localStorage.getItem("ACCESS_TOKEN"))!==null&&e!==void 0?e:"";return{Authorization:"Bearer ".concat(r),Accept:"application/json, text/plain, */* "}},pa=function(e){var r=e.projectId,s=e.selectedModelId,a=e.multiModelId,o=e.onRefreshFileTree,l=e.selectedDataResources,p=l===void 0?[]:l,d=e.onClearDataSourceSelections,y=e.onRefreshVersionList,M=e.onClearUploadedImages,C=e.onRestartDevServer,R=(0,yt.useModel)("appDevSseConnection"),P=(0,n.useState)(""),A=w()(P,2),k=A[0],F=A[1],j=(0,n.useState)([]),Z=w()(j,2),b=Z[0],g=Z[1],D=(0,n.useState)(""),x=w()(D,2),U=x[0],O=x[1],N=(0,n.useState)(!1),J=w()(N,2),E=J[0],de=J[1],h=(0,n.useState)(!1),T=w()(h,2),he=T[0],Te=T[1],X=(0,n.useRef)(null),ke=(0,n.useRef)(),xe=(0,n.useRef)(null),re=(0,n.useRef)(new Set),Ke=(0,n.useCallback)(Sn(function(){o&&o(!0,!0)},500),[o]),ne=(0,n.useCallback)(function(m,z,ae){var V=Ra(m),ie=ka(m);Mt({projectId:ae,sessionId:z,content:ie,topic:V}).then(function(){o&&Ke()})},[Mt,Ke]),pe=(0,n.useCallback)(function(m,z){switch(m.messageType){case"sessionPromptStart":break;case"agentSessionUpdate":{var ae=m.subType,V=m.data;if(ae==="agent_message_chunk"){var ie,we=(V==null||(ie=V.content)===null||ie===void 0?void 0:ie.text)||V?.text||"",te=V?.is_final;we&&g(function(We){return la(We,z,we,te)})}ae==="plan"&&g(function(We){return We.map(function(lt){return lt.requestId===z&&lt.role==="ASSISTANT"?f()(f()({},lt),{},{text:mt(lt.text||"",{planId:V.planId||"default-plan",entries:V.entries||[]})}):lt})}),ae==="tool_call"&&(g(function(We){return We.map(function(lt){return lt.requestId===z&&lt.role==="ASSISTANT"?f()(f()({},lt),{},{text:nr(lt.text||"",V.toolCallId,{toolCallId:V.toolCallId,title:V.title||"\u5DE5\u5177\u8C03\u7528",kind:V.kind||"execute",status:V.status,content:V.content,locations:V.locations,rawInput:V.rawInput,timestamp:m.timestamp})}):lt})}),ia(V)&&V.toolCallId&&re.current.add(V.toolCallId)),ae==="tool_call_update"&&(g(function(We){return We.map(function(lt){return lt.requestId===z&&lt.role==="ASSISTANT"?f()(f()({},lt),{},{text:jr(lt.text||"",V.toolCallId,{toolCallId:V.toolCallId,title:V.title||"\u5DE5\u5177\u8C03\u7528\u66F4\u65B0",kind:V.kind||"execute",status:V.status,content:V.content,locations:V.locations,rawInput:V.rawInput,timestamp:m.timestamp})}):lt})}),V.toolCallId&&re.current.has(V.toolCallId)&&Ke());break}case"sessionPromptEnd":{var fe,ft;g(function(We){var lt=Nn(We,z),Nt=lt.find(function(gt){return gt.requestId===z&&gt.role==="USER"}),Cr=lt.find(function(gt){return gt.requestId===z&&gt.role==="ASSISTANT"});return Nt&&Cr&&ne([Nt,Cr],m.sessionId,r),lt}),Ke(),re.current.size>0&&C&&C(),re.current.clear(),de(!1),(fe=X.current)===null||fe===void 0||(ft=fe.abort)===null||ft===void 0||ft.call(fe);break}case"heartbeat":break;default:}},[r,ne,R,Ke]),G=(0,n.useCallback)(function(){var m=I()(u()().mark(function z(ae,V){var ie,we;return u()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return ie=Ma(ae),we=Tn(),X.current=new AbortController,fe.next=5,(0,bn.W)({url:ie,method:"GET",abortController:X.current,headers:we,onMessage:function(We){setTimeout(function(){pe(We,V)},100)},onError:function(We){var lt;g(function(Nt){return $r(Nt,V,We.message)}),de(!1),(lt=X.current)===null||lt===void 0||lt.abort(),Ke()},onClose:function(){var We;de(!1),g(function(lt){return Nn(lt,V)}),(We=X.current)===null||We===void 0||We.abort(),Ke()}});case 5:case"end":return fe.stop()}},z)}));return function(z,ae){return m.apply(this,arguments)}}(),[R,pe]),S=(0,n.useCallback)(function(m,z){$t.Z.confirm({title:"\u68C0\u6D4B\u5230\u540E\u53F0Agent\u670D\u52A1\u6B63\u5728\u8FD0\u884C",content:"\u662F\u5426\u505C\u6B62\u5F53\u524D\u8FD0\u884C\u7684Agent\u670D\u52A1\uFF1F",onOk:function(){return new Promise(function(V,ie){Qr(m).then(function(we){we.code==="0000"?(De.ZP.success("Agent\u670D\u52A1\u5DF2\u505C\u6B62"),z(),V(!0)):(De.ZP.error("\u505C\u6B62Agent\u670D\u52A1\u5931\u8D25: ".concat(we.message||"\u672A\u77E5\u9519\u8BEF")),ie())}).catch(function(){De.ZP.error("\u505C\u6B62Agent\u670D\u52A1\u5931\u8D25"),ie()})})},onCancel:function(){De.ZP.info("\u5DF2\u53D6\u6D88\u53D1\u9001")}})},[]),B=function(){var m=I()(u()().mark(function z(ae,V){var ie,we;return u()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return ie=da(),we=Tn(),de(!0),fe.next=5,(0,bn.W)({url:ie,method:"POST",headers:we,abortController:ke.current,body:ae,onMessage:function(We){if(We.type==="session_id"){var lt=We.session_id;F(lt)}if(We.type==="progress"){var Nt=We!=null&&We.message?"".concat(We?.message,`

`):"";g(function(Ft){return la(Ft,V,Nt,!1)})}if(We.type==="success"){y&&y(),M&&M(),d&&d(),O("");var Cr=We.data.session_id;G(Cr,V)}if(We.type==="error"){var gt;(gt=ke.current)===null||gt===void 0||gt.abort(),de(!1),We.code===qe.fe?S(r,function(){K(ae.attachments,ae.attachment_files,ae.attachment_prototype_images)}):(De.ZP.error(We.message),g(function(Ft){return $r(Ft,V,"\u670D\u52A1\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5")}))}},onError:function(){var We;(We=ke.current)===null||We===void 0||We.abort(),de(!1),g(function(lt){return $r(lt,V,"AI\u52A9\u624B\u8FDE\u63A5\u5931\u8D25")})},onClose:function(){var We;(We=ke.current)===null||We===void 0||We.abort()}});case 5:case"end":return fe.stop()}},z)}));return function(ae,V){return m.apply(this,arguments)}}(),K=(0,n.useCallback)(function(){var m=I()(u()().mark(function z(ae,V,ie){var we,te,fe,ft,We,lt,Nt=arguments;return u()().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return we=Nt.length>3&&Nt[3]!==void 0?Nt[3]:Vn(),gt.prev=1,fe=((te=p.filter(function(Ft){return Ft.isSelected}))===null||te===void 0?void 0:te.map(function(Ft){return{dataSourceId:Number(Ft.id),type:Ft.type==="plugin"?"plugin":"workflow",name:Ft.name}}))||[],ft={prompt:U,project_id:r,chat_model_id:s,multi_model_id:a,attachments:ae,attachment_files:V,attachment_prototype_images:ie,data_sources:fe},We=Fa(U,we,ae,ie,fe),g(function(Ft){return[].concat(v()(Ft),[We])}),lt=oa(we,""),g(function(Ft){return[].concat(v()(Ft),[lt])}),gt.next=10,B(ft,we);case 10:gt.next=15;break;case 12:gt.prev=12,gt.t0=gt.catch(1),gt.t0&&gt.t0.code===qe.fe?S(r,function(){K()}):de(!1);case 15:case"end":return gt.stop()}},z,null,[[1,12]])}));return function(z,ae,V){return m.apply(this,arguments)}}(),[U,r,s,G,S]),ve=(0,n.useCallback)(I()(u()().mark(function m(){return u()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(U.trim()){ae.next=2;break}return ae.abrupt("return");case 2:K();case 3:case"end":return ae.stop()}},m)})),[U,K]),L=(0,n.useCallback)(function(){var m=I()(u()().mark(function z(ae,V,ie,we){return u()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(U.trim()){fe.next=3;break}return De.ZP.warning("\u8BF7\u8F93\u5165\u6D88\u606F\u5185\u5BB9"),fe.abrupt("return");case 3:K(ae,V,ie,we);case 4:case"end":return fe.stop()}},z)}));return function(z,ae,V,ie){return m.apply(this,arguments)}}(),[U,K]),H=(0,n.useCallback)(I()(u()().mark(function m(){var z;return u()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(r){V.next=2;break}return V.abrupt("return");case 2:de(!1),g(function(ie){return ie.map(function(we){return we.isStreaming&&we.role==="ASSISTANT"&&jn(ie,we.requestId).find(function(te){return te.id===we.id})||we})}),(z=X.current)===null||z===void 0||z.abort();case 5:case"end":return V.stop()}},m)})),[r,R]),Le=(0,n.useCallback)(function(){var m,z;(m=ke.current)===null||m===void 0||m.abort(),(z=X.current)===null||z===void 0||z.abort(),de(!1),g([]),O(""),F("")},[]),Se=(0,n.useCallback)(I()(u()().mark(function m(){var z,ae,V,ie,we;return u()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.prev=0,fe.next=3,Ut({projectId:r});case 3:ae=fe.sent,ae.success&&((z=ae.data)===null||z===void 0||(z=z.records)===null||z===void 0?void 0:z.length)>0&&(ie=(V=ae.data)===null||V===void 0?void 0:V.records[0],we=ua(ie.content),g(we)),fe.next=10;break;case 7:fe.prev=7,fe.t0=fe.catch(0),De.ZP.error("\u52A0\u8F7D\u5386\u53F2\u4F1A\u8BDD\u5931\u8D25");case 10:case"end":return fe.stop()}},m,null,[[0,7]])})),[r]),ge=(0,n.useCallback)(I()(u()().mark(function m(){var z,ae,V,ie,we,te,fe,ft,We,lt,Nt;return u()().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(r){gt.next=2;break}return gt.abrupt("return");case 2:return Te(!0),gt.prev=3,gt.next=6,Ut({projectId:r});case 6:if(ae=gt.sent,ae.success&&((z=ae.data)===null||z===void 0||(z=z.records)===null||z===void 0?void 0:z.length)>0){ie=(V=ae.data)===null||V===void 0?void 0:V.records.sort(function(Ft,Ve){return new Date(Ft.created).getTime()-new Date(Ve.created).getTime()}),we=[],te=q()(ie);try{for(te.s();!(fe=te.n()).done;){ft=fe.value;try{We=ua(ft.content),lt=xa(We,{sessionId:ft.sessionId,topic:ft.topic,created:ft.created}),we.push.apply(we,v()(lt))}catch{}}}catch(Ft){te.e(Ft)}finally{te.f()}Nt=La(we),g(Nt)}gt.next=12;break;case 10:gt.prev=10,gt.t0=gt.catch(3);case 12:return gt.prev=12,Te(!1),gt.finish(12);case 15:case"end":return gt.stop()}},m,null,[[3,10,12,15]])})),[r]);return(0,n.useEffect)(function(){r&&ge()},[r]),(0,n.useEffect)(function(){return function(){var m;xe.current&&clearTimeout(xe.current),(m=X.current)===null||m===void 0||m.abort()}},[]),{aiChatSessionId:k,chatMessages:b,chatInput:U,isChatLoading:E,isLoadingHistory:he,setChatInput:O,setChatMessages:g,sendChat:ve,sendMessage:L,cancelChat:H,cleanupAppDevSSE:Le,loadHistorySession:Se,loadAllHistorySessions:ge}},Na=i(31759),on=i.n(Na),Ba=function(e){var r=e.projectId,s=e.onFileSelect,a=e.onFileContentChange,o=e.isChatLoading,l=o===void 0?!1:o,p=e.hasPermission,d=p===void 0?!0:p,y=(0,n.useState)({data:[],expandedFolders:new Set,isCollapsed:!1,lastLoadedProjectId:null}),M=w()(y,2),C=M[0],R=M[1],P=(0,n.useState)({selectedFile:"",fileContent:"",originalFileContent:"",isLoadingFileContent:!1,fileContentError:null,isFileModified:!1,isSavingFile:!1}),A=w()(P,2),k=A[0],F=A[1],j=(0,n.useState)(!1),Z=w()(j,2),b=Z[0],g=Z[1],D=(0,n.useState)(new Set),x=w()(D,2),U=x[0],O=x[1],N=(0,n.useRef)(null),J=(0,n.useCallback)(function(G){F(function(S){return f()(f()({},S),{},{selectedFile:G})})},[]),E=(0,n.useCallback)(I()(u()().mark(function G(){var S,B,K,ve,L,H,Le,Se,ge,m,z,ae=arguments;return u()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(S=ae.length>0&&ae[0]!==void 0?ae[0]:!0,B=ae.length>1&&ae[1]!==void 0?ae[1]:!1,r){ie.next=4;break}return ie.abrupt("return");case 4:if(K=S?k.selectedFile:"",ve=S?new Set(C.expandedFolders):new Set,!(!B&&N.current===r&&C.data.length>0&&S)){ie.next=8;break}return ie.abrupt("return");case 8:return L=N.current!==r,L&&g(!0),ie.prev=10,ie.next=13,Lr(r);case 13:if(H=ie.sent,!(H&&H.code==="0000"&&H.data)){ie.next=25;break}Le=H.data.files||H.data,Se=[],Array.isArray(Le)&&Le.length>0&&Le[0].name?Se=kn(Le):Array.isArray(Le)&&(Se=Le),R(function(we){return f()(f()({},we),{},{data:Se,expandedFolders:ve,lastLoadedProjectId:r})}),O(new Set),N.current=r,S||(ge=Se.filter(function(we){return we.type==="folder"}).map(function(we){return we.id}),ge.length>0&&R(function(we){return f()(f()({},we),{},{expandedFolders:new Set(ge)})})),K&&S&&(m=Wr(K,Se),F(m?function(we){return f()(f()({},we),{},{selectedFile:K})}:function(we){return f()(f()({},we),{},{selectedFile:"",fileContent:"",originalFileContent:""})})),ie.next=26;break;case 25:throw new Error("API\u8FD4\u56DE\u6570\u636E\u683C\u5F0F\u5F02\u5E38");case 26:ie.next=34;break;case 28:ie.prev=28,ie.t0=ie.catch(10),z=[],R(function(we){return f()(f()({},we),{},{data:z,lastLoadedProjectId:r,expandedFolders:S?ve:new Set})}),N.current=r,S&&K?F(function(we){return f()(f()({},we),{},{selectedFile:"",fileContent:"",originalFileContent:""})}):S||F(function(we){return f()(f()({},we),{},{selectedFile:""})});case 34:return ie.prev=34,L&&g(!1),ie.finish(34);case 37:case"end":return ie.stop()}},G,null,[[10,28,34,37]])})),[r,C.data.length,k.selectedFile]),de=(0,n.useCallback)(function(){var G=I()(u()().mark(function S(B){var K,ve,L,H,Le,Se;return u()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(F(function(z){return f()(f()({},z),{},{selectedFile:B})}),s?.(B),r){m.next=5;break}return De.ZP.warning(ze.NO_PROJECT_ID),m.abrupt("return");case 5:if(K=Wr(B,C.data),ve=K&&K.content!==void 0&&K.content!==null&&K.content.trim()!=="",L=U.has(B),!ve){m.next=11;break}return F(function(z){return f()(f()({},z),{},{fileContent:K?.content||"",originalFileContent:K?.content||"",isFileModified:!1,fileContentError:null})}),m.abrupt("return");case 11:if(!(K&&L&&!ve)){m.next=14;break}return F(function(z){return f()(f()({},z),{},{fileContent:"",originalFileContent:"",isFileModified:!1,fileContentError:null})}),m.abrupt("return");case 14:if(!(!an(B)&&!ve)){m.next=17;break}return F(function(z){return f()(f()({},z),{},{fileContent:"",originalFileContent:"",isFileModified:!1,fileContentError:null,isLoadingFileContent:!1})}),m.abrupt("return");case 17:return F(function(z){return f()(f()({},z),{},{fileContent:"",originalFileContent:"",isFileModified:!1,fileContentError:null,isLoadingFileContent:!0})}),m.prev=19,m.next=22,Fr(r,B);case 22:if(H=m.sent,Le="",!(H&&on()(H)==="object"&&"data"in H)){m.next=28;break}Le=H.data,m.next=33;break;case 28:if(typeof H!="string"){m.next=32;break}Le=H,m.next=33;break;case 32:throw new Error("\u6587\u4EF6\u5185\u5BB9\u4E3A\u7A7A");case 33:F(function(z){return f()(f()({},z),{},{fileContent:Le,originalFileContent:Le,isFileModified:!1,fileContentError:null,isLoadingFileContent:!1})}),O(function(z){return new Set(z).add(B)}),a?.(B,Le),m.next=44;break;case 38:m.prev=38,m.t0=m.catch(19),Se="\u52A0\u8F7D\u6587\u4EF6 ".concat(B," \u5931\u8D25: ").concat(m.t0 instanceof Error?m.t0.message:"\u672A\u77E5\u9519\u8BEF"),F(function(z){return f()(f()({},z),{},{fileContentError:Se,isLoadingFileContent:!1})}),O(function(z){return new Set(z).add(B)}),De.ZP.error("\u52A0\u8F7D\u6587\u4EF6 ".concat(B," \u5931\u8D25"));case 44:case"end":return m.stop()}},S,null,[[19,38]])}));return function(S){return G.apply(this,arguments)}}(),[r,C.data,s,a]),h=(0,n.useCallback)(function(G,S){F(function(B){return f()(f()({},B),{},{fileContent:S,isFileModified:yn(S,B.originalFileContent)})}),R(function(B){var K=function ve(L){return L.map(function(H){return H.id===G?f()(f()({},H),{},{content:S,lastModified:Date.now()}):H.children?f()(f()({},H),{},{children:ve(H.children)}):H})};return f()(f()({},B),{},{data:K(B.data)})}),a?.(G,S)},[a]),T=(0,n.useCallback)(I()(u()().mark(function G(){var S,B,K,ve,L,H,Le;return u()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(S=k.selectedFile,B=k.fileContent,!(!S||!r)){ge.next=3;break}return ge.abrupt("return",!1);case 3:return ge.prev=3,F(function(m){return f()(f()({},m),{},{isSavingFile:!0})}),ge.next=7,Lr(r);case 7:if(K=ge.sent,!(!K||K.code!=="0000"||!K.data)){ge.next=10;break}return ge.abrupt("return",!1);case 10:return ve=[],L=K.data.files||K.data,Array.isArray(L)&&L.length>0&&L[0].name?ve=v()(L):Array.isArray(L)&&(ve=Nr(L)),H=ve.map(function(m){return m.name===S?f()(f()({},m),{},{contents:B,binary:!1,sizeExceeded:!1}):m}),ge.next=16,Zt(r,H);case 16:if(Le=ge.sent,!(Le.success&&Le.code==="0000")){ge.next=23;break}return F(function(m){return f()(f()({},m),{},{originalFileContent:B,isFileModified:!1,isSavingFile:!1})}),De.ZP.success(He.FILE_SAVED),ge.abrupt("return",!0);case 23:return ge.abrupt("return",!1);case 24:ge.next=31;break;case 26:return ge.prev=26,ge.t0=ge.catch(3),De.ZP.error("\u4FDD\u5B58\u6587\u4EF6\u5931\u8D25: ".concat(ge.t0 instanceof Error?ge.t0.message:"\u672A\u77E5\u9519\u8BEF")),F(function(m){return f()(f()({},m),{},{isSavingFile:!1})}),ge.abrupt("return",!1);case 31:case"end":return ge.stop()}},G,null,[[3,26]])})),[k,r]),he=(0,n.useCallback)(function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,S=k.selectedFile,B=k.originalFileContent;S&&(F(function(K){return f()(f()({},K),{},{fileContent:B,isFileModified:!1})}),G||De.ZP.info("\u5DF2\u53D6\u6D88\u7F16\u8F91"))},[k]),Te=(0,n.useCallback)(function(){var G=I()(u()().mark(function S(B,K){var ve;return u()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(r){H.next=3;break}return De.ZP.error(ze.NO_PROJECT_ID),H.abrupt("return",!1);case 3:if(K.trim()){H.next=6;break}return De.ZP.error(ze.EMPTY_FILE_PATH),H.abrupt("return",!1);case 6:return H.prev=6,H.next=9,nn({file:B,projectId:r,filePath:K.trim()});case 9:if(ve=H.sent,!(ve!=null&&ve.success)){H.next=16;break}return H.next=13,E(!0,!0);case 13:return H.abrupt("return",!0);case 16:return console.error("\u4E0A\u4F20\u5931\u8D25",ve),H.abrupt("return",!1);case 18:H.next=24;break;case 20:return H.prev=20,H.t0=H.catch(6),console.error("\u4E0A\u4F20\u5931\u8D25",H.t0),H.abrupt("return",!1);case 24:case"end":return H.stop()}},S,null,[[6,20]])}));return function(S,B){return G.apply(this,arguments)}}(),[r,E]),X=(0,n.useCallback)(function(G){R(function(S){var B=new Set(S.expandedFolders);return B.has(G)?B.delete(G):B.add(G),f()(f()({},S),{},{expandedFolders:B})})},[]),ke=(0,n.useCallback)(function(){R(function(G){return f()(f()({},G),{},{isCollapsed:!G.isCollapsed})})},[]),xe=(0,n.useCallback)(Sn(h,Ie.DEBOUNCE_DELAY),[h]),re=(0,n.useCallback)(function(){var G=I()(u()().mark(function S(B){var K,ve,L,H;return u()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(r){Se.next=2;break}return Se.abrupt("return",!1);case 2:if(Se.prev=2,K=Wr(B,C.data),K){Se.next=6;break}return Se.abrupt("return",!1);case 6:return ve=Nr(C.data),L=ve.filter(function(ge){if(ge.name===B)return!1;if(K.type==="folder"){var m=ge.name.startsWith(K.path+"/");return!m}return!0}),Se.next=10,Zt(r,L);case 10:if(H=Se.sent,!(H!=null&&H.success)){Se.next=18;break}return Se.next=14,E(!0,!0);case 14:return k.selectedFile===B&&J(""),Se.abrupt("return",!0);case 18:return Se.abrupt("return",!1);case 19:Se.next=24;break;case 21:return Se.prev=21,Se.t0=Se.catch(2),Se.abrupt("return",!1);case 24:case"end":return Se.stop()}},S,null,[[2,21]])}));return function(S){return G.apply(this,arguments)}}(),[r,C.data,k.selectedFile,E,J]),Ke=(0,n.useCallback)(function(G,S){var B=q()(S),K;try{for(B.s();!(K=B.n()).done;){var ve=K.value;if(ve.path===G)return ve;if(ve.children){var L=Ke(G,ve.children);if(L)return L}}}catch(H){B.e(H)}finally{B.f()}return null},[]),ne=(0,n.useCallback)(function(G,S,B){return G.map(function(K){return K.id===S?f()(f()({},K),{},{name:B,path:K.path.substring(0,K.path.lastIndexOf("/"))+"/"+B}):K.children&&K.children.length>0?f()(f()({},K),{},{children:ne(K.children,S,B)}):K})},[]),pe=(0,n.useCallback)(function(){var G=I()(u()().mark(function S(B,K){var ve,L,H,Le,Se,ge,m,z,ae,V,ie;return u()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(r){te.next=2;break}return te.abrupt("return",!1);case 2:if(K.trim()){te.next=4;break}return te.abrupt("return",!1);case 4:if(te.prev=4,ve=Wr(B,C.data),ve){te.next=8;break}return te.abrupt("return",!1);case 8:return L=ve.path,H=L.substring(0,L.lastIndexOf("/")),Le=H?"".concat(H,"/").concat(K.trim()):K.trim(),Se=ne(C.data,B,K.trim()),R(function(fe){return f()(f()({},fe),{},{data:Se})}),te.next=15,Lr(r);case 15:if(ge=te.sent,!(!ge||ge.code!=="0000"||!ge.data)){te.next=18;break}return te.abrupt("return",!1);case 18:return m=[],z=ge.data.files||ge.data,Array.isArray(z)&&z.length>0&&z[0].name?m=v()(z):Array.isArray(z)&&(m=Nr(z)),ae=m.map(function(fe){if(ve.type==="folder"){if(fe.name===L)return f()(f()({},fe),{},{name:Le,renameFrom:L});if(fe.name.startsWith(L+"/")){var ft=fe.name.substring(L.length),We=Le+ft;return f()(f()({},fe),{},{name:We,renameFrom:fe.name})}}else if(fe.name===L)return f()(f()({},fe),{},{name:Le,renameFrom:L});return fe}),te.next=24,Zt(r,ae);case 24:if(V=te.sent,!(V.success&&V.code==="0000")){te.next=32;break}return te.next=28,E(!0,!0);case 28:return k.selectedFile===B&&(ie=Ke(Le,C.data),ie&&J(ie.id)),te.abrupt("return",!0);case 32:return te.next=34,E(!0,!0);case 34:return De.ZP.error("\u91CD\u547D\u540D\u5931\u8D25"),te.abrupt("return",!1);case 36:te.next=44;break;case 38:return te.prev=38,te.t0=te.catch(4),te.next=42,E(!0,!0);case 42:return De.ZP.error("\u91CD\u547D\u540D\u5931\u8D25: ".concat(te.t0 instanceof Error?te.t0.message:"\u672A\u77E5\u9519\u8BEF")),te.abrupt("return",!1);case 44:case"end":return te.stop()}},S,null,[[4,38]])}));return function(S,B){return G.apply(this,arguments)}}(),[r,C.data,k.selectedFile,E,J]);return(0,n.useEffect)(function(){r&&d&&E(!1,!0)},[r,d]),{fileTreeState:C,loadFileTree:E,toggleFolder:X,toggleFileTreeCollapse:ke,fileContentState:k,setSelectedFile:J,updateFileContent:xe,switchToFile:de,saveFile:T,cancelEdit:he,uploadSingleFileToServer:Te,deleteFileItem:re,renameFileItem:pe,isFileTreeInitializing:b,findFileNode:function(S){return Wr(S,C.data)},findFileNodeByPath:function(S){return Ke(S,C.data)}}},ln=i(86230),fa=function(e,r){var s,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=(0,n.useState)(),l=w()(o,2),p=l[0],d=l[1],y=(0,n.useState)(null),M=w()(y,2),C=M[0],R=M[1],P=(0,n.useState)(null),A=w()(P,2),k=A[0],F=A[1],j=(0,n.useState)(!1),Z=w()(j,2),b=Z[0],g=Z[1],D=(0,n.useCallback)(I()(u()().mark(function N(){var J,E,de,h,T,he;return u()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(r){X.next=2;break}return X.abrupt("return");case 2:return g(!0),X.prev=3,X.next=6,gn(r);case 6:if(J=X.sent,E=J.data,de=J.message,h=J.success,!h){X.next=16;break}d(E),T=E||{},he=T.chatModelList,he!=null&&he.length||$t.Z.confirm({title:"\u63D0\u793A",content:"\u8BF7\u5728\u7CFB\u7EDF\u7BA1\u7406\u6216\u7EC4\u4EF6\u5E93\u4E2D\u914D\u7F6E\u7F16\u7801\u6A21\u578B\uFF0C\u6DFB\u52A0\u6A21\u578B\u7684\u65F6\u5019\u8BF7\u9009\u62E9\u652F\u6301Anthropic\u534F\u8BAE\u7684\u6A21\u578B\uFF0C\u63A8\u8350\u4F7F\u7528\u667A\u8C31\u7684Coding Plan https://bigmodel.cn/glm-coding",cancelButtonProps:{style:{display:"none"}},onOk:function(){(0,ln.bC)("/space/".concat(e,"/page-develop"))}}),X.next=17;break;case 16:throw new Error(de||"\u83B7\u53D6\u6A21\u578B\u5217\u8868\u5931\u8D25");case 17:X.next=23;break;case 19:X.prev=19,X.t0=X.catch(3),console.error(" \u52A0\u8F7D\u6A21\u578B\u5217\u8868\u5931\u8D25:",X.t0),De.ZP.error("\u52A0\u8F7D\u6A21\u578B\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");case 23:return X.prev=23,g(!1),X.finish(23);case 26:case"end":return X.stop()}},N,null,[[3,19,23,26]])})),[r]),x=function(J){R(J)},U=function(J){F(J)},O=(p==null||(s=p.chatModelList)===null||s===void 0?void 0:s.find(function(N){return N.id===C}))||null;return(0,n.useEffect)(function(){r&&a&&D()},[r,a]),{models:p,selectedModelId:C,selectedModel:O,selectedMultiModelId:k,selectMultiModel:U,isLoadingModels:b,selectModel:x,reloadModels:D}},Oa=function(){var e=(0,yt.useParams)(),r=(0,yt.useLocation)(),s=(0,n.useMemo)(function(){if(e.projectId)return e.projectId;var o=new URLSearchParams(r.search),l=o.get("projectId");return l||(console.warn("\u26A0\uFE0F [AppDevProjectId] \u6CA1\u6709\u627E\u5230\u6709\u6548\u7684 projectId"),null)},[e.projectId,r.search]),a=!!s;return{projectId:s,hasValidProjectId:a}},as=null,va=function(e){var r,s,a=(0,n.useState)({projectInfo:null,isLoading:!1,error:null,lastUpdated:null,hasPermission:!1}),o=w()(a,2),l=o[0],p=o[1],d=(0,n.useCallback)(I()(u()().mark(function k(){var F,j;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(e){b.next=2;break}return b.abrupt("return");case 2:return b.prev=2,p(function(g){return f()(f()({},g),{},{isLoading:!0,error:null})}),b.next=6,be(e);case 6:F=b.sent,F?.code==="0000"&&F!==null&&F!==void 0&&F.data?p({projectInfo:F.data,isLoading:!1,error:null,lastUpdated:new Date,hasPermission:!0}):F?.code==="4030"&&p(function(g){return f()(f()({},g),{},{isLoading:!1,error:"\u60A8\u6CA1\u6709\u6743\u9650\u8BBF\u95EE\u8BE5\u9879\u76EE",hasPermission:!1})}),b.next=14;break;case 10:b.prev=10,b.t0=b.catch(2),j=(b.t0===null||b.t0===void 0?void 0:b.t0.message)||(b.t0===null||b.t0===void 0?void 0:b.t0.toString())||"\u83B7\u53D6\u9879\u76EE\u8BE6\u60C5\u65F6\u53D1\u751F\u672A\u77E5\u9519\u8BEF",p(function(g){return f()(f()({},g),{},{isLoading:!1,error:j})});case 14:case"end":return b.stop()}},k,null,[[2,10]])})),[e]),y=(0,n.useCallback)(I()(u()().mark(function k(){return u()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,d();case 2:case"end":return j.stop()}},k)})),[d]),M=(0,n.useMemo)(function(){if(!l.projectInfo)return!1;var k=l.projectInfo,F=k.codeVersion,j=k.buildVersion;return F!==j},[(r=l.projectInfo)===null||r===void 0?void 0:r.codeVersion,(s=l.projectInfo)===null||s===void 0?void 0:s.buildVersion]),C=(0,n.useMemo)(function(){var k;return(k=l.projectInfo)!==null&&k!==void 0&&k.versionInfo?v()(l.projectInfo.versionInfo).sort(function(F,j){return j.version-F.version}):[]},[l.projectInfo]),R=(0,n.useCallback)(function(k){switch(k){case"chat":return"AI \u5BF9\u8BDD";case"submit_files_update":return"\u6587\u4EF6\u66F4\u65B0";case"upload_single_file":return"\u4E0A\u4F20\u5355\u6587\u4EF6";case"create_project":return"\u521B\u5EFA\u9879\u76EE";case"build":return"\u6784\u5EFA";case"deploy":return"\u90E8\u7F72";case"upload":return"\u4E0A\u4F20\u9879\u76EE";default:return"\u672A\u77E5\u64CD\u4F5C"}},[]),P=(0,n.useCallback)(function(k){switch(k){case"chat":return"blue";case"submit_files_update":return"green";case"build":return"orange";case"deploy":return"purple";default:return"default"}},[]),A=(0,n.useCallback)(function(k){try{var F=new Date(k);return F.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return k}},[]);return(0,n.useEffect)(function(){e&&d()},[e]),{projectInfoState:l,refreshProjectInfo:y,hasUpdates:M,versionList:C,getActionText:R,getActionColor:P,formatVersionTime:A,hasPermission:l.hasPermission}},ma=null,Ua=function(e){var r=e.projectId,s=e.onServerStart,a=e.devLogsRefresh,o=e.onServerStatusChange,l=(0,n.useState)(!1),p=w()(l,2),d=p[0],y=p[1],M=(0,n.useState)(!1),C=w()(M,2),R=C[0],P=C[1],A=(0,n.useState)(null),k=w()(A,2),F=k[0],j=k[1],Z=(0,n.useState)(!1),b=w()(Z,2),g=b[0],D=b[1],x=(0,n.useState)(null),U=w()(x,2),O=U[0],N=U[1],J=(0,n.useState)(null),E=w()(J,2),de=E[0],h=E[1],T=(0,n.useRef)(!1),he=(0,n.useRef)(null),Te=(0,n.useRef)(null),X=(0,yt.useModel)("autoErrorHandling"),ke=(0,n.useCallback)(function(S,B){var K,ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=S?.code==="0000"||S?.success,H=S==null||(K=S.data)===null||K===void 0?void 0:K.devServerUrl;if(L&&H){D(!0),o?.(!0),N(null),h(null);var Le=S?.message||(B==="start"?"\u5F00\u53D1\u73AF\u5883\u542F\u52A8\u6210\u529F":"\u5F00\u53D1\u670D\u52A1\u5668\u91CD\u542F\u6210\u529F"),Se="";return ve&&(Se=Le),{success:!0,devServerUrl:H,message:Se||Le}}else{D(!1),o?.(!1);var ge=S?.message||"".concat(B==="start"?"\u542F\u52A8\u5F00\u53D1\u73AF\u5883\u5931\u8D25":"\u91CD\u542F\u5F00\u53D1\u670D\u52A1\u5668\u5931\u8D25"),m=S?.code||"UNKNOWN_ERROR";N(ge),h(m);var z="";return ve&&(z=ge),{success:!1,message:z||ge}}},[s,o]),xe=(0,n.useCallback)(function(S){var B;if(S?.code!=="0000"){var K=S?.message||"\u9519\u8BEF\u4FE1\u606F",ve=S?.code||"KEEPALIVE_ERROR";N(K),h(ve),D(!1),o?.(!1);return}if(N(null),h(null),D(!0),o?.(!0),S!=null&&(B=S.data)!==null&&B!==void 0&&B.devServerUrl){var L=S.data.devServerUrl,H=F;L!==H&&(j(L),s?.(L))}},[F,s,o]),re=(0,n.useCallback)(function(){r&&(Te.current&&(clearInterval(Te.current),Te.current=null),jt(r).then(function(S){xe(S)}).catch(function(){}),Te.current=setInterval(function(){jt(r).then(function(S){xe(S)}).catch(function(){})},le.SSE_HEARTBEAT_INTERVAL))},[r,xe]),Ke=(0,n.useCallback)(function(){Te.current&&(clearInterval(Te.current),Te.current=null)},[]),ne=(0,n.useCallback)(I()(u()().mark(function S(){var B,K;return u()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(r){L.next=2;break}return L.abrupt("return");case 2:if(he.current!==r&&(T.current=!1,he.current=r),!T.current){L.next=5;break}return L.abrupt("return");case 5:return L.prev=5,T.current=!0,y(!0),N(null),h(null),L.next=12,pr(r);case 12:return B=L.sent,K=ke(B,"start",!1),K.success&&K.devServerUrl&&(j(K.devServerUrl),s?.(K.devServerUrl)),y(!1),re(),L.abrupt("return",K);case 20:L.prev=20,L.t0=L.catch(5),y(!1),D(!1),N((L.t0===null||L.t0===void 0?void 0:L.t0.message)||"\u542F\u52A8\u5F00\u53D1\u73AF\u5883\u5931\u8D25"),h((L.t0===null||L.t0===void 0?void 0:L.t0.code)||"START_ERROR"),o?.(!1),re();case 28:case"end":return L.stop()}},S,null,[[5,20]])})),[r,ke,o,re]),pe=(0,n.useCallback)(I()(u()().mark(function S(){var B,K,ve,L,H,Le,Se=arguments;return u()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(B=Se.length>0&&Se[0]!==void 0?Se[0]:!1,r){m.next=4;break}return B&&De.ZP.error("\u9879\u76EEID\u4E0D\u5B58\u5728\u6216\u65E0\u6548\uFF0C\u65E0\u6CD5\u91CD\u542F\u670D\u52A1"),m.abrupt("return",{success:!1,message:"\u9879\u76EEID\u4E0D\u5B58\u5728\u6216\u65E0\u6548"});case 4:return m.prev=4,Ke(),X.setAutoHandlingEnabled(!1),P(!0),j(null),N(null),h(null),m.next=13,Kr(r);case 13:ve=m.sent,L=ke(ve,"restart",B),L.success&&L.devServerUrl&&(j(L.devServerUrl),s?.(L.devServerUrl)),P(!1),re(),K=L,m.next=32;break;case 21:m.prev=21,m.t0=m.catch(4),P(!1),D(!1),H=(m.t0===null||m.t0===void 0?void 0:m.t0.message)||"\u91CD\u542F\u5F00\u53D1\u670D\u52A1\u5668\u5931\u8D25",Le=(m.t0===null||m.t0===void 0?void 0:m.t0.code)||"RESTART_ERROR",N(H),h(Le),o?.(!1),re(),K={success:!1,message:H};case 32:return m.prev=32,a(),X.setAutoHandlingEnabled(!0),m.finish(32);case 36:return m.abrupt("return",K);case 37:case"end":return m.stop()}},S,null,[[4,21,32,36]])})),[r,ke,o,s,Ke,re]),G=(0,n.useCallback)(function(){j(null),D(!1),y(!1),P(!1),N(null),T.current=!1,o?.(!1)},[o]);return(0,n.useEffect)(function(){return r&&Promise.resolve().then(function(){ne()}),function(){Ke()}},[r]),(0,n.useEffect)(function(){return function(){Ke()}},[]),{isStarting:d,isRestarting:R,devServerUrl:F,isRunning:g,serverMessage:O,serverErrorCode:de,startServer:ne,restartServer:pe,resetServer:G,stopKeepAlive:Ke}},un=function(e){var r=e.projectId,s=e.onVersionSwitchSuccess,a=(0,n.useState)(!1),o=w()(a,2),l=o[0],p=o[1],d=(0,n.useState)(null),y=w()(d,2),M=y[0],C=y[1],R=(0,n.useState)(!1),P=w()(R,2),A=P[0],k=P[1],F=(0,n.useState)(!1),j=w()(F,2),Z=j[0],b=j[1],g=(0,n.useState)([]),D=w()(g,2),x=D[0],U=D[1],O=(0,n.useCallback)(function(de){var h=new Map,T=[];de.forEach(function(X){var ke=X.name.replace("../../project_zips/1976620100358377472/his_temp/",""),xe=ke.split("/"),re={id:ke,name:xe[xe.length-1],type:"file",path:ke,content:String(X.contents||""),lastModified:Date.now(),children:[]};h.set(ke,re)});var he=new Map;de.forEach(function(X){for(var ke=X.name.replace("../../project_zips/1976620100358377472/his_temp/",""),xe=ke.split("/"),re=0;re<xe.length-1;re++){var Ke=xe.slice(0,re+1).join("/"),ne=xe[re];if(!he.has(Ke)){var pe={id:Ke,name:ne,type:"folder",path:Ke,children:[]};he.set(Ke,pe)}}}),h.forEach(function(X){var ke=X.path.split("/");if(ke.length===1)T.push(X);else{var xe=ke.slice(0,-1).join("/"),re=he.get(xe);re&&re.children&&re.children.push(X)}}),he.forEach(function(X){var ke=X.path.split("/");if(ke.length===1)T.push(X);else{var xe=ke.slice(0,-1).join("/"),re=he.get(xe);re&&re.children&&re.children.push(X)}});var Te=function X(ke){return ke.sort(function(xe,re){return xe.type!==re.type?xe.type==="folder"?-1:1:xe.name.localeCompare(re.name)}).map(function(xe){return f()(f()({},xe),{},{children:xe.children?X(xe.children):[]})})};return Te(T)},[]),N=(0,n.useCallback)(function(){var de=I()(u()().mark(function h(T){var he,Te,X,ke;return u()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(r){re.next=3;break}return De.ZP.error("\u9879\u76EEID\u4E0D\u5B58\u5728"),re.abrupt("return");case 3:return re.prev=3,k(!0),C(T),re.next=8,Re(r,T);case 8:if(Te=re.sent,X=Te==null||(he=Te.data)===null||he===void 0?void 0:he.files,!(Te?.code==="0000"&&X)){re.next=16;break}ke=O(X),U(ke),p(!0),re.next=17;break;case 16:throw new Error(Te?.message||"\u83B7\u53D6\u7248\u672C\u6587\u4EF6\u5931\u8D25");case 17:re.next=22;break;case 19:re.prev=19,re.t0=re.catch(3),De.ZP.error("\u7248\u672C\u5BF9\u6BD4\u5931\u8D25: ".concat(re.t0.message||"\u672A\u77E5\u9519\u8BEF"));case 22:return re.prev=22,k(!1),re.finish(22);case 25:case"end":return re.stop()}},h,null,[[3,19,22,25]])}));return function(h){return de.apply(this,arguments)}}(),[r,O]),J=(0,n.useCallback)(function(){p(!1),C(null),U([])},[]),E=(0,n.useCallback)(I()(u()().mark(function de(){var h,T,he;return u()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!(!r||!M)){X.next=3;break}return De.ZP.error("\u9879\u76EEID\u6216\u76EE\u6807\u7248\u672C\u4E0D\u5B58\u5728"),X.abrupt("return");case 3:return X.prev=3,b(!0),h=[],T=function ke(xe){xe.forEach(function(re){re.type==="file"&&re.content&&h.push({name:re.path,contents:re.content,binary:!1}),re.children&&ke(re.children)})},T(x),X.next=10,Zt(r,h);case 10:if(he=X.sent,he?.code!=="0000"){X.next=17;break}J(),s?.(),De.ZP.success("\u7248\u672C\u5207\u6362\u6210\u529F"),X.next=18;break;case 17:throw new Error(he?.message||"\u7248\u672C\u5207\u6362\u5931\u8D25");case 18:X.next=23;break;case 20:X.prev=20,X.t0=X.catch(3),De.ZP.error("\u7248\u672C\u5207\u6362\u5931\u8D25: ".concat(X.t0.message||"\u672A\u77E5\u9519\u8BEF"));case 23:return X.prev=23,b(!1),X.finish(23);case 26:case"end":return X.stop()}},de,null,[[3,20,23,26]])})),[r,M,x,J,s]);return{isComparing:l,targetVersion:M,versionFiles:x,startVersionCompare:N,cancelCompare:J,confirmVersionSwitch:E,isLoadingVersion:A,isSwitching:Z}},ss=null,ha=function(e){var r=e.onAddToChat,s=e.isChatLoading,a=e.enabled,o=a===void 0?!0:a,l=(0,yt.useModel)("autoErrorHandling"),p=(0,n.useRef)(l);p.current=l;var d=(0,n.useRef)(!1),y=(0,n.useCallback)(function(){p.current.resetAutoRetryCount(),d.current=!1},[]),M=(0,n.useCallback)(function(){p.current.resetAndEnableAutoHandling(),d.current=!1},[]),C=(0,n.useCallback)(function(){p.current.cancelAutoHandling(),d.current=!1},[]),R=(0,n.useCallback)(function(){p.current.incrementAutoRetryCount()},[]),P=(0,n.useCallback)(function(j){p.current.resetAutoRetryCount(),p.current.setAutoHandlingEnabled(!0),d.current=!1,r(j,!0,R)},[r]),A=(0,n.useCallback)(function(j){d.current||p.current.hasShownConfirmModal||(d.current=!0,p.current.setHasShownConfirmModal(!0),$t.Z.confirm({title:"\u81EA\u52A8\u9519\u8BEF\u5904\u7406\u5DF2\u8FBE\u4E0A\u9650",content:"\u662F\u5426\u7EE7\u7EED\u81EA\u52A8\u5904\u7406\u5F53\u524D\u95EE\u9898\uFF1F",okText:"\u7EE7\u7EED",cancelText:"\u53D6\u6D88",onOk:function(){P(j),d.current=!1},onCancel:function(){C(),d.current=!1}}))},[P,C]),k=(0,n.useCallback)(function(j,Z){var b=j.trim();if(!b)return"";switch(Z){case"whiteScreen":return"\u68C0\u6D4B\u5230\u9884\u89C8\u9875\u9762\u767D\u5C4F\uFF0C\u6355\u83B7\u5230\u4EE5\u4E0B\u9519\u8BEF\uFF0C\u8BF7\u5206\u6790\u5E76\u4FEE\u590D\uFF1A\n\n```\n".concat(b,"\n```");case"log":return"\u5206\u6790\u4EE5\u4E0B\u65E5\u5FD7\u5E76\u4FEE\u590D\u9519\u8BEF\uFF1A\n\n```\n".concat(b,"\n```");case"iframe":return"\u9884\u89C8\u9875\u9762\u52A0\u8F7D\u5931\u8D25\uFF0C\u8BF7\u5206\u6790\u5E76\u4FEE\u590D\uFF1A\n\n```\n".concat(b,"\n```");default:return b}},[]),F=(0,n.useCallback)(function(j){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"whiteScreen",b=arguments.length>2?arguments[2]:void 0,g=p.current;if(!o||!g.isAutoHandlingEnabled){console.warn("[AutoErrorHandling] \u81EA\u52A8\u9519\u8BEF\u5904\u7406\u672A\u542F\u7528\uFF0C\u8DF3\u8FC7\u81EA\u5B9A\u4E49\u9519\u8BEF\u5904\u7406");return}if(s){console.warn("[AutoErrorHandling] AI \u6B63\u5728\u5904\u7406\u4E2D\uFF0C\u8DF3\u8FC7\u81EA\u5B9A\u4E49\u9519\u8BEF\u5904\u7406");return}if(j.trim()){var D=k(j,Z),x=D.trim(),U=x===g.lastCustomErrorHash;if(U){console.info("[AutoErrorHandling] \u8DF3\u8FC7\u91CD\u590D\u7684\u81EA\u5B9A\u4E49\u9519\u8BEF");return}if(!b){r(D,!1);return}g.setLastCustomErrorHash(x),console.info("[AutoErrorHandling] \u5F53\u524D\u81EA\u52A8\u53D1\u9001\u6B21\u6570\u4E3A".concat(g.autoRetryCount),D,ot()(Date.now()).format("YYYY-MM-DD HH:mm:ss")),g.autoRetryCount<3?r(D,!0,R):!g.hasShownConfirmModal&&!d.current&&A(D)}},[o,s,k,r,R,A]);return{autoRetryCount:l.autoRetryCount,isAutoHandlingEnabled:l.isAutoHandlingEnabled,handleCustomError:F,resetAutoRetryCount:y,handleUserConfirmContinue:P,resetAndEnableAutoHandling:M,handleUserCancelAuto:C,setAutoSendCount:R}},ga=function(c){return c.WORKFLOW="workflow",c.PLUGIN="plugin",c.REVERSE_PROXY="reverse_proxy",c}({}),Pn=function(c){return c.ACTIVE="active",c.INACTIVE="inactive",c.ERROR="error",c.CONFIGURING="configuring",c}({}),Za=function(){var e=(0,n.useState)([]),r=w()(e,2),s=r[0],a=r[1],o=(0,n.useState)(!1),l=w()(o,2),p=l[0],d=l[1],y=(0,n.useState)(0),M=w()(y,2),C=M[0],R=M[1],P=(0,n.useCallback)(I()(u()().mark(function b(){var g,D,x=arguments;return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:g=x.length>0&&x[0]!==void 0?x[0]:[];try{d(!0),D=g.map(function(N){return{id:N.id,name:N.name,icon:N.icon||"",description:N.description||"",type:N.type==="plugin"?ga.PLUGIN:ga.WORKFLOW,status:N.status==="active"?Pn.ACTIVE:Pn.INACTIVE,createdAt:N.createdAt||new Date().toISOString(),updatedAt:N.updatedAt||new Date().toISOString(),config:N.config||{},tags:N.tags||[],enabled:N.enabled!==!1}}),a(D),R(D.length)}catch(N){console.error("\u83B7\u53D6\u6570\u636E\u8D44\u6E90\u5217\u8868\u5931\u8D25:",N),De.ZP.error("\u83B7\u53D6\u6570\u636E\u8D44\u6E90\u5217\u8868\u5931\u8D25")}finally{d(!1)}case 2:case"end":return O.stop()}},b)})),[a,R,d]),A=(0,n.useCallback)(function(){var b=I()(u()().mark(function g(D){var x;return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,d(!0),O.next=4,new Promise(function(N){setTimeout(function(){return N()},1e3)});case 4:return x={id:Date.now().toString(),name:D.name,description:D.description,type:D.type,status:Pn.ACTIVE,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),config:D.config,tags:D.tags||[],enabled:!0},a(function(N){return[x].concat(v()(N))}),R(function(N){return N+1}),De.ZP.success("\u6570\u636E\u8D44\u6E90\u521B\u5EFA\u6210\u529F"),O.abrupt("return",{success:!0,message:"\u521B\u5EFA\u6210\u529F",data:x});case 11:return O.prev=11,O.t0=O.catch(0),console.error("\u521B\u5EFA\u6570\u636E\u8D44\u6E90\u5931\u8D25:",O.t0),De.ZP.error("\u521B\u5EFA\u6570\u636E\u8D44\u6E90\u5931\u8D25"),O.abrupt("return",{success:!1,message:"\u521B\u5EFA\u5931\u8D25"});case 16:return O.prev=16,d(!1),O.finish(16);case 19:case"end":return O.stop()}},g,null,[[0,11,16,19]])}));return function(g){return b.apply(this,arguments)}}(),[]),k=(0,n.useCallback)(function(){var b=I()(u()().mark(function g(D){return u()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,d(!0),U.next=4,new Promise(function(O){setTimeout(function(){return O()},800)});case 4:return a(function(O){return O.map(function(N){return N.id===D.id?f()(f()(f()({},N),D),{},{updatedAt:new Date().toISOString()}):N})}),De.ZP.success("\u6570\u636E\u8D44\u6E90\u66F4\u65B0\u6210\u529F"),U.abrupt("return",{success:!0,message:"\u66F4\u65B0\u6210\u529F"});case 9:return U.prev=9,U.t0=U.catch(0),console.error("\u66F4\u65B0\u6570\u636E\u8D44\u6E90\u5931\u8D25:",U.t0),De.ZP.error("\u66F4\u65B0\u6570\u636E\u8D44\u6E90\u5931\u8D25"),U.abrupt("return",{success:!1,message:"\u66F4\u65B0\u5931\u8D25"});case 14:return U.prev=14,d(!1),U.finish(14);case 17:case"end":return U.stop()}},g,null,[[0,9,14,17]])}));return function(g){return b.apply(this,arguments)}}(),[]),F=(0,n.useCallback)(function(){var b=I()(u()().mark(function g(D){return u()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,d(!0),U.next=4,new Promise(function(O){setTimeout(function(){return O()},600)});case 4:return a(function(O){return O.filter(function(N){return N.id!==D})}),R(function(O){return O-1}),De.ZP.success("\u6570\u636E\u8D44\u6E90\u5220\u9664\u6210\u529F"),U.abrupt("return",{success:!0,message:"\u5220\u9664\u6210\u529F"});case 10:return U.prev=10,U.t0=U.catch(0),console.error("\u5220\u9664\u6570\u636E\u8D44\u6E90\u5931\u8D25:",U.t0),De.ZP.error("\u5220\u9664\u6570\u636E\u8D44\u6E90\u5931\u8D25"),U.abrupt("return",{success:!1,message:"\u5220\u9664\u5931\u8D25"});case 15:return U.prev=15,d(!1),U.finish(15);case 18:case"end":return U.stop()}},g,null,[[0,10,15,18]])}));return function(g){return b.apply(this,arguments)}}(),[]),j=(0,n.useCallback)(function(){var b=I()(u()().mark(function g(D,x){return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,d(!0),O.next=4,new Promise(function(N){setTimeout(function(){return N()},500)});case 4:return a(function(N){return N.map(function(J){return J.id===D?f()(f()({},J),{},{enabled:x,status:x?Pn.ACTIVE:Pn.INACTIVE,updatedAt:new Date().toISOString()}):J})}),O.abrupt("return",{success:!0,message:x?"\u542F\u7528\u6210\u529F":"\u505C\u7528\u6210\u529F"});case 8:return O.prev=8,O.t0=O.catch(0),console.error("\u5207\u6362\u8D44\u6E90\u72B6\u6001\u5931\u8D25:",O.t0),De.ZP.error("\u5207\u6362\u8D44\u6E90\u72B6\u6001\u5931\u8D25"),O.abrupt("return",{success:!1,message:"\u64CD\u4F5C\u5931\u8D25"});case 13:return O.prev=13,d(!1),O.finish(13);case 16:case"end":return O.stop()}},g,null,[[0,8,13,16]])}));return function(g,D){return b.apply(this,arguments)}}(),[]),Z=(0,n.useCallback)(I()(u()().mark(function b(){var g;return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,d(!0),x.next=4,new Promise(function(U){setTimeout(function(){return U()},2e3)});case 4:if(g=Math.random()>.3,!g){x.next=10;break}return De.ZP.success("\u8FDE\u63A5\u6D4B\u8BD5\u6210\u529F"),x.abrupt("return",{success:!0,message:"\u8FDE\u63A5\u6D4B\u8BD5\u6210\u529F"});case 10:return De.ZP.error("\u8FDE\u63A5\u6D4B\u8BD5\u5931\u8D25"),x.abrupt("return",{success:!1,message:"\u8FDE\u63A5\u6D4B\u8BD5\u5931\u8D25"});case 12:x.next=19;break;case 14:return x.prev=14,x.t0=x.catch(0),console.error("\u6D4B\u8BD5\u8D44\u6E90\u8FDE\u63A5\u5931\u8D25:",x.t0),De.ZP.error("\u6D4B\u8BD5\u8D44\u6E90\u8FDE\u63A5\u5931\u8D25"),x.abrupt("return",{success:!1,message:"\u6D4B\u8BD5\u5931\u8D25"});case 19:return x.prev=19,d(!1),x.finish(19);case 22:case"end":return x.stop()}},b,null,[[0,14,19,22]])})),[]);return{resources:s,loading:p,total:C,fetchResources:P,createResource:A,updateResource:k,deleteResource:F,toggleResourceStatus:j,testResourceConnection:Z}},Ga=i(76571),Ka=function(e){var r=e.projectId,s=e.server,a=e.setActiveTab,o=e.previewRef,l=(0,n.useCallback)(function(){var p=I()(u()().mark(function d(y){var M,C,R,P,A,k,F,j,Z,b;return u()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(M=y||{},C=M.shouldSwitchTab,R=C===void 0?!0:C,P=M.delayBeforeRefresh,A=P===void 0?500:P,k=M.showMessage,F=k===void 0?!0:k,r){D.next=5;break}return j="\u9879\u76EEID\u4E0D\u5B58\u5728\u6216\u65E0\u6548\uFF0C\u65E0\u6CD5\u91CD\u542F\u670D\u52A1",F&&De.ZP.error(j),D.abrupt("return",{success:!1,message:j});case 5:if(D.prev=5,!(R&&a)){D.next=10;break}return a("preview"),D.next=10,new Promise(function(x){return setTimeout(x,100)});case 10:return D.next=12,s.restartServer(R);case 12:return Z=D.sent,Z.success&&o!==null&&o!==void 0&&o.current&&setTimeout(function(){var x;(x=o.current)===null||x===void 0||x.refresh()},A),F&&(Z.success||Z.message&&De.ZP.error(Z.message)),D.abrupt("return",Z);case 18:return D.prev=18,D.t0=D.catch(5),b=(D.t0===null||D.t0===void 0?void 0:D.t0.message)||"\u91CD\u542F\u5F00\u53D1\u670D\u52A1\u5668\u5931\u8D25",F&&De.ZP.error(b),D.abrupt("return",{success:!1,message:b});case 23:case"end":return D.stop()}},d,null,[[5,18]])}));return function(d){return p.apply(this,arguments)}}(),[r,s,a,o]);return{restartDevServer:l}},Ze=i(27689),ye=i(80241),Ge=i(75076),ht=i(35855),Rt=i(22694),tr=i(15739),kt=i(69219),Qt=i(91716),Ar=i(7010),Be=i(9504),Yn=i(73981),Wt=i(68108),Ca=i(7980),Bn=i(63619),vi=i(94581),On=i.n(vi),is=i(22675),ir=i(62597),mi=i(28397),os=i(57209),hi=i(89858),gi=i(4692),Ci=i(7036),Si=i(98770),ls=i(63876),us=i(12758),_r={"xagi-nav-style2":"xagi-nav-style2___AR2Jh",text:"text___vUehJ","page-container":"page-container___eH0DL",header:"header___tSs6z","icon-backward":"icon-backward___obGAV","version-history-icon":"version-history-icon___xnjeq",avatar:"avatar___kOXs4","edit-ico":"edit-ico___vsb26","project-icon":"project-icon___FJuXO","header-info":"header-info___KLnyP","h-title":"h-title___zNobE","agent-rel-info":"agent-rel-info___E9DQQ","space-name":"space-name___nahwg","project-id":"project-id___GXD4G",volcano:"volcano___uHSpZ",circle:"circle___JcbaE","action-buttons":"action-buttons___SITUa",navButton:"navButton___SeEUA",actionButton:"actionButton___uqyt_",deployButton:"deployButton___JS7Pu","right-box":"right-box___hHmAj","header-title":"header-title___p2gH9",fold:"fold___fXNx3",ico:"ico___w1ncB"},t=i(52676),kr=On().bind(_r),yi=function(e){var r=e.workspace,s=e.onPublishComponent,a=e.onPublishApplication,o=e.onEditProject,l=e.onOpenVersionHistory,p=e.spaceId,d=e.hasUpdates,y=d===void 0?!0:d,M=e.isDeploying,C=M===void 0?!1:M,R=e.isChatLoading,P=R===void 0?!1:R,A=e.projectInfo,k=e.previewRef,F=A?.name||r.name||"\u5927\u6A21\u578B\u4E09\u90E8\u66F2",j=A?.icon,Z=A?.buildRunning,b=function(U){switch(U.value){case Ge.sO.PAGE:s();break;case Ge.sO.AGENT:a();break}},g=(0,n.useMemo)(function(){return A?.publishType===Ge.sO.AGENT?os.Mu.filter(function(x){return x.value===Ge.sO.AGENT}):os.Mu},[A?.publishType]),D=function(){if(k!=null&&k.current)try{var U=k.current.getHistoryBackCount();if(U>0){k.current.backInIframe(U),setTimeout(function(){(0,ln.bC)("/space/".concat(p,"/page-develop"))},100);return}}catch(O){console.warn("[AppDevHeader] \u5904\u7406 iframe \u56DE\u9000\u5931\u8D25:",O)}(0,ln.bC)("/space/".concat(p,"/page-develop"))};return(0,t.jsxs)("header",{className:kr("flex","items-center","relative",_r.header),children:[(0,t.jsx)(ir.Z,{name:"icons-nav-backward",className:kr(_r["icon-backward"]),onClick:D}),(0,t.jsx)(Ar.Z,{size:27,wrap:!0,children:(0,t.jsx)(Si.Z,{size:27,shape:"square",src:j||is})}),(0,t.jsxs)("div",{className:kr("flex","items-center",_r["header-info"]),children:[(0,t.jsx)("h3",{className:kr(_r["h-title"],"text-ellipsis"),children:F}),(0,t.jsx)(hi.Z,{className:kr(_r["edit-ico"],"cursor-pointer"),onClick:o}),(0,t.jsxs)("div",{className:kr("flex","items-center",_r["agent-rel-info"]),children:[r.projectId&&(0,t.jsxs)("span",{className:kr(_r["project-id"]),children:["\u9879\u76EEID: ",r.projectId]}),Z&&(0,t.jsx)(ls.Z,{content:"\u5DF2\u53D1\u5E03",children:(0,t.jsx)(gi.Z,{className:kr(_r.circle)})}),y&&(0,t.jsx)(us.Z,{bordered:!1,color:"volcano",className:kr(_r.volcano),children:"\u6709\u66F4\u65B0\u672A\u53D1\u5E03"})]})]}),(0,t.jsxs)("div",{className:kr(_r["right-box"],"flex","items-center"),children:[(0,t.jsx)(vt.Z,{condition:A?.publishType===Ge.sO.AGENT,children:(0,t.jsx)(Wt.Z,{title:"\u7248\u672C\u5386\u53F2",children:(0,t.jsx)(Ci.Z,{className:kr("ico","cursor-pointer",_r["version-history-icon"]),onClick:l})})}),(0,t.jsx)(mi.Z,{list:g,onClick:b,children:(0,t.jsx)("div",{className:kr("flex","items-center",_r["action-buttons"]),children:(0,t.jsx)(Be.ZP,{type:"primary",loading:C,className:_r.deployButton,disabled:P,children:C?"\u53D1\u5E03\u4E2D...":"\u53D1\u5E03"})})})]})]})},Ei=yi,eu={paths:{vs:"/vs"}},Ai={ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",mjs:"javascript",cjs:"javascript",css:"css",less:"less",scss:"scss",sass:"scss",html:"html",htm:"html",vue:"html",json:"json",jsonc:"jsonc",json5:"json",md:"markdown",markdown:"markdown",xml:"xml",yaml:"yaml",yml:"yaml",toml:"toml",ini:"ini",cfg:"ini",conf:"ini",py:"python",python:"python",java:"java",c:"c",cpp:"cpp",cc:"cpp",cxx:"cpp",h:"c",hpp:"cpp",cs:"csharp",php:"php",rb:"ruby",go:"go",rs:"rust",swift:"swift",kt:"kotlin",scala:"scala",sh:"shell",bash:"shell",zsh:"shell",fish:"shell",ps1:"powershell",ps:"powershell",bat:"bat",cmd:"bat",sql:"sql",mysql:"sql",pgsql:"sql",sqlite:"sql",dockerfile:"dockerfile",dockerignore:"plaintext",gitignore:"plaintext",gitattributes:"plaintext",env:"plaintext",envlocal:"plaintext",envdev:"plaintext",envprod:"plaintext",txt:"plaintext",log:"plaintext",lock:"plaintext",lockb:"plaintext"},Un=function(e){var r;if(!e||typeof e!="string")return"plaintext";var s=e.toLowerCase(),a={dockerfile:"dockerfile",makefile:"makefile",rakefile:"ruby",gemfile:"ruby",podfile:"ruby",vagrantfile:"ruby",berksfile:"ruby",cheffile:"ruby",capfile:"ruby","config.ru":"ruby",guardfile:"ruby",fastfile:"ruby",appfile:"ruby",matchfile:"ruby",snapfile:"ruby",scanfile:"ruby",gymfile:"ruby",deliverfile:"ruby",pilotfile:"ruby",precheckfile:"ruby",supplyfile:"ruby",screengrabfile:"ruby"};if(a[s])return a[s];var o=e.split(".");if(o.length<2)return"plaintext";var l=(r=o.pop())===null||r===void 0?void 0:r.toLowerCase();if(!l)return"plaintext";var p={"d.ts":"typescript",vue:"vue",jsx:"javascript",tsx:"typescript",mjs:"javascript",cjs:"javascript"};if(o.length>1){var d=o.slice(-2).join(".");if(p[d])return p[d]}return Ai[l]||"plaintext"},tu=function(e){var r=Un(e);return r!=="plaintext"},ru=function(e){var r=Un(e),s={typescript:"TypeScript",javascript:"JavaScript",css:"CSS",less:"Less",scss:"SCSS",html:"HTML",vue:"Vue",json:"JSON",jsonc:"JSON with Comments",markdown:"Markdown",xml:"XML",yaml:"YAML",toml:"TOML",ini:"INI",python:"Python",java:"Java",c:"C",cpp:"C++",csharp:"C#",php:"PHP",ruby:"Ruby",go:"Go",rust:"Rust",swift:"Swift",kotlin:"Kotlin",scala:"Scala",shell:"Shell",powershell:"PowerShell",bat:"Batch",sql:"SQL",dockerfile:"Dockerfile",makefile:"Makefile",plaintext:"Plain Text"};return s[r]||"Unknown"},cs={target:5,allowNonTsExtensions:!0,moduleResolution:2,module:5,noEmit:!0,esModuleInterop:!0,jsx:2,reactNamespace:"React",allowJs:!0,typeRoots:["node_modules/@types"],lib:["ES2020","DOM","DOM.Iterable"],skipLibCheck:!0,strict:!1,forceConsistentCasingInFileNames:!0,resolveJsonModule:!0,isolatedModules:!0,noEmitOnError:!0},ds={target:5,allowNonTsExtensions:!0,moduleResolution:2,module:5,noEmit:!0,esModuleInterop:!0,jsx:2,reactNamespace:"React",allowJs:!0,lib:["ES2020","DOM","DOM.Iterable"],skipLibCheck:!0,strict:!1,forceConsistentCasingInFileNames:!0,resolveJsonModule:!0,isolatedModules:!0,noEmitOnError:!0},nu={id:"vue",extensions:[".vue"],aliases:["Vue","vue"],configuration:{comments:{blockComment:["<!--","-->"],lineComment:"//"},brackets:[["<!--","-->"],["<",">"],["{","}"],["(",")"],["[","]"]],autoClosingPairs:[{open:"<",close:">"},{open:"{",close:"}"},{open:"(",close:")"},{open:"[",close:"]"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"<",close:">"},{open:"{",close:"}"},{open:"(",close:")"},{open:"[",close:"]"},{open:'"',close:'"'},{open:"'",close:"'"}]}},_i={automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:12,fontFamily:"'JetBrains Mono', monospace, 'Fira Code','Consolas', 'Monaco', 'Courier New'",lineHeight:20,tabSize:2,insertSpaces:!0,minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",renderLineHighlight:"all",selectOnLineNumbers:!0,matchBrackets:"always",autoIndent:"advanced",formatOnPaste:!0,formatOnType:!0,suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},autoSave:"afterDelay",autoSaveDelay:1e3,folding:!0,foldingStrategy:"indentation",autoClosingBrackets:"always",autoClosingQuotes:"always",smartIndent:!0,dragAndDrop:!0,multiCursorModifier:"ctrlCmd",acceptSuggestionOnEnter:"on",hover:{enabled:!0,delay:300},suggest:{showKeywords:!0,showSnippets:!0,showFunctions:!0,showConstructors:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showIssues:!0,showUsers:!0,showWords:!0},renderWhitespace:"selection",renderControlCharacters:!1,renderIndentGuides:!0,renderFinalNewline:"on",cursorBlinking:"blink",cursorSmoothCaretAnimation:"off",cursorStyle:"line",fontLigatures:!0,fontWeight:"normal",letterSpacing:0,stickyScroll:{enabled:!1},diagnostics:{enabled:!1},validate:!1,renderValidationDecorations:"off"},ps=i(56101),or=i(8871),Ir={"xagi-nav-style2":"xagi-nav-style2___Qz_g_",text:"text___o8oI_","page-container":"page-container___g33oF",monacoEditor:"monacoEditor___KbN_S",editorContainer:"editorContainer___WuAV7",editor:"editor___jpEAq",emptyState:"emptyState___rtMTh",emptyIcon:"emptyIcon___rGqtu",emptyTitle:"emptyTitle___F_4cm",emptyDescription:"emptyDescription___On_xE"},bi=function(e){var r=e.currentFile,s=e.onContentChange,a=e.readOnly,o=a===void 0?!1:a,l=e.className,p=(0,n.useRef)(null),d=(0,n.useRef)(null),y=(0,n.useState)(!1),M=w()(y,2),C=M[0],R=M[1],P=(0,n.useRef)(!1),A=(0,n.useRef)(!1),k=(0,n.useRef)(null),F=(0,n.useRef)(!1),j=(0,n.useRef)(),Z=(0,n.useRef)(),b=(0,n.useCallback)(function(){var N=I()(u()().mark(function J(E){return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!E||E==="plaintext")){h.next=2;break}return h.abrupt("return");case 2:h.prev=2,h.t0=E,h.next=h.t0==="typescript"||h.t0==="javascript"?6:h.t0==="css"?10:h.t0==="scss"?13:h.t0==="less"?16:h.t0==="html"?19:h.t0==="vue"?22:23;break;case 6:return or.languages.typescript.typescriptDefaults.setCompilerOptions(cs),or.languages.typescript.javascriptDefaults.setCompilerOptions(ds),or.languages.typescript.typescriptDefaults.setExtraLibs([{content:`
                declare module 'react' {
                  export * from 'react';
                }
                declare module 'react-dom' {
                  export * from 'react-dom';
                }
                declare module 'vue' {
                  export * from 'vue';
                }
                // Vue\u7C7B\u578B\u5B9A\u4E49
                declare global {
                  namespace JSX {
                    interface IntrinsicElements {
                      [elem: string]: any;
                    }
                  }
                }
              `,filePath:"global.d.ts"}]),h.abrupt("break",32);case 10:return h.next=12,Promise.resolve().then(i.bind(i,89541));case 12:return h.abrupt("break",32);case 13:return h.next=15,Promise.resolve().then(i.bind(i,41544));case 15:return h.abrupt("break",32);case 16:return h.next=18,Promise.resolve().then(i.bind(i,59947));case 18:return h.abrupt("break",32);case 19:return h.next=21,Promise.resolve().then(i.bind(i,53217));case 21:return h.abrupt("break",32);case 22:return h.abrupt("break",32);case 23:return h.prev=23,h.next=26,i(64234)("./".concat(E,"/").concat(E,".contribution"));case 26:h.next=31;break;case 28:h.prev=28,h.t1=h.catch(23),console.warn("[MonacoEditor] \u65E0\u6CD5\u52A0\u8F7D\u8BED\u8A00\u652F\u6301: ".concat(E),h.t1);case 31:return h.abrupt("break",32);case 32:h.next=37;break;case 34:h.prev=34,h.t2=h.catch(2),console.error("\u274C [MonacoEditor] \u52A0\u8F7D\u8BED\u8A00\u652F\u6301\u5931\u8D25 (".concat(E,"):"),h.t2);case 37:case"end":return h.stop()}},J,null,[[2,34],[23,28]])}));return function(J){return N.apply(this,arguments)}}(),[]),g=(0,n.useCallback)(I()(u()().mark(function N(){return u()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!C){E.next=2;break}return E.abrupt("return");case 2:return E.prev=2,ps._m.config({monaco:or,paths:{vs:"/vs"}}),E.next=6,ps._m.init();case 6:return E.prev=6,E.next=9,i.e(5457).then(i.bind(i,95457));case 9:E.next=14;break;case 11:E.prev=11,E.t0=E.catch(6),console.warn("\u26A0\uFE0F [MonacoEditor] HTML\u8BED\u8A00\u652F\u6301\u52A0\u8F7D\u5931\u8D25\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E:",E.t0);case 14:or.languages.typescript.typescriptDefaults.setCompilerOptions(cs),or.languages.typescript.javascriptDefaults.setCompilerOptions(ds),or.languages.typescript.typescriptDefaults.setExtraLibs([{content:`
            declare module 'react' {
              export * from 'react';
            }
            declare module 'react-dom' {
              export * from 'react-dom';
            }
            declare module '*.vue' {
              import { DefineComponent } from 'vue'
              const component: DefineComponent<{}, {}, any>
              export default component
            }
          `,filePath:"react.d.ts"}]),R(!0),E.next=23;break;case 20:E.prev=20,E.t1=E.catch(2),console.error("\u274C [MonacoEditor] Monaco Editor\u521D\u59CB\u5316\u5931\u8D25:",E.t1);case 23:case"end":return E.stop()}},N,null,[[2,20],[6,11]])})),[C]),D=(0,n.useCallback)(I()(u()().mark(function N(){var J,E;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(A.current||!d.current)){h.next=2;break}return h.abrupt("return");case 2:A.current=!0;try{if(J=d.current,J&&typeof J.isDisposed=="function"&&!J.isDisposed()){try{if(E=J.getModel(),E&&typeof E.isDisposed=="function"&&!E.isDisposed())try{E.dispose()}catch{}}catch{}try{J.dispose()}catch{}}}catch{}finally{d.current=null,F.current=!1,k.current=null,A.current=!1}case 4:case"end":return h.stop()}},N)})),[]),x=(0,n.useCallback)(function(){var N=I()(u()().mark(function J(E,de){return u()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,T.next=3,E();case 3:return T.abrupt("return",T.sent);case 6:if(T.prev=6,T.t0=T.catch(0),!(T.t0==="Canceled"||T.t0 instanceof Error&&(T.t0.message==="Canceled"||T.t0.message.includes("disposed")||T.t0.message.includes("canceled")||T.t0.message.includes("Cancelled")))){T.next=10;break}return T.abrupt("return",null);case 10:return console.error("\u274C ".concat(de,":"),T.t0),T.abrupt("return",null);case 12:case"end":return T.stop()}},J,null,[[0,6]])}));return function(J,E){return N.apply(this,arguments)}}(),[]),U=(0,n.useCallback)(I()(u()().mark(function N(){var J,E;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!p.current||!C||P.current)){h.next=2;break}return h.abrupt("return");case 2:if(!(F.current&&d.current&&k.current===r?.id)){h.next=4;break}return h.abrupt("return");case 4:if(!P.current){h.next=6;break}return h.abrupt("return");case 6:if(P.current=!0,h.prev=7,!(d.current&&F.current)){h.next=11;break}return h.next=11,x(function(){return D()},"Monaco Editor cleanup");case 11:return J=r?Un(r.name):"typescript",h.next=14,x(function(){return b(J)},"Monaco Editor language loading (".concat(J,")"));case 14:if(!A.current){h.next=16;break}return h.abrupt("return");case 16:return h.next=18,x(I()(u()().mark(function T(){var he;return u()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return he="vs",X.abrupt("return",or.editor.create(p.current,f()(f()({},_i),{},{readOnly:o,language:J,value:r?.content||"",theme:he,automaticLayout:!0,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:8,horizontalScrollbarSize:8}})));case 2:case"end":return X.stop()}},T)})),"Monaco Editor creation");case 18:if(E=h.sent,E){h.next=21;break}return h.abrupt("return");case 21:d.current=E,F.current=!0,k.current=r?.id||null;try{or.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0,noSuggestionDiagnostics:!0}),or.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0,noSuggestionDiagnostics:!0}),E.updateOptions({renderValidationDecorations:"off"})}catch{}o||E.onDidChangeModelContent(function(){if(r&&s&&!A.current){var T=E.getValue();s(r.id,T)}});try{E.addCommand(or.KeyMod.CtrlCmd|or.KeyCode.KeyS,function(){}),E.addCommand(or.KeyMod.CtrlCmd|or.KeyMod.Shift|or.KeyCode.KeyF,function(){var T;(T=E.getAction("editor.action.formatDocument"))===null||T===void 0||T.run()})}catch{}case 27:return h.prev=27,P.current=!1,h.finish(27);case 30:case"end":return h.stop()}},N,null,[[7,,27,30]])})),[C,r,s,o,Un,b,D,x]),O=(0,n.useCallback)(I()(u()().mark(function N(){var J,E,de,h,T,he,Te,X,ke;return u()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!(!d.current||!r||A.current)){re.next=2;break}return re.abrupt("return");case 2:if(J=d.current,!(J&&typeof J.isDisposed=="function"&&J.isDisposed())){re.next=5;break}return re.abrupt("return");case 5:if(k.current!==r.id){re.next=8;break}try{E=J.getModel(),E&&!E.isDisposed()&&(de=E.getValue(),h=r.content||"",de!==h&&E.setValue(h))}catch{}return re.abrupt("return");case 8:return re.prev=8,T=Un(r.name),re.next=12,b(T);case 12:if(he=J.getModel(),he&&!he.isDisposed()){if(Te=he.getValue(),X=r.content||"",Te!==X)try{or.editor.setModelLanguage(he,T),he.setValue(X)}catch{}}else if(J)try{ke=or.editor.createModel(r.content||"",T),J.setModel(ke)}catch{}re.next=19;break;case 16:re.prev=16,re.t0=re.catch(8),re.t0 instanceof Error&&(re.t0.message==="Canceled"||re.t0.message.includes("disposed"))||console.error("\u274C [MonacoEditor] \u66F4\u65B0\u7F16\u8F91\u5668\u5185\u5BB9\u5931\u8D25:",re.t0);case 19:case"end":return re.stop()}},N,null,[[8,16]])})),[r,Un,b]);return(0,n.useEffect)(function(){var N=function(E){var de,h,T=E.reason;if(T instanceof Error&&(T.message==="Canceled"||T.message.includes("disposed")||T.message.includes("canceled")||T.message.includes("Cancelled")||(de=T.stack)!==null&&de!==void 0&&de.includes("monaco-editor")||(h=T.stack)!==null&&h!==void 0&&h.includes("MonacoEditor"))){E.preventDefault(),console.debug("Monaco Editor promise rejected (expected during rapid operations):",T);return}(T==="Canceled"||typeof T=="string"&&T.toLowerCase().includes("cancel")||T&&on()(T)==="object"&&"message"in T&&typeof T.message=="string"&&T.message.toLowerCase().includes("cancel"))&&E.preventDefault()};return window.addEventListener("unhandledrejection",N),function(){window.removeEventListener("unhandledrejection",N)}},[]),(0,n.useEffect)(function(){if(0)var N,J},[]),(0,n.useEffect)(function(){j.current=U,Z.current=O}),(0,n.useEffect)(function(){g()},[]),(0,n.useEffect)(function(){C&&j.current&&j.current()},[C,r?.id]),(0,n.useEffect)(function(){C&&d.current&&r&&Z.current&&Z.current()},[C,r?.id,r?.content]),(0,n.useEffect)(function(){var N=function(){if(d.current&&!A.current)try{var de=d.current;if(de&&typeof de.isDisposed=="function"&&!de.isDisposed()){var h="vs";or.editor.setTheme(h)}}catch{}},J=new MutationObserver(N);return J.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),function(){J.disconnect()}},[]),(0,n.useEffect)(function(){return function(){D()}},[]),C?r?(0,t.jsx)("div",{className:"".concat(Ir.monacoEditor," ").concat(l||""),children:(0,t.jsx)("div",{className:Ir.editorContainer,children:(0,t.jsx)("div",{ref:p,className:Ir.editor})})}):(0,t.jsx)("div",{className:"".concat(Ir.monacoEditor," ").concat(l||""),children:(0,t.jsxs)("div",{className:Ir.emptyState,children:[(0,t.jsx)("div",{className:Ir.emptyIcon,children:"\u{1F4C4}"}),(0,t.jsx)("h3",{className:Ir.emptyTitle,children:"\u9009\u62E9\u6587\u4EF6\u8FDB\u884C\u7F16\u8F91"}),(0,t.jsx)("p",{className:Ir.emptyDescription,children:"\u4ECE\u5DE6\u4FA7\u6587\u4EF6\u6811\u4E2D\u9009\u62E9\u4E00\u4E2A\u6587\u4EF6\uFF0C\u6216\u521B\u5EFA\u65B0\u6587\u4EF6\u5F00\u59CB\u7F16\u8F91"})]})}):(0,t.jsx)("div",{className:"".concat(Ir.monacoEditor," ").concat(l||""),children:(0,t.jsxs)("div",{className:Ir.emptyState,children:[(0,t.jsx)("div",{className:Ir.emptyIcon,children:"\u23F3"}),(0,t.jsx)("h3",{className:Ir.emptyTitle,children:"\u6B63\u5728\u52A0\u8F7D\u7F16\u8F91\u5668..."}),(0,t.jsx)("p",{className:Ir.emptyDescription,children:"\u8BF7\u7A0D\u5019\uFF0CMonaco Editor\u6B63\u5728\u521D\u59CB\u5316"})]})})},wi=bi,fs={fileContentDisplay:"fileContentDisplay___aitA9",monacoEditor:"monacoEditor___N09R2"},ji=function(e){var r=e.fileId,s=e.fileName,a=e.filePath,o=e.content,l=e.readOnly,p=e.onContentChange;return(0,t.jsx)("div",{className:fs.fileContentDisplay,children:(0,t.jsx)(wi,{currentFile:{id:r,name:s,type:"file",path:a,content:o,lastModified:Date.now(),children:[]},onContentChange:p,readOnly:l,className:fs.monacoEditor},r)})},Ha=ji,Jn=i(24573),Wa=i(20860),Va=i(52291),vs=i(54134),lr={"xagi-nav-style2":"xagi-nav-style2___s780v",text:"text___EGdAR","page-container":"page-container___Bwcoc",emptyIconContainer:"emptyIconContainer___Jzcrf",emptyIcon:"emptyIcon___t0uZJ",loadingIcon:"loadingIcon___Qq5rf","pulse-animation":"pulse-animation___cO8eS",errorIcon:"errorIcon___Ig_kL",emptyContent:"emptyContent___xfkMT",emptyTitle:"emptyTitle___x8AY_",emptyDescription:"emptyDescription___NU0Iy",multiLineTruncate:"multiLineTruncate___HRNNA",singleLineTruncate:"singleLineTruncate___dNQSx",fullTextContent:"fullTextContent___iN0En",fullTextPre:"fullTextPre___JEXOC",emptyActions:"emptyActions___wyoLF",regularButtons:"regularButtons___A2gfO",viewFullTextButton:"viewFullTextButton___Aoq9S",emptyState:"emptyState___UFt8H","fade-in":"fade-in___KYhea"},Ii=function(e){var r=e.type,s=r===void 0?"empty":r,a=e.icon,o=e.title,l=e.description,p=e.buttons,d=e.className,y=e.style,M=e.showIcon,C=M===void 0?!0:M,R=e.showTitle,P=R===void 0?!0:R,A=e.showDescription,k=A===void 0?!0:A,F=e.showButtons,j=F===void 0?!0:F,Z=e.maxDescriptionLength,b=Z===void 0?200:Z,g=e.allowDescriptionWrap,D=g===void 0?!1:g,x=e.maxLines,U=x===void 0?3:x,O=e.clickableDescription,N=O===void 0?!1:O,J=e.viewFullTextButtonText,E=J===void 0?"\u67E5\u770B\u5B8C\u6574\u5185\u5BB9":J,de=(0,n.useState)(!1),h=w()(de,2),T=h[0],he=h[1],Te={loading:{icon:(0,t.jsx)("div",{className:lr.loadingIcon,children:(0,t.jsx)(Jn.Z,{})}),title:"\u52A0\u8F7D\u4E2D...",description:"\u6B63\u5728\u52A0\u8F7D\uFF0C\u8BF7\u7A0D\u5019..."},error:{icon:(0,t.jsx)("div",{className:lr.errorIcon,children:(0,t.jsx)(Wa.Z,{})}),title:"\u51FA\u73B0\u9519\u8BEF",description:"\u52A0\u8F7D\u8FC7\u7A0B\u4E2D\u51FA\u73B0\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5"},"network-error":{icon:(0,t.jsx)("div",{className:lr.errorIcon,children:(0,t.jsx)(Va.Z,{})}),title:"\u7F51\u7EDC\u8FDE\u63A5\u5931\u8D25",description:"\u7F51\u7EDC\u8FDE\u63A5\u5F02\u5E38\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8BBE\u7F6E\u540E\u91CD\u8BD5"},"permission-denied":{icon:(0,t.jsx)("div",{className:lr.errorIcon,children:"\u{1F512}"}),title:"\u6743\u9650\u4E0D\u8DB3",description:"\u60A8\u6CA1\u6709\u8BBF\u95EE\u6B64\u8D44\u6E90\u7684\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"},empty:{icon:(0,t.jsx)("div",{className:lr.emptyIcon,children:(0,t.jsx)(vs.Z,{})}),title:"\u6682\u65E0\u5185\u5BB9",description:"\u5F53\u524D\u6CA1\u6709\u53EF\u663E\u793A\u7684\u5185\u5BB9"},"no-data":{icon:(0,t.jsx)("div",{className:lr.emptyIcon,children:(0,t.jsx)(Va.Z,{})}),title:"\u6682\u65E0\u6570\u636E",description:"\u5F53\u524D\u6CA1\u6709\u53EF\u7528\u7684\u6570\u636E"}},X=Te[s],ke=function(S){return S&&(b>0&&S.length>b?S.substring(0,b)+"...":S)},xe=ke(l||X.description),re=function(){he(!0)},Ke=function(){he(!1)},ne=function(){if(!N)return!1;var S=l||X.description,B=xe;return S.length>B.length||D&&U>1&&S.split(`
`).length>U},pe=function(){var S=v()(p||[]);return!j&&!ne()?null:(0,t.jsxs)("div",{className:lr.emptyActions,children:[j&&S.length>0&&(0,t.jsx)("div",{className:lr.regularButtons,children:S.map(function(B,K){return(0,t.jsx)(Be.ZP,{type:B.type||"default",size:B.size||"middle",icon:B.icon,onClick:B.onClick,loading:B.loading,disabled:B.disabled,children:B.text},K)})}),ne()&&(0,t.jsx)("div",{className:lr.viewFullTextButton,children:(0,t.jsx)(Be.ZP,{type:"link",size:"small",onClick:re,children:E})})]})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"".concat(lr.emptyState," ").concat(d||""),style:y,children:[C&&(0,t.jsx)("div",{className:lr.emptyIconContainer,children:a||X.icon}),(0,t.jsxs)("div",{className:lr.emptyContent,children:[P&&(0,t.jsx)("h3",{className:lr.emptyTitle,children:o||X.title}),k&&(0,t.jsx)("p",{className:"".concat(lr.emptyDescription," ").concat(D&&U>1?lr.multiLineTruncate:lr.singleLineTruncate),style:{"--max-lines":U},title:l||X.description,children:xe}),pe()]})]}),(0,t.jsx)($t.Z,{title:o||X.title,open:T,onCancel:Ke,footer:[(0,t.jsx)(Be.ZP,{onClick:Ke,children:"\u5173\u95ED"},"close")],width:600,style:{top:20},children:(0,t.jsx)("div",{className:lr.fullTextContent,children:(0,t.jsx)("pre",{className:lr.fullTextPre,children:l||X.description})})})]})},cn=Ii,Sa=i(56555),Di=i(3642),Qn={"xagi-nav-style2":"xagi-nav-style2___Fam6x",text:"text____xVfY","page-container":"page-container___hOzxh",filePathHeader:"filePathHeader___nY4t_",filePathInfo:"filePathInfo___dVo8w",filePath:"filePath___jtbNN",modifiedIndicator:"modifiedIndicator___aYWgx",pulse:"pulse___VnXiM",fileActions:"fileActions___V6e3d"},Ti=function(e){var r=e.filePath,s=e.isModified,a=e.isLoading,o=e.isSaving,l=e.readOnly,p=e.onSave,d=e.onCancel,y=e.onRefresh;return(0,t.jsxs)("div",{className:Qn.filePathHeader,children:[(0,t.jsxs)("div",{className:Qn.filePathInfo,children:[(0,t.jsx)("span",{className:Qn.filePath,children:r}),a&&(0,t.jsx)(Sa.Z,{size:"small"}),s&&!l&&(0,t.jsx)("span",{className:Qn.modifiedIndicator,children:"\u5DF2\u4FEE\u6539"})]}),(0,t.jsxs)("div",{className:Qn.fileActions,children:[s&&!l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Be.ZP,{size:"small",type:"primary",icon:(0,t.jsx)(Di.Z,{}),onClick:p,loading:o,disabled:!s||l,style:{marginRight:8},children:"\u4FDD\u5B58"}),(0,t.jsx)(Be.ZP,{size:"small",onClick:d,disabled:!s||l,style:{marginRight:8},children:"\u53D6\u6D88"})]}),(0,t.jsx)(Wt.Z,{title:"\u5237\u65B0",children:(0,t.jsx)(Be.ZP,{size:"small",type:"text",icon:(0,t.jsx)(ir.Z,{name:"icons-common-refresh",style:{fontSize:16}}),onClick:y,loading:a})})]})]})},ms=Ti,Pi=i(73415),hs=i(94484),ya={"xagi-nav-style2":"xagi-nav-style2___LSD5d",text:"text___b67Qn","page-container":"page-container___Wez7u",imagePreviewContainer:"imagePreviewContainer___mOOld",imagePreviewHeader:"imagePreviewHeader___rIgKS",base64Indicator:"base64Indicator___CfXrW",imagePreviewContent:"imagePreviewContent___h72Kn"},Fi=function(e){var r=e.imagePath,s=e.imageUrl,a=e.alt,o=e.onRefresh,l=An(s);return(0,t.jsxs)("div",{className:ya.imagePreviewContainer,children:[r&&(0,t.jsxs)("div",{className:ya.imagePreviewHeader,children:[(0,t.jsxs)("span",{children:["\u56FE\u7247\u9884\u89C8: ",r,l&&(0,t.jsx)("span",{className:ya.base64Indicator,children:" (Base64)"})]}),(0,t.jsx)(Wt.Z,{title:"\u5237\u65B0",children:(0,t.jsx)(Be.ZP,{size:"small",type:"text",icon:(0,t.jsx)(ir.Z,{name:"icons-common-refresh",style:{fontSize:16}}),onClick:o})})]}),(0,t.jsx)("div",{className:ya.imagePreviewContent,style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,t.jsx)(hs.Z,{src:s,alt:a,style:{maxWidth:"100%",maxHeight:"600px"},fallback:Pi.Pc})})]})},gs=Fi,za=i(79657),Ea=i(47383),Ya={"xagi-nav-style2":"xagi-nav-style2___pjhvX",text:"text___biprR","page-container":"page-container___kittd",preview:"preview___m3kYW",previewContainer:"previewContainer___sQmFu",previewIframe:"previewIframe___qc7QM"},Cs=n.forwardRef(function(c,e){var r=c.devServerUrl,s=c.className,a=c.isStarting,o=c.isDeveloping,l=c.isRestarting,p=c.isProjectUploading,d=c.startError,y=c.serverMessage,M=c.serverErrorCode,C=c.onStartDev,R=c.onRestartDev,P=c.onWhiteScreenWithError,A=(0,n.useRef)(null),k=(0,n.useState)(!1),F=w()(k,2),j=F[0],Z=F[1],b=(0,n.useState)(null),g=w()(b,2),D=g[0],x=g[1],U=(0,n.useState)(null),O=w()(U,2),N=O[0],J=O[1],E=(0,n.useState)(!1),de=w()(E,2),h=de[0],T=de[1],he=(0,n.useRef)([]),Te=(0,n.useRef)([]),X=(0,n.useRef)(null),ke=(0,n.useRef)(0),xe=(0,n.useRef)(null),re=(0,n.useRef)([]),Ke=(0,n.useRef)(0),ne=(0,n.useCallback)(function(m){return m?m.includes("RESTART")||m.includes("restart")?"RESTART":m.includes("START")||m.includes("start")?"START":m.includes("KEEPALIVE")||m.includes("keepalive")?"KEEPALIVE":l?"RESTART":a?"START":y?"KEEPALIVE":"":""},[l,a,y]),pe=(0,n.useCallback)(function(m){if(!m)return"";var z=ne(m);return z?"".concat(z,": ").concat(m):m},[ne]),G=(0,n.useCallback)(function(){if(!r){J("\u5F00\u53D1\u670D\u52A1\u5668URL\u4E0D\u53EF\u7528");return}Z(!0),J(null),A.current&&x(new Date)},[r]),S=(0,n.useCallback)(I()(u()().mark(function m(){return u()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:T(!0),J(null);try{r?G():r===void 0&&R?R():C?C():J("\u5F00\u53D1\u670D\u52A1\u5668URL\u4E0D\u53EF\u7528")}catch{J("\u91CD\u8BD5\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5")}finally{T(!1)}case 3:case"end":return ae.stop()}},m)})),[r,G,C,R]),B=(0,n.useCallback)(function(){var m=N||y,z=p||l||o||a,ae=!!d,V=r===void 0,ie;m?ie="error":z?ie="loading":V?ie="no-data":ie="empty";var we;m?we=(0,t.jsx)(Wa.Z,{}):p||l||a?we=(0,t.jsx)(za.Z,{}):ae?we=(0,t.jsx)(Wa.Z,{}):we=(0,t.jsx)(Va.Z,{});var te;N?te="\u9884\u89C8\u52A0\u8F7D\u5931\u8D25":y?te=M?"\u670D\u52A1\u5668\u9519\u8BEF (".concat(pe(M),")"):"\u670D\u52A1\u5668\u9519\u8BEF":p?te="\u5BFC\u5165\u9879\u76EE\u4E2D":l?te="\u91CD\u542F\u4E2D":a?te="\u542F\u52A8\u4E2D":o?te="\u5F00\u53D1\u4E2D":ae?te=M?"\u5F00\u53D1\u670D\u52A1\u5668\u542F\u52A8\u5931\u8D25 (".concat(pe(M),")"):"\u5F00\u53D1\u670D\u52A1\u5668\u542F\u52A8\u5931\u8D25":V?te="\u6682\u65E0\u9884\u89C8\u5730\u5740":te="\u7B49\u5F85\u5F00\u53D1\u670D\u52A1\u5668\u542F\u52A8";var fe;y?fe=y:N?fe="\u9884\u89C8\u9875\u9762\u52A0\u8F7D\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5F00\u53D1\u670D\u52A1\u5668\u72B6\u6001\u6216\u7F51\u7EDC\u8FDE\u63A5":p?fe="\u6B63\u5728\u5BFC\u5165\u9879\u76EE\u5E76\u91CD\u542F\u5F00\u53D1\u670D\u52A1\u5668\uFF0C\u8BF7\u7A0D\u5019...":l?fe="\u6B63\u5728\u91CD\u542F\u5F00\u53D1\u670D\u52A1\u5668\uFF0C\u8BF7\u7A0D\u5019...":a?fe="\u6B63\u5728\u542F\u52A8\u5F00\u53D1\u73AF\u5883\uFF0C\u8BF7\u7A0D\u5019...":o?fe="\u6B63\u5728\u751F\u6210\uFF0C\u8BF7\u7A0D\u5019...":ae?fe=d||"":V?fe="\u5F53\u524D\u6CA1\u6709\u53EF\u7528\u7684\u9884\u89C8\u5730\u5740\uFF0C\u8BF7\u5148\u542F\u52A8\u5F00\u53D1\u670D\u52A1\u5668":fe="\u6B63\u5728\u8FDE\u63A5\u5F00\u53D1\u670D\u52A1\u5668\uFF0C\u8BF7\u7A0D\u5019...";var ft;return m?(ft=[{text:h?"\u5237\u65B0\u4E2D...":"\u5237\u65B0",icon:(0,t.jsx)(Ea.Z,{}),onClick:S,loading:h,disabled:h}],y&&R&&ft.push({text:"\u91CD\u542F\u670D\u52A1\u5668",icon:(0,t.jsx)(za.Z,{}),onClick:R,type:"primary"})):z?ft=void 0:C||R?ft=[{text:h?"\u91CD\u542F\u4E2D...":"\u91CD\u542F\u670D\u52A1",icon:(0,t.jsx)(Ea.Z,{}),onClick:S,loading:h,disabled:h}]:ft=void 0,{type:ie,icon:we,title:te,description:fe,buttons:ft}},[N,y,p,l,o,a,d,r,M,pe,h,S,R,C]),K=(0,n.useCallback)(function(){r?G():A.current&&(J("\u5F00\u53D1\u670D\u52A1\u5668URL\u4E0D\u53EF\u7528"),x(new Date))},[r,G]),ve=(0,n.useCallback)(function(){return Math.max(0,ke.current)},[]),L=(0,n.useCallback)(function(m){if(!(!A.current||m<=0))try{var z=A.current.contentWindow;z&&z.history?z.history.go(-m):(0,ln.X0)(-m)}catch(ae){console.warn("[Preview] iframe \u5185\u90E8\u56DE\u9000\u5931\u8D25\uFF08\u53EF\u80FD\u662F\u8DE8\u57DF\u9650\u5236\uFF09:",ae),(0,ln.X0)(-m)}},[]);(0,n.useImperativeHandle)(e,function(){return{refresh:K,getIsLoading:function(){return j},getLastRefreshed:function(){return D},getHistoryBackCount:ve,backInIframe:L}},[K,j,D,ve,L]);var H=(0,n.useCallback)(function(){Z(!1),J(null),he.current=[],console.log("[Preview] iframeLoad")},[]),Le=(0,n.useCallback)(function(){Z(!1),J("\u9884\u89C8\u52A0\u8F7D\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5F00\u53D1\u670D\u52A1\u5668\u72B6\u6001\u6216\u7F51\u7EDC\u8FDE\u63A5");for(var m=arguments.length,z=new Array(m),ae=0;ae<m;ae++)z[ae]=arguments[ae];console.info("[Preview] iframe\u52A0\u8F7D\u9519\u8BEF",z),P&&P(ot()(Date.now()).format("YYYY/MM/DD HH:mm:ss")+" \u9884\u89C8\u52A0\u8F7D\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5F00\u53D1\u670D\u52A1\u5668\u72B6\u6001\u6216\u7F51\u7EDC\u8FDE\u63A5","iframe")},[P]),Se=(0,n.useCallback)(function(m){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ae=he.current.some(function(ie){return ie.message===m.message&&Math.abs(ie.timestamp-m.timestamp)<1e3});if(!ae){he.current.push(m),he.current.length>10&&he.current.shift();var V=he.current.slice(-3).map(function(ie){var we="".concat(ot()(ie.timestamp).format("YYYY/MM/DD HH:mm:ss")," ").concat(ie.message);if(ie.details)try{var te=JSON.parse(ie.details);typeof te=="string"?we+=": ".concat(te):te&&on()(te)==="object"&&(we+=": ".concat(JSON.stringify(te)))}catch{we+=": ".concat(ie.details)}return we}).join("; ");z&&P&&(P(V,"whiteScreen"),console.warn("[Preview] \u767D\u5C4F\u68C0\u6D4B\u5230 DevMonitor \u9519\u8BEF\uFF0C\u5DF2\u89E6\u53D1 AI Agent \u81EA\u52A8\u5904\u7406:",V))}},[P]),ge=(0,n.useCallback)(function(m){if(m.historyType==="initial"){X.current=m.url,xe.current=m.url,Te.current=[].concat(v()(Te.current||[]),[m]),re.current=[].concat(v()(re.current||[]),[{url:m.url,pathname:m.pathname,timestamp:m.timestamp}]);return}if(Te.current.push(m),Te.current.length>50&&Te.current.shift(),m.historyType==="pushState"||m.historyType==="hashchange")ke.current++,re.current.push({url:m.url,pathname:m.pathname,timestamp:m.timestamp}),Ke.current=re.current.length-1;else if(m.historyType==="replaceState")re.current.length===0?(re.current=[{url:m.url,pathname:m.pathname,timestamp:m.timestamp}],Ke.current=0):re.current[Ke.current]={url:m.url,pathname:m.pathname,timestamp:m.timestamp};else if(m.historyType==="popstate"){var z=re.current;if(z.length>0){for(var ae=-1,V=z.length-1;V>=0;V--)if(z[V].url===m.url){ae=V;break}if(ae!==-1&&ae!==Ke.current){var ie=ae-Ke.current;ie<0?ke.current=Math.max(0,ke.current+ie):ie>0&&(ke.current+=ie),Ke.current=ae}else ke.current+=1}}console.log("[Preview] pushCountRef",ke.current,"currentIndex",Ke.current),xe.current=m.url},[]);return(0,n.useEffect)(function(){var m=function(ae){var V,ie,we=A.current&&(ae.source===A.current.contentWindow||A.current.src&&ae.origin===new URL(A.current.src).origin),te=ae.data;if(te&&on()(te)==="object"&&(V=te.type)!==null&&V!==void 0&&V.includes("dev-monitor")){var fe;console.log("[Preview] \u{1F50D} DevMonitor message detected:",{type:te.type,origin:ae.origin,isFromIframe:!!we,sourceIsWindow:ae.source instanceof Window,iframeSrc:(fe=A.current)===null||fe===void 0?void 0:fe.src,errorCount:te.errorCount,hasLatestError:!!te.latestError,hasError:!!te.error,fullData:te})}if(!we&&te!==null&&te!==void 0&&(ie=te.type)!==null&&ie!==void 0&&ie.includes("dev-monitor")){console.warn("[Preview] \u26A0\uFE0F DevMonitor message ignored (not from iframe):",{type:te.type,origin:ae.origin,source:ae.source});return}if(te&&on()(te)==="object"&&te.type)switch(te.type){case"dev-monitor-error":if(te.error){var ft=te.isWhiteScreen;console.debug("[Preview] Received dev-monitor-error:",te.error),Se(te.error,ft)}break;case"dev-monitor-history-change":ge({historyType:te.historyType,url:te.url,pathname:te.pathname,timestamp:te.timestamp||Date.now()});break;default:break}};return window.addEventListener("message",m),function(){window.removeEventListener("message",m)}},[Se,ge]),(0,n.useEffect)(function(){r?G():(Z(!1),J(null),x(new Date))},[r,G]),(0,n.useEffect)(function(){return function(){A.current&&(A.current=null),he.current=[],Te.current=[],X.current=null,xe.current=null,ke.current=0,re.current=[],Ke.current=0}},[]),(0,t.jsx)("div",{className:"".concat(Ya.preview," ").concat(s||""),children:(0,t.jsx)("div",{className:Ya.previewContainer,children:r&&!N&&!y&&!a&&!l&&!o&&!p?(0,t.jsx)("iframe",{ref:A,className:Ya.previewIframe,"data-id":"".concat(+(D||0)),src:r,title:"Preview",sandbox:$e.lM,onLoad:H,onError:Le},"".concat(+(D||0))):(0,t.jsx)(cn,f()(f()({},B()),{},{maxDescriptionLength:150,allowDescriptionWrap:!0,maxLines:4,clickableDescription:!0,viewFullTextButtonText:"\u67E5\u770B\u5B8C\u6574\u9519\u8BEF\u4FE1\u606F"}))})})});Cs.displayName="Preview";var Ri=Cs,mr={"xagi-nav-style2":"xagi-nav-style2___xWxd6",text:"text___c0aRe","page-container":"page-container___pNCyv",contentViewerContainer:"contentViewerContainer___O3OeK",previewContainer:"previewContainer___Rcof2",codeContainer:"codeContainer___OPGVo",visible:"visible___qG86r",hidden:"hidden___zz65s",codeEditorContainer:"codeEditorContainer___JbQSR",fileContentPreview:"fileContentPreview___dFt9S",emptyState:"emptyState___D6fTp",loadingContainer:"loadingContainer___r7sK9",errorContainer:"errorContainer___qFn47"},ki=function(e){var r=e.mode,s=e.isComparing,a=e.selectedFileId,o=e.fileNode,l=e.fileContent,p=e.isLoadingFileContent,d=e.fileContentError,y=e.isFileModified,M=e.isSavingFile,C=e.devServerUrl,R=e.isStarting,P=e.isRestarting,A=e.isProjectUploading,k=e.startError,F=e.serverMessage,j=e.serverErrorCode,Z=e.previewRef,b=e.onContentChange,g=e.onSaveFile,D=e.onCancelEdit,x=e.onRefreshFile,U=e.findFileNode,O=e.isChatLoading,N=O===void 0?!1:O,J=e.onStartDev,E=e.onRestartDev,de=e.onWhiteScreenWithError,h=(0,n.useMemo)(function(){return(0,t.jsx)(Ri,{ref:Z,devServerUrl:C?"".concat("").concat(C):void 0,isStarting:R,isDeveloping:N,isRestarting:P,isProjectUploading:A,startError:k,serverMessage:F,serverErrorCode:j,onStartDev:J,onRestartDev:E,onWhiteScreenWithError:de})},[Z,C,R,N,P,A,k,F,j,J,E,de]),T=(0,n.useMemo)(function(){if(p)return(0,t.jsxs)("div",{className:mr.loadingContainer,children:[(0,t.jsx)(Sa.Z,{size:"large"}),(0,t.jsx)("p",{children:"\u6B63\u5728\u52A0\u8F7D\u6587\u4EF6\u5185\u5BB9..."})]});if(d)return(0,t.jsxs)("div",{className:mr.errorContainer,children:[(0,t.jsx)("p",{children:d}),(0,t.jsx)(Be.ZP,{size:"small",onClick:x,children:"\u91CD\u8BD5"})]});if(!a)return(0,t.jsx)("div",{className:mr.emptyState,children:(0,t.jsx)("p",{children:"\u8BF7\u4ECE\u5DE6\u4FA7\u6587\u4EF6\u6811\u9009\u62E9\u4E00\u4E2A\u6587\u4EF6\u8FDB\u884C\u9884\u89C8"})});var Te=U(a),X=Te&&Te.content&&Te.content.trim()!=="",ke=Cn(a),xe=an(a);return(0,t.jsxs)("div",{className:mr.codeEditorContainer,children:[(0,t.jsx)(ms,{filePath:Te?.path||a,isModified:y,isLoading:p,isSaving:M,readOnly:s||N,onSave:g,onCancel:D,onRefresh:x}),(0,t.jsx)("div",{className:mr.fileContentPreview,children:!xe&&!X?(0,t.jsx)(cn,{type:"error",title:"\u65E0\u6CD5\u9884\u89C8\u6B64\u6587\u4EF6\u7C7B\u578B",description:"\u5F53\u524D\u4E0D\u652F\u6301\u9884\u89C8 ".concat(a.split(".").pop()||a," \u683C\u5F0F\u7684\u6587\u4EF6\u3002")}):ke?(0,t.jsx)(gs,{imageUrl:Mn(X?Te.content:"",C?"".concat(C,"/").concat(a):"/".concat(a)),alt:a,onRefresh:function(){Z.current&&Z.current.refresh()}}):X?(0,t.jsx)(Ha,{fileId:a,fileName:a.split("/").pop()||a,filePath:"app/".concat(a),content:Te.content,readOnly:s||N,onContentChange:b}):l?(0,t.jsx)(Ha,{fileId:a,fileName:a.split("/").pop()||a,filePath:"app/".concat(a),content:l,readOnly:s||N,onContentChange:b}):(0,t.jsx)(cn,{type:"error",title:"\u65E0\u6CD5\u9884\u89C8\u6B64\u6587\u4EF6\u7C7B\u578B",description:"\u5F53\u524D\u4E0D\u652F\u6301\u9884\u89C8 ".concat(a.split(".").pop()||a," \u683C\u5F0F\u7684\u6587\u4EF6\u3002")})})]})},[p,d,a,U,y,M,s,N,C,l,b,g,D,x,Z]),he=(0,n.useMemo)(function(){if(!a)return(0,t.jsx)("div",{className:mr.emptyState,children:(0,t.jsx)("p",{children:"\u8BF7\u4ECE\u5DE6\u4FA7\u6587\u4EF6\u6811\u9009\u62E9\u4E00\u4E2A\u6587\u4EF6\u8FDB\u884C\u9884\u89C8"})});var Te=o&&o.content&&o.content.trim()!=="",X=Cn(a),ke=an(a);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ms,{filePath:o?.path||a,isModified:!1,isLoading:!1,isSaving:!1,readOnly:!0,onSave:function(){},onCancel:function(){},onRefresh:function(){}}),(0,t.jsx)("div",{className:mr.fileContentPreview,children:!ke&&!Te?(0,t.jsx)(cn,{type:"error",title:"\u65E0\u6CD5\u9884\u89C8\u6B64\u6587\u4EF6\u7C7B\u578B",description:"\u5F53\u524D\u4E0D\u652F\u6301\u9884\u89C8 ".concat(a.split(".").pop()||a," \u683C\u5F0F\u7684\u6587\u4EF6\u3002")}):Te?(0,t.jsx)(Ha,{fileId:a,fileName:a.split("/").pop()||a,filePath:"app/".concat(a),content:o.content,readOnly:!0,onContentChange:function(){}}):X?(0,t.jsx)(gs,{imagePath:a,imageUrl:Mn(o.content,C?"".concat(C,"/").concat(a):"/".concat(a)),alt:a,onRefresh:function(){Z.current&&Z.current.refresh()}}):(0,t.jsx)("div",{className:mr.emptyState,children:(0,t.jsxs)("p",{children:["\u65E0\u6CD5\u9884\u89C8\u6B64\u6587\u4EF6\u7C7B\u578B: ",a]})})})]})},[a,o,C,N,Z]);return s&&r==="preview"?(0,t.jsxs)("div",{className:mr.emptyState,children:[(0,t.jsx)("p",{children:zt.PREVIEW_DISABLED_MESSAGE}),(0,t.jsx)("p",{children:"\u8BF7\u6062\u590D\u6216\u5207\u6362\u5230\u6700\u65B0\u7248\u672C\u4EE5\u67E5\u770B\u9884\u89C8"})]}):s&&r==="code"?he:(0,t.jsxs)("div",{className:mr.contentViewerContainer,children:[(0,t.jsx)("div",{className:"".concat(mr.previewContainer," ").concat(r==="preview"?mr.visible:mr.hidden),children:h}),(0,t.jsx)("div",{className:"".concat(mr.codeContainer," ").concat(r==="code"?mr.visible:mr.hidden),children:T})]})},xi=ki,au={historyButton:"historyButton___OulYF",conversationDropdown:"conversationDropdown___G2VAi",loadingContainer:"loadingContainer___dN_ET",emptyContainer:"emptyContainer___Is48I",conversationList:"conversationList___hJsdU",conversationItem:"conversationItem___C0Fy3",conversationContent:"conversationContent___mPInK",topic:"topic___UDp8U",contentPreview:"contentPreview___oyJpb",contentText:"contentText___HMcLJ",time:"time___lH7Et",timeText:"timeText___QCrr3"},Xn=kt.Z.Text,su=function(e){var r=e.projectId,s=e.currentSessionId,a=e.onSessionChange,o=e.setChatMessages,l=useState([]),p=_slicedToArray(l,2),d=p[0],y=p[1],M=useState(!1),C=_slicedToArray(M,2),R=C[0],P=C[1],A=function(Z){try{var b=JSON.parse(Z.content);if(!b||b.length===0)return"\u6682\u65E0\u5BF9\u8BDD\u5185\u5BB9";var g=b.slice(0,2),D=g.map(function(U){return U.role==="USER"?"\u{1F464} ".concat(U.text):U.role==="ASSISTANT"?"\u{1F916} ".concat(U.text):""}).filter(function(U){return U.length>0}),x=D.join(" \u2192 ");return x.length>80?x.substring(0,80)+"...":x}catch(U){return console.error("\u89E3\u6790\u4F1A\u8BDD\u5185\u5BB9\u5931\u8D25:",U),"\u5185\u5BB9\u89E3\u6790\u5931\u8D25"}},k=function(){var j=_asyncToGenerator(_regeneratorRuntime().mark(function Z(b){var g,D,x=arguments;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:g=x.length>1&&x[1]!==void 0?x[1]:!1;try{D=JSON.parse(b.content),o(D),a(b.sessionId),g||message.success("\u5DF2\u8FD8\u539F\u4F1A\u8BDD: ".concat(b.topic))}catch(N){console.error("\u274C [ConversationSelector] \u8FD8\u539F\u5386\u53F2\u4F1A\u8BDD\u5931\u8D25:",N),message.error("\u8FD8\u539F\u5386\u53F2\u4F1A\u8BDD\u5931\u8D25")}case 2:case"end":return O.stop()}},Z)}));return function(b){return j.apply(this,arguments)}}();useEffect(function(){var j=function(){var Z=_asyncToGenerator(_regeneratorRuntime().mark(function b(){var g,D,x,U,O,N;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(r){E.next=2;break}return E.abrupt("return");case 2:return P(!0),E.prev=3,E.next=6,listConversations({projectId:r});case 6:if(D=E.sent,!(D.success&&(g=D.data)!==null&&g!==void 0&&g.records)){E.next=15;break}if(U=(x=D.data)===null||x===void 0?void 0:x.records,y(U),!(U.length>0&&!s)){E.next=15;break}return O=U.sort(function(de,h){return new Date(h.created).getTime()-new Date(de.created).getTime()}),N=O[0],E.next=15,k(N,!0);case 15:E.next=20;break;case 17:E.prev=17,E.t0=E.catch(3),console.error("\u52A0\u8F7D\u4F1A\u8BDD\u5217\u8868\u5931\u8D25:",E.t0);case 20:return E.prev=20,P(!1),E.finish(20);case 23:case"end":return E.stop()}},b,null,[[3,17,20,23]])}));return function(){return Z.apply(this,arguments)}}();j()},[r,s]);var F=function(){return R?_jsxs("div",{className:styles.loadingContainer,children:[_jsx(Spin,{size:"small"}),_jsx(Xn,{type:"secondary",style:{marginLeft:8},children:"\u52A0\u8F7D\u4E2D..."})]}):d.length===0?_jsx("div",{className:styles.emptyContainer,children:_jsx(Xn,{type:"secondary",children:"\u6682\u65E0\u5386\u53F2\u4F1A\u8BDD"})}):_jsx(List,{className:styles.conversationList,dataSource:d,renderItem:function(b){return _jsx(List.Item,{className:"".concat(styles.conversationItem," ").concat(b.sessionId===s?styles.activeItem:""),onClick:function(){return k(b,!1)},children:_jsxs("div",{className:styles.conversationContent,children:[_jsx("div",{className:styles.topic,children:_jsx(Xn,{ellipsis:{tooltip:b.topic},children:b.topic})}),_jsx("div",{className:styles.contentPreview,children:_jsx(Xn,{type:"secondary",className:styles.contentText,ellipsis:{tooltip:A(b)},children:A(b)})}),_jsx("div",{className:styles.time,children:_jsx(Xn,{type:"secondary",className:styles.timeText,children:dayjs(b.created).format("MM-DD HH:mm")})})]})})}})};return _jsx(Dropdown,{overlay:F(),trigger:["click"],placement:"bottomRight",overlayClassName:styles.conversationDropdown,children:_jsx(Button,{type:"text",icon:_jsx(HistoryOutlined,{}),className:styles.historyButton,title:"\u5386\u53F2\u4F1A\u8BDD"})})},iu=null,Li=i(16036),Ss=i(13143),ys=i(15286),Mi=50,Ni=function(e){setTimeout(function(){e()},Mi)};function Bi(c){var e=c.content,r=c.requestId,s=(0,n.useRef)(null),a=(0,n.useRef)(0),o=(0,n.useRef)(r);return(0,n.useEffect)(function(){if(o.current!==r){var l;a.current=0,o.current=r,(l=s.current)===null||l===void 0||l.clear()}},[r]),(0,n.useEffect)(function(){Ni(function(){if(e&&s.current){var l=e.slice(a.current);a.current=e.length,l&&s.current.push(l,"answer")}})},[e]),(0,n.useEffect)(function(){return function(){var l;(l=s.current)===null||l===void 0||l.clear(),a.current=0}},[]),{markdownRef:s}}var ou=i(29558),Es=i(30832),As=i(2601),lu=i(13621),Oi=i(67825),_s=i.n(Oi),Ui=i(23687),Zi=i(203),Gi=i(46703),Ki=i(93209),bs=i(57369),Hi=i(27190),Wi=i(65921),br={"xagi-nav-style2":"xagi-nav-style2___u6cec",text:"text___FNaI9","page-container":"page-container___bk7sG",planProcess:"planProcess___TKhpP",operationRow:"operationRow___yESVz",operationInfo:"operationInfo___JI59q",operationText:"operationText___NIyvj","truncate-ellipsis":"truncate-ellipsis___PjdRL","truncate-middle":"truncate-middle___IYaAw","truncate-fade":"truncate-fade___khJ9B","truncate-none":"truncate-none___tddEd",operationStatus:"operationStatus___CgtPg",statusText:"statusText___ASO2j",toggleButton:"toggleButton___zkjS7",detailsRow:"detailsRow___W0QI0",detailsContent:"detailsContent___EXAIj",taskList:"taskList___DW_EJ",taskItem:"taskItem___zg7KW",taskText:"taskText___TLqQh",taskStatus:"taskStatus___pTzhm",statusDot:"statusDot___EJ0PY",statusDotStatusCompleted:"statusDotStatusCompleted___wUPN7",statusDotStatusInProgress:"statusDotStatusInProgress___ykSaV",pulse:"pulse___wGAEt",statusDotStatusFailed:"statusDotStatusFailed___Jhc19",statusDotStatusPending:"statusDotStatusPending___cRfbm"},Vi=function(e){var r=e.entries,s=e.dataKey,a=e.textTruncateMode,o=a===void 0?"ellipsis":a,l=e.maxLength,p=l===void 0?50:l,d=(0,n.useState)(!1),y=w()(d,2),M=y[0],C=y[1],R=(0,n.useMemo)(function(){return{total:r.length,completed:r.filter(function(b){return b.status==="completed"}).length,in_progress:r.filter(function(b){return b.status==="in_progress"}).length,failed:r.filter(function(b){return b.status==="failed"}).length}},[r]),P=function(){return R.failed>0?"failed":R.completed===R.total?"completed":R.in_progress>0?"in_progress":"pending"},A=function(){var g=P();switch(g){case"completed":return"\u5DF2\u5B8C\u6210";case"in_progress":return"\u6267\u884C\u4E2D";case"failed":return"\u90E8\u5206\u5931\u8D25";default:return"\u5F85\u6267\u884C"}},k=function(){var g,D,x=P();return"statusDot status".concat((x==null||(g=x.charAt)===null||g===void 0?void 0:g.call(x,0).toUpperCase())+(x==null||(D=x.slice)===null||D===void 0?void 0:D.call(x,1)))},F=function(g){switch(g){case"completed":return(0,t.jsx)(Ki.Z,{style:{fontSize:14}});case"pending":return(0,t.jsx)(bs.Z,{style:{fontSize:14}});case"failed":return(0,t.jsx)(Hi.Z,{style:{fontSize:14}});case"in_progress":return(0,t.jsx)(Wi.Z,{style:{fontSize:14}});default:return(0,t.jsx)(bs.Z,{style:{fontSize:14}})}},j=function(g,D,x){if(g.length<=x)return g;switch(D){case"ellipsis":return g.substring(0,x)+"...";case"middle":{var U=Math.floor(x/2)-1,O=Math.ceil(x/2)+1;return g.substring(0,U)+"..."+g.substring(g.length-O)}case"fade":return g.substring(0,x);case"none":default:return g}},Z=function(){var g="\u6267\u884C\u8BA1\u5212 (".concat(R.completed,"/").concat(R.total," \u5DF2\u5B8C\u6210)");return j(g,o,p)};return(0,t.jsxs)("div",{className:br.planProcess,"data-key":s,children:[(0,t.jsxs)("div",{className:br.operationRow,children:[(0,t.jsxs)("div",{className:br.operationInfo,children:[(0,t.jsx)("span",{className:br[k()]}),(0,t.jsx)(Wt.Z,{title:"\u6267\u884C\u8BA1\u5212 (".concat(R.completed,"/").concat(R.total," \u5DF2\u5B8C\u6210)"),placement:"topLeft",mouseEnterDelay:.5,children:(0,t.jsx)("span",{className:"".concat(br.operationText," ").concat(br["truncate-".concat(o)]),children:Z()})})]}),(0,t.jsxs)("div",{className:br.operationStatus,children:[(0,t.jsx)("span",{className:br.statusText,children:A()}),(0,t.jsx)(Be.ZP,{type:"text",size:"small",onClick:function(){return C(!M)},className:br.toggleButton,children:M?"\u2212":"+"})]})]}),M&&(0,t.jsx)("div",{className:br.detailsRow,children:(0,t.jsx)("div",{className:br.detailsContent,children:(0,t.jsx)("div",{className:br.taskList,children:r.map(function(b,g){return(0,t.jsxs)("div",{className:br.taskItem,children:[F(b.status),(0,t.jsx)("span",{className:"".concat(br.taskText),children:b.content})]},g)})})})})]})},zi=Vi,at={"xagi-nav-style2":"xagi-nav-style2___SK2za",text:"text___SJl_k","page-container":"page-container___yQR1l",toolCallProcess:"toolCallProcess___fgMYC",operationRow:"operationRow___fbjuk",operationInfo:"operationInfo___tvUaa",operationText:"operationText___b2h4G","truncate-ellipsis":"truncate-ellipsis___RBtog","truncate-middle":"truncate-middle___ay1pb","truncate-fade":"truncate-fade___ex88w","truncate-none":"truncate-none___jk0Uw",operationStatus:"operationStatus___Xngxc",statusText:"statusText___P6QH3",toggleButton:"toggleButton___dJ0fJ",detailsRow:"detailsRow___YZLI3",detailsContent:"detailsContent___QXJGS",contentArray:"contentArray___p9Xsk",textContent:"textContent___P0Lir",contentPre:"contentPre___f610v",objectContent:"objectContent___bFQnz",unknownContent:"unknownContent___PM5BH",fileListContainer:"fileListContainer___dWRZe",fileListLine:"fileListLine___d3iKg",fileIcon:"fileIcon___xev_7",directoryLine:"directoryLine___cPGGd",fileLine:"fileLine___fVC7y",codeFile:"codeFile___OvEeE",configFile:"configFile___YChm_",otherLine:"otherLine___8CaNR",fileListSummary:"fileListSummary___iq1JQ",summaryText:"summaryText___lsX3w",statusDot:"statusDot___U4LDi",statusDotStatusCompleted:"statusDotStatusCompleted___jUEWz",statusDotStatusInProgress:"statusDotStatusInProgress___JNFjN",pulse:"pulse___onOKc",statusDotStatusFailed:"statusDotStatusFailed___uxbd8",statusDotStatusPending:"statusDotStatusPending___vOdhi",noContent:"noContent___zkZ2b",statusInfo:"statusInfo___AVE9S",timeInfo:"timeInfo___MpRoP",updateInfo:"updateInfo___soFIK",statusLabel:"statusLabel___xUn3E",timeLabel:"timeLabel___Zf4fj",updateLabel:"updateLabel___FBf18",statusValue:"statusValue___CD4kb",timeValue:"timeValue___dI8Fw",updateValue:"updateValue___PgRrL"},Yi=function(e){var r=e.title,s=e.kind,a=e.status,o=e.content,l=e.locations,p=e.timestamp,d=e.dataKey,y=e.type,M=y===void 0?"tool_call":y,C=e.textTruncateMode,R=C===void 0?"ellipsis":C,P=e.maxLength,A=P===void 0?50:P,k=(0,n.useState)(!1),F=w()(k,2),j=F[0],Z=F[1],b=function(){var E=l&&l.length>0?l[0].path:"",de=l&&l.length>0&&l[0].line?":".concat(l[0].line):"",h=M==="tool_call_update"?"[\u66F4\u65B0] ":"";switch(s){case"read":return"".concat(h,"\u8BFB\u53D6\u6587\u4EF6 ").concat(E).concat(de);case"edit":return"".concat(h,"\u7F16\u8F91\u6587\u4EF6 ").concat(E).concat(de);case"write":return"".concat(h,"\u521B\u5EFA\u6587\u4EF6 ").concat(E);case"execute":return"".concat(h,"\u6267\u884C\u547D\u4EE4 ").concat(r||"\u6267\u884C\u547D\u4EE4");default:return"".concat(h).concat(r||"\u5DE5\u5177\u8C03\u7528"," ").concat(E).concat(de)}},g=function(){switch(a){case"completed":return"\u5DF2\u5B8C\u6210";case"in_progress":return"\u6267\u884C\u4E2D";case"failed":return"\u5931\u8D25";default:return"\u5F85\u6267\u884C"}},D=function(){var E,de;return"statusDot status".concat((a==null||(E=a.charAt)===null||E===void 0?void 0:E.call(a,0).toUpperCase())+(a==null||(de=a.slice)===null||de===void 0?void 0:de.call(a,1)))},x=function(E,de,h){if(E.length<=h)return E;switch(de){case"ellipsis":return E.substring(0,h)+"...";case"middle":{var T=Math.floor(h/2)-1,he=Math.ceil(h/2)+1;return E.substring(0,T)+"..."+E.substring(E.length-he)}case"fade":return E.substring(0,h);case"none":default:return E}},U=function(){var E=b();return x(E,R,A)},O=function(E){var de=E.split(`
`),h=de.some(function(T){return T.includes("drwx")||T.includes("-rw-")||T.includes("\u603B\u8BA1")});return h?(0,t.jsx)("div",{className:at.fileListContainer,children:de.map(function(T,he){if(T.includes("drwx"))return(0,t.jsxs)("div",{className:at.fileListLine,children:[(0,t.jsx)("span",{className:at.fileIcon,children:"\u{1F4C1}"}),(0,t.jsx)("span",{className:at.directoryLine,children:T})]},he);if(T.includes("-rw-")){var Te=T.split(" ").pop()||"",X=/\.(js|ts|jsx|tsx|py|java|cpp|c|h|css|less|scss|html|xml|json|md|txt)$/i.test(Te),ke=/^\./.test(Te)||/\.(config|conf|ini|yaml|yml|toml)$/i.test(Te),xe=X?"".concat(at.fileLine," ").concat(at.codeFile):ke?"".concat(at.fileLine," ").concat(at.configFile):at.fileLine;return(0,t.jsxs)("div",{className:at.fileListLine,children:[(0,t.jsx)("span",{className:at.fileIcon,children:X?"\u{1F4C4}":ke?"\u2699\uFE0F":"\u{1F4C4}"}),(0,t.jsx)("span",{className:xe,children:T})]},he)}else return T.includes("\u603B\u8BA1")?(0,t.jsx)("div",{className:at.fileListSummary,children:(0,t.jsx)("span",{className:at.summaryText,children:T})},he):(0,t.jsxs)("div",{className:at.fileListLine,children:[(0,t.jsx)("span",{className:at.fileIcon,children:"\u{1F4C4}"}),(0,t.jsx)("span",{className:at.otherLine,children:T})]},he)})}):(0,t.jsx)("pre",{className:at.contentPre,children:E})},N=function(){return o?Array.isArray(o)?(0,t.jsx)("div",{className:at.contentArray,children:o.map(function(E,de){return E.type==="content"&&E.content&&E.content.type==="text"?(0,t.jsx)("div",{className:at.textContent,children:O(E.content.text)},de):(0,t.jsx)("div",{className:at.unknownContent,children:(0,t.jsx)("pre",{className:at.contentPre,children:JSON.stringify(E,null,2)})},de)})}):typeof o=="string"?(0,t.jsx)("div",{className:at.textContent,children:(0,t.jsx)("pre",{className:at.contentPre,children:o})}):on()(o)==="object"?(0,t.jsx)("div",{className:at.objectContent,children:(0,t.jsx)("pre",{className:at.contentPre,children:JSON.stringify(o,null,2)})}):(0,t.jsx)("div",{className:at.unknownContent,children:(0,t.jsx)("pre",{className:at.contentPre,children:String(o)})}):null};return(0,t.jsxs)("div",{className:at.toolCallProcess,"data-key":d,children:[(0,t.jsxs)("div",{className:at.operationRow,children:[(0,t.jsxs)("div",{className:at.operationInfo,children:[(0,t.jsx)("span",{className:at[D()]}),(0,t.jsx)(Wt.Z,{title:b(),placement:"topLeft",mouseEnterDelay:.5,children:(0,t.jsx)("span",{className:"".concat(at.operationText," ").concat(at["truncate-".concat(R)]),children:U()})})]}),(0,t.jsxs)("div",{className:at.operationStatus,children:[(0,t.jsx)("span",{className:at.statusText,children:g()}),(0,t.jsx)(Be.ZP,{type:"text",size:"small",onClick:function(){return Z(!j)},className:at.toggleButton,children:j?"\u2212":"+"})]})]}),j&&(0,t.jsx)("div",{className:at.detailsRow,children:(0,t.jsx)("div",{className:at.detailsContent,children:o?N():(0,t.jsxs)("div",{className:at.noContent,children:[(0,t.jsxs)("div",{className:at.statusInfo,children:[(0,t.jsx)("span",{className:at.statusLabel,children:"\u72B6\u6001:"}),(0,t.jsx)("span",{className:at.statusValue,children:g()})]}),(0,t.jsxs)("div",{className:at.timeInfo,children:[(0,t.jsx)("span",{className:at.timeLabel,children:"\u65F6\u95F4:"}),(0,t.jsx)("span",{className:at.timeValue,children:new Date(p).toLocaleString()})]}),M==="tool_call_update"&&(0,t.jsxs)("div",{className:at.updateInfo,children:[(0,t.jsx)("span",{className:at.updateLabel,children:"\u7C7B\u578B:"}),(0,t.jsx)("span",{className:at.updateValue,children:"\u5DE5\u5177\u8C03\u7528\u66F4\u65B0"})]})]})})})]})},Ji=Yi,Qi=["node"],Xi=["node"],qi=function(){return(0,Ui.R4)({rehypePlugin:[Zi.Z,Gi.Z],components:{"appdev-plan":function(e){var r=e.node,s=_s()(e,Qi),a=r?.position||{},o=a.end.offset,l=a.start.offset,p="".concat(l,"-").concat(o,"-plan"),d=s.data||s.data;try{var y=JSON.parse(decodeURIComponent(d||"{}"));return(0,t.jsx)(zi,{dataKey:p,planId:y.planId,entries:y.entries||[]},p)}catch(M){return console.error("\u274C [genAppDevPlugin] Plan \u6570\u636E\u89E3\u6790\u5931\u8D25:",M,{data:d,props:s}),(0,t.jsxs)("div",{style:{color:"red"},children:["Plan \u89E3\u6790\u5931\u8D25: ",M.message]})}},"appdev-toolcall":function(e){var r=e.node,s=_s()(e,Xi),a=r?.position||{},o=a.end.offset,l=a.start.offset,p="".concat(l,"-").concat(o,"-toolcall"),d=s.type||s.type||"tool_call",y=s.data||s.data;try{var M=JSON.parse(decodeURIComponent(y||"{}"));return(0,t.jsx)(Ji,f()({dataKey:p,type:d},M),p)}catch(C){return console.error("\u274C [genAppDevPlugin] ToolCall \u6570\u636E\u89E3\u6790\u5931\u8D25:",C,{data:y,props:s}),(0,t.jsxs)("div",{style:{color:"red"},children:["ToolCall \u89E3\u6790\u5931\u8D25: ",C.message]})}}},id:Symbol("appdev-plugin"),type:"custom"})},$i=On().bind(Es.Z),ws=(0,n.forwardRef)(function(c,e){var r=c.id,s=c.className,a=s===void 0?"":s,o=c.theme,l=o===void 0?"light":o,p=c.disableTyping,d=p===void 0?!1:p,y=c.interval,M=y===void 0?30:y,C=c.requestId,R=(0,n.useMemo)(function(){var A=qi();return[A]},[]),P=C?"".concat(r,"-").concat(C):r;return(0,t.jsx)("div",{id:r,"data-key":r,className:$i(Es.Z["markdown-container"],"appDevMarkdownCMD",a),children:(0,t.jsx)(As.iV,{children:(0,t.jsx)(As.Hh,{ref:e,timerType:"requestAnimationFrame",interval:M,plugins:R,codeBlock:{headerActions:!1},theme:l,disableTyping:d})})},P)});ws.displayName="AppDevMarkdownCMD";var eo=ws,js={chatAreaMarkdown:"chatAreaMarkdown___fAOYG"},to=function(e){var r=e.message,s=Bi({id:r.id,content:r.text||"",requestId:r.requestId}),a=s.markdownRef;return(0,t.jsx)("div",{className:js.chatAreaMarkdown,children:(0,t.jsx)(eo,{ref:a,id:r.id,className:js.chatAreaMarkdown,disableTyping:!0,requestId:r.requestId})})},ro=to,Is=i(94003),Ds=i(7098),no=i(72875),dn=i(92122),Ts=i(73888),Ps=i(14258),ao=i(92448),so=i(56394),Aa={"xagi-nav-style2":"xagi-nav-style2___G12m0",text:"text___AHK_v","page-container":"page-container___tezSp","manual-container":"manual-container___pLyC2","manual-box":"manual-box___V0BbT",active:"active___DLJxN"},Ja=On().bind(Aa),io=function(e){var r=e.dataSourceList,s=e.onToggleSelectDataSource;return(0,t.jsx)("div",{className:Ja("flex-1"),children:(0,t.jsx)(so.Z,{bodyWidth:"100%",height:"40px",style:{marginTop:3},children:(0,t.jsx)("div",{className:Ja("flex","items-center",Aa["manual-container"]),children:r?.map(function(a,o){return(0,t.jsx)("span",{className:Ja(Aa["manual-box"],"flex","items-center","cursor-pointer",_t()({},Aa.active,a.isSelected)),onClick:function(){return s?.(a)},children:a.name},o)})})})})},oo=io,xt={"xagi-nav-style2":"xagi-nav-style2___cbLfj",text:"text___zNtM6","page-container":"page-container___FBTH4","chat-container":"chat-container___ny7vG","file-title":"file-title___TO5RC",input:"input___SbJZ0",footer:"footer___kCGjy","model-selector":"model-selector___cHHC8","model-arrow":"model-arrow___e15UP","svg-icon":"svg-icon___q6Bnw",box:"box___txMwa","upload-box-disabled":"upload-box-disabled___fuXlm","loading-box":"loading-box___sOQ15","send-box":"send-box___dCCiX",disabled:"disabled___Tp0oy","stop-box":"stop-box___Uq561","stop-box-active":"stop-box-active___hX84m",selectedFileDisplay:"selectedFileDisplay___Fy_h9","close-icon":"close-icon___k4tTm","file-name":"file-name___K7q5y","loading-icon":"loading-icon___xGZ5O",spin:"spin___UohO7","model-selector-popover":"model-selector-popover___fNzIY","select-list":"select-list___rWzlD"},ar=On().bind(xt),lo=function(e){var r,s,a=e.chat,o=e.modelSelector,l=e.fileContentState,p=e.onSetSelectedFile,d=e.isStoppingTask,y=e.isSendingMessage,M=e.handleCancelAgentTask,C=e.className,R=e.onEnter,P=e.dataSourceList,A=e.onToggleSelectDataSource,k=(0,n.useState)([]),F=w()(k,2),j=F[0],Z=F[1],b=(0,n.useState)([]),g=w()(b,2),D=g[0],x=g[1],U=(0,n.useState)(!1),O=w()(U,2),N=O[0],J=O[1],E=(r=localStorage.getItem(no.LA))!==null&&r!==void 0?r:"",de=(0,n.useRef)(null),h=(0,n.useCallback)(function(pe){return pe.split("/").pop()||pe},[]),T=function(G){var S;if((S=a.chatInput)!==null&&S!==void 0&&S.trim()){var B=j?.filter(function(ve){return ve.status===dn.KM.done&&ve.url&&ve.key}),K=D?.filter(function(ve){return ve.status===dn.KM.done&&ve.url&&ve.key});R(B,K,G),a.setChatInput(""),Z([]),x([])}},he=function(G){G.preventDefault();var S=G.target,B=S.value,K=S.selectionStart,ve=S.selectionEnd;if(B!=null&&B.trim()&&!(a.isChatLoading||y)){if(G.nativeEvent.keyCode===13&&(G.nativeEvent.shiftKey||G.nativeEvent.ctrlKey)){var L=B.slice(0,K)+`
`+B.slice(ve);a.setChatInput(L)}else if(G.nativeEvent.keyCode===13&&B.trim()){var H=j?.filter(function(Se){return Se.status===dn.KM.done&&Se.url&&Se.key}),Le=D?.filter(function(Se){return Se.status===dn.KM.done&&Se.url&&Se.key});R(H,Le),a.setChatInput(""),Z([]),x([])}}},Te=function(G){var S=G.fileList;Z((0,Ts.G)(S))},X=function(G){var S=G.fileList;x((0,Ts.G)(S))},ke=function(G){Z(function(S){return S.filter(function(B){return B.uid!==G})})},xe=function(G){x(function(S){return S.filter(function(B){return B.uid!==G})})},re=(0,n.useCallback)(function(){var pe=I()(u()().mark(function G(S){var B,K,ve,L,H,Le,Se,ge,m,z,ae,V,ie;return u()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(K=(B=S.clipboardData)===null||B===void 0?void 0:B.items,K){te.next=3;break}return te.abrupt("return");case 3:for(ve=[],L=0;L<K.length;L++)H=K[L],H.type.indexOf("image")!==-1&&(Le=H.getAsFile(),Le&&ve.push(Le));if(ve.length!==0){te.next=7;break}return te.abrupt("return");case 7:if(S.preventDefault(),Se=D.length,ge=Se+ve.length,!(ge>$e.uA)){te.next=15;break}if(ve.splice($e.uA-Se),ve.length!==0){te.next=15;break}return De.ZP.warning("\u539F\u578B\u56FE\u7247\u6700\u591A\u4E0A\u4F20".concat($e.uA,"\u5F20\uFF0C\u5F53\u524D\u5DF2\u6709").concat(Se,"\u5F20\uFF0C\u6700\u591A\u8FD8\u80FD\u4E0A\u4F20").concat($e.uA-Se,"\u5F20")),te.abrupt("return");case 15:return m=ve.map(function(fe,ft){return{uid:(0,ao.Z)(),name:fe.name||"\u7C98\u8D34\u56FE\u7247-".concat(Date.now(),"-").concat(ft+1,".png"),size:fe.size,type:fe.type,status:dn.KM.uploading,percent:0,url:"",key:""}}),x(function(fe){return[].concat(v()(fe),v()(m))}),z=ve.map(function(){var fe=I()(u()().mark(function ft(We,lt){var Nt,Cr,gt,Ft;return u()().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return Nt=m[lt].uid,It.prev=1,Cr=new FormData,Cr.append("file",We),Cr.append("type","tmp"),It.next=7,fetch($e.GI,{method:"POST",headers:{Authorization:E?"Bearer ".concat(E):""},body:Cr});case 7:return gt=It.sent,It.next=10,gt.json();case 10:if(Ft=It.sent,!(Ft.code===qe.Gh&&Ft.data)){It.next=16;break}return x(function(Dr){return Dr.map(function(ur){return ur.uid===Nt?f()(f()({},ur),{},{status:dn.KM.done,percent:100,url:Ft.data.url||"",key:Ft.data.key||"",name:Ft.data.fileName||ur.name}):ur})}),It.abrupt("return",{success:!0,uid:Nt});case 16:return x(function(Dr){return Dr.map(function(ur){return ur.uid===Nt?f()(f()({},ur),{},{status:dn.KM.error,percent:0}):ur})}),It.abrupt("return",{success:!1,uid:Nt,error:Ft.message});case 18:It.next=25;break;case 20:return It.prev=20,It.t0=It.catch(1),console.error("\u4E0A\u4F20\u56FE\u7247\u5931\u8D25:",It.t0),x(function(Dr){return Dr.map(function(ur){return ur.uid===Nt?f()(f()({},ur),{},{status:dn.KM.error,percent:0}):ur})}),It.abrupt("return",{success:!1,uid:Nt,error:String(It.t0)});case 25:case"end":return It.stop()}},ft,null,[[1,20]])}));return function(ft,We){return fe.apply(this,arguments)}}()),te.next=20,Promise.all(z);case 20:ae=te.sent,V=ae.filter(function(fe){return fe.success}).length,ie=ae.length-V,ie>0&&De.ZP.warning("".concat(V,"\u5F20\u56FE\u7247\u4E0A\u4F20\u6210\u529F\uFF0C").concat(ie,"\u5F20\u4E0A\u4F20\u5931\u8D25"));case 24:case"end":return te.stop()}},G)}));return function(G){return pe.apply(this,arguments)}}(),[D,E]);(0,n.useEffect)(function(){var pe=function(S){var B;console.log("[AutoErrorHandling] eventBus requestId",S),(B=a.chatInput)!==null&&B!==void 0&&B.trim()&&T(S)};return ht.Z.on(ht.K.SEND_CHAT_MESSAGE,pe),function(){ht.Z.off(ht.K.SEND_CHAT_MESSAGE,pe)}},[a.chatInput,T]);var Ke=function(G){return G?.map(function(S){return{label:S.name,value:S.id}})||[]},ne=function(){var G,S;return(0,t.jsxs)("div",{className:ar("flex",xt["model-selector-popover"]),children:[(0,t.jsxs)("div",{className:ar("flex-1","flex","flex-col","gap-6","overflow-hide"),children:[(0,t.jsx)("h4",{children:"\u7F16\u7801\u6A21\u578B"}),(0,t.jsx)(Ds.Z,{className:ar(xt["select-list"]),options:Ke(o==null||(G=o.models)===null||G===void 0?void 0:G.chatModelList),value:o?.selectedModelId,onChange:o?.selectModel})]}),(0,t.jsxs)("div",{className:ar("flex-1","flex","flex-col","gap-6","overflow-hide"),children:[(0,t.jsx)("h4",{children:"\u89C6\u89C9\u6A21\u578B\uFF08\u53EF\u9009\uFF09"}),(0,t.jsx)(Ds.Z,{className:ar(xt["select-list"]),allowClear:!0,options:Ke(o==null||(S=o.models)===null||S===void 0?void 0:S.multiModelList),value:o?.selectedMultiModelId,onChange:o?.selectMultiModel})]})]})};return(0,t.jsx)("div",{className:ar("w-full","relative",C),children:(0,t.jsxs)("div",{className:ar(xt["chat-container"],"flex","flex-col"),children:[(0,t.jsxs)(vt.Z,{condition:j?.length,children:[(0,t.jsx)("h5",{className:ar(xt["file-title"]),children:"\u9644\u4EF6\u6587\u4EF6"}),(0,t.jsx)(Is.Z,{files:j,onDel:ke})]}),(0,t.jsxs)(vt.Z,{condition:D?.length,children:[(0,t.jsx)("h5",{className:ar(xt["file-title"]),children:"\u539F\u578B\u56FE\u7247"}),(0,t.jsx)(Is.Z,{files:D,onDel:xe})]}),(0,t.jsx)(vt.Z,{condition:P?.length,children:(0,t.jsx)(oo,{dataSourceList:P,onToggleSelectDataSource:A})}),l?.selectedFile&&(0,t.jsx)(Wt.Z,{title:l.selectedFile,children:(0,t.jsxs)("div",{className:"flex ".concat(xt.selectedFileDisplay),children:[(0,t.jsx)("div",{className:ar("text-ellipsis",xt["file-name"]),children:h(l.selectedFile)}),(0,t.jsx)(Ps.Z,{className:ar("cursor-pointer",xt["close-icon"]),onClick:function(){p("")}})]})}),(0,t.jsx)(Bn.Z.TextArea,{ref:de,value:a.chatInput,onChange:function(G){return a.setChatInput(G.target.value)},rootClassName:ar(xt.input),onPressEnter:he,onPaste:re,placeholder:"\u4E00\u53E5\u8BDD\u505A\u7F51\u7AD9\u3001\u5E94\u7528\u3001\u63D0\u6548\u5DE5\u5177\u7B49\uFF0C\u53EF\u9009\u62E9\u5DE5\u4F5C\u6D41\u3001\u63D2\u4EF6\u7B49\u6570\u636E\u8D44\u6E90\u62D3\u5C55\u591A\u79CD\u80FD\u529B",autoSize:{minRows:2,maxRows:6}}),(0,t.jsxs)("footer",{className:ar("flex-1",xt.footer),children:[(0,t.jsxs)("div",{className:ar("flex","items-center","gap-4"),children:[(0,t.jsx)(Ca.Z,{action:$e.GI,onChange:Te,multiple:!0,fileList:j,headers:{Authorization:E?"Bearer ".concat(E):""},data:{type:"tmp"},disabled:a.isChatLoading,showUploadList:!1,maxCount:$e.uA,children:(0,t.jsx)(Wt.Z,{title:"\u4E0A\u4F20\u9644\u4EF6",children:(0,t.jsx)(Be.ZP,{type:"text",className:ar(xt["svg-icon"],_t()({},xt["upload-box-disabled"],a.isChatLoading)),icon:(0,t.jsx)(ir.Z,{name:"icons-common-attachments",style:{fontSize:"14px"}})})})}),(0,t.jsx)(Ca.Z,{action:$e.GI,accept:"image/*",onChange:X,multiple:!0,fileList:D,headers:{Authorization:E?"Bearer ".concat(E):""},data:{type:"tmp"},disabled:a.isChatLoading,showUploadList:!1,maxCount:$e.uA,children:(0,t.jsx)(Wt.Z,{title:"\u4E0A\u4F20\u539F\u578B\u56FE\u7247",children:(0,t.jsx)(Be.ZP,{type:"text",className:ar(xt["svg-icon"],_t()({},xt["upload-box-disabled"],a.isChatLoading)),icon:(0,t.jsx)(ir.Z,{name:"icons-common-sketch",style:{fontSize:"14px"}})})})})]}),(0,t.jsxs)("div",{className:ar("flex","items-center","content-end","gap-10"),children:[(0,t.jsx)(Wt.Z,{title:"\u6A21\u578B",children:(0,t.jsx)(ls.Z,{content:(0,t.jsx)(ne,{}),trigger:"click",open:N,onOpenChange:J,children:(0,t.jsxs)("div",{className:ar("flex","items-center","gap-4","cursor-pointer",xt["model-selector"]),children:[(0,t.jsx)("span",{children:o==null||(s=o.selectedModel)===null||s===void 0?void 0:s.name}),(0,t.jsx)(Ss.Z,{className:ar(xt["model-arrow"])})]})})}),a.isChatLoading?(0,t.jsx)(Wt.Z,{title:d?"\u6B63\u5728\u505C\u6B62...":"\u53D6\u6D88AI\u4EFB\u52A1",children:(0,t.jsx)("span",{onClick:M,className:"".concat(xt.box," ").concat(xt["send-box"]," ").concat(xt["stop-box"]," ").concat(d?"":xt["stop-box-active"]," ").concat(d?xt.disabled:""),children:d?(0,t.jsx)("div",{className:xt["loading-box"],children:(0,t.jsx)(Jn.Z,{className:xt["loading-icon"]})}):(0,t.jsx)(ir.Z,{name:"icons-chat-stop"})})}):(0,t.jsx)("span",{onClick:function(){return T()},className:"".concat(xt.box," ").concat(xt["send-box"]," ").concat(!a.chatInput.trim()||y?xt.disabled:""),children:y?(0,t.jsx)("div",{className:xt["loading-box"],children:(0,t.jsx)(Jn.Z,{className:xt["loading-icon"]})}):(0,t.jsx)(ir.Z,{name:"icons-chat-send"})})]})]})]})})},uo=lo,co=i(31178),Qa=i(63488),po=i(49089),Fs=i(76886),Or={messageImageAttachment:"messageImageAttachment___s72E_",messageFileAttachment:"messageFileAttachment___rVNXz",fileAttachmentIcon:"fileAttachmentIcon___wFUzg",fileAttachmentInfo:"fileAttachmentInfo___sOm2Y",fileAttachmentName:"fileAttachmentName___r50c6",fileAttachmentType:"fileAttachmentType___nqBiA",messageDataSourceAttachment:"messageDataSourceAttachment___y_Kp0",dataSourceAttachmentIcon:"dataSourceAttachmentIcon___ygcrb",dataSourceAttachmentInfo:"dataSourceAttachmentInfo___RSCVP",dataSourceAttachmentName:"dataSourceAttachmentName___tupY2",dataSourceAttachmentType:"dataSourceAttachmentType___GcCO2"},fo=function(e){var r=e.attachment,s=e.type,a=e.size,o=a===void 0?120:a,l=e.showPreview,p=l===void 0?!0:l,d=e.className,y=e.onClick,M=function(A){var k=function(){var Z=A.source,b=Z.source_type,g=Z.data;switch(b){case"Base64":return"data:".concat(A.mime_type,";base64,").concat(g.data);case"Url":return g.url||"";case"FilePath":return g.path||"";default:return""}},F=k();return(0,t.jsx)("div",{className:"".concat(Or.messageImageAttachment," ").concat(d||""),children:(0,t.jsx)(hs.Z,{src:F,alt:A.filename||"\u56FE\u7247",width:o,height:o,style:{objectFit:"cover",borderRadius:8},preview:p?{mask:!1}:!1})})},C=function(A){var k=function(Z){switch(Z){case"Text":return"\u6587\u672C\u6587\u4EF6";case"Document":return"\u6587\u6863";case"Audio":return"\u97F3\u9891\u6587\u4EF6";default:return"\u6587\u4EF6"}},F=function(Z){switch(Z){case"Text":return(0,t.jsx)(co.Z,{});case"Document":return(0,t.jsx)(Qa.Z,{});case"Audio":return(0,t.jsx)(po.Z,{});default:return(0,t.jsx)(Qa.Z,{})}};return(0,t.jsxs)("div",{className:"".concat(Or.messageFileAttachment," ").concat(d||""),onClick:y,children:[(0,t.jsx)("div",{className:Or.fileAttachmentIcon,children:F(s)}),(0,t.jsxs)("div",{className:Or.fileAttachmentInfo,children:[(0,t.jsx)("div",{className:Or.fileAttachmentName,children:A.filename}),(0,t.jsx)("div",{className:Or.fileAttachmentType,children:k(s)})]})]})},R=function(A){var k=function(b){switch(b){case"plugin":return"\u63D2\u4EF6";case"workflow":return"\u5DE5\u4F5C\u6D41";default:return"\u6570\u636E\u6E90"}},F=function(b){switch(b){case"plugin":return(0,t.jsx)(Fs.Z,{});case"workflow":return(0,t.jsx)(za.Z,{});default:return(0,t.jsx)(Fs.Z,{})}},j=function(){if(y){y();return}var b=A.type,g=A.dataSourceId;b==="plugin"?window.open("/square/publish/plugin/".concat(g),"_blank","noopener,noreferrer"):b==="workflow"&&window.open("/square/publish/workflow/".concat(g),"_blank","noopener,noreferrer")};return(0,t.jsxs)("div",{className:"".concat(Or.messageDataSourceAttachment," ").concat(d||""),onClick:j,style:{cursor:"pointer"},children:[(0,t.jsx)("div",{className:Or.dataSourceAttachmentIcon,children:F(A.type)}),(0,t.jsxs)("div",{className:Or.dataSourceAttachmentInfo,children:[(0,t.jsx)("div",{className:Or.dataSourceAttachmentName,children:A.name}),(0,t.jsx)("div",{className:Or.dataSourceAttachmentType,children:k(A.type)})]})]})};switch(s){case"Image":return M(r);case"Text":case"Document":return C(r);case"Audio":return null;case"DataSource":return R(r);default:return null}},Rs=fo,_a=i(90586),Xa={DEFAULT_THROTTLE_DELAY:50,DEFAULT_SCROLL_THRESHOLD:50,DEFAULT_SHOW_BUTTON_THRESHOLD:100,STREAM_SCROLL_INTERVAL:300,NON_STREAM_SCROLL_DELAY:100,INITIAL_SCROLL_CHECK_DELAY:100},vo=function(e){var r=e.enableAutoScroll,s=r===void 0?!0:r,a=e.throttleDelay,o=a===void 0?Xa.DEFAULT_THROTTLE_DELAY:a,l=(0,n.useState)(s),p=w()(l,2),d=p[0],y=p[1],M=(0,n.useState)(!1),C=w()(M,2),R=C[0],P=C[1],A=(0,n.useRef)(s),k=(0,n.useRef)(null),F=(0,n.useRef)(!1),j=(0,n.useRef)(null),Z=(0,n.useCallback)(function(h){try{j.current&&j.current(h||{behavior:"smooth"});var T=document.querySelector(".react-scroll-to-bottom-container .scroll-container-inner");T&&T.scrollTo({top:T.scrollHeight,behavior:h?.behavior||"smooth"})}catch(he){console.error("[useReactScrollToBottom] \u6EDA\u52A8\u5230\u5E95\u90E8\u5931\u8D25:",he)}},[]),b=(0,n.useCallback)(function(){try{return console.log("[useReactScrollToBottom] \u68C0\u67E5\u662F\u5426\u5728\u5E95\u90E8"),!1}catch(h){return console.error("[useReactScrollToBottom] \u68C0\u67E5\u6EDA\u52A8\u4F4D\u7F6E\u5931\u8D25:",h),!1}},[]),g=(0,n.useCallback)(function(){try{}catch(h){console.error("[useReactScrollToBottom] \u68C0\u67E5\u6EDA\u52A8\u4F4D\u7F6E\u5931\u8D25:",h)}},[]),D=(0,n.useCallback)(function(){A.current=!1,y(!1),F.current=!0,P(!0)},[]),x=(0,n.useCallback)(function(){A.current=!0,y(!0),F.current=!1,P(!1)},[]),U=(0,n.useCallback)(function(){try{k.current&&(clearTimeout(k.current),k.current=null),k.current=setTimeout(function(){g()},o)}catch(h){console.error("[useReactScrollToBottom] \u5904\u7406\u7528\u6237\u6EDA\u52A8\u4E8B\u4EF6\u5931\u8D25:",h)}},[o,g]),O=(0,n.useCallback)(function(){Z({behavior:"smooth"}),A.current=!0,y(!0),P(!1),F.current=!1},[Z]),N=(0,n.useCallback)(function(){A.current=!0,y(!0),F.current=!1},[]),J=(0,n.useCallback)(function(){A.current=!1,y(!1),F.current=!0},[]),E=(0,n.useCallback)(function(){A.current=s,y(s),P(!1),F.current=!1,k.current&&(clearTimeout(k.current),k.current=null)},[s]),de=(0,n.useCallback)(function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;try{if(T){A.current=!0,y(!0),F.current=!1,Z({behavior:"smooth"});return}A.current&&!F.current&&(h?Z({behavior:"smooth"}):setTimeout(function(){A.current&&Z({behavior:"smooth"})},Xa.NON_STREAM_SCROLL_DELAY))}catch(he){console.error("[useReactScrollToBottom] \u5904\u7406\u65B0\u6D88\u606F\u5931\u8D25:",he)}},[Z]);return(0,n.useEffect)(function(){return function(){k.current&&(clearTimeout(k.current),k.current=null)}},[]),{isAutoScrollEnabled:d,showScrollButton:R,scrollToBottom:Z,scrollToBottomRef:j,handleScrollButtonClick:O,enableAutoScroll:N,disableAutoScroll:J,resetAutoScroll:E,isAtBottom:b,handleNewMessage:de,checkScrollPosition:g,handleUserScrollUp:D,handleUserScrollToBottom:x,allowAutoScrollRef:A,isUserScrollingRef:F}},mo=function(e,r,s,a,o,l,p,d){var y=(0,n.useRef)(!0),M=(0,n.useRef)(0),C=(0,n.useMemo)(function(){return e.map(function(P){return P.text||""}).join("")},[e]),R=(0,n.useMemo)(function(){return e.map(function(P){return P.isStreaming||!1}).join("")},[e]);(0,n.useEffect)(function(){if(e.length>0){var P=y.current&&e.length>0;if(M.current=e.length,P){y.current=!1,s({behavior:"smooth"}),setTimeout(function(){s({behavior:"smooth"})},100),setTimeout(function(){s({behavior:"smooth"})},300);return}var A=e[e.length-1],k=A&&A.role==="USER";k?o(!1,!0):o(r),l()}},[e.length,r,o,l,e,s]),(0,n.useEffect)(function(){if(r){var P=setInterval(function(){p.current&&!d.current&&s({behavior:"smooth"})},Xa.STREAM_SCROLL_INTERVAL);return function(){clearInterval(P)}}},[r,s]),(0,n.useEffect)(function(){if(e.length>0&&a){var P=e[e.length-1];P&&P.isStreaming&&p.current&&!d.current&&s({behavior:"smooth"})}},[C,R,a,s,e])},ho=function(e){var r=e.onScrollChange,s=e.onUserScrollUp,a=e.onUserScrollToBottom,o=e.enabled,l=o===void 0?!0:o,p=(0,n.useRef)(0),d=(0,n.useRef)(0),y=(0,n.useCallback)(function(M){var C=M.scrollTop;if(l){for(var R=[".react-scroll-to-bottom-container .scroll-container-inner",'.react-scroll-to-bottom-container [class*="react-scroll-to-bottom"]',".react-scroll-to-bottom-container"],P=null,A=0,k=R;A<k.length;A++){var F=k[A];if(P=document.querySelector(F),P)break}if(!P){console.warn("[ScrollPositionObserver] \u672A\u627E\u5230\u6EDA\u52A8\u5BB9\u5668");return}var j=P.clientHeight,Z=P.scrollHeight,b=50,g=C+j>=Z-b;if(p.current>0){var D=C-p.current;D<-10&&!g&&s&&s(),g&&a&&a()}p.current=C}},[r,s,a,l]);return(0,_a.TV)(y),n.useEffect(function(){if(l){for(var M=[".react-scroll-to-bottom-container .scroll-container-inner",'.react-scroll-to-bottom-container [class*="react-scroll-to-bottom"]',".react-scroll-to-bottom-container"],C=null,R=0,P=M;R<P.length;R++){var A=P[R];if(C=document.querySelector(A),C)break}if(!C){console.warn("[ScrollPositionObserver] \u5907\u7528\u76D1\u542C\u5668\u672A\u627E\u5230\u6EDA\u52A8\u5BB9\u5668");return}var k=function(){var j=C.scrollTop,Z=C.clientHeight,b=C.scrollHeight,g=50,D=j+Z>=b-g;if(d.current>0){var x=j-d.current;x<-10&&!D&&s&&s(),D&&a&&a()}d.current=j,r(j,D)};return C.addEventListener("scroll",k,{passive:!0}),function(){C.removeEventListener("scroll",k)}}},[l]),null},go=function(e){var r=e.children;return(0,t.jsx)(_a.AI.Consumer,{children:function(a){return(0,t.jsx)(_a.sA.Consumer,{children:function(l){return r({scrollToBottom:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{behavior:"smooth"};a.scrollToBottom(d)},scrollToTop:a.scrollToTop,scrollTo:a.scrollTo,atBottom:l.atBottom,atTop:l.atTop,sticky:l.sticky})}})}})},Co={"react-scroll-to-bottom-container":"react-scroll-to-bottom-container___tHkMa","scroll-container-inner":"scroll-container-inner___ADfcm","scroll-to-bottom-button":"scroll-to-bottom-button___wkFOA",visible:"visible___Cn5rq","scroll-container":"scroll-container___lDcD2"},qa=On().bind(Co),uu=function(e){var r=e.children;return _jsx(_Fragment,{children:r})},ks=(0,n.forwardRef)(function(c,e){var r=c.children,s=c.messages,a=s===void 0?[]:s,o=c.isStreaming,l=o===void 0?!1:o,p=c.enableAutoScroll,d=p===void 0?!0:p,y=c.throttleDelay,M=y===void 0?50:y,C=c.scrollThreshold,R=C===void 0?50:C,P=c.showButtonThreshold,A=P===void 0?100:P,k=c.className,F=c.style,j=c.onAutoScrollChange,Z=c.onScrollPositionChange,b=(0,n.useRef)(null),g=vo({enableAutoScroll:d,throttleDelay:M,scrollThreshold:R,showButtonThreshold:A}),D=g.isAutoScrollEnabled,x=g.scrollToBottom,U=g.scrollToBottomRef,O=g.handleScrollButtonClick,N=g.enableAutoScroll,J=g.disableAutoScroll,E=g.resetAutoScroll,de=g.isAtBottom,h=g.handleNewMessage,T=g.checkScrollPosition,he=g.handleUserScrollUp,Te=g.handleUserScrollToBottom,X=g.allowAutoScrollRef,ke=g.isUserScrollingRef;n.useImperativeHandle(U,function(){return function(S){b.current&&b.current.scrollTo({top:b.current.scrollHeight,behavior:S?.behavior||"smooth"})}},[]);var xe=(0,n.useRef)(null),re=(0,n.useRef)(null),Ke=(0,n.useRef)(null),ne=(0,n.useCallback)(function(S){xe.current&&xe.current(S||{behavior:"smooth"})},[]),pe=(0,n.useCallback)(function(){return re.current?re.current():de()},[de]),G=(0,n.useCallback)(function(){Ke.current?Ke.current():T()},[T]);return mo(a,l,x,D,h,G,X,ke),(0,n.useImperativeHandle)(e,function(){return{scrollToBottom:ne,handleScrollButtonClick:O,enableAutoScroll:N,disableAutoScroll:J,resetAutoScroll:E,isAtBottom:pe,handleNewMessage:h,checkScrollPosition:G,getScrollContainer:function(){return b.current}}},[x,O,N,J,E,pe,h,G]),n.useEffect(function(){j?.(D)},[D,j]),n.useEffect(function(){var S=function(){};S()},[pe,Z]),n.useEffect(function(){var S=setTimeout(function(){var B=document.querySelector(".react-scroll-to-bottom-container .scroll-container-inner");if(B){var K=!0,ve=function(){var H=B.scrollTop,Le=B.clientHeight,Se=B.scrollHeight,ge=150,m=H+Le>=Se-ge;m!==K&&(K=m,Z?.(m))};return B.addEventListener("scroll",ve,{passive:!0}),ve(),function(){B.removeEventListener("scroll",ve)}}},100);return function(){clearTimeout(S)}},[Z]),(0,t.jsx)("div",{className:qa("react-scroll-to-bottom-container",k),style:F,children:(0,t.jsx)(_a.ZP,{mode:"bottom",followButtonClassName:qa("scroll-to-bottom-button"),children:(0,t.jsx)(go,{children:function(B){var K=B.scrollToBottom,ve=B.atBottom;return U.current=K,xe.current=K,re.current=function(){return ve},Ke.current=function(){},(0,t.jsxs)("div",{ref:b,className:qa("scroll-container-inner"),children:[(0,t.jsx)(ho,{onScrollChange:function(){},onUserScrollUp:he,onUserScrollToBottom:Te,enabled:!0}),r]})}})})})});ks.displayName="ReactScrollToBottomContainer";var So=ks,Dt={"xagi-nav-style2":"xagi-nav-style2___keABS",text:"text___zzw2q","page-container":"page-container___rrScw",chatCard:"chatCard___uD3Mb",chatModeContainer:"chatModeContainer___uUb90",chatModeSwitcher:"chatModeSwitcher___XdJQ9",chatModeSegmented:"chatModeSegmented___anO13",versionSelectorWrapper:"versionSelectorWrapper___klCbl",conversationSelectorWrapper:"conversationSelectorWrapper___xhFzr",versionSelector:"versionSelector___OL3O1",versionDropdown:"versionDropdown___Na1AH","ant-select-item-option-selected":"ant-select-item-option-selected___mlghM",chatMessagesWrapper:"chatMessagesWrapper___yrMaF",chatMessages:"chatMessages___CgSwv",loadingContainer:"loadingContainer___x1AAn",conversationDivider:"conversationDivider___pAVT3",dividerLine:"dividerLine___Kffe1",dividerContent:"dividerContent___x4uUL",conversationTopic:"conversationTopic___ociti",conversationTime:"conversationTime___UBhqf",messageWrapper:"messageWrapper___nuUiu",user:"user___FIZo5",messageBubble:"messageBubble___xztlO",assistant:"assistant___AVEPw",messageAttachments:"messageAttachments___sxa5v",chatAreaMarkdown:"chatAreaMarkdown___C2ifT",streamingIndicator:"streamingIndicator___X824l",streamingText:"streamingText___GwRkn",blink:"blink___sB2S5",loadingIndicator:"loadingIndicator___Wm8w6",errorIndicator:"errorIndicator___DrFEv",thinkingArea:"thinkingArea___FufYr",thinkingHeader:"thinkingHeader___GyEHR",thinkingTitle:"thinkingTitle___dFZaS",expandIcon:"expandIcon___gvT0L",thinkingContent:"thinkingContent___GZt3f",thinkingLine:"thinkingLine___LilvN",buttonMessage:"buttonMessage___eVJ5W",actionButton:"actionButton___faBY0",sectionMessage:"sectionMessage___O12vx",sectionTitle:"sectionTitle___T2Qnq",sectionItems:"sectionItems___sJcAq",sectionItem:"sectionItem___UCgUC",detailsMessage:"detailsMessage___DOOKz",detailsHeader:"detailsHeader___XMROi",detailsTitle:"detailsTitle___QatAY",detailsContent:"detailsContent___hbJat",detailItem:"detailItem___bVAvx",selectedDataSources:"selectedDataSources___Z3Yjn",dataSourceHeader:"dataSourceHeader___fk50k",dataSourceList:"dataSourceList___KIKir",chatInput:"chatInput___i6Q7n",chatInputContainer:"chatInputContainer___bdWwC",imagePreviewItem:"imagePreviewItem____4sc2",deleteIcon:"deleteIcon___FNgwM",imageCountIndicator:"imageCountIndicator___CtMa8",clearAllButton:"clearAllButton___ySAVf",textareaInput:"textareaInput___PofeT",box:"box___b46Gb","send-box":"send-box___k6EmI",disabled:"disabled___SJXe3","stop-box":"stop-box___EA15g","stop-box-active":"stop-box-active___H8zMF","loading-box":"loading-box___Vhgcm","loading-icon":"loading-icon___eU9gx",spin:"spin___AMs0J",expanded:"expanded___cUMDe",customScrollButton:"customScrollButton___i9g8i",scrollToBottomButton:"scrollToBottomButton___DmK7f",visible:"visible___zdWX0",progressContainer:"progressContainer___rplEb","slide-in-down":"slide-in-down___mEgYv",progressBar:"progressBar___GH_P5",progressBarItem:"progressBarItem___qPsCi",active:"active___ZbuFD",shine:"shine___Tr9_n",inactive:"inactive___raaF6","message-slide-in":"message-slide-in___JGfas"},xs=kt.Z.Text,yo=function(e){var r=e.chat,s=e.projectId,a=e.selectedDataSources,o=a===void 0?[]:a,l=e.onUpdateDataSources,p=e.fileContentState,d=e.onSetSelectedFile,y=e.modelSelector,M=e.onUserManualSendMessage,C=e.onUserCancelAgentTask,R=(0,yt.useModel)("autoErrorHandling").autoRetryCount,P=(0,n.useState)(new Set),A=w()(P,2),k=A[0],F=A[1],j=(0,n.useState)(!1),Z=w()(j,2),b=Z[0],g=Z[1],D=(0,n.useState)(!1),x=w()(D,2),U=x[0],O=x[1],N=(0,n.useRef)(null),J=(0,n.useState)(!1),E=w()(J,2),de=E[0],h=E[1],T=(0,n.useCallback)(function(){var ne;(ne=N.current)===null||ne===void 0||ne.handleScrollButtonClick()},[]),he=(0,n.useCallback)(function(ne){F(function(pe){var G=new Set(pe);return G.has(ne)?G.delete(ne):G.add(ne),G})},[]),Te=(0,n.useCallback)(I()(u()().mark(function ne(){var pe,G,S,B,K;return u()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!b){L.next=2;break}return L.abrupt("return");case 2:if(g(!0),C?.(),L.prev=4,pe=r.aiChatSessionId,G=r.chatMessages[r.chatMessages.length-1],S=G?.sessionId,!(pe&&!S)){L.next=14;break}return L.next=11,sr(s,pe);case 11:B=L.sent,L.next=18;break;case 14:if(!S){L.next=18;break}return L.next=17,Gt(s,S);case 17:B=L.sent;case 18:B&&B.success?(De.ZP.success("Agent \u4EFB\u52A1\u5DF2\u53D6\u6D88"),r.cancelChat()):De.ZP.error("\u53D6\u6D88 Agent \u4EFB\u52A1\u5931\u8D25: ".concat(((K=B)===null||K===void 0?void 0:K.message)||"\u672A\u77E5\u9519\u8BEF")),L.next=25;break;case 21:L.prev=21,L.t0=L.catch(4),De.ZP.error("\u53D6\u6D88 Agent \u4EFB\u52A1\u5931\u8D25"),r.cancelChat();case 25:return L.prev=25,g(!1),L.finish(25);case 28:case"end":return L.stop()}},ne,null,[[4,21,25,28]])})),[r,s,b]),X=(0,n.useCallback)(function(ne){var pe=o.map(function(G){return G.id===ne.id?f()(f()({},G),{},{isSelected:!G.isSelected}):G});l(pe)},[o]),ke=(0,n.useCallback)(function(ne,pe,G){O(!0);try{var S=ne?.map(function(L){return{url:L.url,mimeType:L.type,fileName:L.name,fileKey:L.uid}}),B=pe?.map(function(L){return{url:L.url,mimeType:L.type,fileName:L.name,fileKey:L.uid}}),K=[];if(ne?.forEach(function(L){var H,Le={id:L.uid,filename:L.name,mime_type:L.type,source:{source_type:"Url",data:{url:L.url,mime_type:L.type}}};(H=L.type)!==null&&H!==void 0&&H.startsWith("image")?K.push({type:"Image",content:f()({dimensions:{width:L.width||0,height:L.height||0}},Le)}):K.push({type:"Document",content:f()({size:L.size},Le)})}),p!=null&&p.selectedFile&&K.push({type:"Text",content:{id:Pa("file"),filename:p.selectedFile,source:{source_type:"FilePath",data:{path:p.selectedFile}}}}),r.sendMessage(K,S,B,G),G||M?.(),setTimeout(function(){var L;(L=N.current)===null||L===void 0||L.handleScrollButtonClick()},1e3),l){var ve=o.map(function(L){return f()(f()({},L),{},{isSelected:!1})});l(ve)}}catch{De.ZP.error("\u53D1\u9001\u6D88\u606F\u5931\u8D25")}finally{setTimeout(function(){O(!1)},500)}},[r,p?.selectedFile]),xe=(0,n.useCallback)(function(ne){var pe,G,S=ne.role==="USER",B=ne.role==="ASSISTANT",K=!!(ne.conversationTopic&&ne.conversationCreated),ve=!K&&ne.isStreaming,L=!1,H=!1,Le=ne.think&&ne.think.trim()!=="",Se=k.has(ne.id),ge=[],m=[];if(S){var z,ae;ge=v()(ne.attachments||[]),m=ne.dataSources||[],(z=ge).unshift.apply(z,v()(((ae=ne.attachmentPrototypeImages)===null||ae===void 0?void 0:ae.map(function(V){return{type:"Image",content:{id:V.fileKey,filename:V.fileName,mime_type:V.mimeType,source:{source_type:"Url",data:{url:V.url,mime_type:V.mimeType}}}}}))||[]))}else ge=ne.attachments||[];return(0,t.jsx)("div",{className:"".concat(Dt.messageWrapper," ").concat(S?Dt.user:Dt.assistant),children:(0,t.jsxs)("div",{className:Dt.messageBubble,children:[(0,t.jsx)("div",{className:Dt.messageContent,children:S?(0,t.jsxs)("div",{children:[(pe=ne.text)===null||pe===void 0?void 0:pe.split(`
`).map(function(V,ie){return(0,t.jsx)("div",{children:V},ie)}),(ge.length>0||m.length>0)&&(0,t.jsxs)("div",{className:Dt.messageAttachments,children:[ge.map(function(V){return(0,t.jsx)(Rs,{attachment:V.content,type:V.type,size:60,showPreview:!0},V.content.id)}),m.map(function(V){return(0,t.jsx)(Rs,{attachment:Rr(V),type:"DataSource",size:60,showPreview:!0},"".concat(V.dataSourceId,"-").concat(V.type))})]})]}):(0,t.jsx)(ro,{message:ne,isHistoryMessage:K},ne.id)}),L&&!ve&&(0,t.jsxs)("div",{className:Dt.loadingIndicator,children:[(0,t.jsx)(Sa.Z,{size:"small"}),(0,t.jsx)("span",{children:"\u6B63\u5728\u601D\u8003..."})]}),H&&(0,t.jsx)("div",{className:Dt.errorIndicator,children:(0,t.jsx)("span",{children:"\u274C \u6D88\u606F\u53D1\u9001\u5931\u8D25"})}),Le&&B&&(0,t.jsxs)("div",{className:Dt.thinkingArea,children:[(0,t.jsxs)("div",{className:Dt.thinkingHeader,onClick:function(){return he(ne.id)},children:[(0,t.jsx)("span",{className:Dt.thinkingTitle,children:"\u{1F4AD} AI \u601D\u8003\u8FC7\u7A0B"}),(0,t.jsx)("span",{className:Dt.expandIcon,children:Se?"\u25BC":"\u25B6"})]}),Se&&(0,t.jsx)("div",{className:Dt.thinkingContent,children:(G=ne.think)===null||G===void 0?void 0:G.split(`
`).map(function(V,ie){return(0,t.jsx)("div",{className:Dt.thinkingLine,children:V},ie)})})]}),ve&&(0,t.jsx)("div",{className:Dt.streamingIndicator,children:(0,t.jsx)(Sa.Z,{size:"small"})})]})},ne.id)},[k,he]),re=(0,n.useCallback)(function(ne,pe,G){return(0,t.jsxs)("div",{className:Dt.conversationDivider,children:[(0,t.jsx)("div",{className:Dt.dividerLine}),(0,t.jsxs)("div",{className:Dt.dividerContent,children:[(0,t.jsx)(xs,{type:"secondary",className:Dt.conversationTopic,children:ne}),(0,t.jsx)(xs,{type:"secondary",className:Dt.conversationTime,children:ot()(pe).format("YYYY-MM-DD HH:mm")})]}),(0,t.jsx)("div",{className:Dt.dividerLine})]},"divider-".concat(G))},[]),Ke=(0,n.useMemo)(function(){var ne=r.chatMessages,pe=[],G=null;return ne.forEach(function(S){S.conversationTopic&&S.sessionId&&S.sessionId!==G&&(pe.push(re(S.conversationTopic,S.conversationCreated||S.time,S.id)),G=S.sessionId),pe.push(xe(S))}),pe},[r.chatMessages,xe,re]);return(0,t.jsxs)(ys.Z,{className:Dt.chatCard,variant:"outlined",children:[(0,t.jsx)(So,{ref:N,messages:r.chatMessages,isStreaming:r.isChatLoading,enableAutoScroll:!0,className:Dt.chatMessagesWrapper,style:{height:"100%",minHeight:0},onScrollPositionChange:function(pe){h(!pe)},children:(0,t.jsx)("div",{className:Dt.chatMessages,children:r.isLoadingHistory?(0,t.jsx)(cn,{type:"loading",icon:(0,t.jsx)(Jn.Z,{}),title:"\u6B63\u5728\u52A0\u8F7D\u5386\u53F2\u4F1A\u8BDD",description:"\u8BF7\u7A0D\u5019..."}):!r.chatMessages||r.chatMessages.length===0?(0,t.jsx)(cn,{type:"empty",icon:(0,t.jsx)(Li.Z,{}),title:"\u5F00\u59CB\u65B0\u5BF9\u8BDD",description:"\u5411 AI \u52A9\u624B\u63D0\u95EE\uFF0C\u5F00\u59CB\u60A8\u7684\u9879\u76EE\u5F00\u53D1"}):Ke})}),(0,t.jsxs)("div",{className:Dt.chatInputContainer,children:[(0,t.jsx)("div",{className:"".concat(Dt.scrollToBottomButton," ").concat(de?Dt.visible:""),onClick:T,children:(0,t.jsx)(Ss.Z,{})}),R>0&&r.isChatLoading&&(0,t.jsx)(Wt.Z,{title:"(".concat(R,"/3) \u5C1D\u8BD5\u81EA\u52A8\u4FEE\u590D\u4E2D..."),children:(0,t.jsx)("div",{className:Dt.progressContainer,children:(0,t.jsxs)("div",{className:Dt.progressBar,children:[(0,t.jsx)("div",{className:"".concat(Dt.progressBarItem," ").concat(R>=1?Dt.active:"")}),(0,t.jsx)("div",{className:"".concat(Dt.progressBarItem," ").concat(R>=2?Dt.active:"")}),(0,t.jsx)("div",{className:"".concat(Dt.progressBarItem," ").concat(R>=3?Dt.active:"")})]})})}),(0,t.jsx)(uo,{chat:r,modelSelector:y,fileContentState:p,onSetSelectedFile:d,dataSourceList:o,onToggleSelectDataSource:X,isStoppingTask:b,isSendingMessage:U,handleCancelAgentTask:Te,onEnter:ke})]})]})},Eo=yo,Ls=i(93181),Ao=i(77635),Ms=i(52427),_o=function(e){var r=e.logs,s=function(){return r.some(function(l){return l.level===se.ERROR})?"error":r.some(function(l){return l.level===se.WARN})?"warn":r.some(function(l){return l.level===se.INFO})?"info":"normal"},a=function(){return r.map(function(l,p){var d=l.content.replace(/\[\d{4}\/\d{2}\/\d{2}\s+\d{2}:\d{2}:\d{2}\]\s*/,"");d=d.replace(/^\d+\|\s*/,"");var y="log-line log-line-".concat(l.level.toLowerCase());return(0,t.jsx)("div",{className:y,children:(0,t.jsx)("span",{className:"log-content",children:d})},"".concat(l.line,"-").concat(p))})};return(0,t.jsx)("div",{className:"log-content-block log-content-block-".concat(s()),children:(0,t.jsx)("div",{className:"log-text",children:a()})})},bo=function(e){var r=e.group,s=e.onAddToChat,a=r.logs.map(function(l){return l.content}).join(`
`).trim(),o=function(){s&&a&&s(a,!1)};return(0,t.jsxs)("div",{className:"log-group",onClick:o,style:{cursor:s?"pointer":"default"},children:[(0,t.jsx)("div",{className:"log-group-header",children:(0,t.jsx)(Wt.Z,{title:s?"\u70B9\u51FB\u6DFB\u52A0\u5230\u804A\u5929\u6846":"",children:(0,t.jsx)("div",{className:"group-header-left",children:(0,t.jsx)("span",{className:"group-timestamp",children:Jr(r.timestamp)})})})}),(0,t.jsx)("div",{className:"log-group-content",children:(0,t.jsx)(_o,{logs:r.logs})})]})},wo=function(e){var r=e.logs,s=e.hasErrorInLatestBlock,a=e.isLoading,o=a===void 0?!1:a,l=e.lastLine,p=l===void 0?0:l,d=e.onClear,y=e.onRefresh,M=e.onClose,C=e.onAddToChat,R=e.isChatLoading,P=R===void 0?!1:R,A=e.onResetAutoRetry,k=e.visible,F=k===void 0?!1:k,j=(0,n.useRef)(null),Z=(0,n.useState)([]),b=w()(Z,2),g=b[0],D=b[1],x=(0,n.useState)(!1),U=w()(x,2),O=U[0],N=U[1],J=(0,n.useRef)(null),E=(0,n.useRef)(null);(0,n.useEffect)(function(){var h=yr(r);D(h)},[r]),(0,n.useEffect)(function(){if(J.current&&(clearTimeout(J.current),J.current=null),o&&p<=1)O||(E.current=Date.now(),N(!0));else if(!o&&O){var h=E.current?Date.now()-E.current:0,T=Math.max(0,500-h);J.current=setTimeout(function(){N(!1),E.current=null},T)}return function(){J.current&&(clearTimeout(J.current),J.current=null)}},[o,p,O]),(0,n.useEffect)(function(){g.length>0&&j.current&&setTimeout(function(){j.current&&(j.current.scrollTop=j.current.scrollHeight)},0)},[g.length,g]),(0,n.useEffect)(function(){if(g.length>0&&j.current){var h=setTimeout(function(){j.current&&(j.current.scrollTop=j.current.scrollHeight)},100);return function(){return clearTimeout(h)}}},[]),(0,n.useEffect)(function(){if(!P){var h=g.at(-1);s&&h&&C?.(h?.logs.map(function(T){return T.content}).join(`
`).trim(),!0)}},[s,g,P]);var de=(0,n.useCallback)(function(){if(!(!C||P||!A)){A?.();var h=g.at(-1),T=h?.logs.some(function(he){return Xe(he)});T&&h&&C?.(h?.logs.map(function(he){return he.content}).join(`
`).trim(),!0)}},[g,C,A]);return F?(0,t.jsxs)("div",{className:"dev-log-console",children:[(0,t.jsxs)("div",{className:"dev-log-console-header",children:[(0,t.jsxs)("div",{className:"header-left",children:[(0,t.jsx)(Ls.Z,{className:"header-icon"}),(0,t.jsx)("span",{className:"header-title",children:"\u5F00\u53D1\u670D\u52A1\u5668\u65E5\u5FD7"}),s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Wt.Z,{title:"\u6700\u65B0\u65E5\u5FD7\u5305\u542B\u9519\u8BEF",children:(0,t.jsx)(Ms.Z,{status:"error",className:"error-badge"})}),C&&(0,t.jsx)(Be.ZP,{size:"small",danger:!0,disabled:!C||P,icon:(0,t.jsx)(ir.Z,{name:"icons-common-stars",style:{fontSize:"12px"}}),onClick:de,children:"\u4E00\u952E\u95EE\u9898\u5904\u7406"})]})]}),(0,t.jsxs)("div",{className:"header-right",children:[(0,t.jsx)(Wt.Z,{title:"\u5237\u65B0\u65E5\u5FD7",children:(0,t.jsx)(Be.ZP,{type:"text",size:"small",icon:(0,t.jsx)(Ea.Z,{}),onClick:y})}),(0,t.jsx)(Wt.Z,{title:"\u6E05\u7A7A\u65E5\u5FD7",children:(0,t.jsx)(Be.ZP,{type:"text",size:"small",icon:(0,t.jsx)(Ao.Z,{}),onClick:d})}),(0,t.jsx)(Wt.Z,{title:"\u5173\u95ED\u65E5\u5FD7\u63A7\u5236\u53F0",children:(0,t.jsx)(Be.ZP,{type:"text",size:"small",icon:(0,t.jsx)(Ps.Z,{}),onClick:M})})]})]}),(0,t.jsx)("div",{className:"dev-log-console-body",children:O?(0,t.jsxs)("div",{className:"loading-logs",children:[(0,t.jsx)("div",{className:"loading-spinner",children:(0,t.jsx)(Ea.Z,{spin:!0})}),(0,t.jsx)("p",{children:"\u6B63\u5728\u52A0\u8F7D\u65E5\u5FD7..."})]}):g.length>0?(0,t.jsx)("div",{ref:j,className:"log-list",children:g.map(function(h,T){return(0,t.jsx)(bo,{group:h,onAddToChat:C},"".concat(h.timestamp,"-").concat(T))})}):(0,t.jsxs)("div",{className:"empty-logs",children:[(0,t.jsx)(Ls.Z,{className:"empty-icon"}),(0,t.jsx)("p",{children:"\u6682\u65E0\u65E5\u5FD7\u6570\u636E"})]})})]}):null},jo=wo,Ns=i(58176),hr={"xagi-nav-style2":"xagi-nav-style2___b87kI",text:"text___NVvi7","page-container":"page-container___q2QNS",editorHeaderRight:"editorHeaderRight___Fgtpf",versionSelectorButton:"versionSelectorButton___QXuC2",versionSelectorDropdown:"versionSelectorDropdown___AgVSg",caretDownIcon:"caretDownIcon___i5LxT",expanded:"expanded___wGqg9",previewStatusInfo:"previewStatusInfo___mFvj1",lastUpdated:"lastUpdated___z_Bjq",previewTitle:"previewTitle___Jle7A",statusBadge:"statusBadge___my73P",loadingBadge:"loadingBadge___sGJj3",versionDropdownButton:"versionDropdownButton___Elm_z"},Io=function(e){var r=e.isSwitching,s=e.targetVersion,a=e.onCancelCompare,o=e.onConfirmVersionSwitch,l=e.isChatLoading,p=(0,n.useMemo)(function(){return r},[r]),d=(0,n.useMemo)(function(){return r||l},[r,l]),y=(0,n.useMemo)(function(){return"\u5207\u6362 v".concat(s," \u7248\u672C")},[s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Qt.Z,{message:zt.READ_ONLY_MESSAGE,showIcon:!0,className:hr.versionDropdownButton}),(0,t.jsx)(Be.ZP,{onClick:a,disabled:d,children:"\u53D6\u6D88"}),(0,t.jsx)(Be.ZP,{type:"primary",onClick:o,loading:p,disabled:d,children:y})]})},Do=function(e){var r=e.devServerUrl,s=e.isStarting,a=e.isRestarting,o=e.isProjectUploading,l=e.isLoading,p=e.lastRefreshed,d=(0,n.useMemo)(function(){return!!r},[r]);return(0,t.jsxs)("div",{className:hr.previewStatusInfo,children:[!o&&!a&&!s&&!l&&d&&(0,t.jsx)("span",{className:hr.statusBadge,children:"\u5F00\u53D1\u670D\u52A1\u5668\u5DF2\u8FDE\u63A5"}),!s&&!a&&!o&&l&&(0,t.jsxs)("span",{className:hr.loadingBadge,children:[(0,t.jsx)(Rt.Z,{spin:!0,style:{fontSize:12}}),"\u52A0\u8F7D\u4E2D..."]}),s&&(0,t.jsxs)("span",{className:hr.loadingBadge,children:[(0,t.jsx)(Rt.Z,{spin:!0,style:{fontSize:12}}),"\u542F\u52A8\u4E2D..."]}),a&&(0,t.jsxs)("span",{className:hr.loadingBadge,children:[(0,t.jsx)(Rt.Z,{spin:!0,style:{fontSize:12}}),"\u91CD\u542F\u4E2D..."]}),o&&(0,t.jsxs)("span",{className:hr.loadingBadge,children:[(0,t.jsx)(Rt.Z,{spin:!0,style:{fontSize:12}}),"\u5BFC\u5165\u4E2D..."]}),p&&(0,t.jsxs)("span",{className:hr.lastUpdated,children:["\u6700\u540E\u66F4\u65B0: ",p.toLocaleTimeString()]})]})},To=function(e){var r=e.versionList,s=e.currentVersion,a=e.onVersionSelect,o=e.getActionColor,l=e.getActionText,p=e.isChatLoading,d=(0,n.useState)(!1),y=w()(d,2),M=y[0],C=y[1],R=(0,n.useMemo)(function(){return r.length===0||p},[r.length,p]),P=(0,n.useMemo)(function(){return"v".concat(s||"-")},[s]),A=(0,n.useMemo)(function(){return r.map(function(F){return{key:F.version.toString(),label:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("span",{children:["v",F.version]}),(0,t.jsx)("span",{style:{fontSize:"10px",color:"#999",marginLeft:8},children:F.time}),(0,t.jsx)(us.Z,{color:o(F.action),style:{marginLeft:8,fontSize:"10px"},children:l(F.action)})]}),onClick:function(){return a(parseInt(F.version))}}})},[r,o,l,a]),k=(0,n.useMemo)(function(){return[s?.toString()||""]},[s]);return(0,t.jsx)(Ns.Z,{menu:{items:A,selectedKeys:k},disabled:R,trigger:["click"],placement:"bottomRight",overlayClassName:hr.versionSelectorDropdown,onOpenChange:function(j){C(j)},children:(0,t.jsxs)(Be.ZP,{type:"text",className:hr.versionSelectorButton,disabled:R,children:[P,(0,t.jsx)(ir.Z,{name:"icons-common-caret_down",className:"".concat(hr.caretDownIcon," ").concat(M?hr.expanded:""),style:{fontSize:16}})]})})},Po=function(e){var r=e.showDevLogConsole,s=e.hasErrorInLatestBlock,a=e.onToggleDevLogConsole,o=(0,n.useMemo)(function(){return r?"\u5173\u95ED\u65E5\u5FD7":"\u67E5\u770B\u65E5\u5FD7"},[r]),l=(0,n.useMemo)(function(){return s},[s]);return(0,t.jsx)(Wt.Z,{title:o,children:(0,t.jsx)(Ms.Z,{dot:l,offset:[-8,8],children:(0,t.jsx)(Be.ZP,{type:"text",className:hr.consoleButton,icon:(0,t.jsx)(ir.Z,{name:"icons-common-console",style:{fontSize:16}}),onClick:a})})})},Fo=function(e){var r=e.onImportProject,s=e.onUploadSingleFile,a=e.onRefreshPreview,o=e.onRestartServer,l=e.onFullscreenPreview,p=e.onExportProject,d=e.isChatLoading,y=e.devServerUrl,M=(0,n.useMemo)(function(){return d||!y},[d,y]),C=(0,n.useMemo)(function(){return[{key:"import",icon:(0,t.jsx)(ir.Z,{name:"icons-common-import",style:{fontSize:16}}),label:"\u5BFC\u5165\u9879\u76EE",onClick:r,disabled:d},{type:"divider"},{key:"restart",icon:(0,t.jsx)(ir.Z,{name:"icons-common-restart",style:{fontSize:16}}),label:"\u91CD\u542F\u670D\u52A1\u5668",onClick:o,disabled:d},{key:"fullscreen",icon:(0,t.jsx)(ir.Z,{name:"icons-common-fullscreen",style:{fontSize:16}}),label:"\u5168\u5C4F\u9875\u9762\u9884\u89C8",onClick:l,disabled:d},{type:"divider"},{key:"export",icon:(0,t.jsx)(ir.Z,{name:"icons-common-download",style:{fontSize:16}}),label:"\u5BFC\u51FA\u9879\u76EE",onClick:p,disabled:d}]},[r,s,a,o,l,p,d,M]);return(0,t.jsx)(Ns.Z,{trigger:["click"],menu:{items:C},placement:"bottomRight",children:(0,t.jsx)(Be.ZP,{type:"text",className:hr.moreActionsButton,icon:(0,t.jsx)(ir.Z,{name:"icons-common-more",style:{fontSize:"16px"}})})})},Ro=function(e){var r=e.isComparing,s=e.versionCompareData,a=e.activeTab,o=e.previewData,l=e.versionData,p=e.consoleData,d=e.actionsData,y=e.isChatLoading,M=(0,n.useMemo)(function(){return a==="preview"},[a]);return(0,t.jsx)("div",{className:hr.editorHeaderRight,children:r?(0,t.jsx)(Io,{isSwitching:s.isSwitching,targetVersion:s.targetVersion,onCancelCompare:s.onCancelCompare,onConfirmVersionSwitch:s.onConfirmVersionSwitch,isChatLoading:y}):(0,t.jsxs)(t.Fragment,{children:[M&&(0,t.jsx)(Do,{devServerUrl:o.devServerUrl,isStarting:o.isStarting,isRestarting:o.isRestarting,isProjectUploading:o.isProjectUploading,isLoading:o.isLoading,lastRefreshed:o.lastRefreshed}),(0,t.jsx)(To,{versionList:l.versionList,currentVersion:l.currentVersion,onVersionSelect:l.onVersionSelect,getActionColor:l.getActionColor,getActionText:l.getActionText,isChatLoading:y}),(0,t.jsx)(Po,{showDevLogConsole:p.showDevLogConsole,hasErrorInLatestBlock:p.hasErrorInLatestBlock,onToggleDevLogConsole:p.onToggleDevLogConsole}),M&&(0,t.jsx)(Wt.Z,{title:"\u5237\u65B0\u9884\u89C8",children:(0,t.jsx)(Be.ZP,{type:"text",className:hr.refreshButton,icon:(0,t.jsx)(ir.Z,{name:"icons-common-refresh",style:{fontSize:16}}),onClick:d.onRefreshPreview})}),(0,t.jsx)(Fo,{onImportProject:d.onImportProject,onUploadSingleFile:d.onUploadSingleFile,onRefreshPreview:d.onRefreshPreview,onRestartServer:d.onRestartServer,onFullscreenPreview:d.onFullscreenPreview,onExportProject:d.onExportProject,isChatLoading:y,devServerUrl:o.devServerUrl})]})})},ko=Ro,xo=function(e){var r=e.visible,s=e.tip,a=e.icon,o=e.zIndex;return r?(0,t.jsxs)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(255,255,255,0.80)",zIndex:o||9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,t.jsx)("div",{style:{marginBottom:32},children:a||(0,t.jsx)(Rt.Z,{spin:!0,style:{fontSize:52,color:"#1677ff"}})}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:600,color:"#333",textAlign:"center",maxWidth:520},children:s||"\u6B63\u5728\u6267\u884C\u6587\u4EF6\u64CD\u4F5C\uFF0C\u8BF7\u7A0D\u5019..."})]}):null},Lo=xo,Mo=i(67926),No=i(27806),Bo=i(61606),Bs=i(50716),Os=i(26145),Oo=i(83352),Uo=i(70375),Zo=i(6619),Us=i(86743),Zs=i(70183),Go={"xagi-nav-style2":"xagi-nav-style2___brOBq",text:"text___jiRV6","page-container":"page-container___GRrBi",dataResourceItem:"dataResourceItem___ObWIg"},Ko=function(e){switch(e){case"plugin":return"\u63D2\u4EF6\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7279\u5B9A\u529F\u80FD\u548C\u670D\u52A1";case"workflow":return"\u5DE5\u4F5C\u6D41\u8D44\u6E90\uFF0C\u652F\u6301\u590D\u6742\u7684\u4E1A\u52A1\u6D41\u7A0B\u7F16\u6392";default:return"\u6570\u636E\u8D44\u6E90"}},Ho=function(e){return{id:Number(e.id),targetId:Number(e.id),name:e.name,description:e.description||Ko(e.type),type:e.type==="plugin"?er.qR.Plugin:er.qR.Workflow,icon:e.icon||"",targetConfig:void 0,spaceId:0,bindConfig:void 0,tenantId:0,agentId:0,exceptionOut:er.Km.No,fallbackMsg:"",modified:"",created:"",groupDescription:"",groupName:""}},Wo=function(e){switch(e.toLowerCase()){case"plugin":return Os;case"workflow":return Oo;default:return console.log("Using default plugin image for type:",e),Os}},Vo=function(e){var r=e.resources,s=e.onDelete,a=e.projectId,o=(0,n.useState)({}),l=w()(o,2),p=l[0],d=l[1],y=function(){var R=I()(u()().mark(function P(A){var k;return u()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(k=r.find(function(Z){return Z.id===A}),k){j.next=4;break}return De.ZP.error("\u672A\u627E\u5230\u8981\u5220\u9664\u7684\u6570\u636E\u6E90"),j.abrupt("return");case 4:$t.Z.confirm({content:"\u6570\u636E\u8D44\u6E90\u4E00\u65E6\u5220\u9664\uFF0C\u9875\u9762\u5C06\u5931\u53BB\u5BF9\u8BE5\u8D44\u6E90\u7684\u8BBF\u95EE\u6743\u9650",okText:"\u786E\u8BA4\u5220\u9664",cancelText:"\u53D6\u6D88",okType:"danger",icon:null,onOk:function(){var Z=I()(u()().mark(function g(){var D,x;return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(O.prev=0,d(function(N){return f()(f()({},N),{},_t()({},A,!0))}),!a){O.next=10;break}return D=k.type==="plugin"||k.type==="workflow"?k.type:"plugin",O.next=6,qr({projectId:a,type:D,dataSourceId:A});case 6:if(x=O.sent,x?.code!=="0000"){O.next=10;break}return O.next=10,s?.(A);case 10:return O.prev=10,d(function(N){return f()(f()({},N),{},_t()({},A,!1))}),O.finish(10);case 13:case"end":return O.stop()}},g,null,[[0,,10,13]])}));function b(){return Z.apply(this,arguments)}return b}()});case 5:case"end":return j.stop()}},P)}));return function(A){return R.apply(this,arguments)}}(),M=function(P){P.type==="plugin"?window.open("".concat("","/square/publish/plugin/").concat(P.id),"_blank","noopener,noreferrer"):P.type==="workflow"&&window.open("".concat("","/square/publish/workflow/").concat(P.id),"_blank","noopener,noreferrer")},C=function(P){var A=p[P.id]||!1,k=Ho(P),F=Wo(P.type);return(0,t.jsx)("div",{onClick:function(){return M(P)},children:(0,t.jsx)(Uo.Z,{agentComponentInfo:k,defaultImage:F,className:Go.dataResourceItem,showImage:!0,extra:(0,t.jsx)(Zo.Z,{title:"\u5220\u9664",icon:A?(0,t.jsx)(Jn.Z,{}):(0,t.jsx)(Us.Z,{className:"cursor-pointer"}),onClick:function(Z){Z.stopPropagation(),y(Number(P.id))}})})},P.id)};return(0,t.jsx)("div",{style:{height:"200px",padding:"8px",margin:"0 4px",overflow:"auto"},children:r.length===0?(0,t.jsx)(Zs.Z,{image:Zs.Z.PRESENTED_IMAGE_SIMPLE,description:"\u70B9\u51FB\u201C+\u201D\u6DFB\u52A0\u6570\u636E\u8D44\u6E90"}):(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:r.map(function(R){return C(R)})})})},zo=Vo,Yo=i(23299),Zn={"xagi-nav-style2":"xagi-nav-style2___tgroD",text:"text___joiOD","page-container":"page-container___zCFm0",contextMenu:"contextMenu___T2I_x",contextMenuItem:"contextMenuItem___Y3s69",dangerMenuItem:"dangerMenuItem___Day4A",disabledMenuItem:"disabledMenuItem___v4HBW",contextMenuIcon:"contextMenuIcon___8sWtU",contextMenuDivider:"contextMenuDivider___pbZ5j"},Jo=function(e){var r=e.visible,s=e.position,a=e.targetNode,o=e.isChatLoading,l=o===void 0?!1:o,p=e.isComparing,d=p===void 0?!1:p,y=e.onClose,M=e.onDelete,C=e.onRename,R=e.onUploadSingleFile,P=e.onUploadProject,A=(0,n.useCallback)(function(g){g(),y()},[y]),k=(0,n.useCallback)(function(){a&&A(function(){var g={stopPropagation:function(){},preventDefault:function(){},currentTarget:null,target:null,bubbles:!1,cancelable:!1,defaultPrevented:!1,eventPhase:0,isTrusted:!1,nativeEvent:{},timeStamp:Date.now(),type:"click"};M(a,g)})},[a,M,A]),F=(0,n.useCallback)(function(){!a||!C||A(function(){C(a)})},[a,C,A]),j=(0,n.useCallback)(function(){R&&A(function(){R(a)})},[a,R,A]),Z=(0,n.useCallback)(function(){P&&A(function(){P()})},[P,A]);if((0,n.useEffect)(function(){var g=function(){y()};if(r)return document.addEventListener("click",g),function(){return document.removeEventListener("click",g)}},[r,y]),!r||l||d)return null;var b=a?[{key:"rename",label:"\u91CD\u547D\u540D",icon:(0,t.jsx)(Yo.Z,{}),onClick:F,disabled:!C},{key:"upload",label:"\u4E0A\u4F20\u6587\u4EF6",icon:(0,t.jsx)(tr.Z,{}),onClick:j,disabled:!R||a.name.startsWith(".")},{key:"divider",type:"divider"},{key:"delete",label:"\u5220\u9664",icon:(0,t.jsx)(Us.Z,{}),onClick:k,danger:!0}]:[{key:"uploadProject",label:"\u5BFC\u5165\u9879\u76EE",icon:(0,t.jsx)(Bs.Z,{}),onClick:Z,disabled:!P},{key:"upload",label:"\u4E0A\u4F20\u6587\u4EF6",icon:(0,t.jsx)(tr.Z,{}),onClick:j,disabled:!R}];return(0,t.jsx)("div",{className:Zn.contextMenu,style:{position:"fixed",left:s.x,top:s.y,zIndex:1e3},onClick:function(D){return D.stopPropagation()},children:b.map(function(g,D){return g.type==="divider"?(0,t.jsx)("div",{className:Zn.contextMenuDivider},D):(0,t.jsxs)("div",{className:"".concat(Zn.contextMenuItem," ").concat(g.danger?Zn.dangerMenuItem:""," ").concat(g.disabled?Zn.disabledMenuItem:""),onClick:g.disabled?void 0:g.onClick,children:[(0,t.jsx)("span",{className:Zn.contextMenuIcon,children:g.icon}),(0,t.jsx)("span",{children:g.label})]},g.key)})})},Qo=Jo,Lt={"xagi-nav-style2":"xagi-nav-style2___rOql5",text:"text___sNqeR","page-container":"page-container___nfjFZ",inlineRenameInput:"inlineRenameInput___tFB_g",renameMode:"renameMode___Uq651",fileTreeCol:"fileTreeCol___l14mk",collapsed:"collapsed___reu9n",fileTreeCard:"fileTreeCard___dYsNK",fileTreeHeader:"fileTreeHeader___kFfME",fileTreeContainer:"fileTreeContainer___lqCLV","fade-in":"fade-in___ofKGi",dataSourceTitle:"dataSourceTitle___uXHbS",addButton:"addButton___bpBim",fileTree:"fileTree___rMv9t",folderItem:"folderItem___lkHt4",folderHeader:"folderHeader___tZ2Mt",folderIcon:"folderIcon___SwIMC",expanded:"expanded___hXczc",folderName:"folderName___AinEV",fileList:"fileList___Ny_if","slide-down":"slide-down___TvIQV",fileItem:"fileItem___AU6FY",fileIcon:"fileIcon___rpcem",activeFile:"activeFile___xheni",fileName:"fileName___F5zfo",hiddenFile:"hiddenFile___hr7sj",fileStatus:"fileStatus___ZJn2j",deleteButton:"deleteButton___KGfms",collapseButton:"collapseButton___lPlSf",dataSourceContainer:"dataSourceContainer___U6TYO",dataSourceHeader:"dataSourceHeader___u_CvC",dataSourceContent:"dataSourceContent___gdQCB",dataResourceList:"dataResourceList___OBeZN",resourceItem:"resourceItem___xZp9E",resourceActionButton:"resourceActionButton___j12Kj",resourceTypeTag:"resourceTypeTag___GBEJN",workflow:"workflow___Z39nh",plugin:"plugin___BHYM0","reverse-proxy":"reverse-proxy___YW3Eu",api:"api___NkOma",database:"database___fRbJX","file-storage":"file-storage___rHZE7",resourceStatusTag:"resourceStatusTag___sZ7vj",active:"active___xDX7Z",inactive:"inactive___x0rng",error:"error___Us2__",configuring:"configuring____h2xM",dataResourceEmpty:"dataResourceEmpty___xhEyc",emptyIcon:"emptyIcon___i2qJE",emptyText:"emptyText___ibYqF",emptyDescription:"emptyDescription___P56rn"},Xo=function(e){var r=e.files,s=e.isComparing,a=e.selectedFileId,o=e.expandedFolders,l=e.dataResources,p=e.dataResourcesLoading,d=e.onFileSelect,y=e.onToggleFolder,M=e.onDeleteFile,C=e.onRenameFile,R=e.onUploadProject,P=e.onUploadSingleFile,A=e.onAddDataResource,k=e.onDeleteDataResource,F=e.workspace,j=e.fileManagement,Z=e.isChatLoading,b=Z===void 0?!1:Z,g=e.projectId,D=e.isFileTreeInitializing,x=D===void 0?!1:D,U=(0,n.useState)(!1),O=w()(U,2),N=O[0],J=O[1],E=(0,n.useRef)(null),de=(0,n.useState)(0),h=w()(de,2),T=h[0],he=h[1],Te=(0,n.useState)(!1),X=w()(Te,2),ke=X[0],xe=X[1],re=(0,n.useState)({x:0,y:0}),Ke=w()(re,2),ne=Ke[0],pe=Ke[1],G=(0,n.useState)(null),S=w()(G,2),B=S[0],K=S[1],ve=(0,n.useState)(null),L=w()(ve,2),H=L[0],Le=L[1],Se=(0,n.useState)(""),ge=w()(Se,2),m=ge[0],z=ge[1],ae=(0,n.useRef)(null),V=(0,n.useCallback)(function(){E.current&&he(E.current.scrollTop)},[]);(0,n.useEffect)(function(){E.current&&T>0&&(E.current.scrollTop=T)},[r,T]);var ie=(0,n.useCallback)(function(){J(function(Ve){return!Ve})},[]),we=(0,n.useCallback)(function(Ve,It){Ve.preventDefault(),Ve.stopPropagation(),!(b||s)&&(K(It),pe({x:Ve.clientX,y:Ve.clientY}),xe(!0))},[b,s]),te=(0,n.useCallback)(function(Ve){Ve.preventDefault(),Ve.stopPropagation(),!(b||s)&&(K(null),pe({x:Ve.clientX,y:Ve.clientY}),xe(!0))},[b,s]),fe=(0,n.useCallback)(function(){xe(!1),K(null)},[]),ft=(0,n.useCallback)(function(){Le(null),z("")},[]),We=(0,n.useCallback)(I()(u()().mark(function Ve(){var It,Dr;return u()().wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:if(!(!H||!C)){Ht.next=2;break}return Ht.abrupt("return");case 2:if(It=m.trim(),!(!It||It===H.name)){Ht.next=6;break}return ft(),Ht.abrupt("return");case 6:if(Dr=/[/\\:*?"<>|]/,!Dr.test(It)){Ht.next=9;break}return Ht.abrupt("return");case 9:return Le(null),z(""),Ht.prev=11,Ht.next=14,C(H,It);case 14:Ht.next=19;break;case 16:Ht.prev=16,Ht.t0=Ht.catch(11),console.error("\u91CD\u547D\u540D\u5931\u8D25:",Ht.t0);case 19:case"end":return Ht.stop()}},Ve,null,[[11,16]])})),[H,m,C,ft]),lt=(0,n.useCallback)(function(Ve){Ve.key==="Enter"?We():Ve.key==="Escape"&&ft()},[We,ft]),Nt=(0,n.useCallback)(function(){setTimeout(function(){H&&We()},100)},[H,We]);(0,n.useEffect)(function(){var Ve=function(){fe()};if(ke)return document.addEventListener("click",Ve),function(){return document.removeEventListener("click",Ve)}},[ke,fe]),(0,n.useEffect)(function(){H&&ae.current&&(ae.current.focus(),ae.current.select())},[H]);var Cr=(0,n.useCallback)(function(Ve){Le(Ve),z(Ve.name)},[]),gt=(0,n.useCallback)(function(Ve){P(Ve)},[P]),Ft=(0,n.useCallback)(function(Ve){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Dr=o.has(Ve.id),ur=s?F?.activeFile===Ve.id:a===Ve.id,Ht=H?.id===Ve.id,$n=s?"version-".concat(Ve.id):Ve.id;return Ve.type==="folder"?(0,t.jsxs)("div",{className:Lt.folderItem,style:{marginLeft:It*8},children:[(0,t.jsxs)("div",{className:"".concat(Lt.folderHeader," ").concat(Ht?Lt.renameMode:""),onClick:function(){return!Ht&&y(Ve.id)},onContextMenu:function(Vr){return we(Vr,Ve)},children:[(0,t.jsx)(ir.Z,{name:"icons-common-caret_right",style:{fontSize:"16px"},className:"".concat(Lt.folderIcon," ").concat(Dr?Lt.expanded:"")}),Ht?(0,t.jsx)(Bn.Z,{ref:ae,value:m,onChange:function(Vr){return z(Vr.target.value)},onKeyDown:lt,onBlur:Nt,className:Lt.inlineRenameInput,size:"small"}):(0,t.jsx)("span",{className:Lt.folderName,children:Ve.name})]}),Dr&&Ve.children&&(0,t.jsx)("div",{className:Lt.fileList,children:Ve.children.map(function(en){return Ft(en,It+1)})})]},$n):(0,t.jsxs)("div",{className:"".concat(Lt.fileItem," ").concat(ur?Lt.activeFile:""," ").concat(Ht?Lt.renameMode:""),onClick:function(){Ve.name.startsWith(".")||Ht||(s||j.switchToFile(Ve.id),d(Ve.id))},onContextMenu:function(Vr){return we(Vr,Ve)},style:{marginLeft:It*8},children:[Ve.name.startsWith(".")?(0,t.jsx)(Mo.Z,{className:Lt.fileIcon}):(0,t.jsx)(Qa.Z,{className:Lt.fileIcon}),Ht?(0,t.jsx)(Bn.Z,{ref:ae,value:m,onChange:function(Vr){return z(Vr.target.value)},onKeyDown:lt,onBlur:Nt,className:Lt.inlineRenameInput,size:"small"}):(0,t.jsx)("span",{className:"".concat(Lt.fileName," ").concat(Ve.name.startsWith(".")?Lt.hiddenFile:""),children:Ve.name}),!s&&!b&&!Ht&&(0,t.jsx)(t.Fragment,{children:Ve.status&&(0,t.jsx)("span",{className:Lt.fileStatus,children:Ve.status})})]},$n)},[o,s,F?.activeFile,a,H,m,y,d,j,M,b,we,lt,Nt]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Qo,{visible:ke,position:ne,targetNode:B,isChatLoading:b,isComparing:s,onClose:fe,onDelete:M,onRename:C?Cr:void 0,onUploadSingleFile:gt,onUploadProject:R,onAddDataResource:A}),(0,t.jsx)(Wt.Z,{title:N?"\u5C55\u5F00\u6587\u4EF6\u6811":"\u6536\u8D77\u6587\u4EF6\u6811",children:(0,t.jsx)(Be.ZP,{shape:"circle",size:"small",icon:N?(0,t.jsx)(No.Z,{}):(0,t.jsx)(Bo.Z,{}),onClick:ie,className:"".concat(Lt.collapseButton," ").concat(N?Lt.collapsed:Lt.expanded)})}),(0,t.jsx)("div",{className:"".concat(Lt.fileTreeCol," ").concat(N?Lt.collapsed:""),style:{transition:"all 0.3s ease"},children:(0,t.jsx)(ys.Z,{className:Lt.fileTreeCard,bordered:!1,children:!N&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:Lt.fileTreeContainer,ref:E,onScroll:V,onContextMenu:te,children:x?(0,t.jsx)(cn,{type:"loading",title:"\u6B63\u5728\u52A0\u8F7D...",description:"\u8BF7\u7A0D\u5019"}):r.length===0?(0,t.jsx)(cn,{type:"empty",icon:(0,t.jsx)(vs.Z,{}),title:"\u6682\u65E0\u6587\u4EF6",description:"\u8BF7\u5BFC\u5165\u9879\u76EE\u6216\u521B\u5EFA\u65B0\u6587\u4EF6\u5F00\u59CB\u5F00\u53D1",buttons:s?void 0:[{text:"\u5BFC\u5165\u9879\u76EE",icon:(0,t.jsx)(Bs.Z,{}),onClick:R,disabled:b}]}):(0,t.jsx)("div",{className:Lt.fileTree,children:r.map(function(Ve){return Ft(Ve)})})}),!s&&(0,t.jsxs)("div",{className:Lt.dataSourceContainer,children:[(0,t.jsxs)("div",{className:Lt.dataSourceHeader,children:[(0,t.jsx)("span",{className:Lt.dataSourceTitle,children:"\u6570\u636E\u8D44\u6E90"}),(0,t.jsx)(Wt.Z,{title:"\u6DFB\u52A0\u6570\u636E\u8D44\u6E90",children:(0,t.jsx)(Be.ZP,{type:"text",className:Lt.addButton,icon:(0,t.jsx)(ir.Z,{name:"icons-common-plus",style:{fontSize:16}}),onClick:A,disabled:b||s})})]}),(0,t.jsx)("div",{className:Lt.dataSourceContent,children:(0,t.jsx)(zo,{resources:l,loading:p,onDelete:k,projectId:g})})]})]})})})]})},qo=Xo,$o=i(48279),el=i(10560),tl=i(52909),rl=i(26324),qn=i(28190),nl=function(e){var r=e.open,s=e.projectInfo,a=e.onCancel,o=e.onConfirm,l=qn.Z.useForm(),p=w()(l,1),d=p[0],y=(0,n.useState)(""),M=w()(y,2),C=M[0],R=M[1],P=(0,n.useState)(!1),A=w()(P,2),k=A[0],F=A[1],j=(0,yt.useRequest)(tl.M6,{manual:!0,onSuccess:function(){De.ZP.success("\u7F16\u8F91\u6210\u529F"),o(),F(!1)},onError:function(){F(!1)}}),Z=j.run;(0,n.useEffect)(function(){if(r&&s){var U=s.name,O=s.description,N=s.icon;d.setFieldsValue({projectName:U,projectDesc:O,icon:N||""}),R(N)}},[r,s]);var b=function(){var U=I()(u()().mark(function O(N){var J;return u()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:F(!0),J=f()(f()({},N),{},{projectId:s?.projectId}),Z(J);case 3:case"end":return de.stop()}},O)}));return function(N){return U.apply(this,arguments)}}(),g=function(){d.submit()},D=function(){a(),R("")},x=function(O){R(O),d.setFieldValue("icon",O)};return(0,t.jsx)($o.Z,{form:d,open:r,title:"\u7F16\u8F91\u9875\u9762",loading:k,onCancel:D,onConfirm:g,children:(0,t.jsxs)(qn.Z,{form:d,preserve:!1,layout:"vertical",requiredMark:rl.N,onFinish:b,autoComplete:"off",children:[(0,t.jsx)(qn.Z.Item,{name:"projectName",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],children:(0,t.jsx)(Bn.Z,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",showCount:!0,maxLength:50})}),(0,t.jsx)(qn.Z.Item,{name:"projectDesc",label:"\u63CF\u8FF0",children:(0,t.jsx)(Bn.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",autoSize:{minRows:4,maxRows:6}})}),(0,t.jsx)(qn.Z.Item,{name:"icon",label:"\u56FE\u6807",children:(0,t.jsx)(el.Z,{onUploadSuccess:x,imageUrl:C,defaultImage:is})})]})})},al=nl,$a=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.pollInterval,a=s===void 0?5e3:s,o=r.maxLogLines,l=o===void 0?1e3:o,p=r.enabled,d=p===void 0?!0:p,y=(0,n.useState)([]),M=w()(y,2),C=M[0],R=M[1],P=(0,n.useState)(!1),A=w()(P,2),k=A[0],F=A[1],j=(0,n.useState)(!1),Z=w()(j,2),b=Z[0],g=Z[1],D=(0,n.useState)(!1),x=w()(D,2),U=x[0],O=x[1],N=(0,n.useState)(0),J=w()(N,2),E=J[0],de=J[1],h=(0,n.useRef)(new Set),T=(0,n.useRef)([]),he=(0,n.useRef)(null),Te=(0,n.useRef)(!0),X=(0,n.useRef)(0),ke=3,xe=(0,n.useRef)(5e3),re=(0,n.useCallback)(function(H){if(!(!H||!Te.current||H.length===0)){R(function(Se){var ge,m,z;if(((ge=Se[0])===null||ge===void 0?void 0:ge.timestamp)!==((m=H[0])===null||m===void 0?void 0:m.timestamp))return H;if(Se.length===H.length)return Se;var ae=[].concat(v()(Se),v()(H.slice(Se.length,H.length))),V=ae,ie=yr(V),we=ce(((z=ie.at(-1))===null||z===void 0?void 0:z.logs)||[]);return F(we.length>0),V});var Le=Math.max.apply(Math,v()(H.map(function(Se){return Se.line})));de(Le)}},[l]),Ke=(0,n.useCallback)(function(){he.current&&(clearInterval(he.current),he.current=null),O(!1)},[]),ne=(0,n.useCallback)(I()(u()().mark(function H(){var Le;return u()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(!(!Te.current||!e)){ge.next=2;break}return ge.abrupt("return");case 2:return ge.prev=2,g(!0),ge.next=6,Rn(e,1);case 6:Le=ge.sent,Le.success&&Le.data.logs.length>0?(re(Le.data.logs),X.current=0,xe.current=5e3):X.current=0,ge.next=15;break;case 10:ge.prev=10,ge.t0=ge.catch(2),X.current+=1,console.error("\u83B7\u53D6\u65E5\u5FD7\u5931\u8D25:",ge.t0),X.current>=ke&&(Ke(),setTimeout(function(){Te.current&&e&&(he.current=setInterval(ne,a),O(!0))},xe.current),xe.current=Math.min(xe.current*1.5,3e4));case 15:return ge.prev=15,g(!1),ge.finish(15);case 18:case"end":return ge.stop()}},H,null,[[2,10,15,18]])})),[e,E,re,Ke,a]),pe=(0,n.useCallback)(function(){he.current&&clearInterval(he.current),O(!0),he.current=setInterval(ne,a),ne()},[ne,a]),G=(0,n.useCallback)(function(){var H=C.length>0?Math.max.apply(Math,v()(C.map(function(Le){return Le.line}))):E;R([]),F(!1),de(H),h.current.clear(),T.current=[]},[C,E]),S=(0,n.useCallback)(I()(u()().mark(function H(){return u()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return G(),de(0),Se.next=4,ne();case 4:case"end":return Se.stop()}},H)})),[G,ne]),B=(0,n.useCallback)(function(){G(),de(0),pe()},[G,pe]),K=(0,n.useCallback)(function(){var H=cr(C,T.current);return console.log("[error] getNewErrorLogs",H),T.current=v()(C),H},[C]),ve=(0,n.useCallback)(function(H){h.current.add(H)},[]),L=(0,n.useCallback)(function(){var H=cr(C,T.current);return H.some(function(Le){var Se=Le.errorFingerprint||pt(Le);return!h.current.has(Se)})},[C]);return(0,n.useEffect)(function(){return d&&e?pe():Ke(),function(){Ke()}},[d,e,pe,Ke]),(0,n.useEffect)(function(){return function(){Te.current=!1,Ke()}},[Ke]),(0,n.useEffect)(function(){T.current=v()(C)},[C]),{logs:C,hasErrorInLatestBlock:k,isLoading:b,isPolling:U,lastLine:E,sentErrors:h.current,clearLogs:G,refreshLogs:S,stopPolling:Ke,startPolling:pe,resetStartLine:B,getNewErrorLogs:K,markErrorAsSent:ve,hasNewErrors:L}},cu=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return $a(e,{enabled:r,pollInterval:5e3,maxLogLines:500})},du=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=$a(e,{enabled:r,pollInterval:5e3,maxLogLines:1e3}),a=s.logs,o=s.hasErrorInLatestBlock,l=s.sentErrors,p=s.markErrorAsSent,d=s.hasNewErrors,y=useCallback(function(){var C=filterErrorLogs(a);return C.filter(function(R){var P=R.errorFingerprint||generateErrorFingerprint(R);return!l.has(P)})},[a,l]),M=useCallback(function(){var C=y();return C.length===0?null:C[C.length-1]},[y]);return{logs:a,hasErrorInLatestBlock:o,hasNewErrors:d,getUnsentErrors:y,getLatestErrorForAgent:M,markErrorAsSent:p}},gr={"xagi-nav-style2":"xagi-nav-style2___qLkf_",text:"text___CdA36","page-container":"page-container___gFKMp",appDev:"appDev___lpWxR",container:"container___RWH07","title-style":"title-style___wS_Kj","edit-content":"edit-content___Szfwe",section:"section___xdDqg",mainRow:"mainRow___XOum0",leftPanel:"leftPanel___o1DeK",rightPanel:"rightPanel___SG1n9",toolbar:"toolbar___FiCDg",versionControl:"versionControl___oWv5a",versionButton:"versionButton___TEWrR",toolbarLeft:"toolbarLeft___o7SaZ",toolbarRight:"toolbarRight___wvmJ_",toolbarButton:"toolbarButton___Loe7L",contentArea:"contentArea___FYWso",contentRow:"contentRow___KAqSG",editorCol:"editorCol___KuTUr",editorContainer:"editorContainer___lHZ0V",editorHeader:"editorHeader___lz9qv",editorHeaderLeft:"editorHeaderLeft___TKeeE",editorHeaderRight:"editorHeaderRight___Ctw7U",previewStatusInfo:"previewStatusInfo___YOLUc",previewTitle:"previewTitle___JiI59",statusBadge:"statusBadge___dSM_x",loadingBadge:"loadingBadge___X6YKT",versionDropdownButton:"versionDropdownButton___BFV1p",segmentedTabs:"segmentedTabs___Jaubz",editorContent:"editorContent___VGMmp",deployOverlay:"deployOverlay___p6Iph","fade-in":"fade-in___hhowO",deployOverlayContent:"deployOverlayContent___bwbpv",deploySpinner:"deploySpinner___JQ7Fr",spin:"spin___XRGqm",deployText:"deployText___ed7Qh",deployTitle:"deployTitle___j_fIN",deploySubtitle:"deploySubtitle___fO6GI",sider:"sider___IWUpX",siderHeader:"siderHeader___VqR0U",content:"content____o6iQ","slide-down":"slide-down___ghRNN"},Gn=kt.Z.Text,Gs=On().bind(gr),sl=function(){var e,r,s,a,o,l,p,d,y=(0,yt.useParams)(),M=Number(y.spaceId),C=(0,n.useState)([]),R=w()(C,2),P=R[0],A=R[1],k=(0,n.useRef)([]),F=(0,n.useRef)(!1),j=(0,n.useRef)(null),Z=(0,n.useRef)(null),b=(0,n.useState)(!1),g=w()(b,2),D=g[0],x=g[1],U=(0,n.useState)([]),O=w()(U,2),N=O[0],J=O[1],E=(0,yt.useModel)("appDev"),de=(0,Ze.K)(),h=de.navigationStyle,T=E.workspace,he=E.isServiceRunning,Te=E.setIsServiceRunning,X=E.setActiveFile,ke=E.updateFileContent,xe=E.updateDevServerUrl,re=E.updateWorkspace,Ke=Oa(),ne=Ke.projectId,pe=Ke.hasValidProjectId,G=$t.Z.useModal(),S=w()(G,2),B=S[1],K=(0,n.useState)(!1),ve=w()(K,2),L=ve[0],H=ve[1],Le=(0,n.useState)("preview"),Se=w()(Le,2),ge=Se[0],m=Se[1],z=(0,n.useState)(!1),ae=w()(z,2),V=ae[0],ie=ae[1],we=(0,n.useState)(null),te=w()(we,2),fe=te[0],ft=te[1],We=(0,n.useState)(!1),lt=w()(We,2),Nt=lt[0],Cr=lt[1],gt=(0,n.useState)(!1),Ft=w()(gt,2),Ve=Ft[0],It=Ft[1],Dr=(0,n.useState)(!1),ur=w()(Dr,2),Ht=ur[0],$n=ur[1],en=(0,n.useState)(!1),Vr=w()(en,2),Ks=Vr[0],ba=Vr[1],ol=(0,n.useState)(""),Hs=w()(ol,2),Fn=Hs[0],wa=Hs[1],ll=(0,n.useState)(null),Ws=w()(ll,2),Kn=Ws[0],ja=Ws[1],ul=(0,n.useState)(!1),Vs=w()(ul,2),zs=Vs[0],Ia=Vs[1],cl=(0,n.useState)(!1),Ys=w()(cl,2),dl=Ys[0],Js=Ys[1],pl=(0,n.useState)(!1),Qs=w()(pl,2),fl=Qs[0],Da=Qs[1],vl=(0,n.useState)(null),Xs=w()(vl,2),wr=Xs[0],es=Xs[1],ml=(0,n.useState)(!1),qs=w()(ml,2),Kt=qs[0],Tr=qs[1],hl=(0,n.useState)(!1),$s=w()(hl,2),gl=$s[0],ei=$s[1],Ta=(0,n.useRef)(null),zr=(0,n.useRef)(null),Cl=(0,n.useState)(!1),ti=w()(Cl,2),ri=ti[0],ni=ti[1],Sl=(0,n.useState)(!1),ai=w()(Sl,2),yl=ai[0],ts=ai[1];(0,Ga.Z)(ri),(0,n.useEffect)(function(){if(Kt)Ta.current=Date.now(),zr.current=setTimeout(function(){ei(!0)},500);else{if(zr.current&&(clearTimeout(zr.current),zr.current=null),Ta.current){var W=Date.now()-Ta.current;W<500&&ei(!1)}Ta.current=null}return function(){zr.current&&(clearTimeout(zr.current),zr.current=null)}},[Kt]);var tt=va(ne),Et=Ba({projectId:ne||"",onFileSelect:X,onFileContentChange:ke,isChatLoading:!1,hasPermission:tt.hasPermission}),tn=fa(M,ne,tt?.hasPermission),Ur=$a(ne||"",{enabled:pe&&he&&tt.hasPermission,pollInterval:5e3,maxLogLines:1e3}),Zr=Ua({projectId:ne||"",devLogsRefresh:function(){return Ur.resetStartLine()},onServerStart:xe,onServerStatusChange:Te}),pn=(0,n.useRef)(null),El=(0,n.useState)(!1),si=w()(El,2),Al=si[0],_l=si[1],bl=(0,n.useState)(null),ii=w()(bl,2),wl=ii[0],jl=ii[1],Il=(0,n.useState)(null),oi=w()(Il,2),Hn=oi[0],Dl=oi[1],Tl=(0,yt.useRequest)(ye.T_,{manual:!0,debounceWait:300,onSuccess:function(Y){Dl(Y)}}),Pl=Tl.run;(0,n.useEffect)(function(){var W;if((W=tt.projectInfoState.projectInfo)!==null&&W!==void 0&&W.devAgentId&&tt.hasPermission){var Y,Q=(Y=tt.projectInfoState.projectInfo)===null||Y===void 0?void 0:Y.devAgentId;Pl(Q)}},[(e=tt.projectInfoState.projectInfo)===null||e===void 0?void 0:e.devAgentId,tt.hasPermission]),(0,n.useEffect)(function(){var W=function(){pn.current&&(_l(pn.current.getIsLoading()),jl(pn.current.getLastRefreshed()))};W();var Y=setInterval(W,500);return function(){return clearInterval(Y)}},[]),(0,n.useEffect)(function(){if(tt.hasPermission){var W=tt.projectInfoState.projectInfo||{},Y=W.lastChatModelId,Q=W.lastMultiModelId;if(Q&&tn.selectMultiModel(Q),Y){tn.selectModel(Y);return}var Ee=tn.models||{},me=Ee.chatModelList,At=me?.find(function(rt){return rt.apiProtocol==="Anthropic"});At?tn.selectModel(At.id):me&&me.length>0&&tn.selectModel(me[0].id)}},[tn.models,tt.projectInfoState.projectInfo,tt.hasPermission]);var Fl=Ka({projectId:ne||"",server:Zr,setActiveTab:m,previewRef:pn}),ea=Fl.restartDevServer,vr=pa({projectId:ne||"",selectedModelId:tn.selectedModelId,multiModelId:tn.selectedMultiModelId,onRefreshFileTree:Et.loadFileTree,selectedDataResources:P,onClearDataSourceSelections:function(){return A([])},onRefreshVersionList:tt.refreshProjectInfo,onRestartDevServer:function(){var W=I()(u()().mark(function Q(){return u()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,ea({shouldSwitchTab:!1,delayBeforeRefresh:500,showMessage:!1});case 2:case"end":return me.stop()}},Q)}));function Y(){return W.apply(this,arguments)}return Y}()}),rs=(0,yt.useModel)("autoErrorHandling"),ns=(0,n.useRef)("log"),fn=(0,n.useRef)(""),Rl=(0,n.useCallback)(function(W,Y,Q){if(!W.trim()){De.ZP.warning("\u8F93\u5165\u5185\u5BB9\u4E3A\u7A7A");return}if(vr.setChatInput(W),Y&&!vr.isChatLoading){if(F.current){console.warn("[AppDev] \u26A0\uFE0F \u81EA\u52A8\u53D1\u9001\u5DF2\u5728\u5904\u7406\u4E2D\uFF0C\u5FFD\u7565\u91CD\u590D\u8C03\u7528");return}F.current=!0,j.current&&clearTimeout(j.current),j.current=setTimeout(function(){try{vr.isChatLoading?(console.warn("[AppDev] \u26A0\uFE0F \u804A\u5929\u6B63\u5728\u52A0\u8F7D\u4E2D\uFF0C\u53D6\u6D88\u81EA\u52A8\u53D1\u9001"),fn.current=""):(Q?.(),ht.Z.emit(ht.K.SEND_CHAT_MESSAGE,fn.current),console.log("[AppDev] \u2705 \u81EA\u52A8\u53D1\u9001\u6D88\u606F\u4E8B\u4EF6\u5DF2\u89E6\u53D1\uFF0CrequestId: ".concat(fn.current)),fn.current=Vn())}finally{setTimeout(function(){F.current=!1,j.current=null},500)}},300);return}De.ZP.success("\u65E5\u5FD7\u5DF2\u6DFB\u52A0,\u7B49\u5F85\u53D1\u9001")},[vr]),vn=ha({onAddToChat:function(Y,Q,Ee){Rl(Y,Q,function(){Q&&Y&&(fn.current||(fn.current=Vn()),rs.recordAutoHandle(ns.current,Y,fn.current)),Ee?.()})},isChatLoading:vr.isChatLoading,enabled:pe&&tt.hasPermission});(0,n.useEffect)(function(){Z.current=vn},[vn]);var mn=Za();(0,n.useEffect)(function(){if(tt.projectInfoState.projectInfo&&tt.hasPermission){var W,Y=((W=tt.projectInfoState.projectInfo)===null||W===void 0?void 0:W.dataSources)||[];mn.fetchResources(Y);var Q=Y.map(function(Ee){var me=Ee.type==="plugin"?er.qR.Plugin:er.qR.Workflow;return{type:me,targetId:Ee.id,status:er.BQ.Added}});J(Q)}},[(r=tt.projectInfoState)===null||r===void 0?void 0:r.projectInfo,tt.hasPermission]),(0,n.useEffect)(function(){var W;if(((W=mn.resources)===null||W===void 0?void 0:W.length)>0){var Y=mn.resources.map(function(Q){var Ee,me=(Ee=k.current)===null||Ee===void 0?void 0:Ee.find(function(At){return At.id===Q.id});return me||f()(f()({},Q),{},{isSelected:!1})});A(Y),k.current=Y}},[mn.resources]);var li=(0,n.useMemo)(function(){return Et.fileTreeState.data},[Et.fileTreeState.data]),Xt=un({projectId:ne||"",onVersionSwitchSuccess:function(){Et.loadFileTree(!1),tt.refreshProjectInfo()}}),kl=(0,n.useMemo)(function(){return Xt.isComparing?Xt.versionFiles:li},[Xt.isComparing,Xt.versionFiles,li]),xl=(0,n.useCallback)(function(W){var Y=function Q(Ee){var me=q()(Ee),At;try{for(me.s();!(At=me.n()).done;){var rt=At.value;if(rt.id===W)return rt;if(rt.children){var xr=Q(rt.children);if(xr)return xr}}}catch(Je){me.e(Je)}finally{me.f()}return null};return Y(Xt.versionFiles)},[Xt.versionFiles]),Ll=(0,n.useCallback)(function(){var W=I()(u()().mark(function Y(Q){return u()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.prev=0,m("code"),me.next=4,Xt.startVersionCompare(Q);case 4:me.next=8;break;case 6:me.prev=6,me.t0=me.catch(0);case 8:case"end":return me.stop()}},Y,null,[[0,6]])}));return function(Y){return W.apply(this,arguments)}}(),[Xt]);(0,n.useEffect)(function(){H(!pe)},[ne,pe]);var Ml=(0,n.useCallback)(I()(u()().mark(function W(){var Y,Q;return u()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(!(!pe||!ne)){me.next=3;break}return De.ZP.error("\u9879\u76EEID\u4E0D\u5B58\u5728\u6216\u65E0\u6548\uFF0C\u65E0\u6CD5\u90E8\u7F72"),me.abrupt("return");case 3:return me.prev=3,It(!0),me.next=7,Bt(ne,Ge.sO.PAGE);case 7:Y=me.sent,Y?.code===qe.Gh&&Y!==null&&Y!==void 0&&Y.data?(Q=Y.data.prodServerUrl,$t.Z.success({title:"\u6210\u529F\u53D1\u5E03\u6210\u7EC4\u4EF6",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"\u9879\u76EE\u5DF2\u6210\u529F\u6784\u5EFA\u5E76\u53D1\u5E03\uFF01"}),Q&&(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:"".concat("").concat(Q),target:"_blank",rel:"noopener noreferrer",children:"\u70B9\u51FB\u9884\u89C8"})})]}),width:500}),tt.refreshProjectInfo()):De.ZP.error("\u53D1\u5E03\u5931\u8D25,\u8BF7\u5148\u5C1D\u8BD5\u89E3\u51B3\u9519\u8BEF\u540E\u91CD\u8BD5"),me.next=14;break;case 11:me.prev=11,me.t0=me.catch(3),De.ZP.error("\u53D1\u5E03\u5931\u8D25,\u5148\u5C1D\u8BD5\u89E3\u51B3\u9519\u8BEF\u540E\u91CD\u8BD5");case 14:return me.prev=14,It(!1),me.finish(14);case 17:case"end":return me.stop()}},W,null,[[3,11,14,17]])})),[pe,ne,tt]),Nl=function(){var W=I()(u()().mark(function Y(){var Q,Ee;return u()().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(!(!pe||!ne)){At.next=3;break}return De.ZP.error("\u9879\u76EEID\u4E0D\u5B58\u5728\u6216\u65E0\u6548\uFF0C\u65E0\u6CD5\u90E8\u7F72"),At.abrupt("return");case 3:return It(!0),At.next=6,Bt(ne,Ge.sO.AGENT);case 6:Q=At.sent,Ee=Q.code,Ee!==qe.Gh&&It(!1);case 9:case"end":return At.stop()}},Y)}));return function(){return W.apply(this,arguments)}}(),Bl=function(){tt.refreshProjectInfo(),It(!1),ts(!1)},Ol=(0,n.useCallback)(I()(u()().mark(function W(){var Y,Q,Ee,me,At,rt,xr,Je,Yr;return u()().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:if(!(!pe||!ne)){Vt.next=3;break}return De.ZP.error("\u9879\u76EEID\u4E0D\u5B58\u5728\u6216\u65E0\u6548\uFF0C\u65E0\u6CD5\u5BFC\u51FA"),Vt.abrupt("return");case 3:return Vt.prev=3,Vt.next=6,_(ne);case 6:Q=Vt.sent,Ee=(Y=Q.headers)===null||Y===void 0?void 0:Y["content-disposition"],me="project-".concat(ne,".zip"),Ee&&(At=Ee.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/),At&&At[1]&&(me=At[1].replace(/['"]/g,""))),rt=new Blob([Q.data],{type:"application/zip"}),xr=window.URL.createObjectURL(rt),Je=document.createElement("a"),Je.href=xr,Je.download=me,document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),window.URL.revokeObjectURL(xr),De.ZP.success("\u9879\u76EE\u5BFC\u51FA\u6210\u529F\uFF01"),Vt.next=26;break;case 22:Vt.prev=22,Vt.t0=Vt.catch(3),Yr=(Vt.t0===null||Vt.t0===void 0?void 0:Vt.t0.message)||(Vt.t0===null||Vt.t0===void 0?void 0:Vt.t0.toString())||"\u5BFC\u51FA\u8FC7\u7A0B\u4E2D\u53D1\u751F\u672A\u77E5\u9519\u8BEF",De.ZP.error("\u5BFC\u51FA\u5931\u8D25: ".concat(Yr));case 26:return Vt.prev=26,Vt.finish(26);case 28:case"end":return Vt.stop()}},W,null,[[3,22,26,28]])})),[pe,ne]),ta=(0,n.useCallback)(I()(u()().mark(function W(){return u()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Ur.resetStartLine(),Q.next=3,ea({shouldSwitchTab:!0,delayBeforeRefresh:500,showMessage:!1});case 3:case"end":return Q.stop()}},W)})),[ea,Ur.resetStartLine,ne]),Ul=(0,n.useCallback)(function(){var W=I()(u()().mark(function Y(Q){var Ee,me,At,rt;return u()().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(!(!pe||!ne)){Je.next=3;break}return De.ZP.error("\u9879\u76EEID\u4E0D\u5B58\u5728\u6216\u65E0\u6548\uFF0C\u65E0\u6CD5\u7ED1\u5B9A\u6570\u636E\u6E90"),Je.abrupt("return");case 3:if(!(Q.targetType!==er.qR.Plugin&&Q.targetType!==er.qR.Workflow)){Je.next=6;break}return De.ZP.warning("\u4EC5\u652F\u6301\u7ED1\u5B9A\u63D2\u4EF6\u548C\u5DE5\u4F5C\u6D41\u7C7B\u578B\u7684\u6570\u636E\u6E90"),Je.abrupt("return");case 6:return J(function(Yr){return[].concat(v()(Yr),[{type:Q.targetType,targetId:Q.targetId,status:er.BQ.Loading}])}),Je.prev=7,Ee=Q.targetType===er.qR.Plugin?"plugin":"workflow",Je.next=11,Xr({projectId:Number(ne),type:Ee,dataSourceId:Q.targetId});case 11:if(me=Je.sent,me?.code!==qe.Gh){Je.next=17;break}De.ZP.success("\u6570\u636E\u6E90\u7ED1\u5B9A\u6210\u529F"),J(function(Yr){return Yr.map(function(Gr){return Gr.targetId===Q.targetId&&Gr.status===er.BQ.Loading?f()(f()({},Gr),{},{status:er.BQ.Added}):Gr})}),Je.next=20;break;case 17:throw J(function(Yr){return Yr.filter(function(Gr){return Gr.targetId!==Q.targetId})}),At=me?.message||"\u7ED1\u5B9A\u6570\u636E\u6E90\u5931\u8D25",new Error(At);case 20:Je.next=26;break;case 22:Je.prev=22,Je.t0=Je.catch(7),rt=(Je.t0===null||Je.t0===void 0?void 0:Je.t0.message)||(Je.t0===null||Je.t0===void 0?void 0:Je.t0.toString())||"\u7ED1\u5B9A\u6570\u636E\u6E90\u65F6\u53D1\u751F\u672A\u77E5\u9519\u8BEF",De.ZP.error(rt);case 26:case"end":return Je.stop()}},Y,null,[[7,22]])}));return function(Y){return W.apply(this,arguments)}}(),[pe,ne,tt]),Zl=function(){tt.refreshProjectInfo(),Js(!1)},Gl=(0,n.useCallback)(function(){var W=I()(u()().mark(function Y(Q){var Ee;return u()().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.prev=0,At.next=3,mn.deleteResource(Q);case 3:J(function(rt){return rt.filter(function(xr){return xr.targetId!==Number(Q)})}),Ee=P?.filter(function(rt){return rt.id!==Q})||[],A(Ee),k.current=Ee,At.next=11;break;case 9:At.prev=9,At.t0=At.catch(0);case 11:case"end":return At.stop()}},Y,null,[[0,9]])}));return function(Y){return W.apply(this,arguments)}}(),[mn,P]),Kl=(0,n.useCallback)(I()(u()().mark(function W(){var Y;return u()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(fe){Ee.next=3;break}return De.ZP.error("\u8BF7\u5148\u9009\u62E9\u6587\u4EF6"),Ee.abrupt("return");case 3:return Ee.prev=3,Ia(!0),Ee.next=7,Hr({file:fe,projectId:ne||void 0,projectName:T.projectName||"\u672A\u547D\u540D\u9879\u76EE",spaceId:M?Number(M):void 0});case 7:Y=Ee.sent,Y!=null&&Y.success&&Y!==null&&Y!==void 0&&Y.data?(De.ZP.success("\u9879\u76EE\u5BFC\u5165\u6210\u529F"),ie(!1),ft(null),Et.loadFileTree(!1,!0),tt.refreshProjectInfo(),setTimeout(I()(u()().mark(function me(){return u()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.prev=0,rt.next=3,ea({shouldSwitchTab:!0,delayBeforeRefresh:500,showMessage:!1});case 3:return rt.prev=3,Ia(!1),rt.finish(3);case 6:case"end":return rt.stop()}},me,null,[[0,,3,6]])})),500)):Ia(!1),Ee.next=14;break;case 11:Ee.prev=11,Ee.t0=Ee.catch(3),Ia(!1);case 14:return Ee.prev=14,Ee.finish(14);case 16:case"end":return Ee.stop()}},W,null,[[3,11,14,16]])})),[fe,ne,T.projectName,Zr,tt]),Hl=(0,n.useCallback)(function(W){var Y,Q=(Y=W.name)===null||Y===void 0?void 0:Y.toLowerCase().endsWith(".zip");return Q?(ft(W),!1):(De.ZP.error("\u4EC5\u652F\u6301 .zip \u538B\u7F29\u6587\u4EF6\u683C\u5F0F"),!1)},[]),Wl=(0,n.useCallback)(function(W){ja(W),Fn.trim()||wa(W.name)},[Fn]),Vl=(0,n.useCallback)(I()(u()().mark(function W(){var Y;return u()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!(!pe||!Fn.trim()||!Kn)){Ee.next=2;break}return Ee.abrupt("return");case 2:return ba(!0),Tr(!0),$n(!1),Ee.prev=5,Ee.next=8,Et.uploadSingleFileToServer(Kn,Fn.trim());case 8:Y=Ee.sent,Y&&(wa(""),ja(null),tt.refreshProjectInfo());case 10:return Ee.prev=10,ba(!1),Tr(!1),Ee.finish(10);case 14:case"end":return Ee.stop()}},W,null,[[5,,10,14]])})),[pe,Et,tt,Fn,Kn]),ui=(0,n.useCallback)(function(){var W=I()(u()().mark(function Y(Q){var Ee,me;return u()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(pe){rt.next=3;break}return De.ZP.error(ze.NO_PROJECT_ID),rt.abrupt("return");case 3:Ee="",Q?Q.type==="file"?Ee=Q.path.replace(new RegExp(Q.name+"$"),""):Q.type==="folder"&&(Ee=Q.path+"/"):Ee="",me=document.createElement("input"),me.type="file",me.style.display="none",document.body.appendChild(me),me.click(),me.onchange=function(){var xr=I()(u()().mark(function Je(Yr){var Gr,Vt,fi;return u()().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(Vt=(Gr=Yr.target.files)===null||Gr===void 0?void 0:Gr[0],Vt){Er.next=4;break}return document.body.removeChild(me),Er.abrupt("return");case 4:return Er.prev=4,ba(!0),Tr(!0),Er.next=9,Et.uploadSingleFileToServer(Vt,Ee+Vt.name);case 9:fi=Er.sent,fi&&tt.refreshProjectInfo(),Er.next=16;break;case 13:Er.prev=13,Er.t0=Er.catch(4),console.error("\u4E0A\u4F20\u5931\u8D25",Er.t0);case 16:return Er.prev=16,ba(!1),document.body.removeChild(me),Tr(!1),Er.finish(16);case 21:case"end":return Er.stop()}},Je,null,[[4,13,16,21]])}));return function(Je){return xr.apply(this,arguments)}}(),me.oncancel=function(){document.body.removeChild(me),Tr(!1)};case 12:case"end":return rt.stop()}},Y)}));return function(Y){return W.apply(this,arguments)}}(),[pe,Et,tt]),ci=(0,n.useCallback)(function(){$n(!1),wa(""),ja(null)},[]),zl=(0,n.useCallback)(function(W,Y){Kt||(Y.stopPropagation(),es(W),Da(!0))},[]),Yl=(0,n.useCallback)(function(){var W=I()(u()().mark(function Y(Q,Ee){var me;return u()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(!(!Q||!Ee.trim()||Kt)){rt.next=2;break}return rt.abrupt("return",!1);case 2:return Tr(!0),rt.prev=3,rt.next=6,Et.renameFileItem(Q.id,Ee.trim());case 6:if(me=rt.sent,!me){rt.next=12;break}return tt.refreshProjectInfo(),rt.abrupt("return",!0);case 12:return rt.abrupt("return",!1);case 13:rt.next=18;break;case 15:return rt.prev=15,rt.t0=rt.catch(3),rt.abrupt("return",!1);case 18:return rt.prev=18,Tr(!1),rt.finish(18);case 21:case"end":return rt.stop()}},Y,null,[[3,15,18,21]])}));return function(Y,Q){return W.apply(this,arguments)}}(),[Et,tt]),Jl=(0,n.useCallback)(function(W,Y){W.trim()?(ns.current=Y||"whiteScreen",vn.handleCustomError(W,Y||"whiteScreen",!0)):console.warn("[AppDev] \u68C0\u6D4B\u5230\u767D\u5C4F\uFF0C\u4F46\u672A\u6355\u83B7\u5230\u9519\u8BEF\u4FE1\u606F")},[vn]),Ql=(0,n.useCallback)(function(){var W=I()(u()().mark(function Y(Q,Ee){var me,At,rt;return u()().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(pe){Je.next=3;break}return De.ZP.error(ze.NO_PROJECT_ID),Je.abrupt("return",!1);case 3:if(Q.trim()){Je.next=6;break}return De.ZP.error("\u76EE\u6807\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A"),Je.abrupt("return",!1);case 6:return Je.prev=6,me=Ee.name,At=Q.endsWith("/")?"".concat(Q).concat(me):"".concat(Q,"/").concat(me),Je.next=11,Et.uploadSingleFileToServer(Ee,At);case 11:if(rt=Je.sent,!rt){Je.next=19;break}return De.ZP.success("\u6587\u4EF6\u4E0A\u4F20\u6210\u529F: ".concat(me)),ta(),tt.refreshProjectInfo(),Je.abrupt("return",!0);case 19:return De.ZP.error("\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"),Je.abrupt("return",!1);case 21:Je.next=27;break;case 23:return Je.prev=23,Je.t0=Je.catch(6),De.ZP.error("\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25: ".concat(Je.t0 instanceof Error?Je.t0.message:"\u672A\u77E5\u9519\u8BEF")),Je.abrupt("return",!1);case 27:case"end":return Je.stop()}},Y,null,[[6,23]])}));return function(Y,Q){return W.apply(this,arguments)}}(),[pe,Et,tt,ta]),Xl=(0,n.useCallback)(I()(u()().mark(function W(){var Y;return u()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!(!wr||!ne)){Ee.next=2;break}return Ee.abrupt("return");case 2:return Tr(!0),Ee.prev=3,Ee.next=6,Et.deleteFileItem(wr.id);case 6:Y=Ee.sent,Y&&(De.ZP.success("\u6210\u529F\u5220\u9664 ".concat(wr.type==="folder"?"\u6587\u4EF6\u5939":"\u6587\u4EF6",": ").concat(wr.name)),ta(),tt.refreshProjectInfo());case 8:return Ee.prev=8,Da(!1),es(null),Tr(!1),Ee.finish(8);case 13:case"end":return Ee.stop()}},W,null,[[3,,8,13]])})),[wr,ne,Et,ta,tt]),di=(0,n.useCallback)(function(){Da(!1),es(null)},[]),pi=(0,n.useCallback)(function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Et.cancelEdit(W)},[Et]);if((0,n.useEffect)(function(){return function(){vr.cleanupAppDevSSE&&vr.cleanupAppDevSSE(),Zr.stopKeepAlive&&Zr.stopKeepAlive(),Ur.stopPolling(),j.current&&(clearTimeout(j.current),j.current=null),F.current=!1,zr.current&&(clearTimeout(zr.current),zr.current=null),rs.resetAll()}},[]),L)return(0,t.jsx)("div",{className:gr.errorContainer,children:(0,t.jsx)(Qt.Z,{message:"\u7F3A\u5C11\u9879\u76EEID\u53C2\u6570",description:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"\u8BF7\u5728 URL \u4E2D\u6DFB\u52A0 projectId \u53C2\u6570\uFF0C\u4F8B\u5982\uFF1A"}),(0,t.jsx)("code",{children:"/space/\u4F60\u7684\u7A7A\u95F4ID/app-dev/\u4F60\u7684\u9879\u76EEID"})]}),type:"warning",showIcon:!0,action:(0,t.jsxs)(Ar.Z,{children:[(0,t.jsx)(Be.ZP,{type:"primary",onClick:function(){return ie(!0)},disabled:vr.isChatLoading,children:"\u4E0A\u4F20\u9879\u76EE"}),(0,t.jsx)(Be.ZP,{onClick:function(){return window.history.back()},children:"\u8FD4\u56DE"})]})})});var ql=function(){x(!1),tt.refreshProjectInfo()},$l=function(Y){A(Y),k.current=Y};return(0,t.jsxs)(t.Fragment,{children:[B,(0,t.jsx)(Lo,{visible:Ve||Kt&&gl,tip:Ve?`\u6B63\u5728\u53D1\u5E03\u9879\u76EE...
\u8BF7\u7A0D\u5019\uFF0C\u53D1\u5E03\u5B8C\u6210\u540E\u5C06\u81EA\u52A8\u5173\u95ED`:void 0,icon:Ve?(0,t.jsx)(Rt.Z,{spin:!0,style:{fontSize:52,color:"#1677ff"}}):void 0,zIndex:9999}),(0,t.jsxs)("div",{className:Gs(gr.appDev,gr.container,"h-full","flex","flex-col"),style:Kt||Ve?{pointerEvents:"none",userSelect:"none",opacity:.7}:{},children:[(0,t.jsx)(Ei,{workspace:T,spaceId:M,onEditProject:function(){return x(!0)},onPublishComponent:Ml,onPublishApplication:function(){return ts(!0)},onOpenVersionHistory:function(){return ni(!0)},hasUpdates:tt.hasUpdates,isDeploying:Ve,projectInfo:(s=tt.projectInfoState)===null||s===void 0?void 0:s.projectInfo,isChatLoading:vr.isChatLoading,previewRef:pn}),(0,t.jsx)("section",{className:Gs("flex","flex-1",gr.section,"xagi-nav-".concat(h)),children:(0,t.jsxs)("div",{className:gr.mainRow,children:[(0,t.jsx)("div",{className:gr.leftPanel,children:(0,t.jsx)(Eo,{chat:vr,projectId:ne||"",selectedDataSources:P,onUpdateDataSources:$l,fileContentState:Et.fileContentState,onSetSelectedFile:Et.switchToFile,modelSelector:tn,onUserManualSendMessage:function(){vn.resetAndEnableAutoHandling(),rs.resetSessionCount(),fn.current=""},onUserCancelAgentTask:function(){vn.handleUserCancelAuto()}})}),(0,t.jsxs)("div",{className:gr.rightPanel,children:[(0,t.jsxs)("div",{className:gr.editorHeader,children:[(0,t.jsx)("div",{className:gr.editorHeaderLeft,children:(0,t.jsx)(Yn.Z,{value:ge,onChange:function(Y){return m(Y)},disabled:Xt.isComparing,options:[{label:(0,t.jsx)(Wt.Z,{title:"\u9884\u89C8",children:(0,t.jsx)(je.le,{name:"icons-common-preview",style:{fontSize:18}})}),value:"preview"},{label:(0,t.jsx)(Wt.Z,{title:"\u4EE3\u7801",children:(0,t.jsx)(je.le,{name:"icons-common-code",style:{fontSize:18}})}),value:"code"}],className:gr.segmentedTabs})}),(0,t.jsx)(ko,{isComparing:Xt.isComparing,versionCompareData:{isSwitching:Xt.isSwitching,targetVersion:Xt.targetVersion||void 0,onCancelCompare:Xt.cancelCompare,onConfirmVersionSwitch:Xt.confirmVersionSwitch},activeTab:ge,previewData:{devServerUrl:T.devServerUrl,isStarting:Zr.isStarting,isRestarting:Zr.isRestarting,isProjectUploading:zs,isLoading:Al,lastRefreshed:wl},versionData:{versionList:tt.versionList,currentVersion:(a=tt.projectInfoState.projectInfo)===null||a===void 0?void 0:a.codeVersion,onVersionSelect:Ll,getActionColor:tt.getActionColor,getActionText:tt.getActionText},consoleData:{showDevLogConsole:Nt,hasErrorInLatestBlock:Ur.hasErrorInLatestBlock,onToggleDevLogConsole:function(){return Cr(!Nt)}},actionsData:{onImportProject:function(){return ie(!0)},onUploadSingleFile:function(){return ui(null)},onRefreshPreview:function(){var Y;return(Y=pn.current)===null||Y===void 0?void 0:Y.refresh()},onRestartServer:function(){var W=I()(u()().mark(function Q(){return u()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,Qr(ne||"");case 2:return me.next=4,ta();case 4:case"end":return me.stop()}},Q)}));function Y(){return W.apply(this,arguments)}return Y}(),onFullscreenPreview:function(){pn.current&&T.devServerUrl&&window.open("".concat("").concat(T.devServerUrl),"_blank")},onExportProject:Ol},isChatLoading:vr.isChatLoading})]}),(0,t.jsx)("div",{className:gr.contentArea,children:(0,t.jsxs)("div",{className:gr.contentRow,children:[(0,t.jsx)(qo,{files:kl,isComparing:Xt.isComparing,selectedFileId:Xt.isComparing?T.activeFile:Et.fileContentState.selectedFile,expandedFolders:Et.fileTreeState.expandedFolders,dataResources:mn.resources,dataResourcesLoading:mn.loading,onFileSelect:function(Y){Xt.isComparing?re({activeFile:Y}):(Et.switchToFile(Y),m("code"))},onToggleFolder:Et.toggleFolder,onDeleteFile:Kt?function(){}:zl,onRenameFile:Kt?I()(u()().mark(function W(){return u()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.abrupt("return",!1);case 1:case"end":return Q.stop()}},W)})):Yl,onUploadToFolder:Kt?I()(u()().mark(function W(){return u()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.abrupt("return",!1);case 1:case"end":return Q.stop()}},W)})):Ql,onUploadProject:Kt?function(){}:function(){return ie(!0)},onUploadSingleFile:Kt?I()(u()().mark(function W(){return u()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:case"end":return Q.stop()}},W)})):ui,onAddDataResource:Kt?function(){}:function(){return Js(!0)},onDeleteDataResource:Gl,selectedDataResources:P,workspace:T,fileManagement:Et,isChatLoading:vr.isChatLoading,projectId:ne?Number(ne):void 0,isFileTreeInitializing:Et.isFileTreeInitializing}),(0,t.jsx)("div",{className:gr.editorCol,children:(0,t.jsx)("div",{className:gr.editorContainer,children:(0,t.jsx)("div",{className:gr.editorContent,children:(0,t.jsx)(xi,{mode:ge,isComparing:Xt.isComparing,selectedFileId:Xt.isComparing?T.activeFile:Et.fileContentState.selectedFile,fileNode:Xt.isComparing?xl(T.activeFile):Et.findFileNode(Et.fileContentState.selectedFile),fileContent:Et.fileContentState.fileContent,isLoadingFileContent:Et.fileContentState.isLoadingFileContent,fileContentError:Et.fileContentState.fileContentError,isFileModified:Et.fileContentState.isFileModified,isSavingFile:Et.fileContentState.isSavingFile,devServerUrl:tt.hasPermission?T.devServerUrl:null,isStarting:Zr.isStarting,isRestarting:Zr.isRestarting,isProjectUploading:zs,serverMessage:Zr.serverMessage,serverErrorCode:Zr.serverErrorCode,previewRef:pn,onStartDev:Zr.startServer,onRestartDev:I()(u()().mark(function W(){return u()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,ea({shouldSwitchTab:!1,delayBeforeRefresh:500,showMessage:!1});case 2:case"end":return Q.stop()}},W)})),onWhiteScreenWithError:Jl,onContentChange:function(Y,Q){!Xt.isComparing&&!vr.isChatLoading&&(Et.updateFileContent(Y,Q),ke(Y,Q))},onSaveFile:function(){Et.saveFile().then(function(Y){return Y?(tt.refreshProjectInfo(),!0):!1})},onCancelEdit:pi,onRefreshFile:function(){Et.loadFileTree(!0,!0),Et.fileContentState.selectedFile&&(Et.switchToFile(Et.fileContentState.selectedFile),pi(!0))},findFileNode:Et.findFileNode,isChatLoading:vr.isChatLoading})})})})]})}),(0,t.jsx)(jo,{logs:Ur.logs,visible:Nt,hasErrorInLatestBlock:Ur.hasErrorInLatestBlock,isLoading:Ur.isLoading,lastLine:Ur.lastLine,onClear:Ur.clearLogs,onRefresh:Ur.refreshLogs,onClose:function(){return Cr(!1)},isChatLoading:vr.isChatLoading,onAddToChat:function(Y,Q){ns.current="log",vn.handleCustomError(Y,"log",Q)},onResetAutoRetry:function(){vn.resetAndEnableAutoHandling()}})]})]})}),(0,t.jsx)($t.Z,{title:"\u5BFC\u5165\u9879\u76EE",open:V&&!vr.isChatLoading,onOk:void 0,onCancel:function(){ie(!1),ft(null)},footer:[(0,t.jsx)(Be.ZP,{onClick:function(){ie(!1),ft(null)},disabled:Kt,children:"\u53D6\u6D88"},"cancel"),(0,t.jsx)(Be.ZP,{type:"primary",disabled:!fe||Kt,onClick:I()(u()().mark(function W(){return u()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return ie(!1),Tr(!0),Q.prev=2,Q.next=5,Kl();case 5:return Q.prev=5,Tr(!1),Q.finish(5);case 8:case"end":return Q.stop()}},W,null,[[2,,5,8]])})),children:"\u786E\u8BA4\u5BFC\u5165"},"confirm")],width:500,maskClosable:!Kt,closable:!Kt,mask:!0,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)(Ca.Z.Dragger,{accept:".zip",beforeUpload:function(Y){return Hl(Y)},disabled:Kt,showUploadList:!1,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(tr.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u9009\u62E9"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:"\u4EC5\u652F\u6301 .zip \u538B\u7F29\u6587\u4EF6\u683C\u5F0F\uFF08\u5C06\u66F4\u65B0\u5F53\u524D\u9879\u76EE\uFF09"})]}),fe&&(0,t.jsxs)("div",{style:{marginTop:16,padding:12,background:"#f5f5f5",borderRadius:6},children:[(0,t.jsx)(Gn,{strong:!0,children:"\u5DF2\u9009\u62E9\u6587\u4EF6\uFF1A"}),(0,t.jsx)("br",{}),(0,t.jsx)(Gn,{children:fe.name}),(0,t.jsx)("br",{}),(0,t.jsxs)(Gn,{type:"secondary",children:["\u6587\u4EF6\u5927\u5C0F\uFF1A",(fe.size/1024/1024).toFixed(2)," MB"]})]})]})}),(0,t.jsx)($t.Z,{title:"\u4E0A\u4F20\u5355\u4E2A\u6587\u4EF6",open:Ht&&!vr.isChatLoading,onCancel:ci,footer:[(0,t.jsx)(Be.ZP,{onClick:ci,disabled:Kt,children:"\u53D6\u6D88"},"cancel"),(0,t.jsx)(Be.ZP,{type:"primary",loading:Ks,onClick:Vl,disabled:!Kn||!Fn.trim()||Kt,children:"\u4E0A\u4F20"},"submit")],width:500,maskClosable:!Kt,closable:!Kt,mask:!0,children:(0,t.jsxs)(Ar.Z,{direction:"vertical",style:{width:"100%"},children:[(0,t.jsx)("div",{children:(0,t.jsxs)(Gn,{children:["\u5F53\u524D\u9879\u76EEID\uFF1A",ne||"\u672A\u8BBE\u7F6E"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(Gn,{strong:!0,children:"\u6587\u4EF6\u8DEF\u5F84\uFF1A"}),(0,t.jsx)("div",{style:{marginTop:4,fontSize:"12px",color:"#666"},children:"\u8BF7\u8F93\u5165\u6587\u4EF6\u8DEF\u5F84\uFF08\u5E26\u6587\u4EF6\u540D\u548C\u540E\u7F00\uFF09\uFF0C\u4F8B\u5982\uFF1Asrc/components/NewComponent.tsx"}),(0,t.jsx)(Bn.Z,{placeholder:"\u5982\uFF1Asrc/components/NewComponent.tsx",value:Fn,onChange:function(Y){return wa(Y.target.value)},style:{marginTop:8}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(Gn,{strong:!0,children:"\u9009\u62E9\u6587\u4EF6\uFF1A"}),(0,t.jsxs)(Ca.Z.Dragger,{beforeUpload:function(Y){return Wl(Y),!1},disabled:Ks,style:{marginTop:8},showUploadList:!1,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(tr.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u9009\u62E9"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:"\u652F\u6301\u4EFB\u610F\u6587\u4EF6\u683C\u5F0F\uFF0C\u6587\u4EF6\u5C06\u88AB\u6DFB\u52A0\u5230\u6307\u5B9A\u8DEF\u5F84"})]}),Kn&&(0,t.jsx)("div",{style:{marginTop:8},children:(0,t.jsx)(Qt.Z,{message:"\u5DF2\u9009\u62E9\u6587\u4EF6: ".concat(Kn.name),type:"success",showIcon:!0,action:(0,t.jsx)(Be.ZP,{type:"text",size:"small",onClick:function(){return ja(null)},children:"\u6E05\u9664"})})})]})]})}),(0,t.jsxs)($t.Z,{title:"\u786E\u8BA4\u5220\u9664",open:fl,onOk:void 0,onCancel:di,okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",okButtonProps:{danger:!0,disabled:Kt},cancelButtonProps:{disabled:Kt},maskClosable:!Kt,closable:!Kt,mask:!0,footer:[(0,t.jsx)(Be.ZP,{onClick:di,disabled:Kt,children:"\u53D6\u6D88"},"cancel"),(0,t.jsx)(Be.ZP,{type:"primary",danger:!0,disabled:Kt,onClick:I()(u()().mark(function W(){return u()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Da(!1),Tr(!0),Q.prev=2,Q.next=5,Xl();case 5:return Q.prev=5,Tr(!1),Q.finish(5);case 8:case"end":return Q.stop()}},W,null,[[2,,5,8]])})),children:"\u5220\u9664"},"confirm")],children:[(0,t.jsxs)("p",{children:["\u786E\u5B9A\u8981\u5220\u9664 ",wr?.type==="folder"?"\u6587\u4EF6\u5939":"\u6587\u4EF6"," ",'"',wr?.name,'" \u5417\uFF1F']}),wr?.type==="folder"&&(0,t.jsx)("p",{style:{color:"#ff4d4f",fontSize:"12px"},children:"\u6CE8\u610F\uFF1A\u5220\u9664\u6587\u4EF6\u5939\u5C06\u540C\u65F6\u5220\u9664\u5176\u5185\u90E8\u7684\u6240\u6709\u6587\u4EF6\u548C\u5B50\u6587\u4EF6\u5939\uFF0C\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\uFF01"})]}),(0,t.jsx)(Ne.Z,{open:dl,onCancel:Zl,checkTag:er.qR.Plugin,addComponents:N,onAdded:Ul,tabs:$e.Ne.filter(function(W){return W.key===er.qR.Plugin||W.key===er.qR.Workflow})})]}),(0,t.jsx)(al,{open:D,onCancel:function(){return x(!1)},onConfirm:ql,projectInfo:tt.projectInfoState.projectInfo}),(0,t.jsx)(Oe.Z,{targetId:((o=tt.projectInfoState.projectInfo)===null||o===void 0?void 0:o.devAgentId)||0,open:yl,onBeforePublishFn:Nl,spaceId:M,category:Hn?.category,onCancel:function(){return ts(!1)},onConfirm:Bl}),(0,t.jsx)(vt.Z,{condition:((l=tt.projectInfoState.projectInfo)===null||l===void 0?void 0:l.publishType)===Ge.sO.AGENT,children:(0,t.jsx)(Qe.Z,{targetId:((p=tt.projectInfoState.projectInfo)===null||p===void 0?void 0:p.devAgentId)||0,targetName:(d=tt.projectInfoState.projectInfo)===null||d===void 0?void 0:d.name,targetType:er.qR.Agent,permissions:Hn?.permissions||[],visible:ri,isDrawer:!0,onClose:function(){return ni(!1)}})})]})},il=sl},28359:function(Yt,Ct,i){"use strict";var Ye=i(90228),v=i.n(Ye),St=i(87999),q=i.n(St),ue=i(26068),f=i.n(ue),Pe=i(67825),u=i.n(Pe),Me=i(82092),I=i.n(Me),_e=i(64799),w=i(87453),je=["data"],vt=["records"],Ne=["deployedConfig","deployStatus","id","creator"],Oe=I()(I()(I()(I()(I()(I()(I()({},_e.qR.Plugin,"/api/published/plugin/list"),_e.qR.Workflow,"/api/published/workflow/list"),_e.qR.Knowledge,"/api/published/knowledge/list"),_e.qR.Table,"/api/published/composeTable/list"),_e.qR.Variable,"/api/published/dataBase/list"),_e.qR.Model,"/api/published/dataBase/list"),_e.qR.Agent,"/api/published/agent/list");function Qe(ze){return(0,w.request)("/api/mcp/deployed/list",{method:"POST",data:ze}).then(function(He){var qe=He.data,$e=u()(He,je),it=qe||{},_t=it.records,Fe=u()(it,vt);return f()(f()({},$e),{},{data:f()(f()({},Fe),{},{records:_t?.map(function(Ce){var ct=Ce.deployedConfig,oe=Ce.deployStatus,se=Ce.id,et=Ce.creator,ot=u()(Ce,Ne);return f()(f()({},ot),{},{status:oe,targetId:se,targetType:_e.qR.MCP,publishUser:et,config:ct})})})})})}function st(ze,He){return nt.apply(this,arguments)}function nt(){return nt=q()(v()().mark(function ze(He,qe){return v()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(He!==_e.qR.MCP){it.next=2;break}return it.abrupt("return",Qe(qe));case 2:return it.abrupt("return",(0,w.request)("".concat(Oe[He]),{method:"POST",data:qe}));case 3:case"end":return it.stop()}},ze)})),nt.apply(this,arguments)}function le(ze,He){return Ie.apply(this,arguments)}function Ie(){return Ie=q()(v()().mark(function ze(He,qe){return v()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.abrupt("return",(0,w.request)("/api/published/".concat(He,"/collect/list"),{method:"POST",data:qe}));case 1:case"end":return it.stop()}},ze)})),Ie.apply(this,arguments)}function dt(ze,He){return Ae.apply(this,arguments)}function Ae(){return Ae=q()(v()().mark(function ze(He,qe){return v()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.abrupt("return",(0,w.request)("/api/published/".concat(He,"/collect/").concat(qe),{method:"POST",data:I()({},"".concat(He,"Id"),qe)}));case 1:case"end":return it.stop()}},ze)})),Ae.apply(this,arguments)}function zt(ze,He){return ut.apply(this,arguments)}function ut(){return ut=q()(v()().mark(function ze(He,qe){return v()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.abrupt("return",(0,w.request)("/api/published/".concat(He,"/unCollect/").concat(qe),{method:"POST",data:I()({},"".concat(He,"Id"),qe)}));case 1:case"end":return it.stop()}},ze)})),ut.apply(this,arguments)}Ct.ZP={getList:st,collectList:le,collect:dt,unCollect:zt}},3440:function(Yt,Ct,i){"use strict";i.d(Ct,{AY:function(){return Oe},EV:function(){return ct},Fh:function(){return le},Hl:function(){return it},KJ:function(){return w},Nf:function(){return qe},RT:function(){return dt},S5:function(){return Fe},VW:function(){return ze},ey:function(){return f},nh:function(){return u}});var Ye=i(90228),v=i.n(Ye),St=i(87999),q=i.n(St),ue=i(87453);function f(se){return Pe.apply(this,arguments)}function Pe(){return Pe=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/updateTableName",{method:"POST",data:et}));case 1:case"end":return ee.stop()}},se)})),Pe.apply(this,arguments)}function u(se){return Me.apply(this,arguments)}function Me(){return Me=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/updateTableDefinition",{method:"POST",data:et}));case 1:case"end":return ee.stop()}},se)})),Me.apply(this,arguments)}function I(se){return _e.apply(this,arguments)}function _e(){return _e=_asyncToGenerator(_regeneratorRuntime().mark(function se(et){return _regeneratorRuntime().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",request("/api/compose/db/table/list",{method:"POST",data:et}));case 1:case"end":return ee.stop()}},se)})),_e.apply(this,arguments)}function w(se){return je.apply(this,arguments)}function je(){return je=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/delete/".concat(et),{method:"POST"}));case 1:case"end":return ee.stop()}},se)})),je.apply(this,arguments)}function vt(){return Ne.apply(this,arguments)}function Ne(){return Ne=_asyncToGenerator(_regeneratorRuntime().mark(function se(){return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.abrupt("return",request("/api/compose/db/table/copyTableDefinition",{method:"POST"}));case 1:case"end":return ot.stop()}},se)})),Ne.apply(this,arguments)}function Oe(se){return Qe.apply(this,arguments)}function Qe(){return Qe=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/add",{method:"POST",data:et}));case 1:case"end":return ee.stop()}},se)})),Qe.apply(this,arguments)}function st(se){return nt.apply(this,arguments)}function nt(){return nt=_asyncToGenerator(_regeneratorRuntime().mark(function se(et){return _regeneratorRuntime().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",request("/api/compose/db/table/existTableData",{method:"GET",params:{tableId:et}}));case 1:case"end":return ee.stop()}},se)})),nt.apply(this,arguments)}function le(se){return Ie.apply(this,arguments)}function Ie(){return Ie=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/detailById",{method:"GET",params:{id:et}}));case 1:case"end":return ee.stop()}},se)})),Ie.apply(this,arguments)}function dt(se){return Ae.apply(this,arguments)}function Ae(){return Ae=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/updateBusinessData",{method:"POST",data:et}));case 1:case"end":return ee.stop()}},se)})),Ae.apply(this,arguments)}function zt(se,et){return ut.apply(this,arguments)}function ut(){return ut=_asyncToGenerator(_regeneratorRuntime().mark(function se(et,ot){var ee;return _regeneratorRuntime().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return ee=new FormData,ee.append("file",ot),Xe.abrupt("return",request("/api/compose/db/table/importExcel/".concat(et),{method:"POST",data:ee}));case 3:case"end":return Xe.stop()}},se)})),ut.apply(this,arguments)}function ze(se,et){return He.apply(this,arguments)}function He(){return He=q()(v()().mark(function se(et,ot){return v()().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.abrupt("return",(0,ue.request)("/api/compose/db/table/deleteBusinessData",{method:"POST",data:{tableId:et,rowId:ot}}));case 1:case"end":return bt.stop()}},se)})),He.apply(this,arguments)}function qe(se){return $e.apply(this,arguments)}function $e(){return $e=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/addBusinessData",{method:"POST",data:et}));case 1:case"end":return ee.stop()}},se)})),$e.apply(this,arguments)}function it(se){return _t.apply(this,arguments)}function _t(){return _t=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/getTableDataById",{method:"GET",params:et}));case 1:case"end":return ee.stop()}},se)})),_t.apply(this,arguments)}function Fe(se){return Ce.apply(this,arguments)}function Ce(){return Ce=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/exportExcel/".concat(et),{method:"GET",responseType:"blob",getResponse:!0}));case 1:case"end":return ee.stop()}},se)})),Ce.apply(this,arguments)}function ct(se){return oe.apply(this,arguments)}function oe(){return oe=q()(v()().mark(function se(et){return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",(0,ue.request)("/api/compose/db/table/clearBusinessData/".concat(et),{method:"GET"}));case 1:case"end":return ee.stop()}},se)})),oe.apply(this,arguments)}},48528:function(Yt,Ct,i){"use strict";i.d(Ct,{Gh:function(){return ot},Il:function(){return qe},SR:function(){return ct},T5:function(){return Fe},TL:function(){return Fr},V5:function(){return hn},Wi:function(){return w},ah:function(){return le},bB:function(){return Ot},ds:function(){return rr},ei:function(){return f},g3:function(){return vt},gd:function(){return ze},h0:function(){return nn},pJ:function(){return st},qx:function(){return I},s2:function(){return sr},vn:function(){return qt}});var Ye=i(90228),v=i.n(Ye),St=i(87999),q=i.n(St),ue=i(87453);function f($){return Pe.apply(this,arguments)}function Pe(){return Pe=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/config/update",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Pe.apply(this,arguments)}function u($){return Me.apply(this,arguments)}function Me(){return Me=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/config/list",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Me.apply(this,arguments)}function I($){return _e.apply(this,arguments)}function _e(){return _e=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/config/add",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),_e.apply(this,arguments)}function w($){return je.apply(this,arguments)}function je(){return je=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/config/detailById",{method:"GET",params:{id:be}}));case 1:case"end":return _.stop()}},$)})),je.apply(this,arguments)}function vt($){return Ne.apply(this,arguments)}function Ne(){return Ne=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/config/deleteById",{method:"GET",params:{id:be}}));case 1:case"end":return _.stop()}},$)})),Ne.apply(this,arguments)}function Oe($){return Qe.apply(this,arguments)}function Qe(){return Qe=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/document/update",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Qe.apply(this,arguments)}function st($){return nt.apply(this,arguments)}function nt(){return nt=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/document/updateDocName",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),nt.apply(this,arguments)}function le($){return Ie.apply(this,arguments)}function Ie(){return Ie=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/document/list",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Ie.apply(this,arguments)}function dt($){return Ae.apply(this,arguments)}function Ae(){return Ae=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/document/generateQA/".concat(be),{method:"POST"}));case 1:case"end":return _.stop()}},$)})),Ae.apply(this,arguments)}function zt($){return ut.apply(this,arguments)}function ut(){return ut=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/document/doc/generateEmbeddings/".concat(be),{method:"POST"}));case 1:case"end":return _.stop()}},$)})),ut.apply(this,arguments)}function ze($){return He.apply(this,arguments)}function He(){return He=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/document/customAdd",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),He.apply(this,arguments)}function qe($){return $e.apply(this,arguments)}function $e(){return $e=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/document/add",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),$e.apply(this,arguments)}function it($){return _t.apply(this,arguments)}function _t(){return _t=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/document/doc/retryAllTaskByDays/".concat(be),{method:"GET"}));case 1:case"end":return _.stop()}},$)})),_t.apply(this,arguments)}function Fe($){return Ce.apply(this,arguments)}function Ce(){return Ce=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/document/doc/autoRetryTaskByDocId/".concat(be),{method:"GET"}));case 1:case"end":return _.stop()}},$)})),Ce.apply(this,arguments)}function ct($){return oe.apply(this,arguments)}function oe(){return oe=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/document/detailById",{method:"GET",params:{dataId:be}}));case 1:case"end":return _.stop()}},$)})),oe.apply(this,arguments)}function se($){return et.apply(this,arguments)}function et(){return et=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/document/queryDocStatus",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),et.apply(this,arguments)}function ot($){return ee.apply(this,arguments)}function ee(){return ee=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/document/deleteById",{method:"GET",params:{id:be}}));case 1:case"end":return _.stop()}},$)})),ee.apply(this,arguments)}function bt($){return Xe.apply(this,arguments)}function Xe(){return Xe=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/rawSegment/update",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Xe.apply(this,arguments)}function qt($){return Ue.apply(this,arguments)}function Ue(){return Ue=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/rawSegment/list",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Ue.apply(this,arguments)}function pt($){return wt.apply(this,arguments)}function wt(){return wt=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/rawSegment/add",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),wt.apply(this,arguments)}function ce($){return Jt.apply(this,arguments)}function Jt(){return Jt=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/rawSegment/detailById",{method:"GET",params:{dataId:be}}));case 1:case"end":return _.stop()}},$)})),Jt.apply(this,arguments)}function cr($){return Sr.apply(this,arguments)}function Sr(){return Sr=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/rawSegment/deleteById",{method:"GET",params:{id:be}}));case 1:case"end":return _.stop()}},$)})),Sr.apply(this,arguments)}function dr($){return Tt.apply(this,arguments)}function Tt(){return Tt=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/qa/update",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Tt.apply(this,arguments)}function yr($){return Jr.apply(this,arguments)}function Jr(){return Jr=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/qa/search",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Jr.apply(this,arguments)}function yt($){return pr.apply(this,arguments)}function pr(){return pr=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/qa/list",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),pr.apply(this,arguments)}function Pr($){return rn.apply(this,arguments)}function rn(){return rn=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/qa/add",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),rn.apply(this,arguments)}function Kr($){return Bt.apply(this,arguments)}function Bt(){return Bt=_asyncToGenerator(_regeneratorRuntime().mark(function $(be){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/knowledge/qa/doc/embeddingStatus/".concat(be),{method:"GET"}));case 1:case"end":return _.stop()}},$)})),Bt.apply(this,arguments)}function hn($){return Hr.apply(this,arguments)}function Hr(){return Hr=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/qa/add",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Hr.apply(this,arguments)}function nn($){return Lr.apply(this,arguments)}function Lr(){return Lr=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/qa/list",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Lr.apply(this,arguments)}function Fr($){return jt.apply(this,arguments)}function jt(){return jt=q()(v()().mark(function $(be){var Re;return v()().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Re=new FormData,Re.append("id",be.id.toString()),Mt.abrupt("return",(0,ue.request)("/api/knowledge/qa/deleteById",{method:"POST",data:Re}));case 3:case"end":return Mt.stop()}},$)})),jt.apply(this,arguments)}function Ot($){return Zt.apply(this,arguments)}function Zt(){return Zt=q()(v()().mark(function $(be){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ue.request)("/api/knowledge/qa/update",{method:"POST",data:be}));case 1:case"end":return _.stop()}},$)})),Zt.apply(this,arguments)}function rr(){return Gt.apply(this,arguments)}function Gt(){return Gt=q()(v()().mark(function $(){return v()().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.abrupt("return",(0,ue.request)("/api/knowledge/qa/downloadExcelTemplate",{method:"GET",responseType:"blob"}));case 1:case"end":return Re.stop()}},$)})),Gt.apply(this,arguments)}function sr($){return fr.apply(this,arguments)}function fr(){return fr=q()(v()().mark(function $(be){var Re;return v()().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Re=new FormData,Re.append("file",be.file),Re.append("kbId",be.kbId.toString()),Mt.abrupt("return",(0,ue.request)("/api/knowledge/qa/importExcel",{method:"POST",data:Re}));case 4:case"end":return Mt.stop()}},$)})),fr.apply(this,arguments)}},53361:function(Yt,Ct,i){"use strict";i.d(Ct,{Cw:function(){return vt},Kt:function(){return f},Y$:function(){return Oe},jU:function(){return I},sN:function(){return u},xC:function(){return w}});var Ye=i(90228),v=i.n(Ye),St=i(87999),q=i.n(St),ue=i(87453);function f(Qe){return Pe.apply(this,arguments)}function Pe(){return Pe=q()(v()().mark(function Qe(st){return v()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",(0,ue.request)("/api/workflow/add",{method:"POST",data:st}));case 1:case"end":return le.stop()}},Qe)})),Pe.apply(this,arguments)}function u(Qe){return Me.apply(this,arguments)}function Me(){return Me=q()(v()().mark(function Qe(st){return v()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",(0,ue.request)("/api/workflow/update",{method:"POST",data:st}));case 1:case"end":return le.stop()}},Qe)})),Me.apply(this,arguments)}function I(Qe,st){return _e.apply(this,arguments)}function _e(){return _e=q()(v()().mark(function Qe(st,nt){return v()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.abrupt("return",(0,ue.request)("/api/workflow/copy/".concat(st,"/").concat(nt),{method:"POST"}));case 1:case"end":return Ie.stop()}},Qe)})),_e.apply(this,arguments)}function w(Qe){return je.apply(this,arguments)}function je(){return je=q()(v()().mark(function Qe(st){return v()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",(0,ue.request)("/api/workflow/delete/".concat(st),{method:"POST"}));case 1:case"end":return le.stop()}},Qe)})),je.apply(this,arguments)}function vt(Qe){return Ne.apply(this,arguments)}function Ne(){return Ne=q()(v()().mark(function Qe(st){return v()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",(0,ue.request)("/api/component/list/".concat(st),{method:"GET"}));case 1:case"end":return le.stop()}},Qe)})),Ne.apply(this,arguments)}function Oe(Qe){return(0,ue.request)("/api/compose/db/table/copyTableDefinition",{method:"POST",params:Qe})}},99730:function(Yt,Ct,i){"use strict";i.d(Ct,{Bj:function(){return I},G6:function(){return vt},Gl:function(){return f},V_:function(){return u},og:function(){return Oe}});var Ye=i(90228),v=i.n(Ye),St=i(87999),q=i.n(St),ue=i(87453);function f(le){return Pe.apply(this,arguments)}function Pe(){return Pe=q()(v()().mark(function le(Ie){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.abrupt("return",(0,ue.request)("/api/model/save",{method:"POST",data:Ie}));case 1:case"end":return Ae.stop()}},le)})),Pe.apply(this,arguments)}function u(le){return Me.apply(this,arguments)}function Me(){return Me=q()(v()().mark(function le(Ie){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.abrupt("return",(0,ue.request)("/api/model/test-connectivity",{method:"POST",data:Ie}));case 1:case"end":return Ae.stop()}},le)})),Me.apply(this,arguments)}function I(le){return _e.apply(this,arguments)}function _e(){return _e=q()(v()().mark(function le(Ie){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.abrupt("return",(0,ue.request)("/api/model/list",{method:"POST",data:Ie}));case 1:case"end":return Ae.stop()}},le)})),_e.apply(this,arguments)}function w(le){return je.apply(this,arguments)}function je(){return je=_asyncToGenerator(_regeneratorRuntime().mark(function le(Ie){return _regeneratorRuntime().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.abrupt("return",request("/api/model/list/space/".concat(Ie),{method:"POST"}));case 1:case"end":return Ae.stop()}},le)})),je.apply(this,arguments)}function vt(le){return Ne.apply(this,arguments)}function Ne(){return Ne=q()(v()().mark(function le(Ie){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.abrupt("return",(0,ue.request)("/api/model/".concat(Ie),{method:"GET"}));case 1:case"end":return Ae.stop()}},le)})),Ne.apply(this,arguments)}function Oe(le){return Qe.apply(this,arguments)}function Qe(){return Qe=q()(v()().mark(function le(Ie){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.abrupt("return",(0,ue.request)("/api/model/".concat(Ie,"/delete"),{method:"GET"}));case 1:case"end":return Ae.stop()}},le)})),Qe.apply(this,arguments)}function st(){return nt.apply(this,arguments)}function nt(){return nt=_asyncToGenerator(_regeneratorRuntime().mark(function le(){return _regeneratorRuntime().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.abrupt("return",request("/api/model/test",{method:"GET"}));case 1:case"end":return dt.stop()}},le)})),nt.apply(this,arguments)}},52909:function(Yt,Ct,i){"use strict";i.d(Ct,{Ie:function(){return f},M6:function(){return it},RP:function(){return zt},SM:function(){return ze},UJ:function(){return I},Ui:function(){return dt},ci:function(){return w},gH:function(){return le},gx:function(){return qe},pd:function(){return st},rX:function(){return vt},sG:function(){return Oe},x3:function(){return u}});var Ye=i(90228),v=i.n(Ye),St=i(87999),q=i.n(St),ue=i(87453);function f(Fe){return Pe.apply(this,arguments)}function Pe(){return Pe=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/upload-and-start",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),Pe.apply(this,arguments)}function u(Fe){return Me.apply(this,arguments)}function Me(){return Me=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/create",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),Me.apply(this,arguments)}function I(Fe){return _e.apply(this,arguments)}function _e(){return _e=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/create-reverse-proxy",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),_e.apply(this,arguments)}function w(Fe){return je.apply(this,arguments)}function je(){return je=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/list-projects",{method:"GET",params:Ce}));case 1:case"end":return oe.stop()}},Fe)})),je.apply(this,arguments)}function vt(Fe){return Ne.apply(this,arguments)}function Ne(){return Ne=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/copy-project",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),Ne.apply(this,arguments)}function Oe(Fe){return Qe.apply(this,arguments)}function Qe(){return Qe=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/batch-config-proxy",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),Qe.apply(this,arguments)}function st(Fe){return nt.apply(this,arguments)}function nt(){return nt=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/add-path",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),nt.apply(this,arguments)}function le(Fe){return Ie.apply(this,arguments)}function Ie(){return Ie=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/edit-path",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),Ie.apply(this,arguments)}function dt(Fe){return Ae.apply(this,arguments)}function Ae(){return Ae=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/delete-path",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),Ae.apply(this,arguments)}function zt(Fe){return ut.apply(this,arguments)}function ut(){return ut=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/save-path-args",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),ut.apply(this,arguments)}function ze(Fe){return He.apply(this,arguments)}function He(){return He=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/get-project-info",{method:"GET",params:{projectId:Ce}}));case 1:case"end":return oe.stop()}},Fe)})),He.apply(this,arguments)}function qe(Fe){return $e.apply(this,arguments)}function $e(){return $e=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/delete-project",{method:"POST",data:{projectId:Ce}}));case 1:case"end":return oe.stop()}},Fe)})),$e.apply(this,arguments)}function it(Fe){return _t.apply(this,arguments)}function _t(){return _t=q()(v()().mark(function Fe(Ce){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,ue.request)("/api/custom-page/update-project",{method:"POST",data:Ce}));case 1:case"end":return oe.stop()}},Fe)})),_t.apply(this,arguments)}},75076:function(Yt,Ct,i){"use strict";i.d(Ct,{Pm:function(){return St},Tv:function(){return ue},Yg:function(){return v},ai:function(){return q},lj:function(){return f},sO:function(){return Pe},wI:function(){return Ye}});var Ye=function(u){return u.Import_Project="Import_Project",u.Online_Develop="Online_Develop",u.Reverse_Proxy="Reverse_Proxy",u}({}),v=function(u){return u.All_Type="All_Type",u.AGENT="AGENT",u.PAGE="PAGE",u}({}),St=function(u){return u.ONLINE_DEPLOY="ONLINE_DEPLOY",u.REVERSE_PROXY="REVERSE_PROXY",u}({}),q=function(u){return u.Dev="dev",u.Production="prod",u}({}),ue=function(u){return u.Reverse_Proxy_Config="Reverse_Proxy_Config",u.Path_Params_Config="Path_Params_Config",u.Auth_Config="Auth_Config",u.Page_Preview="Page_Preview",u.Copy_To_Space="Copy_To_Space",u.Delete="Delete",u}({}),f=function(u){return u[u.Published=1]="Published",u[u.Unpublished=0]="Unpublished",u}({}),Pe=function(u){return u.PAGE="PAGE",u.AGENT="AGENT",u}({})},18631:function(Yt,Ct,i){"use strict";i.d(Ct,{td:function(){return Ye}});function Ye(f){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;if(f===0)return"0 Bytes";var u=1024,Me=Pe<0?0:Pe,I=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],_e=Math.floor(Math.log(f)/Math.log(u));return Number.parseFloat((f/Math.pow(u,_e)).toFixed(Me))+" "+I[_e]}function v(f){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.parseFloat((f/1024).toFixed(Pe))}function St(f){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.parseFloat((f/(1024*1024)).toFixed(Pe))}function q(f){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return"".concat(v(f,Pe)," KB")}function ue(f){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return"".concat(St(f,Pe)," MB")}},73888:function(Yt,Ct,i){"use strict";i.d(Ct,{G:function(){return St},U:function(){return q}});var Ye=i(59934),v=i(92122),St=function(f){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:99;return f.filter(function(u){return u.status!==v.KM.removed}).map(function(u){var Me=u.response||{},I=Me.data,_e=I===void 0?{}:I,w=Me.code,je=u.status,vt=u.percent;return w&&w!==Ye.Gh&&(je=v.KM.error),u?.percent===100&&je===v.KM.uploading&&(vt=Pe),{key:_e?.key||"",name:_e?.fileName||u.name||"",size:_e?.size||u.size||0,url:_e?.url||u.url||"",type:_e?.mimeType||u.type||"",uid:u.uid,status:je,percent:vt,response:u.response}})},q=function(f){return f?.status===v.KM.error?"exception":f?.status===v.KM.uploading?"active":f?.status===v.KM.done||Math.floor(f?.percent||0)===100?"success":"active"}},29558:function(){"use strict"},30832:function(Yt,Ct){"use strict";Ct.Z={"markdown-container":"markdown-container___B4lMY","table-wrapper":"table-wrapper___gVSep","markdown-table":"markdown-table___tMbI9","markdown-image-container":"markdown-image-container___QvQqd",spin:"spin___sxYN7"}},64234:function(Yt,Ct,i){var Ye={"./_.contribution":91523,"./abap/abap.contribution":84185,"./apex/apex.contribution":45492,"./azcli/azcli.contribution":35419,"./bat/bat.contribution":25762,"./bicep/bicep.contribution":85884,"./cameligo/cameligo.contribution":6283,"./clojure/clojure.contribution":86248,"./coffee/coffee.contribution":13753,"./cpp/cpp.contribution":74062,"./csharp/csharp.contribution":57846,"./csp/csp.contribution":66919,"./css/css.contribution":89541,"./cypher/cypher.contribution":13832,"./dart/dart.contribution":3883,"./dockerfile/dockerfile.contribution":87418,"./ecl/ecl.contribution":23606,"./elixir/elixir.contribution":57888,"./flow9/flow9.contribution":3430,"./freemarker2/freemarker2.contribution":66632,"./fsharp/fsharp.contribution":40668,"./go/go.contribution":16918,"./graphql/graphql.contribution":57673,"./handlebars/handlebars.contribution":65601,"./hcl/hcl.contribution":53287,"./html/html.contribution":53217,"./ini/ini.contribution":38092,"./java/java.contribution":96410,"./javascript/javascript.contribution":23977,"./julia/julia.contribution":52516,"./kotlin/kotlin.contribution":30180,"./less/less.contribution":59947,"./lexon/lexon.contribution":31185,"./liquid/liquid.contribution":30592,"./lua/lua.contribution":21953,"./m3/m3.contribution":69192,"./markdown/markdown.contribution":93471,"./mdx/mdx.contribution":4872,"./mips/mips.contribution":5146,"./monaco.contribution":48825,"./msdax/msdax.contribution":89931,"./mysql/mysql.contribution":64871,"./objective-c/objective-c.contribution":1669,"./pascal/pascal.contribution":24738,"./pascaligo/pascaligo.contribution":22700,"./perl/perl.contribution":64558,"./pgsql/pgsql.contribution":35543,"./php/php.contribution":13031,"./pla/pla.contribution":81281,"./postiats/postiats.contribution":72606,"./powerquery/powerquery.contribution":14129,"./powershell/powershell.contribution":64350,"./protobuf/protobuf.contribution":15255,"./pug/pug.contribution":94809,"./python/python.contribution":97764,"./qsharp/qsharp.contribution":90949,"./r/r.contribution":15202,"./razor/razor.contribution":72720,"./redis/redis.contribution":10035,"./redshift/redshift.contribution":25292,"./restructuredtext/restructuredtext.contribution":29594,"./ruby/ruby.contribution":14007,"./rust/rust.contribution":78404,"./sb/sb.contribution":47733,"./scala/scala.contribution":93899,"./scheme/scheme.contribution":93932,"./scss/scss.contribution":41544,"./shell/shell.contribution":31073,"./solidity/solidity.contribution":45400,"./sophia/sophia.contribution":52818,"./sparql/sparql.contribution":93581,"./sql/sql.contribution":61319,"./st/st.contribution":37135,"./swift/swift.contribution":75887,"./systemverilog/systemverilog.contribution":52926,"./tcl/tcl.contribution":99526,"./twig/twig.contribution":46759,"./typescript/typescript.contribution":36290,"./typespec/typespec.contribution":2590,"./vb/vb.contribution":16021,"./wgsl/wgsl.contribution":51306,"./xml/xml.contribution":52289,"./yaml/yaml.contribution":94757};function v(St){return Promise.resolve().then(function(){if(!i.o(Ye,St)){var q=new Error("Cannot find module '"+St+"'");throw q.code="MODULE_NOT_FOUND",q}var ue=Ye[St];return i(ue)})}v.keys=function(){return Object.keys(Ye)},v.id=64234,Yt.exports=v},22675:function(Yt){"use strict";Yt.exports="data:image/png;base64,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"}}]);})();
