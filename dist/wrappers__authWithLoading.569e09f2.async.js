"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[3988],{3055:function(j,r,e){e.d(r,{Z:function(){return h}});var f=e(24573),i=e(94581),c=e.n(i),O=e(75271),l={"xagi-nav-style2":"xagi-nav-style2___xuAte",text:"text___sfO7S","page-container":"page-container___rvj3b",container:"container___MWZZN"},o=e(52676),g=c().bind(l),a=function(_){var s=_.className;return(0,o.jsxs)("div",{className:g("flex","flex-1","items-center","content-center",l.container,s),children:[(0,o.jsx)(f.Z,{}),(0,o.jsx)("span",{children:"\u52A0\u8F7D\u4E2D..."})]})},h=a},18327:function(j,r,e){e.r(r);var f=e(90228),i=e.n(f),c=e(87999),O=e.n(c),l=e(48305),o=e.n(l),g=e(3055),a=e(98166),h=e(86230),L=e(75271),_=e(56179),s=e(52676),T=function(){var U=(0,L.useState)(!0),W=o()(U,2),I=W[0],v=W[1],E=(0,_.useLocation)(),P=500,A=["/login","/verify-code","/set-password","/chat-temp"],C=A.some(function(u){return E.pathname.includes(u)}),D=function(m,d){var t=Date.now()-d;t>=P?m():setTimeout(m,P-t<=0?0:P-t)};return(0,L.useEffect)(function(){console.time("authWithLoading");var u=function(){var m=O()(i()().mark(function d(){var t,p,M;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=Date.now(),console.timeLog("authWithLoading","start"),n.prev=2,p=(0,a.Kf)(),p===null){n.next=9;break}v(!1),console.timeLog("authWithLoading","cachedLoginStatus",p),n.next=15;break;case 9:return console.timeLog("authWithLoading","fetchUserInfoFromServer:start"),n.next=12,a.KD.fetchUserInfoFromServer(!1);case 12:M=n.sent,console.timeLog("authWithLoading","fetchUserInfoFromServer:data",M),M?(console.timeLog("authWithLoading","fetchUserInfoFromServer:success"),(0,a.me)(!0)):((0,a.om)(),D(function(){console.timeLog("authWithLoading","fetchUserInfoFromServer:error","setLoading(false)"),v(!1)},t));case 15:n.next=23;break;case 17:n.prev=17,n.t0=n.catch(2),console.timeLog("authWithLoading","catch",n.t0),console.error("\u9A8C\u8BC1\u767B\u5F55\u72B6\u6001\u5931\u8D25:",n.t0),(0,a.om)(),D(function(){console.timeLog("authWithLoading","catch","redirectToLogin",E.pathname),(0,h.rf)("-1")},t);case 23:return n.prev=23,console.timeLog("authWithLoading","finally"),D(function(){console.timeLog("authWithLoading","finally","setLoading(false)"),v(!1)},t),n.finish(23);case 27:case"end":return n.stop()}},d,null,[[2,17,23,27]])}));return function(){return m.apply(this,arguments)}}();return u(),function(){console.timeEnd("authWithLoading")}},[E.pathname]),C?(0,s.jsx)(_.Outlet,{}):I?(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)(g.Z,{})}):(0,s.jsx)(_.Outlet,{})};r.default=T}}]);})();
