"use strict";(()=>{(self.webpackChunknuwax_frontend=self.webpackChunknuwax_frontend||[]).push([[3141],{68595:function(Zt,Tt,$e){$e.d(Tt,{ML:function(){return xr},hj:function(){return St},vc:function(){return te},NB:function(){return e},nU:function(){return ee},FZ:function(){return d},Ov:function(){return f},Nl:function(){return p},EG:function(){return Ut},Cf:function(){return Ur},K9:function(){return l},P1:function(){return $},x2:function(){return Mr},zK:function(){return Gr},S0:function(){return t}});var N=$e(65574),De=$e(41417),Ct=$e(57557),de=$e(56384),ie=$e(65590);const lt=(i,n)=>i.selection.empty?!1:(n&&n(i.tr.deleteSelection().scrollIntoView()),!0);function tt(i,n){let{$cursor:s}=i.selection;return!s||(n?!n.endOfTextblock("backward",i):s.parentOffset>0)?null:s}const ze=(i,n,s)=>{let a=tt(i,s);if(!a)return!1;let u=it(a);if(!u){let y=a.blockRange(),x=y&&(0,ie.k9)(y);return x==null?!1:(n&&n(i.tr.lift(y,x).scrollIntoView()),!0)}let h=u.nodeBefore;if(U(i,u,n,-1))return!0;if(a.parent.content.size==0&&(Ce(h,"end")||N.qv.isSelectable(h)))for(let y=a.depth;;y--){let x=(0,ie.dR)(i.doc,a.before(y),a.after(y),de.p2.empty);if(x&&x.slice.size<x.to-x.from){if(n){let w=i.tr.step(x);w.setSelection(Ce(h,"end")?N.Y1.findFrom(w.doc.resolve(w.mapping.map(u.pos,-1)),-1):N.qv.create(w.doc,u.pos-h.nodeSize)),n(w.scrollIntoView())}return!0}if(y==1||a.node(y-1).childCount>1)break}return h.isAtom&&u.depth==a.depth-1?(n&&n(i.tr.delete(u.pos-h.nodeSize,u.pos).scrollIntoView()),!0):!1},we=(i,n,s)=>{let a=tt(i,s);if(!a)return!1;let u=it(a);return u?Ye(i,u,n):!1},Ge=(i,n,s)=>{let a=Ke(i,s);if(!a)return!1;let u=be(a);return u?Ye(i,u,n):!1};function Ye(i,n,s){let a=n.nodeBefore,u=a,h=n.pos-1;for(;!u.isTextblock;h--){if(u.type.spec.isolating)return!1;let B=u.lastChild;if(!B)return!1;u=B}let y=n.nodeAfter,x=y,w=n.pos+1;for(;!x.isTextblock;w++){if(x.type.spec.isolating)return!1;let B=x.firstChild;if(!B)return!1;x=B}let P=(0,ie.dR)(i.doc,h,w,de.p2.empty);if(!P||P.from!=h||P instanceof ie.Pu&&P.slice.size>=w-h)return!1;if(s){let B=i.tr.step(P);B.setSelection(N.Bs.create(B.doc,h)),s(B.scrollIntoView())}return!0}function Ce(i,n,s=!1){for(let a=i;a;a=n=="start"?a.firstChild:a.lastChild){if(a.isTextblock)return!0;if(s&&a.childCount!=1)return!1}return!1}const ct=(i,n,s)=>{let{$head:a,empty:u}=i.selection,h=a;if(!u)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("backward",i):a.parentOffset>0)return!1;h=it(a)}let y=h&&h.nodeBefore;return!y||!N.qv.isSelectable(y)?!1:(n&&n(i.tr.setSelection(N.qv.create(i.doc,h.pos-y.nodeSize)).scrollIntoView()),!0)};function it(i){if(!i.parent.type.spec.isolating)for(let n=i.depth-1;n>=0;n--){if(i.index(n)>0)return i.doc.resolve(i.before(n+1));if(i.node(n).type.spec.isolating)break}return null}function Ke(i,n){let{$cursor:s}=i.selection;return!s||(n?!n.endOfTextblock("forward",i):s.parentOffset<s.parent.content.size)?null:s}const fe=(i,n,s)=>{let a=Ke(i,s);if(!a)return!1;let u=be(a);if(!u)return!1;let h=u.nodeAfter;if(U(i,u,n,1))return!0;if(a.parent.content.size==0&&(Ce(h,"start")||N.qv.isSelectable(h))){let y=(0,ie.dR)(i.doc,a.before(),a.after(),de.p2.empty);if(y&&y.slice.size<y.to-y.from){if(n){let x=i.tr.step(y);x.setSelection(Ce(h,"start")?N.Y1.findFrom(x.doc.resolve(x.mapping.map(u.pos)),1):N.qv.create(x.doc,x.mapping.map(u.pos))),n(x.scrollIntoView())}return!0}}return h.isAtom&&u.depth==a.depth-1?(n&&n(i.tr.delete(u.pos,u.pos+h.nodeSize).scrollIntoView()),!0):!1},Ie=(i,n,s)=>{let{$head:a,empty:u}=i.selection,h=a;if(!u)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("forward",i):a.parentOffset<a.parent.content.size)return!1;h=be(a)}let y=h&&h.nodeAfter;return!y||!N.qv.isSelectable(y)?!1:(n&&n(i.tr.setSelection(N.qv.create(i.doc,h.pos)).scrollIntoView()),!0)};function be(i){if(!i.parent.type.spec.isolating)for(let n=i.depth-1;n>=0;n--){let s=i.node(n);if(i.index(n)+1<s.childCount)return i.doc.resolve(i.after(n+1));if(s.type.spec.isolating)break}return null}const Re=(i,n)=>{let s=i.selection,a=s instanceof N.qv,u;if(a){if(s.node.isTextblock||!(0,ie.Mn)(i.doc,s.from))return!1;u=s.from}else if(u=(0,ie.GJ)(i.doc,s.from,-1),u==null)return!1;if(n){let h=i.tr.join(u);a&&h.setSelection(N.qv.create(h.doc,u-i.doc.resolve(u).nodeBefore.nodeSize)),n(h.scrollIntoView())}return!0},Le=(i,n)=>{let s=i.selection,a;if(s instanceof N.qv){if(s.node.isTextblock||!(0,ie.Mn)(i.doc,s.to))return!1;a=s.to}else if(a=(0,ie.GJ)(i.doc,s.to,1),a==null)return!1;return n&&n(i.tr.join(a).scrollIntoView()),!0},Ne=(i,n)=>{let{$from:s,$to:a}=i.selection,u=s.blockRange(a),h=u&&(0,ie.k9)(u);return h==null?!1:(n&&n(i.tr.lift(u,h).scrollIntoView()),!0)},Pe=(i,n)=>{let{$head:s,$anchor:a}=i.selection;return!s.parent.type.spec.code||!s.sameParent(a)?!1:(n&&n(i.tr.insertText(`
`).scrollIntoView()),!0)};function ke(i){for(let n=0;n<i.edgeCount;n++){let{type:s}=i.edge(n);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const Me=(i,n)=>{let{$head:s,$anchor:a}=i.selection;if(!s.parent.type.spec.code||!s.sameParent(a))return!1;let u=s.node(-1),h=s.indexAfter(-1),y=ke(u.contentMatchAt(h));if(!y||!u.canReplaceWith(h,h,y))return!1;if(n){let x=s.after(),w=i.tr.replaceWith(x,x,y.createAndFill());w.setSelection(N.Y1.near(w.doc.resolve(x),1)),n(w.scrollIntoView())}return!0},mt=(i,n)=>{let s=i.selection,{$from:a,$to:u}=s;if(s instanceof N.C1||a.parent.inlineContent||u.parent.inlineContent)return!1;let h=ke(u.parent.contentMatchAt(u.indexAfter()));if(!h||!h.isTextblock)return!1;if(n){let y=(!a.parentOffset&&u.index()<u.parent.childCount?a:u).pos,x=i.tr.insert(y,h.createAndFill());x.setSelection(N.Bs.create(x.doc,y+1)),n(x.scrollIntoView())}return!0},He=(i,n)=>{let{$cursor:s}=i.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let h=s.before();if((0,ie.Ax)(i.doc,h))return n&&n(i.tr.split(h).scrollIntoView()),!0}let a=s.blockRange(),u=a&&(0,ie.k9)(a);return u==null?!1:(n&&n(i.tr.lift(a,u).scrollIntoView()),!0)};function Te(i){return(n,s)=>{let{$from:a,$to:u}=n.selection;if(n.selection instanceof N.qv&&n.selection.node.isBlock)return!a.parentOffset||!(0,ie.Ax)(n.doc,a.pos)?!1:(s&&s(n.tr.split(a.pos).scrollIntoView()),!0);if(!a.depth)return!1;let h=[],y,x,w=!1,P=!1;for(let V=a.depth;;V--)if(a.node(V).isBlock){w=a.end(V)==a.pos+(a.depth-V),P=a.start(V)==a.pos-(a.depth-V),x=ke(a.node(V-1).contentMatchAt(a.indexAfter(V-1)));let X=i&&i(u.parent,w,a);h.unshift(X||(w&&x?{type:x}:null)),y=V;break}else{if(V==1)return!1;h.unshift(null)}let B=n.tr;(n.selection instanceof N.Bs||n.selection instanceof N.C1)&&B.deleteSelection();let L=B.mapping.map(a.pos),q=(0,ie.Ax)(B.doc,L,h.length,h);if(q||(h[0]=x?{type:x}:null,q=(0,ie.Ax)(B.doc,L,h.length,h)),!q)return!1;if(B.split(L,h.length,h),!w&&P&&a.node(y).type!=x){let V=B.mapping.map(a.before(y)),Z=B.doc.resolve(V);x&&a.node(y-1).canReplaceWith(Z.index(),Z.index()+1,x)&&B.setNodeMarkup(B.mapping.map(a.before(y)),x)}return s&&s(B.scrollIntoView()),!0}}const Ee=Te(),et=(i,n)=>Ee(i,n&&(s=>{let a=i.storedMarks||i.selection.$to.parentOffset&&i.selection.$from.marks();a&&s.ensureMarks(a),n(s)})),ge=(i,n)=>{let{$from:s,to:a}=i.selection,u,h=s.sharedDepth(a);return h==0?!1:(u=s.before(h),n&&n(i.tr.setSelection(N.qv.create(i.doc,u))),!0)},D=(i,n)=>(n&&n(i.tr.setSelection(new N.C1(i.doc))),!0);function j(i,n,s){let a=n.nodeBefore,u=n.nodeAfter,h=n.index();return!a||!u||!a.type.compatibleContent(u.type)?!1:!a.content.size&&n.parent.canReplace(h-1,h)?(s&&s(i.tr.delete(n.pos-a.nodeSize,n.pos).scrollIntoView()),!0):!n.parent.canReplace(h,h+1)||!(u.isTextblock||(0,ie.Mn)(i.doc,n.pos))?!1:(s&&s(i.tr.join(n.pos).scrollIntoView()),!0)}function U(i,n,s,a){let u=n.nodeBefore,h=n.nodeAfter,y,x,w=u.type.spec.isolating||h.type.spec.isolating;if(!w&&j(i,n,s))return!0;let P=!w&&n.parent.canReplace(n.index(),n.index()+1);if(P&&(y=(x=u.contentMatchAt(u.childCount)).findWrapping(h.type))&&x.matchType(y[0]||h.type).validEnd){if(s){let V=n.pos+h.nodeSize,Z=de.HY.empty;for(let me=y.length-1;me>=0;me--)Z=de.HY.from(y[me].create(null,Z));Z=de.HY.from(u.copy(Z));let X=i.tr.step(new ie.FC(n.pos-1,V,n.pos,V,new de.p2(Z,1,0),y.length,!0)),oe=X.doc.resolve(V+2*y.length);oe.nodeAfter&&oe.nodeAfter.type==u.type&&(0,ie.Mn)(X.doc,oe.pos)&&X.join(oe.pos),s(X.scrollIntoView())}return!0}let B=h.type.spec.isolating||a>0&&w?null:N.Y1.findFrom(n,1),L=B&&B.$from.blockRange(B.$to),q=L&&(0,ie.k9)(L);if(q!=null&&q>=n.depth)return s&&s(i.tr.lift(L,q).scrollIntoView()),!0;if(P&&Ce(h,"start",!0)&&Ce(u,"end")){let V=u,Z=[];for(;Z.push(V),!V.isTextblock;)V=V.lastChild;let X=h,oe=1;for(;!X.isTextblock;X=X.firstChild)oe++;if(V.canReplace(V.childCount,V.childCount,X.content)){if(s){let me=de.HY.empty;for(let Qe=Z.length-1;Qe>=0;Qe--)me=de.HY.from(Z[Qe].copy(me));let Je=i.tr.step(new ie.FC(n.pos-Z.length,n.pos+h.nodeSize,n.pos+oe,n.pos+h.nodeSize-oe,new de.p2(me,Z.length,0),0,!0));s(Je.scrollIntoView())}return!0}}return!1}function ue(i){return function(n,s){let a=n.selection,u=i<0?a.$from:a.$to,h=u.depth;for(;u.node(h).isInline;){if(!h)return!1;h--}return u.node(h).isTextblock?(s&&s(n.tr.setSelection(N.Bs.create(n.doc,i<0?u.start(h):u.end(h)))),!0):!1}}const ae=ue(-1),xe=ue(1);function Oe(i,n=null){return function(s,a){let{$from:u,$to:h}=s.selection,y=u.blockRange(h),x=y&&(0,ie.nd)(y,i,n);return x?(a&&a(s.tr.wrap(y,x).scrollIntoView()),!0):!1}}function je(i,n=null){return function(s,a){let u=!1;for(let h=0;h<s.selection.ranges.length&&!u;h++){let{$from:{pos:y},$to:{pos:x}}=s.selection.ranges[h];s.doc.nodesBetween(y,x,(w,P)=>{if(u)return!1;if(!(!w.isTextblock||w.hasMarkup(i,n)))if(w.type==i)u=!0;else{let B=s.doc.resolve(P),L=B.index();u=B.parent.canReplaceWith(L,L+1,i)}})}if(!u)return!1;if(a){let h=s.tr;for(let y=0;y<s.selection.ranges.length;y++){let{$from:{pos:x},$to:{pos:w}}=s.selection.ranges[y];h.setBlockType(x,w,i,n)}a(h.scrollIntoView())}return!0}}function ut(i,n,s,a){for(let u=0;u<n.length;u++){let{$from:h,$to:y}=n[u],x=h.depth==0?i.inlineContent&&i.type.allowsMarkType(s):!1;if(i.nodesBetween(h.pos,y.pos,(w,P)=>{if(x||!a&&w.isAtom&&w.isInline&&P>=h.pos&&P+w.nodeSize<=y.pos)return!1;x=w.inlineContent&&w.type.allowsMarkType(s)}),x)return!0}return!1}function at(i){let n=[];for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s];a.doc.nodesBetween(a.pos,u.pos,(h,y)=>{if(h.isAtom&&h.content.size&&h.isInline&&y>=a.pos&&y+h.nodeSize<=u.pos)return y+1>a.pos&&n.push(new SelectionRange(a,a.doc.resolve(y+1))),a=a.doc.resolve(y+1+h.content.size),!1}),a.pos<u.pos&&n.push(new SelectionRange(a,u))}return n}function dt(i,n=null,s){let a=(s&&s.removeWhenPresent)!==!1,u=(s&&s.enterInlineAtoms)!==!1,h=!(s&&s.includeWhitespace);return function(y,x){let{empty:w,$cursor:P,ranges:B}=y.selection;if(w&&!P||!ut(y.doc,B,i,u))return!1;if(x)if(P)i.isInSet(y.storedMarks||P.marks())?x(y.tr.removeStoredMark(i)):x(y.tr.addStoredMark(i.create(n)));else{let L,q=y.tr;u||(B=at(B)),a?L=!B.some(V=>y.doc.rangeHasMark(V.$from.pos,V.$to.pos,i)):L=!B.every(V=>{let Z=!1;return q.doc.nodesBetween(V.$from.pos,V.$to.pos,(X,oe,me)=>{if(Z)return!1;Z=!i.isInSet(X.marks)&&!!me&&me.type.allowsMarkType(i)&&!(X.isText&&/^\s*$/.test(X.textBetween(Math.max(0,V.$from.pos-oe),Math.min(X.nodeSize,V.$to.pos-oe))))}),!Z});for(let V=0;V<B.length;V++){let{$from:Z,$to:X}=B[V];if(!L)q.removeMark(Z.pos,X.pos,i);else{let oe=Z.pos,me=X.pos,Je=Z.nodeAfter,Qe=X.nodeBefore,Mt=h&&Je&&Je.isText?/^\s*/.exec(Je.text)[0].length:0,pt=h&&Qe&&Qe.isText?/\s*$/.exec(Qe.text)[0].length:0;oe+Mt<me&&(oe+=Mt,me-=pt),q.addMark(oe,me,i.create(n))}}x(q.scrollIntoView())}return!0}}function Et(i,n){return s=>{if(!s.isGeneric)return i(s);let a=[];for(let h=0;h<s.mapping.maps.length;h++){let y=s.mapping.maps[h];for(let x=0;x<a.length;x++)a[x]=y.map(a[x]);y.forEach((x,w,P,B)=>a.push(P,B))}let u=[];for(let h=0;h<a.length;h+=2){let y=a[h],x=a[h+1],w=s.doc.resolve(y),P=w.sharedDepth(x),B=w.node(P);for(let L=w.indexAfter(P),q=w.after(P+1);q<=x;++L){let V=B.maybeChild(L);if(!V)break;if(L&&u.indexOf(q)==-1){let Z=B.child(L-1);Z.type==V.type&&n(Z,V)&&u.push(q)}q+=V.nodeSize}}u.sort((h,y)=>h-y);for(let h=u.length-1;h>=0;h--)canJoin(s.doc,u[h])&&s.join(u[h]);i(s)}}function rt(i,n){let s=Array.isArray(n)?a=>n.indexOf(a.type.name)>-1:n;return(a,u,h)=>i(a,u&&Et(u,s),h)}function gt(...i){return function(n,s,a){for(let u=0;u<i.length;u++)if(i[u](n,s,a))return!0;return!1}}let Nt=gt(lt,ze,ct),Ot=gt(lt,fe,Ie);const yt={Enter:gt(Pe,mt,He,Ee),"Mod-Enter":Me,Backspace:Nt,"Mod-Backspace":Nt,"Shift-Backspace":Nt,Delete:Ot,"Mod-Delete":Ot,"Mod-a":D},st={"Ctrl-h":yt.Backspace,"Alt-Backspace":yt["Mod-Backspace"],"Ctrl-d":yt.Delete,"Ctrl-Alt-Backspace":yt["Mod-Delete"],"Alt-Delete":yt["Mod-Delete"],"Alt-d":yt["Mod-Delete"],"Ctrl-a":ae,"Ctrl-e":xe};for(let i in yt)st[i]=yt[i];const Ft=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,kt=null,xt=["ol",0],zt=["ul",0],Rt=["li",0],At={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(i){return{order:i.hasAttribute("start")?+i.getAttribute("start"):1}}}],toDOM(i){return i.attrs.order==1?xt:["ol",{start:i.attrs.order},0]}},ce={parseDOM:[{tag:"ul"}],toDOM(){return zt}},W={parseDOM:[{tag:"li"}],toDOM(){return Rt},defining:!0};function Q(i,n){let s={};for(let a in i)s[a]=i[a];for(let a in n)s[a]=n[a];return s}function se(i,n,s){return i.append({ordered_list:Q(At,{content:"list_item+",group:s}),bullet_list:Q(ce,{content:"list_item+",group:s}),list_item:Q(W,{content:n})})}function ne(i,n=null){return function(s,a){let{$from:u,$to:h}=s.selection,y=u.blockRange(h);if(!y)return!1;let x=a?s.tr:null;return pe(x,y,i,n)?(a&&a(x.scrollIntoView()),!0):!1}}function pe(i,n,s,a=null){let u=!1,h=n,y=n.$from.doc;if(n.depth>=2&&n.$from.node(n.depth-1).type.compatibleContent(s)&&n.startIndex==0){if(n.$from.index(n.depth-1)==0)return!1;let w=y.resolve(n.start-2);h=new de.Ts(w,w,n.depth),n.endIndex<n.parent.childCount&&(n=new de.Ts(n.$from,y.resolve(n.$to.end(n.depth)),n.depth)),u=!0}let x=(0,ie.nd)(h,s,a,n);return x?(i&&Xe(i,n,x,u,s),!0):!1}function Xe(i,n,s,a,u){let h=de.HY.empty;for(let B=s.length-1;B>=0;B--)h=de.HY.from(s[B].type.create(s[B].attrs,h));i.step(new ie.FC(n.start-(a?2:0),n.end,n.start,n.end,new de.p2(h,0,0),s.length,!0));let y=0;for(let B=0;B<s.length;B++)s[B].type==u&&(y=B+1);let x=s.length-y,w=n.start+s.length-(a?2:0),P=n.parent;for(let B=n.startIndex,L=n.endIndex,q=!0;B<L;B++,q=!1)!q&&(0,ie.Ax)(i.doc,w,x)&&(i.split(w,x),w+=2*x),w+=P.child(B).nodeSize;return i}function Fe(i,n){return function(s,a){let{$from:u,$to:h,node:y}=s.selection;if(y&&y.isBlock||u.depth<2||!u.sameParent(h))return!1;let x=u.node(-1);if(x.type!=i)return!1;if(u.parent.content.size==0&&u.node(-1).childCount==u.indexAfter(-1)){if(u.depth==3||u.node(-3).type!=i||u.index(-2)!=u.node(-2).childCount-1)return!1;if(a){let L=Fragment.empty,q=u.index(-1)?1:u.index(-2)?2:3;for(let me=u.depth-q;me>=u.depth-3;me--)L=Fragment.from(u.node(me).copy(L));let V=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3;L=L.append(Fragment.from(i.createAndFill()));let Z=u.before(u.depth-(q-1)),X=s.tr.replace(Z,u.after(-V),new Slice(L,4-q,0)),oe=-1;X.doc.nodesBetween(Z,X.doc.content.size,(me,Je)=>{if(oe>-1)return!1;me.isTextblock&&me.content.size==0&&(oe=Je+1)}),oe>-1&&X.setSelection(Selection.near(X.doc.resolve(oe))),a(X.scrollIntoView())}return!0}let w=h.pos==u.end()?x.contentMatchAt(0).defaultType:null,P=s.tr.delete(u.pos,h.pos),B=w?[n?{type:i,attrs:n}:null,{type:w}]:void 0;return canSplit(P.doc,u.pos,2,B)?(a&&a(P.split(u.pos,2,B).scrollIntoView()),!0):!1}}function ot(i,n){let s=Fe(i,n);return(a,u)=>s(a,u&&(h=>{let y=a.storedMarks||a.selection.$to.parentOffset&&a.selection.$from.marks();y&&h.ensureMarks(y),u(h)}))}function _e(i){return function(n,s){let{$from:a,$to:u}=n.selection,h=a.blockRange(u,y=>y.childCount>0&&y.firstChild.type==i);return h?s?a.node(h.depth-1).type==i?We(n,s,i,h):Ue(n,s,h):!0:!1}}function We(i,n,s,a){let u=i.tr,h=a.end,y=a.$to.end(a.depth);h<y&&(u.step(new ie.FC(h-1,y,h,y,new de.p2(de.HY.from(s.create(null,a.parent.copy())),1,0),1,!0)),a=new de.Ts(u.doc.resolve(a.$from.pos),u.doc.resolve(y),a.depth));const x=(0,ie.k9)(a);if(x==null)return!1;u.lift(a,x);let w=u.doc.resolve(u.mapping.map(h,-1)-1);return(0,ie.Mn)(u.doc,w.pos)&&w.nodeBefore.type==w.nodeAfter.type&&u.join(w.pos),n(u.scrollIntoView()),!0}function Ue(i,n,s){let a=i.tr,u=s.parent;for(let V=s.end,Z=s.endIndex-1,X=s.startIndex;Z>X;Z--)V-=u.child(Z).nodeSize,a.delete(V-1,V+1);let h=a.doc.resolve(s.start),y=h.nodeAfter;if(a.mapping.map(s.end)!=s.start+h.nodeAfter.nodeSize)return!1;let x=s.startIndex==0,w=s.endIndex==u.childCount,P=h.node(-1),B=h.index(-1);if(!P.canReplace(B+(x?0:1),B+1,y.content.append(w?de.HY.empty:de.HY.from(u))))return!1;let L=h.pos,q=L+y.nodeSize;return a.step(new ie.FC(L-(x?1:0),q+(w?1:0),L+1,q-1,new de.p2((x?de.HY.empty:de.HY.from(u.copy(de.HY.empty))).append(w?de.HY.empty:de.HY.from(u.copy(de.HY.empty))),x?0:1,w?0:1),x?0:1)),n(a.scrollIntoView()),!0}function Ze(i){return function(n,s){let{$from:a,$to:u}=n.selection,h=a.blockRange(u,P=>P.childCount>0&&P.firstChild.type==i);if(!h)return!1;let y=h.startIndex;if(y==0)return!1;let x=h.parent,w=x.child(y-1);if(w.type!=i)return!1;if(s){let P=w.lastChild&&w.lastChild.type==x.type,B=de.HY.from(P?i.create():null),L=new de.p2(de.HY.from(i.create(null,de.HY.from(x.type.create(null,B)))),P?3:1,0),q=h.start,V=h.end;s(n.tr.step(new ie.FC(q-(P?3:1),V,q,V,L,1,!0)).scrollIntoView())}return!0}}function ft(i){const{state:n,transaction:s}=i;let{selection:a}=s,{doc:u}=s,{storedMarks:h}=s;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return h},get selection(){return a},get doc(){return u},get tr(){return a=s.selection,u=s.doc,h=s.storedMarks,s}}}class F{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:s,state:a}=this,{view:u}=s,{tr:h}=a,y=this.buildProps(h);return Object.fromEntries(Object.entries(n).map(([x,w])=>[x,(...B)=>{const L=w(...B)(y);return!h.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(h),L}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,s=!0){const{rawCommands:a,editor:u,state:h}=this,{view:y}=u,x=[],w=!!n,P=n||h.tr,B=()=>(!w&&s&&!P.getMeta("preventDispatch")&&!this.hasCustomState&&y.dispatch(P),x.every(q=>q===!0)),L={...Object.fromEntries(Object.entries(a).map(([q,V])=>[q,(...X)=>{const oe=this.buildProps(P,s),me=V(...X)(oe);return x.push(me),L}])),run:B};return L}createCan(n){const{rawCommands:s,state:a}=this,u=!1,h=n||a.tr,y=this.buildProps(h,u);return{...Object.fromEntries(Object.entries(s).map(([w,P])=>[w,(...B)=>P(...B)({...y,dispatch:void 0})])),chain:()=>this.createChain(h,u)}}buildProps(n,s=!0){const{rawCommands:a,editor:u,state:h}=this,{view:y}=u,x={tr:n,editor:u,view:y,state:ft({state:h,transaction:n}),dispatch:s?()=>{}:void 0,chain:()=>this.createChain(n,s),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(a).map(([w,P])=>[w,(...B)=>P(...B)(x)]))}};return x}}class g{constructor(){this.callbacks={}}on(n,s){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(s),this}emit(n,...s){const a=this.callbacks[n];return a&&a.forEach(u=>u.apply(this,s)),this}off(n,s){const a=this.callbacks[n];return a&&(s?this.callbacks[n]=a.filter(u=>u!==s):delete this.callbacks[n]),this}once(n,s){const a=(...u)=>{this.off(n,a),s.apply(this,u)};return this.on(n,a)}removeAllListeners(){this.callbacks={}}}function p(i,n,s){return i.config[n]===void 0&&i.parent?p(i.parent,n,s):typeof i.config[n]=="function"?i.config[n].bind({...s,parent:i.parent?p(i.parent,n,s):null}):i.config[n]}function M(i){const n=i.filter(u=>u.type==="extension"),s=i.filter(u=>u.type==="node"),a=i.filter(u=>u.type==="mark");return{baseExtensions:n,nodeExtensions:s,markExtensions:a}}function A(i){const n=[],{nodeExtensions:s,markExtensions:a}=M(i),u=[...s,...a],h={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return i.forEach(y=>{const x={name:y.name,options:y.options,storage:y.storage,extensions:u},w=p(y,"addGlobalAttributes",x);if(!w)return;w().forEach(B=>{B.types.forEach(L=>{Object.entries(B.attributes).forEach(([q,V])=>{n.push({type:L,name:q,attribute:{...h,...V}})})})})}),u.forEach(y=>{const x={name:y.name,options:y.options,storage:y.storage},w=p(y,"addAttributes",x);if(!w)return;const P=w();Object.entries(P).forEach(([B,L])=>{const q={...h,...L};typeof q?.default=="function"&&(q.default=q.default()),q?.isRequired&&q?.default===void 0&&delete q.default,n.push({type:y.name,name:B,attribute:q})})}),n}function z(i,n){if(typeof i=="string"){if(!n.nodes[i])throw Error(`There is no node type named '${i}'. Maybe you forgot to add the extension?`);return n.nodes[i]}return i}function $(...i){return i.filter(n=>!!n).reduce((n,s)=>{const a={...n};return Object.entries(s).forEach(([u,h])=>{if(!a[u]){a[u]=h;return}if(u==="class"){const x=h?String(h).split(" "):[],w=a[u]?a[u].split(" "):[],P=x.filter(B=>!w.includes(B));a[u]=[...w,...P].join(" ")}else if(u==="style"){const x=h?h.split(";").map(B=>B.trim()).filter(Boolean):[],w=a[u]?a[u].split(";").map(B=>B.trim()).filter(Boolean):[],P=new Map;w.forEach(B=>{const[L,q]=B.split(":").map(V=>V.trim());P.set(L,q)}),x.forEach(B=>{const[L,q]=B.split(":").map(V=>V.trim());P.set(L,q)}),a[u]=Array.from(P.entries()).map(([B,L])=>`${B}: ${L}`).join("; ")}else a[u]=h}),a},{})}function G(i,n){return n.filter(s=>s.type===i.type.name).filter(s=>s.attribute.rendered).map(s=>s.attribute.renderHTML?s.attribute.renderHTML(i.attrs)||{}:{[s.name]:i.attrs[s.name]}).reduce((s,a)=>$(s,a),{})}function re(i){return typeof i=="function"}function ee(i,n=void 0,...s){return re(i)?n?i.bind(n)(...s):i(...s):i}function ye(i={}){return Object.keys(i).length===0&&i.constructor===Object}function v(i){return typeof i!="string"?i:i.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(i):i==="true"?!0:i==="false"?!1:i}function o(i,n){return"style"in i?i:{...i,getAttrs:s=>{const a=i.getAttrs?i.getAttrs(s):i.attrs;if(a===!1)return!1;const u=n.reduce((h,y)=>{const x=y.attribute.parseHTML?y.attribute.parseHTML(s):v(s.getAttribute(y.name));return x==null?h:{...h,[y.name]:x}},{});return{...a,...u}}}}function c(i){return Object.fromEntries(Object.entries(i).filter(([n,s])=>n==="attrs"&&ye(s)?!1:s!=null))}function m(i,n){var s;const a=A(i),{nodeExtensions:u,markExtensions:h}=M(i),y=(s=u.find(P=>p(P,"topNode")))===null||s===void 0?void 0:s.name,x=Object.fromEntries(u.map(P=>{const B=a.filter(me=>me.type===P.name),L={name:P.name,options:P.options,storage:P.storage,editor:n},q=i.reduce((me,Je)=>{const Qe=p(Je,"extendNodeSchema",L);return{...me,...Qe?Qe(P):{}}},{}),V=c({...q,content:ee(p(P,"content",L)),marks:ee(p(P,"marks",L)),group:ee(p(P,"group",L)),inline:ee(p(P,"inline",L)),atom:ee(p(P,"atom",L)),selectable:ee(p(P,"selectable",L)),draggable:ee(p(P,"draggable",L)),code:ee(p(P,"code",L)),whitespace:ee(p(P,"whitespace",L)),linebreakReplacement:ee(p(P,"linebreakReplacement",L)),defining:ee(p(P,"defining",L)),isolating:ee(p(P,"isolating",L)),attrs:Object.fromEntries(B.map(me=>{var Je;return[me.name,{default:(Je=me?.attribute)===null||Je===void 0?void 0:Je.default}]}))}),Z=ee(p(P,"parseHTML",L));Z&&(V.parseDOM=Z.map(me=>o(me,B)));const X=p(P,"renderHTML",L);X&&(V.toDOM=me=>X({node:me,HTMLAttributes:G(me,B)}));const oe=p(P,"renderText",L);return oe&&(V.toText=oe),[P.name,V]})),w=Object.fromEntries(h.map(P=>{const B=a.filter(oe=>oe.type===P.name),L={name:P.name,options:P.options,storage:P.storage,editor:n},q=i.reduce((oe,me)=>{const Je=p(me,"extendMarkSchema",L);return{...oe,...Je?Je(P):{}}},{}),V=c({...q,inclusive:ee(p(P,"inclusive",L)),excludes:ee(p(P,"excludes",L)),group:ee(p(P,"group",L)),spanning:ee(p(P,"spanning",L)),code:ee(p(P,"code",L)),attrs:Object.fromEntries(B.map(oe=>{var me;return[oe.name,{default:(me=oe?.attribute)===null||me===void 0?void 0:me.default}]}))}),Z=ee(p(P,"parseHTML",L));Z&&(V.parseDOM=Z.map(oe=>o(oe,B)));const X=p(P,"renderHTML",L);return X&&(V.toDOM=oe=>X({mark:oe,HTMLAttributes:G(oe,B)})),[P.name,V]}));return new de.V_({topNode:y,nodes:x,marks:w})}function k(i,n){return n.nodes[i]||n.marks[i]||null}function C(i,n){return Array.isArray(n)?n.some(s=>(typeof s=="string"?s:s.name)===i.name):n}function I(i,n){const s=de.PW.fromSchema(n).serializeFragment(i),u=document.implementation.createHTMLDocument().createElement("div");return u.appendChild(s),u.innerHTML}const H=(i,n=500)=>{let s="";const a=i.parentOffset;return i.parent.nodesBetween(Math.max(0,a-n),a,(u,h,y,x)=>{var w,P;const B=((P=(w=u.type.spec).toText)===null||P===void 0?void 0:P.call(w,{node:u,pos:h,parent:y,index:x}))||u.textContent||"%leaf%";s+=u.isAtom&&!u.isText?B:B.slice(0,Math.max(0,a-h))}),s};function K(i){return Object.prototype.toString.call(i)==="[object RegExp]"}class he{constructor(n){this.find=n.find,this.handler=n.handler}}const Ae=(i,n)=>{if(K(n))return n.exec(i);const s=n(i);if(!s)return null;const a=[s.text];return a.index=s.index,a.input=i,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),a.push(s.replaceWith)),a};function E(i){var n;const{editor:s,from:a,to:u,text:h,rules:y,plugin:x}=i,{view:w}=s;if(w.composing)return!1;const P=w.state.doc.resolve(a);if(P.parent.type.spec.code||!((n=P.nodeBefore||P.nodeAfter)===null||n===void 0)&&n.marks.find(q=>q.type.spec.code))return!1;let B=!1;const L=H(P)+h;return y.forEach(q=>{if(B)return;const V=Ae(L,q.find);if(!V)return;const Z=w.state.tr,X=ft({state:w.state,transaction:Z}),oe={from:a-(V[0].length-h.length),to:u},{commands:me,chain:Je,can:Qe}=new F({editor:s,state:X});q.handler({state:X,range:oe,match:V,commands:me,chain:Je,can:Qe})===null||!Z.steps.length||(Z.setMeta(x,{transform:Z,from:a,to:u,text:h}),w.dispatch(Z),B=!0)}),B}function O(i){const{editor:n,rules:s}=i,a=new N.Sy({state:{init(){return null},apply(u,h,y){const x=u.getMeta(a);if(x)return x;const w=u.getMeta("applyInputRules");return!!w&&setTimeout(()=>{let{text:B}=w;typeof B=="string"?B=B:B=I(de.HY.from(B),y.schema);const{from:L}=w,q=L+B.length;E({editor:n,from:L,to:q,text:B,rules:s,plugin:a})}),u.selectionSet||u.docChanged?null:h}},props:{handleTextInput(u,h,y,x){return E({editor:n,from:h,to:y,text:x,rules:s,plugin:a})},handleDOMEvents:{compositionend:u=>(setTimeout(()=>{const{$cursor:h}=u.state.selection;h&&E({editor:n,from:h.pos,to:h.pos,text:"",rules:s,plugin:a})}),!1)},handleKeyDown(u,h){if(h.key!=="Enter")return!1;const{$cursor:y}=u.state.selection;return y?E({editor:n,from:y.pos,to:y.pos,text:`
`,rules:s,plugin:a}):!1}},isInputRules:!0});return a}function _(i){return Object.prototype.toString.call(i).slice(8,-1)}function J(i){return _(i)!=="Object"?!1:i.constructor===Object&&Object.getPrototypeOf(i)===Object.prototype}function Y(i,n){const s={...i};return J(i)&&J(n)&&Object.keys(n).forEach(a=>{J(n[a])&&J(i[a])?s[a]=Y(i[a],n[a]):s[a]=n[a]}),s}class te{constructor(n={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ee(p(this,"addOptions",{name:this.name}))),this.storage=ee(p(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new te(n)}configure(n={}){const s=this.extend({...this.config,addOptions:()=>Y(this.options,n)});return s.name=this.name,s.parent=this.parent,s}extend(n={}){const s=new te(n);return s.parent=this,this.child=s,s.name=n.name?n.name:s.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=ee(p(s,"addOptions",{name:s.name})),s.storage=ee(p(s,"addStorage",{name:s.name,options:s.options})),s}static handleExit({editor:n,mark:s}){const{tr:a}=n.state,u=n.state.selection.$from;if(u.pos===u.end()){const y=u.marks();if(!!!y.find(P=>P?.type.name===s.name))return!1;const w=y.find(P=>P?.type.name===s.name);return w&&a.removeStoredMark(w),a.insertText(" ",u.pos),n.view.dispatch(a),!0}return!1}}function le(i){return typeof i=="number"}class Se{constructor(n){this.find=n.find,this.handler=n.handler}}const ve=(i,n,s)=>{if(K(n))return[...i.matchAll(n)];const a=n(i,s);return a?a.map(u=>{const h=[u.text];return h.index=u.index,h.input=i,h.data=u.data,u.replaceWith&&(u.text.includes(u.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),h.push(u.replaceWith)),h}):[]};function Ve(i){const{editor:n,state:s,from:a,to:u,rule:h,pasteEvent:y,dropEvent:x}=i,{commands:w,chain:P,can:B}=new F({editor:n,state:s}),L=[];return s.doc.nodesBetween(a,u,(V,Z)=>{if(!V.isTextblock||V.type.spec.code)return;const X=Math.max(a,Z),oe=Math.min(u,Z+V.content.size),me=V.textBetween(X-Z,oe-Z,void 0,"\uFFFC");ve(me,h.find,y).forEach(Qe=>{if(Qe.index===void 0)return;const Mt=X+Qe.index+1,pt=Mt+Qe[0].length,Bt={from:s.tr.mapping.map(Mt),to:s.tr.mapping.map(pt)},Kt=h.handler({state:s,range:Bt,match:Qe,commands:w,chain:P,can:B,pasteEvent:y,dropEvent:x});L.push(Kt)})}),L.every(V=>V!==null)}let nt=null;const Be=i=>{var n;const s=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(n=s.clipboardData)===null||n===void 0||n.setData("text/html",i),s};function qe(i){const{editor:n,rules:s}=i;let a=null,u=!1,h=!1,y=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x;try{x=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{x=null}const w=({state:B,from:L,to:q,rule:V,pasteEvt:Z})=>{const X=B.tr,oe=ft({state:B,transaction:X});if(!(!Ve({editor:n,state:oe,from:Math.max(L-1,0),to:q.b-1,rule:V,pasteEvent:Z,dropEvent:x})||!X.steps.length)){try{x=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{x=null}return y=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,X}};return s.map(B=>new N.Sy({view(L){const q=Z=>{var X;a=!((X=L.dom.parentElement)===null||X===void 0)&&X.contains(Z.target)?L.dom.parentElement:null,a&&(nt=n)},V=()=>{nt&&(nt=null)};return window.addEventListener("dragstart",q),window.addEventListener("dragend",V),{destroy(){window.removeEventListener("dragstart",q),window.removeEventListener("dragend",V)}}},props:{handleDOMEvents:{drop:(L,q)=>{if(h=a===L.dom.parentElement,x=q,!h){const V=nt;V?.isEditable&&setTimeout(()=>{const Z=V.state.selection;Z&&V.commands.deleteRange({from:Z.from,to:Z.to})},10)}return!1},paste:(L,q)=>{var V;const Z=(V=q.clipboardData)===null||V===void 0?void 0:V.getData("text/html");return y=q,u=!!Z?.includes("data-pm-slice"),!1}}},appendTransaction:(L,q,V)=>{const Z=L[0],X=Z.getMeta("uiEvent")==="paste"&&!u,oe=Z.getMeta("uiEvent")==="drop"&&!h,me=Z.getMeta("applyPasteRules"),Je=!!me;if(!X&&!oe&&!Je)return;if(Je){let{text:pt}=me;typeof pt=="string"?pt=pt:pt=I(de.HY.from(pt),V.schema);const{from:Bt}=me,Kt=Bt+pt.length,jt=Be(pt);return w({rule:B,state:V,from:Bt,to:{b:Kt},pasteEvt:jt})}const Qe=q.doc.content.findDiffStart(V.doc.content),Mt=q.doc.content.findDiffEnd(V.doc.content);if(!(!le(Qe)||!Mt||Qe===Mt.b))return w({rule:B,state:V,from:Qe,to:Mt,pasteEvt:y})}}))}function ht(i){const n=i.filter((s,a)=>i.indexOf(s)!==a);return Array.from(new Set(n))}class bt{constructor(n,s){this.splittableMarks=[],this.editor=s,this.extensions=bt.resolve(n),this.schema=m(this.extensions,s),this.setupExtensions()}static resolve(n){const s=bt.sort(bt.flatten(n)),a=ht(s.map(u=>u.name));return a.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${a.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),s}static flatten(n){return n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage},u=p(s,"addExtensions",a);return u?[s,...this.flatten(u())]:s}).flat(10)}static sort(n){return n.sort((a,u)=>{const h=p(a,"priority")||100,y=p(u,"priority")||100;return h>y?-1:h<y?1:0})}get commands(){return this.extensions.reduce((n,s)=>{const a={name:s.name,options:s.options,storage:s.storage,editor:this.editor,type:k(s.name,this.schema)},u=p(s,"addCommands",a);return u?{...n,...u()}:n},{})}get plugins(){const{editor:n}=this,s=bt.sort([...this.extensions].reverse()),a=[],u=[],h=s.map(y=>{const x={name:y.name,options:y.options,storage:y.storage,editor:n,type:k(y.name,this.schema)},w=[],P=p(y,"addKeyboardShortcuts",x);let B={};if(y.type==="mark"&&p(y,"exitable",x)&&(B.ArrowRight=()=>te.handleExit({editor:n,mark:y})),P){const X=Object.fromEntries(Object.entries(P()).map(([oe,me])=>[oe,()=>me({editor:n})]));B={...B,...X}}const L=(0,Ct.h)(B);w.push(L);const q=p(y,"addInputRules",x);C(y,n.options.enableInputRules)&&q&&a.push(...q());const V=p(y,"addPasteRules",x);C(y,n.options.enablePasteRules)&&V&&u.push(...V());const Z=p(y,"addProseMirrorPlugins",x);if(Z){const X=Z();w.push(...X)}return w}).flat();return[O({editor:n,rules:a}),...qe({editor:n,rules:u}),...h]}get attributes(){return A(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:s}=M(this.extensions);return Object.fromEntries(s.filter(a=>!!p(a,"addNodeView")).map(a=>{const u=this.attributes.filter(w=>w.type===a.name),h={name:a.name,options:a.options,storage:a.storage,editor:n,type:z(a.name,this.schema)},y=p(a,"addNodeView",h);if(!y)return[];const x=(w,P,B,L,q)=>{const V=G(w,u);return y()({node:w,view:P,getPos:B,decorations:L,innerDecorations:q,editor:n,extension:a,HTMLAttributes:V})};return[a.name,x]}))}setupExtensions(){this.extensions.forEach(n=>{var s;this.editor.extensionStorage[n.name]=n.storage;const a={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:k(n.name,this.schema)};n.type==="mark"&&(!((s=ee(p(n,"keepOnSplit",a)))!==null&&s!==void 0)||s)&&this.splittableMarks.push(n.name);const u=p(n,"onBeforeCreate",a),h=p(n,"onCreate",a),y=p(n,"onUpdate",a),x=p(n,"onSelectionUpdate",a),w=p(n,"onTransaction",a),P=p(n,"onFocus",a),B=p(n,"onBlur",a),L=p(n,"onDestroy",a);u&&this.editor.on("beforeCreate",u),h&&this.editor.on("create",h),y&&this.editor.on("update",y),x&&this.editor.on("selectionUpdate",x),w&&this.editor.on("transaction",w),P&&this.editor.on("focus",P),B&&this.editor.on("blur",B),L&&this.editor.on("destroy",L)})}}class St{constructor(n={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ee(p(this,"addOptions",{name:this.name}))),this.storage=ee(p(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new St(n)}configure(n={}){const s=this.extend({...this.config,addOptions:()=>Y(this.options,n)});return s.name=this.name,s.parent=this.parent,s}extend(n={}){const s=new St({...this.config,...n});return s.parent=this,this.child=s,s.name=n.name?n.name:s.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=ee(p(s,"addOptions",{name:s.name})),s.storage=ee(p(s,"addStorage",{name:s.name,options:s.options})),s}}function _t(i,n,s){const{from:a,to:u}=n,{blockSeparator:h=`

`,textSerializers:y={}}=s||{};let x="";return i.nodesBetween(a,u,(w,P,B,L)=>{var q;w.isBlock&&P>a&&(x+=h);const V=y?.[w.type.name];if(V)return B&&(x+=V({node:w,pos:P,parent:B,index:L,range:n})),!1;w.isText&&(x+=(q=w?.text)===null||q===void 0?void 0:q.slice(Math.max(a,P)-P,u-P))}),x}function xn(i){return Object.fromEntries(Object.entries(i.nodes).filter(([,n])=>n.spec.toText).map(([n,s])=>[n,s.spec.toText]))}const Hn=St.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new N.Sy({key:new N.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:i}=this,{state:n,schema:s}=i,{doc:a,selection:u}=n,{ranges:h}=u,y=Math.min(...h.map(B=>B.$from.pos)),x=Math.max(...h.map(B=>B.$to.pos)),w=xn(s);return _t(a,{from:y,to:x},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:w})}}})]}}),Wn=()=>({editor:i,view:n})=>(requestAnimationFrame(()=>{var s;i.isDestroyed||(n.dom.blur(),(s=window?.getSelection())===null||s===void 0||s.removeAllRanges())}),!0),qn=(i=!1)=>({commands:n})=>n.setContent("",i),Mn=()=>({state:i,tr:n,dispatch:s})=>{const{selection:a}=n,{ranges:u}=a;return s&&u.forEach(({$from:h,$to:y})=>{i.doc.nodesBetween(h.pos,y.pos,(x,w)=>{if(x.type.isText)return;const{doc:P,mapping:B}=n,L=P.resolve(B.map(w)),q=P.resolve(B.map(w+x.nodeSize)),V=L.blockRange(q);if(!V)return;const Z=(0,ie.k9)(V);if(x.type.isTextblock){const{defaultType:X}=L.parent.contentMatchAt(L.index());n.setNodeMarkup(V.start,X)}(Z||Z===0)&&n.lift(V,Z)})}),!0},Kn=i=>n=>i(n),jn=()=>({state:i,dispatch:n})=>mt(i,n),Cr=(i,n)=>({editor:s,tr:a})=>{const{state:u}=s,h=u.doc.slice(i.from,i.to);a.deleteRange(i.from,i.to);const y=a.mapping.map(n);return a.insert(y,h.content),a.setSelection(new N.Bs(a.doc.resolve(Math.max(y-1,0)))),!0},Cn=()=>({tr:i,dispatch:n})=>{const{selection:s}=i,a=s.$anchor.node();if(a.content.size>0)return!1;const u=i.selection.$anchor;for(let h=u.depth;h>0;h-=1)if(u.node(h).type===a.type){if(n){const x=u.before(h),w=u.after(h);i.delete(x,w).scrollIntoView()}return!0}return!1},Vt=i=>({tr:n,state:s,dispatch:a})=>{const u=z(i,s.schema),h=n.selection.$anchor;for(let y=h.depth;y>0;y-=1)if(h.node(y).type===u){if(a){const w=h.before(y),P=h.after(y);n.delete(w,P).scrollIntoView()}return!0}return!1},Jn=i=>({tr:n,dispatch:s})=>{const{from:a,to:u}=i;return s&&n.delete(a,u),!0},cn=()=>({state:i,dispatch:n})=>lt(i,n),rn=()=>({commands:i})=>i.keyboardShortcut("Enter"),Qt=()=>({state:i,dispatch:n})=>Me(i,n);function un(i,n,s={strict:!0}){const a=Object.keys(n);return a.length?a.every(u=>s.strict?n[u]===i[u]:K(n[u])?n[u].test(i[u]):n[u]===i[u]):!0}function Yn(i,n,s={}){return i.find(a=>a.type===n&&un(Object.fromEntries(Object.keys(s).map(u=>[u,a.attrs[u]])),s))}function wn(i,n,s={}){return!!Yn(i,n,s)}function vn(i,n,s){var a;if(!i||!n)return;let u=i.parent.childAfter(i.parentOffset);if((!u.node||!u.node.marks.some(B=>B.type===n))&&(u=i.parent.childBefore(i.parentOffset)),!u.node||!u.node.marks.some(B=>B.type===n)||(s=s||((a=u.node.marks[0])===null||a===void 0?void 0:a.attrs),!Yn([...u.node.marks],n,s)))return;let y=u.index,x=i.start()+u.offset,w=y+1,P=x+u.node.nodeSize;for(;y>0&&wn([...i.parent.child(y-1).marks],n,s);)y-=1,x-=i.parent.child(y).nodeSize;for(;w<i.parent.childCount&&wn([...i.parent.child(w).marks],n,s);)P+=i.parent.child(w).nodeSize,w+=1;return{from:x,to:P}}function $t(i,n){if(typeof i=="string"){if(!n.marks[i])throw Error(`There is no mark type named '${i}'. Maybe you forgot to add the extension?`);return n.marks[i]}return i}const En=(i,n={})=>({tr:s,state:a,dispatch:u})=>{const h=$t(i,a.schema),{doc:y,selection:x}=s,{$from:w,from:P,to:B}=x;if(u){const L=vn(w,h,n);if(L&&L.from<=P&&L.to>=B){const q=N.Bs.create(y,L.from,L.to);s.setSelection(q)}}return!0},Un=i=>n=>{const s=typeof i=="function"?i(n):i;for(let a=0;a<s.length;a+=1)if(s[a](n))return!0;return!1};function On(i){return i instanceof N.Bs}function Lt(i=0,n=0,s=0){return Math.min(Math.max(i,n),s)}function Tn(i,n=null){if(!n)return null;const s=N.Y1.atStart(i),a=N.Y1.atEnd(i);if(n==="start"||n===!0)return s;if(n==="end")return a;const u=s.from,h=a.to;return n==="all"?N.Bs.create(i,Lt(0,u,h),Lt(i.content.size,u,h)):N.Bs.create(i,Lt(n,u,h),Lt(n,u,h))}function Gn(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function dn(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const wr=(i=null,n={})=>({editor:s,view:a,tr:u,dispatch:h})=>{n={scrollIntoView:!0,...n};const y=()=>{(dn()||Gn())&&a.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(a.focus(),n?.scrollIntoView&&s.commands.scrollIntoView())})};if(a.hasFocus()&&i===null||i===!1)return!0;if(h&&i===null&&!On(s.state.selection))return y(),!0;const x=Tn(u.doc,i)||s.state.selection,w=s.state.selection.eq(x);return h&&(w||u.setSelection(x),w&&u.storedMarks&&u.setStoredMarks(u.storedMarks),y()),!0},Nn=(i,n)=>s=>i.every((a,u)=>n(a,{...s,index:u})),Xn=(i,n)=>({tr:s,commands:a})=>a.insertContentAt({from:s.selection.from,to:s.selection.to},i,n),Zn=i=>{const n=i.childNodes;for(let s=n.length-1;s>=0;s-=1){const a=n[s];a.nodeType===3&&a.nodeValue&&/^(\n\s\s|\n)$/.test(a.nodeValue)?i.removeChild(a):a.nodeType===1&&Zn(a)}return i};function sn(i){const n=`<body>${i}</body>`,s=new window.DOMParser().parseFromString(n,"text/html").body;return Zn(s)}function en(i,n,s){if(i instanceof de.NB||i instanceof de.HY)return i;s={slice:!0,parseOptions:{},...s};const a=typeof i=="object"&&i!==null,u=typeof i=="string";if(a)try{if(Array.isArray(i)&&i.length>0)return de.HY.fromArray(i.map(x=>n.nodeFromJSON(x)));const y=n.nodeFromJSON(i);return s.errorOnInvalidContent&&y.check(),y}catch(h){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:h});return console.warn("[tiptap warn]: Invalid content.","Passed value:",i,"Error:",h),en("",n,s)}if(u){if(s.errorOnInvalidContent){let y=!1,x="";const w=new de.V_({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:P=>(y=!0,x=typeof P=="string"?P:P.outerHTML,null)}]}})});if(s.slice?de.aw.fromSchema(w).parseSlice(sn(i),s.parseOptions):de.aw.fromSchema(w).parse(sn(i),s.parseOptions),s.errorOnInvalidContent&&y)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${x}`)})}const h=de.aw.fromSchema(n);return s.slice?h.parseSlice(sn(i),s.parseOptions).content:h.parse(sn(i),s.parseOptions)}return en("",n,s)}function Qn(i,n,s){const a=i.steps.length-1;if(a<n)return;const u=i.steps[a];if(!(u instanceof ie.Pu||u instanceof ie.FC))return;const h=i.mapping.maps[a];let y=0;h.forEach((x,w,P,B)=>{y===0&&(y=B)}),i.setSelection(N.Y1.near(i.doc.resolve(y),s))}const er=i=>!("type"in i),An=(i,n,s)=>({tr:a,dispatch:u,editor:h})=>{var y;if(u){s={parseOptions:h.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let x;const w=oe=>{h.emit("contentError",{editor:h,error:oe,disableCollaboration:()=>{h.storage.collaboration&&(h.storage.collaboration.isDisabled=!0)}})},P={preserveWhitespace:"full",...s.parseOptions};if(!s.errorOnInvalidContent&&!h.options.enableContentCheck&&h.options.emitContentError)try{en(n,h.schema,{parseOptions:P,errorOnInvalidContent:!0})}catch(oe){w(oe)}try{x=en(n,h.schema,{parseOptions:P,errorOnInvalidContent:(y=s.errorOnInvalidContent)!==null&&y!==void 0?y:h.options.enableContentCheck})}catch(oe){return w(oe),!1}let{from:B,to:L}=typeof i=="number"?{from:i,to:i}:{from:i.from,to:i.to},q=!0,V=!0;if((er(x)?x:[x]).forEach(oe=>{oe.check(),q=q?oe.isText&&oe.marks.length===0:!1,V=V?oe.isBlock:!1}),B===L&&V){const{parent:oe}=a.doc.resolve(B);oe.isTextblock&&!oe.type.spec.code&&!oe.childCount&&(B-=1,L+=1)}let X;if(q){if(Array.isArray(n))X=n.map(oe=>oe.text||"").join("");else if(n instanceof de.HY){let oe="";n.forEach(me=>{me.text&&(oe+=me.text)}),X=oe}else typeof n=="object"&&n&&n.text?X=n.text:X=n;a.insertText(X,B,L)}else X=x,a.replaceWith(B,L,X);s.updateSelection&&Qn(a,a.steps.length-1,-1),s.applyInputRules&&a.setMeta("applyInputRules",{from:B,text:X}),s.applyPasteRules&&a.setMeta("applyPasteRules",{from:B,text:X})}return!0},tr=()=>({state:i,dispatch:n})=>Re(i,n),nr=()=>({state:i,dispatch:n})=>Le(i,n),rr=()=>({state:i,dispatch:n})=>ze(i,n),ir=()=>({state:i,dispatch:n})=>fe(i,n),Dn=()=>({state:i,dispatch:n,tr:s})=>{try{const a=(0,ie.GJ)(i.doc,i.selection.$from.pos,-1);return a==null?!1:(s.join(a,2),n&&n(s),!0)}catch{return!1}},vr=()=>({state:i,dispatch:n,tr:s})=>{try{const a=(0,ie.GJ)(i.doc,i.selection.$from.pos,1);return a==null?!1:(s.join(a,2),n&&n(s),!0)}catch{return!1}},Er=()=>({state:i,dispatch:n})=>we(i,n),Or=()=>({state:i,dispatch:n})=>Ge(i,n);function sr(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Dt(i){const n=i.split(/-(?!$)/);let s=n[n.length-1];s==="Space"&&(s=" ");let a,u,h,y;for(let x=0;x<n.length-1;x+=1){const w=n[x];if(/^(cmd|meta|m)$/i.test(w))y=!0;else if(/^a(lt)?$/i.test(w))a=!0;else if(/^(c|ctrl|control)$/i.test(w))u=!0;else if(/^s(hift)?$/i.test(w))h=!0;else if(/^mod$/i.test(w))dn()||sr()?y=!0:u=!0;else throw new Error(`Unrecognized modifier name: ${w}`)}return a&&(s=`Alt-${s}`),u&&(s=`Ctrl-${s}`),y&&(s=`Meta-${s}`),h&&(s=`Shift-${s}`),s}const It=i=>({editor:n,view:s,tr:a,dispatch:u})=>{const h=Dt(i).split(/-(?!$)/),y=h.find(P=>!["Alt","Ctrl","Meta","Shift"].includes(P)),x=new KeyboardEvent("keydown",{key:y==="Space"?" ":y,altKey:h.includes("Alt"),ctrlKey:h.includes("Ctrl"),metaKey:h.includes("Meta"),shiftKey:h.includes("Shift"),bubbles:!0,cancelable:!0}),w=n.captureTransaction(()=>{s.someProp("handleKeyDown",P=>P(s,x))});return w?.steps.forEach(P=>{const B=P.map(a.mapping);B&&u&&a.maybeStep(B)}),!0};function on(i,n,s={}){const{from:a,to:u,empty:h}=i.selection,y=n?z(n,i.schema):null,x=[];i.doc.nodesBetween(a,u,(L,q)=>{if(L.isText)return;const V=Math.max(a,q),Z=Math.min(u,q+L.nodeSize);x.push({node:L,from:V,to:Z})});const w=u-a,P=x.filter(L=>y?y.name===L.node.type.name:!0).filter(L=>un(L.node.attrs,s,{strict:!1}));return h?!!P.length:P.reduce((L,q)=>L+q.to-q.from,0)>=w}const Tr=(i,n={})=>({state:s,dispatch:a})=>{const u=z(i,s.schema);return on(s,u,n)?Ne(s,a):!1},Nr=()=>({state:i,dispatch:n})=>He(i,n),Ht=i=>({state:n,dispatch:s})=>{const a=z(i,n.schema);return _e(a)(n,s)},Ar=()=>({state:i,dispatch:n})=>Pe(i,n);function tn(i,n){return n.nodes[i]?"node":n.marks[i]?"mark":null}function fn(i,n){const s=typeof n=="string"?[n]:n;return Object.keys(i).reduce((a,u)=>(s.includes(u)||(a[u]=i[u]),a),{})}const Dr=(i,n)=>({tr:s,state:a,dispatch:u})=>{let h=null,y=null;const x=tn(typeof i=="string"?i:i.name,a.schema);return x?(x==="node"&&(h=z(i,a.schema)),x==="mark"&&(y=$t(i,a.schema)),u&&s.selection.ranges.forEach(w=>{a.doc.nodesBetween(w.$from.pos,w.$to.pos,(P,B)=>{h&&h===P.type&&s.setNodeMarkup(B,void 0,fn(P.attrs,n)),y&&P.marks.length&&P.marks.forEach(L=>{y===L.type&&s.addMark(B,B+P.nodeSize,y.create(fn(L.attrs,n)))})})}),!0):!1},Ir=()=>({tr:i,dispatch:n})=>(n&&i.scrollIntoView(),!0),hn=()=>({tr:i,dispatch:n})=>{if(n){const s=new N.C1(i.doc);i.setSelection(s)}return!0},Rr=()=>({state:i,dispatch:n})=>ct(i,n),In=()=>({state:i,dispatch:n})=>Ie(i,n),nn=()=>({state:i,dispatch:n})=>ge(i,n),Pr=()=>({state:i,dispatch:n})=>xe(i,n),Br=()=>({state:i,dispatch:n})=>ae(i,n);function Rn(i,n,s={},a={}){return en(i,n,{slice:!1,parseOptions:s,errorOnInvalidContent:a.errorOnInvalidContent})}const zr=(i,n=!1,s={},a={})=>({editor:u,tr:h,dispatch:y,commands:x})=>{var w,P;const{doc:B}=h;if(s.preserveWhitespace!=="full"){const L=Rn(i,u.schema,s,{errorOnInvalidContent:(w=a.errorOnInvalidContent)!==null&&w!==void 0?w:u.options.enableContentCheck});return y&&h.replaceWith(0,B.content.size,L).setMeta("preventUpdate",!n),!0}return y&&h.setMeta("preventUpdate",!n),x.insertContentAt({from:0,to:B.content.size},i,{parseOptions:s,errorOnInvalidContent:(P=a.errorOnInvalidContent)!==null&&P!==void 0?P:u.options.enableContentCheck})};function or(i,n){const s=$t(n,i.schema),{from:a,to:u,empty:h}=i.selection,y=[];h?(i.storedMarks&&y.push(...i.storedMarks),y.push(...i.selection.$head.marks())):i.doc.nodesBetween(a,u,w=>{y.push(...w.marks)});const x=y.find(w=>w.type.name===s.name);return x?{...x.attrs}:{}}function Zr(i,n){const s=new Transform(i);return n.forEach(a=>{a.steps.forEach(u=>{s.step(u)})}),s}function Pn(i){for(let n=0;n<i.edgeCount;n+=1){const{type:s}=i.edge(n);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function Lr(i,n){const s=[];return i.descendants((a,u)=>{n(a)&&s.push({node:a,pos:u})}),s}function Qr(i,n,s){const a=[];return i.nodesBetween(n.from,n.to,(u,h)=>{s(u)&&a.push({node:u,pos:h})}),a}function lr(i,n){for(let s=i.depth;s>0;s-=1){const a=i.node(s);if(n(a))return{pos:s>0?i.before(s):0,start:i.start(s),depth:s,node:a}}}function pn(i){return n=>lr(n.$from,i)}function mn(i,n){const s=bt.resolve(i);return m(s,n)}function Fr(i,n){const s=mn(n),a=Node$1.fromJSON(s,i);return I(a.content,s)}function ei(i,n){const s=mn(n),a=sn(i);return DOMParser.fromSchema(s).parse(a).toJSON()}function ar(i,n){const s={from:0,to:i.content.size};return _t(i,s,n)}function Bn(i,n,s){const{blockSeparator:a=`

`,textSerializers:u={}}=s||{},h=mn(n),y=Node$1.fromJSON(h,i);return ar(y,{blockSeparator:a,textSerializers:{...xn(h),...u}})}function _r(i,n){const s=z(n,i.schema),{from:a,to:u}=i.selection,h=[];i.doc.nodesBetween(a,u,x=>{h.push(x)});const y=h.reverse().find(x=>x.type.name===s.name);return y?{...y.attrs}:{}}function ln(i,n){const s=tn(typeof n=="string"?n:n.name,i.schema);return s==="node"?_r(i,n):s==="mark"?or(i,n):{}}function Vr(i,n=JSON.stringify){const s={};return i.filter(a=>{const u=n(a);return Object.prototype.hasOwnProperty.call(s,u)?!1:s[u]=!0})}function $r(i){const n=Vr(i);return n.length===1?n:n.filter((s,a)=>!n.filter((h,y)=>y!==a).some(h=>s.oldRange.from>=h.oldRange.from&&s.oldRange.to<=h.oldRange.to&&s.newRange.from>=h.newRange.from&&s.newRange.to<=h.newRange.to))}function gn(i){const{mapping:n,steps:s}=i,a=[];return n.maps.forEach((u,h)=>{const y=[];if(u.ranges.length)u.forEach((x,w)=>{y.push({from:x,to:w})});else{const{from:x,to:w}=s[h];if(x===void 0||w===void 0)return;y.push({from:x,to:w})}y.forEach(({from:x,to:w})=>{const P=n.slice(h).map(x,-1),B=n.slice(h).map(w),L=n.invert().map(P,-1),q=n.invert().map(B);a.push({oldRange:{from:L,to:q},newRange:{from:P,to:B}})})}),$r(a)}function cr(i,n=0){const a=i.type===i.type.schema.topNodeType?0:1,u=n,h=u+i.nodeSize,y=i.marks.map(P=>{const B={type:P.type.name};return Object.keys(P.attrs).length&&(B.attrs={...P.attrs}),B}),x={...i.attrs},w={type:i.type.name,from:u,to:h};return Object.keys(x).length&&(w.attrs=x),y.length&&(w.marks=y),i.content.childCount&&(w.content=[],i.forEach((P,B)=>{var L;(L=w.content)===null||L===void 0||L.push(cr(P,n+B+a))})),i.text&&(w.text=i.text),w}function zn(i,n,s){const a=[];return i===n?s.resolve(i).marks().forEach(u=>{const h=s.resolve(i),y=vn(h,u.type);y&&a.push({mark:u,...y})}):s.nodesBetween(i,n,(u,h)=>{!u||u?.nodeSize===void 0||a.push(...u.marks.map(y=>({from:h,to:h+u.nodeSize,mark:y})))}),a}const ti=(i,n,s,a=20)=>{const u=i.doc.resolve(s);let h=a,y=null;for(;h>0&&y===null;){const x=u.node(h);x?.type.name===n?y=x:h-=1}return[y,h]};function an(i,n,s){return Object.fromEntries(Object.entries(s).filter(([a])=>{const u=i.find(h=>h.type===n&&h.name===a);return u?u.attribute.keepOnSplit:!1}))}function Jt(i,n,s={}){const{empty:a,ranges:u}=i.selection,h=n?$t(n,i.schema):null;if(a)return!!(i.storedMarks||i.selection.$from.marks()).filter(L=>h?h.name===L.type.name:!0).find(L=>un(L.attrs,s,{strict:!1}));let y=0;const x=[];if(u.forEach(({$from:L,$to:q})=>{const V=L.pos,Z=q.pos;i.doc.nodesBetween(V,Z,(X,oe)=>{if(!X.isText&&!X.marks.length)return;const me=Math.max(V,oe),Je=Math.min(Z,oe+X.nodeSize),Qe=Je-me;y+=Qe,x.push(...X.marks.map(Mt=>({mark:Mt,from:me,to:Je})))})}),y===0)return!1;const w=x.filter(L=>h?h.name===L.mark.type.name:!0).filter(L=>un(L.mark.attrs,s,{strict:!1})).reduce((L,q)=>L+q.to-q.from,0),P=x.filter(L=>h?L.mark.type!==h&&L.mark.type.excludes(h):!0).reduce((L,q)=>L+q.to-q.from,0);return(w>0?w+P:w)>=y}function yn(i,n,s={}){if(!n)return on(i,null,s)||Jt(i,null,s);const a=tn(n,i.schema);return a==="node"?on(i,n,s):a==="mark"?Jt(i,n,s):!1}const Yt=(i,n)=>{const{$from:s,$to:a,$anchor:u}=i.selection;if(n){const h=pn(x=>x.type.name===n)(i.selection);if(!h)return!1;const y=i.doc.resolve(h.pos+1);return u.pos+1===y.end()}return!(a.parentOffset<a.parent.nodeSize-2||s.pos!==a.pos)},ur=i=>{const{$from:n,$to:s}=i.selection;return!(n.parentOffset>0||n.pos!==s.pos)};function Pt(i,n){const{nodeExtensions:s}=M(n),a=s.find(y=>y.name===i);if(!a)return!1;const u={name:a.name,options:a.options,storage:a.storage},h=ee(p(a,"group",u));return typeof h!="string"?!1:h.split(" ").includes("list")}function Wt(i,{checkChildren:n=!0,ignoreWhitespace:s=!1}={}){var a;if(s){if(i.type.name==="hardBreak")return!0;if(i.isText)return/^\s*$/m.test((a=i.text)!==null&&a!==void 0?a:"")}if(i.isText)return!i.text;if(i.isAtom||i.isLeaf)return!1;if(i.content.childCount===0)return!0;if(n){let u=!0;return i.content.forEach(h=>{u!==!1&&(Wt(h,{ignoreWhitespace:s,checkChildren:n})||(u=!1))}),u}return!1}function Ut(i){return i instanceof N.qv}function wt(i,n,s){const u=i.state.doc.content.size,h=Lt(n,0,u),y=Lt(s,0,u),x=i.coordsAtPos(h),w=i.coordsAtPos(y,-1),P=Math.min(x.top,w.top),B=Math.max(x.bottom,w.bottom),L=Math.min(x.left,w.left),q=Math.max(x.right,w.right),V=q-L,Z=B-P,me={top:P,bottom:B,left:L,right:q,width:V,height:Z,x:L,y:P};return{...me,toJSON:()=>me}}function vt({json:i,validMarks:n,validNodes:s,options:a,rewrittenContent:u=[]}){return i.marks&&Array.isArray(i.marks)&&(i.marks=i.marks.filter(h=>{const y=typeof h=="string"?h:h.type;return n.has(y)?!0:(u.push({original:JSON.parse(JSON.stringify(h)),unsupported:y}),!1)})),i.content&&Array.isArray(i.content)&&(i.content=i.content.map(h=>vt({json:h,validMarks:n,validNodes:s,options:a,rewrittenContent:u}).json).filter(h=>h!=null)),i.type&&!s.has(i.type)?(u.push({original:JSON.parse(JSON.stringify(i)),unsupported:i.type}),i.content&&Array.isArray(i.content)&&a?.fallbackToParagraph!==!1?(i.type="paragraph",{json:i,rewrittenContent:u}):{json:null,rewrittenContent:u}):{json:i,rewrittenContent:u}}function Gt(i,n,s){return vt({json:i,validNodes:new Set(Object.keys(n.nodes)),validMarks:new Set(Object.keys(n.marks)),options:s})}function Hr(i,n,s){var a;const{selection:u}=n;let h=null;if(On(u)&&(h=u.$cursor),h){const x=(a=i.storedMarks)!==null&&a!==void 0?a:h.marks();return!!s.isInSet(x)||!x.some(w=>w.type.excludes(s))}const{ranges:y}=u;return y.some(({$from:x,$to:w})=>{let P=x.depth===0?i.doc.inlineContent&&i.doc.type.allowsMarkType(s):!1;return i.doc.nodesBetween(x.pos,w.pos,(B,L,q)=>{if(P)return!1;if(B.isInline){const V=!q||q.type.allowsMarkType(s),Z=!!s.isInSet(B.marks)||!B.marks.some(X=>X.type.excludes(s));P=V&&Z}return!P}),P})}const dr=(i,n={})=>({tr:s,state:a,dispatch:u})=>{const{selection:h}=s,{empty:y,ranges:x}=h,w=$t(i,a.schema);if(u)if(y){const P=or(a,w);s.addStoredMark(w.create({...P,...n}))}else x.forEach(P=>{const B=P.$from.pos,L=P.$to.pos;a.doc.nodesBetween(B,L,(q,V)=>{const Z=Math.max(V,B),X=Math.min(V+q.nodeSize,L);q.marks.find(me=>me.type===w)?q.marks.forEach(me=>{w===me.type&&s.addMark(Z,X,w.create({...me.attrs,...n}))}):s.addMark(Z,X,w.create(n))})});return Hr(a,s,w)},Wr=(i,n)=>({tr:s})=>(s.setMeta(i,n),!0),fr=(i,n={})=>({state:s,dispatch:a,chain:u})=>{const h=z(i,s.schema);let y;return s.selection.$anchor.sameParent(s.selection.$head)&&(y=s.selection.$anchor.parent.attrs),h.isTextblock?u().command(({commands:x})=>je(h,{...y,...n})(s)?!0:x.clearNodes()).command(({state:x})=>je(h,{...y,...n})(x,a)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},hr=i=>({tr:n,dispatch:s})=>{if(s){const{doc:a}=n,u=Lt(i,0,a.content.size),h=N.qv.create(a,u);n.setSelection(h)}return!0},bn=i=>({tr:n,dispatch:s})=>{if(s){const{doc:a}=n,{from:u,to:h}=typeof i=="number"?{from:i,to:i}:i,y=N.Bs.atStart(a).from,x=N.Bs.atEnd(a).to,w=Lt(u,y,x),P=Lt(h,y,x),B=N.Bs.create(a,w,P);n.setSelection(B)}return!0},Xt=i=>({state:n,dispatch:s})=>{const a=z(i,n.schema);return Ze(a)(n,s)};function Sn(i,n){const s=i.storedMarks||i.selection.$to.parentOffset&&i.selection.$from.marks();if(s){const a=s.filter(u=>n?.includes(u.type.name));i.tr.ensureMarks(a)}}const pr=({keepMarks:i=!0}={})=>({tr:n,state:s,dispatch:a,editor:u})=>{const{selection:h,doc:y}=n,{$from:x,$to:w}=h,P=u.extensionManager.attributes,B=an(P,x.node().type.name,x.node().attrs);if(h instanceof N.qv&&h.node.isBlock)return!x.parentOffset||!(0,ie.Ax)(y,x.pos)?!1:(a&&(i&&Sn(s,u.extensionManager.splittableMarks),n.split(x.pos).scrollIntoView()),!0);if(!x.parent.isBlock)return!1;const L=w.parentOffset===w.parent.content.size,q=x.depth===0?void 0:Pn(x.node(-1).contentMatchAt(x.indexAfter(-1)));let V=L&&q?[{type:q,attrs:B}]:void 0,Z=(0,ie.Ax)(n.doc,n.mapping.map(x.pos),1,V);if(!V&&!Z&&(0,ie.Ax)(n.doc,n.mapping.map(x.pos),1,q?[{type:q}]:void 0)&&(Z=!0,V=q?[{type:q,attrs:B}]:void 0),a){if(Z&&(h instanceof N.Bs&&n.deleteSelection(),n.split(n.mapping.map(x.pos),1,V),q&&!L&&!x.parentOffset&&x.parent.type!==q)){const X=n.mapping.map(x.before()),oe=n.doc.resolve(X);x.node(-1).canReplaceWith(oe.index(),oe.index()+1,q)&&n.setNodeMarkup(n.mapping.map(x.before()),q)}i&&Sn(s,u.extensionManager.splittableMarks),n.scrollIntoView()}return Z},Ln=(i,n={})=>({tr:s,state:a,dispatch:u,editor:h})=>{var y;const x=z(i,a.schema),{$from:w,$to:P}=a.selection,B=a.selection.node;if(B&&B.isBlock||w.depth<2||!w.sameParent(P))return!1;const L=w.node(-1);if(L.type!==x)return!1;const q=h.extensionManager.attributes;if(w.parent.content.size===0&&w.node(-1).childCount===w.indexAfter(-1)){if(w.depth===2||w.node(-3).type!==x||w.index(-2)!==w.node(-2).childCount-1)return!1;if(u){let me=de.HY.empty;const Je=w.index(-1)?1:w.index(-2)?2:3;for(let jt=w.depth-Je;jt>=w.depth-3;jt-=1)me=de.HY.from(w.node(jt).copy(me));const Qe=w.indexAfter(-1)<w.node(-2).childCount?1:w.indexAfter(-2)<w.node(-3).childCount?2:3,Mt={...an(q,w.node().type.name,w.node().attrs),...n},pt=((y=x.contentMatch.defaultType)===null||y===void 0?void 0:y.createAndFill(Mt))||void 0;me=me.append(de.HY.from(x.createAndFill(null,pt)||void 0));const Bt=w.before(w.depth-(Je-1));s.replace(Bt,w.after(-Qe),new de.p2(me,4-Je,0));let Kt=-1;s.doc.nodesBetween(Bt,s.doc.content.size,(jt,ui)=>{if(Kt>-1)return!1;jt.isTextblock&&jt.content.size===0&&(Kt=ui+1)}),Kt>-1&&s.setSelection(N.Bs.near(s.doc.resolve(Kt))),s.scrollIntoView()}return!0}const V=P.pos===w.end()?L.contentMatchAt(0).defaultType:null,Z={...an(q,L.type.name,L.attrs),...n},X={...an(q,w.node().type.name,w.node().attrs),...n};s.delete(w.pos,P.pos);const oe=V?[{type:x,attrs:Z},{type:V,attrs:X}]:[{type:x,attrs:Z}];if(!(0,ie.Ax)(s.doc,w.pos,2))return!1;if(u){const{selection:me,storedMarks:Je}=a,{splittableMarks:Qe}=h.extensionManager,Mt=Je||me.$to.parentOffset&&me.$from.marks();if(s.split(w.pos,2,oe).scrollIntoView(),!Mt||!u)return!0;const pt=Mt.filter(Bt=>Qe.includes(Bt.type.name));s.ensureMarks(pt)}return!0},Fn=(i,n)=>{const s=pn(y=>y.type===n)(i.selection);if(!s)return!0;const a=i.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(a===void 0)return!0;const u=i.doc.nodeAt(a);return s.node.type===u?.type&&(0,ie.Mn)(i.doc,s.pos)&&i.join(s.pos),!0},_n=(i,n)=>{const s=pn(y=>y.type===n)(i.selection);if(!s)return!0;const a=i.doc.resolve(s.start).after(s.depth);if(a===void 0)return!0;const u=i.doc.nodeAt(a);return s.node.type===u?.type&&(0,ie.Mn)(i.doc,a)&&i.join(a),!0};var Jr=Object.freeze({__proto__:null,blur:Wn,clearContent:qn,clearNodes:Mn,command:Kn,createParagraphNear:jn,cut:Cr,deleteCurrentNode:Cn,deleteNode:Vt,deleteRange:Jn,deleteSelection:cn,enter:rn,exitCode:Qt,extendMarkRange:En,first:Un,focus:wr,forEach:Nn,insertContent:Xn,insertContentAt:An,joinBackward:rr,joinDown:nr,joinForward:ir,joinItemBackward:Dn,joinItemForward:vr,joinTextblockBackward:Er,joinTextblockForward:Or,joinUp:tr,keyboardShortcut:It,lift:Tr,liftEmptyBlock:Nr,liftListItem:Ht,newlineInCode:Ar,resetAttributes:Dr,scrollIntoView:Ir,selectAll:hn,selectNodeBackward:Rr,selectNodeForward:In,selectParentNode:nn,selectTextblockEnd:Pr,selectTextblockStart:Br,setContent:zr,setMark:dr,setMeta:Wr,setNode:fr,setNodeSelection:hr,setTextSelection:bn,sinkListItem:Xt,splitBlock:pr,splitListItem:Ln,toggleList:(i,n,s,a={})=>({editor:u,tr:h,state:y,dispatch:x,chain:w,commands:P,can:B})=>{const{extensions:L,splittableMarks:q}=u.extensionManager,V=z(i,y.schema),Z=z(n,y.schema),{selection:X,storedMarks:oe}=y,{$from:me,$to:Je}=X,Qe=me.blockRange(Je),Mt=oe||X.$to.parentOffset&&X.$from.marks();if(!Qe)return!1;const pt=pn(Bt=>Pt(Bt.type.name,L))(X);if(Qe.depth>=1&&pt&&Qe.depth-pt.depth<=1){if(pt.node.type===V)return P.liftListItem(Z);if(Pt(pt.node.type.name,L)&&V.validContent(pt.node.content)&&x)return w().command(()=>(h.setNodeMarkup(pt.pos,V),!0)).command(()=>Fn(h,V)).command(()=>_n(h,V)).run()}return!s||!Mt||!x?w().command(()=>B().wrapInList(V,a)?!0:P.clearNodes()).wrapInList(V,a).command(()=>Fn(h,V)).command(()=>_n(h,V)).run():w().command(()=>{const Bt=B().wrapInList(V,a),Kt=Mt.filter(jt=>q.includes(jt.type.name));return h.ensureMarks(Kt),Bt?!0:P.clearNodes()}).wrapInList(V,a).command(()=>Fn(h,V)).command(()=>_n(h,V)).run()},toggleMark:(i,n={},s={})=>({state:a,commands:u})=>{const{extendEmptyMarkRange:h=!1}=s,y=$t(i,a.schema);return Jt(a,y,n)?u.unsetMark(y,{extendEmptyMarkRange:h}):u.setMark(y,n)},toggleNode:(i,n,s={})=>({state:a,commands:u})=>{const h=z(i,a.schema),y=z(n,a.schema),x=on(a,h,s);let w;return a.selection.$anchor.sameParent(a.selection.$head)&&(w=a.selection.$anchor.parent.attrs),x?u.setNode(y,w):u.setNode(h,{...w,...s})},toggleWrap:(i,n={})=>({state:s,commands:a})=>{const u=z(i,s.schema);return on(s,u,n)?a.lift(u):a.wrapIn(u,n)},undoInputRule:()=>({state:i,dispatch:n})=>{const s=i.plugins;for(let a=0;a<s.length;a+=1){const u=s[a];let h;if(u.spec.isInputRules&&(h=u.getState(i))){if(n){const y=i.tr,x=h.transform;for(let w=x.steps.length-1;w>=0;w-=1)y.step(x.steps[w].invert(x.docs[w]));if(h.text){const w=y.doc.resolve(h.from).marks();y.replaceWith(h.from,h.to,i.schema.text(h.text,w))}else y.delete(h.from,h.to)}return!0}}return!1},unsetAllMarks:()=>({tr:i,dispatch:n})=>{const{selection:s}=i,{empty:a,ranges:u}=s;return a||n&&u.forEach(h=>{i.removeMark(h.$from.pos,h.$to.pos)}),!0},unsetMark:(i,n={})=>({tr:s,state:a,dispatch:u})=>{var h;const{extendEmptyMarkRange:y=!1}=n,{selection:x}=s,w=$t(i,a.schema),{$from:P,empty:B,ranges:L}=x;if(!u)return!0;if(B&&y){let{from:q,to:V}=x;const Z=(h=P.marks().find(oe=>oe.type===w))===null||h===void 0?void 0:h.attrs,X=vn(P,w,Z);X&&(q=X.from,V=X.to),s.removeMark(q,V,w)}else L.forEach(q=>{s.removeMark(q.$from.pos,q.$to.pos,w)});return s.removeStoredMark(w),!0},updateAttributes:(i,n={})=>({tr:s,state:a,dispatch:u})=>{let h=null,y=null;const x=tn(typeof i=="string"?i:i.name,a.schema);return x?(x==="node"&&(h=z(i,a.schema)),x==="mark"&&(y=$t(i,a.schema)),u&&s.selection.ranges.forEach(w=>{const P=w.$from.pos,B=w.$to.pos;let L,q,V,Z;s.selection.empty?a.doc.nodesBetween(P,B,(X,oe)=>{h&&h===X.type&&(V=Math.max(oe,P),Z=Math.min(oe+X.nodeSize,B),L=oe,q=X)}):a.doc.nodesBetween(P,B,(X,oe)=>{oe<P&&h&&h===X.type&&(V=Math.max(oe,P),Z=Math.min(oe+X.nodeSize,B),L=oe,q=X),oe>=P&&oe<=B&&(h&&h===X.type&&s.setNodeMarkup(oe,void 0,{...X.attrs,...n}),y&&X.marks.length&&X.marks.forEach(me=>{if(y===me.type){const Je=Math.max(oe,P),Qe=Math.min(oe+X.nodeSize,B);s.addMark(Je,Qe,y.create({...me.attrs,...n}))}}))}),q&&(L!==void 0&&s.setNodeMarkup(L,void 0,{...q.attrs,...n}),y&&q.marks.length&&q.marks.forEach(X=>{y===X.type&&s.addMark(V,Z,y.create({...X.attrs,...n}))}))}),!0):!1},wrapIn:(i,n={})=>({state:s,dispatch:a})=>{const u=z(i,s.schema);return Oe(u,n)(s,a)},wrapInList:(i,n={})=>({state:s,dispatch:a})=>{const u=z(i,s.schema);return ne(u,n)(s,a)}});const mr=St.create({name:"commands",addCommands(){return{...Jr}}}),Vn=St.create({name:"drop",addProseMirrorPlugins(){return[new N.Sy({key:new N.H$("tiptapDrop"),props:{handleDrop:(i,n,s,a)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:s,moved:a})}}})]}}),gr=St.create({name:"editable",addProseMirrorPlugins(){return[new N.Sy({key:new N.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),yr=new N.H$("focusEvents"),kn=St.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:i}=this;return[new N.Sy({key:yr,props:{handleDOMEvents:{focus:(n,s)=>{i.isFocused=!0;const a=i.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return n.dispatch(a),!1},blur:(n,s)=>{i.isFocused=!1;const a=i.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return n.dispatch(a),!1}}}})]}}),br=St.create({name:"keymap",addKeyboardShortcuts(){const i=()=>this.editor.commands.first(({commands:y})=>[()=>y.undoInputRule(),()=>y.command(({tr:x})=>{const{selection:w,doc:P}=x,{empty:B,$anchor:L}=w,{pos:q,parent:V}=L,Z=L.parent.isTextblock&&q>0?x.doc.resolve(q-1):L,X=Z.parent.type.spec.isolating,oe=L.pos-L.parentOffset,me=X&&Z.parent.childCount===1?oe===L.pos:N.Y1.atStart(P).from===q;return!B||!V.type.isTextblock||V.textContent.length||!me||me&&L.parent.type.name==="paragraph"?!1:y.clearNodes()}),()=>y.deleteSelection(),()=>y.joinBackward(),()=>y.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:y})=>[()=>y.deleteSelection(),()=>y.deleteCurrentNode(),()=>y.joinForward(),()=>y.selectNodeForward()]),a={Enter:()=>this.editor.commands.first(({commands:y})=>[()=>y.newlineInCode(),()=>y.createParagraphNear(),()=>y.liftEmptyBlock(),()=>y.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:i,"Mod-Backspace":i,"Shift-Backspace":i,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},u={...a},h={...a,"Ctrl-h":i,"Alt-Backspace":i,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return dn()||sr()?h:u},addProseMirrorPlugins(){return[new N.Sy({key:new N.H$("clearDocument"),appendTransaction:(i,n,s)=>{if(i.some(X=>X.getMeta("composition")))return;const a=i.some(X=>X.docChanged)&&!n.doc.eq(s.doc),u=i.some(X=>X.getMeta("preventClearDocument"));if(!a||u)return;const{empty:h,from:y,to:x}=n.selection,w=N.Y1.atStart(n.doc).from,P=N.Y1.atEnd(n.doc).to;if(h||!(y===w&&x===P)||!Wt(s.doc))return;const q=s.tr,V=ft({state:s,transaction:q}),{commands:Z}=new F({editor:this.editor,state:V});if(Z.clearNodes(),!!q.steps.length)return q}})]}}),$n=St.create({name:"paste",addProseMirrorPlugins(){return[new N.Sy({key:new N.H$("tiptapPaste"),props:{handlePaste:(i,n,s)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:s})}}})]}}),Yr=St.create({name:"tabindex",addProseMirrorPlugins(){return[new N.Sy({key:new N.H$("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var ci=Object.freeze({__proto__:null,ClipboardTextSerializer:Hn,Commands:mr,Drop:Vn,Editable:gr,FocusEvents:kn,Keymap:br,Paste:$n,Tabindex:Yr,focusEventsPluginKey:yr});class qt{get name(){return this.node.type.name}constructor(n,s,a=!1,u=null){this.currentNode=null,this.actualDepth=null,this.isBlock=a,this.resolvedPos=n,this.editor=s,this.currentNode=u}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var n;return(n=this.actualDepth)!==null&&n!==void 0?n:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(n){let s=this.from,a=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}s=this.from+1,a=this.to-1}this.editor.commands.insertContentAt({from:s,to:a},n)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const n=this.resolvedPos.start(this.resolvedPos.depth-1),s=this.resolvedPos.doc.resolve(n);return new qt(s,this.editor)}get before(){let n=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return n.depth!==this.depth&&(n=this.resolvedPos.doc.resolve(this.from-3)),new qt(n,this.editor)}get after(){let n=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return n.depth!==this.depth&&(n=this.resolvedPos.doc.resolve(this.to+3)),new qt(n,this.editor)}get children(){const n=[];return this.node.content.forEach((s,a)=>{const u=s.isBlock&&!s.isTextblock,h=s.isAtom&&!s.isText,y=this.pos+a+(h?0:1);if(y<0||y>this.resolvedPos.doc.nodeSize-2)return;const x=this.resolvedPos.doc.resolve(y);if(!u&&x.depth<=this.depth)return;const w=new qt(x,this.editor,u,u?s:null);u&&(w.actualDepth=this.depth+1),n.push(new qt(x,this.editor,u,u?s:null))}),n}get firstChild(){return this.children[0]||null}get lastChild(){const n=this.children;return n[n.length-1]||null}closest(n,s={}){let a=null,u=this.parent;for(;u&&!a;){if(u.node.type.name===n)if(Object.keys(s).length>0){const h=u.node.attrs,y=Object.keys(s);for(let x=0;x<y.length;x+=1){const w=y[x];if(h[w]!==s[w])break}}else a=u;u=u.parent}return a}querySelector(n,s={}){return this.querySelectorAll(n,s,!0)[0]||null}querySelectorAll(n,s={},a=!1){let u=[];if(!this.children||this.children.length===0)return u;const h=Object.keys(s);return this.children.forEach(y=>{a&&u.length>0||(y.node.type.name===n&&h.every(w=>s[w]===y.node.attrs[w])&&u.push(y),!(a&&u.length>0)&&(u=u.concat(y.querySelectorAll(n,s,a))))}),u}setAttribute(n){const{tr:s}=this.editor.state;s.setNodeMarkup(this.from,void 0,{...this.node.attrs,...n}),this.editor.view.dispatch(s)}}const Sr=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function kr(i,n,s){const a=document.querySelector(`style[data-tiptap-style${s?`-${s}`:""}]`);if(a!==null)return a;const u=document.createElement("style");return n&&u.setAttribute("nonce",n),u.setAttribute(`data-tiptap-style${s?`-${s}`:""}`,""),u.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(u),u}class xr extends g{constructor(n={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:a,moved:u})=>this.options.onDrop(s,a,u)),this.on("paste",({event:s,slice:a})=>this.options.onPaste(s,a)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=kr(Sr,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,s=!0){this.setOptions({editable:n}),s&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(n,s){const a=re(s)?s(n,[...this.state.plugins]):[...this.state.plugins,n],u=this.state.reconfigure({plugins:a});return this.view.updateState(u),u}unregisterPlugin(n){if(this.isDestroyed)return;const s=this.state.plugins;let a=s;if([].concat(n).forEach(h=>{const y=typeof h=="string"?`${h}$`:h.key;a=a.filter(x=>!x.key.startsWith(y))}),s.length===a.length)return;const u=this.state.reconfigure({plugins:a});return this.view.updateState(u),u}createExtensionManager(){var n,s;const u=[...this.options.enableCoreExtensions?[gr,Hn.configure({blockSeparator:(s=(n=this.options.coreExtensionOptions)===null||n===void 0?void 0:n.clipboardTextSerializer)===null||s===void 0?void 0:s.blockSeparator}),mr,kn,br,Yr,Vn,$n].filter(h=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[h.name]!==!1:!0):[],...this.options.extensions].filter(h=>["extension","node","mark"].includes(h?.type));this.extensionManager=new bt(u,this)}createCommandManager(){this.commandManager=new F({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var n;let s;try{s=Rn(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(y){if(!(y instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(y.message))throw y;this.emit("contentError",{editor:this,error:y,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(x=>x.name!=="collaboration"),this.createExtensionManager()}}),s=Rn(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const a=Tn(s,this.options.autofocus);this.view=new De.tk(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(n=this.options.editorProps)===null||n===void 0?void 0:n.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:N.yy.create({doc:s,selection:a||void 0})});const u=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(u),this.createNodeViews(),this.prependClass();const h=this.view.dom;h.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const s=this.capturedTransaction;return this.capturedTransaction=null,s}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(y=>{var x;return(x=this.capturedTransaction)===null||x===void 0?void 0:x.step(y)});return}const s=this.state.apply(n),a=!this.state.selection.eq(s.selection);this.emit("beforeTransaction",{editor:this,transaction:n,nextState:s}),this.view.updateState(s),this.emit("transaction",{editor:this,transaction:n}),a&&this.emit("selectionUpdate",{editor:this,transaction:n});const u=n.getMeta("focus"),h=n.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:n}),h&&this.emit("blur",{editor:this,event:h.event,transaction:n}),!(!n.docChanged||n.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:n})}getAttributes(n){return ln(this.state,n)}isActive(n,s){const a=typeof n=="string"?n:null,u=typeof n=="string"?s:n;return yn(this.state,a,u)}getJSON(){return this.state.doc.toJSON()}getHTML(){return I(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:s=`

`,textSerializers:a={}}=n||{};return ar(this.state.doc,{blockSeparator:s,textSerializers:{...xn(this.schema),...a}})}get isEmpty(){return Wt(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const n=this.view.dom;n&&n.editor&&delete n.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var n;return!(!((n=this.view)===null||n===void 0)&&n.docView)}$node(n,s){var a;return((a=this.$doc)===null||a===void 0?void 0:a.querySelector(n,s))||null}$nodes(n,s){var a;return((a=this.$doc)===null||a===void 0?void 0:a.querySelectorAll(n,s))||null}$pos(n){const s=this.state.doc.resolve(n);return new qt(s,this)}get $doc(){return this.$pos(0)}}function Ur(i){return new he({find:i.find,handler:({state:n,range:s,match:a})=>{const u=ee(i.getAttributes,void 0,a);if(u===!1||u===null)return null;const{tr:h}=n,y=a[a.length-1],x=a[0];if(y){const w=x.search(/\S/),P=s.from+x.indexOf(y),B=P+y.length;if(zn(s.from,s.to,n.doc).filter(V=>V.mark.type.excluded.find(X=>X===i.type&&X!==V.mark.type)).filter(V=>V.to>P).length)return null;B<s.to&&h.delete(B,s.to),P>s.from&&h.delete(s.from+w,P);const q=s.from+w+y.length;h.addMark(s.from+w,q,i.type.create(u||{})),h.removeStoredMark(i.type)}}})}function Mr(i){return new he({find:i.find,handler:({state:n,range:s,match:a})=>{const u=ee(i.getAttributes,void 0,a)||{},{tr:h}=n,y=s.from;let x=s.to;const w=i.type.create(u);if(a[1]){const P=a[0].lastIndexOf(a[1]);let B=y+P;B>x?B=x:x=B+a[1].length;const L=a[0][a[0].length-1];h.insertText(L,y+a[0].length-1),h.replaceWith(B,x,w)}else if(a[0]){const P=i.type.isInline?y:y-1;h.insert(P,i.type.create(u)).delete(h.mapping.map(y),h.mapping.map(x))}h.scrollIntoView()}})}function Gr(i){return new he({find:i.find,handler:({state:n,range:s,match:a})=>{const u=n.doc.resolve(s.from),h=ee(i.getAttributes,void 0,a)||{};if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),i.type))return null;n.tr.delete(s.from,s.to).setBlockType(s.from,s.from,i.type,h)}})}function Xr(i){return new he({find:i.find,handler:({state:n,range:s,match:a})=>{let u=i.replace,h=s.from;const y=s.to;if(a[1]){const x=a[0].lastIndexOf(a[1]);u+=a[0].slice(x+a[1].length),h+=x;const w=h-y;w>0&&(u=a[0].slice(x-w,x)+u,h=y)}n.tr.insertText(u,h,y)}})}function t(i){return new he({find:i.find,handler:({state:n,range:s,match:a,chain:u})=>{const h=ee(i.getAttributes,void 0,a)||{},y=n.tr.delete(s.from,s.to),w=y.doc.resolve(s.from).blockRange(),P=w&&(0,ie.nd)(w,i.type,h);if(!P)return null;if(y.wrap(w,P),i.keepMarks&&i.editor){const{selection:L,storedMarks:q}=n,{splittableMarks:V}=i.editor.extensionManager,Z=q||L.$to.parentOffset&&L.$from.marks();if(Z){const X=Z.filter(oe=>V.includes(oe.type.name));y.ensureMarks(X)}}if(i.keepAttributes){const L=i.type.name==="bulletList"||i.type.name==="orderedList"?"listItem":"taskList";u().updateAttributes(L,h).run()}const B=y.doc.resolve(s.from-1).nodeBefore;B&&B.type===i.type&&(0,ie.Mn)(y.doc,s.from-1)&&(!i.joinPredicate||i.joinPredicate(a,B))&&y.join(s.from-1)}})}class e{constructor(n={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ee(p(this,"addOptions",{name:this.name}))),this.storage=ee(p(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new e(n)}configure(n={}){const s=this.extend({...this.config,addOptions:()=>Y(this.options,n)});return s.name=this.name,s.parent=this.parent,s}extend(n={}){const s=new e(n);return s.parent=this,this.child=s,s.name=n.name?n.name:s.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=ee(p(s,"addOptions",{name:s.name})),s.storage=ee(p(s,"addStorage",{name:s.name,options:s.options})),s}}class r{constructor(n,s,a){this.isDragging=!1,this.component=n,this.editor=s.editor,this.options={stopEvent:null,ignoreMutation:null,...a},this.extension=s.extension,this.node=s.node,this.decorations=s.decorations,this.innerDecorations=s.innerDecorations,this.view=s.view,this.HTMLAttributes=s.HTMLAttributes,this.getPos=s.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(n){var s,a,u,h,y,x,w;const{view:P}=this.editor,B=n.target,L=B.nodeType===3?(s=B.parentElement)===null||s===void 0?void 0:s.closest("[data-drag-handle]"):B.closest("[data-drag-handle]");if(!this.dom||!((a=this.contentDOM)===null||a===void 0)&&a.contains(B)||!L)return;let q=0,V=0;if(this.dom!==L){const Je=this.dom.getBoundingClientRect(),Qe=L.getBoundingClientRect(),Mt=(u=n.offsetX)!==null&&u!==void 0?u:(h=n.nativeEvent)===null||h===void 0?void 0:h.offsetX,pt=(y=n.offsetY)!==null&&y!==void 0?y:(x=n.nativeEvent)===null||x===void 0?void 0:x.offsetY;q=Qe.x-Je.x+Mt,V=Qe.y-Je.y+pt}const Z=this.dom.cloneNode(!0);(w=n.dataTransfer)===null||w===void 0||w.setDragImage(Z,q,V);const X=this.getPos();if(typeof X!="number")return;const oe=NodeSelection.create(P.state.doc,X),me=P.state.tr.setSelection(oe);P.dispatch(me)}stopEvent(n){var s;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:n});const a=n.target;if(!(this.dom.contains(a)&&!(!((s=this.contentDOM)===null||s===void 0)&&s.contains(a))))return!1;const h=n.type.startsWith("drag"),y=n.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(a.tagName)||a.isContentEditable)&&!y&&!h)return!0;const{isEditable:w}=this.editor,{isDragging:P}=this,B=!!this.node.type.spec.draggable,L=NodeSelection.isSelectable(this.node),q=n.type==="copy",V=n.type==="paste",Z=n.type==="cut",X=n.type==="mousedown";if(!B&&L&&h&&n.target===this.dom&&n.preventDefault(),B&&h&&!P&&n.target===this.dom)return n.preventDefault(),!1;if(B&&w&&!P&&X){const oe=a.closest("[data-drag-handle]");oe&&(this.dom===oe||this.dom.contains(oe))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(P||y||q||V||Z||X&&L)}ignoreMutation(n){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:n}):this.node.isLeaf||this.node.isAtom?!0:n.type==="selection"||this.dom.contains(n.target)&&n.type==="childList"&&(dn()||Gn())&&this.editor.isFocused&&[...Array.from(n.addedNodes),...Array.from(n.removedNodes)].every(a=>a.isContentEditable)?!1:this.contentDOM===n.target&&n.type==="attributes"?!0:!this.contentDOM.contains(n.target)}updateAttributes(n){this.editor.commands.command(({tr:s})=>{const a=this.getPos();return typeof a!="number"?!1:(s.setNodeMarkup(a,void 0,{...this.node.attrs,...n}),!0)})}deleteNode(){const n=this.getPos();if(typeof n!="number")return;const s=n+this.node.nodeSize;this.editor.commands.deleteRange({from:n,to:s})}}function l(i){return new Se({find:i.find,handler:({state:n,range:s,match:a,pasteEvent:u})=>{const h=ee(i.getAttributes,void 0,a,u);if(h===!1||h===null)return null;const{tr:y}=n,x=a[a.length-1],w=a[0];let P=s.to;if(x){const B=w.search(/\S/),L=s.from+w.indexOf(x),q=L+x.length;if(zn(s.from,s.to,n.doc).filter(Z=>Z.mark.type.excluded.find(oe=>oe===i.type&&oe!==Z.mark.type)).filter(Z=>Z.to>L).length)return null;q<s.to&&y.delete(q,s.to),L>s.from&&y.delete(s.from+B,L),P=s.from+B+x.length,y.addMark(s.from+B,P,i.type.create(h||{})),y.removeStoredMark(i.type)}}})}function d(i,n){const{selection:s}=i,{$from:a}=s;if(s instanceof N.qv){const h=a.index();return a.parent.canReplaceWith(h,h+1,n)}let u=a.depth;for(;u>=0;){const h=a.index(u);if(a.node(u).contentMatchAt(h).matchType(n))return!0;u-=1}return!1}function f(i){return i.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function b(i){return typeof i=="string"}function S(i){return new Se({find:i.find,handler({match:n,chain:s,range:a,pasteEvent:u}){const h=ee(i.getAttributes,void 0,n,u),y=ee(i.getContent,void 0,h);if(h===!1||h===null)return null;const x={type:i.type.name,attrs:h};y&&(x.content=y),n.input&&s().deleteRange(a).insertContentAt(a.from,x)}})}function T(i){return new Se({find:i.find,handler:({state:n,range:s,match:a})=>{let u=i.replace,h=s.from;const y=s.to;if(a[1]){const x=a[0].lastIndexOf(a[1]);u+=a[0].slice(x+a[1].length),h+=x;const w=h-y;w>0&&(u=a[0].slice(x-w,x)+u,h=y)}n.tr.insertText(u,h,y)}})}class R{constructor(n){this.transaction=n,this.currentStep=this.transaction.steps.length}map(n){let s=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,h)=>{const y=h.getMap().mapResult(u);return y.deleted&&(s=!0),y.pos},n),deleted:s}}}},76423:function(Zt,Tt,$e){$e.d(Tt,{jE:function(){return xe},kg:function(){return be}});var N=$e(75271),De=$e(30967),Ct=$e(68595);function de(ce){return ce&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce}var ie={exports:{}},lt={};var tt;function ze(){if(tt)return lt;tt=1;var ce=N;function W(Ue,Ze){return Ue===Ze&&(Ue!==0||1/Ue===1/Ze)||Ue!==Ue&&Ze!==Ze}var Q=typeof Object.is=="function"?Object.is:W,se=ce.useState,ne=ce.useEffect,pe=ce.useLayoutEffect,Xe=ce.useDebugValue;function Fe(Ue,Ze){var ft=Ze(),F=se({inst:{value:ft,getSnapshot:Ze}}),g=F[0].inst,p=F[1];return pe(function(){g.value=ft,g.getSnapshot=Ze,ot(g)&&p({inst:g})},[Ue,ft,Ze]),ne(function(){return ot(g)&&p({inst:g}),Ue(function(){ot(g)&&p({inst:g})})},[Ue]),Xe(ft),ft}function ot(Ue){var Ze=Ue.getSnapshot;Ue=Ue.value;try{var ft=Ze();return!Q(Ue,ft)}catch{return!0}}function _e(Ue,Ze){return Ze()}var We=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_e:Fe;return lt.useSyncExternalStore=ce.useSyncExternalStore!==void 0?ce.useSyncExternalStore:We,lt}var we={};var Ge;function Ye(){return Ge||(Ge=1),we}ie.exports=ze();var Ce=ie.exports;const ct=(...ce)=>W=>{ce.forEach(Q=>{typeof Q=="function"?Q(W):Q&&(Q.current=W)})},it=({contentComponent:ce})=>{const W=Ce.useSyncExternalStore(ce.subscribe,ce.getSnapshot,ce.getServerSnapshot);return N.createElement(N.Fragment,null,Object.values(W))};function Ke(){const ce=new Set;let W={};return{subscribe(Q){return ce.add(Q),()=>{ce.delete(Q)}},getSnapshot(){return W},getServerSnapshot(){return W},setRenderer(Q,se){W={...W,[Q]:De.createPortal(se.reactElement,se.element,Q)},ce.forEach(ne=>ne())},removeRenderer(Q){const se={...W};delete se[Q],W=se,ce.forEach(ne=>ne())}}}class fe extends N.Component{constructor(W){var Q;super(W),this.editorContentRef=N.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((Q=W.editor)===null||Q===void 0)&&Q.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const W=this.props.editor;if(W&&!W.isDestroyed&&W.options.element){if(W.contentComponent)return;const Q=this.editorContentRef.current;Q.append(...W.options.element.childNodes),W.setOptions({element:Q}),W.contentComponent=Ke(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=W.contentComponent.subscribe(()=>{this.setState(se=>se.hasContentComponentInitialized?se:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),W.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const W=this.props.editor;if(!W||(this.initialized=!1,W.isDestroyed||W.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),W.contentComponent=null,!W.options.element.firstChild))return;const Q=document.createElement("div");Q.append(...W.options.element.childNodes),W.setOptions({element:Q})}render(){const{editor:W,innerRef:Q,...se}=this.props;return N.createElement(N.Fragment,null,N.createElement("div",{ref:ct(Q,this.editorContentRef),...se}),W?.contentComponent&&N.createElement(it,{contentComponent:W.contentComponent}))}}const Ie=(0,N.forwardRef)((ce,W)=>{const Q=N.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[ce.editor]);return N.createElement(fe,{key:Q,innerRef:W,...ce})}),be=N.memo(Ie);var Re=function ce(W,Q){if(W===Q)return!0;if(W&&Q&&typeof W=="object"&&typeof Q=="object"){if(W.constructor!==Q.constructor)return!1;var se,ne,pe;if(Array.isArray(W)){if(se=W.length,se!=Q.length)return!1;for(ne=se;ne--!==0;)if(!ce(W[ne],Q[ne]))return!1;return!0}if(W instanceof Map&&Q instanceof Map){if(W.size!==Q.size)return!1;for(ne of W.entries())if(!Q.has(ne[0]))return!1;for(ne of W.entries())if(!ce(ne[1],Q.get(ne[0])))return!1;return!0}if(W instanceof Set&&Q instanceof Set){if(W.size!==Q.size)return!1;for(ne of W.entries())if(!Q.has(ne[0]))return!1;return!0}if(ArrayBuffer.isView(W)&&ArrayBuffer.isView(Q)){if(se=W.length,se!=Q.length)return!1;for(ne=se;ne--!==0;)if(W[ne]!==Q[ne])return!1;return!0}if(W.constructor===RegExp)return W.source===Q.source&&W.flags===Q.flags;if(W.valueOf!==Object.prototype.valueOf)return W.valueOf()===Q.valueOf();if(W.toString!==Object.prototype.toString)return W.toString()===Q.toString();if(pe=Object.keys(W),se=pe.length,se!==Object.keys(Q).length)return!1;for(ne=se;ne--!==0;)if(!Object.prototype.hasOwnProperty.call(Q,pe[ne]))return!1;for(ne=se;ne--!==0;){var Xe=pe[ne];if(!(Xe==="_owner"&&W.$$typeof)&&!ce(W[Xe],Q[Xe]))return!1}return!0}return W!==W&&Q!==Q},Le=de(Re),Ne={exports:{}},Pe={};var ke;function Me(){if(ke)return Pe;ke=1;var ce=N,W=Ce;function Q(_e,We){return _e===We&&(_e!==0||1/_e===1/We)||_e!==_e&&We!==We}var se=typeof Object.is=="function"?Object.is:Q,ne=W.useSyncExternalStore,pe=ce.useRef,Xe=ce.useEffect,Fe=ce.useMemo,ot=ce.useDebugValue;return Pe.useSyncExternalStoreWithSelector=function(_e,We,Ue,Ze,ft){var F=pe(null);if(F.current===null){var g={hasValue:!1,value:null};F.current=g}else g=F.current;F=Fe(function(){function M(re){if(!A){if(A=!0,z=re,re=Ze(re),ft!==void 0&&g.hasValue){var ee=g.value;if(ft(ee,re))return $=ee}return $=re}if(ee=$,se(z,re))return ee;var ye=Ze(re);return ft!==void 0&&ft(ee,ye)?ee:(z=re,$=ye)}var A=!1,z,$,G=Ue===void 0?null:Ue;return[function(){return M(We())},G===null?void 0:function(){return M(G())}]},[We,Ue,Ze,ft]);var p=ne(_e,F[0],F[1]);return Xe(function(){g.hasValue=!0,g.value=p},[p]),ot(p),p},Pe}var mt={};var He;function Te(){return He||(He=1),mt}Ne.exports=Me();var Ee=Ne.exports;const et=typeof window<"u"?N.useLayoutEffect:N.useEffect;class ge{constructor(W){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=W,this.lastSnapshot={editor:W,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(W){return this.subscribers.add(W),()=>{this.subscribers.delete(W)}}watch(W){if(this.editor=W,this.editor){const Q=()=>{this.transactionNumber+=1,this.subscribers.forEach(ne=>ne())},se=this.editor;return se.on("transaction",Q),()=>{se.off("transaction",Q)}}}}function D(ce){var W;const[Q]=(0,N.useState)(()=>new ge(ce.editor)),se=Ee.useSyncExternalStoreWithSelector(Q.subscribe,Q.getSnapshot,Q.getServerSnapshot,ce.selector,(W=ce.equalityFn)!==null&&W!==void 0?W:Le);return et(()=>Q.watch(ce.editor),[ce.editor,Q]),(0,N.useDebugValue)(se),se}const j=!1,U=typeof window>"u",ue=U||!!(typeof window<"u"&&window.next);class ae{constructor(W){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=W,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(W){this.editor=W,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(Q=>Q())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return U||ue?(j&&console.warn("Tiptap Error: SSR has been detected, please set `immediatelyRender` explicitly to `false` to avoid hydration mismatches."),null):this.createEditor();if(this.options.current.immediatelyRender&&U&&j)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const W={...this.options.current,onBeforeCreate:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onBeforeCreate)===null||pe===void 0?void 0:pe.call(ne,...se)},onBlur:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onBlur)===null||pe===void 0?void 0:pe.call(ne,...se)},onCreate:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onCreate)===null||pe===void 0?void 0:pe.call(ne,...se)},onDestroy:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onDestroy)===null||pe===void 0?void 0:pe.call(ne,...se)},onFocus:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onFocus)===null||pe===void 0?void 0:pe.call(ne,...se)},onSelectionUpdate:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onSelectionUpdate)===null||pe===void 0?void 0:pe.call(ne,...se)},onTransaction:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onTransaction)===null||pe===void 0?void 0:pe.call(ne,...se)},onUpdate:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onUpdate)===null||pe===void 0?void 0:pe.call(ne,...se)},onContentError:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onContentError)===null||pe===void 0?void 0:pe.call(ne,...se)},onDrop:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onDrop)===null||pe===void 0?void 0:pe.call(ne,...se)},onPaste:(...se)=>{var ne,pe;return(pe=(ne=this.options.current).onPaste)===null||pe===void 0?void 0:pe.call(ne,...se)}};return new Ct.ML(W)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(W){return this.subscriptions.add(W),()=>{this.subscriptions.delete(W)}}static compareOptions(W,Q){return Object.keys(W).every(se=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(se)?!0:se==="extensions"&&W.extensions&&Q.extensions?W.extensions.length!==Q.extensions.length?!1:W.extensions.every((ne,pe)=>{var Xe;return ne===((Xe=Q.extensions)===null||Xe===void 0?void 0:Xe[pe])}):W[se]===Q[se])}onRender(W){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&W.length===0?ae.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(W),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(W){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=W;return}if(this.previousDeps.length===W.length&&this.previousDeps.every((se,ne)=>se===W[ne]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=W}scheduleDestroy(){const W=this.instanceId,Q=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===W){Q&&Q.setOptions(this.options.current);return}Q&&!Q.isDestroyed&&(Q.destroy(),this.instanceId===W&&this.setEditor(null))},1)}}function xe(ce={},W=[]){const Q=(0,N.useRef)(ce);Q.current=ce;const[se]=(0,N.useState)(()=>new ae(Q)),ne=Ce.useSyncExternalStore(se.subscribe,se.getEditor,se.getServerSnapshot);return(0,N.useDebugValue)(ne),(0,N.useEffect)(se.onRender(W)),D({editor:ne,selector:({transactionNumber:pe})=>ce.shouldRerenderOnTransaction===!1?null:ce.immediatelyRender&&pe===0?0:pe+1}),ne}const Oe=(0,N.createContext)({editor:null}),je=Oe.Consumer,ut=()=>useContext(Oe);function at({children:ce,slotAfter:W,slotBefore:Q,editorContainerProps:se={},...ne}){const pe=xe(ne);return pe?React.createElement(Oe.Provider,{value:{editor:pe}},Q,React.createElement(je,null,({editor:Xe})=>React.createElement(be,{editor:Xe,...se})),ce,W):null}const dt=ce=>{const[W,Q]=useState(null),{editor:se}=ut();return useEffect(()=>{var ne;if(!W||!((ne=ce.editor)===null||ne===void 0)&&ne.isDestroyed||se?.isDestroyed)return;const{pluginKey:pe="bubbleMenu",editor:Xe,tippyOptions:Fe={},updateDelay:ot,shouldShow:_e=null}=ce,We=Xe||se;if(!We){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const Ue=BubbleMenuPlugin({updateDelay:ot,editor:We,element:W,pluginKey:pe,shouldShow:_e,tippyOptions:Fe});return We.registerPlugin(Ue),()=>{We.unregisterPlugin(pe)}},[ce.editor,se,W]),React.createElement("div",{ref:Q,className:ce.className,style:{visibility:"hidden"}},ce.children)},Et=ce=>{const[W,Q]=useState(null),{editor:se}=ut();return useEffect(()=>{var ne;if(!W||!((ne=ce.editor)===null||ne===void 0)&&ne.isDestroyed||se?.isDestroyed)return;const{pluginKey:pe="floatingMenu",editor:Xe,tippyOptions:Fe={},shouldShow:ot=null}=ce,_e=Xe||se;if(!_e){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const We=FloatingMenuPlugin({pluginKey:pe,editor:_e,element:W,tippyOptions:Fe,shouldShow:ot});return _e.registerPlugin(We),()=>{_e.unregisterPlugin(pe)}},[ce.editor,se,W]),React.createElement("div",{ref:Q,className:ce.className,style:{visibility:"hidden"}},ce.children)},rt=(0,N.createContext)({onDragStart:void 0}),gt=()=>(0,N.useContext)(rt),Nt=ce=>{const W=ce.as||"div",{nodeViewContentRef:Q}=gt();return React.createElement(W,{...ce,ref:Q,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...ce.style}})},Ot=N.forwardRef((ce,W)=>{const{onDragStart:Q}=gt(),se=ce.as||"div";return N.createElement(se,{...ce,ref:W,"data-node-view-wrapper":"",onDragStart:Q,style:{whiteSpace:"normal",...ce.style}})});function yt(ce){return!!(typeof ce=="function"&&ce.prototype&&ce.prototype.isReactComponent)}function st(ce){return!!(typeof ce=="object"&&ce.$$typeof&&(ce.$$typeof.toString()==="Symbol(react.forward_ref)"||ce.$$typeof.description==="react.forward_ref"))}function Ft(ce){return!!(typeof ce=="object"&&ce.$$typeof&&(ce.$$typeof.toString()==="Symbol(react.memo)"||ce.$$typeof.description==="react.memo"))}function kt(ce){if(yt(ce)||st(ce))return!0;if(Ft(ce)){const W=ce.type;if(W)return yt(W)||st(W)}return!1}function xt(){try{if(version)return parseInt(version.split(".")[0],10)>=19}catch{}return!1}class zt{constructor(W,{editor:Q,props:se={},as:ne="div",className:pe=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=W,this.editor=Q,this.props=se,this.element=document.createElement(ne),this.element.classList.add("react-renderer"),pe&&this.element.classList.add(...pe.split(" ")),this.editor.isInitialized?flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var W;const Q=this.component,se=this.props,ne=this.editor,pe=xt(),Xe=kt(Q),Fe={...se};Fe.ref&&!(pe||Xe)&&delete Fe.ref,!Fe.ref&&(pe||Xe)&&(Fe.ref=ot=>{this.ref=ot}),this.reactElement=React.createElement(Q,{...Fe}),(W=ne?.contentComponent)===null||W===void 0||W.setRenderer(this.id,this)}updateProps(W={}){this.props={...this.props,...W},this.render()}destroy(){var W;const Q=this.editor;(W=Q?.contentComponent)===null||W===void 0||W.removeRenderer(this.id)}updateAttributes(W){Object.keys(W).forEach(Q=>{this.element.setAttribute(Q,W[Q])})}}class Rt extends null{constructor(W,Q,se){if(super(W,Q,se),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const ne=this.dom.querySelector("[data-node-view-content]");if(!ne)return;ne.appendChild(this.contentDOMElement)}}mount(){const W={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(_e={})=>this.updateAttributes(_e),deleteNode:()=>this.deleteNode(),ref:createRef()};if(!this.component.displayName){const _e=We=>We.charAt(0).toUpperCase()+We.substring(1);this.component.displayName=_e(this.extension.name)}const ne={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:_e=>{_e&&this.contentDOMElement&&_e.firstChild!==this.contentDOMElement&&(_e.hasAttribute("data-node-view-wrapper")&&_e.removeAttribute("data-node-view-wrapper"),_e.appendChild(this.contentDOMElement))}},pe=this.component,Xe=memo(_e=>React.createElement(rt.Provider,{value:ne},createElement(pe,_e)));Xe.displayName="ReactNodeView";let Fe=this.node.isInline?"span":"div";this.options.as&&(Fe=this.options.as);const{className:ot=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new zt(Xe,{editor:this.editor,props:W,as:Fe,className:`node-${this.node.type.name} ${ot}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var W;if(this.renderer.element.firstElementChild&&!(!((W=this.renderer.element.firstElementChild)===null||W===void 0)&&W.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:W,to:Q}=this.editor.state.selection,se=this.getPos();if(typeof se=="number")if(W<=se&&Q>=se+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(W,Q,se){const ne=pe=>{this.renderer.updateProps(pe),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(W.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const pe=this.node,Xe=this.decorations,Fe=this.innerDecorations;return this.node=W,this.decorations=Q,this.innerDecorations=se,this.options.update({oldNode:pe,oldDecorations:Xe,newNode:W,newDecorations:Q,oldInnerDecorations:Fe,innerDecorations:se,updateProps:()=>ne({node:W,decorations:Q,innerDecorations:se})})}return W===this.node&&this.decorations===Q&&this.innerDecorations===se||(this.node=W,this.decorations=Q,this.innerDecorations=se,ne({node:W,decorations:Q,innerDecorations:se})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let W={};if(typeof this.options.attrs=="function"){const Q=this.editor.extensionManager.attributes,se=getRenderedAttributes(this.node,Q);W=this.options.attrs({node:this.node,HTMLAttributes:se})}else W=this.options.attrs;this.renderer.updateAttributes(W)}}}function At(ce,W){return Q=>Q.editor.contentComponent?new Rt(ce,Q,W):{}}},94597:function(Zt,Tt,$e){$e.d(Tt,{Z:function(){return Ae}});var N=$e(68595);const De=/^\s*>\s$/,Ct=N.NB.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:E}){return["blockquote",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{setBlockquote:()=>({commands:E})=>E.wrapIn(this.name),toggleBlockquote:()=>({commands:E})=>E.toggleWrap(this.name),unsetBlockquote:()=>({commands:E})=>E.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,N.S0)({find:De,type:this.type})]}}),de=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ie=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,lt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,tt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ze=N.vc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:E=>E.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:E=>E.type.name===this.name},{style:"font-weight",getAttrs:E=>/^(bold(er)?|[5-9]\d{2,})$/.test(E)&&null}]},renderHTML({HTMLAttributes:E}){return["strong",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{setBold:()=>({commands:E})=>E.setMark(this.name),toggleBold:()=>({commands:E})=>E.toggleMark(this.name),unsetBold:()=>({commands:E})=>E.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,N.Cf)({find:de,type:this.type}),(0,N.Cf)({find:lt,type:this.type})]},addPasteRules(){return[(0,N.K9)({find:ie,type:this.type}),(0,N.K9)({find:tt,type:this.type})]}}),we="listItem",Ge="textStyle",Ye=/^\s*([-+*])\s$/,Ce=N.NB.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:E}){return["ul",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{toggleBulletList:()=>({commands:E,chain:O})=>this.options.keepAttributes?O().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(we,this.editor.getAttributes(Ge)).run():E.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let E=(0,N.S0)({find:Ye,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(E=(0,N.S0)({find:Ye,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ge),editor:this.editor})),[E]}}),ct=/(^|[^`])`([^`]+)`(?!`)/,it=/(^|[^`])`([^`]+)`(?!`)/g,Ke=N.vc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:E}){return["code",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{setCode:()=>({commands:E})=>E.setMark(this.name),toggleCode:()=>({commands:E})=>E.toggleMark(this.name),unsetCode:()=>({commands:E})=>E.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,N.Cf)({find:ct,type:this.type})]},addPasteRules(){return[(0,N.K9)({find:it,type:this.type})]}});var fe=$e(65574);const Ie=/^```([a-z]+)?[\s\n]$/,be=/^~~~([a-z]+)?[\s\n]$/,Re=N.NB.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:E=>{var O;const{languageClassPrefix:_}=this.options,te=[...((O=E.firstElementChild)===null||O===void 0?void 0:O.classList)||[]].filter(le=>le.startsWith(_)).map(le=>le.replace(_,""))[0];return te||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:E,HTMLAttributes:O}){return["pre",(0,N.P1)(this.options.HTMLAttributes,O),["code",{class:E.attrs.language?this.options.languageClassPrefix+E.attrs.language:null},0]]},addCommands(){return{setCodeBlock:E=>({commands:O})=>O.setNode(this.name,E),toggleCodeBlock:E=>({commands:O})=>O.toggleNode(this.name,"paragraph",E)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:E,$anchor:O}=this.editor.state.selection,_=O.pos===1;return!E||O.parent.type.name!==this.name?!1:_||!O.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:E})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:O}=E,{selection:_}=O,{$from:J,empty:Y}=_;if(!Y||J.parent.type!==this.type)return!1;const te=J.parentOffset===J.parent.nodeSize-2,le=J.parent.textContent.endsWith(`

`);return!te||!le?!1:E.chain().command(({tr:Se})=>(Se.delete(J.pos-2,J.pos),!0)).exitCode().run()},ArrowDown:({editor:E})=>{if(!this.options.exitOnArrowDown)return!1;const{state:O}=E,{selection:_,doc:J}=O,{$from:Y,empty:te}=_;if(!te||Y.parent.type!==this.type||!(Y.parentOffset===Y.parent.nodeSize-2))return!1;const Se=Y.after();return Se===void 0?!1:J.nodeAt(Se)?E.commands.command(({tr:Ve})=>(Ve.setSelection(fe.Y1.near(J.resolve(Se))),!0)):E.commands.exitCode()}}},addInputRules(){return[(0,N.zK)({find:Ie,type:this.type,getAttributes:E=>({language:E[1]})}),(0,N.zK)({find:be,type:this.type,getAttributes:E=>({language:E[1]})})]},addProseMirrorPlugins(){return[new fe.Sy({key:new fe.H$("codeBlockVSCodeHandler"),props:{handlePaste:(E,O)=>{if(!O.clipboardData||this.editor.isActive(this.type.name))return!1;const _=O.clipboardData.getData("text/plain"),J=O.clipboardData.getData("vscode-editor-data"),Y=J?JSON.parse(J):void 0,te=Y?.mode;if(!_||!te)return!1;const{tr:le,schema:Se}=E.state,ve=Se.text(_.replace(/\r\n?/g,`
`));return le.replaceSelectionWith(this.type.create({language:te},ve)),le.selection.$from.parent.type!==this.type&&le.setSelection(fe.Bs.near(le.doc.resolve(Math.max(0,le.selection.from-2)))),le.setMeta("paste",!0),E.dispatch(le),!0}}})]}}),Le=N.NB.create({name:"doc",topNode:!0,content:"block+"});var Ne=$e(65590);function Pe(E={}){return new fe.Sy({view(O){return new ke(O,E)}})}class ke{constructor(O,_){var J;this.editorView=O,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(J=_.width)!==null&&J!==void 0?J:1,this.color=_.color===!1?void 0:_.color||"black",this.class=_.class,this.handlers=["dragover","dragend","drop","dragleave"].map(Y=>{let te=le=>{this[Y](le)};return O.dom.addEventListener(Y,te),{name:Y,handler:te}})}destroy(){this.handlers.forEach(({name:O,handler:_})=>this.editorView.dom.removeEventListener(O,_))}update(O,_){this.cursorPos!=null&&_.doc!=O.state.doc&&(this.cursorPos>O.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(O){O!=this.cursorPos&&(this.cursorPos=O,O==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let O=this.editorView.state.doc.resolve(this.cursorPos),_=!O.parent.inlineContent,J,Y=this.editorView.dom,te=Y.getBoundingClientRect(),le=te.width/Y.offsetWidth,Se=te.height/Y.offsetHeight;if(_){let Be=O.nodeBefore,qe=O.nodeAfter;if(Be||qe){let ht=this.editorView.nodeDOM(this.cursorPos-(Be?Be.nodeSize:0));if(ht){let bt=ht.getBoundingClientRect(),St=Be?bt.bottom:bt.top;Be&&qe&&(St=(St+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let _t=this.width/2*Se;J={left:bt.left,right:bt.right,top:St-_t,bottom:St+_t}}}}if(!J){let Be=this.editorView.coordsAtPos(this.cursorPos),qe=this.width/2*le;J={left:Be.left-qe,right:Be.left+qe,top:Be.top,bottom:Be.bottom}}let ve=this.editorView.dom.offsetParent;this.element||(this.element=ve.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",_),this.element.classList.toggle("prosemirror-dropcursor-inline",!_);let Ve,nt;if(!ve||ve==document.body&&getComputedStyle(ve).position=="static")Ve=-pageXOffset,nt=-pageYOffset;else{let Be=ve.getBoundingClientRect(),qe=Be.width/ve.offsetWidth,ht=Be.height/ve.offsetHeight;Ve=Be.left-ve.scrollLeft*qe,nt=Be.top-ve.scrollTop*ht}this.element.style.left=(J.left-Ve)/le+"px",this.element.style.top=(J.top-nt)/Se+"px",this.element.style.width=(J.right-J.left)/le+"px",this.element.style.height=(J.bottom-J.top)/Se+"px"}scheduleRemoval(O){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),O)}dragover(O){if(!this.editorView.editable)return;let _=this.editorView.posAtCoords({left:O.clientX,top:O.clientY}),J=_&&_.inside>=0&&this.editorView.state.doc.nodeAt(_.inside),Y=J&&J.type.spec.disableDropCursor,te=typeof Y=="function"?Y(this.editorView,_,O):Y;if(_&&!te){let le=_.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Se=(0,Ne.nj)(this.editorView.state.doc,le,this.editorView.dragging.slice);Se!=null&&(le=Se)}this.setCursor(le),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(O){this.editorView.dom.contains(O.relatedTarget)||this.setCursor(null)}}const Me=N.hj.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Pe(this.options)]}});var mt=$e(57557),He=$e(56384),Te=$e(41417);class Ee extends fe.Y1{constructor(O){super(O,O)}map(O,_){let J=O.resolve(_.map(this.head));return Ee.valid(J)?new Ee(J):fe.Y1.near(J)}content(){return He.p2.empty}eq(O){return O instanceof Ee&&O.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(O,_){if(typeof _.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ee(O.resolve(_.pos))}getBookmark(){return new et(this.anchor)}static valid(O){let _=O.parent;if(_.isTextblock||!D(O)||!j(O))return!1;let J=_.type.spec.allowGapCursor;if(J!=null)return J;let Y=_.contentMatchAt(O.index()).defaultType;return Y&&Y.isTextblock}static findGapCursorFrom(O,_,J=!1){e:for(;;){if(!J&&Ee.valid(O))return O;let Y=O.pos,te=null;for(let le=O.depth;;le--){let Se=O.node(le);if(_>0?O.indexAfter(le)<Se.childCount:O.index(le)>0){te=Se.child(_>0?O.indexAfter(le):O.index(le)-1);break}else if(le==0)return null;Y+=_;let ve=O.doc.resolve(Y);if(Ee.valid(ve))return ve}for(;;){let le=_>0?te.firstChild:te.lastChild;if(!le){if(te.isAtom&&!te.isText&&!fe.qv.isSelectable(te)){O=O.doc.resolve(Y+te.nodeSize*_),J=!1;continue e}break}te=le,Y+=_;let Se=O.doc.resolve(Y);if(Ee.valid(Se))return Se}return null}}}Ee.prototype.visible=!1,Ee.findFrom=Ee.findGapCursorFrom,fe.Y1.jsonID("gapcursor",Ee);class et{constructor(O){this.pos=O}map(O){return new et(O.map(this.pos))}resolve(O){let _=O.resolve(this.pos);return Ee.valid(_)?new Ee(_):fe.Y1.near(_)}}function ge(E){return E.isAtom||E.spec.isolating||E.spec.createGapCursor}function D(E){for(let O=E.depth;O>=0;O--){let _=E.index(O),J=E.node(O);if(_==0){if(J.type.spec.isolating)return!0;continue}for(let Y=J.child(_-1);;Y=Y.lastChild){if(Y.childCount==0&&!Y.inlineContent||ge(Y.type))return!0;if(Y.inlineContent)return!1}}return!0}function j(E){for(let O=E.depth;O>=0;O--){let _=E.indexAfter(O),J=E.node(O);if(_==J.childCount){if(J.type.spec.isolating)return!0;continue}for(let Y=J.child(_);;Y=Y.firstChild){if(Y.childCount==0&&!Y.inlineContent||ge(Y.type))return!0;if(Y.inlineContent)return!1}}return!0}function U(){return new fe.Sy({props:{decorations:je,createSelectionBetween(E,O,_){return O.pos==_.pos&&Ee.valid(_)?new Ee(_):null},handleClick:xe,handleKeyDown:ue,handleDOMEvents:{beforeinput:Oe}}})}const ue=(0,mt.$)({ArrowLeft:ae("horiz",-1),ArrowRight:ae("horiz",1),ArrowUp:ae("vert",-1),ArrowDown:ae("vert",1)});function ae(E,O){const _=E=="vert"?O>0?"down":"up":O>0?"right":"left";return function(J,Y,te){let le=J.selection,Se=O>0?le.$to:le.$from,ve=le.empty;if(le instanceof fe.Bs){if(!te.endOfTextblock(_)||Se.depth==0)return!1;ve=!1,Se=J.doc.resolve(O>0?Se.after():Se.before())}let Ve=Ee.findGapCursorFrom(Se,O,ve);return Ve?(Y&&Y(J.tr.setSelection(new Ee(Ve))),!0):!1}}function xe(E,O,_){if(!E||!E.editable)return!1;let J=E.state.doc.resolve(O);if(!Ee.valid(J))return!1;let Y=E.posAtCoords({left:_.clientX,top:_.clientY});return Y&&Y.inside>-1&&fe.qv.isSelectable(E.state.doc.nodeAt(Y.inside))?!1:(E.dispatch(E.state.tr.setSelection(new Ee(J))),!0)}function Oe(E,O){if(O.inputType!="insertCompositionText"||!(E.state.selection instanceof Ee))return!1;let{$from:_}=E.state.selection,J=_.parent.contentMatchAt(_.index()).findWrapping(E.state.schema.nodes.text);if(!J)return!1;let Y=He.HY.empty;for(let le=J.length-1;le>=0;le--)Y=He.HY.from(J[le].createAndFill(null,Y));let te=E.state.tr.replace(_.pos,_.pos,new He.p2(Y,0,0));return te.setSelection(fe.Bs.near(te.doc.resolve(_.pos+1))),E.dispatch(te),!1}function je(E){if(!(E.selection instanceof Ee))return null;let O=document.createElement("div");return O.className="ProseMirror-gapcursor",Te.EH.create(E.doc,[Te.p.widget(E.selection.head,O,{key:"gapcursor"})])}const ut=N.hj.create({name:"gapCursor",addProseMirrorPlugins(){return[U()]},extendNodeSchema(E){var O;const _={name:E.name,options:E.options,storage:E.storage};return{allowGapCursor:(O=(0,N.nU)((0,N.Nl)(E,"allowGapCursor",_)))!==null&&O!==void 0?O:null}}}),at=N.NB.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:E}){return["br",(0,N.P1)(this.options.HTMLAttributes,E)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:E,chain:O,state:_,editor:J})=>E.first([()=>E.exitCode(),()=>E.command(()=>{const{selection:Y,storedMarks:te}=_;if(Y.$from.parent.type.spec.isolating)return!1;const{keepMarks:le}=this.options,{splittableMarks:Se}=J.extensionManager,ve=te||Y.$to.parentOffset&&Y.$from.marks();return O().insertContent({type:this.name}).command(({tr:Ve,dispatch:nt})=>{if(nt&&ve&&le){const Be=ve.filter(qe=>Se.includes(qe.type.name));Ve.ensureMarks(Be)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),dt=N.NB.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(E=>({tag:`h${E}`,attrs:{level:E}}))},renderHTML({node:E,HTMLAttributes:O}){return[`h${this.options.levels.includes(E.attrs.level)?E.attrs.level:this.options.levels[0]}`,(0,N.P1)(this.options.HTMLAttributes,O),0]},addCommands(){return{setHeading:E=>({commands:O})=>this.options.levels.includes(E.level)?O.setNode(this.name,E):!1,toggleHeading:E=>({commands:O})=>this.options.levels.includes(E.level)?O.toggleNode(this.name,"paragraph",E):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((E,O)=>({...E,[`Mod-Alt-${O}`]:()=>this.editor.commands.toggleHeading({level:O})}),{})},addInputRules(){return this.options.levels.map(E=>(0,N.zK)({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${E}})\\s$`),type:this.type,getAttributes:{level:E}}))}});var Et=200,rt=function(){};rt.prototype.append=function(O){return O.length?(O=rt.from(O),!this.length&&O||O.length<Et&&this.leafAppend(O)||this.length<Et&&O.leafPrepend(this)||this.appendInner(O)):this},rt.prototype.prepend=function(O){return O.length?rt.from(O).append(this):this},rt.prototype.appendInner=function(O){return new Nt(this,O)},rt.prototype.slice=function(O,_){return O===void 0&&(O=0),_===void 0&&(_=this.length),O>=_?rt.empty:this.sliceInner(Math.max(0,O),Math.min(this.length,_))},rt.prototype.get=function(O){if(!(O<0||O>=this.length))return this.getInner(O)},rt.prototype.forEach=function(O,_,J){_===void 0&&(_=0),J===void 0&&(J=this.length),_<=J?this.forEachInner(O,_,J,0):this.forEachInvertedInner(O,_,J,0)},rt.prototype.map=function(O,_,J){_===void 0&&(_=0),J===void 0&&(J=this.length);var Y=[];return this.forEach(function(te,le){return Y.push(O(te,le))},_,J),Y},rt.from=function(O){return O instanceof rt?O:O&&O.length?new gt(O):rt.empty};var gt=function(E){function O(J){E.call(this),this.values=J}E&&(O.__proto__=E),O.prototype=Object.create(E&&E.prototype),O.prototype.constructor=O;var _={length:{configurable:!0},depth:{configurable:!0}};return O.prototype.flatten=function(){return this.values},O.prototype.sliceInner=function(Y,te){return Y==0&&te==this.length?this:new O(this.values.slice(Y,te))},O.prototype.getInner=function(Y){return this.values[Y]},O.prototype.forEachInner=function(Y,te,le,Se){for(var ve=te;ve<le;ve++)if(Y(this.values[ve],Se+ve)===!1)return!1},O.prototype.forEachInvertedInner=function(Y,te,le,Se){for(var ve=te-1;ve>=le;ve--)if(Y(this.values[ve],Se+ve)===!1)return!1},O.prototype.leafAppend=function(Y){if(this.length+Y.length<=Et)return new O(this.values.concat(Y.flatten()))},O.prototype.leafPrepend=function(Y){if(this.length+Y.length<=Et)return new O(Y.flatten().concat(this.values))},_.length.get=function(){return this.values.length},_.depth.get=function(){return 0},Object.defineProperties(O.prototype,_),O}(rt);rt.empty=new gt([]);var Nt=function(E){function O(_,J){E.call(this),this.left=_,this.right=J,this.length=_.length+J.length,this.depth=Math.max(_.depth,J.depth)+1}return E&&(O.__proto__=E),O.prototype=Object.create(E&&E.prototype),O.prototype.constructor=O,O.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},O.prototype.getInner=function(J){return J<this.left.length?this.left.get(J):this.right.get(J-this.left.length)},O.prototype.forEachInner=function(J,Y,te,le){var Se=this.left.length;if(Y<Se&&this.left.forEachInner(J,Y,Math.min(te,Se),le)===!1||te>Se&&this.right.forEachInner(J,Math.max(Y-Se,0),Math.min(this.length,te)-Se,le+Se)===!1)return!1},O.prototype.forEachInvertedInner=function(J,Y,te,le){var Se=this.left.length;if(Y>Se&&this.right.forEachInvertedInner(J,Y-Se,Math.max(te,Se)-Se,le+Se)===!1||te<Se&&this.left.forEachInvertedInner(J,Math.min(Y,Se),te,le)===!1)return!1},O.prototype.sliceInner=function(J,Y){if(J==0&&Y==this.length)return this;var te=this.left.length;return Y<=te?this.left.slice(J,Y):J>=te?this.right.slice(J-te,Y-te):this.left.slice(J,te).append(this.right.slice(0,Y-te))},O.prototype.leafAppend=function(J){var Y=this.right.leafAppend(J);if(Y)return new O(this.left,Y)},O.prototype.leafPrepend=function(J){var Y=this.left.leafPrepend(J);if(Y)return new O(Y,this.right)},O.prototype.appendInner=function(J){return this.left.depth>=Math.max(this.right.depth,J.depth)+1?new O(this.left,new O(this.right,J)):new O(this,J)},O}(rt),Ot=rt;const yt=500;class st{constructor(O,_){this.items=O,this.eventCount=_}popEvent(O,_){if(this.eventCount==0)return null;let J=this.items.length;for(;;J--)if(this.items.get(J-1).selection){--J;break}let Y,te;_&&(Y=this.remapping(J,this.items.length),te=Y.maps.length);let le=O.tr,Se,ve,Ve=[],nt=[];return this.items.forEach((Be,qe)=>{if(!Be.step){Y||(Y=this.remapping(J,qe+1),te=Y.maps.length),te--,nt.push(Be);return}if(Y){nt.push(new kt(Be.map));let ht=Be.step.map(Y.slice(te)),bt;ht&&le.maybeStep(ht).doc&&(bt=le.mapping.maps[le.mapping.maps.length-1],Ve.push(new kt(bt,void 0,void 0,Ve.length+nt.length))),te--,bt&&Y.appendMap(bt,te)}else le.maybeStep(Be.step);if(Be.selection)return Se=Y?Be.selection.map(Y.slice(te)):Be.selection,ve=new st(this.items.slice(0,J).append(nt.reverse().concat(Ve)),this.eventCount-1),!1},this.items.length,0),{remaining:ve,transform:le,selection:Se}}addTransform(O,_,J,Y){let te=[],le=this.eventCount,Se=this.items,ve=!Y&&Se.length?Se.get(Se.length-1):null;for(let nt=0;nt<O.steps.length;nt++){let Be=O.steps[nt].invert(O.docs[nt]),qe=new kt(O.mapping.maps[nt],Be,_),ht;(ht=ve&&ve.merge(qe))&&(qe=ht,nt?te.pop():Se=Se.slice(0,Se.length-1)),te.push(qe),_&&(le++,_=void 0),Y||(ve=qe)}let Ve=le-J.depth;return Ve>zt&&(Se=Ft(Se,Ve),le-=Ve),new st(Se.append(te),le)}remapping(O,_){let J=new Ne.vs;return this.items.forEach((Y,te)=>{let le=Y.mirrorOffset!=null&&te-Y.mirrorOffset>=O?J.maps.length-Y.mirrorOffset:void 0;J.appendMap(Y.map,le)},O,_),J}addMaps(O){return this.eventCount==0?this:new st(this.items.append(O.map(_=>new kt(_))),this.eventCount)}rebased(O,_){if(!this.eventCount)return this;let J=[],Y=Math.max(0,this.items.length-_),te=O.mapping,le=O.steps.length,Se=this.eventCount;this.items.forEach(qe=>{qe.selection&&Se--},Y);let ve=_;this.items.forEach(qe=>{let ht=te.getMirror(--ve);if(ht==null)return;le=Math.min(le,ht);let bt=te.maps[ht];if(qe.step){let St=O.steps[ht].invert(O.docs[ht]),_t=qe.selection&&qe.selection.map(te.slice(ve+1,ht));_t&&Se++,J.push(new kt(bt,St,_t))}else J.push(new kt(bt))},Y);let Ve=[];for(let qe=_;qe<le;qe++)Ve.push(new kt(te.maps[qe]));let nt=this.items.slice(0,Y).append(Ve).append(J),Be=new st(nt,Se);return Be.emptyItemCount()>yt&&(Be=Be.compress(this.items.length-J.length)),Be}emptyItemCount(){let O=0;return this.items.forEach(_=>{_.step||O++}),O}compress(O=this.items.length){let _=this.remapping(0,O),J=_.maps.length,Y=[],te=0;return this.items.forEach((le,Se)=>{if(Se>=O)Y.push(le),le.selection&&te++;else if(le.step){let ve=le.step.map(_.slice(J)),Ve=ve&&ve.getMap();if(J--,Ve&&_.appendMap(Ve,J),ve){let nt=le.selection&&le.selection.map(_.slice(J));nt&&te++;let Be=new kt(Ve.invert(),ve,nt),qe,ht=Y.length-1;(qe=Y.length&&Y[ht].merge(Be))?Y[ht]=qe:Y.push(Be)}}else le.map&&J--},this.items.length,0),new st(Ot.from(Y.reverse()),te)}}st.empty=new st(Ot.empty,0);function Ft(E,O){let _;return E.forEach((J,Y)=>{if(J.selection&&O--==0)return _=Y,!1}),E.slice(_)}class kt{constructor(O,_,J,Y){this.map=O,this.step=_,this.selection=J,this.mirrorOffset=Y}merge(O){if(this.step&&O.step&&!O.selection){let _=O.step.merge(this.step);if(_)return new kt(_.getMap().invert(),_,this.selection)}}}class xt{constructor(O,_,J,Y,te){this.done=O,this.undone=_,this.prevRanges=J,this.prevTime=Y,this.prevComposition=te}}const zt=20;function Rt(E,O,_,J){let Y=_.getMeta(Fe),te;if(Y)return Y.historyState;_.getMeta(ot)&&(E=new xt(E.done,E.undone,null,0,-1));let le=_.getMeta("appendedTransaction");if(_.steps.length==0)return E;if(le&&le.getMeta(Fe))return le.getMeta(Fe).redo?new xt(E.done.addTransform(_,void 0,J,pe(O)),E.undone,ce(_.mapping.maps),E.prevTime,E.prevComposition):new xt(E.done,E.undone.addTransform(_,void 0,J,pe(O)),null,E.prevTime,E.prevComposition);if(_.getMeta("addToHistory")!==!1&&!(le&&le.getMeta("addToHistory")===!1)){let Se=_.getMeta("composition"),ve=E.prevTime==0||!le&&E.prevComposition!=Se&&(E.prevTime<(_.time||0)-J.newGroupDelay||!At(_,E.prevRanges)),Ve=le?W(E.prevRanges,_.mapping):ce(_.mapping.maps);return new xt(E.done.addTransform(_,ve?O.selection.getBookmark():void 0,J,pe(O)),st.empty,Ve,_.time,Se??E.prevComposition)}else return(te=_.getMeta("rebased"))?new xt(E.done.rebased(_,te),E.undone.rebased(_,te),W(E.prevRanges,_.mapping),E.prevTime,E.prevComposition):new xt(E.done.addMaps(_.mapping.maps),E.undone.addMaps(_.mapping.maps),W(E.prevRanges,_.mapping),E.prevTime,E.prevComposition)}function At(E,O){if(!O)return!1;if(!E.docChanged)return!0;let _=!1;return E.mapping.maps[0].forEach((J,Y)=>{for(let te=0;te<O.length;te+=2)J<=O[te+1]&&Y>=O[te]&&(_=!0)}),_}function ce(E){let O=[];for(let _=E.length-1;_>=0&&O.length==0;_--)E[_].forEach((J,Y,te,le)=>O.push(te,le));return O}function W(E,O){if(!E)return null;let _=[];for(let J=0;J<E.length;J+=2){let Y=O.map(E[J],1),te=O.map(E[J+1],-1);Y<=te&&_.push(Y,te)}return _}function Q(E,O,_){let J=pe(O),Y=Fe.get(O).spec.config,te=(_?E.undone:E.done).popEvent(O,J);if(!te)return null;let le=te.selection.resolve(te.transform.doc),Se=(_?E.done:E.undone).addTransform(te.transform,O.selection.getBookmark(),Y,J),ve=new xt(_?Se:te.remaining,_?te.remaining:Se,null,0,-1);return te.transform.setSelection(le).setMeta(Fe,{redo:_,historyState:ve})}let se=!1,ne=null;function pe(E){let O=E.plugins;if(ne!=O){se=!1,ne=O;for(let _=0;_<O.length;_++)if(O[_].spec.historyPreserveItems){se=!0;break}}return se}function Xe(E){return E.setMeta(ot,!0)}const Fe=new fe.H$("history"),ot=new fe.H$("closeHistory");function _e(E={}){return E={depth:E.depth||100,newGroupDelay:E.newGroupDelay||500},new fe.Sy({key:Fe,state:{init(){return new xt(st.empty,st.empty,null,0,-1)},apply(O,_,J){return Rt(_,J,O,E)}},config:E,props:{handleDOMEvents:{beforeinput(O,_){let J=_.inputType,Y=J=="historyUndo"?Ue:J=="historyRedo"?Ze:null;return!Y||!O.editable?!1:(_.preventDefault(),Y(O.state,O.dispatch))}}}})}function We(E,O){return(_,J)=>{let Y=Fe.getState(_);if(!Y||(E?Y.undone:Y.done).eventCount==0)return!1;if(J){let te=Q(Y,_,E);te&&J(O?te.scrollIntoView():te)}return!0}}const Ue=We(!1,!0),Ze=We(!0,!0),ft=We(!1,!1),F=We(!0,!1);function g(E){let O=Fe.getState(E);return O?O.done.eventCount:0}function p(E){let O=Fe.getState(E);return O?O.undone.eventCount:0}function M(E){return E.getMeta(Fe)!=null}const A=N.hj.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:E,dispatch:O})=>Ue(E,O),redo:()=>({state:E,dispatch:O})=>Ze(E,O)}},addProseMirrorPlugins(){return[_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),z=N.NB.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:E}){return["hr",(0,N.P1)(this.options.HTMLAttributes,E)]},addCommands(){return{setHorizontalRule:()=>({chain:E,state:O})=>{if(!(0,N.FZ)(O,O.schema.nodes[this.name]))return!1;const{selection:_}=O,{$from:J,$to:Y}=_,te=E();return J.parentOffset===0?te.insertContentAt({from:Math.max(J.pos-1,0),to:Y.pos},{type:this.name}):(0,N.EG)(_)?te.insertContentAt(Y.pos,{type:this.name}):te.insertContent({type:this.name}),te.command(({tr:le,dispatch:Se})=>{var ve;if(Se){const{$to:Ve}=le.selection,nt=Ve.end();if(Ve.nodeAfter)Ve.nodeAfter.isTextblock?le.setSelection(fe.Bs.create(le.doc,Ve.pos+1)):Ve.nodeAfter.isBlock?le.setSelection(fe.qv.create(le.doc,Ve.pos)):le.setSelection(fe.Bs.create(le.doc,Ve.pos));else{const Be=(ve=Ve.parent.type.contentMatch.defaultType)===null||ve===void 0?void 0:ve.create();Be&&(le.insert(nt,Be),le.setSelection(fe.Bs.create(le.doc,nt+1)))}le.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(0,N.x2)({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,G=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,re=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ye=N.vc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:E=>E.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:E=>E.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:E}){return["em",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{setItalic:()=>({commands:E})=>E.setMark(this.name),toggleItalic:()=>({commands:E})=>E.toggleMark(this.name),unsetItalic:()=>({commands:E})=>E.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,N.Cf)({find:$,type:this.type}),(0,N.Cf)({find:re,type:this.type})]},addPasteRules(){return[(0,N.K9)({find:G,type:this.type}),(0,N.K9)({find:ee,type:this.type})]}}),v=N.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:E}){return["li",(0,N.P1)(this.options.HTMLAttributes,E),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),o="listItem",c="textStyle",m=/^(\d+)\.\s$/,k=N.NB.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:E=>E.hasAttribute("start")?parseInt(E.getAttribute("start")||"",10):1},type:{default:null,parseHTML:E=>E.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:E}){const{start:O,..._}=E;return O===1?["ol",(0,N.P1)(this.options.HTMLAttributes,_),0]:["ol",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{toggleOrderedList:()=>({commands:E,chain:O})=>this.options.keepAttributes?O().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(o,this.editor.getAttributes(c)).run():E.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let E=(0,N.S0)({find:m,type:this.type,getAttributes:O=>({start:+O[1]}),joinPredicate:(O,_)=>_.childCount+_.attrs.start===+O[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(E=(0,N.S0)({find:m,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:O=>({start:+O[1],...this.editor.getAttributes(c)}),joinPredicate:(O,_)=>_.childCount+_.attrs.start===+O[1],editor:this.editor})),[E]}}),C=N.NB.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:E}){return["p",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{setParagraph:()=>({commands:E})=>E.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),I=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,H=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,K=N.vc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:E=>E.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:E}){return["s",(0,N.P1)(this.options.HTMLAttributes,E),0]},addCommands(){return{setStrike:()=>({commands:E})=>E.setMark(this.name),toggleStrike:()=>({commands:E})=>E.toggleMark(this.name),unsetStrike:()=>({commands:E})=>E.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,N.Cf)({find:I,type:this.type})]},addPasteRules(){return[(0,N.K9)({find:H,type:this.type})]}}),he=N.NB.create({name:"text",group:"inline"}),Ae=N.hj.create({name:"starterKit",addExtensions(){const E=[];return this.options.bold!==!1&&E.push(ze.configure(this.options.bold)),this.options.blockquote!==!1&&E.push(Ct.configure(this.options.blockquote)),this.options.bulletList!==!1&&E.push(Ce.configure(this.options.bulletList)),this.options.code!==!1&&E.push(Ke.configure(this.options.code)),this.options.codeBlock!==!1&&E.push(Re.configure(this.options.codeBlock)),this.options.document!==!1&&E.push(Le.configure(this.options.document)),this.options.dropcursor!==!1&&E.push(Me.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&E.push(ut.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&E.push(at.configure(this.options.hardBreak)),this.options.heading!==!1&&E.push(dt.configure(this.options.heading)),this.options.history!==!1&&E.push(A.configure(this.options.history)),this.options.horizontalRule!==!1&&E.push(z.configure(this.options.horizontalRule)),this.options.italic!==!1&&E.push(ye.configure(this.options.italic)),this.options.listItem!==!1&&E.push(v.configure(this.options.listItem)),this.options.orderedList!==!1&&E.push(k.configure(this.options.orderedList)),this.options.paragraph!==!1&&E.push(C.configure(this.options.paragraph)),this.options.strike!==!1&&E.push(K.configure(this.options.strike)),this.options.text!==!1&&E.push(he.configure(this.options.text)),E}})},71961:function(Zt,Tt,$e){$e.d(Tt,{ZP:function(){return lt}});var N=$e(65574),De=$e(41417),Ct=$e(68595);function de(tt){var ze;const{char:we,allowSpaces:Ge,allowToIncludeChar:Ye,allowedPrefixes:Ce,startOfLine:ct,$position:it}=tt,Ke=Ge&&!Ye,fe=(0,Ct.Ov)(we),Ie=new RegExp(`\\s${fe}$`),be=ct?"^":"",Re=Ye?"":fe,Le=Ke?new RegExp(`${be}${fe}.*?(?=\\s${Re}|$)`,"gm"):new RegExp(`${be}(?:^)?${fe}[^\\s${Re}]*`,"gm"),Ne=((ze=it.nodeBefore)===null||ze===void 0?void 0:ze.isText)&&it.nodeBefore.text;if(!Ne)return null;const Pe=it.pos-Ne.length,ke=Array.from(Ne.matchAll(Le)).pop();if(!ke||ke.input===void 0||ke.index===void 0)return null;const Me=ke.input.slice(Math.max(0,ke.index-1),ke.index),mt=new RegExp(`^[${Ce?.join("")}\0]?$`).test(Me);if(Ce!==null&&!mt)return null;const He=Pe+ke.index;let Te=He+ke[0].length;return Ke&&Ie.test(Ne.slice(Te-1,Te+1))&&(ke[0]+=" ",Te+=1),He<it.pos&&Te>=it.pos?{range:{from:He,to:Te},query:ke[0].slice(we.length),text:ke[0]}:null}const ie=new N.H$("suggestion");function lt({pluginKey:tt=ie,editor:ze,char:we="@",allowSpaces:Ge=!1,allowToIncludeChar:Ye=!1,allowedPrefixes:Ce=[" "],startOfLine:ct=!1,decorationTag:it="span",decorationClass:Ke="suggestion",decorationContent:fe="",decorationEmptyClass:Ie="is-empty",command:be=()=>null,items:Re=()=>[],render:Le=()=>({}),allow:Ne=()=>!0,findSuggestionMatch:Pe=de}){let ke;const Me=Le?.(),mt=new N.Sy({key:tt,view(){return{update:async(He,Te)=>{var Ee,et,ge,D,j,U,ue;const ae=(Ee=this.key)===null||Ee===void 0?void 0:Ee.getState(Te),xe=(et=this.key)===null||et===void 0?void 0:et.getState(He.state),Oe=ae.active&&xe.active&&ae.range.from!==xe.range.from,je=!ae.active&&xe.active,ut=ae.active&&!xe.active,at=!je&&!ut&&ae.query!==xe.query,dt=je||Oe&&at,Et=at||Oe,rt=ut||Oe&&at;if(!dt&&!Et&&!rt)return;const gt=rt&&!dt?ae:xe,Nt=He.dom.querySelector(`[data-decoration-id="${gt.decorationId}"]`);ke={editor:ze,range:gt.range,query:gt.query,text:gt.text,items:[],command:Ot=>be({editor:ze,range:gt.range,props:Ot}),decorationNode:Nt,clientRect:Nt?()=>{var Ot;const{decorationId:yt}=(Ot=this.key)===null||Ot===void 0?void 0:Ot.getState(ze.state),st=He.dom.querySelector(`[data-decoration-id="${yt}"]`);return st?.getBoundingClientRect()||null}:null},dt&&((ge=Me?.onBeforeStart)===null||ge===void 0||ge.call(Me,ke)),Et&&((D=Me?.onBeforeUpdate)===null||D===void 0||D.call(Me,ke)),(Et||dt)&&(ke.items=await Re({editor:ze,query:gt.query})),rt&&((j=Me?.onExit)===null||j===void 0||j.call(Me,ke)),Et&&((U=Me?.onUpdate)===null||U===void 0||U.call(Me,ke)),dt&&((ue=Me?.onStart)===null||ue===void 0||ue.call(Me,ke))},destroy:()=>{var He;ke&&((He=Me?.onExit)===null||He===void 0||He.call(Me,ke))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(He,Te,Ee,et){const{isEditable:ge}=ze,{composing:D}=ze.view,{selection:j}=He,{empty:U,from:ue}=j,ae={...Te};if(ae.composing=D,ge&&(U||ze.view.composing)){(ue<Te.range.from||ue>Te.range.to)&&!D&&!Te.composing&&(ae.active=!1);const xe=Pe({char:we,allowSpaces:Ge,allowToIncludeChar:Ye,allowedPrefixes:Ce,startOfLine:ct,$position:j.$from}),Oe=`id_${Math.floor(Math.random()*4294967295)}`;xe&&Ne({editor:ze,state:et,range:xe.range,isActive:Te.active})?(ae.active=!0,ae.decorationId=Te.decorationId?Te.decorationId:Oe,ae.range=xe.range,ae.query=xe.query,ae.text=xe.text):ae.active=!1}else ae.active=!1;return ae.active||(ae.decorationId=null,ae.range={from:0,to:0},ae.query=null,ae.text=null),ae}},props:{handleKeyDown(He,Te){var Ee;const{active:et,range:ge}=mt.getState(He.state);return et&&((Ee=Me?.onKeyDown)===null||Ee===void 0?void 0:Ee.call(Me,{view:He,event:Te,range:ge}))||!1},decorations(He){const{active:Te,range:Ee,decorationId:et,query:ge}=mt.getState(He);if(!Te)return null;const D=!ge?.length,j=[Ke];return D&&j.push(Ie),De.EH.create(He.doc,[De.p.inline(Ee.from,Ee.to,{nodeName:it,class:j.join(" "),"data-decoration-id":et,"data-decoration-content":fe})])}}});return mt}},57557:function(Zt,Tt,$e){$e.d(Tt,{$:function(){return Ke},h:function(){return it}});for(var N={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},De={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ct=typeof navigator<"u"&&/Mac/.test(navigator.platform),de=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ie=0;ie<10;ie++)N[48+ie]=N[96+ie]=String(ie);for(var ie=1;ie<=24;ie++)N[ie+111]="F"+ie;for(var ie=65;ie<=90;ie++)N[ie]=String.fromCharCode(ie+32),De[ie]=String.fromCharCode(ie);for(var lt in N)De.hasOwnProperty(lt)||(De[lt]=N[lt]);function tt(fe){var Ie=Ct&&fe.metaKey&&fe.shiftKey&&!fe.ctrlKey&&!fe.altKey||de&&fe.shiftKey&&fe.key&&fe.key.length==1||fe.key=="Unidentified",be=!Ie&&fe.key||(fe.shiftKey?De:N)[fe.keyCode]||fe.key||"Unidentified";return be=="Esc"&&(be="Escape"),be=="Del"&&(be="Delete"),be=="Left"&&(be="ArrowLeft"),be=="Up"&&(be="ArrowUp"),be=="Right"&&(be="ArrowRight"),be=="Down"&&(be="ArrowDown"),be}var ze=$e(65574);const we=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Ge=typeof navigator<"u"&&/Win/.test(navigator.platform);function Ye(fe){let Ie=fe.split(/-(?!$)/),be=Ie[Ie.length-1];be=="Space"&&(be=" ");let Re,Le,Ne,Pe;for(let ke=0;ke<Ie.length-1;ke++){let Me=Ie[ke];if(/^(cmd|meta|m)$/i.test(Me))Pe=!0;else if(/^a(lt)?$/i.test(Me))Re=!0;else if(/^(c|ctrl|control)$/i.test(Me))Le=!0;else if(/^s(hift)?$/i.test(Me))Ne=!0;else if(/^mod$/i.test(Me))we?Pe=!0:Le=!0;else throw new Error("Unrecognized modifier name: "+Me)}return Re&&(be="Alt-"+be),Le&&(be="Ctrl-"+be),Pe&&(be="Meta-"+be),Ne&&(be="Shift-"+be),be}function Ce(fe){let Ie=Object.create(null);for(let be in fe)Ie[Ye(be)]=fe[be];return Ie}function ct(fe,Ie,be=!0){return Ie.altKey&&(fe="Alt-"+fe),Ie.ctrlKey&&(fe="Ctrl-"+fe),Ie.metaKey&&(fe="Meta-"+fe),be&&Ie.shiftKey&&(fe="Shift-"+fe),fe}function it(fe){return new ze.Sy({props:{handleKeyDown:Ke(fe)}})}function Ke(fe){let Ie=Ce(fe);return function(be,Re){let Le=tt(Re),Ne,Pe=Ie[ct(Le,Re)];if(Pe&&Pe(be.state,be.dispatch,be))return!0;if(Le.length==1&&Le!=" "){if(Re.shiftKey){let ke=Ie[ct(Le,Re,!1)];if(ke&&ke(be.state,be.dispatch,be))return!0}if((Re.altKey||Re.metaKey||Re.ctrlKey)&&!(Ge&&Re.ctrlKey&&Re.altKey)&&(Ne=N[Re.keyCode])&&Ne!=Le){let ke=Ie[ct(Ne,Re)];if(ke&&ke(be.state,be.dispatch,be))return!0}}return!1}}},56384:function(Zt,Tt,$e){$e.d(Tt,{aw:function(){return ne},PW:function(){return A},HY:function(){return ie},vc:function(){return we},ZU:function(){return At},NB:function(){return ge},Ts:function(){return Ee},e4:function(){return Ge},V_:function(){return ce},p2:function(){return Ye}});function N(v){this.content=v}N.prototype={constructor:N,find:function(v){for(var o=0;o<this.content.length;o+=2)if(this.content[o]===v)return o;return-1},get:function(v){var o=this.find(v);return o==-1?void 0:this.content[o+1]},update:function(v,o,c){var m=c&&c!=v?this.remove(c):this,k=m.find(v),C=m.content.slice();return k==-1?C.push(c||v,o):(C[k+1]=o,c&&(C[k]=c)),new N(C)},remove:function(v){var o=this.find(v);if(o==-1)return this;var c=this.content.slice();return c.splice(o,2),new N(c)},addToStart:function(v,o){return new N([v,o].concat(this.remove(v).content))},addToEnd:function(v,o){var c=this.remove(v).content.slice();return c.push(v,o),new N(c)},addBefore:function(v,o,c){var m=this.remove(o),k=m.content.slice(),C=m.find(v);return k.splice(C==-1?k.length:C,0,o,c),new N(k)},forEach:function(v){for(var o=0;o<this.content.length;o+=2)v(this.content[o],this.content[o+1])},prepend:function(v){return v=N.from(v),v.size?new N(v.content.concat(this.subtract(v).content)):this},append:function(v){return v=N.from(v),v.size?new N(this.subtract(v).content.concat(v.content)):this},subtract:function(v){var o=this;v=N.from(v);for(var c=0;c<v.content.length;c+=2)o=o.remove(v.content[c]);return o},toObject:function(){var v={};return this.forEach(function(o,c){v[o]=c}),v},get size(){return this.content.length>>1}},N.from=function(v){if(v instanceof N)return v;var o=[];if(v)for(var c in v)o.push(c,v[c]);return new N(o)};var De=N;function Ct(v,o,c){for(let m=0;;m++){if(m==v.childCount||m==o.childCount)return v.childCount==o.childCount?null:c;let k=v.child(m),C=o.child(m);if(k==C){c+=k.nodeSize;continue}if(!k.sameMarkup(C))return c;if(k.isText&&k.text!=C.text){for(let I=0;k.text[I]==C.text[I];I++)c++;return c}if(k.content.size||C.content.size){let I=Ct(k.content,C.content,c+1);if(I!=null)return I}c+=k.nodeSize}}function de(v,o,c,m){for(let k=v.childCount,C=o.childCount;;){if(k==0||C==0)return k==C?null:{a:c,b:m};let I=v.child(--k),H=o.child(--C),K=I.nodeSize;if(I==H){c-=K,m-=K;continue}if(!I.sameMarkup(H))return{a:c,b:m};if(I.isText&&I.text!=H.text){let he=0,Ae=Math.min(I.text.length,H.text.length);for(;he<Ae&&I.text[I.text.length-he-1]==H.text[H.text.length-he-1];)he++,c--,m--;return{a:c,b:m}}if(I.content.size||H.content.size){let he=de(I.content,H.content,c-1,m-1);if(he)return he}c-=K,m-=K}}class ie{constructor(o,c){if(this.content=o,this.size=c||0,c==null)for(let m=0;m<o.length;m++)this.size+=o[m].nodeSize}nodesBetween(o,c,m,k=0,C){for(let I=0,H=0;H<c;I++){let K=this.content[I],he=H+K.nodeSize;if(he>o&&m(K,k+H,C||null,I)!==!1&&K.content.size){let Ae=H+1;K.nodesBetween(Math.max(0,o-Ae),Math.min(K.content.size,c-Ae),m,k+Ae)}H=he}}descendants(o){this.nodesBetween(0,this.size,o)}textBetween(o,c,m,k){let C="",I=!0;return this.nodesBetween(o,c,(H,K)=>{let he=H.isText?H.text.slice(Math.max(o,K)-K,c-K):H.isLeaf?k?typeof k=="function"?k(H):k:H.type.spec.leafText?H.type.spec.leafText(H):"":"";H.isBlock&&(H.isLeaf&&he||H.isTextblock)&&m&&(I?I=!1:C+=m),C+=he},0),C}append(o){if(!o.size)return this;if(!this.size)return o;let c=this.lastChild,m=o.firstChild,k=this.content.slice(),C=0;for(c.isText&&c.sameMarkup(m)&&(k[k.length-1]=c.withText(c.text+m.text),C=1);C<o.content.length;C++)k.push(o.content[C]);return new ie(k,this.size+o.size)}cut(o,c=this.size){if(o==0&&c==this.size)return this;let m=[],k=0;if(c>o)for(let C=0,I=0;I<c;C++){let H=this.content[C],K=I+H.nodeSize;K>o&&((I<o||K>c)&&(H.isText?H=H.cut(Math.max(0,o-I),Math.min(H.text.length,c-I)):H=H.cut(Math.max(0,o-I-1),Math.min(H.content.size,c-I-1))),m.push(H),k+=H.nodeSize),I=K}return new ie(m,k)}cutByIndex(o,c){return o==c?ie.empty:o==0&&c==this.content.length?this:new ie(this.content.slice(o,c))}replaceChild(o,c){let m=this.content[o];if(m==c)return this;let k=this.content.slice(),C=this.size+c.nodeSize-m.nodeSize;return k[o]=c,new ie(k,C)}addToStart(o){return new ie([o].concat(this.content),this.size+o.nodeSize)}addToEnd(o){return new ie(this.content.concat(o),this.size+o.nodeSize)}eq(o){if(this.content.length!=o.content.length)return!1;for(let c=0;c<this.content.length;c++)if(!this.content[c].eq(o.content[c]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(o){let c=this.content[o];if(!c)throw new RangeError("Index "+o+" out of range for "+this);return c}maybeChild(o){return this.content[o]||null}forEach(o){for(let c=0,m=0;c<this.content.length;c++){let k=this.content[c];o(k,m,c),m+=k.nodeSize}}findDiffStart(o,c=0){return Ct(this,o,c)}findDiffEnd(o,c=this.size,m=o.size){return de(this,o,c,m)}findIndex(o){if(o==0)return tt(0,o);if(o==this.size)return tt(this.content.length,o);if(o>this.size||o<0)throw new RangeError(`Position ${o} outside of fragment (${this})`);for(let c=0,m=0;;c++){let k=this.child(c),C=m+k.nodeSize;if(C>=o)return C==o?tt(c+1,C):tt(c,m);m=C}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(o=>o.toJSON()):null}static fromJSON(o,c){if(!c)return ie.empty;if(!Array.isArray(c))throw new RangeError("Invalid input for Fragment.fromJSON");return new ie(c.map(o.nodeFromJSON))}static fromArray(o){if(!o.length)return ie.empty;let c,m=0;for(let k=0;k<o.length;k++){let C=o[k];m+=C.nodeSize,k&&C.isText&&o[k-1].sameMarkup(C)?(c||(c=o.slice(0,k)),c[c.length-1]=C.withText(c[c.length-1].text+C.text)):c&&c.push(C)}return new ie(c||o,m)}static from(o){if(!o)return ie.empty;if(o instanceof ie)return o;if(Array.isArray(o))return this.fromArray(o);if(o.attrs)return new ie([o],o.nodeSize);throw new RangeError("Can not convert "+o+" to a Fragment"+(o.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ie.empty=new ie([],0);const lt={index:0,offset:0};function tt(v,o){return lt.index=v,lt.offset=o,lt}function ze(v,o){if(v===o)return!0;if(!(v&&typeof v=="object")||!(o&&typeof o=="object"))return!1;let c=Array.isArray(v);if(Array.isArray(o)!=c)return!1;if(c){if(v.length!=o.length)return!1;for(let m=0;m<v.length;m++)if(!ze(v[m],o[m]))return!1}else{for(let m in v)if(!(m in o)||!ze(v[m],o[m]))return!1;for(let m in o)if(!(m in v))return!1}return!0}class we{constructor(o,c){this.type=o,this.attrs=c}addToSet(o){let c,m=!1;for(let k=0;k<o.length;k++){let C=o[k];if(this.eq(C))return o;if(this.type.excludes(C.type))c||(c=o.slice(0,k));else{if(C.type.excludes(this.type))return o;!m&&C.type.rank>this.type.rank&&(c||(c=o.slice(0,k)),c.push(this),m=!0),c&&c.push(C)}}return c||(c=o.slice()),m||c.push(this),c}removeFromSet(o){for(let c=0;c<o.length;c++)if(this.eq(o[c]))return o.slice(0,c).concat(o.slice(c+1));return o}isInSet(o){for(let c=0;c<o.length;c++)if(this.eq(o[c]))return!0;return!1}eq(o){return this==o||this.type==o.type&&ze(this.attrs,o.attrs)}toJSON(){let o={type:this.type.name};for(let c in this.attrs){o.attrs=this.attrs;break}return o}static fromJSON(o,c){if(!c)throw new RangeError("Invalid input for Mark.fromJSON");let m=o.marks[c.type];if(!m)throw new RangeError(`There is no mark type ${c.type} in this schema`);let k=m.create(c.attrs);return m.checkAttrs(k.attrs),k}static sameSet(o,c){if(o==c)return!0;if(o.length!=c.length)return!1;for(let m=0;m<o.length;m++)if(!o[m].eq(c[m]))return!1;return!0}static setFrom(o){if(!o||Array.isArray(o)&&o.length==0)return we.none;if(o instanceof we)return[o];let c=o.slice();return c.sort((m,k)=>m.type.rank-k.type.rank),c}}we.none=[];class Ge extends Error{}class Ye{constructor(o,c,m){this.content=o,this.openStart=c,this.openEnd=m}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(o,c){let m=ct(this.content,o+this.openStart,c);return m&&new Ye(m,this.openStart,this.openEnd)}removeBetween(o,c){return new Ye(Ce(this.content,o+this.openStart,c+this.openStart),this.openStart,this.openEnd)}eq(o){return this.content.eq(o.content)&&this.openStart==o.openStart&&this.openEnd==o.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let o={content:this.content.toJSON()};return this.openStart>0&&(o.openStart=this.openStart),this.openEnd>0&&(o.openEnd=this.openEnd),o}static fromJSON(o,c){if(!c)return Ye.empty;let m=c.openStart||0,k=c.openEnd||0;if(typeof m!="number"||typeof k!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ye(ie.fromJSON(o,c.content),m,k)}static maxOpen(o,c=!0){let m=0,k=0;for(let C=o.firstChild;C&&!C.isLeaf&&(c||!C.type.spec.isolating);C=C.firstChild)m++;for(let C=o.lastChild;C&&!C.isLeaf&&(c||!C.type.spec.isolating);C=C.lastChild)k++;return new Ye(o,m,k)}}Ye.empty=new Ye(ie.empty,0,0);function Ce(v,o,c){let{index:m,offset:k}=v.findIndex(o),C=v.maybeChild(m),{index:I,offset:H}=v.findIndex(c);if(k==o||C.isText){if(H!=c&&!v.child(I).isText)throw new RangeError("Removing non-flat range");return v.cut(0,o).append(v.cut(c))}if(m!=I)throw new RangeError("Removing non-flat range");return v.replaceChild(m,C.copy(Ce(C.content,o-k-1,c-k-1)))}function ct(v,o,c,m){let{index:k,offset:C}=v.findIndex(o),I=v.maybeChild(k);if(C==o||I.isText)return m&&!m.canReplace(k,k,c)?null:v.cut(0,o).append(c).append(v.cut(o));let H=ct(I.content,o-C-1,c,I);return H&&v.replaceChild(k,I.copy(H))}function it(v,o,c){if(c.openStart>v.depth)throw new Ge("Inserted content deeper than insertion position");if(v.depth-c.openStart!=o.depth-c.openEnd)throw new Ge("Inconsistent open depths");return Ke(v,o,c,0)}function Ke(v,o,c,m){let k=v.index(m),C=v.node(m);if(k==o.index(m)&&m<v.depth-c.openStart){let I=Ke(v,o,c,m+1);return C.copy(C.content.replaceChild(k,I))}else if(c.content.size)if(!c.openStart&&!c.openEnd&&v.depth==m&&o.depth==m){let I=v.parent,H=I.content;return Le(I,H.cut(0,v.parentOffset).append(c.content).append(H.cut(o.parentOffset)))}else{let{start:I,end:H}=ke(c,v);return Le(C,Ne(v,I,H,o,m))}else return Le(C,Pe(v,o,m))}function fe(v,o){if(!o.type.compatibleContent(v.type))throw new Ge("Cannot join "+o.type.name+" onto "+v.type.name)}function Ie(v,o,c){let m=v.node(c);return fe(m,o.node(c)),m}function be(v,o){let c=o.length-1;c>=0&&v.isText&&v.sameMarkup(o[c])?o[c]=v.withText(o[c].text+v.text):o.push(v)}function Re(v,o,c,m){let k=(o||v).node(c),C=0,I=o?o.index(c):k.childCount;v&&(C=v.index(c),v.depth>c?C++:v.textOffset&&(be(v.nodeAfter,m),C++));for(let H=C;H<I;H++)be(k.child(H),m);o&&o.depth==c&&o.textOffset&&be(o.nodeBefore,m)}function Le(v,o){return v.type.checkContent(o),v.copy(o)}function Ne(v,o,c,m,k){let C=v.depth>k&&Ie(v,o,k+1),I=m.depth>k&&Ie(c,m,k+1),H=[];return Re(null,v,k,H),C&&I&&o.index(k)==c.index(k)?(fe(C,I),be(Le(C,Ne(v,o,c,m,k+1)),H)):(C&&be(Le(C,Pe(v,o,k+1)),H),Re(o,c,k,H),I&&be(Le(I,Pe(c,m,k+1)),H)),Re(m,null,k,H),new ie(H)}function Pe(v,o,c){let m=[];if(Re(null,v,c,m),v.depth>c){let k=Ie(v,o,c+1);be(Le(k,Pe(v,o,c+1)),m)}return Re(o,null,c,m),new ie(m)}function ke(v,o){let c=o.depth-v.openStart,k=o.node(c).copy(v.content);for(let C=c-1;C>=0;C--)k=o.node(C).copy(ie.from(k));return{start:k.resolveNoCache(v.openStart+c),end:k.resolveNoCache(k.content.size-v.openEnd-c)}}class Me{constructor(o,c,m){this.pos=o,this.path=c,this.parentOffset=m,this.depth=c.length/3-1}resolveDepth(o){return o==null?this.depth:o<0?this.depth+o:o}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(o){return this.path[this.resolveDepth(o)*3]}index(o){return this.path[this.resolveDepth(o)*3+1]}indexAfter(o){return o=this.resolveDepth(o),this.index(o)+(o==this.depth&&!this.textOffset?0:1)}start(o){return o=this.resolveDepth(o),o==0?0:this.path[o*3-1]+1}end(o){return o=this.resolveDepth(o),this.start(o)+this.node(o).content.size}before(o){if(o=this.resolveDepth(o),!o)throw new RangeError("There is no position before the top-level node");return o==this.depth+1?this.pos:this.path[o*3-1]}after(o){if(o=this.resolveDepth(o),!o)throw new RangeError("There is no position after the top-level node");return o==this.depth+1?this.pos:this.path[o*3-1]+this.path[o*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let o=this.parent,c=this.index(this.depth);if(c==o.childCount)return null;let m=this.pos-this.path[this.path.length-1],k=o.child(c);return m?o.child(c).cut(m):k}get nodeBefore(){let o=this.index(this.depth),c=this.pos-this.path[this.path.length-1];return c?this.parent.child(o).cut(0,c):o==0?null:this.parent.child(o-1)}posAtIndex(o,c){c=this.resolveDepth(c);let m=this.path[c*3],k=c==0?0:this.path[c*3-1]+1;for(let C=0;C<o;C++)k+=m.child(C).nodeSize;return k}marks(){let o=this.parent,c=this.index();if(o.content.size==0)return we.none;if(this.textOffset)return o.child(c).marks;let m=o.maybeChild(c-1),k=o.maybeChild(c);if(!m){let H=m;m=k,k=H}let C=m.marks;for(var I=0;I<C.length;I++)C[I].type.spec.inclusive===!1&&(!k||!C[I].isInSet(k.marks))&&(C=C[I--].removeFromSet(C));return C}marksAcross(o){let c=this.parent.maybeChild(this.index());if(!c||!c.isInline)return null;let m=c.marks,k=o.parent.maybeChild(o.index());for(var C=0;C<m.length;C++)m[C].type.spec.inclusive===!1&&(!k||!m[C].isInSet(k.marks))&&(m=m[C--].removeFromSet(m));return m}sharedDepth(o){for(let c=this.depth;c>0;c--)if(this.start(c)<=o&&this.end(c)>=o)return c;return 0}blockRange(o=this,c){if(o.pos<this.pos)return o.blockRange(this);for(let m=this.depth-(this.parent.inlineContent||this.pos==o.pos?1:0);m>=0;m--)if(o.pos<=this.end(m)&&(!c||c(this.node(m))))return new Ee(this,o,m);return null}sameParent(o){return this.pos-this.parentOffset==o.pos-o.parentOffset}max(o){return o.pos>this.pos?o:this}min(o){return o.pos<this.pos?o:this}toString(){let o="";for(let c=1;c<=this.depth;c++)o+=(o?"/":"")+this.node(c).type.name+"_"+this.index(c-1);return o+":"+this.parentOffset}static resolve(o,c){if(!(c>=0&&c<=o.content.size))throw new RangeError("Position "+c+" out of range");let m=[],k=0,C=c;for(let I=o;;){let{index:H,offset:K}=I.content.findIndex(C),he=C-K;if(m.push(I,H,k+K),!he||(I=I.child(H),I.isText))break;C=he-1,k+=K+1}return new Me(c,m,C)}static resolveCached(o,c){let m=Te.get(o);if(m)for(let C=0;C<m.elts.length;C++){let I=m.elts[C];if(I.pos==c)return I}else Te.set(o,m=new mt);let k=m.elts[m.i]=Me.resolve(o,c);return m.i=(m.i+1)%He,k}}class mt{constructor(){this.elts=[],this.i=0}}const He=12,Te=new WeakMap;class Ee{constructor(o,c,m){this.$from=o,this.$to=c,this.depth=m}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const et=Object.create(null);class ge{constructor(o,c,m,k=we.none){this.type=o,this.attrs=c,this.marks=k,this.content=m||ie.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(o){return this.content.child(o)}maybeChild(o){return this.content.maybeChild(o)}forEach(o){this.content.forEach(o)}nodesBetween(o,c,m,k=0){this.content.nodesBetween(o,c,m,k,this)}descendants(o){this.nodesBetween(0,this.content.size,o)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(o,c,m,k){return this.content.textBetween(o,c,m,k)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(o){return this==o||this.sameMarkup(o)&&this.content.eq(o.content)}sameMarkup(o){return this.hasMarkup(o.type,o.attrs,o.marks)}hasMarkup(o,c,m){return this.type==o&&ze(this.attrs,c||o.defaultAttrs||et)&&we.sameSet(this.marks,m||we.none)}copy(o=null){return o==this.content?this:new ge(this.type,this.attrs,o,this.marks)}mark(o){return o==this.marks?this:new ge(this.type,this.attrs,this.content,o)}cut(o,c=this.content.size){return o==0&&c==this.content.size?this:this.copy(this.content.cut(o,c))}slice(o,c=this.content.size,m=!1){if(o==c)return Ye.empty;let k=this.resolve(o),C=this.resolve(c),I=m?0:k.sharedDepth(c),H=k.start(I),he=k.node(I).content.cut(k.pos-H,C.pos-H);return new Ye(he,k.depth-I,C.depth-I)}replace(o,c,m){return it(this.resolve(o),this.resolve(c),m)}nodeAt(o){for(let c=this;;){let{index:m,offset:k}=c.content.findIndex(o);if(c=c.maybeChild(m),!c)return null;if(k==o||c.isText)return c;o-=k+1}}childAfter(o){let{index:c,offset:m}=this.content.findIndex(o);return{node:this.content.maybeChild(c),index:c,offset:m}}childBefore(o){if(o==0)return{node:null,index:0,offset:0};let{index:c,offset:m}=this.content.findIndex(o);if(m<o)return{node:this.content.child(c),index:c,offset:m};let k=this.content.child(c-1);return{node:k,index:c-1,offset:m-k.nodeSize}}resolve(o){return Me.resolveCached(this,o)}resolveNoCache(o){return Me.resolve(this,o)}rangeHasMark(o,c,m){let k=!1;return c>o&&this.nodesBetween(o,c,C=>(m.isInSet(C.marks)&&(k=!0),!k)),k}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let o=this.type.name;return this.content.size&&(o+="("+this.content.toStringInner()+")"),j(this.marks,o)}contentMatchAt(o){let c=this.type.contentMatch.matchFragment(this.content,0,o);if(!c)throw new Error("Called contentMatchAt on a node with invalid content");return c}canReplace(o,c,m=ie.empty,k=0,C=m.childCount){let I=this.contentMatchAt(o).matchFragment(m,k,C),H=I&&I.matchFragment(this.content,c);if(!H||!H.validEnd)return!1;for(let K=k;K<C;K++)if(!this.type.allowsMarks(m.child(K).marks))return!1;return!0}canReplaceWith(o,c,m,k){if(k&&!this.type.allowsMarks(k))return!1;let C=this.contentMatchAt(o).matchType(m),I=C&&C.matchFragment(this.content,c);return I?I.validEnd:!1}canAppend(o){return o.content.size?this.canReplace(this.childCount,this.childCount,o.content):this.type.compatibleContent(o.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let o=we.none;for(let c=0;c<this.marks.length;c++){let m=this.marks[c];m.type.checkAttrs(m.attrs),o=m.addToSet(o)}if(!we.sameSet(o,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(c=>c.type.name)}`);this.content.forEach(c=>c.check())}toJSON(){let o={type:this.type.name};for(let c in this.attrs){o.attrs=this.attrs;break}return this.content.size&&(o.content=this.content.toJSON()),this.marks.length&&(o.marks=this.marks.map(c=>c.toJSON())),o}static fromJSON(o,c){if(!c)throw new RangeError("Invalid input for Node.fromJSON");let m;if(c.marks){if(!Array.isArray(c.marks))throw new RangeError("Invalid mark data for Node.fromJSON");m=c.marks.map(o.markFromJSON)}if(c.type=="text"){if(typeof c.text!="string")throw new RangeError("Invalid text node in JSON");return o.text(c.text,m)}let k=ie.fromJSON(o,c.content),C=o.nodeType(c.type).create(c.attrs,k,m);return C.type.checkAttrs(C.attrs),C}}ge.prototype.text=void 0;class D extends ge{constructor(o,c,m,k){if(super(o,c,null,k),!m)throw new RangeError("Empty text nodes are not allowed");this.text=m}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):j(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(o,c){return this.text.slice(o,c)}get nodeSize(){return this.text.length}mark(o){return o==this.marks?this:new D(this.type,this.attrs,this.text,o)}withText(o){return o==this.text?this:new D(this.type,this.attrs,o,this.marks)}cut(o=0,c=this.text.length){return o==0&&c==this.text.length?this:this.withText(this.text.slice(o,c))}eq(o){return this.sameMarkup(o)&&this.text==o.text}toJSON(){let o=super.toJSON();return o.text=this.text,o}}function j(v,o){for(let c=v.length-1;c>=0;c--)o=v[c].type.name+"("+o+")";return o}class U{constructor(o){this.validEnd=o,this.next=[],this.wrapCache=[]}static parse(o,c){let m=new ue(o,c);if(m.next==null)return U.empty;let k=ae(m);m.next&&m.err("Unexpected trailing text");let C=Nt(Et(k));return Ot(C,m),C}matchType(o){for(let c=0;c<this.next.length;c++)if(this.next[c].type==o)return this.next[c].next;return null}matchFragment(o,c=0,m=o.childCount){let k=this;for(let C=c;k&&C<m;C++)k=k.matchType(o.child(C).type);return k}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let o=0;o<this.next.length;o++){let{type:c}=this.next[o];if(!(c.isText||c.hasRequiredAttrs()))return c}return null}compatible(o){for(let c=0;c<this.next.length;c++)for(let m=0;m<o.next.length;m++)if(this.next[c].type==o.next[m].type)return!0;return!1}fillBefore(o,c=!1,m=0){let k=[this];function C(I,H){let K=I.matchFragment(o,m);if(K&&(!c||K.validEnd))return ie.from(H.map(he=>he.createAndFill()));for(let he=0;he<I.next.length;he++){let{type:Ae,next:E}=I.next[he];if(!(Ae.isText||Ae.hasRequiredAttrs())&&k.indexOf(E)==-1){k.push(E);let O=C(E,H.concat(Ae));if(O)return O}}return null}return C(this,[])}findWrapping(o){for(let m=0;m<this.wrapCache.length;m+=2)if(this.wrapCache[m]==o)return this.wrapCache[m+1];let c=this.computeWrapping(o);return this.wrapCache.push(o,c),c}computeWrapping(o){let c=Object.create(null),m=[{match:this,type:null,via:null}];for(;m.length;){let k=m.shift(),C=k.match;if(C.matchType(o)){let I=[];for(let H=k;H.type;H=H.via)I.push(H.type);return I.reverse()}for(let I=0;I<C.next.length;I++){let{type:H,next:K}=C.next[I];!H.isLeaf&&!H.hasRequiredAttrs()&&!(H.name in c)&&(!k.type||K.validEnd)&&(m.push({match:H.contentMatch,type:H,via:k}),c[H.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(o){if(o>=this.next.length)throw new RangeError(`There's no ${o}th edge in this content match`);return this.next[o]}toString(){let o=[];function c(m){o.push(m);for(let k=0;k<m.next.length;k++)o.indexOf(m.next[k].next)==-1&&c(m.next[k].next)}return c(this),o.map((m,k)=>{let C=k+(m.validEnd?"*":" ")+" ";for(let I=0;I<m.next.length;I++)C+=(I?", ":"")+m.next[I].type.name+"->"+o.indexOf(m.next[I].next);return C}).join(`
`)}}U.empty=new U(!0);class ue{constructor(o,c){this.string=o,this.nodeTypes=c,this.inline=null,this.pos=0,this.tokens=o.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(o){return this.next==o&&(this.pos++||!0)}err(o){throw new SyntaxError(o+" (in content expression '"+this.string+"')")}}function ae(v){let o=[];do o.push(xe(v));while(v.eat("|"));return o.length==1?o[0]:{type:"choice",exprs:o}}function xe(v){let o=[];do o.push(Oe(v));while(v.next&&v.next!=")"&&v.next!="|");return o.length==1?o[0]:{type:"seq",exprs:o}}function Oe(v){let o=dt(v);for(;;)if(v.eat("+"))o={type:"plus",expr:o};else if(v.eat("*"))o={type:"star",expr:o};else if(v.eat("?"))o={type:"opt",expr:o};else if(v.eat("{"))o=ut(v,o);else break;return o}function je(v){/\D/.test(v.next)&&v.err("Expected number, got '"+v.next+"'");let o=Number(v.next);return v.pos++,o}function ut(v,o){let c=je(v),m=c;return v.eat(",")&&(v.next!="}"?m=je(v):m=-1),v.eat("}")||v.err("Unclosed braced range"),{type:"range",min:c,max:m,expr:o}}function at(v,o){let c=v.nodeTypes,m=c[o];if(m)return[m];let k=[];for(let C in c){let I=c[C];I.isInGroup(o)&&k.push(I)}return k.length==0&&v.err("No node type or group '"+o+"' found"),k}function dt(v){if(v.eat("(")){let o=ae(v);return v.eat(")")||v.err("Missing closing paren"),o}else if(/\W/.test(v.next))v.err("Unexpected token '"+v.next+"'");else{let o=at(v,v.next).map(c=>(v.inline==null?v.inline=c.isInline:v.inline!=c.isInline&&v.err("Mixing inline and block content"),{type:"name",value:c}));return v.pos++,o.length==1?o[0]:{type:"choice",exprs:o}}}function Et(v){let o=[[]];return k(C(v,0),c()),o;function c(){return o.push([])-1}function m(I,H,K){let he={term:K,to:H};return o[I].push(he),he}function k(I,H){I.forEach(K=>K.to=H)}function C(I,H){if(I.type=="choice")return I.exprs.reduce((K,he)=>K.concat(C(he,H)),[]);if(I.type=="seq")for(let K=0;;K++){let he=C(I.exprs[K],H);if(K==I.exprs.length-1)return he;k(he,H=c())}else if(I.type=="star"){let K=c();return m(H,K),k(C(I.expr,K),K),[m(K)]}else if(I.type=="plus"){let K=c();return k(C(I.expr,H),K),k(C(I.expr,K),K),[m(K)]}else{if(I.type=="opt")return[m(H)].concat(C(I.expr,H));if(I.type=="range"){let K=H;for(let he=0;he<I.min;he++){let Ae=c();k(C(I.expr,K),Ae),K=Ae}if(I.max==-1)k(C(I.expr,K),K);else for(let he=I.min;he<I.max;he++){let Ae=c();m(K,Ae),k(C(I.expr,K),Ae),K=Ae}return[m(K)]}else{if(I.type=="name")return[m(H,void 0,I.value)];throw new Error("Unknown expr type")}}}}function rt(v,o){return o-v}function gt(v,o){let c=[];return m(o),c.sort(rt);function m(k){let C=v[k];if(C.length==1&&!C[0].term)return m(C[0].to);c.push(k);for(let I=0;I<C.length;I++){let{term:H,to:K}=C[I];!H&&c.indexOf(K)==-1&&m(K)}}}function Nt(v){let o=Object.create(null);return c(gt(v,0));function c(m){let k=[];m.forEach(I=>{v[I].forEach(({term:H,to:K})=>{if(!H)return;let he;for(let Ae=0;Ae<k.length;Ae++)k[Ae][0]==H&&(he=k[Ae][1]);gt(v,K).forEach(Ae=>{he||k.push([H,he=[]]),he.indexOf(Ae)==-1&&he.push(Ae)})})});let C=o[m.join(",")]=new U(m.indexOf(v.length-1)>-1);for(let I=0;I<k.length;I++){let H=k[I][1].sort(rt);C.next.push({type:k[I][0],next:o[H.join(",")]||c(H)})}return C}}function Ot(v,o){for(let c=0,m=[v];c<m.length;c++){let k=m[c],C=!k.validEnd,I=[];for(let H=0;H<k.next.length;H++){let{type:K,next:he}=k.next[H];I.push(K.name),C&&!(K.isText||K.hasRequiredAttrs())&&(C=!1),m.indexOf(he)==-1&&m.push(he)}C&&o.err("Only non-generatable nodes ("+I.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function yt(v){let o=Object.create(null);for(let c in v){let m=v[c];if(!m.hasDefault)return null;o[c]=m.default}return o}function st(v,o){let c=Object.create(null);for(let m in v){let k=o&&o[m];if(k===void 0){let C=v[m];if(C.hasDefault)k=C.default;else throw new RangeError("No value supplied for attribute "+m)}c[m]=k}return c}function Ft(v,o,c,m){for(let k in o)if(!(k in v))throw new RangeError(`Unsupported attribute ${k} for ${c} of type ${k}`);for(let k in v){let C=v[k];C.validate&&C.validate(o[k])}}function kt(v,o){let c=Object.create(null);if(o)for(let m in o)c[m]=new Rt(v,m,o[m]);return c}class xt{constructor(o,c,m){this.name=o,this.schema=c,this.spec=m,this.markSet=null,this.groups=m.group?m.group.split(" "):[],this.attrs=kt(o,m.attrs),this.defaultAttrs=yt(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(m.inline||o=="text"),this.isText=o=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==U.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(o){return this.groups.indexOf(o)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let o in this.attrs)if(this.attrs[o].isRequired)return!0;return!1}compatibleContent(o){return this==o||this.contentMatch.compatible(o.contentMatch)}computeAttrs(o){return!o&&this.defaultAttrs?this.defaultAttrs:st(this.attrs,o)}create(o=null,c,m){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ge(this,this.computeAttrs(o),ie.from(c),we.setFrom(m))}createChecked(o=null,c,m){return c=ie.from(c),this.checkContent(c),new ge(this,this.computeAttrs(o),c,we.setFrom(m))}createAndFill(o=null,c,m){if(o=this.computeAttrs(o),c=ie.from(c),c.size){let I=this.contentMatch.fillBefore(c);if(!I)return null;c=I.append(c)}let k=this.contentMatch.matchFragment(c),C=k&&k.fillBefore(ie.empty,!0);return C?new ge(this,o,c.append(C),we.setFrom(m)):null}validContent(o){let c=this.contentMatch.matchFragment(o);if(!c||!c.validEnd)return!1;for(let m=0;m<o.childCount;m++)if(!this.allowsMarks(o.child(m).marks))return!1;return!0}checkContent(o){if(!this.validContent(o))throw new RangeError(`Invalid content for node ${this.name}: ${o.toString().slice(0,50)}`)}checkAttrs(o){Ft(this.attrs,o,"node",this.name)}allowsMarkType(o){return this.markSet==null||this.markSet.indexOf(o)>-1}allowsMarks(o){if(this.markSet==null)return!0;for(let c=0;c<o.length;c++)if(!this.allowsMarkType(o[c].type))return!1;return!0}allowedMarks(o){if(this.markSet==null)return o;let c;for(let m=0;m<o.length;m++)this.allowsMarkType(o[m].type)?c&&c.push(o[m]):c||(c=o.slice(0,m));return c?c.length?c:we.none:o}static compile(o,c){let m=Object.create(null);o.forEach((C,I)=>m[C]=new xt(C,c,I));let k=c.spec.topNode||"doc";if(!m[k])throw new RangeError("Schema is missing its top node type ('"+k+"')");if(!m.text)throw new RangeError("Every schema needs a 'text' type");for(let C in m.text.attrs)throw new RangeError("The text node type should not have attributes");return m}}function zt(v,o,c){let m=c.split("|");return k=>{let C=k===null?"null":typeof k;if(m.indexOf(C)<0)throw new RangeError(`Expected value of type ${m} for attribute ${o} on type ${v}, got ${C}`)}}class Rt{constructor(o,c,m){this.hasDefault=Object.prototype.hasOwnProperty.call(m,"default"),this.default=m.default,this.validate=typeof m.validate=="string"?zt(o,c,m.validate):m.validate}get isRequired(){return!this.hasDefault}}class At{constructor(o,c,m,k){this.name=o,this.rank=c,this.schema=m,this.spec=k,this.attrs=kt(o,k.attrs),this.excluded=null;let C=yt(this.attrs);this.instance=C?new we(this,C):null}create(o=null){return!o&&this.instance?this.instance:new we(this,st(this.attrs,o))}static compile(o,c){let m=Object.create(null),k=0;return o.forEach((C,I)=>m[C]=new At(C,k++,c,I)),m}removeFromSet(o){for(var c=0;c<o.length;c++)o[c].type==this&&(o=o.slice(0,c).concat(o.slice(c+1)),c--);return o}isInSet(o){for(let c=0;c<o.length;c++)if(o[c].type==this)return o[c]}checkAttrs(o){Ft(this.attrs,o,"mark",this.name)}excludes(o){return this.excluded.indexOf(o)>-1}}class ce{constructor(o){this.linebreakReplacement=null,this.cached=Object.create(null);let c=this.spec={};for(let k in o)c[k]=o[k];c.nodes=De.from(o.nodes),c.marks=De.from(o.marks||{}),this.nodes=xt.compile(this.spec.nodes,this),this.marks=At.compile(this.spec.marks,this);let m=Object.create(null);for(let k in this.nodes){if(k in this.marks)throw new RangeError(k+" can not be both a node and a mark");let C=this.nodes[k],I=C.spec.content||"",H=C.spec.marks;if(C.contentMatch=m[I]||(m[I]=U.parse(I,this.nodes)),C.inlineContent=C.contentMatch.inlineContent,C.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!C.isInline||!C.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=C}C.markSet=H=="_"?null:H?W(this,H.split(" ")):H==""||!C.inlineContent?[]:null}for(let k in this.marks){let C=this.marks[k],I=C.spec.excludes;C.excluded=I==null?[C]:I==""?[]:W(this,I.split(" "))}this.nodeFromJSON=k=>ge.fromJSON(this,k),this.markFromJSON=k=>we.fromJSON(this,k),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(o,c=null,m,k){if(typeof o=="string")o=this.nodeType(o);else if(o instanceof xt){if(o.schema!=this)throw new RangeError("Node type from different schema used ("+o.name+")")}else throw new RangeError("Invalid node type: "+o);return o.createChecked(c,m,k)}text(o,c){let m=this.nodes.text;return new D(m,m.defaultAttrs,o,we.setFrom(c))}mark(o,c){return typeof o=="string"&&(o=this.marks[o]),o.create(c)}nodeType(o){let c=this.nodes[o];if(!c)throw new RangeError("Unknown node type: "+o);return c}}function W(v,o){let c=[];for(let m=0;m<o.length;m++){let k=o[m],C=v.marks[k],I=C;if(C)c.push(C);else for(let H in v.marks){let K=v.marks[H];(k=="_"||K.spec.group&&K.spec.group.split(" ").indexOf(k)>-1)&&c.push(I=K)}if(!I)throw new SyntaxError("Unknown mark type: '"+o[m]+"'")}return c}function Q(v){return v.tag!=null}function se(v){return v.style!=null}class ne{constructor(o,c){this.schema=o,this.rules=c,this.tags=[],this.styles=[];let m=this.matchedStyles=[];c.forEach(k=>{if(Q(k))this.tags.push(k);else if(se(k)){let C=/[^=]*/.exec(k.style)[0];m.indexOf(C)<0&&m.push(C),this.styles.push(k)}}),this.normalizeLists=!this.tags.some(k=>{if(!/^(ul|ol)\b/.test(k.tag)||!k.node)return!1;let C=o.nodes[k.node];return C.contentMatch.matchType(C)})}parse(o,c={}){let m=new ft(this,c,!1);return m.addAll(o,we.none,c.from,c.to),m.finish()}parseSlice(o,c={}){let m=new ft(this,c,!0);return m.addAll(o,we.none,c.from,c.to),Ye.maxOpen(m.finish())}matchTag(o,c,m){for(let k=m?this.tags.indexOf(m)+1:0;k<this.tags.length;k++){let C=this.tags[k];if(g(o,C.tag)&&(C.namespace===void 0||o.namespaceURI==C.namespace)&&(!C.context||c.matchesContext(C.context))){if(C.getAttrs){let I=C.getAttrs(o);if(I===!1)continue;C.attrs=I||void 0}return C}}}matchStyle(o,c,m,k){for(let C=k?this.styles.indexOf(k)+1:0;C<this.styles.length;C++){let I=this.styles[C],H=I.style;if(!(H.indexOf(o)!=0||I.context&&!m.matchesContext(I.context)||H.length>o.length&&(H.charCodeAt(o.length)!=61||H.slice(o.length+1)!=c))){if(I.getAttrs){let K=I.getAttrs(c);if(K===!1)continue;I.attrs=K||void 0}return I}}}static schemaRules(o){let c=[];function m(k){let C=k.priority==null?50:k.priority,I=0;for(;I<c.length;I++){let H=c[I];if((H.priority==null?50:H.priority)<C)break}c.splice(I,0,k)}for(let k in o.marks){let C=o.marks[k].spec.parseDOM;C&&C.forEach(I=>{m(I=p(I)),I.mark||I.ignore||I.clearMark||(I.mark=k)})}for(let k in o.nodes){let C=o.nodes[k].spec.parseDOM;C&&C.forEach(I=>{m(I=p(I)),I.node||I.ignore||I.mark||(I.node=k)})}return c}static fromSchema(o){return o.cached.domParser||(o.cached.domParser=new ne(o,ne.schemaRules(o)))}}const pe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Xe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Fe={ol:!0,ul:!0},ot=1,_e=2,We=4;function Ue(v,o,c){return o!=null?(o?ot:0)|(o==="full"?_e:0):v&&v.whitespace=="pre"?ot|_e:c&~We}class Ze{constructor(o,c,m,k,C,I){this.type=o,this.attrs=c,this.marks=m,this.solid=k,this.options=I,this.content=[],this.activeMarks=we.none,this.match=C||(I&We?null:o.contentMatch)}findWrapping(o){if(!this.match){if(!this.type)return[];let c=this.type.contentMatch.fillBefore(ie.from(o));if(c)this.match=this.type.contentMatch.matchFragment(c);else{let m=this.type.contentMatch,k;return(k=m.findWrapping(o.type))?(this.match=m,k):null}}return this.match.findWrapping(o.type)}finish(o){if(!(this.options&ot)){let m=this.content[this.content.length-1],k;if(m&&m.isText&&(k=/[ \t\r\n\u000c]+$/.exec(m.text))){let C=m;m.text.length==k[0].length?this.content.pop():this.content[this.content.length-1]=C.withText(C.text.slice(0,C.text.length-k[0].length))}}let c=ie.from(this.content);return!o&&this.match&&(c=c.append(this.match.fillBefore(ie.empty,!0))),this.type?this.type.create(this.attrs,c,this.marks):c}inlineContext(o){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:o.parentNode&&!pe.hasOwnProperty(o.parentNode.nodeName.toLowerCase())}}class ft{constructor(o,c,m){this.parser=o,this.options=c,this.isOpen=m,this.open=0,this.localPreserveWS=!1;let k=c.topNode,C,I=Ue(null,c.preserveWhitespace,0)|(m?We:0);k?C=new Ze(k.type,k.attrs,we.none,!0,c.topMatch||k.type.contentMatch,I):m?C=new Ze(null,null,we.none,!0,null,I):C=new Ze(o.schema.topNodeType,null,we.none,!0,null,I),this.nodes=[C],this.find=c.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(o,c){o.nodeType==3?this.addTextNode(o,c):o.nodeType==1&&this.addElement(o,c)}addTextNode(o,c){let m=o.nodeValue,k=this.top,C=k.options&_e?"full":this.localPreserveWS||(k.options&ot)>0,{schema:I}=this.parser;if(C==="full"||k.inlineContext(o)||/[^ \t\r\n\u000c]/.test(m)){if(C)if(C==="full")m=m.replace(/\r\n?/g,`
`);else if(I.linebreakReplacement&&/[\r\n]/.test(m)&&this.top.findWrapping(I.linebreakReplacement.create())){let H=m.split(/\r?\n|\r/);for(let K=0;K<H.length;K++)K&&this.insertNode(I.linebreakReplacement.create(),c,!0),H[K]&&this.insertNode(I.text(H[K]),c,!/\S/.test(H[K]));m=""}else m=m.replace(/\r?\n|\r/g," ");else if(m=m.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(m)&&this.open==this.nodes.length-1){let H=k.content[k.content.length-1],K=o.previousSibling;(!H||K&&K.nodeName=="BR"||H.isText&&/[ \t\r\n\u000c]$/.test(H.text))&&(m=m.slice(1))}m&&this.insertNode(I.text(m),c,!/\S/.test(m)),this.findInText(o)}else this.findInside(o)}addElement(o,c,m){let k=this.localPreserveWS,C=this.top;(o.tagName=="PRE"||/pre/.test(o.style&&o.style.whiteSpace))&&(this.localPreserveWS=!0);let I=o.nodeName.toLowerCase(),H;Fe.hasOwnProperty(I)&&this.parser.normalizeLists&&F(o);let K=this.options.ruleFromNode&&this.options.ruleFromNode(o)||(H=this.parser.matchTag(o,this,m));e:if(K?K.ignore:Xe.hasOwnProperty(I))this.findInside(o),this.ignoreFallback(o,c);else if(!K||K.skip||K.closeParent){K&&K.closeParent?this.open=Math.max(0,this.open-1):K&&K.skip.nodeType&&(o=K.skip);let he,Ae=this.needsBlock;if(pe.hasOwnProperty(I))C.content.length&&C.content[0].isInline&&this.open&&(this.open--,C=this.top),he=!0,C.type||(this.needsBlock=!0);else if(!o.firstChild){this.leafFallback(o,c);break e}let E=K&&K.skip?c:this.readStyles(o,c);E&&this.addAll(o,E),he&&this.sync(C),this.needsBlock=Ae}else{let he=this.readStyles(o,c);he&&this.addElementByRule(o,K,he,K.consuming===!1?H:void 0)}this.localPreserveWS=k}leafFallback(o,c){o.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(o.ownerDocument.createTextNode(`
`),c)}ignoreFallback(o,c){o.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),c,!0)}readStyles(o,c){let m=o.style;if(m&&m.length)for(let k=0;k<this.parser.matchedStyles.length;k++){let C=this.parser.matchedStyles[k],I=m.getPropertyValue(C);if(I)for(let H=void 0;;){let K=this.parser.matchStyle(C,I,this,H);if(!K)break;if(K.ignore)return null;if(K.clearMark?c=c.filter(he=>!K.clearMark(he)):c=c.concat(this.parser.schema.marks[K.mark].create(K.attrs)),K.consuming===!1)H=K;else break}}return c}addElementByRule(o,c,m,k){let C,I;if(c.node)if(I=this.parser.schema.nodes[c.node],I.isLeaf)this.insertNode(I.create(c.attrs),m,o.nodeName=="BR")||this.leafFallback(o,m);else{let K=this.enter(I,c.attrs||null,m,c.preserveWhitespace);K&&(C=!0,m=K)}else{let K=this.parser.schema.marks[c.mark];m=m.concat(K.create(c.attrs))}let H=this.top;if(I&&I.isLeaf)this.findInside(o);else if(k)this.addElement(o,m,k);else if(c.getContent)this.findInside(o),c.getContent(o,this.parser.schema).forEach(K=>this.insertNode(K,m,!1));else{let K=o;typeof c.contentElement=="string"?K=o.querySelector(c.contentElement):typeof c.contentElement=="function"?K=c.contentElement(o):c.contentElement&&(K=c.contentElement),this.findAround(o,K,!0),this.addAll(K,m),this.findAround(o,K,!1)}C&&this.sync(H)&&this.open--}addAll(o,c,m,k){let C=m||0;for(let I=m?o.childNodes[m]:o.firstChild,H=k==null?null:o.childNodes[k];I!=H;I=I.nextSibling,++C)this.findAtPoint(o,C),this.addDOM(I,c);this.findAtPoint(o,C)}findPlace(o,c,m){let k,C;for(let I=this.open,H=0;I>=0;I--){let K=this.nodes[I],he=K.findWrapping(o);if(he&&(!k||k.length>he.length+H)&&(k=he,C=K,!he.length))break;if(K.solid){if(m)break;H+=2}}if(!k)return null;this.sync(C);for(let I=0;I<k.length;I++)c=this.enterInner(k[I],null,c,!1);return c}insertNode(o,c,m){if(o.isInline&&this.needsBlock&&!this.top.type){let C=this.textblockFromContext();C&&(c=this.enterInner(C,null,c))}let k=this.findPlace(o,c,m);if(k){this.closeExtra();let C=this.top;C.match&&(C.match=C.match.matchType(o.type));let I=we.none;for(let H of k.concat(o.marks))(C.type?C.type.allowsMarkType(H.type):M(H.type,o.type))&&(I=H.addToSet(I));return C.content.push(o.mark(I)),!0}return!1}enter(o,c,m,k){let C=this.findPlace(o.create(c),m,!1);return C&&(C=this.enterInner(o,c,m,!0,k)),C}enterInner(o,c,m,k=!1,C){this.closeExtra();let I=this.top;I.match=I.match&&I.match.matchType(o);let H=Ue(o,C,I.options);I.options&We&&I.content.length==0&&(H|=We);let K=we.none;return m=m.filter(he=>(I.type?I.type.allowsMarkType(he.type):M(he.type,o))?(K=he.addToSet(K),!1):!0),this.nodes.push(new Ze(o,c,K,k,null,H)),this.open++,m}closeExtra(o=!1){let c=this.nodes.length-1;if(c>this.open){for(;c>this.open;c--)this.nodes[c-1].content.push(this.nodes[c].finish(o));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(o){for(let c=this.open;c>=0;c--){if(this.nodes[c]==o)return this.open=c,!0;this.localPreserveWS&&(this.nodes[c].options|=ot)}return!1}get currentPos(){this.closeExtra();let o=0;for(let c=this.open;c>=0;c--){let m=this.nodes[c].content;for(let k=m.length-1;k>=0;k--)o+=m[k].nodeSize;c&&o++}return o}findAtPoint(o,c){if(this.find)for(let m=0;m<this.find.length;m++)this.find[m].node==o&&this.find[m].offset==c&&(this.find[m].pos=this.currentPos)}findInside(o){if(this.find)for(let c=0;c<this.find.length;c++)this.find[c].pos==null&&o.nodeType==1&&o.contains(this.find[c].node)&&(this.find[c].pos=this.currentPos)}findAround(o,c,m){if(o!=c&&this.find)for(let k=0;k<this.find.length;k++)this.find[k].pos==null&&o.nodeType==1&&o.contains(this.find[k].node)&&c.compareDocumentPosition(this.find[k].node)&(m?2:4)&&(this.find[k].pos=this.currentPos)}findInText(o){if(this.find)for(let c=0;c<this.find.length;c++)this.find[c].node==o&&(this.find[c].pos=this.currentPos-(o.nodeValue.length-this.find[c].offset))}matchesContext(o){if(o.indexOf("|")>-1)return o.split(/\s*\|\s*/).some(this.matchesContext,this);let c=o.split("/"),m=this.options.context,k=!this.isOpen&&(!m||m.parent.type==this.nodes[0].type),C=-(m?m.depth+1:0)+(k?0:1),I=(H,K)=>{for(;H>=0;H--){let he=c[H];if(he==""){if(H==c.length-1||H==0)continue;for(;K>=C;K--)if(I(H-1,K))return!0;return!1}else{let Ae=K>0||K==0&&k?this.nodes[K].type:m&&K>=C?m.node(K-C).type:null;if(!Ae||Ae.name!=he&&!Ae.isInGroup(he))return!1;K--}}return!0};return I(c.length-1,this.open)}textblockFromContext(){let o=this.options.context;if(o)for(let c=o.depth;c>=0;c--){let m=o.node(c).contentMatchAt(o.indexAfter(c)).defaultType;if(m&&m.isTextblock&&m.defaultAttrs)return m}for(let c in this.parser.schema.nodes){let m=this.parser.schema.nodes[c];if(m.isTextblock&&m.defaultAttrs)return m}}}function F(v){for(let o=v.firstChild,c=null;o;o=o.nextSibling){let m=o.nodeType==1?o.nodeName.toLowerCase():null;m&&Fe.hasOwnProperty(m)&&c?(c.appendChild(o),o=c):m=="li"?c=o:m&&(c=null)}}function g(v,o){return(v.matches||v.msMatchesSelector||v.webkitMatchesSelector||v.mozMatchesSelector).call(v,o)}function p(v){let o={};for(let c in v)o[c]=v[c];return o}function M(v,o){let c=o.schema.nodes;for(let m in c){let k=c[m];if(!k.allowsMarkType(v))continue;let C=[],I=H=>{C.push(H);for(let K=0;K<H.edgeCount;K++){let{type:he,next:Ae}=H.edge(K);if(he==o||C.indexOf(Ae)<0&&I(Ae))return!0}};if(I(k.contentMatch))return!0}}class A{constructor(o,c){this.nodes=o,this.marks=c}serializeFragment(o,c={},m){m||(m=$(c).createDocumentFragment());let k=m,C=[];return o.forEach(I=>{if(C.length||I.marks.length){let H=0,K=0;for(;H<C.length&&K<I.marks.length;){let he=I.marks[K];if(!this.marks[he.type.name]){K++;continue}if(!he.eq(C[H][0])||he.type.spec.spanning===!1)break;H++,K++}for(;H<C.length;)k=C.pop()[1];for(;K<I.marks.length;){let he=I.marks[K++],Ae=this.serializeMark(he,I.isInline,c);Ae&&(C.push([he,k]),k.appendChild(Ae.dom),k=Ae.contentDOM||Ae.dom)}}k.appendChild(this.serializeNodeInner(I,c))}),m}serializeNodeInner(o,c){let{dom:m,contentDOM:k}=ye($(c),this.nodes[o.type.name](o),null,o.attrs);if(k){if(o.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(o.content,c,k)}return m}serializeNode(o,c={}){let m=this.serializeNodeInner(o,c);for(let k=o.marks.length-1;k>=0;k--){let C=this.serializeMark(o.marks[k],o.isInline,c);C&&((C.contentDOM||C.dom).appendChild(m),m=C.dom)}return m}serializeMark(o,c,m={}){let k=this.marks[o.type.name];return k&&ye($(m),k(o,c),null,o.attrs)}static renderSpec(o,c,m=null,k){return ye(o,c,m,k)}static fromSchema(o){return o.cached.domSerializer||(o.cached.domSerializer=new A(this.nodesFromSchema(o),this.marksFromSchema(o)))}static nodesFromSchema(o){let c=z(o.nodes);return c.text||(c.text=m=>m.text),c}static marksFromSchema(o){return z(o.marks)}}function z(v){let o={};for(let c in v){let m=v[c].spec.toDOM;m&&(o[c]=m)}return o}function $(v){return v.document||window.document}const G=new WeakMap;function re(v){let o=G.get(v);return o===void 0&&G.set(v,o=ee(v)),o}function ee(v){let o=null;function c(m){if(m&&typeof m=="object")if(Array.isArray(m))if(typeof m[0]=="string")o||(o=[]),o.push(m);else for(let k=0;k<m.length;k++)c(m[k]);else for(let k in m)c(m[k])}return c(v),o}function ye(v,o,c,m){if(typeof o=="string")return{dom:v.createTextNode(o)};if(o.nodeType!=null)return{dom:o};if(o.dom&&o.dom.nodeType!=null)return o;let k=o[0],C;if(typeof k!="string")throw new RangeError("Invalid array passed to renderSpec");if(m&&(C=re(m))&&C.indexOf(o)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let I=k.indexOf(" ");I>0&&(c=k.slice(0,I),k=k.slice(I+1));let H,K=c?v.createElementNS(c,k):v.createElement(k),he=o[1],Ae=1;if(he&&typeof he=="object"&&he.nodeType==null&&!Array.isArray(he)){Ae=2;for(let E in he)if(he[E]!=null){let O=E.indexOf(" ");O>0?K.setAttributeNS(E.slice(0,O),E.slice(O+1),he[E]):E=="style"&&K.style?K.style.cssText=he[E]:K.setAttribute(E,he[E])}}for(let E=Ae;E<o.length;E++){let O=o[E];if(O===0){if(E<o.length-1||E>Ae)throw new RangeError("Content hole must be the only child of its parent node");return{dom:K,contentDOM:K}}else{let{dom:_,contentDOM:J}=ye(v,O,c,m);if(K.appendChild(_),J){if(H)throw new RangeError("Multiple content holes");H=J}}}return{dom:K,contentDOM:H}}},65574:function(Zt,Tt,$e){$e.d(Tt,{Bs:function(){return ze},C1:function(){return Ce},H$:function(){return et},Sy:function(){return He},Y1:function(){return de},qv:function(){return Ge},yy:function(){return Me}});var N=$e(56384),De=$e(65590);const Ct=Object.create(null);class de{constructor(D,j,U){this.$anchor=D,this.$head=j,this.ranges=U||[new ie(D.min(j),D.max(j))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let D=this.ranges;for(let j=0;j<D.length;j++)if(D[j].$from.pos!=D[j].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(D,j=N.p2.empty){let U=j.content.lastChild,ue=null;for(let Oe=0;Oe<j.openEnd;Oe++)ue=U,U=U.lastChild;let ae=D.steps.length,xe=this.ranges;for(let Oe=0;Oe<xe.length;Oe++){let{$from:je,$to:ut}=xe[Oe],at=D.mapping.slice(ae);D.replaceRange(at.map(je.pos),at.map(ut.pos),Oe?N.p2.empty:j),Oe==0&&Ke(D,ae,(U?U.isInline:ue&&ue.isTextblock)?-1:1)}}replaceWith(D,j){let U=D.steps.length,ue=this.ranges;for(let ae=0;ae<ue.length;ae++){let{$from:xe,$to:Oe}=ue[ae],je=D.mapping.slice(U),ut=je.map(xe.pos),at=je.map(Oe.pos);ae?D.deleteRange(ut,at):(D.replaceRangeWith(ut,at,j),Ke(D,U,j.isInline?-1:1))}}static findFrom(D,j,U=!1){let ue=D.parent.inlineContent?new ze(D):it(D.node(0),D.parent,D.pos,D.index(),j,U);if(ue)return ue;for(let ae=D.depth-1;ae>=0;ae--){let xe=j<0?it(D.node(0),D.node(ae),D.before(ae+1),D.index(ae),j,U):it(D.node(0),D.node(ae),D.after(ae+1),D.index(ae)+1,j,U);if(xe)return xe}return null}static near(D,j=1){return this.findFrom(D,j)||this.findFrom(D,-j)||new Ce(D.node(0))}static atStart(D){return it(D,D,0,0,1)||new Ce(D)}static atEnd(D){return it(D,D,D.content.size,D.childCount,-1)||new Ce(D)}static fromJSON(D,j){if(!j||!j.type)throw new RangeError("Invalid input for Selection.fromJSON");let U=Ct[j.type];if(!U)throw new RangeError(`No selection type ${j.type} defined`);return U.fromJSON(D,j)}static jsonID(D,j){if(D in Ct)throw new RangeError("Duplicate use of selection JSON ID "+D);return Ct[D]=j,j.prototype.jsonID=D,j}getBookmark(){return ze.between(this.$anchor,this.$head).getBookmark()}}de.prototype.visible=!0;class ie{constructor(D,j){this.$from=D,this.$to=j}}let lt=!1;function tt(ge){!lt&&!ge.parent.inlineContent&&(lt=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+ge.parent.type.name+")"))}class ze extends de{constructor(D,j=D){tt(D),tt(j),super(D,j)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(D,j){let U=D.resolve(j.map(this.head));if(!U.parent.inlineContent)return de.near(U);let ue=D.resolve(j.map(this.anchor));return new ze(ue.parent.inlineContent?ue:U,U)}replace(D,j=N.p2.empty){if(super.replace(D,j),j==N.p2.empty){let U=this.$from.marksAcross(this.$to);U&&D.ensureMarks(U)}}eq(D){return D instanceof ze&&D.anchor==this.anchor&&D.head==this.head}getBookmark(){return new we(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(D,j){if(typeof j.anchor!="number"||typeof j.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ze(D.resolve(j.anchor),D.resolve(j.head))}static create(D,j,U=j){let ue=D.resolve(j);return new this(ue,U==j?ue:D.resolve(U))}static between(D,j,U){let ue=D.pos-j.pos;if((!U||ue)&&(U=ue>=0?1:-1),!j.parent.inlineContent){let ae=de.findFrom(j,U,!0)||de.findFrom(j,-U,!0);if(ae)j=ae.$head;else return de.near(j,U)}return D.parent.inlineContent||(ue==0?D=j:(D=(de.findFrom(D,-U,!0)||de.findFrom(D,U,!0)).$anchor,D.pos<j.pos!=ue<0&&(D=j))),new ze(D,j)}}de.jsonID("text",ze);class we{constructor(D,j){this.anchor=D,this.head=j}map(D){return new we(D.map(this.anchor),D.map(this.head))}resolve(D){return ze.between(D.resolve(this.anchor),D.resolve(this.head))}}class Ge extends de{constructor(D){let j=D.nodeAfter,U=D.node(0).resolve(D.pos+j.nodeSize);super(D,U),this.node=j}map(D,j){let{deleted:U,pos:ue}=j.mapResult(this.anchor),ae=D.resolve(ue);return U?de.near(ae):new Ge(ae)}content(){return new N.p2(N.HY.from(this.node),0,0)}eq(D){return D instanceof Ge&&D.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ye(this.anchor)}static fromJSON(D,j){if(typeof j.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ge(D.resolve(j.anchor))}static create(D,j){return new Ge(D.resolve(j))}static isSelectable(D){return!D.isText&&D.type.spec.selectable!==!1}}Ge.prototype.visible=!1,de.jsonID("node",Ge);class Ye{constructor(D){this.anchor=D}map(D){let{deleted:j,pos:U}=D.mapResult(this.anchor);return j?new we(U,U):new Ye(U)}resolve(D){let j=D.resolve(this.anchor),U=j.nodeAfter;return U&&Ge.isSelectable(U)?new Ge(j):de.near(j)}}class Ce extends de{constructor(D){super(D.resolve(0),D.resolve(D.content.size))}replace(D,j=N.p2.empty){if(j==N.p2.empty){D.delete(0,D.doc.content.size);let U=de.atStart(D.doc);U.eq(D.selection)||D.setSelection(U)}else super.replace(D,j)}toJSON(){return{type:"all"}}static fromJSON(D){return new Ce(D)}map(D){return new Ce(D)}eq(D){return D instanceof Ce}getBookmark(){return ct}}de.jsonID("all",Ce);const ct={map(){return this},resolve(ge){return new Ce(ge)}};function it(ge,D,j,U,ue,ae=!1){if(D.inlineContent)return ze.create(ge,j);for(let xe=U-(ue>0?0:1);ue>0?xe<D.childCount:xe>=0;xe+=ue){let Oe=D.child(xe);if(Oe.isAtom){if(!ae&&Ge.isSelectable(Oe))return Ge.create(ge,j-(ue<0?Oe.nodeSize:0))}else{let je=it(ge,Oe,j+ue,ue<0?Oe.childCount:0,ue,ae);if(je)return je}j+=Oe.nodeSize*ue}return null}function Ke(ge,D,j){let U=ge.steps.length-1;if(U<D)return;let ue=ge.steps[U];if(!(ue instanceof De.Pu||ue instanceof De.FC))return;let ae=ge.mapping.maps[U],xe;ae.forEach((Oe,je,ut,at)=>{xe==null&&(xe=at)}),ge.setSelection(de.near(ge.doc.resolve(xe),j))}const fe=1,Ie=2,be=4;class Re extends De.wx{constructor(D){super(D.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=D.selection,this.storedMarks=D.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(D){if(D.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=D,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fe)&~Ie,this.storedMarks=null,this}get selectionSet(){return(this.updated&fe)>0}setStoredMarks(D){return this.storedMarks=D,this.updated|=Ie,this}ensureMarks(D){return N.vc.sameSet(this.storedMarks||this.selection.$from.marks(),D)||this.setStoredMarks(D),this}addStoredMark(D){return this.ensureMarks(D.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(D){return this.ensureMarks(D.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ie)>0}addStep(D,j){super.addStep(D,j),this.updated=this.updated&~Ie,this.storedMarks=null}setTime(D){return this.time=D,this}replaceSelection(D){return this.selection.replace(this,D),this}replaceSelectionWith(D,j=!0){let U=this.selection;return j&&(D=D.mark(this.storedMarks||(U.empty?U.$from.marks():U.$from.marksAcross(U.$to)||N.vc.none))),U.replaceWith(this,D),this}deleteSelection(){return this.selection.replace(this),this}insertText(D,j,U){let ue=this.doc.type.schema;if(j==null)return D?this.replaceSelectionWith(ue.text(D),!0):this.deleteSelection();{if(U==null&&(U=j),!D)return this.deleteRange(j,U);let ae=this.storedMarks;if(!ae){let xe=this.doc.resolve(j);ae=U==j?xe.marks():xe.marksAcross(this.doc.resolve(U))}return this.replaceRangeWith(j,U,ue.text(D,ae)),!this.selection.empty&&this.selection.to==j+D.length&&this.setSelection(de.near(this.selection.$to)),this}}setMeta(D,j){return this.meta[typeof D=="string"?D:D.key]=j,this}getMeta(D){return this.meta[typeof D=="string"?D:D.key]}get isGeneric(){for(let D in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=be,this}get scrolledIntoView(){return(this.updated&be)>0}}function Le(ge,D){return!D||!ge?ge:ge.bind(D)}class Ne{constructor(D,j,U){this.name=D,this.init=Le(j.init,U),this.apply=Le(j.apply,U)}}const Pe=[new Ne("doc",{init(ge){return ge.doc||ge.schema.topNodeType.createAndFill()},apply(ge){return ge.doc}}),new Ne("selection",{init(ge,D){return ge.selection||de.atStart(D.doc)},apply(ge){return ge.selection}}),new Ne("storedMarks",{init(ge){return ge.storedMarks||null},apply(ge,D,j,U){return U.selection.$cursor?ge.storedMarks:null}}),new Ne("scrollToSelection",{init(){return 0},apply(ge,D){return ge.scrolledIntoView?D+1:D}})];class ke{constructor(D,j){this.schema=D,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Pe.slice(),j&&j.forEach(U=>{if(this.pluginsByKey[U.key])throw new RangeError("Adding different instances of a keyed plugin ("+U.key+")");this.plugins.push(U),this.pluginsByKey[U.key]=U,U.spec.state&&this.fields.push(new Ne(U.key,U.spec.state,U))})}}class Me{constructor(D){this.config=D}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(D){return this.applyTransaction(D).state}filterTransaction(D,j=-1){for(let U=0;U<this.config.plugins.length;U++)if(U!=j){let ue=this.config.plugins[U];if(ue.spec.filterTransaction&&!ue.spec.filterTransaction.call(ue,D,this))return!1}return!0}applyTransaction(D){if(!this.filterTransaction(D))return{state:this,transactions:[]};let j=[D],U=this.applyInner(D),ue=null;for(;;){let ae=!1;for(let xe=0;xe<this.config.plugins.length;xe++){let Oe=this.config.plugins[xe];if(Oe.spec.appendTransaction){let je=ue?ue[xe].n:0,ut=ue?ue[xe].state:this,at=je<j.length&&Oe.spec.appendTransaction.call(Oe,je?j.slice(je):j,ut,U);if(at&&U.filterTransaction(at,xe)){if(at.setMeta("appendedTransaction",D),!ue){ue=[];for(let dt=0;dt<this.config.plugins.length;dt++)ue.push(dt<xe?{state:U,n:j.length}:{state:this,n:0})}j.push(at),U=U.applyInner(at),ae=!0}ue&&(ue[xe]={state:U,n:j.length})}}if(!ae)return{state:U,transactions:j}}}applyInner(D){if(!D.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let j=new Me(this.config),U=this.config.fields;for(let ue=0;ue<U.length;ue++){let ae=U[ue];j[ae.name]=ae.apply(D,this[ae.name],this,j)}return j}get tr(){return new Re(this)}static create(D){let j=new ke(D.doc?D.doc.type.schema:D.schema,D.plugins),U=new Me(j);for(let ue=0;ue<j.fields.length;ue++)U[j.fields[ue].name]=j.fields[ue].init(D,U);return U}reconfigure(D){let j=new ke(this.schema,D.plugins),U=j.fields,ue=new Me(j);for(let ae=0;ae<U.length;ae++){let xe=U[ae].name;ue[xe]=this.hasOwnProperty(xe)?this[xe]:U[ae].init(D,ue)}return ue}toJSON(D){let j={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(j.storedMarks=this.storedMarks.map(U=>U.toJSON())),D&&typeof D=="object")for(let U in D){if(U=="doc"||U=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ue=D[U],ae=ue.spec.state;ae&&ae.toJSON&&(j[U]=ae.toJSON.call(ue,this[ue.key]))}return j}static fromJSON(D,j,U){if(!j)throw new RangeError("Invalid input for EditorState.fromJSON");if(!D.schema)throw new RangeError("Required config field 'schema' missing");let ue=new ke(D.schema,D.plugins),ae=new Me(ue);return ue.fields.forEach(xe=>{if(xe.name=="doc")ae.doc=N.NB.fromJSON(D.schema,j.doc);else if(xe.name=="selection")ae.selection=de.fromJSON(ae.doc,j.selection);else if(xe.name=="storedMarks")j.storedMarks&&(ae.storedMarks=j.storedMarks.map(D.schema.markFromJSON));else{if(U)for(let Oe in U){let je=U[Oe],ut=je.spec.state;if(je.key==xe.name&&ut&&ut.fromJSON&&Object.prototype.hasOwnProperty.call(j,Oe)){ae[xe.name]=ut.fromJSON.call(je,D,j[Oe],ae);return}}ae[xe.name]=xe.init(D,ae)}}),ae}}function mt(ge,D,j){for(let U in ge){let ue=ge[U];ue instanceof Function?ue=ue.bind(D):U=="handleDOMEvents"&&(ue=mt(ue,D,{})),j[U]=ue}return j}class He{constructor(D){this.spec=D,this.props={},D.props&&mt(D.props,this,this.props),this.key=D.key?D.key.key:Ee("plugin")}getState(D){return D[this.key]}}const Te=Object.create(null);function Ee(ge){return ge in Te?ge+"$"+ ++Te[ge]:(Te[ge]=0,ge+"$")}class et{constructor(D="key"){this.key=Ee(D)}get(D){return D.config.pluginsByKey[this.key]}getState(D){return D[this.key]}}},65590:function(Zt,Tt,$e){$e.d(Tt,{Ax:function(){return dt},FC:function(){return ke},GJ:function(){return Ot},Mn:function(){return rt},Pu:function(){return Pe},dR:function(){return kt},k9:function(){return et},nd:function(){return D},nj:function(){return Ft},vs:function(){return ct},wx:function(){return ft}});var N=$e(56384);const De=65535,Ct=Math.pow(2,16);function de(F,g){return F+g*Ct}function ie(F){return F&De}function lt(F){return(F-(F&De))/Ct}const tt=1,ze=2,we=4,Ge=8;class Ye{constructor(g,p,M){this.pos=g,this.delInfo=p,this.recover=M}get deleted(){return(this.delInfo&Ge)>0}get deletedBefore(){return(this.delInfo&(tt|we))>0}get deletedAfter(){return(this.delInfo&(ze|we))>0}get deletedAcross(){return(this.delInfo&we)>0}}class Ce{constructor(g,p=!1){if(this.ranges=g,this.inverted=p,!g.length&&Ce.empty)return Ce.empty}recover(g){let p=0,M=ie(g);if(!this.inverted)for(let A=0;A<M;A++)p+=this.ranges[A*3+2]-this.ranges[A*3+1];return this.ranges[M*3]+p+lt(g)}mapResult(g,p=1){return this._map(g,p,!1)}map(g,p=1){return this._map(g,p,!0)}_map(g,p,M){let A=0,z=this.inverted?2:1,$=this.inverted?1:2;for(let G=0;G<this.ranges.length;G+=3){let re=this.ranges[G]-(this.inverted?A:0);if(re>g)break;let ee=this.ranges[G+z],ye=this.ranges[G+$],v=re+ee;if(g<=v){let o=ee?g==re?-1:g==v?1:p:p,c=re+A+(o<0?0:ye);if(M)return c;let m=g==(p<0?re:v)?null:de(G/3,g-re),k=g==re?ze:g==v?tt:we;return(p<0?g!=re:g!=v)&&(k|=Ge),new Ye(c,k,m)}A+=ye-ee}return M?g+A:new Ye(g+A,0,null)}touches(g,p){let M=0,A=ie(p),z=this.inverted?2:1,$=this.inverted?1:2;for(let G=0;G<this.ranges.length;G+=3){let re=this.ranges[G]-(this.inverted?M:0);if(re>g)break;let ee=this.ranges[G+z],ye=re+ee;if(g<=ye&&G==A*3)return!0;M+=this.ranges[G+$]-ee}return!1}forEach(g){let p=this.inverted?2:1,M=this.inverted?1:2;for(let A=0,z=0;A<this.ranges.length;A+=3){let $=this.ranges[A],G=$-(this.inverted?z:0),re=$+(this.inverted?0:z),ee=this.ranges[A+p],ye=this.ranges[A+M];g(G,G+ee,re,re+ye),z+=ye-ee}}invert(){return new Ce(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return g==0?Ce.empty:new Ce(g<0?[0,-g,0]:[0,0,g])}}Ce.empty=new Ce([]);class ct{constructor(g,p,M=0,A=g?g.length:0){this.mirror=p,this.from=M,this.to=A,this._maps=g||[],this.ownData=!(g||p)}get maps(){return this._maps}slice(g=0,p=this.maps.length){return new ct(this._maps,this.mirror,g,p)}appendMap(g,p){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(g),p!=null&&this.setMirror(this._maps.length-1,p)}appendMapping(g){for(let p=0,M=this._maps.length;p<g._maps.length;p++){let A=g.getMirror(p);this.appendMap(g._maps[p],A!=null&&A<p?M+A:void 0)}}getMirror(g){if(this.mirror){for(let p=0;p<this.mirror.length;p++)if(this.mirror[p]==g)return this.mirror[p+(p%2?-1:1)]}}setMirror(g,p){this.mirror||(this.mirror=[]),this.mirror.push(g,p)}appendMappingInverted(g){for(let p=g.maps.length-1,M=this._maps.length+g._maps.length;p>=0;p--){let A=g.getMirror(p);this.appendMap(g._maps[p].invert(),A!=null&&A>p?M-A-1:void 0)}}invert(){let g=new ct;return g.appendMappingInverted(this),g}map(g,p=1){if(this.mirror)return this._map(g,p,!0);for(let M=this.from;M<this.to;M++)g=this._maps[M].map(g,p);return g}mapResult(g,p=1){return this._map(g,p,!1)}_map(g,p,M){let A=0;for(let z=this.from;z<this.to;z++){let $=this._maps[z],G=$.mapResult(g,p);if(G.recover!=null){let re=this.getMirror(z);if(re!=null&&re>z&&re<this.to){z=re,g=this._maps[re].recover(G.recover);continue}}A|=G.delInfo,g=G.pos}return M?g:new Ye(g,A,null)}}const it=Object.create(null);class Ke{getMap(){return Ce.empty}merge(g){return null}static fromJSON(g,p){if(!p||!p.stepType)throw new RangeError("Invalid input for Step.fromJSON");let M=it[p.stepType];if(!M)throw new RangeError(`No step type ${p.stepType} defined`);return M.fromJSON(g,p)}static jsonID(g,p){if(g in it)throw new RangeError("Duplicate use of step JSON ID "+g);return it[g]=p,p.prototype.jsonID=g,p}}class fe{constructor(g,p){this.doc=g,this.failed=p}static ok(g){return new fe(g,null)}static fail(g){return new fe(null,g)}static fromReplace(g,p,M,A){try{return fe.ok(g.replace(p,M,A))}catch(z){if(z instanceof N.e4)return fe.fail(z.message);throw z}}}function Ie(F,g,p){let M=[];for(let A=0;A<F.childCount;A++){let z=F.child(A);z.content.size&&(z=z.copy(Ie(z.content,g,z))),z.isInline&&(z=g(z,p,A)),M.push(z)}return N.HY.fromArray(M)}class be extends Ke{constructor(g,p,M){super(),this.from=g,this.to=p,this.mark=M}apply(g){let p=g.slice(this.from,this.to),M=g.resolve(this.from),A=M.node(M.sharedDepth(this.to)),z=new N.p2(Ie(p.content,($,G)=>!$.isAtom||!G.type.allowsMarkType(this.mark.type)?$:$.mark(this.mark.addToSet($.marks)),A),p.openStart,p.openEnd);return fe.fromReplace(g,this.from,this.to,z)}invert(){return new Re(this.from,this.to,this.mark)}map(g){let p=g.mapResult(this.from,1),M=g.mapResult(this.to,-1);return p.deleted&&M.deleted||p.pos>=M.pos?null:new be(p.pos,M.pos,this.mark)}merge(g){return g instanceof be&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new be(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,p){if(typeof p.from!="number"||typeof p.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new be(p.from,p.to,g.markFromJSON(p.mark))}}Ke.jsonID("addMark",be);class Re extends Ke{constructor(g,p,M){super(),this.from=g,this.to=p,this.mark=M}apply(g){let p=g.slice(this.from,this.to),M=new N.p2(Ie(p.content,A=>A.mark(this.mark.removeFromSet(A.marks)),g),p.openStart,p.openEnd);return fe.fromReplace(g,this.from,this.to,M)}invert(){return new be(this.from,this.to,this.mark)}map(g){let p=g.mapResult(this.from,1),M=g.mapResult(this.to,-1);return p.deleted&&M.deleted||p.pos>=M.pos?null:new Re(p.pos,M.pos,this.mark)}merge(g){return g instanceof Re&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new Re(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,p){if(typeof p.from!="number"||typeof p.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Re(p.from,p.to,g.markFromJSON(p.mark))}}Ke.jsonID("removeMark",Re);class Le extends Ke{constructor(g,p){super(),this.pos=g,this.mark=p}apply(g){let p=g.nodeAt(this.pos);if(!p)return fe.fail("No node at mark step's position");let M=p.type.create(p.attrs,null,this.mark.addToSet(p.marks));return fe.fromReplace(g,this.pos,this.pos+1,new N.p2(N.HY.from(M),0,p.isLeaf?0:1))}invert(g){let p=g.nodeAt(this.pos);if(p){let M=this.mark.addToSet(p.marks);if(M.length==p.marks.length){for(let A=0;A<p.marks.length;A++)if(!p.marks[A].isInSet(M))return new Le(this.pos,p.marks[A]);return new Le(this.pos,this.mark)}}return new Ne(this.pos,this.mark)}map(g){let p=g.mapResult(this.pos,1);return p.deletedAfter?null:new Le(p.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,p){if(typeof p.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Le(p.pos,g.markFromJSON(p.mark))}}Ke.jsonID("addNodeMark",Le);class Ne extends Ke{constructor(g,p){super(),this.pos=g,this.mark=p}apply(g){let p=g.nodeAt(this.pos);if(!p)return fe.fail("No node at mark step's position");let M=p.type.create(p.attrs,null,this.mark.removeFromSet(p.marks));return fe.fromReplace(g,this.pos,this.pos+1,new N.p2(N.HY.from(M),0,p.isLeaf?0:1))}invert(g){let p=g.nodeAt(this.pos);return!p||!this.mark.isInSet(p.marks)?this:new Le(this.pos,this.mark)}map(g){let p=g.mapResult(this.pos,1);return p.deletedAfter?null:new Ne(p.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,p){if(typeof p.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ne(p.pos,g.markFromJSON(p.mark))}}Ke.jsonID("removeNodeMark",Ne);class Pe extends Ke{constructor(g,p,M,A=!1){super(),this.from=g,this.to=p,this.slice=M,this.structure=A}apply(g){return this.structure&&Me(g,this.from,this.to)?fe.fail("Structure replace would overwrite content"):fe.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new Ce([this.from,this.to-this.from,this.slice.size])}invert(g){return new Pe(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let p=g.mapResult(this.from,1),M=g.mapResult(this.to,-1);return p.deletedAcross&&M.deletedAcross?null:new Pe(p.pos,Math.max(p.pos,M.pos),this.slice,this.structure)}merge(g){if(!(g instanceof Pe)||g.structure||this.structure)return null;if(this.from+this.slice.size==g.from&&!this.slice.openEnd&&!g.slice.openStart){let p=this.slice.size+g.slice.size==0?N.p2.empty:new N.p2(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new Pe(this.from,this.to+(g.to-g.from),p,this.structure)}else if(g.to==this.from&&!this.slice.openStart&&!g.slice.openEnd){let p=this.slice.size+g.slice.size==0?N.p2.empty:new N.p2(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new Pe(g.from,this.to,p,this.structure)}else return null}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,p){if(typeof p.from!="number"||typeof p.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pe(p.from,p.to,N.p2.fromJSON(g,p.slice),!!p.structure)}}Ke.jsonID("replace",Pe);class ke extends Ke{constructor(g,p,M,A,z,$,G=!1){super(),this.from=g,this.to=p,this.gapFrom=M,this.gapTo=A,this.slice=z,this.insert=$,this.structure=G}apply(g){if(this.structure&&(Me(g,this.from,this.gapFrom)||Me(g,this.gapTo,this.to)))return fe.fail("Structure gap-replace would overwrite content");let p=g.slice(this.gapFrom,this.gapTo);if(p.openStart||p.openEnd)return fe.fail("Gap is not a flat range");let M=this.slice.insertAt(this.insert,p.content);return M?fe.fromReplace(g,this.from,this.to,M):fe.fail("Content does not fit in gap")}getMap(){return new Ce([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let p=this.gapTo-this.gapFrom;return new ke(this.from,this.from+this.slice.size+p,this.from+this.insert,this.from+this.insert+p,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let p=g.mapResult(this.from,1),M=g.mapResult(this.to,-1),A=this.from==this.gapFrom?p.pos:g.map(this.gapFrom,-1),z=this.to==this.gapTo?M.pos:g.map(this.gapTo,1);return p.deletedAcross&&M.deletedAcross||A<p.pos||z>M.pos?null:new ke(p.pos,M.pos,A,z,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,p){if(typeof p.from!="number"||typeof p.to!="number"||typeof p.gapFrom!="number"||typeof p.gapTo!="number"||typeof p.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ke(p.from,p.to,p.gapFrom,p.gapTo,N.p2.fromJSON(g,p.slice),p.insert,!!p.structure)}}Ke.jsonID("replaceAround",ke);function Me(F,g,p){let M=F.resolve(g),A=p-g,z=M.depth;for(;A>0&&z>0&&M.indexAfter(z)==M.node(z).childCount;)z--,A--;if(A>0){let $=M.node(z).maybeChild(M.indexAfter(z));for(;A>0;){if(!$||$.isLeaf)return!0;$=$.firstChild,A--}}return!1}function mt(F,g,p,M){let A=[],z=[],$,G;F.doc.nodesBetween(g,p,(re,ee,ye)=>{if(!re.isInline)return;let v=re.marks;if(!M.isInSet(v)&&ye.type.allowsMarkType(M.type)){let o=Math.max(ee,g),c=Math.min(ee+re.nodeSize,p),m=M.addToSet(v);for(let k=0;k<v.length;k++)v[k].isInSet(m)||($&&$.to==o&&$.mark.eq(v[k])?$.to=c:A.push($=new Re(o,c,v[k])));G&&G.to==o?G.to=c:z.push(G=new be(o,c,M))}}),A.forEach(re=>F.step(re)),z.forEach(re=>F.step(re))}function He(F,g,p,M){let A=[],z=0;F.doc.nodesBetween(g,p,($,G)=>{if(!$.isInline)return;z++;let re=null;if(M instanceof N.ZU){let ee=$.marks,ye;for(;ye=M.isInSet(ee);)(re||(re=[])).push(ye),ee=ye.removeFromSet(ee)}else M?M.isInSet($.marks)&&(re=[M]):re=$.marks;if(re&&re.length){let ee=Math.min(G+$.nodeSize,p);for(let ye=0;ye<re.length;ye++){let v=re[ye],o;for(let c=0;c<A.length;c++){let m=A[c];m.step==z-1&&v.eq(A[c].style)&&(o=m)}o?(o.to=ee,o.step=z):A.push({style:v,from:Math.max(G,g),to:ee,step:z})}}}),A.forEach($=>F.step(new Re($.from,$.to,$.style)))}function Te(F,g,p,M=p.contentMatch,A=!0){let z=F.doc.nodeAt(g),$=[],G=g+1;for(let re=0;re<z.childCount;re++){let ee=z.child(re),ye=G+ee.nodeSize,v=M.matchType(ee.type);if(!v)$.push(new Pe(G,ye,N.p2.empty));else{M=v;for(let o=0;o<ee.marks.length;o++)p.allowsMarkType(ee.marks[o].type)||F.step(new Re(G,ye,ee.marks[o]));if(A&&ee.isText&&p.whitespace!="pre"){let o,c=/\r?\n|\r/g,m;for(;o=c.exec(ee.text);)m||(m=new N.p2(N.HY.from(p.schema.text(" ",p.allowedMarks(ee.marks))),0,0)),$.push(new Pe(G+o.index,G+o.index+o[0].length,m))}}G=ye}if(!M.validEnd){let re=M.fillBefore(N.HY.empty,!0);F.replace(G,G,new N.p2(re,0,0))}for(let re=$.length-1;re>=0;re--)F.step($[re])}function Ee(F,g,p){return(g==0||F.canReplace(g,F.childCount))&&(p==F.childCount||F.canReplace(0,p))}function et(F){let p=F.parent.content.cutByIndex(F.startIndex,F.endIndex);for(let M=F.depth,A=0,z=0;;--M){let $=F.$from.node(M),G=F.$from.index(M)+A,re=F.$to.indexAfter(M)-z;if(M<F.depth&&$.canReplace(G,re,p))return M;if(M==0||$.type.spec.isolating||!Ee($,G,re))break;G&&(A=1),re<$.childCount&&(z=1)}return null}function ge(F,g,p){let{$from:M,$to:A,depth:z}=g,$=M.before(z+1),G=A.after(z+1),re=$,ee=G,ye=N.HY.empty,v=0;for(let m=z,k=!1;m>p;m--)k||M.index(m)>0?(k=!0,ye=N.HY.from(M.node(m).copy(ye)),v++):re--;let o=N.HY.empty,c=0;for(let m=z,k=!1;m>p;m--)k||A.after(m+1)<A.end(m)?(k=!0,o=N.HY.from(A.node(m).copy(o)),c++):ee++;F.step(new ke(re,ee,$,G,new N.p2(ye.append(o),v,c),ye.size-v,!0))}function D(F,g,p=null,M=F){let A=U(F,g),z=A&&ue(M,g);return z?A.map(j).concat({type:g,attrs:p}).concat(z.map(j)):null}function j(F){return{type:F,attrs:null}}function U(F,g){let{parent:p,startIndex:M,endIndex:A}=F,z=p.contentMatchAt(M).findWrapping(g);if(!z)return null;let $=z.length?z[0]:g;return p.canReplaceWith(M,A,$)?z:null}function ue(F,g){let{parent:p,startIndex:M,endIndex:A}=F,z=p.child(M),$=g.contentMatch.findWrapping(z.type);if(!$)return null;let re=($.length?$[$.length-1]:g).contentMatch;for(let ee=M;re&&ee<A;ee++)re=re.matchType(p.child(ee).type);return!re||!re.validEnd?null:$}function ae(F,g,p){let M=N.HY.empty;for(let $=p.length-1;$>=0;$--){if(M.size){let G=p[$].type.contentMatch.matchFragment(M);if(!G||!G.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}M=N.HY.from(p[$].type.create(p[$].attrs,M))}let A=g.start,z=g.end;F.step(new ke(A,z,A,z,new N.p2(M,0,0),p.length,!0))}function xe(F,g,p,M,A){if(!M.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let z=F.steps.length;F.doc.nodesBetween(g,p,($,G)=>{let re=typeof A=="function"?A($):A;if($.isTextblock&&!$.hasMarkup(M,re)&&ut(F.doc,F.mapping.slice(z).map(G),M)){let ee=null;if(M.schema.linebreakReplacement){let c=M.whitespace=="pre",m=!!M.contentMatch.matchType(M.schema.linebreakReplacement);c&&!m?ee=!1:!c&&m&&(ee=!0)}ee===!1&&je(F,$,G,z),Te(F,F.mapping.slice(z).map(G,1),M,void 0,ee===null);let ye=F.mapping.slice(z),v=ye.map(G,1),o=ye.map(G+$.nodeSize,1);return F.step(new ke(v,o,v+1,o-1,new N.p2(N.HY.from(M.create(re,null,$.marks)),0,0),1,!0)),ee===!0&&Oe(F,$,G,z),!1}})}function Oe(F,g,p,M){g.forEach((A,z)=>{if(A.isText){let $,G=/\r?\n|\r/g;for(;$=G.exec(A.text);){let re=F.mapping.slice(M).map(p+1+z+$.index);F.replaceWith(re,re+1,g.type.schema.linebreakReplacement.create())}}})}function je(F,g,p,M){g.forEach((A,z)=>{if(A.type==A.type.schema.linebreakReplacement){let $=F.mapping.slice(M).map(p+1+z);F.replaceWith($,$+1,g.type.schema.text(`
`))}})}function ut(F,g,p){let M=F.resolve(g),A=M.index();return M.parent.canReplaceWith(A,A+1,p)}function at(F,g,p,M,A){let z=F.doc.nodeAt(g);if(!z)throw new RangeError("No node at given position");p||(p=z.type);let $=p.create(M,null,A||z.marks);if(z.isLeaf)return F.replaceWith(g,g+z.nodeSize,$);if(!p.validContent(z.content))throw new RangeError("Invalid content for node type "+p.name);F.step(new ke(g,g+z.nodeSize,g+1,g+z.nodeSize-1,new N.p2(N.HY.from($),0,0),1,!0))}function dt(F,g,p=1,M){let A=F.resolve(g),z=A.depth-p,$=M&&M[M.length-1]||A.parent;if(z<0||A.parent.type.spec.isolating||!A.parent.canReplace(A.index(),A.parent.childCount)||!$.type.validContent(A.parent.content.cutByIndex(A.index(),A.parent.childCount)))return!1;for(let ee=A.depth-1,ye=p-2;ee>z;ee--,ye--){let v=A.node(ee),o=A.index(ee);if(v.type.spec.isolating)return!1;let c=v.content.cutByIndex(o,v.childCount),m=M&&M[ye+1];m&&(c=c.replaceChild(0,m.type.create(m.attrs)));let k=M&&M[ye]||v;if(!v.canReplace(o+1,v.childCount)||!k.type.validContent(c))return!1}let G=A.indexAfter(z),re=M&&M[0];return A.node(z).canReplaceWith(G,G,re?re.type:A.node(z+1).type)}function Et(F,g,p=1,M){let A=F.doc.resolve(g),z=N.HY.empty,$=N.HY.empty;for(let G=A.depth,re=A.depth-p,ee=p-1;G>re;G--,ee--){z=N.HY.from(A.node(G).copy(z));let ye=M&&M[ee];$=N.HY.from(ye?ye.type.create(ye.attrs,$):A.node(G).copy($))}F.step(new Pe(g,g,new N.p2(z.append($),p,p),!0))}function rt(F,g){let p=F.resolve(g),M=p.index();return Nt(p.nodeBefore,p.nodeAfter)&&p.parent.canReplace(M,M+1)}function gt(F,g){g.content.size||F.type.compatibleContent(g.type);let p=F.contentMatchAt(F.childCount),{linebreakReplacement:M}=F.type.schema;for(let A=0;A<g.childCount;A++){let z=g.child(A),$=z.type==M?F.type.schema.nodes.text:z.type;if(p=p.matchType($),!p||!F.type.allowsMarks(z.marks))return!1}return p.validEnd}function Nt(F,g){return!!(F&&g&&!F.isLeaf&&gt(F,g))}function Ot(F,g,p=-1){let M=F.resolve(g);for(let A=M.depth;;A--){let z,$,G=M.index(A);if(A==M.depth?(z=M.nodeBefore,$=M.nodeAfter):p>0?(z=M.node(A+1),G++,$=M.node(A).maybeChild(G)):(z=M.node(A).maybeChild(G-1),$=M.node(A+1)),z&&!z.isTextblock&&Nt(z,$)&&M.node(A).canReplace(G,G+1))return g;if(A==0)break;g=p<0?M.before(A):M.after(A)}}function yt(F,g,p){let M=null,{linebreakReplacement:A}=F.doc.type.schema,z=F.doc.resolve(g-p),$=z.node().type;if(A&&$.inlineContent){let ye=$.whitespace=="pre",v=!!$.contentMatch.matchType(A);ye&&!v?M=!1:!ye&&v&&(M=!0)}let G=F.steps.length;if(M===!1){let ye=F.doc.resolve(g+p);je(F,ye.node(),ye.before(),G)}$.inlineContent&&Te(F,g+p-1,$,z.node().contentMatchAt(z.index()),M==null);let re=F.mapping.slice(G),ee=re.map(g-p);if(F.step(new Pe(ee,re.map(g+p,-1),N.p2.empty,!0)),M===!0){let ye=F.doc.resolve(ee);Oe(F,ye.node(),ye.before(),F.steps.length)}return F}function st(F,g,p){let M=F.resolve(g);if(M.parent.canReplaceWith(M.index(),M.index(),p))return g;if(M.parentOffset==0)for(let A=M.depth-1;A>=0;A--){let z=M.index(A);if(M.node(A).canReplaceWith(z,z,p))return M.before(A+1);if(z>0)return null}if(M.parentOffset==M.parent.content.size)for(let A=M.depth-1;A>=0;A--){let z=M.indexAfter(A);if(M.node(A).canReplaceWith(z,z,p))return M.after(A+1);if(z<M.node(A).childCount)return null}return null}function Ft(F,g,p){let M=F.resolve(g);if(!p.content.size)return g;let A=p.content;for(let z=0;z<p.openStart;z++)A=A.firstChild.content;for(let z=1;z<=(p.openStart==0&&p.size?2:1);z++)for(let $=M.depth;$>=0;$--){let G=$==M.depth?0:M.pos<=(M.start($+1)+M.end($+1))/2?-1:1,re=M.index($)+(G>0?1:0),ee=M.node($),ye=!1;if(z==1)ye=ee.canReplace(re,re,A);else{let v=ee.contentMatchAt(re).findWrapping(A.firstChild.type);ye=v&&ee.canReplaceWith(re,re,v[0])}if(ye)return G==0?M.pos:G<0?M.before($+1):M.after($+1)}return null}function kt(F,g,p=g,M=N.p2.empty){if(g==p&&!M.size)return null;let A=F.resolve(g),z=F.resolve(p);return xt(A,z,M)?new Pe(g,p,M):new zt(A,z,M).fit()}function xt(F,g,p){return!p.openStart&&!p.openEnd&&F.start()==g.start()&&F.parent.canReplace(F.index(),g.index(),p.content)}class zt{constructor(g,p,M){this.$from=g,this.$to=p,this.unplaced=M,this.frontier=[],this.placed=N.HY.empty;for(let A=0;A<=g.depth;A++){let z=g.node(A);this.frontier.push({type:z.type,match:z.contentMatchAt(g.indexAfter(A))})}for(let A=g.depth;A>0;A--)this.placed=N.HY.from(g.node(A).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let ee=this.findFittable();ee?this.placeNodes(ee):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),p=this.placed.size-this.depth-this.$from.depth,M=this.$from,A=this.close(g<0?this.$to:M.doc.resolve(g));if(!A)return null;let z=this.placed,$=M.depth,G=A.depth;for(;$&&G&&z.childCount==1;)z=z.firstChild.content,$--,G--;let re=new N.p2(z,$,G);return g>-1?new ke(M.pos,g,this.$to.pos,this.$to.end(),re,p):re.size||M.pos!=this.$to.pos?new Pe(M.pos,A.pos,re):null}findFittable(){let g=this.unplaced.openStart;for(let p=this.unplaced.content,M=0,A=this.unplaced.openEnd;M<g;M++){let z=p.firstChild;if(p.childCount>1&&(A=0),z.type.spec.isolating&&A<=M){g=M;break}p=z.content}for(let p=1;p<=2;p++)for(let M=p==1?g:this.unplaced.openStart;M>=0;M--){let A,z=null;M?(z=ce(this.unplaced.content,M-1).firstChild,A=z.content):A=this.unplaced.content;let $=A.firstChild;for(let G=this.depth;G>=0;G--){let{type:re,match:ee}=this.frontier[G],ye,v=null;if(p==1&&($?ee.matchType($.type)||(v=ee.fillBefore(N.HY.from($),!1)):z&&re.compatibleContent(z.type)))return{sliceDepth:M,frontierDepth:G,parent:z,inject:v};if(p==2&&$&&(ye=ee.findWrapping($.type)))return{sliceDepth:M,frontierDepth:G,parent:z,wrap:ye};if(z&&ee.matchType(z.type))break}}}openMore(){let{content:g,openStart:p,openEnd:M}=this.unplaced,A=ce(g,p);return!A.childCount||A.firstChild.isLeaf?!1:(this.unplaced=new N.p2(g,p+1,Math.max(M,A.size+p>=g.size-M?p+1:0)),!0)}dropNode(){let{content:g,openStart:p,openEnd:M}=this.unplaced,A=ce(g,p);if(A.childCount<=1&&p>0){let z=g.size-p<=p+A.size;this.unplaced=new N.p2(Rt(g,p-1,1),p-1,z?p-1:M)}else this.unplaced=new N.p2(Rt(g,p,1),p,M)}placeNodes({sliceDepth:g,frontierDepth:p,parent:M,inject:A,wrap:z}){for(;this.depth>p;)this.closeFrontierNode();if(z)for(let k=0;k<z.length;k++)this.openFrontierNode(z[k]);let $=this.unplaced,G=M?M.content:$.content,re=$.openStart-g,ee=0,ye=[],{match:v,type:o}=this.frontier[p];if(A){for(let k=0;k<A.childCount;k++)ye.push(A.child(k));v=v.matchFragment(A)}let c=G.size+g-($.content.size-$.openEnd);for(;ee<G.childCount;){let k=G.child(ee),C=v.matchType(k.type);if(!C)break;ee++,(ee>1||re==0||k.content.size)&&(v=C,ye.push(W(k.mark(o.allowedMarks(k.marks)),ee==1?re:0,ee==G.childCount?c:-1)))}let m=ee==G.childCount;m||(c=-1),this.placed=At(this.placed,p,N.HY.from(ye)),this.frontier[p].match=v,m&&c<0&&M&&M.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,C=G;k<c;k++){let I=C.lastChild;this.frontier.push({type:I.type,match:I.contentMatchAt(I.childCount)}),C=I.content}this.unplaced=m?g==0?N.p2.empty:new N.p2(Rt($.content,g-1,1),g-1,c<0?$.openEnd:g-1):new N.p2(Rt($.content,g,ee),$.openStart,$.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let g=this.frontier[this.depth],p;if(!g.type.isTextblock||!Q(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(p=this.findCloseLevel(this.$to))&&p.depth==this.depth)return-1;let{depth:M}=this.$to,A=this.$to.after(M);for(;M>1&&A==this.$to.end(--M);)++A;return A}findCloseLevel(g){e:for(let p=Math.min(this.depth,g.depth);p>=0;p--){let{match:M,type:A}=this.frontier[p],z=p<g.depth&&g.end(p+1)==g.pos+(g.depth-(p+1)),$=Q(g,p,A,M,z);if($){for(let G=p-1;G>=0;G--){let{match:re,type:ee}=this.frontier[G],ye=Q(g,G,ee,re,!0);if(!ye||ye.childCount)continue e}return{depth:p,fit:$,move:z?g.doc.resolve(g.after(p+1)):g}}}}close(g){let p=this.findCloseLevel(g);if(!p)return null;for(;this.depth>p.depth;)this.closeFrontierNode();p.fit.childCount&&(this.placed=At(this.placed,p.depth,p.fit)),g=p.move;for(let M=p.depth+1;M<=g.depth;M++){let A=g.node(M),z=A.type.contentMatch.fillBefore(A.content,!0,g.index(M));this.openFrontierNode(A.type,A.attrs,z)}return g}openFrontierNode(g,p=null,M){let A=this.frontier[this.depth];A.match=A.match.matchType(g),this.placed=At(this.placed,this.depth,N.HY.from(g.create(p,M))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let p=this.frontier.pop().match.fillBefore(N.HY.empty,!0);p.childCount&&(this.placed=At(this.placed,this.frontier.length,p))}}function Rt(F,g,p){return g==0?F.cutByIndex(p,F.childCount):F.replaceChild(0,F.firstChild.copy(Rt(F.firstChild.content,g-1,p)))}function At(F,g,p){return g==0?F.append(p):F.replaceChild(F.childCount-1,F.lastChild.copy(At(F.lastChild.content,g-1,p)))}function ce(F,g){for(let p=0;p<g;p++)F=F.firstChild.content;return F}function W(F,g,p){if(g<=0)return F;let M=F.content;return g>1&&(M=M.replaceChild(0,W(M.firstChild,g-1,M.childCount==1?p-1:0))),g>0&&(M=F.type.contentMatch.fillBefore(M).append(M),p<=0&&(M=M.append(F.type.contentMatch.matchFragment(M).fillBefore(N.HY.empty,!0)))),F.copy(M)}function Q(F,g,p,M,A){let z=F.node(g),$=A?F.indexAfter(g):F.index(g);if($==z.childCount&&!p.compatibleContent(z.type))return null;let G=M.fillBefore(z.content,!0,$);return G&&!se(p,z.content,$)?G:null}function se(F,g,p){for(let M=p;M<g.childCount;M++)if(!F.allowsMarks(g.child(M).marks))return!0;return!1}function ne(F){return F.spec.defining||F.spec.definingForContent}function pe(F,g,p,M){if(!M.size)return F.deleteRange(g,p);let A=F.doc.resolve(g),z=F.doc.resolve(p);if(xt(A,z,M))return F.step(new Pe(g,p,M));let $=_e(A,z);$[$.length-1]==0&&$.pop();let G=-(A.depth+1);$.unshift(G);for(let o=A.depth,c=A.pos-1;o>0;o--,c--){let m=A.node(o).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;$.indexOf(o)>-1?G=o:A.before(o)==c&&$.splice(1,0,-o)}let re=$.indexOf(G),ee=[],ye=M.openStart;for(let o=M.content,c=0;;c++){let m=o.firstChild;if(ee.push(m),c==M.openStart)break;o=m.content}for(let o=ye-1;o>=0;o--){let c=ee[o],m=ne(c.type);if(m&&!c.sameMarkup(A.node(Math.abs(G)-1)))ye=o;else if(m||!c.type.isTextblock)break}for(let o=M.openStart;o>=0;o--){let c=(o+ye+1)%(M.openStart+1),m=ee[c];if(m)for(let k=0;k<$.length;k++){let C=$[(k+re)%$.length],I=!0;C<0&&(I=!1,C=-C);let H=A.node(C-1),K=A.index(C-1);if(H.canReplaceWith(K,K,m.type,m.marks))return F.replace(A.before(C),I?z.after(C):p,new N.p2(Xe(M.content,0,M.openStart,c),c,M.openEnd))}}let v=F.steps.length;for(let o=$.length-1;o>=0&&(F.replace(g,p,M),!(F.steps.length>v));o--){let c=$[o];c<0||(g=A.before(c),p=z.after(c))}}function Xe(F,g,p,M,A){if(g<p){let z=F.firstChild;F=F.replaceChild(0,z.copy(Xe(z.content,g+1,p,M,z)))}if(g>M){let z=A.contentMatchAt(0),$=z.fillBefore(F).append(F);F=$.append(z.matchFragment($).fillBefore(N.HY.empty,!0))}return F}function Fe(F,g,p,M){if(!M.isInline&&g==p&&F.doc.resolve(g).parent.content.size){let A=st(F.doc,g,M.type);A!=null&&(g=p=A)}F.replaceRange(g,p,new N.p2(N.HY.from(M),0,0))}function ot(F,g,p){let M=F.doc.resolve(g),A=F.doc.resolve(p),z=_e(M,A);for(let $=0;$<z.length;$++){let G=z[$],re=$==z.length-1;if(re&&G==0||M.node(G).type.contentMatch.validEnd)return F.delete(M.start(G),A.end(G));if(G>0&&(re||M.node(G-1).canReplace(M.index(G-1),A.indexAfter(G-1))))return F.delete(M.before(G),A.after(G))}for(let $=1;$<=M.depth&&$<=A.depth;$++)if(g-M.start($)==M.depth-$&&p>M.end($)&&A.end($)-p!=A.depth-$&&M.start($-1)==A.start($-1)&&M.node($-1).canReplace(M.index($-1),A.index($-1)))return F.delete(M.before($),p);F.delete(g,p)}function _e(F,g){let p=[],M=Math.min(F.depth,g.depth);for(let A=M;A>=0;A--){let z=F.start(A);if(z<F.pos-(F.depth-A)||g.end(A)>g.pos+(g.depth-A)||F.node(A).type.spec.isolating||g.node(A).type.spec.isolating)break;(z==g.start(A)||A==F.depth&&A==g.depth&&F.parent.inlineContent&&g.parent.inlineContent&&A&&g.start(A-1)==z-1)&&p.push(A)}return p}class We extends Ke{constructor(g,p,M){super(),this.pos=g,this.attr=p,this.value=M}apply(g){let p=g.nodeAt(this.pos);if(!p)return fe.fail("No node at attribute step's position");let M=Object.create(null);for(let z in p.attrs)M[z]=p.attrs[z];M[this.attr]=this.value;let A=p.type.create(M,null,p.marks);return fe.fromReplace(g,this.pos,this.pos+1,new N.p2(N.HY.from(A),0,p.isLeaf?0:1))}getMap(){return Ce.empty}invert(g){return new We(this.pos,this.attr,g.nodeAt(this.pos).attrs[this.attr])}map(g){let p=g.mapResult(this.pos,1);return p.deletedAfter?null:new We(p.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(g,p){if(typeof p.pos!="number"||typeof p.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new We(p.pos,p.attr,p.value)}}Ke.jsonID("attr",We);class Ue extends Ke{constructor(g,p){super(),this.attr=g,this.value=p}apply(g){let p=Object.create(null);for(let A in g.attrs)p[A]=g.attrs[A];p[this.attr]=this.value;let M=g.type.create(p,g.content,g.marks);return fe.ok(M)}getMap(){return Ce.empty}invert(g){return new Ue(this.attr,g.attrs[this.attr])}map(g){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(g,p){if(typeof p.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ue(p.attr,p.value)}}Ke.jsonID("docAttr",Ue);let Ze=class extends Error{};Ze=function F(g){let p=Error.call(this,g);return p.__proto__=F.prototype,p},Ze.prototype=Object.create(Error.prototype),Ze.prototype.constructor=Ze,Ze.prototype.name="TransformError";class ft{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new ct}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let p=this.maybeStep(g);if(p.failed)throw new Ze(p.failed);return this}maybeStep(g){let p=g.apply(this.doc);return p.failed||this.addStep(g,p.doc),p}get docChanged(){return this.steps.length>0}addStep(g,p){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=p}replace(g,p=g,M=N.p2.empty){let A=kt(this.doc,g,p,M);return A&&this.step(A),this}replaceWith(g,p,M){return this.replace(g,p,new N.p2(N.HY.from(M),0,0))}delete(g,p){return this.replace(g,p,N.p2.empty)}insert(g,p){return this.replaceWith(g,g,p)}replaceRange(g,p,M){return pe(this,g,p,M),this}replaceRangeWith(g,p,M){return Fe(this,g,p,M),this}deleteRange(g,p){return ot(this,g,p),this}lift(g,p){return ge(this,g,p),this}join(g,p=1){return yt(this,g,p),this}wrap(g,p){return ae(this,g,p),this}setBlockType(g,p=g,M,A=null){return xe(this,g,p,M,A),this}setNodeMarkup(g,p,M=null,A){return at(this,g,p,M,A),this}setNodeAttribute(g,p,M){return this.step(new We(g,p,M)),this}setDocAttribute(g,p){return this.step(new Ue(g,p)),this}addNodeMark(g,p){return this.step(new Le(g,p)),this}removeNodeMark(g,p){let M=this.doc.nodeAt(g);if(!M)throw new RangeError("No node at position "+g);if(p instanceof N.vc)p.isInSet(M.marks)&&this.step(new Ne(g,p));else{let A=M.marks,z,$=[];for(;z=p.isInSet(A);)$.push(new Ne(g,z)),A=z.removeFromSet(A);for(let G=$.length-1;G>=0;G--)this.step($[G])}return this}split(g,p=1,M){return Et(this,g,p,M),this}addMark(g,p,M){return mt(this,g,p,M),this}removeMark(g,p,M){return He(this,g,p,M),this}clearIncompatible(g,p,M){return Te(this,g,p,M),this}}},41417:function(Zt,Tt,$e){$e.d(Tt,{EH:function(){return wt},p:function(){return Pt},tk:function(){return qt}});var N=$e(65574),De=$e(56384),Ct=$e(65590);const de=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ie=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let lt=null;const tt=function(t,e,r){let l=lt||(lt=document.createRange());return l.setEnd(t,r??t.nodeValue.length),l.setStart(t,e||0),l},ze=function(){lt=null},we=function(t,e,r,l){return r&&(Ye(t,e,r,l,-1)||Ye(t,e,r,l,1))},Ge=/^(img|br|input|textarea|hr)$/i;function Ye(t,e,r,l,d){for(var f;;){if(t==r&&e==l)return!0;if(e==(d<0?0:Ce(t))){let b=t.parentNode;if(!b||b.nodeType!=1||fe(t)||Ge.test(t.nodeName)||t.contentEditable=="false")return!1;e=de(t)+(d<0?0:1),t=b}else if(t.nodeType==1){let b=t.childNodes[e+(d<0?-1:0)];if(b.nodeType==1&&b.contentEditable=="false")if(!((f=b.pmViewDesc)===null||f===void 0)&&f.ignoreForSelection)e+=d;else return!1;else t=b,e=d<0?Ce(t):0}else return!1}}function Ce(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ct(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ce(t)}else if(t.parentNode&&!fe(t))e=de(t),t=t.parentNode;else return null}}function it(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!fe(t))e=de(t)+1,t=t.parentNode;else return null}}function Ke(t,e,r){for(let l=e==0,d=e==Ce(t);l||d;){if(t==r)return!0;let f=de(t);if(t=t.parentNode,!t)return!1;l=l&&f==0,d=d&&f==Ce(t)}}function fe(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ie=function(t){return t.focusNode&&we(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function be(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Re(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Le(t,e,r){if(t.caretPositionFromPoint)try{let l=t.caretPositionFromPoint(e,r);if(l)return{node:l.offsetNode,offset:Math.min(Ce(l.offsetNode),l.offset)}}catch{}if(t.caretRangeFromPoint){let l=t.caretRangeFromPoint(e,r);if(l)return{node:l.startContainer,offset:Math.min(Ce(l.startContainer),l.startOffset)}}}const Ne=typeof navigator<"u"?navigator:null,Pe=typeof document<"u"?document:null,ke=Ne&&Ne.userAgent||"",Me=/Edge\/(\d+)/.exec(ke),mt=/MSIE \d/.exec(ke),He=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ke),Te=!!(mt||He||Me),Ee=mt?document.documentMode:He?+He[1]:Me?+Me[1]:0,et=!Te&&/gecko\/(\d+)/i.test(ke);et&&+(/Firefox\/(\d+)/.exec(ke)||[0,0])[1];const ge=!Te&&/Chrome\/(\d+)/.exec(ke),D=!!ge,j=ge?+ge[1]:0,U=!Te&&!!Ne&&/Apple Computer/.test(Ne.vendor),ue=U&&(/Mobile\/\w+/.test(ke)||!!Ne&&Ne.maxTouchPoints>2),ae=ue||(Ne?/Mac/.test(Ne.platform):!1),xe=Ne?/Win/.test(Ne.platform):!1,Oe=/Android \d/.test(ke),je=!!Pe&&"webkitFontSmoothing"in Pe.documentElement.style,ut=je?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function at(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function dt(t,e){return typeof t=="number"?t:t[e]}function Et(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,l=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*l}}function rt(t,e,r){let l=t.someProp("scrollThreshold")||0,d=t.someProp("scrollMargin")||5,f=t.dom.ownerDocument;for(let b=r||t.dom;b;){if(b.nodeType!=1){b=ie(b);continue}let S=b,T=S==f.body,R=T?at(f):Et(S),i=0,n=0;if(e.top<R.top+dt(l,"top")?n=-(R.top-e.top+dt(d,"top")):e.bottom>R.bottom-dt(l,"bottom")&&(n=e.bottom-e.top>R.bottom-R.top?e.top+dt(d,"top")-R.top:e.bottom-R.bottom+dt(d,"bottom")),e.left<R.left+dt(l,"left")?i=-(R.left-e.left+dt(d,"left")):e.right>R.right-dt(l,"right")&&(i=e.right-R.right+dt(d,"right")),i||n)if(T)f.defaultView.scrollBy(i,n);else{let a=S.scrollLeft,u=S.scrollTop;n&&(S.scrollTop+=n),i&&(S.scrollLeft+=i);let h=S.scrollLeft-a,y=S.scrollTop-u;e={left:e.left-h,top:e.top-y,right:e.right-h,bottom:e.bottom-y}}let s=T?"fixed":getComputedStyle(b).position;if(/^(fixed|sticky)$/.test(s))break;b=s=="absolute"?b.offsetParent:ie(b)}}function gt(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),l,d;for(let f=(e.left+e.right)/2,b=r+1;b<Math.min(innerHeight,e.bottom);b+=5){let S=t.root.elementFromPoint(f,b);if(!S||S==t.dom||!t.dom.contains(S))continue;let T=S.getBoundingClientRect();if(T.top>=r-20){l=S,d=T.top;break}}return{refDOM:l,refTop:d,stack:Nt(t.dom)}}function Nt(t){let e=[],r=t.ownerDocument;for(let l=t;l&&(e.push({dom:l,top:l.scrollTop,left:l.scrollLeft}),t!=r);l=ie(l));return e}function Ot({refDOM:t,refTop:e,stack:r}){let l=t?t.getBoundingClientRect().top:0;yt(r,l==0?0:l-e)}function yt(t,e){for(let r=0;r<t.length;r++){let{dom:l,top:d,left:f}=t[r];l.scrollTop!=d+e&&(l.scrollTop=d+e),l.scrollLeft!=f&&(l.scrollLeft=f)}}let st=null;function Ft(t){if(t.setActive)return t.setActive();if(st)return t.focus(st);let e=Nt(t);t.focus(st==null?{get preventScroll(){return st={preventScroll:!0},!0}}:void 0),st||(st=!1,yt(e,0))}function kt(t,e){let r,l=2e8,d,f=0,b=e.top,S=e.top,T,R;for(let i=t.firstChild,n=0;i;i=i.nextSibling,n++){let s;if(i.nodeType==1)s=i.getClientRects();else if(i.nodeType==3)s=tt(i).getClientRects();else continue;for(let a=0;a<s.length;a++){let u=s[a];if(u.top<=b&&u.bottom>=S){b=Math.max(u.bottom,b),S=Math.min(u.top,S);let h=u.left>e.left?u.left-e.left:u.right<e.left?e.left-u.right:0;if(h<l){r=i,l=h,d=h&&r.nodeType==3?{left:u.right<e.left?u.right:u.left,top:e.top}:e,i.nodeType==1&&h&&(f=n+(e.left>=(u.left+u.right)/2?1:0));continue}}else u.top>e.top&&!T&&u.left<=e.left&&u.right>=e.left&&(T=i,R={left:Math.max(u.left,Math.min(u.right,e.left)),top:u.top});!r&&(e.left>=u.right&&e.top>=u.top||e.left>=u.left&&e.top>=u.bottom)&&(f=n+1)}}return!r&&T&&(r=T,d=R,l=0),r&&r.nodeType==3?xt(r,d):!r||l&&r.nodeType==1?{node:t,offset:f}:kt(r,d)}function xt(t,e){let r=t.nodeValue.length,l=document.createRange();for(let d=0;d<r;d++){l.setEnd(t,d+1),l.setStart(t,d);let f=ne(l,1);if(f.top!=f.bottom&&zt(e,f))return{node:t,offset:d+(e.left>=(f.left+f.right)/2?1:0)}}return{node:t,offset:0}}function zt(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Rt(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function At(t,e,r){let{node:l,offset:d}=kt(e,r),f=-1;if(l.nodeType==1&&!l.firstChild){let b=l.getBoundingClientRect();f=b.left!=b.right&&r.left>(b.left+b.right)/2?1:-1}return t.docView.posFromDOM(l,d,f)}function ce(t,e,r,l){let d=-1;for(let f=e,b=!1;f!=t.dom;){let S=t.docView.nearestDesc(f,!0),T;if(!S)return null;if(S.dom.nodeType==1&&(S.node.isBlock&&S.parent||!S.contentDOM)&&((T=S.dom.getBoundingClientRect()).width||T.height)&&(S.node.isBlock&&S.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(S.dom.nodeName)&&(!b&&T.left>l.left||T.top>l.top?d=S.posBefore:(!b&&T.right<l.left||T.bottom<l.top)&&(d=S.posAfter),b=!0),!S.contentDOM&&d<0&&!S.node.isText))return(S.node.isBlock?l.top<(T.top+T.bottom)/2:l.left<(T.left+T.right)/2)?S.posBefore:S.posAfter;f=S.dom.parentNode}return d>-1?d:t.docView.posFromDOM(e,r,-1)}function W(t,e,r){let l=t.childNodes.length;if(l&&r.top<r.bottom)for(let d=Math.max(0,Math.min(l-1,Math.floor(l*(e.top-r.top)/(r.bottom-r.top))-2)),f=d;;){let b=t.childNodes[f];if(b.nodeType==1){let S=b.getClientRects();for(let T=0;T<S.length;T++){let R=S[T];if(zt(e,R))return W(b,e,R)}}if((f=(f+1)%l)==d)break}return t}function Q(t,e){let r=t.dom.ownerDocument,l,d=0,f=Le(r,e.left,e.top);f&&({node:l,offset:d}=f);let b=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),S;if(!b||!t.dom.contains(b.nodeType!=1?b.parentNode:b)){let R=t.dom.getBoundingClientRect();if(!zt(e,R)||(b=W(t.dom,e,R),!b))return null}if(U)for(let R=b;l&&R;R=ie(R))R.draggable&&(l=void 0);if(b=Rt(b,e),l){if(et&&l.nodeType==1&&(d=Math.min(d,l.childNodes.length),d<l.childNodes.length)){let i=l.childNodes[d],n;i.nodeName=="IMG"&&(n=i.getBoundingClientRect()).right<=e.left&&n.bottom>e.top&&d++}let R;je&&d&&l.nodeType==1&&(R=l.childNodes[d-1]).nodeType==1&&R.contentEditable=="false"&&R.getBoundingClientRect().top>=e.top&&d--,l==t.dom&&d==l.childNodes.length-1&&l.lastChild.nodeType==1&&e.top>l.lastChild.getBoundingClientRect().bottom?S=t.state.doc.content.size:(d==0||l.nodeType!=1||l.childNodes[d-1].nodeName!="BR")&&(S=ce(t,l,d,e))}S==null&&(S=At(t,b,e));let T=t.docView.nearestDesc(b,!0);return{pos:S,inside:T?T.posAtStart-T.border:-1}}function se(t){return t.top<t.bottom||t.left<t.right}function ne(t,e){let r=t.getClientRects();if(r.length){let l=r[e<0?0:r.length-1];if(se(l))return l}return Array.prototype.find.call(r,se)||t.getBoundingClientRect()}const pe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Xe(t,e,r){let{node:l,offset:d,atom:f}=t.docView.domFromPos(e,r<0?-1:1),b=je||et;if(l.nodeType==3)if(b&&(pe.test(l.nodeValue)||(r<0?!d:d==l.nodeValue.length))){let T=ne(tt(l,d,d),r);if(et&&d&&/\s/.test(l.nodeValue[d-1])&&d<l.nodeValue.length){let R=ne(tt(l,d-1,d-1),-1);if(R.top==T.top){let i=ne(tt(l,d,d+1),-1);if(i.top!=T.top)return Fe(i,i.left<R.left)}}return T}else{let T=d,R=d,i=r<0?1:-1;return r<0&&!d?(R++,i=-1):r>=0&&d==l.nodeValue.length?(T--,i=1):r<0?T--:R++,Fe(ne(tt(l,T,R),i),i<0)}if(!t.state.doc.resolve(e-(f||0)).parent.inlineContent){if(f==null&&d&&(r<0||d==Ce(l))){let T=l.childNodes[d-1];if(T.nodeType==1)return ot(T.getBoundingClientRect(),!1)}if(f==null&&d<Ce(l)){let T=l.childNodes[d];if(T.nodeType==1)return ot(T.getBoundingClientRect(),!0)}return ot(l.getBoundingClientRect(),r>=0)}if(f==null&&d&&(r<0||d==Ce(l))){let T=l.childNodes[d-1],R=T.nodeType==3?tt(T,Ce(T)-(b?0:1)):T.nodeType==1&&(T.nodeName!="BR"||!T.nextSibling)?T:null;if(R)return Fe(ne(R,1),!1)}if(f==null&&d<Ce(l)){let T=l.childNodes[d];for(;T.pmViewDesc&&T.pmViewDesc.ignoreForCoords;)T=T.nextSibling;let R=T?T.nodeType==3?tt(T,0,b?0:1):T.nodeType==1?T:null:null;if(R)return Fe(ne(R,-1),!0)}return Fe(ne(l.nodeType==3?tt(l):l,-r),r>=0)}function Fe(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function ot(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function _e(t,e,r){let l=t.state,d=t.root.activeElement;l!=e&&t.updateState(e),d!=t.dom&&t.focus();try{return r()}finally{l!=e&&t.updateState(l),d!=t.dom&&d&&d.focus()}}function We(t,e,r){let l=e.selection,d=r=="up"?l.$from:l.$to;return _e(t,e,()=>{let{node:f}=t.docView.domFromPos(d.pos,r=="up"?-1:1);for(;;){let S=t.docView.nearestDesc(f,!0);if(!S)break;if(S.node.isBlock){f=S.contentDOM||S.dom;break}f=S.dom.parentNode}let b=Xe(t,d.pos,1);for(let S=f.firstChild;S;S=S.nextSibling){let T;if(S.nodeType==1)T=S.getClientRects();else if(S.nodeType==3)T=tt(S,0,S.nodeValue.length).getClientRects();else continue;for(let R=0;R<T.length;R++){let i=T[R];if(i.bottom>i.top+1&&(r=="up"?b.top-i.top>(i.bottom-b.top)*2:i.bottom-b.bottom>(b.bottom-i.top)*2))return!1}}return!0})}const Ue=/[\u0590-\u08ac]/;function Ze(t,e,r){let{$head:l}=e.selection;if(!l.parent.isTextblock)return!1;let d=l.parentOffset,f=!d,b=d==l.parent.content.size,S=t.domSelection();return S?!Ue.test(l.parent.textContent)||!S.modify?r=="left"||r=="backward"?f:b:_e(t,e,()=>{let{focusNode:T,focusOffset:R,anchorNode:i,anchorOffset:n}=t.domSelectionRange(),s=S.caretBidiLevel;S.modify("move",r,"character");let a=l.depth?t.docView.domAfterPos(l.before()):t.dom,{focusNode:u,focusOffset:h}=t.domSelectionRange(),y=u&&!a.contains(u.nodeType==1?u:u.parentNode)||T==u&&R==h;try{S.collapse(i,n),T&&(T!=i||R!=n)&&S.extend&&S.extend(T,R)}catch{}return s!=null&&(S.caretBidiLevel=s),y}):l.pos==l.start()||l.pos==l.end()}let ft=null,F=null,g=!1;function p(t,e,r){return ft==e&&F==r?g:(ft=e,F=r,g=r=="up"||r=="down"?We(t,e,r):Ze(t,e,r))}const M=0,A=1,z=2,$=3;class G{constructor(e,r,l,d){this.parent=e,this.children=r,this.dom=l,this.contentDOM=d,this.dirty=M,l.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,l){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,l=this.posAtStart;;r++){let d=this.children[r];if(d==e)return l;l+=d.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,l){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(l<0){let f,b;if(e==this.contentDOM)f=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;f=e.previousSibling}for(;f&&!((b=f.pmViewDesc)&&b.parent==this);)f=f.previousSibling;return f?this.posBeforeChild(b)+b.size:this.posAtStart}else{let f,b;if(e==this.contentDOM)f=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;f=e.nextSibling}for(;f&&!((b=f.pmViewDesc)&&b.parent==this);)f=f.nextSibling;return f?this.posBeforeChild(b):this.posAtEnd}let d;if(e==this.dom&&this.contentDOM)d=r>de(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))d=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let f=e;;f=f.parentNode){if(f==this.dom){d=!1;break}if(f.previousSibling)break}if(d==null&&r==e.childNodes.length)for(let f=e;;f=f.parentNode){if(f==this.dom){d=!0;break}if(f.nextSibling)break}}return d??l>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let l=!0,d=e;d;d=d.parentNode){let f=this.getDesc(d),b;if(f&&(!r||f.node))if(l&&(b=f.nodeDOM)&&!(b.nodeType==1?b.contains(e.nodeType==1?e:e.parentNode):b==e))l=!1;else return f}}getDesc(e){let r=e.pmViewDesc;for(let l=r;l;l=l.parent)if(l==this)return r}posFromDOM(e,r,l){for(let d=e;d;d=d.parentNode){let f=this.getDesc(d);if(f)return f.localPosFromDOM(e,r,l)}return-1}descAt(e){for(let r=0,l=0;r<this.children.length;r++){let d=this.children[r],f=l+d.size;if(l==e&&f!=l){for(;!d.border&&d.children.length;)for(let b=0;b<d.children.length;b++){let S=d.children[b];if(S.size){d=S;break}}return d}if(e<f)return d.descAt(e-l-d.border);l=f}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let l=0,d=0;for(let f=0;l<this.children.length;l++){let b=this.children[l],S=f+b.size;if(S>e||b instanceof m){d=e-f;break}f=S}if(d)return this.children[l].domFromPos(d-this.children[l].border,r);for(let f;l&&!(f=this.children[l-1]).size&&f instanceof re&&f.side>=0;l--);if(r<=0){let f,b=!0;for(;f=l?this.children[l-1]:null,!(!f||f.dom.parentNode==this.contentDOM);l--,b=!1);return f&&r&&b&&!f.border&&!f.domAtom?f.domFromPos(f.size,r):{node:this.contentDOM,offset:f?de(f.dom)+1:0}}else{let f,b=!0;for(;f=l<this.children.length?this.children[l]:null,!(!f||f.dom.parentNode==this.contentDOM);l++,b=!1);return f&&b&&!f.border&&!f.domAtom?f.domFromPos(0,r):{node:this.contentDOM,offset:f?de(f.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,l=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let d=-1,f=-1;for(let b=l,S=0;;S++){let T=this.children[S],R=b+T.size;if(d==-1&&e<=R){let i=b+T.border;if(e>=i&&r<=R-T.border&&T.node&&T.contentDOM&&this.contentDOM.contains(T.contentDOM))return T.parseRange(e,r,i);e=b;for(let n=S;n>0;n--){let s=this.children[n-1];if(s.size&&s.dom.parentNode==this.contentDOM&&!s.emptyChildAt(1)){d=de(s.dom)+1;break}e-=s.size}d==-1&&(d=0)}if(d>-1&&(R>r||S==this.children.length-1)){r=R;for(let i=S+1;i<this.children.length;i++){let n=this.children[i];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){f=de(n.dom);break}r+=n.size}f==-1&&(f=this.contentDOM.childNodes.length);break}b=R}return{node:this.contentDOM,from:e,to:r,fromOffset:d,toOffset:f}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:l}=this.domFromPos(e,0);if(r.nodeType!=1||l==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[l]}setSelection(e,r,l,d=!1){let f=Math.min(e,r),b=Math.max(e,r);for(let a=0,u=0;a<this.children.length;a++){let h=this.children[a],y=u+h.size;if(f>u&&b<y)return h.setSelection(e-u-h.border,r-u-h.border,l,d);u=y}let S=this.domFromPos(e,e?-1:1),T=r==e?S:this.domFromPos(r,r?-1:1),R=l.root.getSelection(),i=l.domSelectionRange(),n=!1;if((et||U)&&e==r){let{node:a,offset:u}=S;if(a.nodeType==3){if(n=!!(u&&a.nodeValue[u-1]==`
`),n&&u==a.nodeValue.length)for(let h=a,y;h;h=h.parentNode){if(y=h.nextSibling){y.nodeName=="BR"&&(S=T={node:y.parentNode,offset:de(y)+1});break}let x=h.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let h=a.childNodes[u-1];n=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(et&&i.focusNode&&i.focusNode!=T.node&&i.focusNode.nodeType==1){let a=i.focusNode.childNodes[i.focusOffset];a&&a.contentEditable=="false"&&(d=!0)}if(!(d||n&&U)&&we(S.node,S.offset,i.anchorNode,i.anchorOffset)&&we(T.node,T.offset,i.focusNode,i.focusOffset))return;let s=!1;if((R.extend||e==r)&&!(n&&et)){R.collapse(S.node,S.offset);try{e!=r&&R.extend(T.node,T.offset),s=!0}catch{}}if(!s){if(e>r){let u=S;S=T,T=u}let a=document.createRange();a.setEnd(T.node,T.offset),a.setStart(S.node,S.offset),R.removeAllRanges(),R.addRange(a)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let l=0,d=0;d<this.children.length;d++){let f=this.children[d],b=l+f.size;if(l==b?e<=b&&r>=l:e<b&&r>l){let S=l+f.border,T=b-f.border;if(e>=S&&r<=T){this.dirty=e==l||r==b?z:A,e==S&&r==T&&(f.contentLost||f.dom.parentNode!=this.contentDOM)?f.dirty=$:f.markDirty(e-S,r-S);return}else f.dirty=f.dom==f.contentDOM&&f.dom.parentNode==this.contentDOM&&!f.children.length?z:$}l=b}this.dirty=z}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let l=e==1?z:A;r.dirty<l&&(r.dirty=l)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class re extends G{constructor(e,r,l,d){let f,b=r.type.toDOM;if(typeof b=="function"&&(b=b(l,()=>{if(!f)return d;if(f.parent)return f.parent.posBeforeChild(f)})),!r.type.spec.raw){if(b.nodeType!=1){let S=document.createElement("span");S.appendChild(b),b=S}b.contentEditable="false",b.classList.add("ProseMirror-widget")}super(e,[],b,null),this.widget=r,this.widget=r,f=this}matchesWidget(e){return this.dirty==M&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ee extends G{constructor(e,r,l,d){super(e,[],r,null),this.textDOM=l,this.text=d}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ye extends G{constructor(e,r,l,d,f){super(e,[],l,d),this.mark=r,this.spec=f}static create(e,r,l,d){let f=d.nodeViews[r.type.name],b=f&&f(r,d,l);return(!b||!b.dom)&&(b=De.PW.renderSpec(document,r.type.spec.toDOM(r,l),null,r.attrs)),new ye(e,r,b.dom,b.contentDOM||b.dom,b)}parseRule(){return this.dirty&$||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=$&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=M){let l=this.parent;for(;!l.node;)l=l.parent;l.dirty<this.dirty&&(l.dirty=this.dirty),this.dirty=M}}slice(e,r,l){let d=ye.create(this.parent,this.mark,!0,l),f=this.children,b=this.size;r<b&&(f=Ve(f,r,b,l)),e>0&&(f=Ve(f,0,e,l));for(let S=0;S<f.length;S++)f[S].parent=d;return d.children=f,d}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class v extends G{constructor(e,r,l,d,f,b,S,T,R){super(e,[],f,b),this.node=r,this.outerDeco=l,this.innerDeco=d,this.nodeDOM=S}static create(e,r,l,d,f,b){let S=f.nodeViews[r.type.name],T,R=S&&S(r,f,()=>{if(!T)return b;if(T.parent)return T.parent.posBeforeChild(T)},l,d),i=R&&R.dom,n=R&&R.contentDOM;if(r.isText){if(!i)i=document.createTextNode(r.text);else if(i.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else i||({dom:i,contentDOM:n}=De.PW.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!n&&!r.isText&&i.nodeName!="BR"&&(i.hasAttribute("contenteditable")||(i.contentEditable="false"),r.type.spec.draggable&&(i.draggable=!0));let s=i;return i=E(i,l,r),R?T=new k(e,r,l,d,i,n||null,s,R,f,b+1):r.isText?new c(e,r,l,d,i,s,f):new v(e,r,l,d,i,n||null,s,f,b+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let l=this.children[r];if(this.dom.contains(l.dom.parentNode)){e.contentElement=l.dom.parentNode;break}}e.contentElement||(e.getContent=()=>De.HY.empty)}return e}matchesNode(e,r,l){return this.dirty==M&&e.eq(this.node)&&O(r,this.outerDeco)&&l.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let l=this.node.inlineContent,d=r,f=e.composing?this.localCompositionInfo(e,r):null,b=f&&f.pos>-1?f:null,S=f&&f.pos<0,T=new J(this,b&&b.node,e);le(this.node,this.innerDeco,(R,i,n)=>{R.spec.marks?T.syncToMarks(R.spec.marks,l,e):R.type.side>=0&&!n&&T.syncToMarks(i==this.node.childCount?De.vc.none:this.node.child(i).marks,l,e),T.placeWidget(R,e,d)},(R,i,n,s)=>{T.syncToMarks(R.marks,l,e);let a;T.findNodeMatch(R,i,n,s)||S&&e.state.selection.from>d&&e.state.selection.to<d+R.nodeSize&&(a=T.findIndexWithChild(f.node))>-1&&T.updateNodeAt(R,i,n,a,e)||T.updateNextNode(R,i,n,e,s,d)||T.addNode(R,i,n,e,d),d+=R.nodeSize}),T.syncToMarks([],l,e),this.node.isTextblock&&T.addTextblockHacks(),T.destroyRest(),(T.changed||this.dirty==z)&&(b&&this.protectLocalComposition(e,b),C(this.contentDOM,this.children,e),ue&&Se(this.dom))}localCompositionInfo(e,r){let{from:l,to:d}=e.state.selection;if(!(e.state.selection instanceof N.Bs)||l<r||d>r+this.node.content.size)return null;let f=e.input.compositionNode;if(!f||!this.dom.contains(f.parentNode))return null;if(this.node.inlineContent){let b=f.nodeValue,S=ve(this.node.content,b,l-r,d-r);return S<0?null:{node:f,pos:S,text:b}}else return{node:f,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:l,text:d}){if(this.getDesc(r))return;let f=r;for(;f.parentNode!=this.contentDOM;f=f.parentNode){for(;f.previousSibling;)f.parentNode.removeChild(f.previousSibling);for(;f.nextSibling;)f.parentNode.removeChild(f.nextSibling);f.pmViewDesc&&(f.pmViewDesc=void 0)}let b=new ee(this,f,r,d);e.input.compositionNodes.push(b),this.children=Ve(this.children,l,l+d.length,e,b)}update(e,r,l,d){return this.dirty==$||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,l,d),!0)}updateInner(e,r,l,d){this.updateOuterDeco(r),this.node=e,this.innerDeco=l,this.contentDOM&&this.updateChildren(d,this.posAtStart),this.dirty=M}updateOuterDeco(e){if(O(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,l=this.dom;this.dom=he(this.dom,this.nodeDOM,K(this.outerDeco,this.node,r),K(e,this.node,r)),this.dom!=l&&(l.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function o(t,e,r,l,d){E(l,e,t);let f=new v(void 0,t,e,r,l,l,l,d,0);return f.contentDOM&&f.updateChildren(d,0),f}class c extends v{constructor(e,r,l,d,f,b,S){super(e,r,l,d,f,null,b,S,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,l,d){return this.dirty==$||this.dirty!=M&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=M||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,d.trackWrites==this.nodeDOM&&(d.trackWrites=null)),this.node=e,this.dirty=M,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,l){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,l)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,l){let d=this.node.cut(e,r),f=document.createTextNode(d.text);return new c(this.parent,d,this.outerDeco,this.innerDeco,f,f,l)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=$)}get domAtom(){return!1}isText(e){return this.node.text==e}}class m extends G{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==M&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class k extends v{constructor(e,r,l,d,f,b,S,T,R,i){super(e,r,l,d,f,b,S,R,i),this.spec=T}update(e,r,l,d){if(this.dirty==$)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let f=this.spec.update(e,r,l);return f&&this.updateInner(e,r,l,d),f}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,l,d)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,l,d){this.spec.setSelection?this.spec.setSelection(e,r,l.root):super.setSelection(e,r,l,d)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function C(t,e,r){let l=t.firstChild,d=!1;for(let f=0;f<e.length;f++){let b=e[f],S=b.dom;if(S.parentNode==t){for(;S!=l;)l=_(l),d=!0;l=l.nextSibling}else d=!0,t.insertBefore(S,l);if(b instanceof ye){let T=l?l.previousSibling:t.lastChild;C(b.contentDOM,b.children,r),l=T?T.nextSibling:t.firstChild}}for(;l;)l=_(l),d=!0;d&&r.trackWrites==t&&(r.trackWrites=null)}const I=function(t){t&&(this.nodeName=t)};I.prototype=Object.create(null);const H=[new I];function K(t,e,r){if(t.length==0)return H;let l=r?H[0]:new I,d=[l];for(let f=0;f<t.length;f++){let b=t[f].type.attrs;if(b){b.nodeName&&d.push(l=new I(b.nodeName));for(let S in b){let T=b[S];T!=null&&(r&&d.length==1&&d.push(l=new I(e.isInline?"span":"div")),S=="class"?l.class=(l.class?l.class+" ":"")+T:S=="style"?l.style=(l.style?l.style+";":"")+T:S!="nodeName"&&(l[S]=T))}}}return d}function he(t,e,r,l){if(r==H&&l==H)return e;let d=e;for(let f=0;f<l.length;f++){let b=l[f],S=r[f];if(f){let T;S&&S.nodeName==b.nodeName&&d!=t&&(T=d.parentNode)&&T.nodeName.toLowerCase()==b.nodeName||(T=document.createElement(b.nodeName),T.pmIsDeco=!0,T.appendChild(d),S=H[0]),d=T}Ae(d,S||H[0],b)}return d}function Ae(t,e,r){for(let l in e)l!="class"&&l!="style"&&l!="nodeName"&&!(l in r)&&t.removeAttribute(l);for(let l in r)l!="class"&&l!="style"&&l!="nodeName"&&r[l]!=e[l]&&t.setAttribute(l,r[l]);if(e.class!=r.class){let l=e.class?e.class.split(" ").filter(Boolean):[],d=r.class?r.class.split(" ").filter(Boolean):[];for(let f=0;f<l.length;f++)d.indexOf(l[f])==-1&&t.classList.remove(l[f]);for(let f=0;f<d.length;f++)l.indexOf(d[f])==-1&&t.classList.add(d[f]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,d;for(;d=l.exec(e.style);)t.style.removeProperty(d[1])}r.style&&(t.style.cssText+=r.style)}}function E(t,e,r){return he(t,t,H,K(e,r,t.nodeType!=1))}function O(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function _(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class J{constructor(e,r,l){this.lock=r,this.view=l,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Y(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let l=e;l<r;l++)this.top.children[l].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,l){let d=0,f=this.stack.length>>1,b=Math.min(f,e.length);for(;d<b&&(d==f-1?this.top:this.stack[d+1<<1]).matchesMark(e[d])&&e[d].type.spec.spanning!==!1;)d++;for(;d<f;)this.destroyRest(),this.top.dirty=M,this.index=this.stack.pop(),this.top=this.stack.pop(),f--;for(;f<e.length;){this.stack.push(this.top,this.index+1);let S=-1;for(let T=this.index;T<Math.min(this.index+3,this.top.children.length);T++){let R=this.top.children[T];if(R.matchesMark(e[f])&&!this.isLocked(R.dom)){S=T;break}}if(S>-1)S>this.index&&(this.changed=!0,this.destroyBetween(this.index,S)),this.top=this.top.children[this.index];else{let T=ye.create(this.top,e[f],r,l);this.top.children.splice(this.index,0,T),this.top=T,this.changed=!0}this.index=0,f++}}findNodeMatch(e,r,l,d){let f=-1,b;if(d>=this.preMatch.index&&(b=this.preMatch.matches[d-this.preMatch.index]).parent==this.top&&b.matchesNode(e,r,l))f=this.top.children.indexOf(b,this.index);else for(let S=this.index,T=Math.min(this.top.children.length,S+5);S<T;S++){let R=this.top.children[S];if(R.matchesNode(e,r,l)&&!this.preMatch.matched.has(R)){f=S;break}}return f<0?!1:(this.destroyBetween(this.index,f),this.index++,!0)}updateNodeAt(e,r,l,d,f){let b=this.top.children[d];return b.dirty==$&&b.dom==b.contentDOM&&(b.dirty=z),b.update(e,r,l,f)?(this.destroyBetween(this.index,d),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let l=e.pmViewDesc;if(l){for(let d=this.index;d<this.top.children.length;d++)if(this.top.children[d]==l)return d}return-1}e=r}}updateNextNode(e,r,l,d,f,b){for(let S=this.index;S<this.top.children.length;S++){let T=this.top.children[S];if(T instanceof v){let R=this.preMatch.matched.get(T);if(R!=null&&R!=f)return!1;let i=T.dom,n,s=this.isLocked(i)&&!(e.isText&&T.node&&T.node.isText&&T.nodeDOM.nodeValue==e.text&&T.dirty!=$&&O(r,T.outerDeco));if(!s&&T.update(e,r,l,d))return this.destroyBetween(this.index,S),T.dom!=i&&(this.changed=!0),this.index++,!0;if(!s&&(n=this.recreateWrapper(T,e,r,l,d,b)))return this.destroyBetween(this.index,S),this.top.children[this.index]=n,n.contentDOM&&(n.dirty=z,n.updateChildren(d,b+1),n.dirty=M),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,l,d,f,b){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!O(l,e.outerDeco)||!d.eq(e.innerDeco))return null;let S=v.create(this.top,r,l,d,f,b);if(S.contentDOM){S.children=e.children,e.children=[];for(let T of S.children)T.parent=S}return e.destroy(),S}addNode(e,r,l,d,f){let b=v.create(this.top,e,r,l,d,f);b.contentDOM&&b.updateChildren(d,f+1),this.top.children.splice(this.index++,0,b),this.changed=!0}placeWidget(e,r,l){let d=this.index<this.top.children.length?this.top.children[this.index]:null;if(d&&d.matchesWidget(e)&&(e==d.widget||!d.widget.type.toDOM.parentNode))this.index++;else{let f=new re(this.top,e,r,l);this.top.children.splice(this.index++,0,f),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof ye;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof c)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((U||D)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let l=document.createElement(e);e=="IMG"&&(l.className="ProseMirror-separator",l.alt=""),e=="BR"&&(l.className="ProseMirror-trailingBreak");let d=new m(this.top,[],l,null);r!=this.top?r.children.push(d):r.children.splice(this.index++,0,d),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Y(t,e){let r=e,l=r.children.length,d=t.childCount,f=new Map,b=[];e:for(;d>0;){let S;for(;;)if(l){let R=r.children[l-1];if(R instanceof ye)r=R,l=R.children.length;else{S=R,l--;break}}else{if(r==e)break e;l=r.parent.children.indexOf(r),r=r.parent}let T=S.node;if(T){if(T!=t.child(d-1))break;--d,f.set(S,d),b.push(S)}}return{index:d,matched:f,matches:b.reverse()}}function te(t,e){return t.type.side-e.type.side}function le(t,e,r,l){let d=e.locals(t),f=0;if(d.length==0){for(let R=0;R<t.childCount;R++){let i=t.child(R);l(i,d,e.forChild(f,i),R),f+=i.nodeSize}return}let b=0,S=[],T=null;for(let R=0;;){let i,n;for(;b<d.length&&d[b].to==f;){let y=d[b++];y.widget&&(i?(n||(n=[i])).push(y):i=y)}if(i)if(n){n.sort(te);for(let y=0;y<n.length;y++)r(n[y],R,!!T)}else r(i,R,!!T);let s,a;if(T)a=-1,s=T,T=null;else if(R<t.childCount)a=R,s=t.child(R++);else break;for(let y=0;y<S.length;y++)S[y].to<=f&&S.splice(y--,1);for(;b<d.length&&d[b].from<=f&&d[b].to>f;)S.push(d[b++]);let u=f+s.nodeSize;if(s.isText){let y=u;b<d.length&&d[b].from<y&&(y=d[b].from);for(let x=0;x<S.length;x++)S[x].to<y&&(y=S[x].to);y<u&&(T=s.cut(y-f),s=s.cut(0,y-f),u=y,a=-1)}else for(;b<d.length&&d[b].to<u;)b++;let h=s.isInline&&!s.isLeaf?S.filter(y=>!y.inline):S.slice();l(s,h,e.forChild(f,s),a),f=u}}function Se(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function ve(t,e,r,l){for(let d=0,f=0;d<t.childCount&&f<=l;){let b=t.child(d++),S=f;if(f+=b.nodeSize,!b.isText)continue;let T=b.text;for(;d<t.childCount;){let R=t.child(d++);if(f+=R.nodeSize,!R.isText)break;T+=R.text}if(f>=r){if(f>=l&&T.slice(l-e.length-S,l-S)==e)return l-e.length;let R=S<l?T.lastIndexOf(e,l-S-1):-1;if(R>=0&&R+e.length+S>=r)return S+R;if(r==l&&T.length>=l+e.length-S&&T.slice(l-S,l-S+e.length)==e)return l}}return-1}function Ve(t,e,r,l,d){let f=[];for(let b=0,S=0;b<t.length;b++){let T=t[b],R=S,i=S+=T.size;R>=r||i<=e?f.push(T):(R<e&&f.push(T.slice(0,e-R,l)),d&&(f.push(d),d=void 0),i>r&&f.push(T.slice(r-R,T.size,l)))}return f}function nt(t,e=null){let r=t.domSelectionRange(),l=t.state.doc;if(!r.focusNode)return null;let d=t.docView.nearestDesc(r.focusNode),f=d&&d.size==0,b=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(b<0)return null;let S=l.resolve(b),T,R;if(Ie(r)){for(T=b;d&&!d.node;)d=d.parent;let n=d.node;if(d&&n.isAtom&&N.qv.isSelectable(n)&&d.parent&&!(n.isInline&&Ke(r.focusNode,r.focusOffset,d.dom))){let s=d.posBefore;R=new N.qv(b==s?S:l.resolve(s))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let n=b,s=b;for(let a=0;a<r.rangeCount;a++){let u=r.getRangeAt(a);n=Math.min(n,t.docView.posFromDOM(u.startContainer,u.startOffset,1)),s=Math.max(s,t.docView.posFromDOM(u.endContainer,u.endOffset,-1))}if(n<0)return null;[T,b]=s==t.state.selection.anchor?[s,n]:[n,s],S=l.resolve(b)}else T=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(T<0)return null}let i=l.resolve(T);if(!R){let n=e=="pointer"||t.state.selection.head<S.pos&&!f?1:-1;R=Mn(t,i,S,n)}return R}function Be(t){return t.editable?t.hasFocus():jn(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qe(t,e=!1){let r=t.state.selection;if(Wn(t,r),!!Be(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&D){let l=t.domSelectionRange(),d=t.domObserver.currentSelection;if(l.anchorNode&&d.anchorNode&&we(l.anchorNode,l.anchorOffset,d.anchorNode,d.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Hn(t);else{let{anchor:l,head:d}=r,f,b;ht&&!(r instanceof N.Bs)&&(r.$from.parent.inlineContent||(f=bt(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(b=bt(t,r.to))),t.docView.setSelection(l,d,t,e),ht&&(f&&_t(f),b&&_t(b)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&xn(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const ht=U||D&&j<63;function bt(t,e){let{node:r,offset:l}=t.docView.domFromPos(e,0),d=l<r.childNodes.length?r.childNodes[l]:null,f=l?r.childNodes[l-1]:null;if(U&&d&&d.contentEditable=="false")return St(d);if((!d||d.contentEditable=="false")&&(!f||f.contentEditable=="false")){if(d)return St(d);if(f)return St(f)}}function St(t){return t.contentEditable="true",U&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function _t(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function xn(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),l=r.anchorNode,d=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=l||r.anchorOffset!=d)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Be(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Hn(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,l=r.nodeName=="IMG";l?e.collapse(r.parentNode,de(r)+1):e.collapse(r,0),!l&&!t.state.selection.visible&&Te&&Ee<=11&&(r.disabled=!0,r.disabled=!1)}function Wn(t,e){if(e instanceof N.qv){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(qn(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else qn(t)}function qn(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Mn(t,e,r,l){return t.someProp("createSelectionBetween",d=>d(t,e,r))||N.Bs.between(e,r,l)}function Kn(t){return t.editable&&!t.hasFocus()?!1:jn(t)}function jn(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Cr(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return we(e.node,e.offset,r.anchorNode,r.anchorOffset)}function Cn(t,e){let{$anchor:r,$head:l}=t.selection,d=e>0?r.max(l):r.min(l),f=d.parent.inlineContent?d.depth?t.doc.resolve(e>0?d.after():d.before()):null:d;return f&&N.Y1.findFrom(f,e)}function Vt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Jn(t,e,r){let l=t.state.selection;if(l instanceof N.Bs)if(r.indexOf("s")>-1){let{$head:d}=l,f=d.textOffset?null:e<0?d.nodeBefore:d.nodeAfter;if(!f||f.isText||!f.isLeaf)return!1;let b=t.state.doc.resolve(d.pos+f.nodeSize*(e<0?-1:1));return Vt(t,new N.Bs(l.$anchor,b))}else if(l.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let d=Cn(t.state,e);return d&&d instanceof N.qv?Vt(t,d):!1}else if(!(ae&&r.indexOf("m")>-1)){let d=l.$head,f=d.textOffset?null:e<0?d.nodeBefore:d.nodeAfter,b;if(!f||f.isText)return!1;let S=e<0?d.pos-f.nodeSize:d.pos;return f.isAtom||(b=t.docView.descAt(S))&&!b.contentDOM?N.qv.isSelectable(f)?Vt(t,new N.qv(e<0?t.state.doc.resolve(d.pos-f.nodeSize):d)):je?Vt(t,new N.Bs(t.state.doc.resolve(e<0?S:S+f.nodeSize))):!1:!1}}else return!1;else{if(l instanceof N.qv&&l.node.isInline)return Vt(t,new N.Bs(e>0?l.$to:l.$from));{let d=Cn(t.state,e);return d?Vt(t,d):!1}}}function cn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function rn(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Qt(t,e){return e<0?un(t):Yn(t)}function un(t){let e=t.domSelectionRange(),r=e.focusNode,l=e.focusOffset;if(!r)return;let d,f,b=!1;for(et&&r.nodeType==1&&l<cn(r)&&rn(r.childNodes[l],-1)&&(b=!0);;)if(l>0){if(r.nodeType!=1)break;{let S=r.childNodes[l-1];if(rn(S,-1))d=r,f=--l;else if(S.nodeType==3)r=S,l=r.nodeValue.length;else break}}else{if(wn(r))break;{let S=r.previousSibling;for(;S&&rn(S,-1);)d=r.parentNode,f=de(S),S=S.previousSibling;if(S)r=S,l=cn(r);else{if(r=r.parentNode,r==t.dom)break;l=0}}}b?En(t,r,l):d&&En(t,d,f)}function Yn(t){let e=t.domSelectionRange(),r=e.focusNode,l=e.focusOffset;if(!r)return;let d=cn(r),f,b;for(;;)if(l<d){if(r.nodeType!=1)break;let S=r.childNodes[l];if(rn(S,1))f=r,b=++l;else break}else{if(wn(r))break;{let S=r.nextSibling;for(;S&&rn(S,1);)f=S.parentNode,b=de(S)+1,S=S.nextSibling;if(S)r=S,l=0,d=cn(r);else{if(r=r.parentNode,r==t.dom)break;l=d=0}}}f&&En(t,f,b)}function wn(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function vn(t,e){for(;t&&e==t.childNodes.length&&!fe(t);)e=de(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function $t(t,e){for(;t&&!e&&!fe(t);)e=de(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function En(t,e,r){if(e.nodeType!=3){let f,b;(b=vn(e,r))?(e=b,r=0):(f=$t(e,r))&&(e=f,r=f.nodeValue.length)}let l=t.domSelection();if(!l)return;if(Ie(l)){let f=document.createRange();f.setEnd(e,r),f.setStart(e,r),l.removeAllRanges(),l.addRange(f)}else l.extend&&l.extend(e,r);t.domObserver.setCurSelection();let{state:d}=t;setTimeout(()=>{t.state==d&&qe(t)},50)}function Un(t,e){let r=t.state.doc.resolve(e);if(!(D||xe)&&r.parent.inlineContent){let d=t.coordsAtPos(e);if(e>r.start()){let f=t.coordsAtPos(e-1),b=(f.top+f.bottom)/2;if(b>d.top&&b<d.bottom&&Math.abs(f.left-d.left)>1)return f.left<d.left?"ltr":"rtl"}if(e<r.end()){let f=t.coordsAtPos(e+1),b=(f.top+f.bottom)/2;if(b>d.top&&b<d.bottom&&Math.abs(f.left-d.left)>1)return f.left>d.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function On(t,e,r){let l=t.state.selection;if(l instanceof N.Bs&&!l.empty||r.indexOf("s")>-1||ae&&r.indexOf("m")>-1)return!1;let{$from:d,$to:f}=l;if(!d.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let b=Cn(t.state,e);if(b&&b instanceof N.qv)return Vt(t,b)}if(!d.parent.inlineContent){let b=e<0?d:f,S=l instanceof N.C1?N.Y1.near(b,e):N.Y1.findFrom(b,e);return S?Vt(t,S):!1}return!1}function Lt(t,e){if(!(t.state.selection instanceof N.Bs))return!0;let{$head:r,$anchor:l,empty:d}=t.state.selection;if(!r.sameParent(l))return!0;if(!d)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let f=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(f&&!f.isText){let b=t.state.tr;return e<0?b.delete(r.pos-f.nodeSize,r.pos):b.delete(r.pos,r.pos+f.nodeSize),t.dispatch(b),!0}return!1}function Tn(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function Gn(t){if(!U||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let l=e.firstChild;Tn(t,l,"true"),setTimeout(()=>Tn(t,l,"false"),20)}return!1}function dn(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function wr(t,e){let r=e.keyCode,l=dn(e);if(r==8||ae&&r==72&&l=="c")return Lt(t,-1)||Qt(t,-1);if(r==46&&!e.shiftKey||ae&&r==68&&l=="c")return Lt(t,1)||Qt(t,1);if(r==13||r==27)return!0;if(r==37||ae&&r==66&&l=="c"){let d=r==37?Un(t,t.state.selection.from)=="ltr"?-1:1:-1;return Jn(t,d,l)||Qt(t,d)}else if(r==39||ae&&r==70&&l=="c"){let d=r==39?Un(t,t.state.selection.from)=="ltr"?1:-1:1;return Jn(t,d,l)||Qt(t,d)}else{if(r==38||ae&&r==80&&l=="c")return On(t,-1,l)||Qt(t,-1);if(r==40||ae&&r==78&&l=="c")return Gn(t)||On(t,1,l)||Qt(t,1);if(l==(ae?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function Nn(t,e){t.someProp("transformCopied",a=>{e=a(e,t)});let r=[],{content:l,openStart:d,openEnd:f}=e;for(;d>1&&f>1&&l.childCount==1&&l.firstChild.childCount==1;){d--,f--;let a=l.firstChild;r.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),l=a.content}let b=t.someProp("clipboardSerializer")||De.PW.fromSchema(t.state.schema),S=ir(),T=S.createElement("div");T.appendChild(b.serializeFragment(l,{document:S}));let R=T.firstChild,i,n=0;for(;R&&R.nodeType==1&&(i=nr[R.nodeName.toLowerCase()]);){for(let a=i.length-1;a>=0;a--){let u=S.createElement(i[a]);for(;T.firstChild;)u.appendChild(T.firstChild);T.appendChild(u),n++}R=T.firstChild}R&&R.nodeType==1&&R.setAttribute("data-pm-slice",`${d} ${f}${n?` -${n}`:""} ${JSON.stringify(r)}`);let s=t.someProp("clipboardTextSerializer",a=>a(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:T,text:s,slice:e}}function Xn(t,e,r,l,d){let f=d.parent.type.spec.code,b,S;if(!r&&!e)return null;let T=!!e&&(l||f||!r);if(T){if(t.someProp("transformPastedText",s=>{e=s(e,f||l,t)}),f)return S=new De.p2(De.HY.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",s=>{S=s(S,t,!0)}),S;let n=t.someProp("clipboardTextParser",s=>s(e,d,l,t));if(n)S=n;else{let s=d.marks(),{schema:a}=t.state,u=De.PW.fromSchema(a);b=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(h=>{let y=b.appendChild(document.createElement("p"));h&&y.appendChild(u.serializeNode(a.text(h,s)))})}}else t.someProp("transformPastedHTML",n=>{r=n(r,t)}),b=Er(r),je&&Or(b);let R=b&&b.querySelector("[data-pm-slice]"),i=R&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(R.getAttribute("data-pm-slice")||"");if(i&&i[3])for(let n=+i[3];n>0;n--){let s=b.firstChild;for(;s&&s.nodeType!=1;)s=s.nextSibling;if(!s)break;b=s}if(S||(S=(t.someProp("clipboardParser")||t.someProp("domParser")||De.aw.fromSchema(t.state.schema)).parseSlice(b,{preserveWhitespace:!!(T||i),context:d,ruleFromNode(s){return s.nodeName=="BR"&&!s.nextSibling&&s.parentNode&&!Zn.test(s.parentNode.nodeName)?{ignore:!0}:null}})),i)S=sr(tr(S,+i[1],+i[2]),i[4]);else if(S=De.p2.maxOpen(sn(S.content,d),!0),S.openStart||S.openEnd){let n=0,s=0;for(let a=S.content.firstChild;n<S.openStart&&!a.type.spec.isolating;n++,a=a.firstChild);for(let a=S.content.lastChild;s<S.openEnd&&!a.type.spec.isolating;s++,a=a.lastChild);S=tr(S,n,s)}return t.someProp("transformPasted",n=>{S=n(S,t,T)}),S}const Zn=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function sn(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let d=e.node(r).contentMatchAt(e.index(r)),f,b=[];if(t.forEach(S=>{if(!b)return;let T=d.findWrapping(S.type),R;if(!T)return b=null;if(R=b.length&&f.length&&Qn(T,f,S,b[b.length-1],0))b[b.length-1]=R;else{b.length&&(b[b.length-1]=er(b[b.length-1],f.length));let i=en(S,T);b.push(i),d=d.matchType(i.type),f=T}}),b)return De.HY.from(b)}return t}function en(t,e,r=0){for(let l=e.length-1;l>=r;l--)t=e[l].create(null,De.HY.from(t));return t}function Qn(t,e,r,l,d){if(d<t.length&&d<e.length&&t[d]==e[d]){let f=Qn(t,e,r,l.lastChild,d+1);if(f)return l.copy(l.content.replaceChild(l.childCount-1,f));if(l.contentMatchAt(l.childCount).matchType(d==t.length-1?r.type:t[d+1]))return l.copy(l.content.append(De.HY.from(en(r,t,d+1))))}}function er(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,er(t.lastChild,e-1)),l=t.contentMatchAt(t.childCount).fillBefore(De.HY.empty,!0);return t.copy(r.append(l))}function An(t,e,r,l,d,f){let b=e<0?t.firstChild:t.lastChild,S=b.content;return t.childCount>1&&(f=0),d<l-1&&(S=An(S,e,r,l,d+1,f)),d>=r&&(S=e<0?b.contentMatchAt(0).fillBefore(S,f<=d).append(S):S.append(b.contentMatchAt(b.childCount).fillBefore(De.HY.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,b.copy(S))}function tr(t,e,r){return e<t.openStart&&(t=new De.p2(An(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new De.p2(An(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const nr={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let rr=null;function ir(){return rr||(rr=document.implementation.createHTMLDocument("title"))}let Dn=null;function vr(t){let e=window.trustedTypes;return e?(Dn||(Dn=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),Dn.createHTML(t)):t}function Er(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=ir().createElement("div"),l=/<([a-z][^>\s]+)/i.exec(t),d;if((d=l&&nr[l[1].toLowerCase()])&&(t=d.map(f=>"<"+f+">").join("")+t+d.map(f=>"</"+f+">").reverse().join("")),r.innerHTML=vr(t),d)for(let f=0;f<d.length;f++)r=r.querySelector(d[f])||r;return r}function Or(t){let e=t.querySelectorAll(D?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let l=e[r];l.childNodes.length==1&&l.textContent=="\xA0"&&l.parentNode&&l.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),l)}}function sr(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,l;try{l=JSON.parse(e)}catch{return t}let{content:d,openStart:f,openEnd:b}=t;for(let S=l.length-2;S>=0;S-=2){let T=r.nodes[l[S]];if(!T||T.hasRequiredAttrs())break;d=De.HY.from(T.create(l[S+1],d)),f++,b++}return new De.p2(d,f,b)}const Dt={},It={},on={touchstart:!0,touchmove:!0};class Tr{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Nr(t){for(let e in Dt){let r=Dt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=l=>{Dr(t,l)&&!fn(t,l)&&(t.editable||!(l.type in It))&&r(t,l)},on[e]?{passive:!0}:void 0)}U&&t.dom.addEventListener("input",()=>null),tn(t)}function Ht(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ar(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function tn(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=l=>fn(t,l))})}function fn(t,e){return t.someProp("handleDOMEvents",r=>{let l=r[e.type];return l?l(t,e)||e.defaultPrevented:!1})}function Dr(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Ir(t,e){!fn(t,e)&&Dt[e.type]&&(t.editable||!(e.type in It))&&Dt[e.type](t,e)}It.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!lr(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Oe&&D&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),ue&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let l=Date.now();t.input.lastIOSEnter=l,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==l&&(t.someProp("handleKeyDown",d=>d(t,be(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",l=>l(t,r))||wr(t,r)?r.preventDefault():Ht(t,"key")},It.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)},It.keypress=(t,e)=>{let r=e;if(lr(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ae&&r.metaKey)return;if(t.someProp("handleKeyPress",d=>d(t,r))){r.preventDefault();return}let l=t.state.selection;if(!(l instanceof N.Bs)||!l.$from.sameParent(l.$to)){let d=String.fromCharCode(r.charCode),f=()=>t.state.tr.insertText(d).scrollIntoView();!/[\r\n]/.test(d)&&!t.someProp("handleTextInput",b=>b(t,l.$from.pos,l.$to.pos,d,f))&&t.dispatch(f()),r.preventDefault()}};function hn(t){return{left:t.clientX,top:t.clientY}}function Rr(t,e){let r=e.x-t.clientX,l=e.y-t.clientY;return r*r+l*l<100}function In(t,e,r,l,d){if(l==-1)return!1;let f=t.state.doc.resolve(l);for(let b=f.depth+1;b>0;b--)if(t.someProp(e,S=>b>f.depth?S(t,r,f.nodeAfter,f.before(b),d,!0):S(t,r,f.node(b),f.before(b),d,!1)))return!0;return!1}function nn(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let l=t.state.tr.setSelection(e);r=="pointer"&&l.setMeta("pointer",!0),t.dispatch(l)}function Pr(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),l=r.nodeAfter;return l&&l.isAtom&&N.qv.isSelectable(l)?(nn(t,new N.qv(r),"pointer"),!0):!1}function Br(t,e){if(e==-1)return!1;let r=t.state.selection,l,d;r instanceof N.qv&&(l=r.node);let f=t.state.doc.resolve(e);for(let b=f.depth+1;b>0;b--){let S=b>f.depth?f.nodeAfter:f.node(b);if(N.qv.isSelectable(S)){l&&r.$from.depth>0&&b>=r.$from.depth&&f.before(r.$from.depth+1)==r.$from.pos?d=f.before(r.$from.depth):d=f.before(b);break}}return d!=null?(nn(t,N.qv.create(t.state.doc,d),"pointer"),!0):!1}function Rn(t,e,r,l,d){return In(t,"handleClickOn",e,r,l)||t.someProp("handleClick",f=>f(t,e,l))||(d?Br(t,r):Pr(t,r))}function zr(t,e,r,l){return In(t,"handleDoubleClickOn",e,r,l)||t.someProp("handleDoubleClick",d=>d(t,e,l))}function or(t,e,r,l){return In(t,"handleTripleClickOn",e,r,l)||t.someProp("handleTripleClick",d=>d(t,e,l))||Zr(t,r,l)}function Zr(t,e,r){if(r.button!=0)return!1;let l=t.state.doc;if(e==-1)return l.inlineContent?(nn(t,N.Bs.create(l,0,l.content.size),"pointer"),!0):!1;let d=l.resolve(e);for(let f=d.depth+1;f>0;f--){let b=f>d.depth?d.nodeAfter:d.node(f),S=d.before(f);if(b.inlineContent)nn(t,N.Bs.create(l,S+1,S+1+b.content.size),"pointer");else if(N.qv.isSelectable(b))nn(t,N.qv.create(l,S),"pointer");else continue;return!0}}function Pn(t){return Bn(t)}const Lr=ae?"metaKey":"ctrlKey";Dt.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let l=Pn(t),d=Date.now(),f="singleClick";d-t.input.lastClick.time<500&&Rr(r,t.input.lastClick)&&!r[Lr]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?f="doubleClick":t.input.lastClick.type=="doubleClick"&&(f="tripleClick")),t.input.lastClick={time:d,x:r.clientX,y:r.clientY,type:f,button:r.button};let b=t.posAtCoords(hn(r));b&&(f=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Qr(t,b,r,!!l)):(f=="doubleClick"?zr:or)(t,b.pos,b.inside,r)?r.preventDefault():Ht(t,"pointer"))};class Qr{constructor(e,r,l,d){this.view=e,this.pos=r,this.event=l,this.flushed=d,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!l[Lr],this.allowDefault=l.shiftKey;let f,b;if(r.inside>-1)f=e.state.doc.nodeAt(r.inside),b=r.inside;else{let i=e.state.doc.resolve(r.pos);f=i.parent,b=i.depth?i.before():0}const S=d?null:l.target,T=S?e.docView.nearestDesc(S,!0):null;this.target=T&&T.nodeDOM.nodeType==1?T.nodeDOM:null;let{selection:R}=e.state;(l.button==0&&f.type.spec.draggable&&f.type.spec.selectable!==!1||R instanceof N.qv&&R.from<=b&&R.to>b)&&(this.mightDrag={node:f,pos:b,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&et&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ht(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qe(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(hn(e))),this.updateAllowDefault(e),this.allowDefault||!r?Ht(this.view,"pointer"):Rn(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||U&&this.mightDrag&&!this.mightDrag.node.isAtom||D&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(nn(this.view,N.Y1.near(this.view.state.doc.resolve(r.pos)),"pointer"),e.preventDefault()):Ht(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ht(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Dt.touchstart=t=>{t.input.lastTouch=Date.now(),Pn(t),Ht(t,"pointer")},Dt.touchmove=t=>{t.input.lastTouch=Date.now(),Ht(t,"pointer")},Dt.contextmenu=t=>Pn(t);function lr(t,e){return t.composing?!0:U&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const pn=Oe?5e3:-1;It.compositionstart=It.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof N.Bs&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(l=>l.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||r.marks(),Bn(t,!0),t.markCursor=null;else if(Bn(t,!e.selection.empty),et&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let l=t.domSelectionRange();for(let d=l.focusNode,f=l.focusOffset;d&&d.nodeType==1&&f!=0;){let b=f<0?d.lastChild:d.childNodes[f-1];if(!b)break;if(b.nodeType==3){let S=t.domSelection();S&&S.collapse(b,b.nodeValue.length);break}else d=b,f=-1}}t.input.composing=!0}mn(t,pn)},It.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,mn(t,20))};function mn(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Bn(t),e))}function Fr(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=ar());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function ei(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=ct(e.focusNode,e.focusOffset),l=it(e.focusNode,e.focusOffset);if(r&&l&&r!=l){let d=l.pmViewDesc,f=t.domObserver.lastChangedTextNode;if(r==f||l==f)return f;if(!d||!d.isText(l.nodeValue))return l;if(t.input.compositionNode==l){let b=r.pmViewDesc;if(!(!b||!b.isText(r.nodeValue)))return l}}return r||l}function ar(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Bn(t,e=!1){if(!(Oe&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Fr(t),e||t.docView&&t.docView.dirty){let r=nt(t),l=t.state.selection;return r&&!r.eq(l)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!l.$from.node(l.$from.sharedDepth(l.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function _r(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let l=getSelection(),d=document.createRange();d.selectNodeContents(e),t.dom.blur(),l.removeAllRanges(),l.addRange(d),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const ln=Te&&Ee<15||ue&&ut<604;Dt.copy=It.cut=(t,e)=>{let r=e,l=t.state.selection,d=r.type=="cut";if(l.empty)return;let f=ln?null:r.clipboardData,b=l.content(),{dom:S,text:T}=Nn(t,b);f?(r.preventDefault(),f.clearData(),f.setData("text/html",S.innerHTML),f.setData("text/plain",T)):_r(t,S),d&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Vr(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function $r(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,l=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(l.contentEditable="true"),l.style.cssText="position: fixed; left: -10000px; top: 10px",l.focus();let d=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),l.parentNode&&l.parentNode.removeChild(l),r?gn(t,l.value,null,d,e):gn(t,l.textContent,l.innerHTML,d,e)},50)}function gn(t,e,r,l,d){let f=Xn(t,e,r,l,t.state.selection.$from);if(t.someProp("handlePaste",T=>T(t,d,f||De.p2.empty)))return!0;if(!f)return!1;let b=Vr(f),S=b?t.state.tr.replaceSelectionWith(b,l):t.state.tr.replaceSelection(f);return t.dispatch(S.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function cr(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}It.paste=(t,e)=>{let r=e;if(t.composing&&!Oe)return;let l=ln?null:r.clipboardData,d=t.input.shiftKey&&t.input.lastKeyCode!=45;l&&gn(t,cr(l),l.getData("text/html"),d,r)?r.preventDefault():$r(t,r)};class zn{constructor(e,r,l){this.slice=e,this.move=r,this.node=l}}const ti=ae?"altKey":"ctrlKey";function an(t,e){let r=t.someProp("dragCopies",l=>!l(e));return r??!e[ti]}Dt.dragstart=(t,e)=>{let r=e,l=t.input.mouseDown;if(l&&l.done(),!r.dataTransfer)return;let d=t.state.selection,f=d.empty?null:t.posAtCoords(hn(r)),b;if(!(f&&f.pos>=d.from&&f.pos<=(d instanceof N.qv?d.to-1:d.to))){if(l&&l.mightDrag)b=N.qv.create(t.state.doc,l.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let n=t.docView.nearestDesc(r.target,!0);n&&n.node.type.spec.draggable&&n!=t.docView&&(b=N.qv.create(t.state.doc,n.posBefore))}}let S=(b||t.state.selection).content(),{dom:T,text:R,slice:i}=Nn(t,S);(!r.dataTransfer.files.length||!D||j>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(ln?"Text":"text/html",T.innerHTML),r.dataTransfer.effectAllowed="copyMove",ln||r.dataTransfer.setData("text/plain",R),t.dragging=new zn(i,an(t,r),b)},Dt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)},It.dragover=It.dragenter=(t,e)=>e.preventDefault(),It.drop=(t,e)=>{let r=e,l=t.dragging;if(t.dragging=null,!r.dataTransfer)return;let d=t.posAtCoords(hn(r));if(!d)return;let f=t.state.doc.resolve(d.pos),b=l&&l.slice;b?t.someProp("transformPasted",u=>{b=u(b,t,!1)}):b=Xn(t,cr(r.dataTransfer),ln?null:r.dataTransfer.getData("text/html"),!1,f);let S=!!(l&&an(t,r));if(t.someProp("handleDrop",u=>u(t,r,b||De.p2.empty,S))){r.preventDefault();return}if(!b)return;r.preventDefault();let T=b?(0,Ct.nj)(t.state.doc,f.pos,b):f.pos;T==null&&(T=f.pos);let R=t.state.tr;if(S){let{node:u}=l;u?u.replace(R):R.deleteSelection()}let i=R.mapping.map(T),n=b.openStart==0&&b.openEnd==0&&b.content.childCount==1,s=R.doc;if(n?R.replaceRangeWith(i,i,b.content.firstChild):R.replaceRange(i,i,b),R.doc.eq(s))return;let a=R.doc.resolve(i);if(n&&N.qv.isSelectable(b.content.firstChild)&&a.nodeAfter&&a.nodeAfter.sameMarkup(b.content.firstChild))R.setSelection(new N.qv(a));else{let u=R.mapping.map(T);R.mapping.maps[R.mapping.maps.length-1].forEach((h,y,x,w)=>u=w),R.setSelection(Mn(t,a,R.doc.resolve(u)))}t.focus(),t.dispatch(R.setMeta("uiEvent","drop"))},Dt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qe(t)},20))},Dt.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Dt.beforeinput=(t,e)=>{if(D&&Oe&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:l}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=l||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",f=>f(t,be(8,"Backspace")))))return;let{$cursor:d}=t.state.selection;d&&d.pos>0&&t.dispatch(t.state.tr.delete(d.pos-1,d.pos).scrollIntoView())},50)}};for(let t in It)Dt[t]=It[t];function Jt(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class yn{constructor(e,r){this.toDOM=e,this.spec=r||Ut,this.side=this.spec.side||0}map(e,r,l,d){let{pos:f,deleted:b}=e.mapResult(r.from+d,this.side<0?-1:1);return b?null:new Pt(f-l,f-l,this)}valid(){return!0}eq(e){return this==e||e instanceof yn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Jt(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Yt{constructor(e,r){this.attrs=e,this.spec=r||Ut}map(e,r,l,d){let f=e.map(r.from+d,this.spec.inclusiveStart?-1:1)-l,b=e.map(r.to+d,this.spec.inclusiveEnd?1:-1)-l;return f>=b?null:new Pt(f,b,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Yt&&Jt(this.attrs,e.attrs)&&Jt(this.spec,e.spec)}static is(e){return e.type instanceof Yt}destroy(){}}class ur{constructor(e,r){this.attrs=e,this.spec=r||Ut}map(e,r,l,d){let f=e.mapResult(r.from+d,1);if(f.deleted)return null;let b=e.mapResult(r.to+d,-1);return b.deleted||b.pos<=f.pos?null:new Pt(f.pos-l,b.pos-l,this)}valid(e,r){let{index:l,offset:d}=e.content.findIndex(r.from),f;return d==r.from&&!(f=e.child(l)).isText&&d+f.nodeSize==r.to}eq(e){return this==e||e instanceof ur&&Jt(this.attrs,e.attrs)&&Jt(this.spec,e.spec)}destroy(){}}class Pt{constructor(e,r,l){this.from=e,this.to=r,this.type=l}copy(e,r){return new Pt(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,l){return this.type.map(e,this,r,l)}static widget(e,r,l){return new Pt(e,e,new yn(r,l))}static inline(e,r,l,d){return new Pt(e,r,new Yt(l,d))}static node(e,r,l,d){return new Pt(e,r,new ur(l,d))}get spec(){return this.type.spec}get inline(){return this.type instanceof Yt}get widget(){return this.type instanceof yn}}const Wt=[],Ut={};class wt{constructor(e,r){this.local=e.length?e:Wt,this.children=r.length?r:Wt}static create(e,r){return r.length?bn(r,e,0,Ut):vt}find(e,r,l){let d=[];return this.findInner(e??0,r??1e9,d,0,l),d}findInner(e,r,l,d,f){for(let b=0;b<this.local.length;b++){let S=this.local[b];S.from<=r&&S.to>=e&&(!f||f(S.spec))&&l.push(S.copy(S.from+d,S.to+d))}for(let b=0;b<this.children.length;b+=3)if(this.children[b]<r&&this.children[b+1]>e){let S=this.children[b]+1;this.children[b+2].findInner(e-S,r-S,l,d+S,f)}}map(e,r,l){return this==vt||e.maps.length==0?this:this.mapInner(e,r,0,0,l||Ut)}mapInner(e,r,l,d,f){let b;for(let S=0;S<this.local.length;S++){let T=this.local[S].map(e,l,d);T&&T.type.valid(r,T)?(b||(b=[])).push(T):f.onRemove&&f.onRemove(this.local[S].spec)}return this.children.length?Hr(this.children,b||[],e,r,l,d,f):b?new wt(b.sort(Xt),Wt):vt}add(e,r){return r.length?this==vt?wt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,l){let d,f=0;e.forEach((S,T)=>{let R=T+l,i;if(i=fr(r,S,R)){for(d||(d=this.children.slice());f<d.length&&d[f]<T;)f+=3;d[f]==T?d[f+2]=d[f+2].addInner(S,i,R+1):d.splice(f,0,T,T+S.nodeSize,bn(i,S,R+1,Ut)),f+=3}});let b=dr(f?hr(r):r,-l);for(let S=0;S<b.length;S++)b[S].type.valid(e,b[S])||b.splice(S--,1);return new wt(b.length?this.local.concat(b).sort(Xt):this.local,d||this.children)}remove(e){return e.length==0||this==vt?this:this.removeInner(e,0)}removeInner(e,r){let l=this.children,d=this.local;for(let f=0;f<l.length;f+=3){let b,S=l[f]+r,T=l[f+1]+r;for(let i=0,n;i<e.length;i++)(n=e[i])&&n.from>S&&n.to<T&&(e[i]=null,(b||(b=[])).push(n));if(!b)continue;l==this.children&&(l=this.children.slice());let R=l[f+2].removeInner(b,S+1);R!=vt?l[f+2]=R:(l.splice(f,3),f-=3)}if(d.length){for(let f=0,b;f<e.length;f++)if(b=e[f])for(let S=0;S<d.length;S++)d[S].eq(b,r)&&(d==this.local&&(d=this.local.slice()),d.splice(S--,1))}return l==this.children&&d==this.local?this:d.length||l.length?new wt(d,l):vt}forChild(e,r){if(this==vt)return this;if(r.isLeaf)return wt.empty;let l,d;for(let S=0;S<this.children.length;S+=3)if(this.children[S]>=e){this.children[S]==e&&(l=this.children[S+2]);break}let f=e+1,b=f+r.content.size;for(let S=0;S<this.local.length;S++){let T=this.local[S];if(T.from<b&&T.to>f&&T.type instanceof Yt){let R=Math.max(f,T.from)-f,i=Math.min(b,T.to)-f;R<i&&(d||(d=[])).push(T.copy(R,i))}}if(d){let S=new wt(d.sort(Xt),Wt);return l?new Gt([S,l]):S}return l||vt}eq(e){if(this==e)return!0;if(!(e instanceof wt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return Sn(this.localsInner(e))}localsInner(e){if(this==vt)return Wt;if(e.inlineContent||!this.local.some(Yt.is))return this.local;let r=[];for(let l=0;l<this.local.length;l++)this.local[l].type instanceof Yt||r.push(this.local[l]);return r}forEachSet(e){e(this)}}wt.empty=new wt([],[]),wt.removeOverlap=Sn;const vt=wt.empty;class Gt{constructor(e){this.members=e}map(e,r){const l=this.members.map(d=>d.map(e,r,Ut));return Gt.from(l)}forChild(e,r){if(r.isLeaf)return wt.empty;let l=[];for(let d=0;d<this.members.length;d++){let f=this.members[d].forChild(e,r);f!=vt&&(f instanceof Gt?l=l.concat(f.members):l.push(f))}return Gt.from(l)}eq(e){if(!(e instanceof Gt)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,l=!0;for(let d=0;d<this.members.length;d++){let f=this.members[d].localsInner(e);if(f.length)if(!r)r=f;else{l&&(r=r.slice(),l=!1);for(let b=0;b<f.length;b++)r.push(f[b])}}return r?Sn(l?r:r.sort(Xt)):Wt}static from(e){switch(e.length){case 0:return vt;case 1:return e[0];default:return new Gt(e.every(r=>r instanceof wt)?e:e.reduce((r,l)=>r.concat(l instanceof wt?l:l.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function Hr(t,e,r,l,d,f,b){let S=t.slice();for(let R=0,i=f;R<r.maps.length;R++){let n=0;r.maps[R].forEach((s,a,u,h)=>{let y=h-u-(a-s);for(let x=0;x<S.length;x+=3){let w=S[x+1];if(w<0||s>w+i-n)continue;let P=S[x]+i-n;a>=P?S[x+1]=s<=P?-2:-1:s>=i&&y&&(S[x]+=y,S[x+1]+=y)}n+=y}),i=r.maps[R].map(i,-1)}let T=!1;for(let R=0;R<S.length;R+=3)if(S[R+1]<0){if(S[R+1]==-2){T=!0,S[R+1]=-1;continue}let i=r.map(t[R]+f),n=i-d;if(n<0||n>=l.content.size){T=!0;continue}let s=r.map(t[R+1]+f,-1),a=s-d,{index:u,offset:h}=l.content.findIndex(n),y=l.maybeChild(u);if(y&&h==n&&h+y.nodeSize==a){let x=S[R+2].mapInner(r,y,i+1,t[R]+f+1,b);x!=vt?(S[R]=n,S[R+1]=a,S[R+2]=x):(S[R+1]=-2,T=!0)}else T=!0}if(T){let R=Wr(S,t,e,r,d,f,b),i=bn(R,l,0,b);e=i.local;for(let n=0;n<S.length;n+=3)S[n+1]<0&&(S.splice(n,3),n-=3);for(let n=0,s=0;n<i.children.length;n+=3){let a=i.children[n];for(;s<S.length&&S[s]<a;)s+=3;S.splice(s,0,i.children[n],i.children[n+1],i.children[n+2])}}return new wt(e.sort(Xt),S)}function dr(t,e){if(!e||!t.length)return t;let r=[];for(let l=0;l<t.length;l++){let d=t[l];r.push(new Pt(d.from+e,d.to+e,d.type))}return r}function Wr(t,e,r,l,d,f,b){function S(T,R){for(let i=0;i<T.local.length;i++){let n=T.local[i].map(l,d,R);n?r.push(n):b.onRemove&&b.onRemove(T.local[i].spec)}for(let i=0;i<T.children.length;i+=3)S(T.children[i+2],T.children[i]+R+1)}for(let T=0;T<t.length;T+=3)t[T+1]==-1&&S(t[T+2],e[T]+f+1);return r}function fr(t,e,r){if(e.isLeaf)return null;let l=r+e.nodeSize,d=null;for(let f=0,b;f<t.length;f++)(b=t[f])&&b.from>r&&b.to<l&&((d||(d=[])).push(b),t[f]=null);return d}function hr(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function bn(t,e,r,l){let d=[],f=!1;e.forEach((S,T)=>{let R=fr(t,S,T+r);if(R){f=!0;let i=bn(R,S,r+T+1,l);i!=vt&&d.push(T,T+S.nodeSize,i)}});let b=dr(f?hr(t):t,-r).sort(Xt);for(let S=0;S<b.length;S++)b[S].type.valid(e,b[S])||(l.onRemove&&l.onRemove(b[S].spec),b.splice(S--,1));return b.length||d.length?new wt(b,d):vt}function Xt(t,e){return t.from-e.from||t.to-e.to}function Sn(t){let e=t;for(let r=0;r<e.length-1;r++){let l=e[r];if(l.from!=l.to)for(let d=r+1;d<e.length;d++){let f=e[d];if(f.from==l.from){f.to!=l.to&&(e==t&&(e=t.slice()),e[d]=f.copy(f.from,l.to),pr(e,d+1,f.copy(l.to,f.to)));continue}else{f.from<l.to&&(e==t&&(e=t.slice()),e[r]=l.copy(l.from,f.from),pr(e,d,l.copy(f.from,l.to)));break}}}return e}function pr(t,e,r){for(;e<t.length&&Xt(r,t[e])>0;)e++;t.splice(e,0,r)}function Ln(t){let e=[];return t.someProp("decorations",r=>{let l=r(t.state);l&&l!=vt&&e.push(l)}),t.cursorWrapper&&e.push(wt.create(t.state.doc,[t.cursorWrapper.deco])),Gt.from(e)}const Fn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_n=Te&&Ee<=11;class ni{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ri{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ni,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(l=>{for(let d=0;d<l.length;d++)this.queue.push(l[d]);Te&&Ee<=11&&l.some(d=>d.type=="childList"&&d.removedNodes.length||d.type=="characterData"&&d.oldValue.length>d.target.nodeValue.length)?this.flushSoon():this.flush()}),_n&&(this.onCharData=l=>{this.queue.push({target:l.target,type:"characterData",oldValue:l.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Fn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Kn(this.view)){if(this.suppressingSelectionUpdates)return qe(this.view);if(Te&&Ee<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&we(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,l;for(let f=e.focusNode;f;f=ie(f))r.add(f);for(let f=e.anchorNode;f;f=ie(f))if(r.has(f)){l=f;break}let d=l&&this.view.docView.nearestDesc(l);if(d&&d.ignoreMutation({type:"selection",target:l.nodeType==3?l.parentNode:l}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let l=e.domSelectionRange(),d=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(l)&&Kn(e)&&!this.ignoreSelectionChange(l),f=-1,b=-1,S=!1,T=[];if(e.editable)for(let i=0;i<r.length;i++){let n=this.registerMutation(r[i],T);n&&(f=f<0?n.from:Math.min(n.from,f),b=b<0?n.to:Math.max(n.to,b),n.typeOver&&(S=!0))}if(et&&T.length){let i=T.filter(n=>n.nodeName=="BR");if(i.length==2){let[n,s]=i;n.parentNode&&n.parentNode.parentNode==s.parentNode?s.remove():n.remove()}else{let{focusNode:n}=this.currentSelection;for(let s of i){let a=s.parentNode;a&&a.nodeName=="LI"&&(!n||oi(e,n)!=a)&&s.remove()}}}let R=null;f<0&&d&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ie(l)&&(R=nt(e))&&R.eq(N.Y1.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qe(e),this.currentSelection.set(l),e.scrollToSelection()):(f>-1||d)&&(f>-1&&(e.docView.markDirty(f,b),ii(e)),this.handleDOMChange(f,b,S,T),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(l)||qe(e),this.currentSelection.set(l))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let l=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(l==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!l||l.ignoreMutation(e))return null;if(e.type=="childList"){for(let i=0;i<e.addedNodes.length;i++){let n=e.addedNodes[i];r.push(n),n.nodeType==3&&(this.lastChangedTextNode=n)}if(l.contentDOM&&l.contentDOM!=l.dom&&!l.contentDOM.contains(e.target))return{from:l.posBefore,to:l.posAfter};let d=e.previousSibling,f=e.nextSibling;if(Te&&Ee<=11&&e.addedNodes.length)for(let i=0;i<e.addedNodes.length;i++){let{previousSibling:n,nextSibling:s}=e.addedNodes[i];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(d=n),(!s||Array.prototype.indexOf.call(e.addedNodes,s)<0)&&(f=s)}let b=d&&d.parentNode==e.target?de(d)+1:0,S=l.localPosFromDOM(e.target,b,-1),T=f&&f.parentNode==e.target?de(f):e.target.childNodes.length,R=l.localPosFromDOM(e.target,T,1);return{from:S,to:R}}else return e.type=="attributes"?{from:l.posAtStart-l.border,to:l.posAtEnd+l.border}:(this.lastChangedTextNode=e.target,{from:l.posAtStart,to:l.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let qr=new WeakMap,Kr=!1;function ii(t){if(!qr.has(t)&&(qr.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=et,Kr)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Kr=!0}}function jr(t,e){let r=e.startContainer,l=e.startOffset,d=e.endContainer,f=e.endOffset,b=t.domAtPos(t.state.selection.anchor);return we(b.node,b.offset,d,f)&&([r,l,d,f]=[d,f,r,l]),{anchorNode:r,anchorOffset:l,focusNode:d,focusOffset:f}}function si(t,e){if(e.getComposedRanges){let d=e.getComposedRanges(t.root)[0];if(d)return jr(t,d)}let r;function l(d){d.preventDefault(),d.stopImmediatePropagation(),r=d.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",l,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",l,!0),r?jr(t,r):null}function oi(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let l=t.docView.nearestDesc(r,!0);if(l&&l.node.isBlock)return r}return null}function li(t,e,r){let{node:l,fromOffset:d,toOffset:f,from:b,to:S}=t.docView.parseRange(e,r),T=t.domSelectionRange(),R,i=T.anchorNode;if(i&&t.dom.contains(i.nodeType==1?i:i.parentNode)&&(R=[{node:i,offset:T.anchorOffset}],Ie(T)||R.push({node:T.focusNode,offset:T.focusOffset})),D&&t.input.lastKeyCode===8)for(let y=f;y>d;y--){let x=l.childNodes[y-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){f=y;break}if(!w||w.size)break}let n=t.state.doc,s=t.someProp("domParser")||De.aw.fromSchema(t.state.schema),a=n.resolve(b),u=null,h=s.parse(l,{topNode:a.parent,topMatch:a.parent.contentMatchAt(a.index()),topOpen:!0,from:d,to:f,preserveWhitespace:a.parent.type.whitespace=="pre"?"full":!0,findPositions:R,ruleFromNode:ai,context:a});if(R&&R[0].pos!=null){let y=R[0].pos,x=R[1]&&R[1].pos;x==null&&(x=y),u={anchor:y+b,head:x+b}}return{doc:h,sel:u,from:b,to:S}}function ai(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(U&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||U&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Jr=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mr(t,e,r,l,d){let f=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let V=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,Z=nt(t,V);if(Z&&!t.state.selection.eq(Z)){if(D&&Oe&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",oe=>oe(t,be(13,"Enter"))))return;let X=t.state.tr.setSelection(Z);V=="pointer"?X.setMeta("pointer",!0):V=="key"&&X.scrollIntoView(),f&&X.setMeta("composition",f),t.dispatch(X)}return}let b=t.state.doc.resolve(e),S=b.sharedDepth(r);e=b.before(S+1),r=t.state.doc.resolve(r).after(S+1);let T=t.state.selection,R=li(t,e,r),i=t.state.doc,n=i.slice(R.from,R.to),s,a;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(s=t.state.selection.to,a="end"):(s=t.state.selection.from,a="start"),t.input.lastKeyCode=null;let u=br(n.content,R.doc.content,R.from,s,a);if(u&&t.input.domChangeCount++,(ue&&t.input.lastIOSEnter>Date.now()-225||Oe)&&d.some(V=>V.nodeType==1&&!Jr.test(V.nodeName))&&(!u||u.endA>=u.endB)&&t.someProp("handleKeyDown",V=>V(t,be(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!u)if(l&&T instanceof N.Bs&&!T.empty&&T.$head.sameParent(T.$anchor)&&!t.composing&&!(R.sel&&R.sel.anchor!=R.sel.head))u={start:T.from,endA:T.to,endB:T.to};else{if(R.sel){let V=Vn(t,t.state.doc,R.sel);if(V&&!V.eq(t.state.selection)){let Z=t.state.tr.setSelection(V);f&&Z.setMeta("composition",f),t.dispatch(Z)}}return}t.state.selection.from<t.state.selection.to&&u.start==u.endB&&t.state.selection instanceof N.Bs&&(u.start>t.state.selection.from&&u.start<=t.state.selection.from+2&&t.state.selection.from>=R.from?u.start=t.state.selection.from:u.endA<t.state.selection.to&&u.endA>=t.state.selection.to-2&&t.state.selection.to<=R.to&&(u.endB+=t.state.selection.to-u.endA,u.endA=t.state.selection.to)),Te&&Ee<=11&&u.endB==u.start+1&&u.endA==u.start&&u.start>R.from&&R.doc.textBetween(u.start-R.from-1,u.start-R.from+1)==" \xA0"&&(u.start--,u.endA--,u.endB--);let h=R.doc.resolveNoCache(u.start-R.from),y=R.doc.resolveNoCache(u.endB-R.from),x=i.resolve(u.start),w=h.sameParent(y)&&h.parent.inlineContent&&x.end()>=u.endA;if((ue&&t.input.lastIOSEnter>Date.now()-225&&(!w||d.some(V=>V.nodeName=="DIV"||V.nodeName=="P"))||!w&&h.pos<R.doc.content.size&&(!h.sameParent(y)||!h.parent.inlineContent)&&h.pos<y.pos&&!/\S/.test(R.doc.textBetween(h.pos,y.pos,"","")))&&t.someProp("handleKeyDown",V=>V(t,be(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>u.start&&yr(i,u.start,u.endA,h,y)&&t.someProp("handleKeyDown",V=>V(t,be(8,"Backspace")))){Oe&&D&&t.domObserver.suppressSelectionUpdates();return}D&&u.endB==u.start&&(t.input.lastChromeDelete=Date.now()),Oe&&!w&&h.start()!=y.start()&&y.parentOffset==0&&h.depth==y.depth&&R.sel&&R.sel.anchor==R.sel.head&&R.sel.head==u.endA&&(u.endB-=2,y=R.doc.resolveNoCache(u.endB-R.from),setTimeout(()=>{t.someProp("handleKeyDown",function(V){return V(t,be(13,"Enter"))})},20));let P=u.start,B=u.endA,L=V=>{let Z=V||t.state.tr.replace(P,B,R.doc.slice(u.start-R.from,u.endB-R.from));if(R.sel){let X=Vn(t,Z.doc,R.sel);X&&!(D&&t.composing&&X.empty&&(u.start!=u.endB||t.input.lastChromeDelete<Date.now()-100)&&(X.head==P||X.head==Z.mapping.map(B)-1)||Te&&X.empty&&X.head==P)&&Z.setSelection(X)}return f&&Z.setMeta("composition",f),Z.scrollIntoView()},q;if(w)if(h.pos==y.pos){Te&&Ee<=11&&h.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qe(t),20));let V=L(t.state.tr.delete(P,B)),Z=i.resolve(u.start).marksAcross(i.resolve(u.endA));Z&&V.ensureMarks(Z),t.dispatch(V)}else if(u.endA==u.endB&&(q=gr(h.parent.content.cut(h.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,u.endA-x.start())))){let V=L(t.state.tr);q.type=="add"?V.addMark(P,B,q.mark):V.removeMark(P,B,q.mark),t.dispatch(V)}else if(h.parent.child(h.index()).isText&&h.index()==y.index()-(y.textOffset?0:1)){let V=h.parent.textBetween(h.parentOffset,y.parentOffset),Z=()=>L(t.state.tr.insertText(V,P,B));t.someProp("handleTextInput",X=>X(t,P,B,V,Z))||t.dispatch(Z())}else t.dispatch(L());else t.dispatch(L())}function Vn(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:Mn(t,e.resolve(r.anchor),e.resolve(r.head))}function gr(t,e){let r=t.firstChild.marks,l=e.firstChild.marks,d=r,f=l,b,S,T;for(let i=0;i<l.length;i++)d=l[i].removeFromSet(d);for(let i=0;i<r.length;i++)f=r[i].removeFromSet(f);if(d.length==1&&f.length==0)S=d[0],b="add",T=i=>i.mark(S.addToSet(i.marks));else if(d.length==0&&f.length==1)S=f[0],b="remove",T=i=>i.mark(S.removeFromSet(i.marks));else return null;let R=[];for(let i=0;i<e.childCount;i++)R.push(T(e.child(i)));if(De.HY.from(R).eq(t))return{mark:S,type:b}}function yr(t,e,r,l,d){if(r-e<=d.pos-l.pos||kn(l,!0,!1)<d.pos)return!1;let f=t.resolve(e);if(!l.parent.isTextblock){let S=f.nodeAfter;return S!=null&&r==e+S.nodeSize}if(f.parentOffset<f.parent.content.size||!f.parent.isTextblock)return!1;let b=t.resolve(kn(f,!0,!0));return!b.parent.isTextblock||b.pos>r||kn(b,!0,!1)<r?!1:l.parent.content.cut(l.parentOffset).eq(b.parent.content)}function kn(t,e,r){let l=t.depth,d=e?t.end():t.pos;for(;l>0&&(e||t.indexAfter(l)==t.node(l).childCount);)l--,d++,e=!1;if(r){let f=t.node(l).maybeChild(t.indexAfter(l));for(;f&&!f.isLeaf;)f=f.firstChild,d++}return d}function br(t,e,r,l,d){let f=t.findDiffStart(e,r);if(f==null)return null;let{a:b,b:S}=t.findDiffEnd(e,r+t.size,r+e.size);if(d=="end"){let T=Math.max(0,f-Math.min(b,S));l-=b+T-f}if(b<f&&t.size<e.size){let T=l<=f&&l>=b?f-l:0;f-=T,f&&f<e.size&&$n(e.textBetween(f-1,f+1))&&(f+=T?1:-1),S=f+(S-b),b=f}else if(S<f){let T=l<=f&&l>=S?f-l:0;f-=T,f&&f<t.size&&$n(t.textBetween(f-1,f+1))&&(f+=T?1:-1),b=f+(b-S),S=f}return{start:f,endA:b,endB:S}}function $n(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}const Yr=null,ci=null;class qt{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Tr,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(Xr),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xr(this),kr(this),this.nodeViews=Mr(this),this.docView=o(this.state.doc,Sr(this),Ln(this),this.dom,this),this.domObserver=new ri(this,(l,d,f,b)=>mr(this,l,d,f,b)),this.domObserver.start(),Nr(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&tn(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Xr),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let l in this._props)r[l]=this._props[l];r.state=this.state;for(let l in e)r[l]=e[l];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var l;let d=this.state,f=!1,b=!1;e.storedMarks&&this.composing&&(Fr(this),b=!0),this.state=e;let S=d.plugins!=e.plugins||this._props.plugins!=r.plugins;if(S||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let a=Mr(this);Gr(a,this.nodeViews)&&(this.nodeViews=a,f=!0)}(S||r.handleDOMEvents!=this._props.handleDOMEvents)&&tn(this),this.editable=xr(this),kr(this);let T=Ln(this),R=Sr(this),i=d.plugins!=e.plugins&&!d.doc.eq(e.doc)?"reset":e.scrollToSelection>d.scrollToSelection?"to selection":"preserve",n=f||!this.docView.matchesNode(e.doc,R,T);(n||!e.selection.eq(d.selection))&&(b=!0);let s=i=="preserve"&&b&&this.dom.style.overflowAnchor==null&&gt(this);if(b){this.domObserver.stop();let a=n&&(Te||D)&&!this.composing&&!d.selection.empty&&!e.selection.empty&&Ur(d.selection,e.selection);if(n){let u=D?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ei(this)),(f||!this.docView.update(e.doc,R,T,this))&&(this.docView.updateOuterDeco(R),this.docView.destroy(),this.docView=o(e.doc,R,T,this.dom,this)),u&&!this.trackWrites&&(a=!0)}a||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Cr(this))?qe(this,a):(Wn(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),!((l=this.dragging)===null||l===void 0)&&l.node&&!d.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,d),i=="reset"?this.dom.scrollTop=0:i=="to selection"?this.scrollToSelection():s&&Ot(s)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof N.qv){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&rt(this,r.getBoundingClientRect(),e)}else rt(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let l=this.directPlugins[r];l.spec.view&&this.pluginViews.push(l.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let l=this.state.plugins[r];l.spec.view&&this.pluginViews.push(l.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let l=this.pluginViews[r];l.update&&l.update(this,e)}}updateDraggedNode(e,r){let l=e.node,d=-1;if(this.state.doc.nodeAt(l.from)==l.node)d=l.from;else{let f=l.from+(this.state.doc.content.size-r.doc.content.size);(f>0&&this.state.doc.nodeAt(f))==l.node&&(d=f)}this.dragging=new zn(e.slice,e.move,d<0?void 0:N.qv.create(this.state.doc,d))}someProp(e,r){let l=this._props&&this._props[e],d;if(l!=null&&(d=r?r(l):l))return d;for(let b=0;b<this.directPlugins.length;b++){let S=this.directPlugins[b].props[e];if(S!=null&&(d=r?r(S):S))return d}let f=this.state.plugins;if(f)for(let b=0;b<f.length;b++){let S=f[b].props[e];if(S!=null&&(d=r?r(S):S))return d}}hasFocus(){if(Te){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Ft(this.dom),qe(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Q(this,e)}coordsAtPos(e,r=1){return Xe(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,l=-1){let d=this.docView.posFromDOM(e,r,l);if(d==null)throw new RangeError("DOM position not inside the editor");return d}endOfTextblock(e,r){return p(this,r||this.state,e)}pasteHTML(e,r){return gn(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return gn(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return Nn(this,e)}destroy(){this.docView&&(Ar(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ln(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ze())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Ir(this,e)}domSelectionRange(){let e=this.domSelection();return e?U&&this.root.nodeType===11&&Re(this.dom.ownerDocument)==this.dom&&si(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}qt.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Sr(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let l in r)l=="class"?e.class+=" "+r[l]:l=="style"?e.style=(e.style?e.style+";":"")+r[l]:!e[l]&&l!="contenteditable"&&l!="nodeName"&&(e[l]=String(r[l]))}),e.translate||(e.translate="no"),[Pt.node(0,t.state.doc.content.size,e)]}function kr(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Pt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function xr(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Ur(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function Mr(t){let e=Object.create(null);function r(l){for(let d in l)Object.prototype.hasOwnProperty.call(e,d)||(e[d]=l[d])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function Gr(t,e){let r=0,l=0;for(let d in t){if(t[d]!=e[d])return!0;r++}for(let d in e)l++;return r!=l}function Xr(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);})();
