"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[7311],{65173:function(Ae,q,e){var ee=e(15558),a=e.n(ee),n=e(48305),y=e.n(n),H=e(61884),m=e(44689),R=e(62237),t=e(63876),P=e(12758),B=e(29328),k=e(63619),W=e(58176),ne=e(75271),se=e(56179),X=e(15457),F=e(52676),ae=function(f){if(!f)return 0;for(var N=0,d=0;d<f.length;d++)/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/.test(f[d])?N+=2:N+=1;return N},de=function(f,N){if(!f)return"";for(var d=0,i="",b=0;b<f.length;b++){var ce=f[b],z=/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/.test(ce)?2:1;if(d+z>N)break;i+=ce,d+=z}return i.length<f.length&&(i+="..."),i},ue=function(f){var N=f.placeholder,d=f.form,i=f.fieldName,b=f.style,ce=f.isDisabled,z=ce===void 0?!1:ce,pe=f.referenceType,re=pe===void 0?"Reference":pe,ge=f.isLoop,Q=f.value,g=f.onChange,v=(0,se.useModel)("workflow"),h=v.referenceList,E=v.getValue,s=v.getLoopValue,j=v.setIsModified,$=(0,ne.useState)(""),O=y()($,2),K=O[0],I=O[1],J=(0,ne.useState)([Q||""]),ie=y()(J,2),oe=ie[0],Ce=ie[1],he=(0,ne.useState)(300),le=y()(he,2),Z=le[0],te=le[1];(0,ne.useEffect)(function(){var G=function(){var M=window.innerHeight,C=document.querySelector(".input-or-reference");if(C){var _=C.getBoundingClientRect(),L=M-_.top-20;te(Math.min(Math.max(L,150),400))}};return G(),window.addEventListener("resize",G),window.addEventListener("scroll",G),function(){window.removeEventListener("resize",G),window.removeEventListener("scroll",G)}},[]);var ve=function(A,M){if(i&&d){var C=i.slice(0,-1);if(d.setFieldValue([].concat(a()(C),["bindValueType"]),M),M==="Reference"){var _,L=h==null||(_=h.argMap)===null||_===void 0||(_=_[A])===null||_===void 0?void 0:_.dataType;d.setFieldValue([].concat(a()(C),["dataType"]),L||"String"),d.setFieldValue(i,A);var U=d.getFieldValue([].concat(a()(C),["name"]));(!U||z)&&d.setFieldValue([].concat(a()(C),["name"]),h.argMap[A].name)}else d.setFieldValue([].concat(a()(C),["dataType"]),"String"),d.setFieldValue(i,A)}j(!0)};(0,ne.useEffect)(function(){if(i&&d){var G=d.getFieldValue(i),A=d.getFieldValue([].concat(a()(i.slice(0,-1)),["bindValueType"]));if(A==="Reference"){var M=G&&h.argMap[G];I(M?ge?s(G):E(G):"")}else I("")}},[d?.getFieldsValue(),h.argMap]);var xe=function(){ve("","Input"),I("")},_e=function(A){return(0,F.jsxs)("div",{className:"tree-custom-title-style",children:[(0,F.jsx)("span",{title:"",children:A.name}),(0,F.jsx)(t.Z,{content:A.description||"\u6682\u65E0\u63CF\u8FF0",children:(0,F.jsx)(m.Z,{title:"",style:{marginLeft:"4px",fontSize:12}})}),(0,F.jsx)(P.Z,{color:"#C9CDD4",style:{marginLeft:"8px",fontSize:10,lineHeight:"14px"},children:A.dataType})]})},Y=function(A){!A||!A.length||(ve(A[0],"Reference"),I(E(A[0])),Ce(A))},l=function(A){if(A&&A.length){var M=!1;return A.map(function(C){var _=C?.outputArgs.some(function(L){var U,p;return(L==null||(U=L.children)===null||U===void 0?void 0:U.length)&&(L==null||(p=L.children)===null||p===void 0?void 0:p.length)>0});return{key:C.id,label:ae(C.name)>16?de(C.name,16):C.name,icon:(0,H.qM)(C.type),popupClassName:"inputOrReferencePopup",children:C.outputArgs?[{key:"".concat(C.id,"-tree-select"),label:(0,F.jsx)("div",{style:{paddingTop:12,paddingRight:12,paddingBottom:8},onClick:function(U){M||(U.stopPropagation(),U.preventDefault())},children:(0,F.jsx)(B.Z,{onSelect:function(U){Y(U),M=!0},defaultExpandAll:!0,treeData:C.outputArgs,fieldNames:{title:"name",key:"key",children:"children"},titleRender:_e,defaultSelectedKeys:oe,blockNode:!0,className:"custom-tree-style ".concat(_?"":"custom-tree-no-children-style"),style:{maxHeight:"".concat(Z,"px"),overflow:"auto"}})})}]:void 0}})}else return[{key:"no-data",popupClassName:"inputOrReferencePopup",label:(0,F.jsx)("div",{style:{padding:8,color:"red"},children:"\u672A\u6DFB\u52A0\u4E0A\u7EA7\u8282\u70B9\u8FDE\u7EBF\u6216\u4E0A\u7EA7\u8282\u70B9\u65E0\u53C2\u6570"}),disabled:!0}]},w=function(){return l(ge?h.innerPreviousNodes:h.previousNodes)};return(0,F.jsxs)("div",{className:"input-or-reference dis-sb",style:b,children:[re==="Reference"||re===null?K?(0,F.jsx)(P.Z,{closable:!0,onClose:xe,className:"input-or-reference-tag text-ellipsis",color:"#C9CDD4",children:K.length>10?(0,F.jsx)(t.Z,{content:K,placement:"topRight",children:(0,F.jsx)("span",{className:"tag-text-style",children:K})}):(0,F.jsx)("span",{className:"tag-text-style",children:K})}):(0,F.jsx)(k.Z,{placeholder:N||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:z,onChange:function(A){g?.(A.target.value),ve(A.target.value,"Input")}}):(0,F.jsx)(k.Z,{placeholder:N||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:z,value:Q,onChange:function(A){g?.(A.target.value),ve(A.target.value,"Input")}}),(0,F.jsx)(W.Z,{menu:{items:w(),style:{maxHeight:328}},trigger:["click"],overlayStyle:{minWidth:200},placement:"bottomRight",children:(0,F.jsx)(R.Z,{style:{cursor:"pointer"},className:"input-reference-icon-style"})})]})};q.Z=ue},6377:function(Ae,q,e){e.d(q,{Z:function(){return t}});var ee=e(94581),a=e.n(ee),n=e(75271),y={container:"container___dApW8",star:"star___pESlW"},H=e(52676),m=a().bind(y),R=function(B){var k=B.className,W=B.label;return(0,H.jsxs)("span",{className:m(y.container,"flex",k),children:[(0,H.jsx)("span",{children:W}),(0,H.jsx)("span",{className:m(y.star),children:"*"})]})},t=R},54896:function(Ae,q,e){e.d(q,{Z:function(){return P}});var ee=e(59261),a=e(94581),n=e.n(a),y=e(75271),H={container:"container___mKBd6",star:"star___fL3Gn","param-type":"param-type___m1Eq3"},m=e(52676),R=n().bind(H),t=function(k){var W=k.require,ne=k.paramName,se=k.paramType;return(0,m.jsxs)("div",{className:R("flex","items-center",H.container),children:[(0,m.jsx)("span",{children:ne}),(0,m.jsx)(ee.Z,{condition:W,children:(0,m.jsx)("span",{className:R(H.star),children:"*"})}),(0,m.jsx)("span",{className:R(H["param-type"]),children:se})]})},P=t},51802:function(Ae,q,e){e.d(q,{Z:function(){return d}});var ee=e(54896),a=e(61265),n=e(73415),y=e(94166),H=e(24643),m=e(92122),R=e(86743),t=e(14258),P=e(63619),B=e(7010),k=e(14719),W=e(10580),ne=e(9504),se=e(94581),X=e.n(se),F=e(75271),ae=e(56179),de=e(92448),ue={"xagi-nav-style2":"xagi-nav-style2___q7OWC",text:"text___QkgY2","page-container":"page-container___sLiTq","modal-container":"modal-container___tLbO3","inner-container":"inner-container___xnO9u",header:"header___ZXJua","p-title":"p-title___enidB","table-wrap":"table-wrap___KO8OJ","param-desc":"param-desc___Fs3o9"},S=e(52676),f=X().bind(ue),N=function(b){var ce=b.inputConfigArgs,z=b.inputExpandedRowKeys,pe=b.pluginId,re=b.pluginName,ge=b.open,Q=b.onCancel,g=b.onConfirm,v=(0,y.Z)(),h=v.handleInit,E=v.dataSource,s=v.handleDataSource,j=v.expandedRowKeys,$=v.handleInputValue,O=v.handleInputAddChild,K=v.handleInputDel,I=(0,ae.useRequest)(H.NV,{manual:!0,debounceInterval:300,onSuccess:function(le){if(le!=null&&le.length){var Z=le.map(function(te){return te.key||(te.key=(0,de.Z)()),te});g(Z)}Q()}}),J=I.run,ie=I.loading;(0,F.useEffect)(function(){h(ce,z)},[ce,z]);var oe=[{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"name",key:"name",className:"flex",render:function(le,Z){return(0,S.jsx)(ee.Z,{require:Z.require,paramName:Z.name,paramType:Z.dataType})}},{title:"\u53C2\u6570\u503C",dataIndex:"description",key:"description",render:function(le,Z){var te;return(0,S.jsxs)(S.Fragment,{children:[m.Gi.Object===Z.dataType||m.Gi.Array_Object===Z.dataType||(te=Z.dataType)!==null&&te!==void 0&&te.includes("Array")?null:(0,S.jsx)(P.Z,{value:Z.bindValue,onChange:function(xe){return $(Z.key,"bindValue",xe.target.value)},placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u503C"}),(0,S.jsx)("p",{className:f(ue["param-desc"]),children:Z.description})]})}},{title:"\u64CD\u4F5C",key:"action",width:60,align:"center",render:function(le,Z,te){var ve;return(0,S.jsx)(B.Z,{size:"middle",children:(ve=Z.dataType)!==null&&ve!==void 0&&ve.includes("Array")?(0,S.jsx)(n.Me,{className:f("cursor-pointer"),onClick:function(){return O(Z)}}):Z.name===a.zC&&te!==0?(0,S.jsx)(R.Z,{onClick:function(){return K(Z.key)}}):null})}}],Ce=function(){var le=s(E);J({pluginId:pe,params:le})};return(0,S.jsx)(k.Z,{centered:!0,open:ge,onCancel:Q,className:f(ue["modal-container"]),destroyOnHidden:!0,modalRender:function(){return(0,S.jsxs)("div",{className:f(ue["inner-container"],"flex","flex-col","overflow-hide"),children:[(0,S.jsxs)("header",{className:f("flex","content-between","items-center",ue.header),children:[(0,S.jsx)("h3",{children:"\u81EA\u52A8\u89E3\u6790"}),(0,S.jsx)(t.Z,{className:f("cursor-pointer"),onClick:Q})]}),(0,S.jsxs)("div",{className:f("flex-1","flex","flex-col","overflow-hide"),children:[(0,S.jsxs)("h3",{className:f(ue["p-title"]),children:[re," \u8F93\u5165\u53C2\u6570"]}),(0,S.jsx)(W.Z,{className:f(ue["table-wrap"]),columns:oe,dataSource:E,pagination:!1,virtual:!0,expandable:{childrenColumnName:"subArgs",defaultExpandAllRows:!0,expandedRowKeys:j,expandIcon:function(){return null}},scroll:{y:450}})]}),(0,S.jsx)("div",{className:f("text-right"),children:(0,S.jsx)(ne.ZP,{type:"primary",onClick:Ce,loading:ie,children:"\u81EA\u52A8\u89E3\u6790"})})]})}})},d=N},61304:function(Ae,q,e){e.d(q,{Z:function(){return B}});var ee=e(16621),a=e(9504),n=e(94581),y=e.n(n),H=e(75271),m={"xagi-nav-style2":"xagi-nav-style2___bRI93",text:"text___CDY66","page-container":"page-container___pYuyY",title:"title___qlUsF",extra:"extra____ijPr"},R=e(52676),t=y().bind(m),P=function(W){var ne=W.title,se=W.extra,X=W.onClick;return(0,R.jsxs)("div",{className:t("flex","content-between","items-center","mb-12"),children:[(0,R.jsx)("h3",{className:t(m.title),children:ne}),(0,R.jsxs)("div",{className:t(m.extra,"flex"),children:[se,(0,R.jsx)(a.ZP,{icon:(0,R.jsx)(ee.Z,{}),onClick:X,children:"\u65B0\u589E\u53C2\u6570"})]})]})},B=P},2660:function(Ae,q,e){e.d(q,{Z:function(){return z}});var ee=e(48305),a=e.n(ee),n=e(54896),y=e(61265),H=e(73415),m=e(94166),R=e(24643),t=e(92122),P=e(39373),B=e(86743),k=e(14258),W=e(24573),ne=e(41249),se=e(63619),X=e(7010),F=e(14719),ae=e(10580),de=e(9504),ue=e(94581),S=e.n(ue),f=e(75271),N=e(56179),d={"xagi-nav-style2":"xagi-nav-style2___vghmE",text:"text___XEBu3","page-container":"page-container___V0beX","modal-container":"modal-container___AN4jk","inner-container":"inner-container___f48hL",header:"header___PLN5P",section:"section___AtQvb","p-title":"p-title___yh4JX","table-wrap":"table-wrap___VKpxr","result-wrap":"result-wrap___EvlBB","loading-box":"loading-box___NvxyX","param-desc":"param-desc___Wg5Xx"},i=e(52676),b=S().bind(d),ce=function(re){var ge=re.inputConfigArgs,Q=re.inputExpandedRowKeys,g=re.pluginId,v=re.pluginName,h=re.open,E=re.onCancel,s=(0,f.useState)(!1),j=a()(s,2),$=j[0],O=j[1],K=(0,f.useState)(""),I=a()(K,2),J=I[0],ie=I[1],oe=(0,m.Z)(),Ce=oe.handleInit,he=oe.dataSource,le=oe.handleDataSource,Z=oe.expandedRowKeys,te=oe.handleInputValue,ve=oe.handleInputAddChild,xe=oe.handleInputDel,_e=(0,N.useRequest)(R.A_,{manual:!0,debounceInterval:300,onSuccess:function(C){O(!1),C.success?ie(JSON.stringify(C.result,null,2)):ne.ZP.warning(C.error)},onError:function(){O(!1)}}),Y=_e.run;(0,f.useEffect)(function(){Ce(ge,Q)},[ge,Q]);var l=function(C,_){var L=_;(C.dataType===t.Gi.Integer||C.dataType===t.Gi.Number)&&_&&(L=(0,P.an)(_)===""?"":Number((0,P.an)(_))),te(C.key,"bindValue",L)},w=[{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"name",key:"name",className:"flex",render:function(C,_){return(0,i.jsx)(n.Z,{require:_.require,paramName:_.name,paramType:_.dataType})}},{title:"\u53C2\u6570\u503C",dataIndex:"description",key:"description",render:function(C,_){var L;return(0,i.jsxs)(i.Fragment,{children:[t.Gi.Object===_.dataType||t.Gi.Array_Object===_.dataType||(L=_.dataType)!==null&&L!==void 0&&L.includes("Array")?null:(0,i.jsx)(se.Z,{value:_.bindValue,onChange:function(p){return l(_,p.target.value)},placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u503C"}),(0,i.jsx)("p",{className:b(d["param-desc"]),children:_.description})]})}},{title:"\u64CD\u4F5C",key:"action",width:60,align:"center",render:function(C,_,L){var U;return(0,i.jsx)(X.Z,{size:"middle",children:(U=_.dataType)!==null&&U!==void 0&&U.includes("Array")?(0,i.jsx)(H.Me,{className:b("cursor-pointer"),onClick:function(){return ve(_)}}):_.name===y.zC&&L!==0?(0,i.jsx)(B.Z,{onClick:function(){return xe(_.key)}}):null})}}],G=function(){ie(""),O(!0);var C=le(he);Y({pluginId:g,params:C})},A=function(){ie(""),O(!1),E()};return(0,i.jsx)(F.Z,{centered:!0,open:h,onCancel:A,className:b(d["modal-container"]),modalRender:function(){return(0,i.jsxs)("div",{className:b(d["inner-container"],"flex","flex-col","overflow-hide"),children:[(0,i.jsxs)("header",{className:b("flex","content-between","items-center",d.header),children:[(0,i.jsx)("h3",{children:"\u8BD5\u8FD0\u884C"}),(0,i.jsx)(k.Z,{className:b("cursor-pointer"),onClick:A})]}),(0,i.jsxs)("section",{className:b("flex","flex-1","overflow-hide",d.section),children:[(0,i.jsxs)("div",{className:b("flex-1","flex","flex-col"),children:[(0,i.jsxs)("h3",{className:b(d["p-title"]),children:[v," \u8F93\u5165\u53C2\u6570"]}),(0,i.jsx)(ae.Z,{className:b(d["table-wrap"]),columns:w,dataSource:he,pagination:!1,virtual:!0,expandable:{childrenColumnName:"subArgs",defaultExpandAllRows:!0,expandedRowKeys:Z,expandIcon:function(){return null}},scroll:{y:450},footer:function(){return(0,i.jsx)("div",{className:b("text-right"),children:(0,i.jsx)(de.ZP,{type:"primary",onClick:G,loading:$,children:"\u8FD0\u884C"})})}})]}),(0,i.jsxs)("div",{className:b("flex-1","flex","flex-col","overflow-hide"),children:[(0,i.jsxs)("h3",{className:b(d["p-title"]),children:[v," \u8C03\u8BD5\u7ED3\u679C"]}),(0,i.jsx)("div",{className:b("flex-1","radius-6","overflow-hide",d["result-wrap"]),children:$?(0,i.jsxs)("div",{className:b("h-full","flex","items-center","content-center",d["loading-box"]),children:[(0,i.jsx)(W.Z,{}),(0,i.jsx)("span",{children:"\u52A0\u8F7D\u4E2D..."})]}):J?(0,i.jsx)("div",{className:b("h-full","flex","flex-col","px-16","py-16","overflow-y"),children:(0,i.jsx)("pre",{children:J})}):(0,i.jsx)("div",{className:b("h-full","flex","items-center","content-center"),children:"\u8C03\u8BD5\u7ED3\u679C\u5C06\u5C55\u793A\u5728\u6B64\u5904"})})]})]})]})}})},z=ce},53501:function(Ae,q,e){var ee=e(26068),a=e.n(ee),n=e(15558),y=e.n(n),H=e(48305),m=e.n(H),R=e(39671),t=e(92122),P=e(40677),B=e(41249),k=e(16483),W=e.n(k),ne=e(32222),se=e.n(ne),X=e(75271),F=e(56179),ae=e(92448),de=function(){var S=(0,F.useParams)(),f=Number(S.pluginId),N=(0,X.useState)(!1),d=m()(N,2),i=d[0],b=d[1],ce=(0,X.useState)(!1),z=m()(ce,2),pe=z[0],re=z[1],ge=(0,X.useState)(!1),Q=m()(ge,2),g=Q[0],v=Q[1],h=(0,X.useState)(!1),E=m()(h,2),s=E[0],j=E[1],$=(0,X.useState)(!1),O=m()($,2),K=O[0],I=O[1],J=(0,X.useState)(),ie=m()(J,2),oe=ie[0],Ce=ie[1],he=(0,X.useState)([]),le=m()(he,2),Z=le[0],te=le[1],ve=(0,X.useState)([]),xe=m()(ve,2),_e=xe[0],Y=xe[1],l=(0,X.useState)([]),w=m()(l,2),G=w[0],A=w[1],M=(0,X.useState)([]),C=m()(M,2),_=C[0],L=C[1],U=(0,X.useRef)(!1),p=function(o,r,me){var fe=(0,P.mG)(G,o,r,me);if(A(fe),r==="dataType"){if(me===t.Gi.Object||me===t.Gi.Array_Object){var Ee=[].concat(y()(Z),[o]);te(Ee)}else if(Z.includes(o)){var je=Z.filter(function(Me){return Me!==o});te(je)}}},De=function(o,r,me){var fe=(0,P.mG)(_,o,r,me);if(L(fe),r==="dataType"){if(me===t.Gi.Object||me===t.Gi.Array_Object){var Ee=[].concat(y()(_e),[o]);Y(Ee)}else if(_e.includes(o)){var je=_e.filter(function(Me){return Me!==o});Y(je)}}},Re=function(o){var r=a()({key:(0,ae.Z)()},R.TI),me=(0,P.A4)(G,o,r);A(me);var fe=y()(Z);fe.includes(o)||(fe.push(o),te(fe))},Oe=function(o){var r=a()({key:(0,ae.Z)()},R.gN),me=(0,P.A4)(_,o,r);L(me);var fe=y()(_e);fe.includes(o)||(fe.push(o),Y(fe))},T=function(o){var r=(0,P.IK)(G,o);A(r)},Ne=function(o){var r=(0,P.IK)(_,o);L(r)},Te=function(o){var r=o.icon,me=o.name,fe=o.description,Ee=se()(oe);Ee.icon=r,Ee.name=me,Ee.description=fe,Ce(Ee),I(!1)},Se=function(){var o=se()(G)||[];o.push(a()({key:(0,ae.Z)()},R.TI)),A(o)},Pe=function(){var o=se()(_)||[];o.push(a()({key:(0,ae.Z)()},R.gN)),L(o)},be=function(o){var r=(0,P.kS)(o);Y(r),L(o)},Fe=function(){j(!1);var o=W()().toString(),r=a()(a()({},oe),{},{publishDate:o,modified:o,publishStatus:t.xH.Published});Ce(r)},Ke=function(){U.current&&(B.ZP.success("\u63D2\u4EF6\u4FDD\u5B58\u6210\u529F"),U.current=!1);var o=W()().toString(),r=a()(a()({},oe),{},{modified:o});Ce(r)};return{isModalOpen:i,setIsModalOpen:b,autoAnalysisOpen:pe,setAutoAnalysisOpen:re,visible:g,setVisible:v,openModal:s,setOpenModal:j,pluginId:f,pluginInfo:oe,setPluginInfo:Ce,openPlugin:K,setOpenPlugin:I,inputConfigArgs:G,setInputConfigArgs:A,outputConfigArgs:_,setOutputConfigArgs:L,expandedRowKeys:Z,setExpandedRowKeys:te,outputExpandedRowKeys:_e,handleInputValue:p,handleOutputValue:De,handleInputAddChild:Re,handleOutputAddChild:Oe,handleInputDel:T,handleOutputDel:Ne,handleConfirmUpdate:Te,handleInputConfigAdd:Se,handleOutputConfigAdd:Pe,handleOutputConfigArgs:be,handleConfirmPublishPlugin:Fe,handleUpdateSuccess:Ke,isClickSaveBtnRef:U}};q.Z=de},94166:function(Ae,q,e){var ee=e(15558),a=e.n(ee),n=e(26068),y=e.n(n),H=e(48305),m=e.n(H),R=e(61265),t=e(39671),P=e(92122),B=e(40677),k=e(75271),W=e(92448),ne=function(){var X=(0,k.useState)([]),F=m()(X,2),ae=F[0],de=F[1],ue=(0,k.useState)([]),S=m()(ue,2),f=S[0],N=S[1],d=function(g,v){var h=function E(s){return s.map(function(j){var $=j.dataType,O=j.subArgs;if($===P.Gi.Array_Object){var K=(0,W.Z)();if(v.push(K),O&&O.length>0){var I=[y()(y()({},t.TI),{},{key:K,name:R.zC,dataType:P.Gi.Object,subArgs:E(O)})];return y()(y()({},j),{},{subArgs:I})}}return $===P.Gi.Object?y()(y()({},j),{},{subArgs:E(O||[])}):j})};return h(g)||[]},i=function(g,v){if(g?.length>0){var h=a()(v),E=d(g,h)||[];N(h),de(E)}else de([])},b=function(g,v,h){var E=(0,B.mG)(ae,g,v,h);de(E)},ce=function(g,v){var h=function E(s){if(s.subArgs&&s.subArgs.length>0){var j,$=((j=s.subArgs)===null||j===void 0?void 0:j.map(function(K){var I,J=(0,W.Z)();return(I=K.subArgs)!==null&&I!==void 0&&I.length?(v.push(J),E(K)):y()(y()({},K),{},{key:J,bindValue:""})}))||[],O=(0,W.Z)();return v.push(O),y()(y()({},s),{},{key:O,subArgs:$})}return y()(y()({},s),{},{key:(0,W.Z)()})};return h(g)},z=function(g){var v=g.key,h=g.dataType,E,s=[];if(h===P.Gi.Array_Object){if(g.subArgs&&g.subArgs.length>0){var j,$=(j=g.subArgs)===null||j===void 0?void 0:j[0];E=ce($,s)}}else{var O,K=h==null||(O=h.toString())===null||O===void 0||(O=O.split("_"))===null||O===void 0?void 0:O[1];E=y()(y()({},t.TI),{},{key:(0,W.Z)(),name:R.zC,dataType:K})}var I=(0,B.A4)(ae,v,E);de(I);var J=a()(f);J.includes(v)||J.push(v),h===P.Gi.Array_Object&&J.push.apply(J,s),N(J)},pe=function(g){var v=(0,B.IK)(ae,g);de(v)},re=function Q(g){return g?.map(function(v){var h=v.subArgs,E={};return h?.forEach(function(s){var j,$,O;if(s.dataType===P.Gi.Object&&s.name!==R.zC){var K,I={};(K=s.subArgs)===null||K===void 0||K.forEach(function(ie){I[ie.name]=ie.bindValue}),E[s.name]=I}else if((j=s.dataType)!==null&&j!==void 0&&j.includes("Array")&&!(($=s.dataType)!==null&&$!==void 0&&$.includes("Object"))){var J;E[s.name]=(J=s.subArgs)===null||J===void 0?void 0:J.map(function(ie){return ie.bindValue})}else!((O=s.dataType)!==null&&O!==void 0&&O.includes("Array"))&&s.dataType!==P.Gi.Object?E[s.name]=s.bindValue:E[s.name]=Q(s?.subArgs)}),E})},ge=function Q(g){var v={};return g?.forEach(function(h){var E=h.name,s=h.dataType,j=h.subArgs;if(!(s!=null&&s.includes("Array"))&&s!==P.Gi.Object&&(v[E]=h.bindValue),s!=null&&s.includes("Array")&&!(s!=null&&s.includes("Object"))){var $;v[E]=($=h.subArgs)===null||$===void 0?void 0:$.map(function(O){return O.bindValue})}s===P.Gi.Object&&E!==R.zC&&(v[E]=Q(j||[])),s===P.Gi.Array_Object&&j&&j?.length>0&&(v[E]=re(j))}),v};return{handleInit:i,dataSource:ae,handleDataSource:ge,expandedRowKeys:f,handleInputValue:b,handleInputAddChild:z,handleInputDel:pe}};q.Z=ne},48512:function(Ae,q,e){e.d(q,{DJ:function(){return B},RY:function(){return W},YM:function(){return de},b9:function(){return ue},iE:function(){return P},x8:function(){return se}});var ee=e(65173),a=e(73415),n=e(92122),y=e(56769),H=e(63619),m=e(28246),R=e(43898),t=e(52676),P=[{name:"",key:"group1",children:[{name:"\u5927\u6A21\u578B",icon:(0,t.jsx)(a.EF,{}),bgIcon:a.G0,type:n.C8.LLM,shape:n.K$.General,description:"\u8C03\u7528\u5927\u8BED\u8A00\u6A21\u578B\uFF0C\u4F7F\u7528\u53D8\u91CF\u548C\u63D0\u793A\u8BCD\u751F\u6210\u56DE\u590D"},{name:"\u63D2\u4EF6",icon:(0,t.jsx)(a.KS,{}),bgIcon:a.SU,type:n.C8.Plugin,shape:n.K$.General,description:"\u5FC5\u5E94\u641C\u7D22\u5F15\u64CE\u3002\u5F53\u4F60\u9700\u8981\u641C\u7D22\u4F60\u4E0D\u77E5\u9053\u7684\u4FE1\u606F\uFF0C\u6BD4\u5982\u5929\u6C14..."},{name:"\u5DE5\u4F5C\u6D41",icon:(0,t.jsx)(a.fl,{}),bgIcon:a.Ls,type:n.C8.Workflow,shape:n.K$.General,description:"\u5FC5\u5E94\u641C\u7D22\u5F15\u64CE\u3002\u5F53\u4F60\u9700\u8981\u641C\u7D22\u4F60\u4E0D\u77E5\u9053\u7684\u4FE1\u606F\uFF0C\u6BD4\u5982\u5929\u6C14..."},{name:"MCP",icon:(0,t.jsx)(a.VE,{}),bgIcon:a.zH,type:n.C8.MCP,shape:n.K$.General,description:"MCP \u7EC4\u4EF6"}]},{name:"\u4E1A\u52A1\u903B\u8F91",key:"group2",children:[{name:"\u4EE3\u7801",icon:(0,t.jsx)(a.HF,{}),bgIcon:a.Po,type:n.C8.Code,shape:n.K$.General,description:"\u7F16\u5199\u4EE3\u7801\uFF0C\u5904\u7406\u8F93\u5165\u53D8\u91CF\u6765\u751F\u6210\u8FD4\u56DE\u503C"},{name:"\u6761\u4EF6\u5206\u652F",icon:(0,t.jsx)(a.ZO,{}),bgIcon:a.TK,type:n.C8.Condition,shape:n.K$.General,description:"\u8FDE\u63A5\u591A\u4E2A\u4E0B\u6E38\u5206\u652F\uFF0C\u82E5\u8BBE\u5B9A\u7684\u6761\u4EF6\u6210\u7ACB\u5219\u4EC5\u8FD0\u884C\u5BF9\u5E94\u7684\u5206\u652F\uFF0C\u82E5 \u5747\u4E0D\u6210\u7ACB\u5219\u53EA\u8FD0\u884C\u201C\u5426\u5219\u201D\u5206\u652F"},{name:"\u610F\u56FE\u8BC6\u522B",icon:(0,t.jsx)(a.mT,{}),bgIcon:a.cp,type:n.C8.IntentRecognition,shape:n.K$.General,description:"\u7528\u4E8E\u7528\u6237\u8F93\u5165\u7684\u610F\u56FE\u8BC6\u522B\uFF0C\u5E76\u5C06\u5176\u4E0E\u9884\u8BBE\u610F\u56FE\u9009\u9879\u8FDB\u884C\u5339\u914D\u3002"},{name:"\u5FAA\u73AF",icon:(0,t.jsx)(a.ZX,{}),bgIcon:a.bD,type:n.C8.Loop,shape:n.K$.Loop,description:"\u7528\u4E8E\u901A\u8FC7\u8BBE\u5B9A\u5FAA\u73AF\u6B21\u6570\u548C\u903B\u8F91\uFF0C\u91CD\u590D\u6267\u884C\u4E00\u7CFB\u5217\u4EFB\u52A1\u3002"},{name:"\u7EE7\u7EED\u5FAA\u73AF",icon:(0,t.jsx)(a.uS,{}),bgIcon:a.jI,type:n.C8.LoopContinue,shape:n.K$.General,description:""},{name:"\u7EC8\u6B62\u5FAA\u73AF",icon:(0,t.jsx)(a.QL,{}),bgIcon:a.J2,type:n.C8.LoopBreak,shape:n.K$.General,description:""}]},{name:"\u77E5\u8BC6&\u6570\u636E",key:"group3",children:[{name:"\u77E5\u8BC6\u5E93",icon:(0,t.jsx)(a.fF,{}),bgIcon:a.Lm,type:n.C8.Knowledge,shape:n.K$.General,description:"\u5728\u9009\u5B9A\u7684\u77E5\u8BC6\u4E2D\uFF0C\u6839\u636E\u8F93\u5165\u53D8\u91CF\u53EC\u56DE\u6700\u5339\u914D\u7684\u4FE1\u606F"},{name:"\u53D8\u91CF",icon:(0,t.jsx)(a.JU,{}),bgIcon:a.Hl,type:n.C8.Variable,shape:n.K$.General,description:"\u7528\u4E8E\u8BFB\u53D6\u548C\u5199\u5165\u9879\u76EE\u4E2D\u7684\u53D8\u91CF\uFF0C\u53D8\u91CF\u540D\u987B\u4E0E\u9879\u76EE\u4E2D\u7684\u53D8\u91CF\u540D\u76F8\u5339\u914D"},{name:"\u957F\u671F\u8BB0\u5FC6",icon:(0,t.jsx)(a.GY,{}),bgIcon:a.aA,type:n.C8.LongTermMemory,shape:n.K$.General,description:"\u7528\u4E8E\u8C03\u7528\u957F\u671F\u8BB0\u5FC6\uFF0C\u83B7\u53D6\u7528\u6237\u7684\u4E2A\u6027\u5316\u4FE1\u606F"}]},{name:"\u6570\u636E\u8868",key:"group4",children:[{name:"\u6570\u636E\u65B0\u589E",icon:(0,t.jsx)(a.wN,{}),bgIcon:a.Te,type:n.C8.TableDataAdd,shape:n.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u8FDB\u884C\u6570\u636E\u5199\u5165"},{name:"\u6570\u636E\u5220\u9664",icon:(0,t.jsx)(a.t_,{}),bgIcon:a.u8,type:n.C8.TableDataDelete,shape:n.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9AID\u8FDB\u884C\u6570\u636E\u5220\u9664"},{name:"\u6570\u636E\u66F4\u65B0",icon:(0,t.jsx)(a.Lg,{}),bgIcon:a.Og,type:n.C8.TableDataUpdate,shape:n.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9A\u6761\u4EF6\u8FDB\u884C\u6570\u636E\u66F4\u65B0"},{name:"\u6570\u636E\u67E5\u8BE2",icon:(0,t.jsx)(a.Qe,{}),bgIcon:a.c7,type:n.C8.TableDataQuery,shape:n.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9A\u6761\u4EF6\u8FDB\u884C\u6570\u636E\u67E5\u8BE2"},{name:"SQL\u81EA\u5B9A\u4E49",icon:(0,t.jsx)(a.rX,{}),bgIcon:a.D9,type:n.C8.TableSQL,shape:n.K$.General,description:"\u53EF\u652F\u6301\u5BF9\u6570\u636E\u8868\u7684\u67E5\u8BE2\u63A7\u5236\uFF0C\u7528\u6237\u53EF\u67E5\u8BE2\u5176\u4ED6\u7528\u6237\u63D0\u4EA4\u7684\u6570\u636E\uFF0C\u7531\u5F00\u53D1\u8005\u63A7\u5236"}]},{name:"\u7EC4\u4EF6&\u5DE5\u5177",key:"group5",children:[{name:"\u95EE\u7B54",icon:(0,t.jsx)(a.MO,{}),bgIcon:a.HI,type:n.C8.QA,shape:n.K$.General,description:"\u652F\u6301\u4E2D\u95F4\u5411\u7528\u6237\u63D0\u95EE\u95EE\u9898"},{name:"\u6587\u672C\u5904\u7406",icon:(0,t.jsx)(a.lR,{}),bgIcon:a.v$,type:n.C8.TextProcessing,shape:n.K$.General,description:"\u7528\u4E8E\u5904\u7406\u591A\u4E2A\u5B57\u7B26\u4E32\u7C7B\u578B\u53D8\u91CF\u7684\u683C\u5F0F"},{name:"\u6587\u6863\u63D0\u53D6",icon:(0,t.jsx)(a.zL,{}),bgIcon:a.AR,type:n.C8.DocumentExtraction,shape:n.K$.General,description:"\u7528\u4E8E\u63D0\u53D6\u6587\u6863\u5185\u5BB9\uFF0C\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B: txt\u3001 markdown\u3001pdf\u3001 html\u3001 xlsx\u3001 xls\u3001 docx\u3001 csv\u3001 md\u3001 htm"},{name:"http\u8BF7\u6C42",icon:(0,t.jsx)(a.qm,{}),bgIcon:a.L5,type:n.C8.HTTPRequest,shape:n.K$.General,description:"\u7528\u4E8E\u914D\u7F6Ehttp\u8BF7\u6C42\u8C03\u7528\u5DF2\u6709\u7684\u670D\u52A1"}]},{name:"\u8F93\u51FA",key:"group6",children:[{name:"\u8FC7\u7A0B\u8F93\u51FA",icon:(0,t.jsx)(a.N$,{}),bgIcon:a.bi,type:n.C8.Output,shape:n.K$.General,description:"\u652F\u6301\u4E2D\u95F4\u8FC7\u7A0B\u7684\u6D88\u606F\u8F93\u51FA\uFF0C\u652F\u6301\u6D41\u5F0F\u548C\u975E\u6D41\u5F0F\u4E24\u79CD\u65B9\u5F0F"}]}],B=[{label:"String",value:n.Gi.String},{label:"Integer",value:n.Gi.Integer},{label:"Number",value:n.Gi.Number},{label:"File",value:"File",children:[{label:"Doc",value:n.Gi.File_Doc},{label:"Excel",value:n.Gi.File_Excel},{label:"PPT",value:n.Gi.File_PPT},{label:"Txt",value:n.Gi.File_Txt},{label:"Image",value:n.Gi.File_Image},{label:"Audio",value:n.Gi.File_Audio},{label:"Video",value:n.Gi.File_Video},{label:"Svg",value:n.Gi.File_Svg},{label:"Code",value:n.Gi.File_Code}]},{label:"Boolean",value:n.Gi.Boolean},{label:"Object",value:n.Gi.Object},{label:"Array<String>",value:n.Gi.Array_String},{label:"Array<Integer>",value:n.Gi.Array_Integer},{label:"Array<Number>",value:n.Gi.Array_Number},{label:"Array<Boolean>",value:n.Gi.Array_Boolean},{label:"Array<Object>",value:n.Gi.Array_Object},{label:"Array<File>",value:"Array_File",children:[{label:"Default",value:n.Gi.Array_File_Default},{label:"Array<Image>",value:n.Gi.Array_File_Image},{label:"Array<Doc>",value:n.Gi.Array_File_Doc},{label:"Array<Code>",value:n.Gi.Array_File_Code},{label:"Array<PPT>",value:n.Gi.Array_File_PPT},{label:"Array<Txt>",value:n.Gi.Array_File_Txt},{label:"Array<Excel>",value:n.Gi.Array_File_Excel},{label:"Array<Audio>",value:n.Gi.Array_File_Audio},{label:"Array<Zip>",value:n.Gi.Array_File_Zip},{label:"Array<Video>",value:n.Gi.Array_File_Video},{label:"Array<Svg>",value:n.Gi.Array_File_Svg}]}],k=[{label:"\u6807\u9898\u751F\u6210",icon:(0,t.jsx)(a.nG,{}),key:"\u6807\u9898\u751F\u6210",children:[{key:"output",label:"output",tag:"String"},{key:"setting",label:"Setting",tag:"Number"}]}],W=[{label:"\u4F7F\u7528\u6570\u7EC4\u5FAA\u73AF",value:"ARRAY_LOOP"},{label:"\u6307\u5B9A\u6B21\u6570\u5FAA\u73AF",value:"SPECIFY_TIMES_LOOP"},{label:"\u65E0\u9650\u5FAA\u73AF",value:"INFINITE_LOOP"}],ne=[{name:"name",placeholder:"\u53D8\u91CF\u540D",label:"\u53D8\u91CF\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u540D"}],component:H.Z,width:140},{name:"dataType",placeholder:"\u9009\u62E9\u7C7B\u578B",label:"\u53D8\u91CF\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D8\u91CF\u7C7B\u578B"}],component:m.Z,width:110,options:B},{name:"description",placeholder:"\u63CF\u8FF0",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],component:R.Z,width:0},{name:"require",placeholder:"\u53D8\u91CF\u540D",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u540D"}],component:R.Z,width:0}],se=[{name:"name",placeholder:"\u53C2\u6570\u540D",label:"\u53C2\u6570\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"}],component:H.Z,width:100},{name:"bindValue",placeholder:"\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570\u503C",label:"\u53C2\u6570\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u503C"}],component:ee.Z,width:180},{name:"description",placeholder:"\u63CF\u8FF0",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],component:R.Z,width:0}],X=[{name:"intent",placeholder:"\u8F93\u5165\u53C2\u6570\u503C",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u610F\u56FE\u7684\u63CF\u8FF0"}],component:H.Z,width:296}],F=[{name:"name",placeholder:"\u53C2\u6570\u540D",label:"\u53C2\u6570\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"}],component:H.Z,width:140},{name:"paramsValue",placeholder:"\u8F93\u5165\u6216\u5F15\u7528\u53D8\u91CF\u503C",label:"\u53D8\u91CF\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C"}],component:ee.Z,width:120}],ae=[{icon:(0,t.jsx)(y.Z,{}),name:"\u8D44\u6E90\u5E93\u5DE5\u4F5C\u6D41",key:"resources"},{icon:(0,t.jsx)(y.Z,{}),name:"\u5B98\u65B9\u793A\u4F8B",key:"example"}],de=[{label:"\u7B49\u4E8E",value:"EQUAL",displayValue:"="},{label:"\u4E0D\u7B49\u4E8E",value:"NOT_EQUAL",displayValue:"\u2260"},{label:"\u5927\u4E8E",value:"GREATER_THAN",displayValue:">"},{label:"\u5927\u4E8E\u7B49\u4E8E",value:"GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u5C0F\u4E8E",value:"LESS_THAN",displayValue:"<"},{label:"\u5C0F\u4E8E\u7B49\u4E8E",value:"LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u957F\u5EA6\u5927\u4E8E",value:"LENGTH_GREATER_THAN",displayValue:">"},{label:"\u957F\u5EA6\u5927\u4E8E\u7B49\u4E8E",value:"LENGTH_GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u957F\u5EA6\u5C0F\u4E8E",value:"LENGTH_LESS_THAN",displayValue:"<"},{label:"\u957F\u5EA6\u5C0F\u4E8E\u7B49\u4E8E",value:"LENGTH_LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u5305\u542B",value:"CONTAINS",displayValue:"\u2283"},{label:"\u4E0D\u5305\u542B",value:"NOT_CONTAINS",displayValue:"\u2285"},{label:"\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F",value:"MATCH_REGEX",displayValue:"~"},{label:"\u4E3A\u7A7A",value:"IS_NULL",displayValue:"\u2205"},{label:"\u4E0D\u4E3A\u7A7A",value:"NOT_NULL",displayValue:"!\u2205"}],ue=[{label:"\u7B49\u4E8E",value:"EQUAL",displayValue:"="},{label:"\u4E0D\u7B49\u4E8E",value:"NOT_EQUAL",displayValue:"\u2260"},{label:"\u5927\u4E8E",value:"GREATER_THAN",displayValue:">"},{label:"\u5927\u4E8E\u7B49\u4E8E",value:"GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u5C0F\u4E8E",value:"LESS_THAN",displayValue:"<"},{label:"\u5C0F\u4E8E\u7B49\u4E8E",value:"LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u5C5E\u4E8E",value:"IN",displayValue:"\u2283"},{label:"\u4E0D\u5C5E\u4E8E",value:"NOT_IN",displayValue:"\u2285"},{label:"\u4E3A\u7A7A",value:"IS_NULL",displayValue:"\u2205"},{label:"\u4E0D\u4E3A\u7A7A",value:"NOT_NULL",displayValue:"!\u2205"}]},10104:function(Ae,q,e){e.r(q),e.d(q,{default:function(){return _}});var ee=e(90228),a=e.n(ee),n=e(26068),y=e.n(n),H=e(87999),m=e.n(H),R=e(48305),t=e.n(R),P=e(30704),B=e(6377),k=e(51802),W=e(61304),ne=e(2660),se=e(56716),X=e(27791),F=e(73415),ae=e(87620),de=e(53501),ue=e(48512),S=e(24643),f=e(64799),N=e(92122),d=e(44953),i=e(40677),b=e(26324),ce=e(86743),z=e(28190),pe=e(63619),re=e(28246),ge=e(17701),Q=e(43898),g=e(68108),v=e(7010),h=e(51430),E=e(10580),s=e(9504),j=e(94581),$=e.n(j),O=e(75271),K=e(56179),I={"xagi-nav-style2":"xagi-nav-style2___yMpiL",text:"text___db3EP","page-container":"page-container___Tga9u",container:"container___IEl0t","main-container":"main-container___sMpOU",title:"title___ODWN6","request-select":"request-select___M1IeR","table-wrap":"table-wrap___ty9xJ","mb-24":"mb-24___UJXHH",select:"select___yVYzb"},J=e(26145),ie=e(45019),oe=e(86230),Ce=e(61606),he=e(23299),le=e(66118),Z=e(7036),te=e(73813),ve=e(12758),xe=e(16483),_e=e.n(xe),Y={"xagi-nav-style2":"xagi-nav-style2___Pns8X",text:"text___efngY","page-container":"page-container___qBf68",header:"header___fCRSy","icon-back":"icon-back___t7VtQ",logo:"logo___PI8Y9",section:"section___c_GEv","top-box":"top-box___M54E6",name:"name___VB2L3",circle:"circle___XOm84","bottom-box":"bottom-box___OPqdd",box:"box___NiV4x","update-time":"update-time___r2_WM",history:"history___cyNGM","try-btn":"try-btn___k7NAI"},l=e(52676),w=$().bind(Y),G=function(U){var p=U.pluginInfo,De=U.onEdit,Re=U.onToggleHistory,Oe=U.onSave,T=U.onTryRun,Ne=U.onPublish,Te=(0,K.useParams)(),Se=Te.spaceId,Pe=(0,O.useMemo)(function(){if(p){var be;return!(p!=null&&(be=p.permissions)!==null&&be!==void 0&&be.includes(N.jE.Publish))}else return!1},[p]);return(0,l.jsxs)("header",{className:w("flex","items-center","w-full",Y.header),children:[(0,l.jsx)(Ce.Z,{className:w(Y["icon-back"],"cursor-pointer"),onClick:function(){return(0,oe.bC)("/space/".concat(Se,"/library"))}}),(0,l.jsx)("img",{className:w(Y.logo),src:p?.icon||J,alt:""}),(0,l.jsxs)("section",{className:w("flex-1","flex","flex-col","content-between",Y.section),children:[(0,l.jsxs)("div",{className:w("flex","w-full",Y["top-box"]),children:[(0,l.jsx)("h3",{className:w(Y.name,"text-ellipsis"),children:p?.name}),(0,l.jsx)(he.Z,{className:w("cursor-pointer","hover-box"),onClick:De}),p?.publishStatus===N.xH.Published&&(0,l.jsx)(le.Z,{className:w(Y.circle)}),p?.publishDate!==null&&_e()(p?.publishDate).isBefore(p?.modified)&&(0,l.jsx)(ve.Z,{bordered:!1,color:"volcano",style:{marginLeft:"6px"},children:"\u6709\u66F4\u65B0\u672A\u53D1\u5E03"})]}),(0,l.jsxs)("div",{className:w(Y["bottom-box"],"flex","items-center"),children:[(0,l.jsx)("span",{className:w(Y.box),children:p?.type===ie.AQ.HTTP?"http":"\u4EE3\u7801"}),(0,l.jsx)("span",{className:w(Y.box),children:p?.publishStatus===N.xH.Published?"\u5DF2\u53D1\u5E03":"\u672A\u53D1\u5E03"}),(0,l.jsxs)("span",{className:w(Y["update-time"]),children:["\u914D\u7F6E\u4FDD\u5B58\u4E8E",_e()(p?.modified).format("HH:mm")]})]})]}),(0,l.jsx)(Z.Z,{className:w(Y.history,"cursor-pointer"),onClick:Re}),(0,l.jsx)(s.ZP,{className:w(Y["try-btn"]),type:"primary",onClick:Oe,children:"\u4FDD\u5B58"}),(0,l.jsx)(s.ZP,{className:w(Y["try-btn"]),type:"primary",icon:(0,l.jsx)(te.Z,{}),onClick:T,children:"\u8BD5\u8FD0\u884C"}),(0,l.jsx)(s.ZP,{type:"primary",onClick:Ne,disabled:Pe,children:"\u53D1\u5E03"})]})},A=G,M=$().bind(I),C=function(){var U=(0,K.useParams)(),p=Number(U.spaceId),De=z.Z.useForm(),Re=t()(De,1),Oe=Re[0],T=(0,de.Z)(),Ne=T.isModalOpen,Te=T.setIsModalOpen,Se=T.autoAnalysisOpen,Pe=T.setAutoAnalysisOpen,be=T.visible,Fe=T.setVisible,Ke=T.openModal,ye=T.setOpenModal,o=T.pluginId,r=T.pluginInfo,me=T.setPluginInfo,fe=T.openPlugin,Ee=T.setOpenPlugin,je=T.inputConfigArgs,Me=T.setInputConfigArgs,Ue=T.outputConfigArgs,Ze=T.expandedRowKeys,Qe=T.setExpandedRowKeys,$e=T.outputExpandedRowKeys,Ie=T.handleInputValue,Le=T.handleOutputValue,ze=T.handleInputAddChild,Ye=T.handleOutputAddChild,Xe=T.handleInputDel,Je=T.handleOutputDel,we=T.handleConfirmUpdate,ke=T.handleInputConfigAdd,qe=T.handleOutputConfigAdd,Ve=T.handleOutputConfigArgs,en=T.handleConfirmPublishPlugin,nn=T.handleUpdateSuccess,an=T.isClickSaveBtnRef,ln=(0,K.useRequest)(S.dB,{manual:!0,debounceInterval:300,onSuccess:function(c){if(me(c),c.config){var u=c.config,x=u.method,V=u.url,Ge=u.contentType,mn=u.timeout,He=u.inputArgs,fn=u.outputArgs;Oe.setFieldsValue({method:x||N.LM.GET,url:V,contentType:Ge||N.lT.OTHER,timeout:mn||10});var gn=(0,i.kS)(He);Qe(gn),Me(He),Ve(fn)}}}),tn=ln.run,un=(0,K.useRequest)(S.i,{manual:!0,debounceInterval:300,onSuccess:function(){nn()}}),sn=un.run;(0,O.useEffect)(function(){tn(o)},[o]);var We=function(c){return c[c.length-1]},rn=[{title:(0,l.jsx)(B.Z,{label:"\u53C2\u6570\u540D\u79F0"}),dataIndex:"name",key:"name",className:"flex items-center",render:function(c,u){return(0,l.jsx)(pe.Z,{placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0\uFF0C\u786E\u4FDD\u542B\u4E49\u6E05\u6670",value:c,onChange:function(V){return Ie(u.key,"name",V.target.value)}})}},{title:(0,l.jsx)(B.Z,{label:"\u53C2\u6570\u63CF\u8FF0"}),dataIndex:"description",key:"description",render:function(c,u){return(0,l.jsx)(pe.Z,{placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u63CF\u8FF0\uFF0C\u786E\u4FDD\u63CF\u8FF0\u8BE6\u7EC6\u4FBF\u4E8E\u5927\u6A21\u578B\u66F4\u597D\u7684\u7406\u89E3",value:c,onChange:function(V){return Ie(u.key,"description",V.target.value)}})}},{title:(0,l.jsx)(B.Z,{label:"\u53C2\u6570\u7C7B\u578B"}),dataIndex:"dataType",key:"dataType",width:120,render:function(c,u){return(0,l.jsx)(re.Z,{rootClassName:I.select,allowClear:!1,options:ue.DJ,expandTrigger:"hover",displayRender:We,defaultValue:(0,d.n3)(c),onChange:function(V){Ie(u.key,"dataType",(0,d.$g)(V))},placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B"})}},{title:(0,l.jsx)(B.Z,{label:"\u4F20\u5165\u65B9\u5F0F"}),dataIndex:"inputType",key:"inputType",width:120,render:function(c,u){return(0,i.YY)(je,u.key,1)===1&&(0,l.jsx)(ge.default,{rootClassName:I.select,options:ae.R0,value:c,onChange:function(V){return Ie(u.key,"inputType",V)}})}},{title:"\u662F\u5426\u5FC5\u987B",dataIndex:"require",key:"require",width:100,align:"center",render:function(c,u){return(0,l.jsx)(Q.Z,{checked:c,onChange:function(V){return Ie(u.key,"require",V.target.checked)}})}},{title:"\u9ED8\u8BA4\u503C",dataIndex:"bindValue",key:"bindValue",width:150,render:function(c,u){var x;return(0,l.jsx)(pe.Z,{placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",disabled:N.Gi.Object===u.dataType||N.Gi.Array_Object===u.dataType||((x=u.dataType)===null||x===void 0?void 0:x.includes("Array"))||!u.enable,value:c,onChange:function(Ge){return Ie(u.key,"bindValue",Ge.target.value)}})}},{title:"\u5F00\u542F",dataIndex:"enable",key:"enable",width:70,align:"center",render:function(c,u){return(0,l.jsx)(g.Z,{title:u.require&&!u.bindValue&&"\u6B64\u53C2\u6570\u662F\u5FC5\u586B\u53C2\u6570\uFF0C\u586B\u5199\u9ED8\u8BA4\u503C\u540E\uFF0C\u6B64\u5F00\u5173\u53EF\u7528",children:(0,l.jsx)(Q.Z,{disabled:u.require&&!u.bindValue,checked:c,onChange:function(V){return Ie(u.key,"enable",V.target.checked)}})})}},{title:"\u64CD\u4F5C",key:"action",width:80,align:"right",render:function(c,u){return(0,l.jsxs)(v.Z,{size:"middle",children:[(N.Gi.Object===u.dataType||N.Gi.Array_Object===u.dataType)&&(0,l.jsx)(F.Me,{className:M("cursor-pointer"),onClick:function(){return ze(u.key)}}),(0,l.jsx)(ce.Z,{onClick:function(){return Xe(u.key)}})]})}}],on=[{title:(0,l.jsx)(B.Z,{label:"\u53C2\u6570\u540D\u79F0"}),dataIndex:"name",key:"name",width:430,className:"flex items-center",render:function(c,u){return(0,l.jsx)(pe.Z,{placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0\uFF0C\u786E\u4FDD\u542B\u4E49\u6E05\u6670",value:c,onChange:function(V){return Le(u.key,"name",V.target.value)}})}},{title:(0,l.jsx)(B.Z,{label:"\u53C2\u6570\u63CF\u8FF0"}),dataIndex:"description",key:"description",render:function(c,u){return(0,l.jsx)(pe.Z,{placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u63CF\u8FF0\uFF0C\u786E\u4FDD\u63CF\u8FF0\u8BE6\u7EC6\u4FBF\u4E8E\u5927\u6A21\u578B\u66F4\u597D\u7684\u7406\u89E3",onChange:function(V){return Le(u.key,"description",V.target.value)},value:c})}},{title:(0,l.jsx)(B.Z,{label:"\u53C2\u6570\u7C7B\u578B"}),dataIndex:"dataType",key:"dataType",width:120,render:function(c,u){return(0,l.jsx)(re.Z,{allowClear:!1,rootClassName:I.select,options:ue.DJ,expandTrigger:"hover",displayRender:We,defaultValue:(0,d.n3)(c),onChange:function(V){Le(u.key,"dataType",(0,d.$g)(V))},placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B"})}},{title:"\u5F00\u542F",dataIndex:"enable",key:"enable",width:70,align:"center",render:function(c,u){return(0,l.jsx)(Q.Z,{checked:c,onChange:function(V){return Le(u.key,"enable",V.target.checked)}})}},{title:"\u64CD\u4F5C",key:"action",width:80,align:"right",render:function(c,u){return(0,l.jsxs)(v.Z,{size:"middle",children:[(N.Gi.Object===u.dataType||N.Gi.Array_Object===u.dataType)&&(0,l.jsx)(F.Me,{className:M("cursor-pointer"),onClick:function(){return Ye(u.key)}}),(0,l.jsx)(ce.Z,{onClick:function(){return Je(u.key)}})]})}}],Be=function(){var D=m()(a()().mark(function c(){var u;return a()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,Oe.validateFields();case 2:u=V.sent,sn({id:o,config:y()(y()({},u),{},{inputArgs:je,outputArgs:Ue})});case 4:case"end":return V.stop()}},c)}));return function(){return D.apply(this,arguments)}}(),dn=function(){var D=m()(a()().mark(function c(){return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return an.current=!0,x.next=3,Be();case 3:case"end":return x.stop()}},c)}));return function(){return D.apply(this,arguments)}}(),cn=function(){var D=m()(a()().mark(function c(){return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,Be();case 2:Te(!0);case 3:case"end":return x.stop()}},c)}));return function(){return D.apply(this,arguments)}}(),pn=function(){var D=m()(a()().mark(function c(){return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,Be();case 2:ye(!0);case 3:case"end":return x.stop()}},c)}));return function(){return D.apply(this,arguments)}}(),vn=function(){var D=m()(a()().mark(function c(){return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,Be();case 2:Pe(!0);case 3:case"end":return x.stop()}},c)}));return function(){return D.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:M("flex","h-full"),children:[(0,l.jsxs)("div",{className:M(I.container,"flex","flex-col","flex-1","h-full"),children:[(0,l.jsx)(A,{pluginInfo:r,onEdit:function(){return Ee(!0)},onToggleHistory:function(){return Fe(!be)},onSave:dn,onTryRun:cn,onPublish:pn}),(0,l.jsxs)("div",{className:M(I["main-container"],"overflow-y"),children:[(0,l.jsx)("h3",{className:M(I.title,"mb-12"),children:"\u8BF7\u6C42\u914D\u7F6E"}),(0,l.jsxs)(z.Z,{form:Oe,initialValues:{method:N.LM.GET,contentType:N.lT.OTHER,timeout:10},layout:"vertical",requiredMark:b.N,children:[(0,l.jsx)(z.Z.Item,{label:(0,l.jsx)(B.Z,{label:"\u8BF7\u6C42\u65B9\u6CD5\u4E0E\u8DEF\u5F84"}),children:(0,l.jsxs)("div",{className:M("flex"),children:[(0,l.jsx)(z.Z.Item,{name:"method",noStyle:!0,children:(0,l.jsx)(ge.default,{rootClassName:M(I["request-select"]),options:ae.dh,placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"})}),(0,l.jsx)(z.Z.Item,{name:"url",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42\u8DEF\u5F84"}],noStyle:!0,children:(0,l.jsx)(pe.Z,{placeholder:"\u8BF7\u8F93\u5165\u8BF7\u6C42\u8DEF\u5F84"})})]})}),(0,l.jsx)(z.Z.Item,{name:"contentType",label:"\u8BF7\u6C42\u5185\u5BB9\u683C\u5F0F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u5185\u5BB9\u683C\u5F0F"}],children:(0,l.jsx)(h.ZP.Group,{options:ae.Ev})}),(0,l.jsx)(z.Z.Item,{name:"timeout",label:"\u8BF7\u6C42\u8D85\u65F6\u914D\u7F6E",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D85\u65F6\u914D\u7F6E"}],children:(0,l.jsx)(pe.Z,{placeholder:"\u8BF7\u6C42\u8D85\u65F6\u914D\u7F6E\uFF0C\u4EE5\u79D2\u4E3A\u5355\u4F4D"})})]}),(0,l.jsx)(W.Z,{title:"\u5165\u53C2\u914D\u7F6E",onClick:ke}),(0,l.jsx)(E.Z,{className:M(I["table-wrap"],I["mb-24"],"overflow-hide"),columns:rn,dataSource:je,pagination:!1,expandable:{childrenColumnName:"subArgs",defaultExpandAllRows:!0,expandedRowKeys:Ze,expandIcon:function(){return null}}}),(0,l.jsx)(W.Z,{title:"\u51FA\u53C2\u914D\u7F6E",onClick:qe,extra:(0,l.jsx)(s.ZP,{onClick:vn,children:"\u81EA\u52A8\u89E3\u6790"})}),(0,l.jsx)(E.Z,{className:M(I["table-wrap"],"overflow-hide"),columns:on,dataSource:Ue,pagination:!1,expandable:{childrenColumnName:"subArgs",defaultExpandAllRows:!0,expandedRowKeys:$e,expandIcon:function(){return null}}}),(0,l.jsx)(ne.Z,{inputConfigArgs:je,inputExpandedRowKeys:Ze,pluginId:o,pluginName:r?.name,open:Ne,onCancel:function(){return Te(!1)}}),(0,l.jsx)(k.Z,{inputConfigArgs:je,inputExpandedRowKeys:Ze,pluginId:o,pluginName:r?.name,open:Se,onCancel:function(){return Pe(!1)},onConfirm:Ve})]})]}),(0,l.jsx)(se.Z,{mode:f.qR.Plugin,targetId:o,spaceId:p,category:r?.category,open:Ke,onlyShowTemplate:!1,onCancel:function(){return ye(!1)},onConfirm:en}),(0,l.jsx)(X.Z,{targetId:o,targetName:r?.name,targetType:f.qR.Plugin,permissions:r?.permissions||[],visible:be,onClose:function(){return Fe(!1)}}),(0,l.jsx)(P.Z,{open:fe,id:r?.id,icon:r?.icon,name:r?.name,description:r?.description,mode:N.jA.Update,onCancel:function(){return Ee(!1)},onConfirm:we})]})},_=C},15457:function(){}}]);})();
