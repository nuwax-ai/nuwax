"use strict";(()=>{(self.webpackChunknuwax_frontend=self.webpackChunknuwax_frontend||[]).push([[7364],{59602:function(de,w,e){e.d(w,{Z:function(){return U}});var d=e(24573),n=e(94581),y=e.n(n),u=e(75271),a={"xagi-nav-style2":"xagi-nav-style2___xuAte",text:"text___sfO7S","page-container":"page-container___rvj3b",container:"container___MWZZN"},h=e(52676),H=y().bind(a),ae=function(X){var k=X.className;return(0,h.jsxs)("div",{className:H("flex","flex-1","items-center","content-center",a.container,k),children:[(0,h.jsx)(d.Z,{}),(0,h.jsx)("span",{children:"\u52A0\u8F7D\u4E2D..."})]})},U=ae},82594:function(de,w,e){e.d(w,{De:function(){return u},QW:function(){return h},j3:function(){return a}});var d=e(68279),n=e(32604),y=e(52676),u=[{type:n.Fd.User_Manage,icon:(0,y.jsx)(d.Z,{name:"icons-nav-user"}),text:"\u7528\u6237\u7BA1\u7406"},{type:n.Fd.Publish_Audit,icon:(0,y.jsx)(d.Z,{name:"icons-nav-publish_audit"}),text:"\u53D1\u5E03\u5BA1\u6838"},{type:n.Fd.Published_Manage,icon:(0,y.jsx)(d.Z,{name:"icons-nav-template"}),text:"\u5DF2\u53D1\u5E03\u7BA1\u7406"},{type:n.Fd.Global_Model_Manage,icon:(0,y.jsx)(d.Z,{name:"icons-nav-template"}),text:"\u516C\u5171\u6A21\u578B\u7BA1\u7406"},{type:n.Fd.System_Config,icon:(0,y.jsx)(d.Z,{name:"icons-nav-settings"}),text:"\u7CFB\u7EDF\u914D\u7F6E"},{type:n.Fd.Theme_Config,icon:(0,y.jsx)(d.Z,{name:"icons-nav-palette"}),text:"\u4E3B\u9898\u914D\u7F6E"}],a=[{label:"\u6307\u5B9A\u7528\u6237\u53D1\u9001",value:n.E_.Broadcast},{label:"\u7CFB\u7EDF\u6D88\u606F\uFF08\u5168\u90E8\u7528\u6237\uFF09",value:n.E_.System}],h=[{key:"BaseConfig",label:"\u57FA\u7840\u914D\u7F6E"},{key:"ModelSetting",label:"\u9ED8\u8BA4\u6A21\u578B\u8BBE\u7F6E"},{key:"AgentSetting",label:"\u7AD9\u70B9\u667A\u80FD\u4F53\u8BBE\u7F6E"}]},59730:function(de,w,e){e.r(w),e.d(w,{default:function(){return Q}});var d=e(90228),n=e.n(d),y=e(87999),u=e.n(y),a=e(48305),h=e.n(a),H=e(59602),ae=e(82594),U=e(89377),re=e(47548),X=e(94581),k=e.n(X),S=e(75271),pe=e(53586),V=e(28190),me=e(41249),se=e(9504),fe=e(26068),B=e.n(fe),ve=e(15558),q=e.n(ve),he=e(86743),ee=e(94068),oe=e(16621),Y=e(63619),$=e(68108),ie=e(7980),C=e(17701),s=e(52676);function F(I){var l=I.value,g=I.onChange,J=(0,S.useState)([]),E=h()(J,2),P=E[0],T=E[1];(0,S.useEffect)(function(){T(l||[])},[l]);var b=function(p){var f=P.filter(function(c,A){return A!==p});T(f),g?.(f)},K=function(p,f){var c=q()(P);c[f]=p.target.value,T(c),g?.(c)};return P.map(function(M,p){return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:8},children:[(0,s.jsx)(Y.Z,{value:M,onChange:function(c){return K(c,p)}}),(0,s.jsx)(he.Z,{style:{marginLeft:8,cursor:"pointer"},onClick:function(){return b(p)}})]},p)})}function m(I){var l=I.props,g=I.modelList,J=I.agentList,E=I.currentTab,P=V.Z.useFormInstance(),T=function(){var p=[].concat(q()(l.value),[""]);console.log(p,l.value),P.setFieldValue(l.name,p)},b=function(){return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{marginRight:"5px"},children:l.description}),l.notice&&(0,s.jsx)($.Z,{title:l.notice,children:(0,s.jsx)(ee.Z,{className:"ant-form-item-tooltip"})}),(0,s.jsx)(oe.Z,{onClick:T,style:{marginLeft:"20px",cursor:"pointer",color:"#1D2129"}})]})},K={DomainBind:[{required:!0,validator:function(p,f){return f.length===0||f.some(function(c){return c===""})?Promise.reject(new Error("\u8BF7\u8F93\u5165\u57DF\u540D")):Promise.resolve()}}]};return(0,s.jsx)(V.Z.Item,B()(B()({name:l.name,initialValue:l.value,rules:K[E]},l.inputType==="MultiInput"?{label:(0,s.jsx)(b,{})}:{label:l.description,tooltip:l.notice&&{title:l.notice,icon:(0,s.jsx)(ee.Z,{})}}),{},{children:function(){var M={placeholder:l.placeholder,name:l.name,onChange:function(A){var z=["Input","Textarea"].includes(l.inputType)?A.target.value:A;P?.setFieldValue(l.name,z)}};switch(l.inputType){case"Input":return(0,s.jsx)(Y.Z,B()({},M));case"Textarea":return(0,s.jsx)(Y.Z.TextArea,B()(B()({},M),{},{rows:4}));case"File":return(0,s.jsx)(ie.Z,{action:"/api/file/upload",headers:{Authorization:"Bearer ".concat(localStorage.getItem("ACCESS_TOKEN"))},listType:"picture-card",accept:"image/*",maxCount:1,defaultFileList:l.value?[{url:l.value}]:[],children:(0,s.jsxs)("button",{style:{color:"inherit",cursor:"inherit",border:0,background:"none"},type:"button",children:[(0,s.jsx)(oe.Z,{}),(0,s.jsx)("div",{style:{marginTop:8},children:l.placeholder})]})});case"Select":case"MultiSelect":{var p=[],f=l.inputType==="MultiSelect"?"multiple":void 0;return E==="ModelSetting"&&(p=g.map(function(c){return{label:c.name,value:c.id}})),E==="AgentSetting"&&(p=J.map(function(c){return{label:c.name,value:c.targetId}})),E==="BaseConfig"&&(p=l.placeholder.split(",").map(function(c){var A=c.split(":"),z=h()(A,2),te=z[0],le=z[1];return{label:le,value:+te}})),(0,s.jsx)(C.default,B()(B()({},M),{},{mode:f,options:p}))}case"MultiInput":return(0,s.jsx)(F,{})}}()}),l.name)}var O={"xagi-nav-style2":"xagi-nav-style2___A6Odb",text:"text___oduG5","page-container":"page-container___HVsiU",container:"container___Xkigt",footer:"footer___x6owe"},G=k().bind(O);function r(I){var l=I.config,g=I.currentTab,J=I.refresh,E=V.Z.useForm(),P=h()(E,1),T=P[0],b=(0,S.useState)([]),K=h()(b,2),M=K[0],p=K[1],f=(0,S.useState)([]),c=h()(f,2),A=c[0],z=c[1],te=function(){var j=u()(n()().mark(function v(){var R;return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,U.g2)();case 2:R=_.sent,p(R.data);case 4:case"end":return _.stop()}},v)}));return function(){return j.apply(this,arguments)}}(),le=function(){var j=u()(n()().mark(function v(){var R,x,_=arguments;return n()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return R=_.length>0&&_[0]!==void 0?_[0]:"",L.next=3,(0,U.Nd)(R);case 3:x=L.sent,z(x.data);case 5:case"end":return L.stop()}},v)}));return function(){return j.apply(this,arguments)}}();(0,S.useEffect)(function(){g==="ModelSetting"&&te(),g==="AgentSetting"&&le()},[g]);var ce=function(){var j=u()(n()().mark(function v(R){var x;return n()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return x={},Object.keys(R).forEach(function(L){var Z=R[L];if(Z.file){var D;x[L]=(D=Z.file.response)===null||D===void 0||(D=D.data)===null||D===void 0?void 0:D.url}else x[L]=Z}),N.next=4,(0,U.Vk)(x);case 4:me.ZP.success("\u4FDD\u5B58\u6210\u529F"),J();case 6:case"end":return N.stop()}},v)}));return function(R){return j.apply(this,arguments)}}(),ne=function(){T.submit()};return(0,s.jsxs)("div",{className:G(O.container,"scroll-container","flex-1"),children:[(0,s.jsx)(V.Z,{layout:"vertical",style:{width:"520px"},form:T,onFinish:ce,children:l.map(function(j){return(0,s.jsx)(m,{props:j,modelList:M,agentList:A,currentTab:g},j.name)})}),(0,s.jsx)("footer",{className:G(O.footer),children:(0,s.jsx)(se.ZP,{type:"primary",onClick:ne,children:"\u4FDD\u5B58"})})]})}var o={"xagi-nav-style2":"xagi-nav-style2___Rqdn5",text:"text___G9G82","page-container":"page-container___DCod_",container:"container___g4aBz",title:"title___ytpbZ"},i=k().bind(o),t=function(){var l=(0,S.useState)(!1),g=h()(l,2),J=g[0],E=g[1],P=(0,S.useState)(),T=h()(P,2),b=T[0],K=T[1],M=(0,S.useState)("BaseConfig"),p=h()(M,2),f=p[0],c=p[1],A=(0,pe.useModel)("tenantConfigInfo"),z=A.runTenantConfig,te=function(){var ce=u()(n()().mark(function ne(){var j,v;return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,U.oL)();case 2:j=x.sent,E(!1),v={},j.data.forEach(function(_){v[_.category]||(v[_.category]=[]);var N=_.category;if(v[N]){var L=v[N][v[N].length-1],Z=L&&L.sort>_.sort?"unshift":"push";v[N][Z](_)}}),K(v);case 7:case"end":return x.stop()}},ne)}));return function(){return ce.apply(this,arguments)}}();(0,S.useEffect)(function(){E(!0),te()},[]);var le=(0,S.useMemo)(function(){return b?.[f]||[]},[b,f]);return(0,s.jsxs)("div",{className:i(o.container,"flex","flex-col"),children:[(0,s.jsx)("div",{className:i(o.title),children:"\u7CFB\u7EDF\u914D\u7F6E\u9875\u9762"}),(0,s.jsx)(re.Z,{defaultActiveKey:"BaseConfig",items:ae.QW,onChange:function(ne){return c(ne)}}),J?(0,s.jsx)(H.Z,{}):(0,s.jsx)(r,{currentTab:f,config:le,refresh:z})]})},Q=t},89377:function(de,w,e){e.d(w,{Dh:function(){return re},N3:function(){return k},Nd:function(){return $},Vk:function(){return F},YS:function(){return ve},fF:function(){return O},g2:function(){return oe},gg:function(){return fe},nJ:function(){return h},oL:function(){return me},q0:function(){return pe},uI:function(){return ae},uS:function(){return he}});var d=e(90228),n=e.n(d),y=e(87999),u=e.n(y),a=e(53586);function h(r){return H.apply(this,arguments)}function H(){return H=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/user/list",{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),H.apply(this,arguments)}function ae(r){return U.apply(this,arguments)}function U(){return U=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/user/add",{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),U.apply(this,arguments)}function re(r){return X.apply(this,arguments)}function X(){return X=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/user/updateById/".concat(o.id),{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),X.apply(this,arguments)}function k(r){return S.apply(this,arguments)}function S(){return S=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/user/enable/".concat(o.id),{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),S.apply(this,arguments)}function pe(r){return V.apply(this,arguments)}function V(){return V=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/user/disable/".concat(o.id),{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),V.apply(this,arguments)}function me(){return se.apply(this,arguments)}function se(){return se=u()(n()().mark(function r(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.request)("/api/system/config/list",{method:"POST"}));case 1:case"end":return i.stop()}},r)})),se.apply(this,arguments)}function fe(){return B.apply(this,arguments)}function B(){return B=u()(n()().mark(function r(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.request)("/api/system/model/list",{method:"GET"}));case 1:case"end":return i.stop()}},r)})),B.apply(this,arguments)}function ve(r){return q.apply(this,arguments)}function q(){return q=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/model/save",{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),q.apply(this,arguments)}function he(r){return ee.apply(this,arguments)}function ee(){return ee=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/model/".concat(o.id,"/delete"),{method:"GET"}));case 1:case"end":return t.stop()}},r)})),ee.apply(this,arguments)}function oe(){return Y.apply(this,arguments)}function Y(){return Y=u()(n()().mark(function r(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.request)("/api/model/list",{method:"POST",data:{}}));case 1:case"end":return i.stop()}},r)})),Y.apply(this,arguments)}function $(r){return ie.apply(this,arguments)}function ie(){return ie=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/publish/agent/list",{method:"POST",data:{kw:o}}));case 1:case"end":return t.stop()}},r)})),ie.apply(this,arguments)}function C(r){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime().mark(function r(o){var i;return _regeneratorRuntime().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return i=new FormData,i.append("file",o),Q.abrupt("return",request("/api/file/upload",{method:"POST",data:i}));case 3:case"end":return Q.stop()}},r)})),s.apply(this,arguments)}function F(r){return m.apply(this,arguments)}function m(){return m=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/config/add",{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),m.apply(this,arguments)}function O(r){return G.apply(this,arguments)}function G(){return G=u()(n()().mark(function r(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.request)("/api/system/user/notify/message/send",{method:"POST",data:o}));case 1:case"end":return t.stop()}},r)})),G.apply(this,arguments)}},32604:function(de,w,e){e.d(w,{E_:function(){return u},Fd:function(){return d},bv:function(){return y},tG:function(){return n}});var d=function(a){return a[a.User_Manage=0]="User_Manage",a[a.Publish_Audit=1]="Publish_Audit",a[a.Published_Manage=2]="Published_Manage",a[a.Global_Model_Manage=3]="Global_Model_Manage",a[a.System_Config=4]="System_Config",a[a.Theme_Config=5]="Theme_Config",a}({}),n=function(a){return a.Admin="Admin",a.User="User",a}({}),y=function(a){return a.Enabled="Enabled",a.Disabled="Disabled",a}({}),u=function(a){return a.Broadcast="Broadcast",a.Private="Private",a.System="System",a}({})},17701:function(de,w,e){var d=e(75271),n=e(82187),y=e.n(n),u=e(86169),a=e(18051),h=e(90273),H=e(61812),ae=e(60707),U=e(14810),re=e(62249),X=e(35610),k=e(357),S=e(23105),pe=e(6994),V=e(40904),me=e(67339),se=e(68031),fe=e(38237),B=e(55643),ve=e(49766),q=e(42759),he=e(86628),ee=function(C,s){var F={};for(var m in C)Object.prototype.hasOwnProperty.call(C,m)&&s.indexOf(m)<0&&(F[m]=C[m]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,m=Object.getOwnPropertySymbols(C);O<m.length;O++)s.indexOf(m[O])<0&&Object.prototype.propertyIsEnumerable.call(C,m[O])&&(F[m[O]]=C[m[O]]);return F};const oe="SECRET_COMBOBOX_MODE_DO_NOT_USE",Y=(C,s)=>{var F,m,O,G,r;const{prefixCls:o,bordered:i,className:t,rootClassName:Q,getPopupContainer:I,popupClassName:l,dropdownClassName:g,listHeight:J=256,placement:E,listItemHeight:P,size:T,disabled:b,notFoundContent:K,status:M,builtinPlacements:p,dropdownMatchSelectWidth:f,popupMatchSelectWidth:c,direction:A,style:z,allowClear:te,variant:le,dropdownStyle:ce,transitionName:ne,tagRender:j,maxCount:v,prefix:R,dropdownRender:x,popupRender:_,onDropdownVisibleChange:N,onOpenChange:L,styles:Z,classNames:D}=C,De=ee(C,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix","dropdownRender","popupRender","onDropdownVisibleChange","onOpenChange","styles","classNames"]),{getPopupContainer:Ue,getPrefixCls:Te,renderEmpty:Oe,direction:Be,virtual:we,popupMatchSelectWidth:Re,popupOverflow:Ne}=d.useContext(re.E_),{showSearch:Ze,style:We,styles:Ie,className:Fe,classNames:ge}=(0,re.dj)("select"),[,Ee]=(0,fe.ZP)(),Ke=P??Ee?.controlHeight,W=Te("select",o),Ve=Te(),ue=A??Be,{compactSize:$e,compactItemClassnames:Ge}=(0,se.ri)(W,ue),[ze,He]=(0,me.Z)("select",le,i),Pe=(0,S.Z)(W),[Xe,be,Ae]=(0,ve.Z)(W,Pe),ye=d.useMemo(()=>{const{mode:_e}=C;if(_e!=="combobox")return _e===oe?"combobox":_e},[C.mode]),Me=ye==="multiple"||ye==="tags",Ye=(0,he.Z)(C.suffixIcon,C.showArrow),Qe=(F=c??f)!==null&&F!==void 0?F:Re,Ce=((m=Z?.popup)===null||m===void 0?void 0:m.root)||((O=Ie.popup)===null||O===void 0?void 0:O.root)||ce,Je=_||x,ke=L||N,{status:qe,hasFeedback:je,isFormItemInput:et,feedbackIcon:tt}=d.useContext(V.aM),nt=(0,U.F)(qe,M);let Se;K!==void 0?Se=K:ye==="combobox"?Se=null:Se=Oe?.("Select")||d.createElement(X.Z,{componentName:"Select"});const{suffixIcon:at,itemIcon:rt,removeIcon:st,clearIcon:ot}=(0,q.Z)(Object.assign(Object.assign({},De),{multiple:Me,hasFeedback:je,feedbackIcon:tt,showSuffixIcon:Ye,prefixCls:W,componentName:"Select"})),it=te===!0?{clearIcon:ot}:te,lt=(0,a.Z)(De,["suffixIcon","itemIcon"]),ut=y()(((G=D?.popup)===null||G===void 0?void 0:G.root)||((r=ge?.popup)===null||r===void 0?void 0:r.root)||l||g,{[`${W}-dropdown-${ue}`]:ue==="rtl"},Q,ge.root,D?.root,Ae,Pe,be),Le=(0,pe.Z)(_e=>{var xe;return(xe=T??$e)!==null&&xe!==void 0?xe:_e}),ct=d.useContext(k.Z),dt=b??ct,pt=y()({[`${W}-lg`]:Le==="large",[`${W}-sm`]:Le==="small",[`${W}-rtl`]:ue==="rtl",[`${W}-${ze}`]:He,[`${W}-in-form-item`]:et},(0,U.Z)(W,nt,je),Ge,Fe,t,ge.root,D?.root,Q,Ae,Pe,be),mt=d.useMemo(()=>E!==void 0?E:ue==="rtl"?"bottomRight":"bottomLeft",[E,ue]),[ft]=(0,h.Cn)("SelectLike",Ce?.zIndex);return Xe(d.createElement(u.default,Object.assign({ref:s,virtual:we,showSearch:Ze},lt,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ie.root),Z?.root),We),z),dropdownMatchSelectWidth:Qe,transitionName:(0,H.m)(Ve,"slide-up",ne),builtinPlacements:(0,B.Z)(p,Ne),listHeight:J,listItemHeight:Ke,mode:ye,prefixCls:W,placement:mt,direction:ue,prefix:R,suffixIcon:at,menuItemSelectedIcon:rt,removeIcon:st,allowClear:it,notFoundContent:Se,className:pt,getPopupContainer:I||Ue,dropdownClassName:ut,disabled:dt,dropdownStyle:Object.assign(Object.assign({},Ce),{zIndex:ft}),maxCount:Me?v:void 0,tagRender:Me?j:void 0,dropdownRender:Je,onDropdownVisibleChange:ke})))},$=d.forwardRef(Y),ie=(0,ae.Z)($,"dropdownAlign");$.SECRET_COMBOBOX_MODE_DO_NOT_USE=oe,$.Option=u.Option,$.OptGroup=u.OptGroup,$._InternalPanelDoNotUseOrYouWillBeFired=ie,w.default=$}}]);})();
