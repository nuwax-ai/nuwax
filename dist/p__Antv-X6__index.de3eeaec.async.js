"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[4788,1664],{32544:function(Nn,Ke,s){s.d(Ke,{Z:function(){return Ge}});var Le=s(65774),W=s(94184),G=s.n(W),Se=s(67294),ke={"files-container":"files-container___Ji5El","file-box":"file-box___BRhVF"},V=s(85893),We=G().bind(ke),Q=function(Oe){var $=Oe.files;return(0,V.jsx)("div",{className:We(ke["files-container"]),children:$?.map(function(Be){return(0,V.jsxs)("div",{className:We(ke["file-box"],"flex","items-center"),children:[(0,V.jsx)("img",{src:Be.mimeType.includes("image/")?Be.fileUrl:Le,alt:""}),(0,V.jsx)("div",{className:We("flex-1","overflow-hide"),children:(0,V.jsx)("h4",{className:We("text-ellipsis"),children:Be.fileName})})]},Be.fileKey)})})},Ge=Q},66371:function(Nn,Ke,s){s.d(Ke,{Z:function(){return Be}});var Le=s(95141),W=s(66073),G=s(50888),Se=s(80882),ke=s(55241),V=s(94184),We=s.n(V),Q=s(67294),Ge={"run-success":"run-success___PpO4f","status-name":"status-name___WZ9ni",icon:"icon___H_CtF","pop-content":"pop-content___cUwx3",row:"row___ajvPI",summary:"summary___QUk2k"},c=s(85893),Oe=We().bind(Ge),$=function(Pe){var h=Pe.messageInfo,ve=h.finalResult,_=h.processingList,me=(0,Q.useMemo)(function(){return ve?((ve?.endTime-ve?.startTime)/1e3).toFixed(1):0},[ve]),be=function(l,J){var e=l-J;return e<1e3?"".concat(e,"ms"):"".concat((e/1e3).toFixed(1),"s")},re=(0,Q.useMemo)(function(){var le=_?.length||0;return le>0?_?.[le-1]:null},[_]);return(0,c.jsx)(ke.Z,{placement:"bottomLeft",styles:{body:{padding:0}},content:(0,c.jsxs)("div",{className:Oe(Ge["pop-content"]),children:[_?.map(function(le,l){return le.status!==Le.Xk.EXECUTING&&(0,c.jsxs)("div",{className:Oe(Ge.row,"flex","items-center"),children:[(0,c.jsx)(W.Z,{}),(0,c.jsx)("span",{className:Oe("flex-1","text-ellipsis"),children:"\u5DF2\u8C03\u7528 ".concat(le.name)}),(0,c.jsx)("span",{children:be(le.result.endTime,le.result.startTime)})]},l)}),(0,c.jsx)("span",{className:Oe(Ge.summary),children:"\u8FD0\u884C\u5B8C\u6BD5 ".concat(me,"s")})]}),arrow:!1,trigger:"hover",children:(0,c.jsx)("span",{className:Oe("cursor-pointer",Ge["run-success"]),children:h?.status===Le.ge.Loading||h?.status===Le.ge.Incomplete?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(G.Z,{}),re&&(0,c.jsxs)("span",{className:Oe(Ge["status-name"]),children:[re.status===Le.Xk.EXECUTING?"\u6B63\u5728\u8C03\u7528 ":"\u5DF2\u8C03\u7528 ",re.name]})]}):h?.status===Le.ge.Error?(0,c.jsx)("span",{children:"\u8FD0\u884C\u9519\u8BEF"}):(0,c.jsxs)("span",{children:["\u8FD0\u884C\u5B8C\u6BD5",(0,c.jsx)(Se.Z,{className:Oe(Ge.icon)})]})})})},Be=$},90740:function(Nn,Ke,s){s.d(Ke,{Z:function(){return _}});var Le=s(9783),W=s.n(Le),G=s(32544),Se=s(75216),ke=s(91120),V=s(95141),We=s(94184),Q=s.n(We),Ge=s(9980),c=s.n(Ge),Oe=s(67294),$={container:"container___pzeXE",avatar:"avatar___QNC2R",author:"author___eO9xt","inner-container":"inner-container___MiyBz","think-content":"think-content___NYHs_","chat-content":"chat-content___voyQR",user:"user___loHh3"},Be=s(66371),He=s(85893),Pe=Q().bind($),h=c()({html:!0,breaks:!0,linkify:!0}),ve=function(be){var re,le=be.className,l=be.contentClassName,J=be.messageInfo;return(0,He.jsx)("div",{className:Pe($.container,"flex",le),children:(0,He.jsxs)("div",{className:Pe("flex-1"),children:[!!(J!=null&&(re=J.attachments)!==null&&re!==void 0&&re.length)&&(0,He.jsx)(G.Z,{files:J?.attachments}),(0,He.jsxs)(Se.Z,{condition:J?.role!==ke.hZ.USER,children:[J.status!==V.ge.Complete&&(0,He.jsx)(Se.Z,{condition:!!(J!=null&&J.status),children:(0,He.jsx)(Be.Z,{messageInfo:J})}),(!!(J!=null&&J.think)||!!(J!=null&&J.text))&&(0,He.jsxs)("div",{className:Pe($["inner-container"],l),children:[!!(J!=null&&J.think)&&!!h.render(J.think)&&(0,He.jsx)("div",{className:Pe($["think-content"],"radius-6","w-full"),dangerouslySetInnerHTML:{__html:h.render(J.think)}}),!!(J!=null&&J.text)&&(0,He.jsx)("div",{className:Pe($["chat-content"],"radius-6","w-full",W()({},$.typing,J.status===V.ge.Incomplete||J.status===V.ge.Loading)),dangerouslySetInnerHTML:{__html:h.render(J.text)}})]})]})]})})},_=ve},58594:function(Nn,Ke,s){s.d(Ke,{Z:function(){return Cn}});var Le=s(97857),W=s.n(Le),G=s(15009),Se=s.n(G),ke=s(99289),V=s.n(ke),We=s(5574),Q=s.n(We),Ge=s(35044),c=s(90740),Oe=s(87025),$=s(85576),Be=s(85804),He=s(25278),Pe=s(94184),h=s.n(Pe),ve=s(67294),_=s(39902),me=s(88773),be={btn:"btn___JOPmv","chat-wrapper":"chat-wrapper___PS6Tu","replace-btn":"replace-btn___AEijv",footer:"footer___MV0En","chat-input":"chat-input___wgxG5",input:"input___WoXKg","icon-box":"icon-box___cHWvw","send-image":"send-image___kjNJy"},re=s(85893),le=h().bind(be),l=function(_e){var Qe,oe,en=_e.title,rn=_e.open,de=_e.onCancel,fe=_e.onReplace,Xe=_e.codeLanguage,Te=(0,ve.useState)(""),sn=Q()(Te,2),Fn=sn[0],tn=sn[1],fn=(0,_.useModel)("assistantOptimize"),Fe=fn.messageList,yn=fn.setMessageList,mn=fn.onMessageSend,Tn=fn.messageViewRef,Dn=fn.allowAutoScrollRef,In=fn.resetInit,nn=(0,ve.useState)(""),$e=Q()(nn,2),ae=$e[0],ge=$e[1];(0,ve.useEffect)(function(){return ge((0,me.Z)()),function(){In()}},[]),(0,ve.useEffect)(function(){var De=Tn.current;if(De){var he=function(){var Ye=De.scrollTop,En=De.scrollHeight,Kn=De.clientHeight;Ye+Kn<En?Dn.current=!1:Dn.current=!0};return De.addEventListener("scroll",he),function(){De.removeEventListener("scroll",he)}}},[]);var Ae=function(){var De=V()(Se()().mark(function he(){var we;return Se()().wrap(function(En){for(;;)switch(En.prev=En.next){case 0:yn([]),Fn&&(tn(""),we={requestId:ae,prompt:Fn,codeLanguage:Xe},mn(we,Oe.L.code));case 2:case"end":return En.stop()}},he)}));return function(){return De.apply(this,arguments)}}(),je=function(he){he.preventDefault();var we=he.target,Ye=we.value,En=we.selectionStart,Kn=we.selectionEnd;if(he.nativeEvent.keyCode===13&&(he.nativeEvent.shiftKey||he.nativeEvent.ctrlKey)){var lt=Ye.slice(0,En)+`
`+Ye.slice(Kn);tn(lt)}else if(he.nativeEvent.keyCode===13&&Ye.trim()){var ot={requestId:ae,prompt:Fn,codeLanguage:Xe};mn(ot,Oe.L.code),tn("")}};return(0,re.jsxs)($.Z,{title:en,open:rn,onCancel:function(he){yn([]),de?.(he)},mask:!1,maskClosable:!1,footer:null,children:[(0,re.jsx)("div",{ref:Tn,className:le(be["chat-wrapper"],"flex-1"),children:Fe?.length>0?(0,re.jsx)(re.Fragment,{children:Fe?.map(function(De,he){return(0,re.jsx)(c.Z,{ifShowReplace:!0,onReplace:fe,messageInfo:De},he)})}):(0,re.jsx)("div",{})}),Fe?.length>0?(0,re.jsxs)("div",{className:le("flex"),children:[(0,re.jsx)(Be.ZP,{className:le(be["replace-btn"],be.btn),loading:(Fe==null||(Qe=Fe[Fe?.length-1])===null||Qe===void 0?void 0:Qe.status)!=="complete",disabled:(Fe==null||(oe=Fe[Fe?.length-1])===null||oe===void 0?void 0:oe.status)!=="complete",onClick:function(){var he;return fe?.(Fe==null||(he=Fe[Fe?.length-1])===null||he===void 0?void 0:he.text)},children:"\u66FF\u6362"}),(0,re.jsx)(Be.ZP,{onClick:function(he){yn([]),de?.(he)},className:le(be.btn,"ml-10 "),children:"\u9000\u51FA"})]}):(0,re.jsx)("div",{}),(0,re.jsx)("div",{className:le(be.footer,"flex","items-center"),children:(0,re.jsxs)("div",{className:le(be["chat-input"],"flex","items-center","w-full"),children:[(0,re.jsx)(He.Z.TextArea,{value:Fn,onChange:function(he){return tn(he.target.value)},rootClassName:be.input,onPressEnter:je,placeholder:"\u8BF7\u63CF\u8FF0\u4F60\u7684\u5177\u4F53\u4E1A\u52A1\u9700\u6C42\uFF0C\u903B\u8F91\u5C3D\u91CF\u63CF\u8FF0\u8BE6\u7EC6",autoSize:{minRows:1,maxRows:3}}),(0,re.jsx)("img",{onClick:function(){return Ae()},className:le(be["send-image"],"cursor-pointer"),src:Ge,alt:""})]})})]})},J=l,e=s(32909),cn=s(30881),xn=s(63764),wn=s(99859),C=s(75763),on=s(55826),bn=s(75216),vn=function(_e){var Qe=_e.value,oe=Qe===void 0?"":Qe,en=_e.className,rn=_e.onChange,de=_e.height,fe=de===void 0?"400px":de,Xe=_e.codeLanguage,Te=_e.minimap,sn=Te===void 0?!1:Te,Fn=_e.form,tn=_e.codeOptimizeVisible,fn=tn===void 0?!0:tn,Fe=_e.readOnly,yn=Fe===void 0?!1:Fe,mn=(0,ve.useState)(!1),Tn=Q()(mn,2),Dn=Tn[0],In=Tn[1],nn=(0,ve.useState)(!1),$e=Q()(nn,2),ae=$e[0],ge=$e[1],Ae=(0,_.useModel)("model"),je=Ae.testRun;if((0,ve.useEffect)(function(){xn._m.config({monaco:on,paths:{vs:"/vs"}});var we=function(){var Ye=V()(Se()().mark(function En(){var Kn,lt,ot;return Se()().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:return Pn.prev=0,Pn.next=3,s.e(7287).then(s.bind(s,37287));case 3:return Kn=Pn.sent,lt=Kn.conf,ot=Kn.language,Pn.next=8,xn._m.init();case 8:on.languages.register({id:"python"}),on.languages.setMonarchTokensProvider("python",ot),on.languages.setLanguageConfiguration("python",lt),window.MonacoEnvironment={getWorkerUrl:function(Zn,Ve){return Ve==="json"?"/vs/json.worker.js":Ve==="typescript"||Ve==="javascript"||Ve==="python"?"/vs/ts.worker.js":"/vs/editor.worker.js"}},In(!0),Pn.next=18;break;case 15:Pn.prev=15,Pn.t0=Pn.catch(0),console.error("Failed to initialize Monaco Editor:",Pn.t0);case 18:case"end":return Pn.stop()}},En,null,[[0,15]])}));return function(){return Ye.apply(this,arguments)}}();we()},[]),!Dn)return(0,re.jsx)("div",{children:"Loading editor..."});var De=function(Ye){rn&&rn(Ye||"")},he=function(){var Ye={selectOnLineNumbers:!0,folding:!0,automaticLayout:!0,minimap:{enabled:sn},readOnly:yn};return Xe.toLowerCase()==="json"?W()(W()({},Ye),{},{quickSuggestions:!1,suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",tabCompletion:"off",wordBasedSuggestions:!1,parameterHints:{enabled:!1},hover:{enabled:!1},snippetSuggestions:"none"}):Ye};return(0,re.jsxs)(re.Fragment,{children:[Fn?(0,re.jsx)(wn.Z.Item,{noStyle:!0,name:Fn?.getFieldValue("codeLanguage")===cn.vQ.JavaScript?"codeJavaScript":"codePython",children:(0,re.jsx)(xn.ZP,{className:en,height:fe,language:Xe.toLowerCase(),theme:"vs-dark",value:oe,onChange:De,options:he()})}):(0,re.jsx)(xn.ZP,{className:en,height:fe,language:Xe.toLowerCase(),theme:"vs-dark",value:oe,onChange:De,options:he()}),(0,re.jsxs)(bn.Z,{condition:fn&&!yn,children:[(0,re.jsx)(C.Z,{shape:"circle",type:"primary",style:{insetInlineEnd:94,display:je?"none":"block"},icon:(0,re.jsx)(e.jY,{}),tooltip:"\u4EE3\u7801\u52A9\u624B",onClick:function(){ge(!0)}}),(0,re.jsx)(J,{title:"\u4EE3\u7801\u52A9\u624B",open:ae,codeLanguage:Xe,onCancel:function(){ge(!1)},onReplace:function(Ye){if(Ye){var En=Ye;En.includes("```")&&(En=En.replace(/```/g,"")),rn?.(En||""),ge(!1)}}})]})]})},Cn=vn},75216:function(Nn,Ke,s){var Le=s(67294),W=s(85893),G=function(ke){var V=ke.children,We=ke.condition;return We?(0,W.jsx)(W.Fragment,{children:V}):null};Ke.Z=G},86647:function(Nn,Ke,s){var Le=s(19632),W=s.n(Le),G=s(5574),Se=s.n(G),ke=s(24082),V=s(45605),We=s(42952),Q=s(55241),Ge=s(66309),c=s(42834),Oe=s(25278),$=s(50136),Be=s(67294),He=s(39902),Pe=s(48256),h=s(85893),ve=function(re){if(!re)return 0;for(var le=0,l=0;l<re.length;l++)/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/.test(re[l])?le+=2:le+=1;return le},_=function(re,le){if(!re)return"";for(var l=0,J="",e=0;e<re.length;e++){var cn=re[e],xn=/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/.test(cn)?2:1;if(l+xn>le)break;J+=cn,l+=xn}return J.length<re.length&&(J+="..."),J},me=function(re){var le=re.placeholder,l=re.form,J=re.fieldName,e=re.style,cn=re.isDisabled,xn=cn===void 0?!1:cn,wn=re.referenceType,C=wn===void 0?"Reference":wn,on=re.isLoop,bn=re.value,vn=re.onChange,Cn=(0,He.useModel)("workflow"),pn=Cn.referenceList,_e=Cn.getValue,Qe=Cn.getLoopValue,oe=Cn.setIsModified,en=(0,Be.useState)(""),rn=Se()(en,2),de=rn[0],fe=rn[1],Xe=(0,Be.useState)([bn||""]),Te=Se()(Xe,2),sn=Te[0],Fn=Te[1],tn=(0,Be.useState)(300),fn=Se()(tn,2),Fe=fn[0],yn=fn[1];(0,Be.useEffect)(function(){var ae=function(){var Ae=window.innerHeight,je=document.querySelector(".input-or-reference");if(je){var De=je.getBoundingClientRect(),he=Ae-De.top-20;yn(Math.min(Math.max(he,150),400))}};return ae(),window.addEventListener("resize",ae),window.addEventListener("scroll",ae),function(){window.removeEventListener("resize",ae),window.removeEventListener("scroll",ae)}},[]);var mn=function(ge,Ae){if(J&&l){var je=J.slice(0,-1);if(l.setFieldValue([].concat(W()(je),["bindValueType"]),Ae),Ae==="Reference"){var De,he=pn==null||(De=pn.argMap)===null||De===void 0||(De=De[ge])===null||De===void 0?void 0:De.dataType;l.setFieldValue([].concat(W()(je),["dataType"]),he||"String"),l.setFieldValue(J,ge);var we=l.getFieldValue([].concat(W()(je),["name"]));(!we||xn)&&l.setFieldValue([].concat(W()(je),["name"]),pn.argMap[ge].name)}else l.setFieldValue([].concat(W()(je),["dataType"]),"String"),l.setFieldValue(J,ge)}oe(!0)};(0,Be.useEffect)(function(){if(J&&l){var ae=l.getFieldValue(J),ge=l.getFieldValue([].concat(W()(J.slice(0,-1)),["bindValueType"]));if(ge==="Reference"){var Ae=ae&&pn.argMap[ae];fe(Ae?on?Qe(ae):_e(ae):"")}else fe("")}},[l?.getFieldsValue(),pn.argMap]);var Tn=function(){mn("","Input"),fe("")},Dn=function(ge){return(0,h.jsxs)("div",{className:"tree-custom-title-style",children:[(0,h.jsx)("span",{title:"",children:ge.name}),(0,h.jsx)(Q.Z,{content:ge.description||"\u6682\u65E0\u63CF\u8FF0",children:(0,h.jsx)(V.Z,{title:"",style:{marginLeft:"4px",fontSize:12}})}),(0,h.jsx)(Ge.Z,{color:"#C9CDD4",style:{marginLeft:"8px",fontSize:10,lineHeight:"14px"},children:ge.dataType})]})},In=function(ge){!ge||!ge.length||(mn(ge[0],"Reference"),fe(_e(ge[0])),Fn(ge))},nn=function(ge){if(ge&&ge.length){var Ae=!1;return ge.map(function(je){var De=je?.outputArgs.some(function(he){var we,Ye;return(he==null||(we=he.children)===null||we===void 0?void 0:we.length)&&(he==null||(Ye=he.children)===null||Ye===void 0?void 0:Ye.length)>0});return{key:je.id,label:ve(je.name)>16?_(je.name,16):je.name,icon:(0,ke.qM)(je.type),popupClassName:"inputOrReferencePopup",children:je.outputArgs?[{key:"".concat(je.id,"-tree-select"),label:(0,h.jsx)("div",{style:{paddingTop:12,paddingRight:12,paddingBottom:8},onClick:function(we){Ae||(we.stopPropagation(),we.preventDefault())},children:(0,h.jsx)(c.Z,{onSelect:function(we){In(we),Ae=!0},defaultExpandAll:!0,treeData:je.outputArgs,fieldNames:{title:"name",key:"key",children:"children"},titleRender:Dn,defaultSelectedKeys:sn,blockNode:!0,className:"custom-tree-style ".concat(De?"":"custom-tree-no-children-style"),style:{maxHeight:"".concat(Fe,"px"),overflow:"auto"}})})}]:void 0}})}else return[{key:"no-data",popupClassName:"inputOrReferencePopup",label:(0,h.jsx)("div",{style:{padding:8,color:"red"},children:"\u672A\u6DFB\u52A0\u4E0A\u7EA7\u8282\u70B9\u8FDE\u7EBF\u6216\u4E0A\u7EA7\u8282\u70B9\u65E0\u53C2\u6570"}),disabled:!0}]},$e=function(){return nn(on?pn.innerPreviousNodes:pn.previousNodes)};return(0,h.jsxs)("div",{className:"input-or-reference dis-sb",style:e,children:[C==="Reference"||C===null?de?(0,h.jsx)(Ge.Z,{closable:!0,onClose:Tn,className:"input-or-reference-tag text-ellipsis",color:"#C9CDD4",children:de.length>10?(0,h.jsx)(Q.Z,{content:de,placement:"topRight",children:(0,h.jsx)("span",{className:"tag-text-style",children:de})}):(0,h.jsx)("span",{className:"tag-text-style",children:de})}):(0,h.jsx)(Oe.Z,{placeholder:le||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:xn,onChange:function(ge){vn?.(ge.target.value),mn(ge.target.value,"Input")}}):(0,h.jsx)(Oe.Z,{placeholder:le||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:xn,value:bn,onChange:function(ge){vn?.(ge.target.value),mn(ge.target.value,"Input")}}),(0,h.jsx)($.Z,{menu:{items:$e(),style:{maxHeight:328}},trigger:["click"],overlayStyle:{minWidth:200},placement:"bottomRight",children:(0,h.jsx)(We.Z,{style:{cursor:"pointer"},className:"input-reference-icon-style"})})]})};Ke.Z=me},17176:function(Nn,Ke,s){s.d(Ke,{Z:function(){return xn}});var Le=s(9783),W=s.n(Le),G=s(5574),Se=s.n(G),ke=s(61474),V=s(13969),We=s(91120),Q=s(95141),Ge=s(3622),c=s(11475),Oe=s(83062),$=s(42075),Be=s(25278),He=s(34041),Pe=s(55241),h=s(59637),ve=s(79368),_=s(85804),me=s(94184),be=s.n(me),re=s(96486),le=s(67294),l={container:"container___oFiVs","params-td":"params-td___jx0pi","params-name":"params-name___sE7JM",desc:"desc___Gm1Qx",select:"select___psDV2",footer:"footer___y2QiJ","btn-disabled":"btn-disabled___zbgUs"},J=s(85893),e=be().bind(l),cn=function(C){var on=C.inputArgBindConfigs,bn=C.variables,vn=C.onSaveSet,Cn=C.style,pn=Cn===void 0?{}:Cn,_e=C.scroll,Qe=_e===void 0?{y:480}:_e,oe=(0,le.useState)([]),en=Se()(oe,2),rn=en[0],de=en[1],fe=(0,le.useState)([]),Xe=Se()(fe,2),Te=Xe[0],sn=Xe[1],Fn=(0,le.useState)(!1),tn=Se()(Fn,2),fn=tn[0],Fe=tn[1];(0,le.useEffect)(function(){if(on!=null&&on.length){Fe(!1),sn(on);var nn=(0,Ge.kS)(on||[]);de(nn)}else Fe(!0),sn([]),de([])},[on]);var yn=(0,le.useMemo)(function(){return bn?.map(function(nn){return{label:nn.name,value:nn.name}})||[]},[bn]),mn=function($e,ae,ge){var Ae=(0,re.cloneDeep)(Te)||[],je=(0,Ge.mG)(Ae,$e,ae,ge);sn(je)},Tn=function($e){var ae;return Q.Gi.Object===$e.dataType||Q.Gi.Array_Object===$e.dataType||((ae=$e.dataType)===null||ae===void 0?void 0:ae.includes("Array"))||!$e.enable},Dn=[{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"name",key:"name",className:"flex items-center table-params-name-td",render:function($e,ae){var ge;return(0,J.jsxs)("div",{className:e("flex","flex-col",l["params-td"]),children:[(0,J.jsx)("span",{className:e(l["params-name"],"text-ellipsis-2"),children:ae.name}),(0,J.jsx)(Oe.Z,{title:((ge=ae.description)===null||ge===void 0?void 0:ge.length)>10?ae.description:"",placement:"top",children:(0,J.jsx)("span",{className:e("text-ellipsis",l.desc),children:ae.description})})]})}},{title:"\u53C2\u6570\u7C7B\u578B",dataIndex:"dataType",key:"dataType",width:120,render:function($e){return(0,J.jsx)("div",{className:e("h-full","flex","items-center"),children:$e})}},{title:"\u5FC5\u586B",dataIndex:"require",key:"require",width:85,render:function($e){return(0,J.jsx)("div",{className:e("h-full","flex","items-center"),children:$e?"\u5FC5\u586B":"\u975E\u5FC5\u586B"})}},{title:"\u9ED8\u8BA4\u503C",key:"default",width:232,render:function($e,ae){return(0,J.jsx)("div",{className:e("h-full","flex","items-center"),children:(0,J.jsxs)($.Z.Compact,{block:!0,children:[(0,J.jsx)(ke.Z,{className:e(l.select),disabled:Tn(ae),value:ae.bindValueType,onChange:function(Ae){return mn(ae.key,"bindValueType",Ae)},options:V.lt}),ae.bindValueType===We.Oy.Input?(0,J.jsx)(Be.Z,{rootClassName:e(l.select),placeholder:"\u8BF7\u586B\u5199",disabled:Tn(ae),value:ae.bindValue,onChange:function(Ae){return mn(ae.key,"bindValue",Ae.target.value)}}):(0,J.jsx)(He.Z,{placeholder:"\u8BF7\u9009\u62E9",disabled:Tn(ae),rootClassName:e(l.select),popupMatchSelectWidth:!1,value:ae.bindValue||null,onChange:function(Ae){return mn(ae.key,"bindValue",Ae)},options:yn})]})})}},{title:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("span",{children:"\u5F00\u542F"}),(0,J.jsx)(Pe.Z,{content:"\u5F53\u53C2\u6570\u8BBE\u7F6E\u4E3A\u5173\u95ED\u65F6\uFF0C\u5927\u6A21\u578B\u5C06\u65E0\u6CD5\u770B\u5230\u8BE5\u53C2\u6570\u3002\u5982\u679C\u8BE5\u53C2\u6570\u8BBE\u7F6E\u4E86\u9ED8\u8BA4\u503C\u5E76\u4E14\u4E0D\u53EF\u89C1\uFF0C\u5219\u5728\u8C03\u7528\u65F6\uFF0C\u667A\u80FD\u4F53\u4F1A\u9ED8\u8BA4\u53EA\u4F7F\u7528\u8FD9\u4E2A\u8BBE\u5B9A\u503C",styles:{body:{width:"300px"}},children:(0,J.jsx)(c.Z,{className:"ml-12"})})]}),dataIndex:"enable",key:"enable",width:100,align:"center",render:function($e,ae){return(0,J.jsx)("div",{className:e("h-full","flex","items-center"),children:(0,J.jsx)(Oe.Z,{title:ae.require&&!ae.bindValue&&"\u6B64\u53C2\u6570\u662F\u5FC5\u586B\u53C2\u6570\uFF0C\u586B\u5199\u9ED8\u8BA4\u503C\u540E\uFF0C\u6B64\u5F00\u5173\u53EF\u7528",children:(0,J.jsx)(h.Z,{disabled:ae.require&&!ae.bindValue,checked:ae.enable,onChange:function(Ae){return mn(ae.key,"enable",Ae)}})})})}}],In=function(){var $e={inputArgBindConfigs:Te};vn($e)};return(0,J.jsxs)("div",{className:e(l.container,"flex","flex-col"),style:pn,children:[(0,J.jsx)(ve.Z,{className:e("mb-16","flex-1"),columns:Dn,dataSource:Te,pagination:!1,virtual:!0,scroll:Qe,expandable:{childrenColumnName:"subArgs",defaultExpandAllRows:!0,expandedRowKeys:rn,expandIcon:function(){return null}}}),(0,J.jsx)("footer",{className:e(l.footer),children:(0,J.jsx)(_.ZP,{type:"primary",onClick:In,className:e(W()({},l["btn-disabled"],fn)),disabled:fn,children:"\u4FDD\u5B58"})})]})},xn=cn},4735:function(Nn,Ke,s){s.d(Ke,{Z:function(){return le}});var Le=s(15009),W=s.n(Le),G=s(99289),Se=s.n(G),ke=s(5574),V=s.n(ke),We=s(35044),Q=s(90740),Ge=s(87025),c=s(85576),Oe=s(85804),$=s(25278),Be=s(94184),He=s.n(Be),Pe=s(67294),h=s(39902),ve=s(88773),_={btn:"btn___ru2xz","chat-wrapper":"chat-wrapper___GBMoh","replace-btn":"replace-btn___Xl1q3",footer:"footer___Ij_cp","chat-input":"chat-input___lsiAA",input:"input___dR5Yj","icon-box":"icon-box___aXEus","send-image":"send-image___L_DDB","no-hover-bg":"no-hover-bg___mz7Mk"},me=s(85893),be=He().bind(_),re=function(J){var e,cn,xn=J.title,wn=J.open,C=J.onCancel,on=J.onReplace,bn=J.defaultValue,vn=J.targetId,Cn=J.type,pn=Cn===void 0?Ge.U.AGENT:Cn,_e=(0,Pe.useState)(""),Qe=V()(_e,2),oe=Qe[0],en=Qe[1],rn=(0,h.useModel)("assistantOptimize"),de=rn.messageList,fe=rn.setMessageList,Xe=rn.onMessageSend,Te=rn.messageViewRef,sn=rn.allowAutoScrollRef,Fn=rn.resetInit,tn=(0,Pe.useState)(""),fn=V()(tn,2),Fe=fn[0],yn=fn[1],mn=(0,Pe.useState)(!1),Tn=V()(mn,2),Dn=Tn[0],In=Tn[1],nn=(0,Pe.useCallback)(function(){fe([])},[]),$e=(0,Pe.useCallback)(function(Ae){nn(),C?.(Ae)},[]);(0,Pe.useEffect)(function(){return yn((0,ve.Z)()),function(){Fn(),nn()}},[]),(0,Pe.useEffect)(function(){var Ae=Te.current;if(Ae){var je=function(){var he=Ae.scrollTop,we=Ae.scrollHeight,Ye=Ae.clientHeight;he+Ye<we?sn.current=!1:sn.current=!0};return Ae.addEventListener("scroll",je),function(){Ae.removeEventListener("scroll",je)}}},[]);var ae=function(){var Ae=Se()(W()().mark(function je(De){var he;return W()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:fe([]),en(""),he={requestId:Fe,prompt:De||oe,type:pn,id:vn},Xe(he,Ge.L.prompt);case 4:case"end":return Ye.stop()}},je)}));return function(De){return Ae.apply(this,arguments)}}(),ge=function(je){je.preventDefault();var De=je.target,he=De.value,we=De.selectionStart,Ye=De.selectionEnd;if(je.nativeEvent.keyCode===13&&(je.nativeEvent.shiftKey||je.nativeEvent.ctrlKey)){var En=he.slice(0,we)+`
`+he.slice(Ye);en(En)}else if(je.nativeEvent.keyCode===13&&he.trim()){var Kn={requestId:Fe,prompt:oe,type:pn,id:vn};Xe(Kn,Ge.L.prompt),en("")}};return(0,Pe.useEffect)(function(){!oe||oe.trim()===""?In(!0):In(!1)},[oe]),(0,me.jsxs)(c.Z,{title:xn,open:wn,onCancel:$e,maskClosable:!1,footer:null,children:[(0,me.jsx)("div",{ref:Te,className:be(_["chat-wrapper"],"flex-1"),children:de?.length>0&&(0,me.jsx)(me.Fragment,{children:de?.map(function(Ae,je){return(0,me.jsx)(Q.Z,{onReplace:on,messageInfo:Ae},je)})})}),de?.length>0?(0,me.jsxs)("div",{className:be("flex"),children:[(0,me.jsx)(Oe.ZP,{className:be(_["replace-btn"],_.btn),loading:(de==null||(e=de[de?.length-1])===null||e===void 0?void 0:e.status)!=="complete",disabled:(de==null||(cn=de[de?.length-1])===null||cn===void 0?void 0:cn.status)!=="complete",onClick:function(){var je;return on?.(de==null||(je=de[de?.length-1])===null||je===void 0?void 0:je.text)},children:"\u66FF\u6362"}),(0,me.jsx)(Oe.ZP,{onClick:$e,className:be(_.btn,"ml-10 "),children:"\u9000\u51FA"})]}):(0,me.jsx)(Oe.ZP,{type:"default",className:be(_.btn),onClick:function(){return ae(bn||"\u4E00\u4E2A\u80FD\u4E3A\u4F60\u63D0\u4F9B\u5DE5\u4F5C\u5E2E\u52A9\u548C\u5EFA\u8BAE\u7684\u667A\u80FD\u673A\u5668\u4EBA")},children:"\u81EA\u52A8\u4F18\u5316"}),(0,me.jsx)("div",{className:be(_.footer,"flex","items-center"),children:(0,me.jsxs)("div",{className:be(_["chat-input"],"flex","items-center","w-full"),children:[(0,me.jsx)($.Z.TextArea,{value:oe,onChange:function(je){return en(je.target.value)},rootClassName:_.input,onPressEnter:ge,placeholder:"\u8BF7\u63CF\u8FF0\u4F60\u7684\u63D0\u793A\u8BCD\u9700\u6C42\uFF0C\u6BD4\u5982\u89D2\u8272\u5B9A\u4E49\u3001\u6280\u80FD\u8981\u6C42\u7B49",autoSize:{minRows:1,maxRows:3}}),(0,me.jsx)(Oe.ZP,{type:"text",onClick:function(){return ae()},disabled:Dn,className:be(_["no-hover-bg"]),icon:(0,me.jsx)("img",{className:be(_["send-image"]),src:We,alt:""}),size:"small"})]})})]})},le=re},48459:function(Nn,Ke,s){s.d(Ke,{Q:function(){return me}});var Le=s(97857),W=s.n(Le),G=s(5574),Se=s.n(G),ke=s(24082),V=s(45605),We=s(48689),Q=s(66309),Ge=s(85576),c=s(85804),Oe=s(55241),$=s(25278),Be=s(59637),He=s(67294),Pe=s(89118),h=s(85893),ve=function(re){var le=re.params;return(0,h.jsx)(h.Fragment,{children:(le||[]).map(function(l){return(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"dis-left",children:[(0,h.jsx)("span",{className:"mr-16",children:l.name}),(0,h.jsx)(Q.Z,{color:"#C9CDD4",children:l.dataType})]}),(0,h.jsx)("p",{className:"skill-params-description",children:l.description})]},l.name)})})},_=function(re){var le,l=re.open,J=re.onCancel,e=re.params,cn=re.onConfirm,xn=(0,He.useState)("input"),wn=Se()(xn,2),C=wn[0],on=wn[1],bn=(0,He.useState)(e),vn=Se()(bn,2),Cn=vn[0],pn=vn[1],_e=function(){cn(Cn),J()};(0,He.useEffect)(function(){pn(e)},[e?.inputArgBindConfigs]);var Qe=function(en,rn){pn(rn==="input"?function(de){var fe;return W()(W()({},de),{},{inputArgBindConfigs:(fe=de.inputArgBindConfigs)===null||fe===void 0?void 0:fe.map(function(Xe){return Xe.name===en.name?en:Xe})})}:function(de){var fe;return W()(W()({},de),{},{outputArgBindConfigs:(fe=de.outputArgBindConfigs)===null||fe===void 0?void 0:fe.map(function(Xe){return Xe.name===en.name?en:Xe})})})};return(0,h.jsx)(Ge.Z,{keyboard:!1,maskClosable:!1,open:l,centered:!0,onCancel:function(){return J()},className:"skill-dispose-modal-style",width:800,footer:function(){return(0,h.jsx)(c.ZP,{onClick:_e,children:"\u4FDD\u5B58"})},children:(0,h.jsxs)("div",{className:"skill-dispose-container flex ",children:[(0,h.jsxs)("div",{className:"skill-dispose-left",children:[(0,h.jsx)("div",{className:"skill-dispose-left-title",children:"\u8BBE\u7F6E"}),(0,h.jsx)("p",{className:"skill-menu-style ".concat(C==="input"?"select-menu":""),onClick:function(){return on("input")},children:"\u914D\u7F6E\u8F93\u5165\u53C2\u6570"})]}),(0,h.jsx)("div",{className:"skill-dispose-right",children:C==="input"&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"dis-sb content-item-style content-title-style",children:[(0,h.jsx)("span",{className:"flex-1",children:"\u53C2\u6570\u540D\u79F0"}),(0,h.jsx)("span",{className:"content-center-item-style",children:"\u9ED8\u8BA4\u503C"}),(0,h.jsxs)("p",{className:"content-right-item-style flex",children:[(0,h.jsx)("span",{children:"\u5F00\u542F"}),(0,h.jsx)(Oe.Z,{content:"\u5F53\u53C2\u6570\u8BBE\u7F6E\u4E3A\u4E0D\u53EF\u89C1\u65F6\uFF0C\u5927\u6A21\u578B\u5C06\u65E0\u6CD5\u770B\u5230\u8BE5\u53C2\u6570\u3002\u5982\u679C\u8BE5\u53C2\u6570\u8BBE\u7F6E\u4E86\u9ED8\u8BA4\u503C\u5E76\u4E14\u4E0D\u53EF\u89C1\uFF0C\u5219\u5728\u8C03\u7528\u63D2\u4EF6\u65F6\uFF0C\u667A\u80FD\u4F53\u4F1A\u9ED8\u8BA4\u53EA\u4F7F\u7528\u8FD9\u4E2A\u8BBE\u5B9A\u503C",styles:{body:{width:"300px"}},children:(0,h.jsx)(V.Z,{className:"ml-12"})})]})]}),Cn==null||(le=Cn.outputArgBindConfigs)===null||le===void 0?void 0:le.map(function(oe){var en;return(0,h.jsxs)("div",{className:"dis-sb content-item-style",children:[(0,h.jsx)("div",{className:"flex-1",children:(0,h.jsxs)("p",{className:"flex",children:[(0,h.jsx)("span",{className:"mr-16",children:oe.name}),(0,h.jsx)(Q.Z,{color:"#C9CDD4",children:oe.dataType})]})}),(0,h.jsx)($.Z,{className:"content-center-item-style",value:(en=oe.bindValue)!==null&&en!==void 0?en:"",onChange:function(de){Qe(W()(W()({},oe),{},{bindValue:de.target.value}),"input")}}),(0,h.jsx)("p",{className:"content-right-item-style",children:(0,h.jsx)(Be.Z,{size:"small",checked:oe.enable,onChange:function(de){Qe(W()(W()({},oe),{},{enable:de}),"input")}})})]},oe.name)})]})})]})})},me=function(re){var le=re.params,l=re.disabled,J=l===void 0?!1:l,e=re.removeItem,cn=re.modifyItem,xn=(0,He.useState)(null),wn=Se()(xn,2),C=wn[0],on=wn[1],bn=(0,He.useState)(!1),vn=Se()(bn,2),Cn=vn[0],pn=vn[1],_e=(0,He.useState)(!1),Qe=Se()(_e,2),oe=Qe[0],en=Qe[1],rn=function(Xe){e(Xe)},de=function(Xe){cn(Xe)};return(0,h.jsxs)("div",{className:"skill-list",children:[le.map(function(fe){return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"skill-item-style dis-left",style:{opacity:J?.5:1,cursor:J?"not-allowed":"pointer"},onMouseEnter:function(){on(fe),en(!0)},onMouseLeave:function(){return en(!1)},children:[(0,h.jsx)("img",{src:fe.icon===""?(0,ke.Pk)(fe.targetType):fe.icon,alt:"",className:"skill-item-icon"}),(0,h.jsxs)("div",{className:"skill-item-content-style",children:[(0,h.jsx)("div",{className:"skill-item-title-style",children:fe.name}),(0,h.jsx)("div",{className:"skill-item-desc-style",children:fe.description})]}),(C?.typeId&&C?.typeId===fe?.typeId||C?.knowledgeBaseId&&C?.knowledgeBaseId===fe?.knowledgeBaseId)&&oe&&(0,h.jsx)("div",{className:"mask-layer-style",children:(0,h.jsxs)("div",{className:"skill-item-dispose-style",style:{color:"#fff",backgroundColor:"transparent"},children:[fe.outputArgBindConfigs&&fe.outputArgBindConfigs.length&&(0,h.jsx)(Oe.Z,{content:(0,h.jsx)(ve,{params:fe.outputArgBindConfigs}),trigger:"hover",children:(0,h.jsx)(V.Z,{className:"white"})}),!J&&(0,h.jsx)(Oe.Z,{content:"\u79FB\u9664",trigger:"hover",children:(0,h.jsx)(We.Z,{className:"ml-12  white",onClick:function(){return rn(fe)}})})]})})]})},"skill-".concat(fe.type,"-").concat(fe.typeId||fe.knowledgeBaseId,"-").concat(fe.name))}),(0,h.jsx)(_,{open:Cn,onCancel:function(){return pn(!1)},params:C,onConfirm:de})]})}},71437:function(Nn,Ke,s){s.d(Ke,{Z:function(){return Oe}});var Le=s(95141),W=s(24969),G=s(83062),Se=s(94184),ke=s.n(Se),V=s(67294),We={box:"box___khloQ"},Q=s(85893),Ge=ke().bind(We),c=function(Be){var He=Be.className,Pe=Be.type,h=Pe===void 0?Le.Ai.Blank:Pe,ve=Be.icon,_=Be.title,me=Be.onClick,be=h===Le.Ai.Blank?"tooltip-blank":"tooltip-white";return(0,Q.jsx)(G.Z,{title:_,classNames:{root:be},children:(0,Q.jsx)("span",{className:Ge("hover-box","flex","content-center","items-center","cursor-pointer",We.box,He),onClick:me,children:ve||(0,Q.jsx)(W.Z,{})})})},Oe=c},79346:function(Nn,Ke,s){var Le=s(67294),W=function(Se){var ke="drawer-scroll-hidden";if(!document.getElementById("drawer-scroll-style")){var V=document.createElement("style");V.id="drawer-scroll-style",V.innerHTML=`
        .`.concat(ke,` {
          overflow-x: hidden !important;
        }
      `),document.head.appendChild(V)}(0,Le.useEffect)(function(){Se?(document.body.classList.add(ke),document.documentElement.classList.add(ke)):setTimeout(function(){document.body.classList.remove(ke),document.documentElement.classList.remove(ke)},400)},[Se])};Ke.Z=W},36443:function(Nn,Ke,s){s.r(Ke),s.d(Ke,{default:function(){return Qi}});var Le=s(19632),W=s.n(Le),G=s(13769),Se=s.n(G),ke=s(15009),V=s.n(ke),We=s(99289),Q=s.n(We),Ge=s(97857),c=s.n(Ge),Oe=s(5574),$=s.n(Oe),Be=s(16921),He=s(85296),Pe=s(97937),h=s(99859),ve=s(25278),_=s(85804),me=s(55241),be=s(32983),re=s(94184),le=s.n(re),l=s(67294),J={"show-stand":"show-stand___x0v4C",hidden:"hidden___LyPql","stand-header":"stand-header___C7ruv","form-style":"form-style___voUbC","form-item-style":"form-item-style___BoNFn","icon-margin":"icon-margin___Z4x9N",close:"close___yXK9c",desc:"desc___Seg_N","divider-horizontal":"divider-horizontal____jNfi",margin:"margin___VG7KG",empty:"empty___nLARw","title-style":"title-style___Cybj_","icon-box-style":"icon-box-style___cfSXc"},e=s(85893),cn=le().bind(J),xn=function(n){var t=n.className,r=n.icon,a=n.title,i=n.description,p=n.visible,d=n.otherAction,S=n.onClose,A=n.lineMargin,y=n.children,g=n.changeFoldWrap,o=n.showNameInput,F=n.backgroundColor,u=p?"":J.hidden,I=A?J.margin:"",m=r?J["icon-margin"]:"",f=(0,l.useState)(!1),v=$()(f,2),N=v[0],E=v[1],T=(0,l.useState)(!1),Z=$()(T,2),k=Z[0],P=Z[1],B=h.Z.useForm(),K=$()(B,1),O=K[0],w=(0,l.useRef)(null),H=(0,l.useRef)(null);(0,l.useEffect)(function(){O.setFieldsValue({name:a,description:i})},[a,i]),(0,l.useEffect)(function(){N&&w.current&&w.current.focus()},[N]),(0,l.useEffect)(function(){k&&H.current&&H.current.focus()},[k]),(0,l.useEffect)(function(){o&&E(!0)},[o]);var ee=function(te){g?.(te),E(!1),P(!1)},ne="linear-gradient(to bottom, ".concat(F," 0, white 42px)");return(0,e.jsxs)("div",{className:cn("flex flex-col",J["show-stand"],u,t),style:{background:ne,paddingTop:"3px"},children:[(0,e.jsx)("div",{className:cn(J["stand-header"],"flex","items-center"),style:{height:N?"66px":k?"90px":"66px"},children:(0,e.jsxs)(h.Z,{form:O,onFinish:ee,className:J["form-style"],children:[(0,e.jsx)(h.Z.Item,{name:"name",className:J["form-item-style"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8282\u70B9\u540D\u79F0"}],style:{height:N?"32px":"24px"},children:N?(0,e.jsx)(ve.Z,{value:a,ref:w,onKeyDown:function(te){te.key==="Enter"&&(O.submit(),E(!1))},maxLength:25,onBlur:function(){O.submit(),E(!1)}}):(0,e.jsxs)("div",{className:"dis-sb",style:{color:F},children:[(0,e.jsxs)("div",{className:"dis-sa",onDoubleClick:function(){return E(!0)},children:[(0,e.jsx)("div",{className:J["icon-box-style"],children:r}),(0,e.jsx)("span",{className:cn("flex-1 text-ellipsis ",J["title-style"],m),children:a})]}),(0,e.jsxs)("div",{className:"dis-left fold-action-style",children:[d,(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(Pe.Z,{}),size:"small",onClick:S})]})]})}),(0,e.jsx)(h.Z.Item,{name:"description",className:J["form-item-style"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8282\u70B9\u63CF\u8FF0"}],children:k?(0,e.jsx)(ve.Z.TextArea,{ref:H,value:i,placeholder:i,onKeyDown:function(te){te.key==="Enter"&&(O.submit(),P(!1))},onBlur:function(){O.submit(),P(!1)},rows:2,style:{marginTop:"10px",resize:"none"}}):(0,e.jsx)(me.Z,{title:i,styles:{body:{width:"300px"}},trigger:"click",children:(0,e.jsx)("div",{onDoubleClick:function(){return P(!0)},className:"text-ellipsis cursor-pointer ".concat(J.desc),children:i})})})]})}),(0,e.jsx)("div",{className:cn(J["divider-horizontal"],I)}),(0,e.jsx)("div",{className:"flex-1 overflow-y",children:y||(0,e.jsx)(be.Z,{className:cn(J.empty),description:"\u6682\u65E0\u5185\u5BB9"})})]})},wn=xn,C=s(95141),on=s(44507),bn=s(89705),vn=s(3914),Cn=function(n){var t=n.onChange,r=n.testRun,a=n.action,i=n.nodeType,p=vn.Z.useApp(),d=p.modal,S=l.useState(!1),A=$()(S,2),y=A[0],g=A[1],o=i===C.C8.Loop,F=function(m){if(o){d.confirm({title:"\u786E\u5B9A\u8981\u5220\u9664\u5FAA\u73AF\u8282\u70B9\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){t(m),g(!1)}});return}t(m),g(!1)},u=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{onClick:function(){return F("Rename")},className:"cursor-pointer",style:{padding:"3px 0"},children:"\u91CD\u547D\u540D"}),!o&&(0,e.jsx)("p",{onClick:function(){return F("Duplicate")},className:"cursor-pointer",style:{padding:"3px 0"},children:"\u521B\u5EFA\u526F\u672C"}),(0,e.jsx)("p",{onClick:function(){return F("Delete")},className:"cursor-pointer",style:{padding:"3px 0"},children:"\u5220\u9664"})]});return(0,e.jsxs)("div",{className:"dis-left",children:[r&&(0,e.jsx)(me.Z,{placement:"top",content:"\u6D4B\u8BD5\u8BE5\u8282\u70B9",children:(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(on.Z,{}),style:{marginRight:"6px",fontSize:"12px"},size:"small",onClick:function(){return F("TestRun")}})}),a&&(0,e.jsx)(me.Z,{content:u,trigger:"click",open:y,onOpenChange:function(m){return g(m)},children:(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(bn.Z,{}),style:{marginRight:"6px",fontSize:"12px"},size:"small",onClick:function(){return g(!0)}})})]})},pn=Cn,_e=s(97630),Qe=s(89575),oe=s(24082),en=s(14313),rn=s(76654),de=s(78919),fe=s(90442),Xe=s(69234),Te=s(39902),sn=s(66309),Fn=s(9783),tn=s.n(Fn),fn=s(13969),Fe=s(1675),yn=s(30881),mn=s(19515),Tn=s(75991),Dn=s(37720),In=s(78045),nn=s(96486),$e=s.n(nn),ae=s(88773),ge=s(58594),Ae=["item","loading"],je=function(n){var t,r,a,i=n.item,p=n.loading,d=Se()(n,Ae),S=(t=localStorage.getItem(Fe.LA))!==null&&t!==void 0?t:"",A=vn.Z.useApp(),y=A.message,g=h.Z.useFormInstance(),o=(0,Te.useModel)("workflow"),F=o.getWorkflow,u=(0,l.useState)(!1),I=$()(u,2),m=I[0],f=I[1],v=(0,l.useState)([]),N=$()(v,2),E=N[0],T=N[1];(0,l.useEffect)(function(){var O,w;f((O=(w=i.dataType)===null||w===void 0?void 0:w.startsWith("Array_"))!==null&&O!==void 0?O:!1)},[i.dataType]);var Z=(0,l.useCallback)(function(O){var w=O.fileList.filter(function(H){return H.status!==C.KM.removed}).map(function(H){var ee,ne,q,te=H.url||((ee=H.response)===null||ee===void 0?void 0:ee.data.url),ue=(ne=H.response)===null||ne===void 0?void 0:ne.data.key,Ie=H.name||((q=H.response)===null||q===void 0?void 0:q.data.fileName)||"";return{key:ue||"",status:H.status,uid:H.uid||(0,ae.Z)(),name:Ie,url:te}});return w},[]),k=(0,l.useCallback)(function(O){var w=Z(O);if(T(m?w:[w[0]]),O.file.status===C.KM.error){var H;y.warning((H=O.file.response)===null||H===void 0?void 0:H.message)}},[T,m]),P=(0,l.useCallback)(function(O,w,H){var ee,ne=w?O:[O];return Array.isArray(ne)&&(ee=ne[0])!==null&&ee!==void 0&&ee.url?ne.map(function(q){if((0,nn.isString)(q)){var te=F("testRunValues"),ue=te[H],Ie=w&&(0,nn.isString)(ue)?JSON.parse(ue):ue;return Array.isArray(Ie)?Ie.find(function(xe){return xe?.url===q}):Ie}else if(q!=null&&q.url){var Ce;return{uid:q?.uid||(0,ae.Z)(),name:q?.name||(q==null||(Ce=q.url)===null||Ce===void 0?void 0:Ce.split("/").pop())||q?.url||"",url:q?.url,status:C.KM.done}}return q})||[]:[]},[]);switch((0,l.useEffect)(function(){var O;if((O=i.dataType)!==null&&O!==void 0&&O.includes("File")){var w=g.getFieldsValue(!0)[i.name],H=m&&(0,nn.isString)(w)?JSON.parse(w):w,ee=P(H,m,i.name);T(ee)}},[i.name,i.dataType,m]),(0,l.useEffect)(function(){var O;if((O=i.dataType)!==null&&O!==void 0&&O.includes("File")){var w;w=E.filter(function(H){return H.status===C.KM.done})||[],m||(w=w[0]||{}),g.setFieldValue(i.name,w)}},[E,g,i.dataType,i.name,m]),!0){case((r=i.dataType)===null||r===void 0?void 0:r.includes("File")):{var B,K=c()(c()({},d),{},{maxCount:m?10:1});return delete K.value,(0,e.jsx)(Tn.Z,c()(c()({},K),{},{fileList:E,action:fn.GI,onChange:function(w){k(w)},multiple:m,headers:{Authorization:S?"Bearer ".concat(S):""},accept:(0,mn.Df)(m?(B=i.dataType)===null||B===void 0?void 0:B.replace("Array_",""):i.dataType),disabled:p,children:(0,e.jsx)(_.ZP,{children:"\u4E0A\u4F20\u6587\u4EF6"})}))}case(i.dataType==="Object"||((a=i.dataType)===null||a===void 0?void 0:a.includes("Array"))):return(0,e.jsx)(ge.Z,{value:g.getFieldValue(i.name)||"",codeLanguage:yn.vQ.JSON,onChange:function(w){g.setFieldsValue(tn()({},i.name,w))},height:"180px"});case i.dataType==="Number":return(0,e.jsx)(Dn.Z,c()(c()({},d),{},{disabled:p}));case i.dataType==="Integer":return(0,e.jsx)(Dn.Z,c()(c()({},d),{},{precision:0,disabled:p}));case i.dataType==="Boolean":return(0,e.jsx)(In.ZP.Group,c()(c()({},d),{},{disabled:p,options:[{label:"true",value:"true"},{label:"false",value:"false"}]}));case i.dataType==="String":return(0,e.jsx)(ve.Z,c()({},d));default:return(0,e.jsx)(ve.Z,c()(c()({},d),{},{disabled:p}))}},De=je,he=function(n){var t=n.items,r=n.loading,a=n.options;return(0,e.jsx)(e.Fragment,{children:t.map(function(i,p){if(a!==void 0&&JSON.stringify(a.argMap)!=="{}"){var d=a.argMap[i.bindValue];d&&(i.dataType=d.dataType)}return(0,e.jsx)("div",{children:(0,e.jsx)(h.Z.Item,{name:[i.name],label:(0,e.jsxs)(e.Fragment,{children:[i.name,(0,e.jsx)(sn.Z,{color:"#C9CDD4",className:"ml-10",children:i.dataType})]}),rules:i.require?[{required:!0,message:"".concat(i.name,"\u662F\u5FC5\u586B\u9879")}]:[],children:(0,e.jsx)(De,{item:i,loading:r})})},i.key||"".concat(i.name,"-").concat(p))})})},we=he;function Ye(j,n){if(j.length<=n)return j;var t=n-3,r=Math.ceil(t/2),a=Math.floor(t/2);return j.slice(0,r)+"..."+j.slice(j.length-a)}var En=function(n){var t,r=n.params,a=n.items,i=n.value,p=n.answerType,d=n.onAnswer,S=n.onChange,A=n.onSubmit,y=function(o){d?.(o.data.description)};return(0,e.jsxs)("div",{className:"stop-wait-style dis-col flex-1 overflow-y",children:[(0,e.jsxs)("div",{className:"stop-wait-header dis-center",children:[(0,oe.qM)(C.C8.QA),(0,e.jsx)("div",{}),(0,e.jsx)("span",{className:"ml-10",children:"\u95EE\u7B54"}),(0,e.jsx)("span",{className:"ml-10",children:"\u56DE\u590D\u4EE5\u4E0B\u95EE\u9898\u540E\u7EE7\u7EED\u8BD5\u8FD0\u884C"})]}),(0,e.jsx)(rn.Z,{className:"flex-1",avatar:(0,e.jsx)("img",{src:s(47804),className:"bubble-avatar"}),variant:p===C.J4.SELECT?"borderless":"filled",header:(0,e.jsx)("span",{children:"\u673A\u5668\u4EBA"}),content:r!=null&&(t=r.options)!==null&&t!==void 0&&t.length?(0,e.jsx)("div",{className:"qa-question-style",children:(0,e.jsx)(de.Z,{title:r?.question,items:a,vertical:!0,onItemClick:y})}):(0,e.jsx)("div",{className:"qa-question-style",children:r?.question})}),(0,e.jsx)(fe.Z,{value:i,onChange:S,onSubmit:A})]})},Kn=function(n){var t=n.config,r=n.loading,a=n.options,i=t.body,p=t.headers,d=t.queries;return(0,e.jsxs)(e.Fragment,{children:[i&&i.length>0&&(0,e.jsx)(we,{items:i,loading:r,options:a}),p&&p.length>0&&(0,e.jsx)(we,{items:p,loading:r,options:a}),d&&d.length>0&&(0,e.jsx)(we,{items:d,loading:r,options:a}),!(i!=null&&i.length)&&!(p!=null&&p.length)&&!(d!=null&&d.length)&&(0,e.jsx)(be.Z,{description:"\u672C\u6B21\u8BD5\u8FD0\u884C\u65E0\u9700\u8F93\u5165"})]})},lt=function(n){var t=n.type,r=n.config,a=n.loading,i=n.options,p=r.inputArgs;return(0,e.jsxs)(e.Fragment,{children:[t!==C.C8.HTTPRequest&&(p&&p.length?(0,e.jsx)(we,{items:p,loading:a,options:i}):(0,e.jsx)(be.Z,{description:"\u672C\u6B21\u8BD5\u8FD0\u884C\u65E0\u9700\u8F93\u5165"})),t===C.C8.HTTPRequest&&(0,e.jsx)(Kn,{config:r,loading:a,options:i})]})},ot=function(n){var t=n.form,r=n.value,a=n.config,i=a.inputArgs;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"collapse-title-style dis-left",children:"\u8F93\u5165"}),i?.map(function(p){return(0,e.jsx)(ve.Z,{prefix:Ye(p.name+":",20),value:(0,oe.E4)(t.getFieldValue(p.name),p?.dataType||""),disabled:!0,className:"mb-12 override-input-style"},p.name)}),(0,e.jsx)("p",{className:"collapse-title-style dis-left",children:"\u8F93\u51FA"}),(0,e.jsx)("pre",{className:"result-style overflow-y",children:r})]})},ta=function(n){var t=n.node,r=n.run,a=n.loading,i=n.testRunResult,p=n.clearRunResult,d=n.stopWait,S=n.formItemValue,A=n.testRunParams,y=(0,Te.useModel)("model"),g=y.testRun,o=y.setTestRun,F=(0,Te.useModel)("workflow"),u=F.referenceList,I=F.storeWorkflow,m=h.Z.useForm(),f=$()(m,1),v=f[0],N=(0,l.useState)([]),E=$()(N,2),T=E[0],Z=E[1],k=function(ne){I("testRunValues",(0,Qe.Xh)(ne));var q=(0,Qe.Xh)(ne);if(ne&&JSON.stringify(ne)!=="{}"){if(t.nodeConfig.inputArgs&&t.nodeConfig.inputArgs.length){var te=function(se){if(Object.prototype.hasOwnProperty.call(ne,se)){var pe,ie,ye=t.nodeConfig.inputArgs.find(function(dn){return dn.name===se});if(ye&&(pe=ye.dataType)!==null&&pe!==void 0&&pe.includes("File"))q[se]=(0,oe.wJ)(ne[se],ye.dataType);else if(ye&&(ye.dataType==="Object"||(ie=ye.dataType)!==null&&ie!==void 0&&ie.includes("Array")))try{q[se]=JSON.parse(ne[se])}catch(dn){console.error("JSON \u89E3\u6790\u5931\u8D25:",dn)}}};for(var ue in ne)te(ue)}else if(t.type===C.C8.HTTPRequest){var Ie=[].concat(W()(t.nodeConfig.body||[]),W()(t.nodeConfig.queries||[]),W()(t.nodeConfig.headers||[])),Ce=function(se){if(Object.prototype.hasOwnProperty.call(ne,se)){var pe,ie=Ie?.find(function(ye){return ye.name===se});if(ie&&(ie.dataType==="Object"||(pe=ie.dataType)!==null&&pe!==void 0&&pe.includes("Array")))try{q[se]=JSON.parse(ne[se])}catch(ye){console.error("JSON \u89E3\u6790\u5931\u8D25:",ye)}}};for(var xe in ne)Ce(xe)}r(t.type,q)}else r(t.type)},P=[{key:"inputArgs",label:"\u8BD5\u8FD0\u884C\u8F93\u5165",children:(0,e.jsxs)(h.Z,{form:v,layout:"vertical",onFinish:k,className:"test-run-form",children:[(0,e.jsxs)("div",{className:"dis-left",children:[(0,oe.qM)(t.type),(0,e.jsx)("span",{style:{marginLeft:"10px"},children:t.name})]}),lt({loading:a,type:t.type,config:t.nodeConfig,options:u})]})}].concat(W()(i?[{key:"outputArgs",label:"\u8FD0\u884C\u7ED3\u679C",children:ot({form:v,config:t.nodeConfig,value:i})}]:[])),B=function(ne){r("Start",{answer:ne})},K=(0,l.useState)(""),O=$()(K,2),w=O[0],H=O[1];return(0,l.useEffect)(function(){if(d){var ee=(A?.options||[]).map(function(ne){return{key:ne.uuid,description:ne.content}});Z(ee)}},[g,d]),(0,l.useEffect)(function(){var ee=JSON.parse(JSON.stringify(S||{}));if(t.type===C.C8.HTTPRequest&&JSON.stringify(ee)!=="{}"){for(var ne in ee)typeof ee[ne]!="string"&&ee[ne]!==null&&(ee[ne]=JSON.stringify(ee[ne]));v.setFieldsValue(ee)}},[S]),g?(0,e.jsx)("div",{className:"test-run-style",style:{display:"flex",paddingTop:"100px"},children:(0,e.jsxs)("div",{className:"test-content-style dis-col ",children:[(0,e.jsxs)("div",{className:"test-run-header dis-sb",children:[(0,e.jsx)("span",{children:"\u8BD5\u8FD0\u884C"}),(0,e.jsx)(Pe.Z,{className:"cursor-pointer",onClick:function(){o(!1),p()}})]}),!d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"collapse-item-style flex-1 ",children:(0,e.jsx)(Xe.Z,{items:P,ghost:!0,defaultActiveKey:["inputArgs","outputArgs"]})}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(en.Z,{}),type:"primary",onClick:function(){v.submit()},loading:a,className:"mt-16",children:"\u8FD0\u884C"})]}),d&&(0,e.jsx)(En,{params:A,items:T,answerType:t.nodeConfig.answerType,onAnswer:B,onChange:function(ne){H(ne)},onSubmit:function(){B(w),H("")}})]})}):null},Pn=ta,aa=s(72568),Zn=s(70490),Ve=s(80657);function qa(j){var n=j.run,t=j.interval,r=t===void 0?3e3:t,a=j.doBefore,i=a===void 0?function(){return Promise.resolve(!1)}:a,p=j.doNext,d=(0,Te.useModel)("workflow"),S=d.isModified,A=d.setUpdateLoading;(0,l.useEffect)(function(){var y=null;return console.log("useAutoSave:isModified",S),S&&(y=setTimeout(Q()(V()().mark(function g(){var o;return V()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,i?.();case 2:if(u.t0=u.sent,u.t0){u.next=5;break}u.t0=!1;case 5:if(o=u.t0,!o){u.next=8;break}return u.abrupt("return");case 8:return console.log("useAutoSave:run"),A(!0),u.prev=10,u.next=13,n();case 13:u.next=18;break;case 15:u.prev=15,u.t1=u.catch(10),console.error("useAutoSave:run error",u.t1);case 18:return u.prev=18,A(!1),u.finish(18);case 21:p?.();case 22:case"end":return u.stop()}},g,null,[[10,15,18,21]])})),r)),function(){y&&clearTimeout(y)}},[S,n,i,p,r])}var _a=function(n){(0,l.useEffect)(function(){var t=function(a){(a.ctrlKey||a.metaKey)&&a.key.toLowerCase()==="s"&&(a.preventDefault(),n&&n())};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}},[n])},er=_a,nr=s(79346),kn=s(1444),ze=s(91120),Ne=s(33969),ra=s(4948),Je=s(2916),tr=function(){var j=Q()(V()().mark(function n(t){var r,a,i,p,d,S,A,y,g,o,F,u,I;return V()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(r=t.type,a=t.targetId,i=t.sourceNode,p=t.id,d=t.graphUpdateNode,S=t.graphDeleteEdge,A=t.getReference,y=i.nextNodeIds===null?[]:i.nextNodeIds,g=(0,Qe.Xh)(y),o=String(i.id),F={nodeId:W()(y),sourceId:Number(i.id)},u=r===Ne.I3.created,!u){f.next=14;break}if(!y.includes(Number(a))){f.next=11;break}return f.abrupt("return",!1);case 11:F.nodeId.push(Number(a));case 12:f.next=15;break;case 14:r===Ne.I3.deleted&&(F.nodeId=F.nodeId.filter(function(v){return Number(v)!==Number(a)}));case 15:return d(o,c()(c()({},i),{},{nextNodeIds:W()(F.nodeId)})),f.prev=16,f.next=19,kn.ZP.apiAddEdge(F);case 19:I=f.sent,I.code!==Zn.ZP.success?(d(o,c()(c()({},i),{},{nextNodeIds:g})),u&&S(String(p))):A(),f.next=27;break;case 23:f.prev=23,f.t0=f.catch(16),console.error("Failed to add edge:",f.t0),d(o,c()(c()({},i),{},{nextNodeIds:g}));case 27:return f.abrupt("return",F.nodeId);case 28:case"end":return f.stop()}},n,null,[[16,23]])}));return function(t){return j.apply(this,arguments)}}(),ut=s(50377),dt=s(45360),ar=s(10661),ct=s(32909),Lt=s(88310),rr=s(21532),_n=s(42075),sr=s(69215),ir=function(n){var t=n.marginRight,r=n.title,a=n.inputFieldName,i=n.placeholder,p=n.visible,d=n.onClose;return(0,e.jsxs)("div",{className:"expand-textarea",style:{display:p?"block":"none",right:t},children:[(0,e.jsxs)("div",{className:"expand-textarea-header dis-sb",children:[(0,e.jsx)("div",{className:"expand-textarea-header-title",children:r}),(0,e.jsx)("div",{className:"dis-left mg",children:(0,e.jsx)(rr.ZP,{button:{className:"gradient-button"},children:(0,e.jsx)(_n.Z,{children:(0,e.jsx)(Pe.Z,{onClick:function(){return d()},className:"cursor-pointer"})})})})]}),(0,e.jsx)(sr.l0.Item,{name:a,className:"expand-textarea-pre-style",children:(0,e.jsx)(ve.Z.TextArea,{placeholder:i,className:"no-resize-textarea"})})]})},lr=ir,or=function(n){var t=n.title,r=n.inputFieldName,a=n.placeholder,i=n.rows,p=i===void 0?3:i,d=n.onExpand,S=n.onOptimize,A=n.onOptimizeClick,y=(0,l.useState)(""),g=$()(y,2),o=g[0],F=g[1],u=(0,Te.useModel)("workflow"),I=u.setExpanded,m=u.expanded;return(0,l.useEffect)(function(){return F((0,ae.Z)()),function(){F(""),I("")}},[]),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style gap-6 flex items-center",children:t}),(0,e.jsxs)("div",{children:[S&&A&&(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(ct.pL,{}),size:"small",style:{marginRight:"6px"},onClick:function(){return A()}}),d&&(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(Lt.Z,{}),size:"small",onClick:function(){return I(o)}})]})]}),(0,e.jsx)(h.Z.Item,{name:r,children:(0,e.jsx)(ve.Z.TextArea,{placeholder:a,autoSize:{minRows:p,maxRows:p}})}),m&&m===o&&(0,e.jsx)(lr,{title:t,inputFieldName:r,marginRight:370+12*2,placeholder:a,visible:m===o,onClose:function(){return I("")}})]})},Ct=or,Ot=s(80882),bt=s(42834),ur=function(n){var t=n.showCheck,r=n.isBody;return(0,e.jsxs)("div",{className:"dis-left font-12 mb-6 font-color-gray07",children:[(0,e.jsx)("span",{className:"flex-1 ",children:"\u53D8\u91CF\u540D"}),(0,e.jsx)("span",{style:{width:80+(t?60:50)+(r?62:0)},children:"\u53D8\u91CF\u7C7B\u578B"})]})},dr=ur,Wn=s(45605),On=s(24969),Sn=s(34041),cr=function(n){var t=n.title,r=n.form,a=n.notShowTitle,i=n.showAddButton,p=n.onAddRoot,d=n.onChange;return(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:(0,e.jsx)("span",{children:t})}),(0,e.jsxs)("div",{children:[a&&(0,e.jsx)(h.Z.Item,{name:"outputType",noStyle:!0,children:(0,e.jsx)(Sn.Z,{prefix:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(me.Z,{align:{offset:[-12,-12]},content:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"\u6587\u672C: \u4F7F\u7528\u666E\u901A\u6587\u672C\u683C\u5F0F\u56DE\u590D"}),(0,e.jsx)("li",{children:"Markdown: \u5C06\u5F15\u5BFC\u6A21\u578B\u4F7F\u7528 Markdown \u683C\u5F0F\u8F93\u51FA\u56DE\u590D"}),(0,e.jsx)("li",{children:"JSON: \u5C06\u5F15\u5BFC\u6A21\u578B\u4F7F\u7528 JSON \u683C\u5F0F\u8F93\u51FA"})]}),children:(0,e.jsx)(Wn.Z,{})}),(0,e.jsx)("span",{className:"ml-10",children:"\u8F93\u51FA\u683C\u5F0F"})]}),options:[{label:"\u6587\u672C",value:"Text"},{label:"Markdown",value:"Markdown"},{label:"JSON",value:"JSON"}],style:{width:"calc(100% - ".concat(i?34:0,"px)")},onChange:function(A){r.setFieldValue("outputType",A),A!=="JSON"&&(d([{key:(0,ae.Z)(),name:"output",description:"\u8F93\u51FA\u7ED3\u679C",dataType:C.Gi.String,require:!1,systemVariable:!1,bindValueType:"Input",bindValue:""}]),r.submit())}})}),i&&(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(On.Z,{}),size:"small",onClick:p,className:"ml-10",type:"text"})]})]})},vr=cr,jn=s(29269),Mt=s(2068),nt=s(48689),sa=s(38089),Rn=s(83062),Vt=s(84567),ia=(0,l.memo)(function(j){var n=j.nodeData,t=j.form,r=j.showCheck,a=j.isNotAdd,i=j.onUpdateField,p=j.onAddChild,d=j.onDelete,S=j.onUpdateRequire,A=[C.Gi.Object,C.Gi.Array_Object].includes(n.dataType),y=(0,mn.n3)(n.dataType||void 0),g=h.Z.useWatch("outputType",{form:t,preserve:!0});return(0,e.jsxs)("div",{className:"dis-left",style:{width:"100%"},children:[(0,e.jsx)("div",{className:"flex-1",style:{position:"relative",marginRight:"6px"},children:(0,e.jsx)(ve.Z,{defaultValue:n.name,onBlur:function(F){return i(n.key,"name",F.target.value)},disabled:n.systemVariable,placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0",className:"tree-form-name flex-1",style:{backgroundColor:n.systemVariable?"#f5f5f5":void 0}},n.key)}),(0,e.jsx)("div",{style:{width:"80px",position:"relative"},children:(0,e.jsx)(sa.Z,{allowClear:!1,options:jn.DJ,defaultValue:y,onChange:function(F){i(n.key,"dataType",(0,mn.$g)(F))},changeOnSelect:!0,disabled:n.systemVariable||!a&&g==="Text"||g==="Markdown"||n.subArgs&&n.subArgs.length>0,placement:"bottomRight",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",style:{width:"100%",backgroundColor:n.systemVariable?"#f5f5f5":void 0},className:"tree-form-name",size:"small"})}),(0,e.jsxs)("div",{className:"nested-form-icon-button",style:{width:r?60:48},children:[A&&(0,e.jsx)(Rn.Z,{title:"\u65B0\u589E\u5B50\u8282\u70B9",children:(0,e.jsx)(_.ZP,{type:"text",className:"tree-icon-style",onClick:function(F){F.stopPropagation(),p(n.key)},icon:(0,e.jsx)(ct.Em,{})})}),(0,e.jsx)(me.Z,{content:(0,e.jsx)(ve.Z.TextArea,{defaultValue:n.description||"",onBlur:function(F){return i(n.key,"description",F.target.value)},rows:3},n.key),trigger:"click",children:(0,e.jsx)(Rn.Z,{title:"\u6DFB\u52A0\u63CF\u8FF0",children:(0,e.jsx)(_.ZP,{type:"text",className:"tree-icon-style",disabled:n.systemVariable,icon:(0,e.jsx)(Mt.Z,{})})})}),r&&(0,e.jsx)(Rn.Z,{title:"\u662F\u5426\u5FC5\u987B",children:(0,e.jsx)(Vt.Z,{checked:n.require,onChange:function(F){return S(n,F.target.checked)},disabled:n.systemVariable})}),(0,e.jsx)(Rn.Z,{title:"\u5220\u9664",children:(0,e.jsx)(_.ZP,{type:"text",disabled:n.systemVariable,className:"tree-icon-style",onClick:function(){return d(n.key)},icon:(0,e.jsx)(nt.Z,{})})})]})]})},function(j,n){var t;return((t=n.nodeData.subArgs)===null||t===void 0?void 0:t.length)===0?!1:j.nodeData.key===n.nodeData.key&&j.nodeData.name===n.nodeData.name&&j.nodeData.dataType===n.nodeData.dataType&&j.nodeData.require===n.nodeData.require&&j.nodeData.systemVariable===n.nodeData.systemVariable&&j.nodeData.description===n.nodeData.description&&j.nodeData.subArgs===n.nodeData.subArgs&&j.showCheck===n.showCheck&&j.isNotAdd===n.isNotAdd});ia.displayName="TreeNodeTitle";var pr=ia,Ft=s(42952),mr=s(50136),Xl=s(48256),fr=function(n){var t=n.placeholder,r=n.data,a=n.style,i=n.isDisabled,p=i===void 0?!1:i,d=n.referenceType,S=d===void 0?"Reference":d,A=n.value,y=n.onChange,g=(0,Te.useModel)("workflow"),o=g.getValue,F=g.setIsModified,u=(0,l.useState)(""),I=$()(u,2),m=I[0],f=I[1],v=function(B,K,O){y?.(B,K,O),f(B),F(!0)};(0,l.useEffect)(function(){if(S==="Reference"&&A){var P=A&&r.argMap[A];f(P?o(A):"")}else f(A||"")},[A,r.argMap,S]);var N=function(){v("","Input",C.Gi.String),f("")},E=function(B){return(0,e.jsxs)("div",{className:"tree-custom-title-style",children:[(0,e.jsx)("span",{title:"",children:B.name}),(0,e.jsx)(me.Z,{content:B.description||"\u6682\u65E0\u63CF\u8FF0",children:(0,e.jsx)(Wn.Z,{title:"",style:{marginLeft:"4px"}})}),(0,e.jsx)(sn.Z,{className:"ml-20",color:"#C9CDD4",children:B.dataType})]})},T=function(B){var K;if(B[0]){var O=B[0].toString(),w=r==null||(K=r.argMap)===null||K===void 0||(K=K[O])===null||K===void 0?void 0:K.dataType;v(O,"Reference",w),f(o(O))}},Z=function(B){if(B&&B.length){var K=!1;return B.map(function(O){return{key:O.id,label:O.name.length>8?O.name.slice(0,8)+"...":O.name,icon:(0,oe.qM)(O.type),popupClassName:"inputOrReferencePopup",children:O.outputArgs?[{key:"".concat(O.id,"-tree-select"),label:(0,e.jsx)("div",{style:{paddingTop:12,paddingRight:12,paddingBottom:8},onClick:function(H){K||(H.stopPropagation(),H.preventDefault())},children:(0,e.jsx)(bt.Z,{onSelect:function(H){T(H),K=!0},defaultExpandAll:!0,treeData:O.outputArgs,fieldNames:{title:"name",key:"key",children:"children"},blockNode:!0,showIcon:!0,titleRender:E,className:"custom-tree-style"})})}]:void 0}})}else return[{key:"no-data",popupClassName:"inputOrReferencePopup",label:(0,e.jsx)("div",{style:{padding:8,color:"red"},children:"\u672A\u6DFB\u52A0\u4E0A\u7EA7\u8282\u70B9\u8FDE\u7EBF\u6216\u4E0A\u7EA7\u8282\u70B9\u65E0\u53C2\u6570"}),disabled:!0}]},k=function(){return Z(r.previousNodes)};return(0,e.jsxs)("div",{className:"input-or-reference dis-sb",style:a,children:[S==="Reference"&&m!==""?(0,e.jsx)(sn.Z,{closable:!0,onClose:N,className:"input-or-reference-tag text-ellipsis",color:"#C9CDD4",children:m.length>10?(0,e.jsx)(me.Z,{content:m,placement:"topRight",children:(0,e.jsx)("span",{className:"tag-text-style",children:m})}):(0,e.jsx)("span",{className:"tag-text-style",children:m})}):(0,e.jsx)(ve.Z,{placeholder:t||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:p,value:m,onChange:function(B){v(B.target.value,"Input",C.Gi.String)}}),(0,e.jsx)(mr.Z,{menu:{items:k()},trigger:["click"],overlayStyle:{minWidth:200},placement:"bottomRight",children:(0,e.jsx)(Ft.Z,{style:{cursor:"pointer"},className:"input-reference-icon-style"})})]})},la=fr,oa=(0,l.memo)(function(j){var n=j.nodeData,t=j.showCheck,r=j.onUpdateField,a=j.onAddChild,i=j.onDelete,p=j.onUpdateRequire,d=[C.Gi.Object,C.Gi.Array_Object].includes(n.dataType)&&n.bindValueType==="Input"&&!n.bindValue,S=(0,mn.n3)(n.dataType||void 0),A=(0,Te.useModel)("workflow"),y=A.referenceList;return(0,e.jsxs)("div",{className:"dis-left",style:{width:"100%"},children:[(0,e.jsx)("div",{className:"flex-1",style:{position:"relative",marginRight:"6px"},children:(0,e.jsx)(ve.Z,{defaultValue:n.name,onBlur:function(o){return r(n.key,"name",o.target.value)},disabled:n.systemVariable,placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0",className:"tree-form-name flex-1",style:{backgroundColor:n.systemVariable?"#f5f5f5":void 0}},n.key)}),(0,e.jsx)("div",{style:{width:"40px",position:"relative"},children:(0,e.jsx)(sa.Z,{allowClear:!1,options:jn.DJ,value:S,onChange:function(o){r(n.key,"dataType",(0,mn.$g)(o))},changeOnSelect:!0,placement:"bottomRight",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",style:{width:"100%",backgroundColor:"#f5f5f5"},className:"tree-form-name is-body-cascader",size:"small"})}),(0,e.jsx)("div",{style:{width:"100px",marginLeft:"6px",position:"relative"},children:(0,e.jsx)(la,{referenceType:n.bindValueType,data:y,value:n.bindValue,onChange:function(o,F){r(n.key,"bindValue",o,F)}})}),(0,e.jsxs)("div",{className:"nested-form-icon-button",style:{width:t?60:48},children:[d&&(0,e.jsx)(Rn.Z,{title:"\u65B0\u589E\u5B50\u8282\u70B9",children:(0,e.jsx)(_.ZP,{type:"text",className:"tree-icon-style",onClick:function(o){o.stopPropagation(),a(n.key)},icon:(0,e.jsx)(ct.Em,{})})}),(0,e.jsx)(me.Z,{content:(0,e.jsx)(ve.Z.TextArea,{defaultValue:n.description||"",onBlur:function(o){return r(n.key,"description",o.target.value)},rows:3},n.key),trigger:"click",children:(0,e.jsx)(Rn.Z,{title:"\u6DFB\u52A0\u63CF\u8FF0",children:(0,e.jsx)(_.ZP,{type:"text",className:"tree-icon-style",disabled:n.systemVariable,icon:(0,e.jsx)(Mt.Z,{})})})}),t&&(0,e.jsx)(Rn.Z,{title:"\u662F\u5426\u5FC5\u987B",children:(0,e.jsx)(Vt.Z,{checked:n.require,onChange:function(o){return p(n,o.target.checked)},disabled:n.systemVariable})}),(0,e.jsx)(Rn.Z,{title:"\u5220\u9664",children:(0,e.jsx)(_.ZP,{type:"text",disabled:n.systemVariable,className:"tree-icon-style",onClick:function(){return i(n.key)},icon:(0,e.jsx)(nt.Z,{})})})]})]})},function(j,n){var t;return((t=n.nodeData.subArgs)===null||t===void 0?void 0:t.length)===0?!1:j.nodeData.key===n.nodeData.key&&j.nodeData.name===n.nodeData.name&&j.nodeData.dataType===n.nodeData.dataType&&j.nodeData.require===n.nodeData.require&&j.nodeData.systemVariable===n.nodeData.systemVariable&&j.nodeData.bindValue===n.nodeData.bindValue&&j.nodeData.bindValueType===n.nodeData.bindValueType&&j.nodeData.description===n.nodeData.description&&j.nodeData.subArgs===n.nodeData.subArgs&&j.showCheck===n.showCheck});oa.displayName="TreeNodeTitleBody";var gr=oa,hr=s(64599),tt=s.n(hr),xr=function(n,t){var r=(0,Te.useModel)("workflow"),a=r.setIsModified,i=(0,l.useRef)(n),p=(0,l.useCallback)(function(g,o){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],u=tt()(g),I;try{for(u.s();!(I=u.n()).done;){var m=I.value,f=[].concat(W()(F),[m]);if(m.key===o)return f;if(m.subArgs){var v=p(m.subArgs,o,f);if(v)return v}}}catch(N){u.e(N)}finally{u.f()}return null},[]),d=(0,l.useCallback)(function(g){var o=c()(c()({},g),{},{require:!1});return g.subArgs&&(o.subArgs=g.subArgs.map(function(F){return d(F)})),o},[]),S=(0,l.useCallback)(function(g,o,F){return F>o.length?g:g.map(function(u){if(u.key===o[F].key){var I=c()(c()({},u),{},{require:!0});return F<o.length-1&&u.subArgs?c()(c()({},I),{},{subArgs:S(u.subArgs,o,F+1)}):I}return u})},[]),A=(0,l.useCallback)(function(g,o){return g.map(function(F){return F.key===o.key?o:F.subArgs?c()(c()({},F),{},{subArgs:A(F.subArgs,o)}):F})},[]),y=(0,l.useCallback)(function(){var g=Q()(V()().mark(function o(F,u){var I,m,f;return V()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!u){N.next=7;break}if(m=p(i.current,F.key),m){N.next=4;break}return N.abrupt("return");case 4:I=S(i.current,m,0),N.next=9;break;case 7:f=d(F),I=A(i.current,f);case 9:t(I),a(!0);case 11:case"end":return N.stop()}},o)}));return function(o,F){return g.apply(this,arguments)}}(),[i.current,p,S,d,A,t,a]);return(0,l.useEffect)(function(){return i.current=n,function(){i.current=[]}},[n]),(0,l.useMemo)(function(){return{updateRequireStatus:y}},[y,n,t,a])},Cr=function j(n,t,r,a,i,p){return n.map(function(d){if(d.key===t){var S=c()(c()({},d),{},tn()(tn()({},r,a),"bindValueType",i||d.bindValueType));return p&&(S.dataType=p),S}return d.subArgs?c()(c()({},d),{},{subArgs:j(d.subArgs,t,r,a,i,p)}):d})},yr=function j(n,t){return n.filter(function(r){return r.key===t?!1:(r.subArgs&&(r.subArgs=j(r.subArgs,t)),!0)})},jr=function j(n,t,r){return n.map(function(a){return a.key===t?c()(c()({},a),{},{subArgs:[].concat(W()(a.subArgs||[]),[r])}):a.subArgs?c()(c()({},a),{},{subArgs:j(a.subArgs,t,r)}):a})},ua=function j(n){return n.map(function(t){var r=c()(c()({},t),{},{key:t.key||(0,ae.Z)()});return r.subArgs&&r.subArgs.length>0&&(r.subArgs=j(r.subArgs)),r})},Nr=function(n,t,r){var a=(0,l.useState)([]),i=$()(a,2),p=i[0],d=i[1],S=(0,l.useState)([]),A=$()(S,2),y=A[0],g=A[1],o=(0,Te.useModel)("workflow"),F=o.setIsModified;(0,l.useEffect)(function(){var k=n?ua((0,Qe.Xh)(n)):[];d(k)},[]);var u=(0,l.useCallback)(function(k){return t.setFieldValue(r,k),F(!0),k},[t,r,F]),I=(0,l.useCallback)(function(k,P){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,K=tt()(k),O;try{for(K.s();!(O=K.n()).done;){var w=O.value;if(w.key===P)return B;if(w.subArgs){var H=I(w.subArgs,P,B+1);if(H)return H}}}catch(ee){K.e(ee)}finally{K.f()}return 0},[]),m=(0,l.useCallback)(function(k){var P=[];return k.forEach(function(B){B.subArgs&&B.subArgs.length>0&&(P.push(B.key),P.push.apply(P,W()(m(B.subArgs))))}),P},[]),f=(0,l.useCallback)(function(k){var P=ua(k);d(P),u(P)},[u]),v=(0,l.useCallback)(function(){var k={key:(0,ae.Z)(),name:"",description:"",dataType:C.Gi.String,require:!1,systemVariable:!1,bindValueType:"Input",bindValue:""};d(function(P){var B=[].concat(W()(P),[k]);return u(B)})},[u]),N=(0,l.useCallback)(function(k){d(function(P){var B=I(P,k);if(B>=4)return P;var K={key:(0,ae.Z)(),name:"",description:null,dataType:C.Gi.String,require:!1,systemVariable:!1,bindValueType:"Input",bindValue:""},O=jr(P,k,K);return u(O)}),g(function(P){return Array.from(new Set([].concat(W()(P),[k])))})},[I,u]),E=(0,l.useCallback)(function(k){d(function(P){var B=yr(P,k);return u(B)})},[u]),T=(0,l.useCallback)(function(k,P,B,K,O){d(function(w){var H=Cr(w,k,P,B,K,O);return u(H)})},[u]),Z=(0,l.useMemo)(function(){return m(p)},[p,m]);return(0,l.useEffect)(function(){g(Z)},[Z]),(0,l.useMemo)(function(){return{treeData:p,expandedKeys:y,setExpandedKeys:g,addRootNode:v,addChildNode:N,deleteNode:E,updateNodeField:T,getNodeDepth:I,updateTreeData:f}},[p,y,g,v,N,E,T,I,f])},da=function(n){var t=n.params,r=n.form,a=n.title,i=n.inputItemName,p=i===void 0?"inputArgs":i,d=n.notShowTitle,S=n.showCheck,A=n.isBody,y=n.isNotAdd,g=Nr(t,r,p),o=g.treeData,F=g.expandedKeys,u=g.setExpandedKeys,I=g.addRootNode,m=g.addChildNode,f=g.deleteNode,v=g.updateNodeField,N=g.updateTreeData,E=xr(o,N),T=E.updateRequireStatus,Z=(0,l.useCallback)(I,[I]),k=(0,l.useCallback)(function(B,K){return A?(0,e.jsx)(gr,{nodeData:B,showCheck:S,onUpdateField:v,onAddChild:m,onDelete:f,onUpdateRequire:T}):(0,e.jsx)(pr,{nodeData:B,form:r,showCheck:S,isNotAdd:y,onUpdateField:v,onAddChild:m,onDelete:f,onUpdateRequire:T},"treeNodeTitle-".concat(B.key||K))},[A,S,r,y,v,m,f,T]),P=!y&&(!d||r.getFieldValue("outputType")==="JSON");return(0,e.jsxs)("div",{children:[(0,e.jsx)(vr,{title:a,form:r,notShowTitle:d,showAddButton:P,onChange:function(K){return N(K)},onAddRoot:Z}),o&&o.length>0&&(0,e.jsx)(dr,{showCheck:S,isBody:A}),(0,e.jsx)(bt.Z,{switcherIcon:(0,e.jsx)(Ot.Z,{}),defaultExpandAll:!0,defaultExpandParent:!0,blockNode:!0,expandedKeys:F,treeData:o,fieldNames:{title:"name",key:"key",children:"subArgs"},onExpand:function(K){return u(K)},titleRender:function(K){return k(K,K.key)},className:"".concat(o.find(function(B){return B.subArgs&&B.subArgs.length>0})?"tree-form-style":"tree-form-style-no-child")})]})};da.displayName="CustomTree";var at=da,Er=function(n){var t=[{label:"OpenAI",options:[]},{label:"Ollama",options:[]}];return n.forEach(function(r){var a=t.find(function(i){return i.label===r.apiProtocol});a&&a.options.push(r)}),t},Sr=s(7115),Ar=s(68265),br=s(86250),Ut=s(19979),Kt=s(96074),Fr=function(n){var t=n.item,r=t.icon,a=t.name,i=t.description;return(0,e.jsxs)("div",{className:"dis-left model-list-item-style",children:[(0,e.jsx)("img",{src:r,alt:""}),(0,e.jsxs)("div",{className:"dis-col",children:[(0,e.jsx)("div",{className:"dis-left",children:(0,e.jsx)("span",{className:"model-list-item-label",children:a})}),(0,e.jsx)("span",{className:"model-list-item-desc text-ellipsis-2",children:i})]})]})},Ir=Fr,Tr=function(n){var t=n.form,r=n.modelConfig,a=(0,l.useState)([]),i=$()(a,2),p=i[0],d=i[1],S=(0,l.useState)([]),A=$()(S,2),y=A[0],g=A[1],o=(0,l.useState)(!1),F=$()(o,2),u=F[0],I=F[1],m=(0,Te.useParams)(),f=m.spaceId,v=function(){var E=Q()(V()().mark(function T(){var Z;return V()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,I(!0),P.next=4,kn.ZP.getModelListByWorkflowId({modelType:"Chat",spaceId:f});case 4:Z=P.sent,d(Z.data),g(Er(Z.data)),P.next=12;break;case 9:P.prev=9,P.t0=P.catch(0),console.error("Failed to fetch graph data:",P.t0);case 12:return P.prev=12,I(!1),P.finish(12);case 15:case"end":return P.stop()}},T,null,[[0,9,12,15]])}));return function(){return E.apply(this,arguments)}}(),N=function(T){if(t.getFieldValue("modelId")===null)return null;var Z=[].concat(W()(p),[r?.id!==void 0?{id:r?.id,name:r?.name}:{}]).find(function(k){return k.id===Number(T.value)});return(0,e.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,e.jsx)("span",{children:Z&&Z.name||""})})};return(0,l.useEffect)(function(){v()},[]),(0,e.jsx)(h.Z.Item,{name:"modelId",children:(0,e.jsx)(Sn.Z,{placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B",style:{width:"100%",marginTop:"10px"},className:"input-style",labelRender:N,placement:"bottomLeft",popupMatchSelectWidth:!1,loading:u,children:y?.map(function(E,T){return(0,e.jsx)(l.Fragment,{children:E.options.map(function(Z,k){return(0,e.jsx)(Sn.Z.Option,{value:Z.id,label:(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Z.icon&&(0,e.jsx)("img",{src:Z.icon,alt:"",style:{width:"20px",height:"20px",marginRight:"8px"}}),(0,e.jsx)("span",{children:Z.name})]}),children:(0,e.jsx)(Ir,{item:Z})},"".concat(T,"-").concat(k))})},"model-options-".concat(T))})})})},Dr=[{label:"\u7CBE\u786E\u6A21\u5F0F",value:"Precision"},{label:"\u5E73\u8861\u6A21\u5F0F",value:"Balanced"},{label:"\u521B\u610F\u6A21\u5F0F",value:"Creative"},{label:"\u81EA\u5B9A\u4E49",value:"Customization"}],ca={Precision:{temperature:.1,topP:.7,maxTokens:1024},Balanced:{temperature:1,topP:.7,maxTokens:1024},Creative:{temperature:1,topP:.8,maxTokens:1024}},Wt=function(n){var t=n.title,r=n.configKey,a=n.content,i=n.min,p=n.max,d=n.step,S=n.form,A=function(g){g!==null&&S.setFieldsValue(tn()(tn()({},r,g),"mode","Customization"))};return(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsxs)("div",{className:"dis-left label-style",children:[(0,e.jsx)("span",{className:"mr-16",children:t}),(0,e.jsx)(me.Z,{content:a,children:(0,e.jsx)(Wn.Z,{})})]}),(0,e.jsx)(h.Z.Item,{style:{marginBottom:"0",flex:1},noStyle:!0,children:(0,e.jsxs)(br.Z,{gap:"middle",children:[(0,e.jsx)(h.Z.Item,{name:r,noStyle:!0,children:(0,e.jsx)(Ut.Z,{min:i,max:p,className:"slider-style",step:d,value:S.getFieldValue(r),onChange:A,style:{width:280}})}),(0,e.jsx)(h.Z.Item,{name:r,children:(0,e.jsx)(Dn.Z,{min:i,max:p,step:d,size:"small",style:{margin:"0 16px"},className:"input-style",value:S.getFieldValue(r),onChange:A})})]})})]})},kr=function(n){var t=n.form,r=(0,l.useState)(!0),a=$()(r,2),i=a[0],p=a[1],d=h.Z.useWatch("mode",t),S=function(m){if(m!=="Customization"&&ca[m]){var f=ca[m],v=f.temperature,N=f.topP,E=f.maxTokens;t.setFieldsValue({temperature:v,topP:N,maxTokens:E,mode:m})}else t.setFieldsValue({mode:"Customization"})},A=(0,l.useState)(4093),y=$()(A,2),g=y[0],o=y[1],F=(0,Te.useParams)(),u=F.spaceId;return(0,l.useEffect)(function(){var I=function(){var m=Q()(V()().mark(function f(){var v,N,E,T;return V()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return N=t.getFieldsValue(!0),E=N.modelId,k.next=3,kn.ZP.getModelListByWorkflowId({modelType:"Chat",spaceId:u});case 3:T=k.sent,o(((v=T.data.find(function(P){return P.id===E}))===null||v===void 0?void 0:v.maxTokens)||4093);case 5:case"end":return k.stop()}},f)}));return function(){return m.apply(this,arguments)}}();I()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"model-dispose-mode-style",children:[(0,e.jsx)("div",{className:"model-title-style border-bottom",children:"\u6A21\u578B"}),(0,e.jsxs)("div",{className:"dis-sb margin-top-10",children:[(0,e.jsx)("span",{className:"dispose-title-style",children:"\u751F\u6210\u591A\u6837\u6027"}),(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(h.Z.Item,{name:"mode",style:{marginBottom:0},children:(0,e.jsx)(In.ZP.Group,{optionType:"button",className:"radio-button-style",options:Dr,onChange:function(m){return S(m.target.value)},value:d,block:!0})}),(0,e.jsxs)("div",{onClick:function(){return p(!i)},className:"right-content-style",children:[(0,e.jsx)("span",{children:"\u9AD8\u7EA7\u8BBE\u7F6E"}),i?(0,e.jsx)(Sr.Z,{}):(0,e.jsx)(Ar.Z,{})]})]})]}),(0,e.jsxs)("div",{style:{display:i?"block":"none"},children:[(0,e.jsx)(Wt,{form:t,min:0,max:1,step:.1,title:"\u751F\u6210\u968F\u673A\u6027",configKey:"temperature",content:"temperature: \u8C03\u9AD8\u6E29\u5EA6\u4F1A\u4F7F\u5F97\u6A21\u578B\u7684\u8F93\u51FA\u66F4\u591A\u6837\u6027\u548C\u521B\u65B0\u6027\uFF0C\u53CD\u4E4B\uFF0C\u964D\u4F4E\u6E29\u5EA6\u4F1A\u4F7F\u8F93\u51FA\u5185\u5BB9\u66F4\u52A0\u9075\u5FAA\u6307\u4EE4\u8981\u6C42\u4F46\u51CF\u5C11\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E 'Top p' \u540C\u65F6\u8C03\u6574\u3002"}),(0,e.jsx)(Wt,{form:t,min:0,max:1,step:.1,title:"Top P",configKey:"topP",content:"Top p \u4E3A\u7D2F\u8BA1\u6982\u7387: \u6A21\u578B\u5728\u751F\u6210\u8F93\u51FA\u65F6\u4F1A\u4ECE\u6982\u7387\u6700\u9AD8\u7684\u8BCD\u6C47\u5F00\u59CB\u9009\u62E9\uFF0C\u76F4\u5230\u8FD9\u4E9B\u8BCD\u6C47\u7684\u603B\u6982\u7387\u7D2F\u79EF\u8FBE\u5230 Top p \u503C\u3002\u8FD9\u6837\u53EF\u4EE5\u9650\u5236\u6A21\u578B\u53EA\u9009\u62E9\u8FD9\u4E9B\u9AD8\u6982\u7387\u7684\u8BCD\u6C47\uFF0C\u4ECE\u800C\u63A7\u5236\u8F93\u51FA\u5185\u5BB9\u7684\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E '\u751F\u6210\u968F\u673A\u6027' \u540C\u65F6\u8C03\u6574\u3002"})]}),(0,e.jsx)(Kt.Z,{}),(0,e.jsx)("div",{className:"dispose-title-style",children:"\u8F93\u5165\u53CA\u8F93\u51FA\u8BBE\u7F6E"}),(0,e.jsx)(Wt,{form:t,min:5,max:g,step:1,title:"\u6700\u5927\u56DE\u590D\u957F\u5EA6",configKey:"maxTokens",content:"\u63A7\u5236\u6A21\u578B\u8F93\u51FA\u7684 Tokens \u957F\u5EA6\u4E0A\u9650\u3002\u901A\u5E38 100 Tokens \u7EA6\u7B49\u4E8E 150 \u4E2A\u4E2D\u6587\u6C49\u5B57\u3002"})]})})},Gt=function(n){var t=n.form,r=n.modelConfig;return(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u6A21\u578B"}),(0,e.jsx)(me.Z,{content:(0,e.jsx)(kr,{form:t}),trigger:"click",placement:"left",children:(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(Ft.Z,{}),size:"small"})})]}),(0,e.jsx)(Tr,{form:t,modelConfig:r})]})},Rr=s(4735),wr=s(3622),Zr=s(57381),Mn={"skill-list":"skill-list___myZuC","skill-dispose-modal-style":"skill-dispose-modal-style___vhnmJ","ant-modal-header":"ant-modal-header___xYl_z","ant-modal-content":"ant-modal-content___s2QyI","ant-modal-footer":"ant-modal-footer___zkcBw","skill-item-dispose-mask":"skill-item-dispose-mask___UWhqe","skill-item-container":"skill-item-container___suWbg","skill-item-style":"skill-item-style___Yzmv7","skill-item-icon":"skill-item-icon___bOVOI","skill-item-content-style":"skill-item-content-style___hAIJw","skill-item-title-style":"skill-item-title-style___hdurd","skill-item-desc-style":"skill-item-desc-style___s7EZB","mask-layer-style":"mask-layer-style___c42Qv","skill-params-description":"skill-params-description___NiVJd","skill-dispose-container":"skill-dispose-container___lkRrz","skill-dispose-left":"skill-dispose-left___TfYks","skill-dispose-left-title":"skill-dispose-left-title___C0Eun","skill-menu-style":"skill-menu-style___M8lz5","select-menu":"select-menu___ENzUV","skill-dispose-right":"skill-dispose-right___dSXOM","content-title-style":"content-title-style___hwirH","content-item-style":"content-item-style___iS0xn","content-center-item-style":"content-center-item-style___VjZoq","content-right-item-style":"content-right-item-style___r2QbX","output-style":"output-style___K0ods","output-remark-style":"output-remark-style___IOtW4","tree-title-style":"tree-title-style___Jw5lz",white:"white___ZOJgo","skill-tree":"skill-tree____z6Lg","dis-no-wrap":"dis-no-wrap___vOvTN","database-tag-style":"database-tag-style___SAQdi","background-c9":"background-c9___lgoPg"},It=s(85576),Br=s(17176),yt={"modal-container":"modal-container___vk9mh",container:"container___O4FsC",left:"left___UJiFa",right:"right___u_Jgi",close:"close___sIdxz"},Tt=le().bind(yt),Pr=function(n){var t=n.open,r=n.inputArgBindConfigs,a=n.variables,i=n.onCancel,p=n.onSave,d=function(A){p(A)};return(0,e.jsx)(It.Z,{centered:!0,open:t,onCancel:i,className:Tt(yt["modal-container"]),modalRender:function(){return(0,e.jsxs)("div",{className:Tt(yt.container,"overflow-hide","flex","flex-col"),children:[(0,e.jsx)("div",{className:Tt("flex-1",yt.right),children:(0,e.jsx)(Br.Z,{style:{paddingTop:"48px"},variables:a,inputArgBindConfigs:r,onSaveSet:d})}),(0,e.jsx)(Pe.Z,{className:Tt(yt.close,"cursor-pointer"),onClick:i})]})}})},Lr=Pr,Bn=le().bind(Mn),va=function(n,t){return n.length>t?n.slice(0,t)+"...":n},Or=function(n){var t=n.params;return(0,e.jsx)("div",{style:{maxWidth:"300px"},children:(t||[]).map(function(r){return(0,e.jsxs)("div",{style:{padding:"3px 0"},children:[(0,e.jsxs)("div",{className:Bn("dis-left"),children:[(0,e.jsx)("span",{className:Bn("mr-16"),children:va(r.name,30)}),(0,e.jsx)(sn.Z,{color:"#C9CDD4",children:r.dataType})]}),(0,e.jsx)("p",{className:Bn(Mn["skill-params-description"]),children:va(r.description||"",70)})]},r.name)})})},Mr=function(n){var t=n.params,r=n.disabled,a=r===void 0?!1:r,i=n.removeItem,p=n.modifyItem,d=n.variables,S=d===void 0?[]:d,A=n.loading,y=A===void 0?!1:A,g=(0,l.useState)(null),o=$()(g,2),F=o[0],u=o[1],I=(0,l.useState)(!1),m=$()(I,2),f=m[0],v=m[1],N=(0,l.useState)(!1),E=$()(N,2),T=E[0],Z=E[1],k=function(H){i(H)},P=function(H){p(c()(c()({},F),{},{inputArgBindConfigs:H.inputArgBindConfigs})),v(!1),u(null)},B=function(H){var ee=H.inputArgBindConfigs,ne=(0,wr.T6)(ee||[]);u(c()(c()({},H),{},{inputArgBindConfigs:ne})),v(!0)},K=function(H){return F?.typeId===H.typeId&&(F?.toolName||"")===(H.toolName||"")},O=(0,l.useCallback)(function(w,H){return"".concat(H,"-").concat(w?.type,"-").concat(w?.typeId,"-").concat(w?.toolName||"")},[]);return(0,e.jsxs)("div",{className:Bn(Mn["skill-list"],"relative"),children:[t.length&&(0,e.jsx)(Zr.Z,{spinning:y,delay:200,style:{display:y?"block":"none",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3}})||null,t.map(function(w,H){return(0,e.jsx)("div",{className:Bn(Mn["skill-item-container"],H===0&&"margin-top-10"),children:(0,e.jsxs)("div",{className:Bn(Mn["skill-item-style"],"dis-left"),style:{opacity:a?.5:1,cursor:a?"not-allowed":"pointer"},onMouseEnter:function(){u(w),Z(!0)},onMouseLeave:function(){return Z(!1)},children:[(0,e.jsx)("img",{src:w.icon||(0,oe.Pk)(w.targetType),alt:"",className:Bn(Mn["skill-item-icon"])}),(0,e.jsxs)("div",{className:Bn(Mn["skill-item-content-style"]),children:[(0,e.jsx)("div",{className:Bn(Mn["skill-item-title-style"]),children:w.name}),(0,e.jsx)("div",{className:Bn(Mn["skill-item-desc-style"]),children:w.description})]}),K(w)&&T&&(0,e.jsx)("div",{className:Bn(Mn["mask-layer-style"]),children:(0,e.jsxs)("div",{className:Bn(Mn["skill-item-dispose-style"],Mn["skill-item-dispose-mask"]),children:[w.inputArgBindConfigs&&w.inputArgBindConfigs.length&&(0,e.jsx)(me.Z,{content:(0,e.jsx)(Or,{params:w.inputArgBindConfigs}),placement:"right",trigger:"hover",children:(0,e.jsx)(Wn.Z,{className:Bn("white")})}),(0,e.jsx)(me.Z,{content:"\u7F16\u8F91\u53C2\u6570",trigger:"hover",children:(0,e.jsx)(Ft.Z,{className:Bn("ml-12 cursor-pointer white"),onClick:function(){B(w),v(!0)}})}),!a&&(0,e.jsx)(me.Z,{content:"\u79FB\u9664",trigger:"hover",children:(0,e.jsx)(nt.Z,{className:Bn("ml-12  white"),onClick:function(){return k(w)}})})]})})]})},O(w,"skill"))}),(0,e.jsx)(Lr,{open:f,variables:S,inputArgBindConfigs:F?.inputArgBindConfigs,onSave:P,onCancel:function(){return v(!1)}},O(F,"setting"))]})},Ht=s(87025),jt=s(11475),Dt=s(86647),Ln=function(n){var t=n.title,r=n.fieldConfigs,a=n.form,i=n.inputItemName,p=i===void 0?"inputArgs":i,d=n.showCopy,S=d===void 0?!1:d,A=n.disabledAdd,y=n.disabledDelete,g=n.disabledInput,o=n.isLoop,F=(0,Te.useModel)("workflow"),u=F.volid,I=r.reduce(function(m,f){return m[f.name]=null,m},{});return(0,l.useEffect)(function(){u&&a.validateFields()},[u]),(0,e.jsx)("div",{className:"form-list-style",children:(0,e.jsx)(h.Z.List,{name:p,children:function(f,v){var N=v.add,E=v.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"dis-sb ",children:[(0,e.jsx)("span",{className:"node-title-style gap-6 flex items-center",children:t}),!A&&(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(On.Z,{}),onClick:function(){return N(I)},size:"small",type:"text"})]}),f.map(function(T,Z){var k=a.getFieldValue([p,T.name,"bindValueType"]);return(0,e.jsxs)("div",{children:[Z===0&&(0,e.jsxs)("div",{className:"font-color-gray07 font-12 mt-6",children:[(0,e.jsx)("span",{children:"\u53C2\u6570\u540D"}),(0,e.jsx)("span",{style:{marginLeft:"22%"},children:"\u53D8\u91CF\u503C"})]}),(0,e.jsx)(h.Z.Item,{children:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(h.Z.Item,{label:"\u53C2\u6570\u540D",name:[T.name,"name"],noStyle:!0,children:(0,e.jsx)(ve.Z,{size:"small",style:{width:"30%",marginRight:"10px"},placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D",disabled:g})}),(0,e.jsx)(h.Z.Item,{name:[T.name,"bindValue"],noStyle:!0,children:(0,e.jsx)(Dt.Z,{form:a,fieldName:[p,T.name,"bindValue"],style:{flex:1,marginRight:"10px"},referenceType:k,isLoop:o})}),(0,e.jsx)(h.Z.Item,{name:[T.name,"bindType"],noStyle:!0,hidden:!0,children:(0,e.jsx)(ve.Z,{type:"hidden"})}),S&&(0,e.jsx)(me.Z,{content:(0,e.jsx)(h.Z.Item,{name:[T.name,"description"],noStyle:!0,children:(0,e.jsx)(ve.Z.TextArea,{autoSize:{minRows:3,maxRows:5}})}),trigger:"click",children:(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(Mt.Z,{}),className:"margin-right",size:"small",type:"text"})}),!y&&(0,e.jsx)(h.Z.Item,{name:[T.name,"require"],noStyle:!0,children:(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(nt.Z,{}),size:"small",type:"text",onClick:function(){return E(T.name)}})})]})},T.key)]},T.name)})]})}})})},Vr=function(n){var t=n.title,r=n.inputItemName,a=r===void 0?"conditionArgs":r,i=n.disabledAdd,p=n.disabledDelete,d=n.disabledInput;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(h.Z.List,{name:a,children:function(A,y){var g=y.add,o=y.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:t}),!i&&(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(On.Z,{}),size:"small",type:"text",onClick:function(){return g({key:(0,ae.Z)(),name:"",bindValue:"",dataType:C.Gi.String})}})]}),A.map(function(F,u){return(0,e.jsxs)("div",{children:[u===0&&(0,e.jsxs)("div",{className:"font-color-gray07",children:[(0,e.jsx)("span",{children:"\u53C2\u6570\u540D"}),(0,e.jsx)("span",{style:{marginLeft:"20%"},children:"\u53D8\u91CF\u503C"})]}),(0,e.jsx)(h.Z.Item,{children:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(h.Z.Item,{label:"\u53C2\u6570\u540D",name:[F.name,"name"],noStyle:!0,children:(0,e.jsx)(ve.Z,{size:"small",style:{width:"30%",marginRight:"10px"},placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D",disabled:d})}),(0,e.jsx)(h.Z.Item,{label:"\u53D8\u91CF\u540D",name:[F.name,"bindValue"],noStyle:!0,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u503C",size:"small",style:{width:"55%",marginRight:"10px"}})}),!p&&(0,e.jsx)(h.Z.Item,{noStyle:!0,children:(0,e.jsx)(nt.Z,{onClick:function(){return o(F.name)}})})]})},F.key)]},F.key)})]})}})})},rt=function(n){var t=n.treeData,r=(0,l.useState)([]),a=$()(r,2),i=a[0],p=a[1];(0,l.useEffect)(function(){var S=function A(y){var g=[];return y.forEach(function(o){o.subArgs&&o.subArgs.length>0&&(g.push(o.key),g.push.apply(g,W()(A(o.subArgs))))}),g};p(S(t))},[t]);var d=function S(A){return A.map(function(y){return c()(c()({},y),{},{title:(0,e.jsxs)("span",{children:[y.name," ",(0,e.jsx)(sn.Z,{color:"#C9CDD4",style:{marginLeft:"5px"},children:fn.zx[y.dataType]})]}),children:y.subArgs?S(y.subArgs):void 0})})};return(0,e.jsx)(bt.Z,{showLine:!0,expandedKeys:i,onExpand:function(A){return p(A)},switcherIcon:(0,e.jsx)(Ot.Z,{}),treeData:d(t),defaultExpandAll:!0})},Yl=function(n){var t=n.options,r=n.placeholder,a=n.onChange,i=function(S){a&&a(S)},p=function(S){return _jsx(Select.Option,{value:S.value,children:_jsxs("span",{className:"option-container",children:[_jsx(Checkbox,{}),_jsx("span",{children:S.label})]})},S.value)};return _jsx(Select,{mode:"multiple",showSearch:!0,placeholder:r,optionLabelProp:"label",onChange:i,filterOption:function(S,A){var y;return A==null||(y=A.props.children)===null||y===void 0?void 0:y.toString().toLowerCase().includes(S.toLowerCase())},dropdownRender:function(S){return _jsx("div",{className:"custom-dropdown",children:React.cloneElement(S,{className:"".concat(S.props.className," custom-menu")})})},tokenSeparators:[","],style:{width:"100%"},children:t.map(p)})},pa=function(n){var t=n.form,r=n.title,a=n.field,i=n.inputItemName,p=i===void 0?"inputArgs":i,d=n.showIndex,S=n.limitAddLength,A=S===void 0?-1:S,y=(0,l.useState)(!1),g=$()(y,2),o=g[0],F=g[1],u=h.Z.useWatch(p,{form:t,preserve:!0});return(0,l.useEffect)(function(){A>-1&&F((u?.length||0)>=A)},[u,t,A]),(0,e.jsx)(h.Z.List,{name:p,children:function(m,f){var v=f.add,N=f.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:r}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(On.Z,{}),size:"small",type:"text",disabled:o,onClick:function(){var T=t.getFieldValue(p)||[],Z=Math.max(0,T.length-1);v(tn()(tn()(tn()(tn()({},a,""),"index",T.length),"nextNodeIds",[]),"uuid",(0,ae.Z)()),Z),t.submit()}})]}),m.map(function(E,T){var Z=!1;return t.getFieldValue([p,E.name,"intentType"])==="OTHER"&&(Z=!0),t.getFieldValue([p,E.name,"content"])==="\u6B64\u9009\u9879\u7528\u6237\u4E0D\u53EF\u89C1\uFF0C\u7528\u6237\u56DE\u590D\u65E0\u5173\u5185\u5BB9\u65F6\u8D70\u6B64\u5206\u652F"&&(Z=!0),(0,e.jsx)(h.Z.Item,{children:(0,e.jsxs)("div",{className:"dis-left",children:[d&&(0,e.jsx)(h.Z.Item,{noStyle:!0,name:[E.name,"index"],children:(0,e.jsx)("span",{className:"mr-16",children:Ve.bQ[T]})}),(0,e.jsx)(h.Z.Item,{name:[E.name,a],className:"flex-1",children:(0,e.jsx)(ve.Z,{disabled:Z,onBlur:function(){t.submit()}})}),!Z&&m.length>2&&(0,e.jsx)(h.Z.Item,{noStyle:!0,children:(0,e.jsx)(nt.Z,{className:"ml-10",onClick:function(){N(E.name),t.submit()}})})]})},E.name+"_"+Ve.bQ[T])})]})}})},ql=function(n){var t=n.form,r=n.title,a=n.inputItemName;return _jsx(_Fragment,{children:_jsx(Form.List,{name:a,children:function(p){return _jsxs(_Fragment,{children:[_jsx("span",{className:"node-title-style",children:r}),p.map(function(d,S){var A=t.getFieldValue([a,d.name,"bindValueType"]);return _jsxs("div",{children:[S===0&&_jsxs(_Fragment,{children:[_jsx("span",{children:"\u53C2\u6570\u540D"}),_jsx("span",{style:{marginLeft:"25%"},children:"\u53C2\u6570\u503C"})]}),_jsx(Form.Item,{children:_jsxs("div",{className:"dis-left",children:[_jsx(Form.Item,{noStyle:!0,name:[d.name,"bindValue"],children:_jsxs("div",{className:"dis-left node-form-label-style",children:[_jsx("span",{className:"margin-right-6 font-12 form-name-style",children:t.getFieldValue([a,d.name,"name"])}),_jsx(Popover,{placement:"right",content:t.getFieldValue([a,d.name,"description"]),children:_jsx(InfoCircleOutlined,{className:"margin-right-6 font-12"})})]})}),_jsx(Form.Item,{name:[d.name,"bindValue"],noStyle:!0,children:_jsx(InputOrReference,{form:t,fieldName:[a,d.name,"bindValue"],style:{width:"65%"},referenceType:A})})]})},d.key)]},d.name)})]})}})})},Ur=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"PATCH",value:"PATCH"}],Kr=[{label:"\u65E0",value:C.lT.OTHER,style:{marginTop:3,marginBottom:3}},{label:"form-data",value:C.lT.FORM_DATA,style:{marginTop:3,marginBottom:3}},{label:"json",value:C.lT.JSON,style:{marginTop:3,marginBottom:3}},{label:"x-www-form-urlencoded",value:C.lT.X_WWW_FORM_URLENCODED,style:{marginTop:3,marginBottom:3}}],Wr=fn.Ne.filter(function(j){return[ze.qR.Plugin,ze.qR.Workflow,ze.qR.MCP].includes(j.key)}),Gr=function(n){var t=n.form,r=n.id,a=n.nodeConfig,i=n.type,p=(0,l.useState)(!1),d=$()(p,2),S=d[0],A=d[1],y=(0,l.useState)(!1),g=$()(y,2),o=g[0],F=g[1],u=(0,l.useState)([]),I=$()(u,2),m=I[0],f=I[1],v=(0,l.useState)(!1),N=$()(v,2),E=N[0],T=N[1],Z=(0,l.useRef)(),k=(0,Te.useModel)("workflow"),P=k.setSkillChange,B=k.setIsModified,K=k.skillChange,O=(0,l.useState)(!1),w=$()(O,2),H=w[0],ee=w[1],ne=function(ie,ye){var dn=ie?.map(function(ln){return{type:ln.type,targetId:Number(ln.typeId),status:ye(ln),toolName:ln.toolName||""}})||[];f(dn)},q=function(ie){var ye=t.getFieldValue(Ve.Fw)||[];ie.type=ie.targetType,ie.typeId=ie.targetId,t.setFieldValue(Ve.Fw,ye.concat([ie])),B(!0),t.submit(),T(!0)};(0,l.useEffect)(function(){return K?Z.current=setTimeout(function(){ee(!0)},300):(clearTimeout(Z.current),ee(!1)),function(){clearTimeout(Z.current)}},[K]);var te=function(ie){var ye=t.getFieldValue(Ve.Fw);if(ye){var dn=ye.filter(function(ln){return!(ln.typeId===ie.typeId&&(ln.toolName||"")===(ie.toolName||""))});t.setFieldValue(Ve.Fw,dn),B(!0),P(!0)}},ue=function(ie){var ye=t.getFieldValue(Ve.Fw);if(ye){var dn=ye.map(function(ln){return ln.typeId===ie.typeId&&(ln.toolName||"")===(ie.toolName||"")?ie:ln});t.setFieldValue(Ve.Fw,dn),B(!0),P(!0)}},Ie=function(){A(!0)},Ce=t.getFieldValue(Ve.Fw);(0,l.useEffect)(function(){ne(Ce,function(){return ze.BQ.Added})},[Ce]);var xe=(h.Z.useWatch(Ne.dy.inputArgs,{form:t,preserve:!0})||[]).filter(function(pe){return!["",null,void 0].includes(pe.name)}),ce=(0,l.useCallback)(function(){A(!1),E&&(T(!1),P(!0),B(!0),t.submit())},[E,t,P,T,A]),se=t.getFieldValue(Ve.Fw);return(0,e.jsxs)("div",{className:"model-node-style",children:[(0,e.jsx)(Gt,{form:t,modelConfig:a?.modelConfig}),(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u6280\u80FD"}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(On.Z,{}),size:"small",onClick:Ie,type:"text"})]}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return se?(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Mr,{params:se,skillName:Ve.Fw,variables:xe,form:t,removeItem:te,modifyItem:ue,loading:H})}):(0,e.jsx)(be.Z,{})}}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8F93\u5165",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:(0,e.jsxs)(e.Fragment,{children:["\u7CFB\u7EDF\u63D0\u793A\u8BCD",(0,e.jsx)(Rn.Z,{title:"\u4E3A\u5BF9\u8BDD\u63D0\u4F9B\u7CFB\u7EDF\u7EA7\u6307\u5BFC\uFF0C\u5982\u8BBE\u5B9A\u4EBA\u8BBE\u548C\u56DE\u590D\u903B\u8F91\u3002",children:(0,e.jsx)(jt.Z,{})})]}),inputFieldName:"systemPrompt",onExpand:!0,onOptimize:!0,onOptimizeClick:function(){return F(!0)},placeholder:"\u7CFB\u7EDF\u63D0\u793A\u8BCD\uFF0C\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001 {{\u53D8\u91CF\u540D[\u6570\u7EC4\u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:(0,e.jsxs)(e.Fragment,{children:["\u7528\u6237\u63D0\u793A\u8BCD",(0,e.jsx)(Rn.Z,{title:"\u5411\u6A21\u578B\u63D0\u4F9B\u7528\u6237\u6307\u4EE4\uFF0C\u5982\u67E5\u8BE2\u6216\u4EFB\u4F55\u57FA\u4E8E\u6587\u672C\u8F93\u5165\u7684\u63D0\u95EE\u3002",children:(0,e.jsx)(jt.Z,{})})]}),inputFieldName:"userPrompt",onExpand:!0,placeholder:"\u7528\u6237\u63D0\u793A\u8BCD\uFF0C\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001 {{\u53D8\u91CF\u540D[\u6570\u7EC4\u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,name:"outputArgs",children:(0,e.jsx)(at,{title:"\u8F93\u51FA",notShowTitle:!0,form:t,params:a?.outputArgs||[],inputItemName:"outputArgs"},"".concat(i,"-").concat(r,"-outputArgs"))}),(0,e.jsx)(Be.Z,{checkTag:ze.qR.Plugin,onAdded:q,open:S,addSkillLoading:H,onCancel:ce,addComponents:m,tabs:Wr}),(0,e.jsx)(Rr.Z,{title:"\u63D0\u793A\u8BCD\u4F18\u5316",open:o,onCancel:function(){F(!1)},defaultValue:t.getFieldValue("systemPrompt")||"",onReplace:function(ie){if(ie){var ye=ie;ye.includes("```")&&(ye=ye.replace(/```/g,"")),t.setFieldsValue({systemPrompt:ye||""}),B(!0),F(!1)}},targetId:r,type:Ht.U.WORKFLOW_LLM_NODE})]})},Hr=function(n){var t=n.form;return(0,e.jsxs)("div",{className:"model-node-style",children:[(0,e.jsx)(h.Z.Item,{noStyle:!0,children:(0,e.jsx)(Gt,{form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8F93\u5165",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(pa,{title:"\u610F\u56FE\u5339\u914D",form:t,field:"intent",hasUuid:!0,showIndex:!0,limitAddLength:26,inputItemName:Ne.dy.intentConfigs})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:"\u8865\u5145\u63D0\u793A\u8BCD",inputFieldName:"systemPrompt",onExpand:!0,placeholder:"\u652F\u6301\u989D\u5916\u7684\u7CFB\u7EDF\u63D0\u793A\u8BCD\uFF0C\u5982\u5BF9\u610F\u56FE\u9009\u9879\u505A\u66F4\u8BE6\u7EC6\u7684\u4F8B\u5B50\u4EE5\u589E \u5F3A\u7528\u6237\u8F93\u51FA\u4E0E\u610F\u56FE\u5339\u914D\u7684\u6210\u529F\u7387\u3002"})}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(rt,{treeData:t.getFieldValue("outputArgs")})]})}})]})},$r=function(n){var t=n.form,r=n.nodeConfig,a=n.type,i=n.id,p=function(S){var A=t.getFieldValue("options");if(S==="SELECT"&&(!A||!A.length)&&(A=[{uuid:(0,ae.Z)(),index:0,content:"",nextNodeIds:[]},{uuid:(0,ae.Z)(),index:1,content:"\u6B64\u9009\u9879\u7528\u6237\u4E0D\u53EF\u89C1\uFF0C\u7528\u6237\u56DE\u590D\u65E0\u5173\u5185\u5BB9\u65F6\u8D70\u6B64\u5206\u652F",nextNodeIds:[]}]),console.log("bb",S,t.getFieldValue("answerType")),S==="TEXT"){var y;A=(y=A)===null||y===void 0?void 0:y.map(function(g){return c()(c()({},g),{},{nextNodeIds:[]})})}t.setFieldsValue({answerType:S,options:A}),t.submit()};return(0,e.jsxs)("div",{className:"node-title-style",children:[(0,e.jsx)(Gt,{form:t}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8F93\u5165",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:"\u63D0\u95EE\u95EE\u9898",inputFieldName:"question",onExpand:!0,placeholder:"\u53EF\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(h.Z.Item,{label:"\u56DE\u7B54\u7C7B\u578B",name:"answerType",children:(0,e.jsx)(In.ZP.Group,{onChange:function(S){return p(S.target.value)},children:(0,e.jsxs)(_n.Z,{direction:"vertical",children:[(0,e.jsx)(In.ZP,{value:"TEXT",children:"\u76F4\u63A5\u56DE\u7B54"}),(0,e.jsx)(In.ZP,{value:"SELECT",children:"\u9009\u9879\u56DE\u7B54"})]})})})}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("answerType")==="TEXT"?(0,e.jsx)(at,{title:"\u8F93\u51FA",form:t,params:r?.outputArgs||[],inputItemName:"outputArgs",showCheck:!0},"".concat(a,"-").concat(i,"-outputArgs")):null}}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("answerType")==="SELECT"?(0,e.jsx)(pa,{title:"\u8BBE\u7F6E\u9009\u9879\u5185\u5BB9",form:t,field:"content",inputItemName:Ne.dy.options,hasUuid:!0,showIndex:!0}):null}})]})},zr=function(n){var t=n.form,r=n.nodeConfig,a=n.type,i=n.id,p=r?.body||[],d=r?.outputArgs||[];return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(h.Z.Item,{label:"\u8BF7\u6C42\u65B9\u6CD5\u4E0E\u8DEF\u5F84",children:(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)(h.Z.Item,{name:"method",noStyle:!0,children:(0,e.jsx)(Sn.Z,{style:{width:"30%",marginRight:"10px"},options:Ur,placeholder:"\u8BF7\u6C42\u65B9\u6CD5"})}),(0,e.jsx)(h.Z.Item,{name:"url",noStyle:!0,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u8F93\u5165url\u5730\u5740"})})]})})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(h.Z.Item,{name:"contentType",label:"\u8BF7\u6C42\u5185\u5BB9\u683C\u5F0F",children:(0,e.jsx)(In.ZP.Group,{className:"margin-bottom",options:Kr})})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(h.Z.Item,{label:"\u8BF7\u6C42\u8D85\u65F6\u914D\u7F6E",name:"timeout",children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u8F93\u5165\u8D85\u65F6\u914D\u7F6E\u65F6\u957F",addonAfter:"s"})})}),(0,e.jsxs)("div",{className:"has-child-node",children:[(0,e.jsx)("p",{className:"node-title-bold-style",children:"\u5165\u53C2"}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"Header",fieldConfigs:jn.x8,inputItemName:Ne.dy.headers,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"Query",form:t,fieldConfigs:jn.x8,inputItemName:Ne.dy.queries})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(at,{title:"Body",form:t,inputItemName:"body",isBody:!0,params:p},"".concat(a,"-").concat(i,"-body"))})]}),(0,e.jsx)(h.Z.Item,{name:"outputArgs",children:(0,e.jsx)(at,{title:"\u51FA\u53C2",form:t,inputItemName:"outputArgs",params:d},"".concat(a,"-").concat(i,"-outputArgs"))})]})},kt={ModelNode:Gr,IntentionNode:Hr,QuestionsNode:$r,HttpToolNode:zr},$t=s(3089),zt=s(44381),Jr=function(n){var t=n.form,r=function(i){if(i.destination){var p=t.getFieldValue("conditionBranchConfigs"),d=p.length-2;if(!(i.destination.index>d)){var S=p.splice(i.source.index,1),A=$()(S,1),y=A[0];p.splice(i.destination.index,0,y);var g=p.map(function(o,F){return c()(c()({},o),{},{branchType:F===0?"IF":F===p.length-1?"ELSE":"ELSE_IF"})});t.setFieldsValue({conditionBranchConfigs:g}),t.submit()}}};return(0,e.jsx)(zt.Z5,{onDragEnd:r,children:(0,e.jsx)(h.Z.List,{name:"conditionBranchConfigs",children:function(i,p){var d=p.add,S=p.remove;return(0,e.jsx)(zt.bK,{droppableId:"conditionBranches",children:function(y){return(0,e.jsxs)("div",c()(c()({},y.droppableProps),{},{ref:y.innerRef,children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u6761\u4EF6\u5206\u652F"}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(On.Z,{}),type:"text",onClick:function(){var o=t.getFieldValue("conditionBranchConfigs")||[],F=Math.max(0,o.length-1);d({uuid:(0,ae.Z)(),conditionType:"AND",conditionArgs:[{compareType:"EQUAL",firstArg:{bindValue:""},secondArg:{bindValue:""}}],nextNodeIds:[],branchType:"ELSE_IF"},F),t.submit()}})]}),i.map(function(g,o){var F=o===i.length-1;if(!F){var u=t.getFieldValue(["conditionBranchConfigs",g.name]);return(0,e.jsx)(zt._l,{draggableId:u.uuid,index:o,children:function(m){return(0,e.jsxs)("div",c()(c()({ref:m.innerRef},m.draggableProps),{},{className:"condition-card-style",children:[(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsxs)("div",c()(c()({className:"dis-left"},m.dragHandleProps),{},{style:{cursor:"grab",width:"100%"},children:[(0,e.jsx)("span",{className:"margin-right",children:Ve.Vy[u.branchType]}),(0,e.jsxs)(sn.Z,{color:"#C9CDD4",children:["\u4F18\u5148\u7EA7",o+1]})]})),i.length>2&&(0,e.jsx)(_.ZP,{icon:(0,e.jsx)($t.Z,{}),type:"text",onClick:function(){if(S(g.name),g.name===0){var v=t.getFieldValue("conditionBranchConfigs")||[],N=v.map(function(E,T){return c()(c()({},E),{},{branchType:T===0?"IF":T===v.length-1?"ELSE":"ELSE_IF"})});t.setFieldsValue({conditionBranchConfigs:N})}t.submit()}})]}),(0,e.jsxs)(_n.Z,{children:[u.conditionArgs.length>1&&(0,e.jsx)(h.Z.Item,{noStyle:!0,shouldUpdate:function(v,N){var E,T;return((E=v.conditionBranchConfigs)===null||E===void 0||(E=E[g.name])===null||E===void 0?void 0:E.conditionArgs)!==((T=N.conditionBranchConfigs)===null||T===void 0||(T=T[g.name])===null||T===void 0?void 0:T.conditionArgs)},children:function(v){var N=v.getFieldValue,E=N(["conditionBranchConfigs",g.name,"conditionArgs"]);return E?.length>1&&(0,e.jsx)(h.Z.Item,{name:[g.name,"conditionType"],style:{marginTop:"-26px"},children:(0,e.jsx)(Sn.Z,{style:{marginRight:"4px",width:54},options:[{label:"\u4E14",value:"AND"},{label:"\u6216",value:"OR"}]})})}}),o!==i.length-1&&(0,e.jsx)(h.Z.List,{name:[g.name,"conditionArgs"],children:function(v,N){return(0,e.jsxs)("div",{className:"position-relative",children:[(0,e.jsx)("div",{className:"dis-left",children:(0,e.jsx)("div",{className:"dis-col",children:v.map(function(E){var T=t.getFieldValue(["conditionBranchConfigs",g.name,"conditionArgs",E.name,"secondArg","bindValueType"]);return(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)(h.Z.Item,{name:[E.name,"compareType"],noStyle:!0,children:(0,e.jsx)(Sn.Z,{popupMatchSelectWidth:!1,options:jn.YM,optionLabelProp:"displayValue",style:{marginRight:"10px",width:54}})}),(0,e.jsxs)("div",{children:[(0,e.jsx)(h.Z.Item,{name:[E.name,"firstArg","bindValue"],children:(0,e.jsx)(Dt.Z,{isDisabled:!0,form:t,fieldName:["conditionBranchConfigs",g.name,"conditionArgs",E.name,"firstArg","bindValue"],placeholder:"\u8BF7\u5F15\u7528\u53C2\u6570",style:{width:v.length>1?150:180}})}),(0,e.jsx)(h.Z.Item,{name:[E.name,"secondArg","bindValue"],children:(0,e.jsx)(Dt.Z,{form:t,referenceType:T,style:{width:v.length>1?150:180},fieldName:["conditionBranchConfigs",g.name,"conditionArgs",E.name,"secondArg","bindValue"]})})]}),v.length>1&&(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)($t.Z,{}),onClick:function(){N.remove(E.name)}})]},E.name)})})}),(0,e.jsx)(_.ZP,{type:"primary",onClick:function(){N.add({compareType:"EQUAL",firstArg:null,secondArg:null})},icon:(0,e.jsx)(On.Z,{}),children:"\u65B0\u589E"})]})}})]})]}))}},u.uuid)}return(0,e.jsx)("div",{className:"condition-card-style",children:"\u5426\u5219"},g.name)}),y.placeholder]}))}})}})})},Qr=Jr,Xr=function(n){var t=n.form,r=n.title,a=n.params,i=n.options,p=n.showAdd,d=n.showDelete,S=n.descText,A=S===void 0?"\u53D8\u91CF\u7C7B\u578B":S,y=n.nameText,g=y===void 0?"\u53D8\u91CF\u540D":y,o=(0,l.useState)(a||[]),F=$()(o,2),u=F[0],I=F[1],m=(0,Te.useModel)("workflow"),f=m.setIsModified,v=m.referenceList;(0,l.useEffect)(function(){a&&!$e().isEqual(a,u)&&I(a)},[a]);var N=function(K){I(K),t.setFieldValue("inputArgs",K),f(!0)},E=function(K,O,w){var H=function ne(q){return q.map(function(te){return te.key===K?c()(c()({},te),{},{bindValue:O,bindValueType:w}):te.subArgs?c()(c()({},te),{},{subArgs:ne(te.subArgs)}):te})},ee=H(u);N(ee)},T=function(K){I(function(O){var w=[].concat(W()(O),[K]);return N(w),w})},Z=function(K){var O=u.filter(function(w){return w.key!==K});N(O),f(!0)},k=(0,e.jsx)(e.Fragment,{children:i?.filter(function(B){return!u.some(function(K){return K.name===B.key})&&!B.systemVariable}).map(function(B){return(0,e.jsxs)("div",{className:"dis-sb cursor-pointer mb-6",onClick:function(){return T(B)},style:{width:220},children:[(0,e.jsx)("span",{children:B.name}),(0,e.jsx)(sn.Z,{color:"#C9CDD4",children:B.dataType})]},B.key)})}),P=function(K){return(0,e.jsxs)("div",{className:"dis-sb",style:{width:"100%"},children:[(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("span",{className:"margin-right-6 font-12 ",children:K.name}),(0,e.jsx)(me.Z,{styles:{body:{maxWidth:"300px"}},content:K.description||"\u6682\u65E0\u63CF\u8FF0",children:(0,e.jsx)(Wn.Z,{className:"margin-right-6 font-12"})})]}),(0,e.jsx)("div",{style:{width:"175px"},children:(0,e.jsx)(la,{data:v,referenceType:K.bindValueType||"Input",onChange:function(w,H){E(K.key,w,H)},value:K.bindValue})}),d&&(0,e.jsx)(nt.Z,{style:{marginLeft:"6px"},onClick:function(){return Z(K.key)}})]})};return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:r}),p&&(0,e.jsx)(me.Z,{content:k,trigger:"click",children:(0,e.jsx)(_.ZP,{type:"text",size:"small",icon:(0,e.jsx)(On.Z,{})})})]}),u&&u.length>0&&(0,e.jsxs)("div",{className:"dis-left font-12 mb-6 font-color-gray07",children:[(0,e.jsx)("span",{style:{marginLeft:"1%"},children:g}),(0,e.jsx)("span",{style:{marginLeft:d?"30%":"35%"},children:A})]}),(0,e.jsx)(bt.Z,{treeData:u,defaultExpandAll:!0,fieldNames:{title:"name",key:"key",children:"subArgs"},titleRender:P,switcherIcon:null,showIcon:!1,className:"tree-input-style"})]})},Jt=Xr,_l=s(89118),Yr=function(n){var t=n.icon,r=n.name,a=n.description,i=n.showParams,p=n.params,d=(0,l.useState)(!1),S=$()(d,2),A=S[0],y=S[1];return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"skill-item-style background-c9 dis-sb",children:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("img",{src:!t||t===""?(0,oe.Pk)(ze.qR.Table):t,alt:"",className:"skill-item-icon"}),(0,e.jsxs)("div",{className:"skill-item-content-style",children:[(0,e.jsx)("div",{className:"skill-item-title-style",children:r}),(0,e.jsx)("div",{className:"skill-item-desc-style",children:a})]})]})}),i&&p&&(0,e.jsx)("div",{children:A?(0,e.jsxs)("div",{className:"dis-wrap-sa margin-bottom",children:[p?.map(function(g){return(0,e.jsx)("div",{className:"database-tag-style",children:g},g)}),(0,e.jsx)("div",{onClick:function(){return y(!1)},className:"database-tag-style cursor-pointer",children:"\u6536\u8D77"})]}):(0,e.jsxs)("div",{className:"dis-left margin-bottom",children:[(0,e.jsx)("div",{className:"flex-1 dis-left dis-no-wrap ",children:p?.map(function(g){return(0,e.jsx)("div",{className:"database-tag-style",children:g},g)})}),(0,e.jsx)("div",{onClick:function(){return y(!0)},className:"database-tag-style cursor-pointer",children:"..."})]})})]})},qr=Yr,_r=s(35044),es=s(90740),Xn={btn:"btn___Us0pI","chat-wrapper":"chat-wrapper___uSZyL","replace-btn":"replace-btn___SHOm4",footer:"footer____WBeJ","chat-input":"chat-input___nZ16_",input:"input___Gcyqk","icon-box":"icon-box___b3mce","send-image":"send-image___QdGwv"},st=le().bind(Xn),ns=function(n){var t,r,a=n.open,i=n.onCancel,p=n.onReplace,d=n.title,S=n.tableId,A=n.inputArgs,y=(0,l.useState)(""),g=$()(y,2),o=g[0],F=g[1],u=(0,Te.useModel)("assistantOptimize"),I=u.messageList,m=u.setMessageList,f=u.onMessageSend,v=u.messageViewRef,N=u.allowAutoScrollRef,E=u.resetInit,T=(0,l.useState)(""),Z=$()(T,2),k=Z[0],P=Z[1];(0,l.useEffect)(function(){return P((0,ae.Z)()),function(){E()}},[]),(0,l.useEffect)(function(){var O=v.current;if(O){var w=function(){var ee=O.scrollTop,ne=O.scrollHeight,q=O.clientHeight;ee+q<ne?N.current=!1:N.current=!0};return O.addEventListener("scroll",w),function(){O.removeEventListener("scroll",w)}}},[]);var B=function(){var O=Q()(V()().mark(function w(H){var ee;return V()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:m([]),F(""),ee={requestId:k,prompt:H||o,tableId:S,inputArgs:A},f(ee,Ht.L.sql);case 4:case"end":return q.stop()}},w)}));return function(H){return O.apply(this,arguments)}}(),K=function(w){w.preventDefault();var H=w.target,ee=H.value,ne=H.selectionStart,q=H.selectionEnd;if(w.nativeEvent.keyCode===13&&(w.nativeEvent.shiftKey||w.nativeEvent.ctrlKey)){var te=ee.slice(0,ne)+`
`+ee.slice(q);F(te)}else if(w.nativeEvent.keyCode===13&&ee.trim()){var ue={requestId:k,prompt:o,tableId:S,inputArgs:A};f(ue,Ht.L.sql),F("")}};return(0,e.jsxs)(It.Z,{title:d,open:a,onCancel:function(w){m([]),i?.(w)},maskClosable:!1,footer:null,children:[(0,e.jsx)("div",{ref:v,className:st(Xn["chat-wrapper"],"flex-1"),children:I?.length>0&&(0,e.jsx)(e.Fragment,{children:I?.map(function(O,w){return(0,e.jsx)(es.Z,{ifShowReplace:!0,onReplace:p,messageInfo:O},w)})})}),I?.length>0&&(0,e.jsxs)("div",{className:st("flex"),children:[(0,e.jsx)(_.ZP,{className:st(Xn["replace-btn"],Xn.btn),loading:(I==null||(t=I[I?.length-1])===null||t===void 0?void 0:t.status)!=="complete",disabled:(I==null||(r=I[I?.length-1])===null||r===void 0?void 0:r.status)!=="complete",onClick:function(){var w;return p?.(I==null||(w=I[I?.length-1])===null||w===void 0?void 0:w.text)},children:"\u66FF\u6362"}),(0,e.jsx)(_.ZP,{onClick:function(w){m([]),i?.(w)},className:st(Xn.btn,"ml-10 "),children:"\u9000\u51FA"})]}),(0,e.jsx)("div",{className:st(Xn.footer,"flex","items-center"),children:(0,e.jsxs)("div",{className:st(Xn["chat-input"],"flex","items-center","w-full"),children:[(0,e.jsx)(ve.Z.TextArea,{value:o,onChange:function(w){return F(w.target.value)},rootClassName:Xn.input,onPressEnter:K,placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684SQL\u67E5\u8BE2\u9700\u6C42\uFF0C\u903B\u8F91\u5C3D\u91CF\u63CF\u8FF0\u8BE6\u7EC6",autoSize:{minRows:1,maxRows:3}}),(0,e.jsx)("img",{onClick:function(){return B()},className:st(Xn["send-image"],"cursor-pointer"),src:_r,alt:""})]})})]})},ts=ns,as=function(n){var t=n.form,r=n.type,a=n.nodeConfig,i=n.id,p=(0,l.useState)(!1),d=$()(p,2),S=d[0],A=d[1],y=(0,Te.useModel)("workflow"),g=y.setIsModified,o=[{firstArg:{bindValue:null,bindValueType:null},secondArg:{bindValue:null,bindValueType:null},compareType:null},{firstArg:{bindValue:null,bindValueType:null},secondArg:{bindValue:null,bindValueType:null},compareType:null}],F=function(){A(!0)};return(0,l.useEffect)(function(){t.getFieldValue("conditionType")||t.setFieldValue("conditionType","AND")},[t.getFieldValue("conditionType")]),(0,e.jsxs)("div",{children:[r==="TableSQL"&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8F93\u5165",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}),r!=="TableDataAdd"&&r!=="TableSQL"&&(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("p",{className:"node-title-style",children:r==="TableDataDelete"?"\u5220\u9664\u6761\u4EF6":r==="TableDataUpdate"?"\u66F4\u65B0\u6761\u4EF6":"\u67E5\u8BE2\u6761\u4EF6"}),(0,e.jsx)(h.Z.Item,{children:(0,e.jsxs)(_n.Z,{children:[(0,e.jsx)(h.Z.Item,{noStyle:!0,shouldUpdate:function(I,m){return I.conditionArgs!==m.conditionArgs},children:function(I){var m=I.getFieldValue,f=m("conditionArgs");return f?.length>1&&(0,e.jsx)(h.Z.Item,{name:"conditionType",style:{marginTop:"-26px"},initialValue:"AND",children:(0,e.jsx)(Sn.Z,{style:{marginRight:"4px",width:54},options:[{label:"\u4E14",value:"AND"},{label:"\u6216",value:"OR"}]})})}}),(0,e.jsx)(h.Z.List,{name:"conditionArgs",initialValue:o,children:function(I,m){return(0,e.jsxs)("div",{className:"position-relative",children:[I.length>=1?(0,e.jsx)("div",{className:"dis-left",children:(0,e.jsx)("div",{className:"dis-col",children:I.map(function(f){var v=t.getFieldValue(["conditionArgs",f.name,"secondArg","bindValueType"]);return(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)(h.Z.Item,{name:[f.name,"compareType"],noStyle:!0,children:(0,e.jsx)(Sn.Z,{popupMatchSelectWidth:!1,options:jn.b9,optionLabelProp:"displayValue",style:{marginRight:"10px",width:54}})}),(0,e.jsxs)("div",{children:[(0,e.jsx)(h.Z.Item,{name:[f.name,"firstArg","bindValue"],children:(0,e.jsx)(Sn.Z,{placeholder:"\u8BF7\u9009\u62E9",options:t.getFieldValue("tableFields"),fieldNames:{label:"name",value:"key"},style:{width:I.length>1?150:180}})}),(0,e.jsx)(h.Z.Item,{name:[f.name,"secondArg","bindValue"],children:(0,e.jsx)(Dt.Z,{form:t,referenceType:v,style:{width:I.length>1?150:180},fieldName:["conditionArgs",f.name,"secondArg","bindValue"]})})]}),(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)($t.Z,{}),onClick:function(){m.remove(f.name)}})]},f.name)})})}):(0,e.jsx)(be.Z,{description:"\u5F53\u524D\u67E5\u8BE2\u6570\u636E\u4E3A\u7A7A"}),(0,e.jsx)(_.ZP,{type:"primary",onClick:function(){m.add({compareType:"EQUAL",firstArg:null,secondArg:null})},icon:(0,e.jsx)(On.Z,{}),children:"\u6DFB\u52A0\u6761\u4EF6"})]})}})]})})]}),(r==="TableDataAdd"||r==="TableDataUpdate")&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Jt,{title:r==="TableDataAdd"?"\u8F93\u5165":"\u9009\u62E9\u66F4\u65B0\u5B57\u6BB5",form:t,options:t.getFieldValue("tableFields")||[],showAdd:r==="TableDataUpdate",params:t.getFieldValue("inputArgs")||[],showDelete:r==="TableDataUpdate",descText:"\u53D8\u91CF\u503C"})}),r==="TableDataQuery"&&(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("div",{className:" margin-bottom",children:(0,e.jsx)("span",{className:"node-title-style ",children:"\u67E5\u8BE2\u4E0A\u9650"})}),(0,e.jsx)(h.Z.Item,{name:"limit",children:(0,e.jsx)(Dn.Z,{min:1,max:1e3,placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u4E0A\u9650"})})]}),(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("div",{className:"dis-sb margin-bottom ",children:(0,e.jsx)("span",{className:"node-title-style",children:"\u6570\u636E\u8868"})}),t.getFieldValue("tableId")?(0,e.jsx)(qr,{icon:t.getFieldValue("icon"),name:t.getFieldValue("name"),description:t.getFieldValue("description"),params:t.getFieldValue("tableFields").map(function(u){return u.name})||[],showParams:r==="TableSQL"}):null]}),r==="TableSQL"&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:"SQL",inputFieldName:"sql",onExpand:!0,onOptimize:!0,onOptimizeClick:F,placeholder:"\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001 {{\u53D8\u91CF\u540D[\u6570\u7EC4\u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u51FA\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),r==="TableSQL"||r==="TableDataQuery"?(0,e.jsx)(h.Z.Item,{name:"inputArgs",children:(0,e.jsx)(at,{title:"\u8F93\u51FA",inputItemName:"outputArgs",params:a?.outputArgs||[],form:t,showCheck:!0,isNotAdd:!0},"".concat(r,"-").concat(i,"-outputArgs"))}):(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(rt,{treeData:t.getFieldValue("outputArgs")})]})}}),(0,e.jsx)(ts,{title:"\u751F\u6210sql\u8BED\u53E5",open:S,onCancel:function(){A(!1)},onReplace:function(I){if(I){var m=I;m.includes("```")&&(m=m.replace(/```/g,""));var f=m.startsWith("sql")?m.replace("sql","").trim():m.trim();t.setFieldsValue({sql:f||""}),g(!0)}},tableId:t.getFieldValue("tableId"),inputArgs:t.getFieldValue("inputArgs")})]})},rs=as,ss=yn.vQ.JavaScript,is=[{value:yn.vQ.JavaScript,label:"JavaScript"},{value:yn.vQ.Python,label:"Python"}],ls=function(n){var t=n.visible,r=n.onClose,a=n.value,i=n.language,p=n.onChange,d=n.disabledSwitchLanguage,S=d===void 0?!1:d,A=(0,l.useState)(i||ss),y=$()(A,2),g=y[0],o=y[1],F=(0,l.useState)(a||""),u=$()(F,2),I=u[0],m=u[1];(0,l.useEffect)(function(){m(a||"")},[a]);var f=function(E){m(E),p?.({code:E,language:g})},v=function(E){o(E),p?.({code:I,language:E})};return(0,e.jsx)(e.Fragment,{children:t&&(0,e.jsxs)("div",{className:"monaco-container",children:[(0,e.jsxs)("div",{className:"monaco-header dis-sb margin-bottom",children:[(0,e.jsxs)(_n.Z,{align:"center",wrap:!0,className:"dis-left",style:{flex:1},children:[(0,e.jsx)(ct.HF,{}),(0,e.jsx)("span",{className:"mr-16",style:{height:28,lineHeight:"20px",paddingBottom:8,display:"inline-block"},children:"\u4EE3\u7801"}),!S&&(0,e.jsx)(Sn.Z,{style:{width:120},value:g,onChange:v,options:is,size:"small",placeholder:"\u8BF7\u9009\u62E9\u8BED\u8A00"})]}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(Pe.Z,{}),size:"small",type:"text",onClick:r})]}),(0,e.jsx)("div",{className:"monaco-editor-content",children:(0,e.jsx)(ge.Z,{value:I,onChange:f,codeLanguage:g,minimap:!0,height:"790px",codeOptimizeVisible:!1})})]})})},os=ls,us=function j(n){var t={};if(!n||!n.length)return t;var r=n.filter(function(a){return!(!a.name||!a.dataType)});return r.forEach(function(a){a.dataType===C.Gi.Array_Object?t[a.name]=[j(a.subArgs||[])]:a.dataType===C.Gi.Object?t[a.name]=j(a.subArgs||[]):a.dataType.startsWith("Array_")?t[a.name]=[]:t[a.name]=""}),t};function Qt(j,n){if($e().isArray(j))return j.map(function(a,i){return Qt(a,$e().get(n,i))});if($e().isPlainObject(j)){var t={};for(var r in j)j.hasOwnProperty(r)&&(t[r]=Qt(j[r],n?.[r]));return t}else return n!==void 0?n:j}var ds=function(n){var t=n.watchField,r=n.fieldName,a=n.specificContent,i=h.Z.useFormInstance(),p=h.Z.useWatch(t,{form:i,preserve:!0}),d=h.Z.useWatch(r,{form:i,preserve:!0})||{},S=(0,l.useMemo)(function(){var A=(0,Je.Dt)(d.specificContent||a)||"{}";try{if(!p)return"";var y=us(p),g=Qt(y,JSON.parse(A));return g}catch{return""}},[p,d.specificContent,d.exceptionHandleType,a]);return S},gn={exceptionItem:"exceptionItem___wEeCK",exceptionItemHeader:"exceptionItemHeader___ZtLj2",exceptionItemTitle:"exceptionItemTitle___YcVJ6",exceptionItemTip:"exceptionItemTip___sjJe1",exceptionItemForm:"exceptionItemForm___hv2kO",exceptionItemRow:"exceptionItemRow___iFWTr",exceptionItemFormItem:"exceptionItemFormItem___a8VSi","ant-form-item-required":"ant-form-item-required___i46Xn",timeoutItem:"timeoutItem___BmVM1",retryItem:"retryItem___bjEZP",handleTypeItem:"handleTypeItem___I9kSy",exceptionContentItem:"exceptionContentItem___vz_sL",exceptionItemInput:"exceptionItemInput___k4K5d",exceptionItemSelect:"exceptionItemSelect___tu1p8","ant-select-selection-item":"ant-select-selection-item___RIMSR","ant-select-selection-placeholder":"ant-select-selection-placeholder___d3l1y",disabled:"disabled___fCiKY",exceptionItemContentWrapper:"exceptionItemContentWrapper___ynh5L",exceptionItemContentLabel:"exceptionItemContentLabel___N4UMG",editorWrapper:"editorWrapper___Z7JbG"},cs="",vs=(0,l.memo)(function(j){var n=j.name,t=j.timeout,r=t===void 0?180:t,a=j.retryCount,i=a===void 0?0:a,p=j.exceptionHandleType,d=p===void 0?C.Xy.INTERRUPT:p,S=j.disabled,A=S===void 0?!1:S,y=j.specificContent,g=j.exceptionHandleNodeIds,o=(0,Te.useModel)("workflow"),F=o.setIsModified,u=h.Z.useFormInstance(),I=(0,l.useMemo)(function(){return Ve.vp},[]),m=(0,l.useMemo)(function(){return Ve.cN},[]),f=(0,l.useState)(d),v=$()(f,2),N=v[0],E=v[1],T=(0,l.useState)((0,Je.Dt)(y)||cs),Z=$()(T,2),k=Z[0],P=Z[1],B=(0,l.useState)(!1),K=$()(B,2),O=K[0],w=K[1];(0,l.useEffect)(function(){if(u){var ue=c()(c()({timeout:r,retryCount:i,exceptionHandleType:d},d===C.Xy.SPECIFIC_CONTENT&&{specificContent:(0,Je.Dt)(y)}),d===C.Xy.EXECUTE_EXCEPTION_FLOW&&{exceptionHandleNodeIds:g});u.setFieldsValue(tn()({},n,ue))}},[u,n,r,i,d,y,g]);var H=ds({specificContent:u.getFieldValue([n,"specificContent"])||"",fieldName:n,watchField:"outputArgs"});(0,l.useEffect)(function(){P((0,Je.Dt)(H))},[H]),(0,l.useEffect)(function(){u&&(E(d),d!==C.Xy.EXECUTE_EXCEPTION_FLOW&&u.setFieldValue([n,"exceptionHandleNodeIds"],[]))},[u,n,d]),(0,l.useEffect)(function(){u&&N!==C.Xy.EXECUTE_EXCEPTION_FLOW&&u.setFieldValue([n,"exceptionHandleNodeIds"],[])},[u,n,N]);var ee=(0,l.useCallback)((0,nn.debounce)(function(){F(!0)},100),[]),ne=function(Ie){u.setFieldValue([n,"specificContent"],Ie),ee()},q=function(Ie){if(E(Ie),Ie===C.Xy.SPECIFIC_CONTENT)try{ne(y||"")}catch{}else ne("")},te=function(Ie){if(u)try{JSON.parse(Ie),ne(Ie)}catch{}};return(0,e.jsxs)("div",{className:le()(gn.exceptionItem),children:[(0,e.jsxs)("div",{className:le()(gn.exceptionItemHeader),children:[(0,e.jsx)("span",{className:le()(gn.exceptionItemTitle),children:"\u5F02\u5E38\u5904\u7406"}),(0,e.jsx)(Rn.Z,{title:"\u53EF\u8BBE\u7F6E\u5F02\u5E38\u5904\u7406\uFF0C\u5305\u62EC\u8D85\u65F6\u3001\u91CD\u8BD5\u3001\u5F02\u5E38\u5904\u7406\u65B9\u5F0F\u3002\u5F00\u542F\u6D41\u5F0F\u8F93\u51FA\u540E\uFF0C\u4E00\u65E6\u5F00\u59CB\u8F93\u51FA\u6570\u636E\uFF0C\u5373\u4F7F\u51FA\u73B0\u5F02\u5E38\u4E5F\u65E0\u6CD5\u91CD\u8BD5\u6216\u8005\u8DF3\u8F6C\u5F02\u5E38\u5206\u652F\u3002",placement:"top",children:(0,e.jsx)(Wn.Z,{className:le()(gn.exceptionItemTip)})})]}),(0,e.jsxs)("div",{className:le()(gn.exceptionItemForm),children:[(0,e.jsxs)("div",{className:le()(gn.exceptionItemRow),children:[(0,e.jsx)(h.Z.Item,{name:[n,"timeout"],label:"\u8D85\u65F6\u65F6\u95F4",initialValue:r,tooltip:{title:"\u8BBE\u7F6E\u8282\u70B9\u6267\u884C\u7684\u6700\u5927\u7B49\u5F85\u65F6\u95F4",placement:"top",icon:(0,e.jsx)(Wn.Z,{})},className:le()(gn.exceptionItemFormItem,gn.timeoutItem),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D85\u65F6\u65F6\u95F4"}],children:(0,e.jsx)(ve.Z,{size:"small",suffix:"s",type:"number",className:le()(gn.exceptionItemInput)})}),(0,e.jsx)(h.Z.Item,{name:[n,"retryCount"],label:"\u91CD\u8BD5\u6B21\u6570",className:le()(gn.exceptionItemFormItem,gn.retryItem),children:(0,e.jsx)(Sn.Z,{size:"small",options:m,className:le()(gn.exceptionItemSelect,tn()({},gn.disabled,A)),disabled:A,placeholder:"\u4E0D\u91CD\u8BD5"})}),(0,e.jsx)(h.Z.Item,{name:[n,"exceptionHandleType"],label:"\u5F02\u5E38\u5904\u7406\u65B9\u5F0F",className:le()(gn.exceptionItemFormItem,gn.handleTypeItem),children:(0,e.jsx)(Sn.Z,{size:"small",options:I,className:le()(gn.exceptionItemSelect,tn()({},gn.disabled,A)),disabled:A,placeholder:"\u4E2D\u65AD\u6D41\u7A0B",onChange:q})})]}),N===C.Xy.SPECIFIC_CONTENT&&(0,e.jsxs)("div",{className:le()(gn.exceptionItemContentWrapper),children:[(0,e.jsxs)("div",{className:le()(gn.exceptionItemContentLabel),children:[(0,e.jsx)("span",{children:"\u81EA\u5B9A\u4E49\u8FD4\u56DE\u5185\u5BB9"}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(Lt.Z,{}),size:"small",type:"text",onClick:function(){return w(!0)}})]}),(0,e.jsx)(h.Z.Item,{name:[n,"specificContent"],className:le()(gn.exceptionItemFormItem,gn.exceptionContentItem),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u8FD4\u56DE\u5185\u5BB9"},{validator:function(Ie,Ce){if(!Ce)return Promise.resolve();try{return JSON.parse(Ce),Promise.resolve()}catch{return Promise.reject(new Error("\u8BF7\u8F93\u5165\u6709\u6548\u7684JSON\u683C\u5F0F"))}}}],children:(0,e.jsx)("div",{className:le()(gn.editorWrapper),children:(0,e.jsx)(ge.Z,{codeLanguage:yn.vQ.JSON,height:"150px",value:k,codeOptimizeVisible:!1,onChange:te})})})]}),(0,e.jsx)(os,{disabledSwitchLanguage:!0,value:k,language:yn.vQ.JSON,visible:O,onClose:function(){return w(!1)},onChange:function(Ie){var Ce=Ie.code;te(Ce)}})]})]})},function(j,n){return(0,Je.Vb)(j,n)}),ps=s(48459),ms="\u68C0\u7D22\u5173\u952E\u8BCD",zn="knowledgeBaseConfigs",ma="inputArgs",fs=function(n){var t=n.form,r=n.type,a=n.id,i=(0,l.useState)(!1),p=$()(i,2),d=p[0],S=p[1],A=(0,Te.useModel)("workflow"),y=A.setIsModified,g=(0,l.useState)([]),o=$()(g,2),F=o[0],u=o[1],I=function(){S(!0)},m=function(Z){var k=t.getFieldValue(zn)||[];Z.type=Z.targetType,Z.knowledgeBaseId=Z.targetId,t.setFieldValue(zn,k.concat(Z)),y(!0),S(!1),u([].concat(W()(F),[{type:Z.targetType,targetId:Z.targetId,status:ze.BQ.Added}]))},f=function(Z){var k=t.getFieldValue(zn);if(k){var P=k.filter(function(B){return B.knowledgeBaseId!==Z.knowledgeBaseId});t.setFieldValue(zn,P),y(!0)}},v=function(Z){y(!0);var k=t.getFieldValue(zn);if(k){var P=k.map(function(B){return B.knowledgeBaseId===Z.knowledgeBaseId?Z:B});t.setFieldValue(zn,P)}},N=t.getFieldValue(zn);(0,l.useEffect)(function(){var T=N?.map(function(Z){return{type:Z.type,targetId:Z.knowledgeBaseId,status:ze.BQ.Added}})||[];u(T)},[N]);var E=(t?.getFieldValue(ma)||[]).map(function(T){return c()(c()({},T),{},{description:T.description||ms})});return(0,e.jsxs)("div",{className:"knowledge-node",children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Jt,{title:"\u8F93\u5165",form:t,params:E},"".concat(r,"-").concat(a,"-").concat(ma))}),(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u77E5\u8BC6\u5E93"}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(On.Z,{}),size:"small",onClick:I})]}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue(zn)?(0,e.jsx)(ps.Q,{skillName:zn,params:t.getFieldValue(zn),form:t,modifyItem:v,removeItem:f}):(0,e.jsx)(be.Z,{})}})]}),(0,e.jsxs)("div",{className:"knowledge-node-box node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb mb-16",children:[(0,e.jsxs)("div",{className:"knowlegenow-left-title",children:[(0,e.jsx)("span",{children:"\u641C\u7D22\u7B56\u7565"}),(0,e.jsx)(me.Z,{styles:{body:{width:"300px"}},placement:"right",content:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u83B7\u53D6\u77E5\u8BC6\u7684\u68C0\u7D22\u65B9\u5F0F\uFF0C\u4E0D\u540C\u7684\u68C0\u7D22\u7B56\u7565\u53EF\u4EE5\u66F4\u6709\u6548\u5730\u627E\u5230\u6B63\u786E\u7684\u4FE1\u606F\uFF0C\u63D0\u9AD8\u5176\u751F\u6210\u7684\u7B54\u6848\u7684\u51C6\u786E\u6027\u548C\u53EF\u7528\u6027",children:(0,e.jsx)(Wn.Z,{className:"margin-right-6"})})]}),(0,e.jsx)(h.Z.Item,{name:["searchStrategy"],noStyle:!0,children:(0,e.jsx)(Sn.Z,{className:"flex-1",options:[{label:"\u8BED\u4E49",value:"SEMANTIC"},{label:"\u6DF7\u5408",value:"MIXED"},{label:"\u5168\u6587",value:"FULL_TEXT"}]})})]}),(0,e.jsxs)("div",{className:"dis-sb mb-16",children:[(0,e.jsxs)("div",{className:"knowlegenow-left-title",children:[(0,e.jsx)("span",{children:"\u6700\u5927\u53EC\u56DE\u6570\u91CF"}),(0,e.jsx)(me.Z,{styles:{body:{width:"300px"}},placement:"right",content:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B\u7684\u6700\u5927\u6BB5\u843D\u6570\uFF0C\u6570\u503C\u8D8A\u5927\u8FD4\u56DE\u7684\u5185\u5BB9\u8D8A\u591A",children:(0,e.jsx)(Wn.Z,{className:"margin-right-6"})})]}),(0,e.jsx)(h.Z.Item,{name:["maxRecallCount"],noStyle:!0,children:(0,e.jsx)(Ut.Z,{min:1,max:20,step:1,marks:{1:1,20:20},className:"flex-1"})})]}),(0,e.jsxs)("div",{className:"dis-sb ",children:[(0,e.jsxs)("div",{className:"knowlegenow-left-title",children:[(0,e.jsx)("span",{children:"\u6700\u5C0F\u5339\u914D\u5EA6"}),(0,e.jsx)(me.Z,{styles:{body:{width:"300px"}},placement:"right",content:"\u6839\u636E\u8BBE\u7F6E\u7684\u5339\u914D\u5EA6\u9009\u53D6\u6BB5\u843D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B\uFF0C\u4F4E\u4E8E\u8BBE\u5B9A\u5339\u914D\u5EA6\u7684\u5185\u5BB9\u4E0D\u4F1A\u88AB\u53EC\u56DE",children:(0,e.jsx)(Wn.Z,{className:"margin-right-6"})})]}),(0,e.jsx)(h.Z.Item,{name:"matchingDegree",noStyle:!0,children:(0,e.jsx)(Ut.Z,{min:.01,max:.99,step:.01,marks:{.01:.01,.99:.99},className:"flex-1"})})]})]}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(rt,{treeData:t.getFieldValue("outputArgs")})]})}}),(0,e.jsx)(Be.Z,{checkTag:ze.qR.Knowledge,onAdded:m,open:d,onCancel:function(){return S(!1)},addComponents:F,hideTop:[ze.qR.Table,ze.qR.Plugin,ze.qR.Workflow,ze.qR.MCP]})]})},gs={KnowledgeNode:fs},hs=function(n){var t=n.form,r=n.isShow,a=n.close;return(0,e.jsx)(e.Fragment,{children:r&&(0,e.jsxs)("div",{className:"monaco-container",children:[(0,e.jsxs)("div",{className:"monaco-header dis-sb margin-bottom",children:[(0,e.jsxs)(_n.Z,{align:"center",wrap:!0,className:"dis-left",style:{flex:1},children:[(0,e.jsx)(ct.HF,{}),(0,e.jsx)("span",{className:"mr-16",style:{height:28,lineHeight:"20px",paddingBottom:8,display:"inline-block"},children:"\u4EE3\u7801"}),(0,e.jsx)(h.Z.Item,{name:"codeLanguage",children:(0,e.jsx)(Sn.Z,{style:{width:120},options:[{value:"JavaScript",label:"JavaScript"},{value:"Python",label:"Python"}],size:"small",placeholder:"\u8BF7\u9009\u62E9\u8BED\u8A00"})})]}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(Pe.Z,{}),size:"small",type:"text",onClick:a})]}),(0,e.jsx)("div",{className:"monaco-editor-content",children:(0,e.jsx)(h.Z.Item,{noStyle:!0,name:t.getFieldValue("codeLanguage")==="JavaScript"?"codeJavaScript":"codePython",children:(0,e.jsx)(ge.Z,{value:t.getFieldValue(t.getFieldValue("codeLanguage")==="JavaScript"?"codeJavaScript":"codePython"),onChange:function(p){t.setFieldValue(t.getFieldValue("codeLanguage")==="JavaScript"?"codeJavaScript":"codePython",p)},codeLanguage:t.getFieldValue("codeLanguage")||"JavaScript",minimap:!0,height:"790px"})})})]})})},xs=hs,Xt=s(31530),Cs=function(n){var t=n.form,r=n.nodeConfig,a=n.id,i=n.type;return(0,e.jsx)(h.Z.Item,{name:"inputArgs",children:(0,e.jsx)(at,{title:"\u8F93\u5165",inputItemName:"inputArgs",params:r?.inputArgs||[],form:t,showCheck:!0},"".concat(i,"-").concat(a,"-inputArgs"))})},ys=function(n){var t=n.form;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8F93\u5165",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t,disabledAdd:!0,disabledDelete:!0,disabledInput:!0})}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(rt,{treeData:t.getFieldValue("outputArgs")})]})}})]})},js=function(n){var t=n.form,r=n.type,a=[{label:"\u8FD4\u56DE\u53D8\u91CF",value:"VARIABLE"},{label:"\u8FD4\u56DE\u6587\u672C",value:"TEXT"}];return(0,e.jsxs)(e.Fragment,{children:[r==="End"&&(0,e.jsx)("div",{className:"dis-center",children:(0,e.jsx)(h.Z.Item,{name:"returnType",children:(0,e.jsx)(Xt.Z,{options:a,style:{marginBottom:"10px"}})})}),(0,e.jsx)("div",{className:t.getFieldValue("returnType")!=="VARIABLE"?"node-item-style":"",children:(0,e.jsx)(Ln,{title:"\u8F93\u51FA\u53D8\u91CF",form:t,fieldConfigs:jn.x8,showCopy:!0,inputItemName:Ne.dy.outputArgs})}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("returnType")!=="VARIABLE"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"dis-sb margin-bottom",children:(0,e.jsxs)("span",{className:"node-title-style gap-6 flex items-center",children:["\u8F93\u51FA\u5185\u5BB9",(0,e.jsx)(Rn.Z,{title:"\u53EF\u4EE5\u5728\u4EE5\u4E0B\u8F93\u5165\u6846\u4E2D\u91CD\u65B0\u7EC4\u7EC7\u8F93\u51FA\u5185\u5BB9\uFF0C\u5927\u6A21\u578B\u5C06\u4F18\u5148\u4F7F\u7528\u8F93\u5165\u6846\u4E2D\u7684\u5185\u5BB9\u3002",children:(0,e.jsx)(jt.Z,{})})]})}),(0,e.jsx)(h.Z.Item,{name:"content",children:(0,e.jsx)(ve.Z.TextArea,{placeholder:"\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D[\u6570\u7EC4 \u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u51FA\u53C2\u6570\u4E2D\u7684\u53D8\u91CF",autoSize:{minRows:3,maxRows:5},style:{marginBottom:"10px"}})})]})}})]})},Ns=function(n){var t=n.form;return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("span",{className:"node-title-style margin-bottom gap-6 flex items-center",children:["\u5FAA\u73AF\u8BBE\u7F6E",(0,e.jsx)(Rn.Z,{title:"\u5982\u679C\u5F15\u7528\u6570\u7EC4\uFF0C\u5FAA\u73AF\u6B21\u6570\u4E3A\u6570\u7EC4\u7684\u957F\u5EA6\uFF1B\u5982\u679C\u6307\u5B9A\u6B21\u6570\uFF0C\u5FAA\u73AF\u6B21\u6570\u4E3A\u6307\u5B9A\u7684\u6B21\u6570\uFF1B\u5982\u679C\u9009\u62E9\u65E0\u9650\u5FAA\u73AF\uFF0C\u9700\u914D\u5408\u201C\u7EC8\u6B62\u5FAA\u73AF\u201D\u8282\u70B9\u5B8C\u6210\u5FAA\u73AF\u6D41\u7A0B\u3002",children:(0,e.jsx)(jt.Z,{})})]}),(0,e.jsx)(h.Z.Item,{name:"loopType",children:(0,e.jsx)(Sn.Z,{options:jn.RY,style:{width:"100%",marginBottom:"10px"}})})]}),(0,e.jsx)(h.Z.Item,{noStyle:!0,shouldUpdate:function(a,i){return a.loopType!==i.loopType},children:function(){var a=t.getFieldValue("loopType");return a==="SPECIFY_TIMES_LOOP"?(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u5FAA\u73AF\u6B21\u6570"}),(0,e.jsx)(h.Z.Item,{name:"loopTimes",children:(0,e.jsx)(Dn.Z,{size:"small",style:{width:"100%",marginBottom:"10px"},placeholder:"\u8BF7\u8F93\u5165\u5FAA\u73AF\u6B21\u6570\uFF0C\u5E76\u4E14\u503C\u4E3A\u6B63\u6574\u6570",min:1,precision:0})})]}):a==="ARRAY_LOOP"?(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u5FAA\u73AF\u6570\u7EC4",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}):null}}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:(0,e.jsxs)(e.Fragment,{children:["\u4E2D\u95F4\u53D8\u91CF",(0,e.jsx)(Rn.Z,{title:"\u53D8\u91CF\u53EF\u5728\u591A\u6B21\u5FAA\u73AF\u4E2D\u5B9E\u73B0\u5171\u4EAB\uFF0C\u53EF\u7528\u4E8E\u5728\u591A\u6B21\u5FAA\u73AF\u4E2D\u4F20\u9012\u53D8\u91CF\u3002",children:(0,e.jsx)(jt.Z,{})})]}),fieldConfigs:jn.x8,inputItemName:Ne.dy.variableArgs,form:t,isVariable:!0})}),(0,e.jsx)(Ln,{title:"\u8F93\u51FA",fieldConfigs:jn.x8,inputItemName:Ne.dy.outputArgs,form:t,isLoop:!0})]})},Es=function(n){var t=n.form,r=Ve.mH,a=t.getFieldValue("configType"),i=a===Ne.Do.SET_VARIABLE;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Z.Item,{name:"configType",style:{display:"flex",justifyContent:"center"},children:(0,e.jsx)(Xt.Z,{options:r})}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return i?(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8BBE\u7F6E\u53D8\u91CF",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}):null}}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return i?null:(0,e.jsx)(Vr,{title:"\u8F93\u51FA\u53D8\u91CF",fieldConfigs:jn.x8,inputItemName:Ne.dy.outputArgs,form:t})}}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return i?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(rt,{treeData:[{name:"isSuccess",dataType:C.Gi.Boolean,description:"",require:!0,systemVariable:!1,bindValue:"",key:"outputArray"}]})]}):null}})]})},Ss=function(n){var t=n.form,r=[{label:"\u5B57\u7B26\u4E32\u62FC\u63A5",value:"CONCAT"},{label:"\u5B57\u7B26\u4E32\u5206\u5272",value:"SPLIT"}],a=(0,l.useState)([{value:"\\n",label:"\u6362\u884C (\\n)"},{value:"\\t",label:"\u5236\u8868\u7B26 (\\t)"},{value:"\u3002",label:"\u53E5\u53F7 (\u3002)"},{value:",",label:"\u9017\u53F7 (,)"},{value:";",label:"\u5206\u53F7 (;)"},{value:"&nbsp;",label:"\u7A7A\u683C ( )"}]),i=$()(a,2),p=i[0],d=i[1],S=(0,l.useState)({label:"",value:""}),A=$()(S,2),y=A[0],g=A[1],o=function(u){if(u.preventDefault(),!(y.label===""||y.value==="")){var I={label:"".concat(y.label,"(").concat(y.value,")"),value:y.value};d([].concat(W()(p),[I])),g({label:"",value:""}),localStorage.setItem("arrayLinkSetting",JSON.stringify([].concat(W()(p),[I])))}};return(0,l.useEffect)(function(){var F=localStorage.getItem("arrayLinkSetting");F&&d(JSON.parse(F))},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Z.Item,{name:"textHandleType",style:{display:"flex",justifyContent:"center"},children:(0,e.jsx)(Xt.Z,{options:r})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8F93\u5165",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("textHandleType")==="CONCAT"?(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u5B57\u7B26\u4E32\u62FC\u63A5"}),(0,e.jsx)(me.Z,{placement:"topRight",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"node-title-style",children:"\u6570\u7EC4\u8FDE\u63A5\u7B26\u8BBE\u7F6E"}),(0,e.jsx)("p",{children:"\u4F7F\u7528\u4EE5\u4E0B\u7B26\u53F7\u6765\u81EA\u52A8\u8FDE\u63A5\u6570\u7EC4\u4E2D\u7684\u6BCF\u4E2A\u9879\u76EE"}),(0,e.jsx)("p",{className:"array-link-setting-select-label",children:"\u8FDE\u63A5\u7B26"}),(0,e.jsx)(h.Z.Item,{name:"join",children:(0,e.jsx)(Sn.Z,{options:p,allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u8FDE\u63A5\u7B26\u53F7",dropdownRender:function(I){return(0,e.jsxs)(e.Fragment,{children:[I,(0,e.jsx)(Kt.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{padding:"8px"},className:"dis-sb",children:(0,e.jsxs)(_n.Z,{children:[(0,e.jsx)(ve.Z,{value:y.label,placeholder:"\u9009\u9879\u540D\u79F0",onChange:function(f){return g({value:y.value,label:f.target.value})},onKeyDown:function(f){return f.stopPropagation()}}),(0,e.jsx)(ve.Z,{value:y.value,placeholder:"\u9009\u9879\u503C",onChange:function(f){return g({label:y.label,value:f.target.value})},onKeyDown:function(f){return f.stopPropagation()}}),(0,e.jsx)(_.ZP,{type:"primary",onClick:o,children:"\u6DFB\u52A0"})]})})]})},style:{width:"100%",marginBottom:"10px"}})})]}),trigger:"click",children:(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(Ft.Z,{}),size:"small"})})]}),(0,e.jsx)(h.Z.Item,{name:"text",children:(0,e.jsx)(ve.Z.TextArea,{placeholder:"\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF",autoSize:{minRows:3,maxRows:5}})})]}):null}}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("textHandleType")==="SPLIT"?(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u5206\u9694\u7B26"}),(0,e.jsx)(h.Z.Item,{name:"splits",children:(0,e.jsx)(Sn.Z,{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u5272\u7B26\u53F7",mode:"multiple",maxTagCount:3,dropdownRender:function(I){return(0,e.jsxs)(e.Fragment,{children:[I,(0,e.jsx)(Kt.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{padding:"8px"},className:"dis-sb",children:(0,e.jsxs)(_n.Z,{children:[(0,e.jsx)(ve.Z,{value:y.label,placeholder:"\u9009\u9879\u540D\u79F0",onChange:function(f){return g({value:y.value,label:f.target.value})},onKeyDown:function(f){return f.stopPropagation()}}),(0,e.jsx)(ve.Z,{value:y.value,placeholder:"\u9009\u9879\u503C",onChange:function(f){return g({label:y.label,value:f.target.value})},onKeyDown:function(f){return f.stopPropagation()}}),(0,e.jsx)(_.ZP,{type:"primary",onClick:o,children:"\u6DFB\u52A0"})]})})]})},options:p})})]}):null}}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(rt,{treeData:t.getFieldValue("textHandleType")==="CONCAT"?[{name:"output",dataType:C.Gi.String,description:"",require:!0,systemVariable:!1,bindValue:"",key:"outputArray"}]:[{name:"output",dataType:C.Gi.Array_String,description:"",require:!0,systemVariable:!1,bindValue:"",key:"outputString"}]})]})}})]})},As=function(n){var t=n.form,r=n.nodeConfig,a=n.type,i=n.id,p=(0,l.useState)(!1),d=$()(p,2),S=d[0],A=d[1],y=(0,Te.useModel)("workflow"),g=y.setIsModified,o=t.getFieldValue("codeLanguage")===yn.vQ.JavaScript?"codeJavaScript":"codePython",F=t.getFieldValue("codeLanguage")||yn.vQ.JavaScript;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ln,{title:"\u8F93\u5165",fieldConfigs:jn.x8,inputItemName:Ne.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style ",children:"\u4EE3\u7801"}),(0,e.jsx)(_.ZP,{icon:(0,e.jsx)(Lt.Z,{}),size:"small",type:"text",onClick:function(){return A(!0)}})]}),(0,e.jsx)(ge.Z,{form:t,value:t.getFieldValue(o),onChange:function(I){t.setFieldValue(o,I),g(!0)},codeLanguage:F,height:"180px"})]})}),(0,e.jsx)(at,{title:"\u8F93\u51FA",params:r?.outputArgs||[],form:t,inputItemName:"outputArgs"},"".concat(a,"-").concat(i,"-outputArgs")),(0,e.jsx)(xs,{form:t,isShow:S,close:function(){return A(!1)}})]})},it={StartNode:Cs,EndNode:js,CycleNode:Ns,VariableNode:Es,CodeNode:As,TextProcessingNode:Ss,DocumentExtractionNode:ys},bs=function(n){var t=n.form;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("inputArgs")&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Jt,{form:t,title:"\u8F93\u5165",params:t.getFieldValue("inputArgs")})})}}),(0,e.jsx)(h.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(rt,{treeData:t.getFieldValue("outputArgs")})]})}})]})},Fs={PluginInNode:bs},Is=it.StartNode,Ts=it.EndNode,Ds=it.CycleNode,ks=it.VariableNode,Rs=it.TextProcessingNode,ws=it.CodeNode,Zs=it.DocumentExtractionNode,Bs=kt.ModelNode,Ps=kt.IntentionNode,Ls=kt.QuestionsNode,Os=kt.HttpToolNode,Ms=Fs.PluginInNode,Vs=gs.KnowledgeNode,Us=function(){return(0,e.jsx)("div",{className:"node-title-style",children:"\u7528\u4E8E\u7EC8\u6B62\u5F53\u524D\u5FAA\u73AF\uFF0C\u6267\u884C\u4E0B\u6B21\u5FAA\u73AF"})},Ks=function(){return(0,e.jsx)("div",{className:"node-title-style",children:"\u7528\u4E8E\u7ACB\u5373\u7EC8\u6B62\u5F53\u524D\u6240\u5728\u7684\u5FAA\u73AF\uFF0C\u8DF3\u51FA\u5FAA\u73AF\u4F53"})},Ws=function(n,t){var r=n.type,a={type:n.type,id:n.id,form:t,nodeConfig:n.nodeConfig};switch(r){case C.C8.Start:return(0,e.jsx)(Is,c()({},a));case C.C8.DocumentExtraction:return(0,e.jsx)(Zs,c()({},a));case C.C8.End:case C.C8.Output:return(0,e.jsx)(Ts,c()({},a));case C.C8.Loop:return(0,e.jsx)(Ds,c()({},a));case C.C8.Variable:return(0,e.jsx)(ks,c()({},a));case C.C8.TextProcessing:return(0,e.jsx)(Rs,c()({},a));case C.C8.LLM:return(0,e.jsx)(Bs,c()({},a));case C.C8.Plugin:case C.C8.Workflow:case C.C8.LongTermMemory:case C.C8.MCP:return(0,e.jsx)(Ms,c()({},a));case C.C8.Code:return(0,e.jsx)(ws,c()({},a));case C.C8.QA:return(0,e.jsx)(Ls,c()({},a));case C.C8.HTTPRequest:return(0,e.jsx)(Os,c()({},a));case C.C8.Knowledge:return(0,e.jsx)(Vs,c()({},a));case C.C8.Condition:return(0,e.jsx)(Qr,c()({},a));case C.C8.IntentRecognition:return(0,e.jsx)(Ps,c()({},a));case C.C8.LoopBreak:return(0,e.jsx)(Ks,{});case C.C8.LoopContinue:return(0,e.jsx)(Us,{});case C.C8.TableDataAdd:case C.C8.TableDataDelete:case C.C8.TableDataUpdate:case C.C8.TableDataQuery:case C.C8.TableSQL:return(0,e.jsx)(rs,c()({},a));default:return(0,e.jsx)(e.Fragment,{})}},Gs=function(n){var t=n.data,r=c()(c()({exceptionHandleType:C.Xy.INTERRUPT,timeout:180,retryCount:0},t||{}),{},{name:"exceptionHandleConfig"});return(0,e.jsx)(vs,c()({},r))};function Hs(j){var n,t=j.params,r=h.Z.useFormInstance(),a=(0,Je.g_)(t);return(0,e.jsxs)(e.Fragment,{children:[Ws(t,r),a&&(0,e.jsx)(Gs,{data:(n=t.nodeConfig)===null||n===void 0?void 0:n.exceptionHandleConfig})]})}var $s=function(n){var t=n.data,r=n.onRefresh,a=n.onClose,i=(0,l.useState)(null),p=$()(i,2),d=p[0],S=p[1],A=(0,l.useState)(!1),y=$()(A,2),g=y[0],o=y[1],F=function(){var u=Q()(V()().mark(function I(m){var f;return V()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.prev=0,o(!0),N.next=4,kn.ZP.apiRestoreWorkflowVersion(m.id);case 4:f=N.sent,f.code===Zn.ZP.success&&(dt.ZP.success("\u8FD8\u539F\u6210\u529F"),o(!1),r(),a()),N.next=11;break;case 8:N.prev=8,N.t0=N.catch(0),o(!1);case 11:case"end":return N.stop()}},I,null,[[0,8]])}));return function(m){return u.apply(this,arguments)}}();return(0,e.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",right:0,top:0,zIndex:1e3},onMouseEnter:function(){S(t.id)},onMouseLeave:function(){S(null)},children:t.id===d&&(0,e.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"100%"},children:(0,e.jsx)(_.ZP,{variant:"outlined",loading:g,onClick:function(){return F(t)},children:"\u8FD8\u539F"})})},t.id)},zs=$s,Js=s(52745),Qs=s(74317),Xs=s(2830),Ys=function(n){return(0,e.jsx)("div",{className:"icon-box-style",style:c()({width:"20px",height:"20px",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},n&&{backgroundImage:'url("'.concat(n,'")')})})},qs=function(n){var t=n.dragChild,r=n.isLoop,a=r===void 0?!1:r,i=function(d,S){t(d,S)};return(0,e.jsxs)("div",{className:"stencil-content",children:[(0,e.jsx)("p",{className:"stencil-title",children:"\u8282\u70B9\u9009\u62E9"}),(0,e.jsx)("div",{className:"stencil-list-style",children:jn.iE.map(function(p){return(0,e.jsxs)("div",{className:"stencil-list-item",children:[p.name&&(0,e.jsx)("p",{className:"stencil-list-title",children:p.name}),(0,e.jsx)("div",{className:"stencil-list-content",children:p.children.filter(function(d){return a?d.type!==C.C8.Loop:!0}).map(function(d){var S=[C.C8.LoopBreak,C.C8.LoopContinue].includes(d?.type||""),A=S?a:!0;return A&&(0,e.jsxs)("div",{className:"child-content dis-left",draggable:"true",onDragEnd:function(g){return i(d,g)},onClick:function(){return i(d)},children:[Ys(d.bgIcon||""),(0,e.jsx)("span",{children:d.name})]},d.type)})})]},p.name)})})]})},fa=qs,_s=[{label:"\u653E\u5927 10%",value:"+"},{label:"\u7F29\u5C0F 10%",value:"-"},{label:"\u7F29\u653E\u5230\u9002\u914D\u753B\u5E03",value:-1},{label:(0,e.jsx)("div",{style:{borderTop:"1px solid #d9d9d9",marginTop:"15px",height:0,width:"90%",marginLeft:"5%"}}),value:"divider",disabled:!0,style:{padding:0,cursor:"default"}},{label:"\u7F29\u653E\u5230 50%",value:.5},{label:"\u7F29\u653E\u5230 100%",value:1},{label:"\u7F29\u653E\u5230 150%",value:1.5},{label:"\u7F29\u653E\u5230 200%",value:2}],ei=function(n){var t=n.zoomSize,r=t===void 0?1:t,a=n.dragChild,i=n.handleTestRun,p=n.changeGraph,d=n.foldWrapItem,S=n.testRunLoading,A=(0,l.useState)(!1),y=$()(A,2),g=y[0],o=y[1],F=(0,l.useState)(0),u=$()(F,2),I=u[0],m=u[1],f=function(N){o(N),m(0)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"absolute-box",children:[(0,e.jsxs)("div",{className:"action-section",children:[(0,e.jsx)(_.ZP,{type:"text",style:{marginRight:2},icon:(0,e.jsx)(Js.Z,{}),onClick:function(){var N=-10,E=Math.round(r*100),T=E+N,Z=Math.max(20,Math.min(300,T)),k=Z/100;p(Number(k))}}),(0,e.jsx)(Sn.Z,{options:_s,value:"".concat(Math.round(r*100),"%"),onChange:function(N){var E;if(typeof N=="string"&&["+","-"].includes(N)){var T=N==="+"?10:-10,Z=Math.round(r*100),k=Z+T,P=Math.max(20,Math.min(300,k));E=P/100}else E=N;p(Number(E))},style:{width:80,marginRight:2,height:28},popupMatchSelectWidth:!1,optionLabelProp:"displayValue",size:"small"}),(0,e.jsx)(_.ZP,{type:"text",style:{marginRight:12},icon:(0,e.jsx)(On.Z,{}),onClick:function(){var N=10,E=Math.round(r*100),T=E+N,Z=Math.max(20,Math.min(300,T)),k=Z/100;p(Number(k))}}),(0,e.jsx)(me.Z,{content:"\u7F29\u653E\u5230\u9002\u914D\u753B\u5E03",trigger:["hover"],mouseEnterDelay:1,children:(0,e.jsx)(_.ZP,{type:"text",style:{marginRight:12},icon:(0,e.jsx)(Qs.Z,{}),onClick:function(){return p(-1)}})}),(0,e.jsx)(me.Z,{content:(0,e.jsx)(fa,{isLoop:d.type===C.C8.Loop,dragChild:function(N,E){m(I+1),a(N,E,I)}}),trigger:["click"],open:g,onOpenChange:f,children:(0,e.jsx)(_.ZP,{onMouseEnter:function(){return o(!0)},icon:(0,e.jsx)(On.Z,{}),type:"primary",onClick:function(){return o(!0)},children:"\u6DFB\u52A0\u8282\u70B9"})})]}),(0,e.jsxs)("div",{className:"action-section",style:{marginLeft:18},children:[(0,e.jsx)(Xs.Z,{title:"\u8C03\u8BD5",style:{paddingRight:12,paddingLeft:12}}),(0,e.jsx)(_.ZP,{loading:S,icon:(0,e.jsx)(en.Z,{}),variant:"solid",color:"green",onClick:i,children:"\u8BD5\u8FD0\u884C"})]})]})})},ni=ei,ga=500,ti=function(n){return(n||"").length>ga?n.slice(0,ga)+"...":n},ai=function(n){var t=n.visible,r=n.errorList,a=n.show,i=n.onClose,p=n.onClickItem,d=n.nodeList,S=(0,Te.useModel)("workflow"),A=S.setVolid;return(0,e.jsxs)("div",{style:{right:t?"388px":"10px",display:a?"flex":"none",flexDirection:"column"},className:"error-list-style dis-col",children:[(0,e.jsxs)("div",{className:"dis-sb error-list-header",style:{height:"40px"},children:[(0,e.jsx)("span",{children:"\u9519\u8BEF\u5217\u8868"}),(0,e.jsx)(_.ZP,{type:"text",icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){i(),A(!1)}})]}),r&&(0,e.jsx)("div",{className:"error-list-content",children:r.map(function(y){if(y&&y.nodeId){var g=d.find(function(o){return o.id===y.nodeId});return g?(0,e.jsxs)("div",{className:"dis-left error-list-item",onClick:function(){p(g),A(!0)},children:[(0,e.jsx)("div",{className:"image-div-style",children:(0,oe.qM)(g.type)}),(0,e.jsxs)("div",{className:"content-error-item-width",children:[(0,e.jsx)("p",{className:"error-node-name",children:g.name||"\u6682\u65E0"}),y.error.length>110?(0,e.jsx)(me.Z,{content:(0,e.jsx)("p",{children:ti(y.error)}),trigger:"hover",mouseEnterDelay:.5,placement:"top",open:void 0,children:(0,e.jsx)("p",{className:"error-text",children:y.error})}):(0,e.jsx)("p",{className:"error-text",children:y.error})]})]},y.nodeId):null}else return y?(0,e.jsx)("div",{className:"dis-left error-list-item",children:y.error.length>3e3?(0,e.jsx)(me.Z,{content:(0,e.jsx)("p",{children:y.error}),trigger:"hover",mouseEnterDelay:.5,placement:"top",open:void 0,children:(0,e.jsx)("p",{className:"error-text",children:y.error})}):(0,e.jsx)("p",{className:"error-text",children:y.error})},y.error):null})})]})},ri=ai,si=[C.C8.Start,C.C8.End,C.C8.LoopStart,C.C8.LoopEnd],ii=function(n){var t=n.graph,r=n.changeEdge,a=n.copyNode,i=n.changeCondition,p=n.removeNode,d=n.modal,S=n.message;t.bindKey(["meta+c","ctrl+c"],function(){var g=t.getSelectedCells();return g.length&&t.copy(g),!1}),t.bindKey(["meta+v","ctrl+v"],function(){if(!t.isClipboardEmpty()){var g=t.getSelectedCells();if(g&&g.length>0){var o=g[0].getData();if(o.type===C.C8.LoopStart||o.type===C.C8.LoopEnd||o.type===C.C8.Loop){S.error("\u4E0D\u80FD\u7C98\u8D34\u5FAA\u73AF\u8282\u70B9");return}if(o.type===C.C8.Start){S.error("\u4E0D\u80FD\u7C98\u8D34\u5F00\u59CB\u8282\u70B9");return}if(o.type===C.C8.End){S.error("\u4E0D\u80FD\u7C98\u8D34\u7ED3\u675F\u8282\u70B9");return}a(o)}t.cleanSelection()}return!1});var A=function(o){var F,u,I=o[0],m=(F=I.getTargetNode())===null||F===void 0?void 0:F.id,f=(u=I.getSourceNode())===null||u===void 0?void 0:u.getData(),v=I.getSourcePortId(),N=JSON.parse(JSON.stringify(f));if(f.type===C.C8.Condition){var E=tt()(N.nodeConfig.conditionBranchConfigs),T;try{for(E.s();!(T=E.n()).done;){var Z=T.value;v.includes(Z.uuid)&&(Z.nextNodeIds=Z.nextNodeIds.filter(function(H){return H!==Number(m)}))}}catch(H){E.e(H)}finally{E.f()}}else if(f.type===C.C8.QA)if(N.nodeConfig.answerType===C.J4.SELECT){var k=tt()(N.nodeConfig.options),P;try{for(k.s();!(P=k.n()).done;){var B=P.value;v.includes(B.uuid)&&(B.nextNodeIds=B.nextNodeIds.filter(function(H){return H!==Number(m)}))}}catch(H){k.e(H)}finally{k.f()}}else{r({type:Ne.I3.deleted,targetId:m,sourceNode:f,id:"0"}),t.removeCells(o);return}else{var K=tt()(N.nodeConfig.intentConfigs),O;try{for(K.s();!(O=K.n()).done;){var w=O.value;v.includes(w.uuid)&&(w.nextNodeIds=w.nextNodeIds.filter(function(H){return H!==Number(m)}))}}catch(H){K.e(H)}finally{K.f()}}i({nodeData:N,targetNodeId:m?.toString()})},y=function(o,F){var u,I,m=o.getSourcePortId(),f=(u=o.getSourceNode())===null||u===void 0?void 0:u.getData(),v=(I=o.getTargetNode())===null||I===void 0?void 0:I.getData(),N=(0,Je.y1)(o.getSourceNode(),m);if((0,Je.Fm)(f,N)){var E,T,Z=(0,Qe.Xh)(f),k=((E=Z.nodeConfig)===null||E===void 0?void 0:E.exceptionHandleConfig)||{},P=k.exceptionHandleNodeIds,B=P===void 0?[]:P,K=B.filter(function(w){return w!==Number(v.id)}),O=c()(c()({},((T=Z.nodeConfig)===null||T===void 0?void 0:T.exceptionHandleConfig)||{}),{},{exceptionHandleNodeIds:K});return Z.nodeConfig.exceptionHandleConfig=O,F(Z),!0}return!1};return t.bindKey(["delete","backspace"],function(){var g=t.getSelectedCells();if(g.length){var o=g[0];if(o.isEdge()){var F,u,I,m=(F=o.getSourceNode())===null||F===void 0?void 0:F.getData(),f=(u=o.getTargetNode())===null||u===void 0?void 0:u.getData(),v=(I=o.getTargetNode())===null||I===void 0?void 0:I.id;if(!(0,Je.DU)(m,f)){S.warning("\u4E0D\u80FD\u5220\u9664\u5FAA\u73AF\u8282\u70B9\u8FDE\u7EBF");return}var N=y(o,function(E){t.removeCells([o]),i({nodeData:E,targetNodeId:f.id.toString()})});if(N)return;if(m.type===C.C8.Loop||f.type===C.C8.Loop){if(m.type===C.C8.Loop&&f.loopNodeId&&f.loopNodeId===m.id){m.innerStartNodeId=-1,i({nodeData:m,targetNodeId:v?.toString()}),t.removeCells([o]);return}if(f.type===C.C8.Loop&&m.loopNodeId&&m.loopNodeId===f.id){f.innerEndNodeId=-1,i({nodeData:f,targetNodeId:f.id.toString()}),t.removeCells([o]);return}}m.type===C.C8.Condition||m.type===C.C8.IntentRecognition||m.type===C.C8.QA?A(g):r({type:Ne.I3.deleted,targetId:v,sourceNode:m,id:"0"})}else{if(si.includes(o.getData().type)){S.warning("\u4E0D\u80FD\u5220\u9664\u5F00\u59CB\u8282\u70B9\u548C\u7ED3\u675F\u8282\u70B9");return}if(o.getData().loopNodeId||o.getData().type===C.C8.Loop){if(o.getData().type===C.C8.Loop){d.confirm({title:"\u786E\u5B9A\u8981\u5220\u9664\u5FAA\u73AF\u8282\u70B9\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){p(o.id,o.getData()),t.removeCells(g)},onCancel:function(){return!1}});return}p(o.id,o.getData())}else p(o.id)}t.removeCells(g)}return!1}),function(){}},li=ii,oi=s(52677),ha=s.n(oi),vt=s(39619),ui=s(54023),di=s(5959),ci=s(63645),vi=s(38711),pi=s(33230),mi=s(80170),Yt={clickableElement:"clickableElement___p1WCl",editableTitleInput:"editableTitleInput___kZ3s9"},xa=le().bind(Yt),fi=(0,l.memo)(function(j){var n=j.value,t=j.disabled,r=j.onChange,a=j.onSave,i=j.onEditingStatusChange,p=j.dataId,d=(0,l.useRef)(null),S=(0,l.useState)(n),A=$()(S,2),y=A[0],g=A[1],o=(0,l.useState)(!1),F=$()(o,2),u=F[0],I=F[1];(0,l.useEffect)(function(){g(n)},[n]),(0,l.useEffect)(function(){i?.(u)},[u]);var m=function(){var T=Q()(V()().mark(function Z(k){var P;return V()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:P=k.target.value,g(P),r?.(n);case 3:case"end":return K.stop()}},Z)}));return function(k){return T.apply(this,arguments)}}(),f=function(){var T=Q()(V()().mark(function Z(){var k;return V()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(y!==n){B.next=3;break}return I(!1),B.abrupt("return",!1);case 3:return B.next=5,a?.(y);case 5:if(B.t0=B.sent,B.t0){B.next=8;break}B.t0=!0;case 8:return k=B.t0,k&&I(!1),B.abrupt("return",k);case 11:case"end":return B.stop()}},Z)}));return function(){return T.apply(this,arguments)}}(),v=function(){y!==n&&g(n),I(!1)},N=function(Z){Z.key==="Escape"&&v()},E=(0,l.useCallback)(function(){I(!0)},[]);return(0,l.useEffect)(function(){if(!t)return d.current&&d.current.addEventListener("onEditTitle",E),function(){d.current&&d.current.removeEventListener("onEditTitle",E)}},[d.current]),(0,e.jsx)("div",{className:"node-editable-title-text","data-id":p,ref:d,style:{width:"calc(100% - 26px)",maxWidth:300},children:u?(0,e.jsx)(ve.Z,{size:"small",className:xa(Yt.editableTitleInput),autoFocus:u,value:y,onChange:m,onBlur:f,onPressEnter:f,onKeyDown:N}):(0,e.jsx)("div",{className:xa(Yt.clickableElement),children:y})})},function(j,n){return j.value===n.value&&j.disabled===n.disabled&&j.dataId===n.dataId}),Ca=fi,gi=function(n){var t=n.graph,r=n.nodeId,a=(0,l.useState)(!1),i=$()(a,2),p=i[0],d=i[1];return(0,l.useEffect)(function(){if(t){var S=function(o){var F,u=o.node;(u==null||(F=u.getData())===null||F===void 0?void 0:F.id)===r&&d(!1)},A=function(o){var F,u=o.node;(u==null||(F=u.getData())===null||F===void 0?void 0:F.id)===r&&d(!0)};t.on("node:unselected",S),t.on("node:selected",A);var y=t.getCellById(r.toString());return d(t.isSelected(y)),function(){t.off("node:unselected",S),t.off("node:selected",A)}}},[t,r]),p},ya=gi,ja=s(32394),Na=s(57132),hi=s(50888),Ea=s(89739),xi=s(4340),Ci=s(48115),yi=s(74855),ji=s.n(yi),qe={runResultContainer:"runResultContainer___peKfn",runResultHeader:"runResultHeader___Cfxpf",runResultStatus:"runResultStatus___qwys5",statusIcon:"statusIcon___GrXnz",success:"success___E4sQV",error:"error___ka9Ph",statusText:"statusText___jtf9r",runTime:"runTime___M8Jwd",collapseIcon:"collapseIcon___kXdVO",runResultBody:"runResultBody___liKCK",runResultInfo:"runResultInfo___jjjjQ",totalCount:"totalCount___iqje0",runResultPagination:"runResultPagination___C1AgQ",runResultPaginationPages:"runResultPaginationPages___yWWts",runResultPageItem:"runResultPageItem___YHKvA",active:"active___duVga",runResultPageSelect:"runResultPageSelect___vcCo2",selectArrow:"selectArrow___t89U_",onlyErrorCheckbox:"onlyErrorCheckbox___oqk2N",runResultBatch:"runResultBatch___EJ6wb",runResultBatchHeader:"runResultBatchHeader___rxC1F",runResultBatchContent:"runResultBatchContent___H70IQ",runResultSection:"runResultSection___UOHNI",runResultSectionHeader:"runResultSectionHeader___a7NiU",copyIcon:"copyIcon___qNpw6",runResultSectionContent:"runResultSectionContent___FsJ3w",keyValueItem:"keyValueItem___Y0WRE",key:"key___tiO80",value:"value___jlGfv",runResultPageSelectRoot:"runResultPageSelectRoot___na4kg"},un=le().bind(qe),Sa=5,Ni=function(n){var t=n.success,r=t===void 0?!0:t,a=n.loading,i=a===void 0?!1:a,p=n.time,d=p===void 0?"0.001s":p,S=n.total,A=S===void 0?10:S,y=n.current,g=y===void 0?1:y,o=n.onlyError,F=o===void 0?!1:o,u=n.onPageChange,I=n.onOnlyErrorChange,m=n.batchVariables,f=m===void 0?{}:m,v=n.inputParams,N=v===void 0?{}:v,E=n.outputResult,T=E===void 0?{}:E,Z=n.collapsible,k=Z===void 0?!0:Z,P=n.expanded,B=P===void 0?!1:P,K=n.title,O=K===void 0?"":K,w=n.onExpandChange,H=(0,l.useRef)(null),ee=(0,l.useState)(!B),ne=$()(ee,2),q=ne[0],te=ne[1],ue=function(){var ie=!q;te(ie),w?.(!ie)},Ie=function(ie){u?.(ie)},Ce=function(ie){I?.(ie.target.checked)},xe=function(){for(var ie=[],ye=Math.min(Sa,A),dn=function(Vn){ie.push((0,e.jsx)("span",{className:un(qe.runResultPageItem,tn()({},qe.active,g===Vn)),onClick:function(){return Ie(Vn)},children:Vn},Vn))},ln=1;ln<=ye;ln++)dn(ln);return(0,e.jsxs)("div",{className:un(qe.runResultPagination),children:[(0,e.jsx)("div",{className:un(qe.runResultPaginationPages),children:ie}),(0,e.jsx)("div",{className:un(qe.runResultPageSelect),children:A>Sa&&(0,e.jsx)(Sn.Z,{value:g,onChange:Ie,options:Array.from({length:A},function(Gn,Vn){return{value:Vn+1,label:Vn+1}}),listHeight:100,className:qe.runResultPageSelectRoot,size:"small",getPopupContainer:function(){return H.current}})})]})},ce=function(){dt.ZP.success("\u590D\u5236\u6210\u529F")},se=function(ie,ye){return(0,e.jsxs)("div",{className:un(qe.runResultSection),children:[(0,e.jsxs)("div",{className:un(qe.runResultSectionHeader),children:[(0,e.jsx)("span",{children:ye}),(0,e.jsx)(Rn.Z,{title:"\u590D\u5236",children:(0,e.jsx)(ji(),{text:JSON.stringify(ie,null,2),onCopy:ce,children:(0,e.jsx)(Na.Z,{className:un(qe.copyIcon),onClick:function(){navigator.clipboard.writeText(JSON.stringify(ie,null,2))}})})})]}),(0,e.jsx)("div",{className:un(qe.runResultSectionContent,"overflow-y"),children:(0,e.jsx)("code",{children:JSON.stringify(ie,null,2)})})]})};return(0,e.jsxs)("div",{ref:H,className:un(qe.runResultContainer),onClick:function(ie){ie.stopPropagation()},children:[(0,e.jsxs)("div",{className:un(qe.runResultHeader),children:[(0,e.jsxs)("div",{className:un(qe.runResultStatus),children:[i?(0,e.jsx)(hi.Z,{className:un(qe.statusIcon)}):r?(0,e.jsx)(Ea.Z,{className:un(qe.statusIcon,qe.success)}):(0,e.jsx)(xi.Z,{className:un(qe.statusIcon,qe.error)}),(0,e.jsx)("span",{className:un(qe.statusText),children:O||(i?"\u8FD0\u884C\u4E2D":r?"\u8FD0\u884C\u6210\u529F":"\u8FD0\u884C\u5931\u8D25")}),!i&&(0,e.jsx)("span",{className:un(qe.runTime),children:d})]}),k&&(0,e.jsx)("div",{className:un(qe.collapseIcon),onClick:ue,children:q?(0,e.jsx)(Ot.Z,{}):(0,e.jsx)(Ci.Z,{})})]}),!q&&(0,e.jsxs)("div",{className:un(qe.runResultBody),children:[(0,e.jsxs)("div",{className:un(qe.runResultInfo),children:[(0,e.jsxs)("div",{className:un(qe.totalCount),children:["\u603B\u6570: ",A]}),A>1&&!r&&(0,e.jsx)("div",{className:un(qe.onlyErrorCheckbox),children:(0,e.jsx)(Vt.Z,{checked:F,onChange:Ce,children:"\u53EA\u770B\u9519\u8BEF"})})]}),A>1&&xe()||null,Object.keys(f).length>0&&(0,e.jsxs)("div",{className:un(qe.runResultBatch),children:[(0,e.jsxs)("div",{className:un(qe.runResultBatchHeader),children:[(0,e.jsx)("span",{children:"\u672C\u6B21\u6279\u5904\u7406\u53D8\u91CF"}),(0,e.jsx)(Rn.Z,{title:"\u590D\u5236",children:(0,e.jsx)(Na.Z,{className:un(qe.copyIcon),onClick:function(){navigator.clipboard.writeText(JSON.stringify(f,null,2))}})})]}),(0,e.jsx)("div",{className:un(qe.runResultSectionContent,"overflow-y"),children:(0,e.jsx)("pre",{children:JSON.stringify(f,null,2)})})]}),se(N,"\u8F93\u5165"),se(T,"\u8F93\u51FA")]})]})},Ei=Ni,Si=function(n){var t=n.data,r=t.nodeConfig.conditionBranchConfigs;return(0,e.jsx)("div",{className:"condition-node-content-style",children:r?.map(function(a){var i,p,d,S,A=a.conditionArgs?(i=a.conditionArgs[0])===null||i===void 0||(i=i.firstArg)===null||i===void 0?void 0:i.name:"",y=((p=a.conditionArgs[0])===null||p===void 0||(p=p.secondArg)===null||p===void 0?void 0:p.name)||((d=a.conditionArgs[0])===null||d===void 0||(d=d.secondArg)===null||d===void 0?void 0:d.bindValue)||"";return(0,e.jsxs)("div",{className:"dis-left condition-item-style",children:[(0,e.jsx)("span",{className:"condition-title-sytle",children:Ve.Vy[a.branchType||Ne.F0.ELSE_IF]}),(0,e.jsx)("div",{className:"flex-1 condition-node-left-input",children:A}),a.conditionArgs&&a.conditionArgs.length>0&&(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"condition-node-compare-type",children:(S=a.conditionArgs[0])!==null&&S!==void 0&&S.compareType?Ve.cr[a.conditionArgs[0].compareType]:""}),(0,e.jsx)("div",{className:"condition-node-right-input",children:y})]})]},a.uuid)})})},Ai=function(n){var t,r=n.data,a=r.nodeConfig.inputArgs,i=r.nodeConfig.question,p=r.nodeConfig.answerType;return(0,e.jsxs)("div",{className:"qa-node-content-style",children:[(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style",children:"\u8F93\u5165"}),a?.slice(0,2).map(function(d,S){return(0,e.jsx)(sn.Z,{children:d.name},"inputArgs-".concat(d.name,"-").concat(S))}),a&&a.length>2&&(0,e.jsxs)(sn.Z,{children:["+",a.length-2]}),!a&&(0,e.jsx)("span",{children:"\u672A\u914D\u7F6E\u8F93\u5165\u5185\u5BB9"})]}),(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style",children:"\u63D0\u95EE\u5185\u5BB9"}),(0,e.jsx)("span",{className:"question-content-style",children:i||"\u672A\u914D\u7F6E\u63D0\u95EE\u5185\u5BB9"})]}),(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style",children:"\u95EE\u7B54\u7C7B\u578B"}),(0,e.jsx)("span",{children:Ve.X6[p]})]}),p===C.J4.SELECT&&((t=r.nodeConfig.options)===null||t===void 0?void 0:t.map(function(d,S){return(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style"}),(0,e.jsx)(sn.Z,{children:Ve.bQ[S]}),(0,e.jsx)("span",{className:"qa-content-style",children:d.content||"\u672A\u914D\u7F6E\u5185\u5BB9"})]},"options-".concat(d.uuid||Ve.bQ[S],"-").concat(S))}))]})},bi=function(n){var t=n.data,r=t.nodeConfig.intentConfigs;return(0,e.jsx)("div",{className:"qa-node-content-style",children:r?.map(function(a,i){return(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsxs)("span",{className:"qa-title-style",children:["\u9009\u9879",i+1]}),(0,e.jsx)("span",{className:"qa-content-style",children:a.intent||"\u672A\u914D\u7F6E\u610F\u56FE"})]},i)})})},Fi=[C.C8.LoopStart,C.C8.LoopEnd,C.C8.Start,C.C8.End],Aa=function(n){var t,r,a=n.data,i=((a?.reduce(function(te,ue){var Ie,Ce;return te+(((ue==null||(Ie=ue.options)===null||Ie===void 0?void 0:Ie.endTime)||0)-((ue==null||(Ce=ue.options)===null||Ce===void 0?void 0:Ce.startTime)||0))},0)||0)/1e3).toFixed(3),p=a?.length||0,d=(0,l.useState)(p),S=$()(d,2),A=S[0],y=S[1],g=(0,l.useState)(1),o=$()(g,2),F=o[0],u=o[1],I=(0,l.useState)(!1),m=$()(I,2),f=m[0],v=m[1],N=(0,l.useState)(!1),E=$()(N,2),T=E[0],Z=E[1],k=(0,l.useState)([]),P=$()(k,2),B=P[0],K=P[1],O=a.every(function(te){return te?.status===C.Ss.FINISHED}),w=a.some(function(te){return te?.status===C.Ss.EXECUTING||te?.status===C.Ss.STOP_WAIT_ANSWER}),H=function(ue){console.log("\u9875\u7801\u53D8\u5316\uFF1A",ue),u(ue)},ee=function(ue){console.log("\u53EA\u770B\u9519\u8BEF\u53D8\u5316\uFF1A",ue),v(ue)},ne=function(ue){console.log("\u5C55\u5F00/\u6536\u8D77\u53D8\u5316\uFF1A",ue),Z(ue)};(0,l.useEffect)(function(){K(a)},[a]),(0,l.useEffect)(function(){if(f&&!O){var te=a.filter(function(ue){return ue?.status===C.Ss.FAILED});K(te.length>0?te:[])}else K(a)},[f,O]),(0,l.useEffect)(function(){y(B.length),u(1)},[B]);var q=(0,l.useCallback)(function(){var te=a.map(function(ue){return ue?.status});switch(!0){case te.some(function(ue){return ue===C.Ss.STOP_WAIT_ANSWER}):return"\u8BF7\u7B54\u590D\u95EE\u9898";case te.some(function(ue){return ue===C.Ss.EXECUTING}):return"\u8FD0\u884C\u4E2D";case te.some(function(ue){return ue===C.Ss.FAILED}):return"\u8FD0\u884C\u5931\u8D25";case te.every(function(ue){return ue===C.Ss.FINISHED}):return"\u8FD0\u884C\u6210\u529F";default:return"\u8FD0\u884C\u5931\u8D25"}},[a]);return a?.length===0?null:(0,e.jsx)(Ei,{success:O,title:q(),loading:w,collapsible:!w,time:"".concat(i,"s"),total:A,current:F,onlyError:f,onPageChange:H,onOnlyErrorChange:ee,expanded:T,onExpandChange:ne,inputParams:((t=B[F-1])===null||t===void 0||(t=t.options)===null||t===void 0?void 0:t.input)||{},outputResult:((r=B[F-1])===null||r===void 0||(r=r.options)===null||r===void 0?void 0:r.data)||{}})},Ii=function(n){var t,r=n.data;return(0,e.jsxs)("div",{className:"exception-handle-style",children:[(0,e.jsx)("span",{className:"exception-handle-title",children:"\u5F02\u5E38\u65F6"}),(0,e.jsx)("p",{className:"exception-handle-content",children:(t=Ve.vp.find(function(a){return a.value===r?.exceptionHandleType}))===null||t===void 0?void 0:t.label})]})},Ti=function(n){var t=n.node,r=n.graph,a=t.getData(),i=ya({graph:r,nodeId:a?.id}),p=(0,l.useState)(a?.name||""),d=$()(p,2),S=d[0],A=d[1];if((0,l.useEffect)(function(){A(a?.name||"")},[a?.name]),!a)return null;var y="linear-gradient(to bottom, ".concat((0,oe.ys)(a.type)," 0%, white 100%)"),g=[C.C8.QA,C.C8.Condition,C.C8.IntentRecognition].includes(a.type),o=g?"10px":"0",F=function(E){t.setData({enableMove:!E})},u=function(E){return A(E),r.trigger("node:custom:save",{data:t.getData(),payload:{name:E}}),!0},I=Fi.includes(a.type),m=a.runResults||[],f=[C.C8.LoopStart,C.C8.LoopEnd].includes(a.type)?!1:!!m.length,v=(0,Je.g_)(a);return a?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"general-node ".concat(i?"selected-general-node":""),children:[(0,e.jsxs)("div",{className:"general-node-header",style:{background:y,marginBottom:o},children:[(0,e.jsx)("div",{className:"dis-left general-node-header-image",children:(0,oe.qM)(a.type)}),(0,e.jsx)(Ca,{dataId:a.id.toString(),value:S,onSave:u,disabled:I,onEditingStatusChange:F},a.id.toString())]}),a.type===C.C8.Condition&&(0,e.jsx)(Si,{data:a}),a.type===C.C8.QA&&(0,e.jsx)(Ai,{data:a}),a.type===C.C8.IntentRecognition&&(0,e.jsx)(bi,{data:a}),v&&(0,e.jsx)(Ii,{data:a.nodeConfig.exceptionHandleConfig})]}),f&&(0,e.jsx)(Aa,{data:m})]}):null},Di=function(n){var t=n.node,r=n.graph,a=t.getData(),i=(0,l.useState)(a?.name||""),p=$()(i,2),d=p[0],S=p[1],A=ya({graph:r,nodeId:a?.id}),y="linear-gradient(to bottom, ".concat((0,oe.ys)(a.type)," 0%, white 42px)");(0,l.useEffect)(function(){S(a?.name||"")},[a?.name]);var g=function(m){t.setData({enableMove:!m})},o=function(m){return S(m),r.trigger("node:custom:save",{data:t.getData(),payload:{name:m}}),!0},F=a.runResults||[],u=!!F.length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"loop-node-style general-node ".concat(A?"selected-general-node":""),style:{background:y},children:[(0,e.jsxs)("div",{className:"loop-node-title-style dis-left",children:[(0,e.jsx)(ct.ZX,{style:{marginRight:"6px"}}),(0,e.jsx)(Ca,{value:d,dataId:a.id.toString(),onEditingStatusChange:g,onSave:o},a.id.toString())]}),(0,e.jsx)("div",{className:"loop-node-content"})]}),u&&(0,e.jsx)(Aa,{data:F})]})};function ki(){(0,ja.z2)({shape:C.K$.General,component:Ti}),(0,ja.z2)({shape:C.K$.Loop,component:Di,resizable:!0,draggable:!0})}var Ri=function(n,t){var r=2,a=2,i=Math.abs(t.x-n.x),p=Math.floor(i/3*2),d=n.x<t.x?n.x+r:n.x-r,S=t.x>n.x?t.x-a:t.x+a,A=n.y,y=t.y,g={x:d+p,y:A},o={x:S-p,y};return vt.y$.normalize("M ".concat(d," ").concat(A,`
     L `).concat(d+(n.x<t.x?r:-r)," ").concat(A,`
     C `).concat(g.x," ").concat(g.y," ").concat(o.x," ").concat(o.y," ").concat(S," ").concat(y,`
     L `).concat(S," ").concat(y,`
    `))},wi=function(n){var t=n.containerId,r=n.changeDrawer,a=n.changeEdge,i=n.changeCondition,p=n.changeZoom,d=n.createNodeToPortOrEdge,S=n.onSaveNode,A=n.onClickBlank,y=document.getElementById(t);if(!y)throw new Error("Container not found");vt.kJ.registerConnector("curveConnector",Ri,!0),vt.kS.config({markup:[{tagName:"path",selector:"wrap"},{tagName:"path",selector:"line"}],connector:{name:"curveConnector"},attrs:{wrap:{connection:!0,strokeWidth:10,strokeLinejoin:"round",cursor:"pointer",pointerEvents:"none"},line:{connection:!0,strokeWidth:1,pointerEvents:"none",targetMarker:{name:"classic",size:6}}}});var g=function(v,N,E,T,Z,k){var P=N.target.getBoundingClientRect(),B=P.left+P.width/2,K=P.top+P.height/2,O=v.clientToLocal({x:B,y:K}),w=function(q){d({child:q,sourceNode:E,portId:T,position:O,targetNode:Z,edgeId:k})},H=!!(E!=null&&E.loopNodeId),ee=(0,e.jsx)("div",{className:"confirm-popover",children:(0,e.jsx)(fa,{dragChild:function(q){w(q),It.Z.destroyAll()},isLoop:H})});It.Z.confirm({content:ee,footer:null,icon:null,width:260,maskClosable:!0,getContainer:function(){return document.body},style:{position:"fixed",left:B}})},o=new vt.kJ({container:y,grid:{visible:!0,type:"dot",size:22,args:{color:"#606060",thickness:1}},autoResize:!0,panning:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,minScale:.2,maxScale:3,modifiers:["ctrl","meta"]},background:{color:"#f2f2f2"},connecting:{router:"manhattan",connector:"curveConnector",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,allowNode:!1,allowLoop:!1,allowEdge:!1,highlight:!0,snap:{radius:22,anchor:"bbox"},createEdge:function(){return new vt.bn.kS({attrs:{line:{strokeDasharray:"5 5",strokeWidth:1,targetMarker:null,style:{animation:"ant-line 30s infinite linear"}}}})},validateConnection:function(v){var N=v.sourceMagnet,E=v.targetMagnet,T=v.sourceCell,Z=v.targetCell;if(!N||!E||!T||!Z||T===Z)return!1;var k=E.closest(".x6-port-body"),P=N.getAttribute("port-group")||"",B=k.getAttribute("port-group")||"",K=N.getAttribute("port"),O=k.getAttribute("port");if(!K||!O)return!1;var w=o.getEdges(),H=w.some(function(ne){var q=ne.getSource(),te=ne.getTarget();return ha()(q)==="object"&&"cell"in q&&"port"in q&&ha()(te)==="object"&&"cell"in te&&"port"in te?q.cell===T.id&&q.port===K&&te.cell===Z.id&&te.port===O:!1});if(H)return!1;var ee=function(q){var te;return((te=q.getData())===null||te===void 0?void 0:te.type)==="Loop"};return!ee(T)&&!ee(Z)?(P===Ne.TG.out||P===Ne.TG.special||P===Ne.TG.exception)&&B===Ne.TG.in:(ee(T)||ee(Z),!0)}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5147FF",stroke:"#5147FF"}}}},embedding:{enabled:!1},interacting:{nodeMovable:function(v){var N=v.cell,E=N.getData(),T=E.enableMove;return T}}}),F=function(){o.getNodes().forEach(function(v){var N=v.getPorts(),E=N.map(function(T){return c()(c()({},T),{},{attrs:c()(c()({},T.attrs),{},{circle:{r:3},pointerEvents:"all",event:"mouseenter"})})});v.prop("ports/items",E)})},u=function(v){var N=o.getNodes();N.forEach(function(k){k.prop("zIndex",4)});var E=N.filter(function(k){var P=k.getData();return P.type==="Loop"});if(E.forEach(function(k){k.prop("zIndex",5);var P=k.getChildren();P?.forEach(function(B){B.prop("zIndex",8)})}),v){var T=v.getData();if(T.type==="Loop"){var Z=v.getChildren();Z?.forEach(function(k){k.isEdge()?k.prop("zIndex",15):k.prop("zIndex",20)}),v.prop("zIndex",10)}else v.prop("zIndex",99)}};o.use(new pi.H).use(new ci.N).use(new ui.T).use(new di.A).use(new vi.Y({}));var I=function(v){var N,E,T,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"active",k=arguments.length>2?arguments[2]:void 0,P=c()(c()({},v),{},{attrs:c()(c()({},v.attrs),{},{circle:c()(c()({},((N=v.attrs)===null||N===void 0?void 0:N.circle)||{}),{},{stroke:k||"#5147FF",fill:k||"#5147FF"})})}),B={normal:c()(c()({},P),{},{attrs:c()(c()({},P.attrs),{},{circle:c()(c()({},P.attrs.circle),{},{r:3}),icon:c()(c()({},((E=v.attrs)===null||E===void 0?void 0:E.icon)||{}),{},{width:0,height:0,opacity:0}),hoverCircle:{pointerEvents:"visiblePainted"}})}),active:c()(c()({},P),{},{attrs:c()(c()({},P.attrs),{},{circle:c()(c()({},P.attrs.circle),{},{r:8}),icon:c()(c()({},((T=v.attrs)===null||T===void 0?void 0:T.icon)||{}),{},{width:10,height:10,x:-5,y:-5,opacity:1}),hoverCircle:{pointerEvents:"none"}})})};return B[Z]};o.on("node:mouseenter",function(f){var v,N,E=f.node,T=E.getPorts(),Z={in:"active",out:"active"};((v=E.getData())===null||v===void 0?void 0:v.type)==="LoopStart"&&(Z.in="normal"),((N=E.getData())===null||N===void 0?void 0:N.type)==="LoopEnd"&&(Z.out="normal");var k=T.map(function(P){var B,K=I(P,Z[P.group||"in"],(B=P.attrs)===null||B===void 0||(B=B.circle)===null||B===void 0?void 0:B.fill);return K});E.prop("ports/items",k)}),o.on("node:mouseleave",function(f){var v=f.node,N=v.getPorts(),E=N.map(function(T){var Z;return I(T,"normal",(Z=T.attrs)===null||Z===void 0||(Z=Z.circle)===null||Z===void 0?void 0:Z.fill)});v.prop("ports/items",E)}),o.on("node:port:click",function(f){var v,N=f.node,E=f.port,T=f.e,Z=(v=N.getData())===null||v===void 0?void 0:v.loopNodeId;if(Z){var k,P,B,K=E?.includes("in"),O=(k=N.getParent())===null||k===void 0?void 0:k.getData(),w=((P=N.getData())===null||P===void 0?void 0:P.id)===O.innerStartNodeId,H=((B=N.getData())===null||B===void 0?void 0:B.id)===O.innerEndNodeId;if(w&&K||H&&!K){dt.ZP.warning("\u5FAA\u73AF\u8282\u70B9\u7684\u5F00\u59CB\u548C\u7ED3\u675F\u8282\u70B9\u4E0D\u80FD\u5FEB\u6377\u6DFB\u52A0\u5176\u4ED6\u8282\u70B9");return}}g(o,T,N.getData(),E),o.select(N)}),o.on("edge:mouseenter",function(f){var v,N,E=f.edge,T=(v=E.getSourceCell())===null||v===void 0?void 0:v.getData(),Z=(N=E.getTargetCell())===null||N===void 0?void 0:N.getData();T.type==="Loop"&&Z.loopNodeId||T.loopNodeId&&Z?.type==="Loop"||E.addTools([{name:"button",args:{markup:[{tagName:"circle",selector:"button",attrs:{r:8,stroke:"#5147FF",strokeWidth:1,fill:"#5147FF",cursor:"pointer"}},{tagName:"image",selector:"icon",attrs:{href:mi.Z,width:10,height:10,x:-5,y:-5,pointerEvents:"none"}}],distance:"50%",offset:{x:0,y:0},onClick:function(P){var B,K,O=P.e,w=(B=E.getSourceCell())===null||B===void 0?void 0:B.getData(),H=(K=E.getTargetCell())===null||K===void 0?void 0:K.getData(),ee=E.getSourcePortId();!w||!H||(g(o,O,w,ee,H,E.id),A?.(),o.cleanSelection())}}}])}),o.on("edge:mouseleave",function(f){var v=f.edge;v.removeTools()}),o.on("node:moved",function(f){var v=f.node,N=f.e;N.stopPropagation();var E=v.getPosition(),T=E.x,Z=E.y,k=v.getData();if(k.nodeConfig&&k.nodeConfig.extension?(k.nodeConfig.extension.x=T,k.nodeConfig.extension.y=Z):k.nodeConfig.extension={x:T,y:Z},k.loopNodeId){var P=o.getCellById(k.loopNodeId),B=P.getPosition(),K=P.getChildren();if(K&&K.length){var O=tt()(K),w;try{for(O.s();!(w=O.n()).done;){var H=w.value;if(H.isNode()){var ee=H.getData();ee.id===k.id&&(ee.nodeConfig.extension.x=T,ee.nodeConfig.extension.y=Z,i({nodeData:ee,update:Ne.Yi.moved}))}}}catch(se){O.e(se)}finally{O.f()}}var ne=P.getSize(),q=P.getData();q&&(q.nodeConfig.extension.width=ne.width,q.nodeConfig.extension.height=ne.height,q.nodeConfig.extension.x=B.x,q.nodeConfig.extension.y=B.y,i({nodeData:q,update:Ne.Yi.moved}));return}if(k.type===C.C8.Loop){var te=v.getChildren(),ue=k.innerNodes||[];if(te&&te.length){var Ie=tt()(te),Ce;try{var xe=function(){var pe=Ce.value;if(pe.isNode()){var ie=pe.getPosition(),ye=pe.getData();if(ye.nodeConfig.extension.x=ie.x,ye.nodeConfig.extension.y=ie.y,!ue.find(function(ln){return ln.id===ye.id}))ue.push(ye);else{var dn=ue.findIndex(function(ln){return ln.id===ye.id});ue[dn]=ye}}};for(Ie.s();!(Ce=Ie.n()).done;)xe()}catch(se){Ie.e(se)}finally{Ie.f()}}k.innerNodes=ue,k.nodeConfig.extension.x=T,k.nodeConfig.extension.y=Z;var ce=v.getSize();k.nodeConfig.extension.width=ce.width,k.nodeConfig.extension.height=ce.height,i({nodeData:k,update:Ne.Yi.moved});return}i({nodeData:k,update:Ne.Yi.moved}),u(v)}),o.on("node:mouseleave",function(){F()}),o.on("edge:removed",function(){F(),(0,Je.$3)(o)}),o.on("blank:click",function(){var f=o.getSelectedCells();o.unselect(f),o.cleanSelection(),A?.()}),o.on("edge:click",function(f){var v=f.edge;v.attr("line/stroke","#37D0FF"),A?.()}),o.on("edge:unselected",function(f){var v=f.edge;v.attr("line/stroke","#5147FF")}),o.on("node:change:data",function(){for(var f=arguments.length,v=new Array(f),N=0;N<f;N++)v[N]=arguments[N];console.log("node:change:data",v)}),o.on("node:custom:save",function(f){var v=f.data,N=f.payload;S(v,N)}),o.on("node:selected",function(f){var v=f.node;u(v);var N=v.getData();if(!N.isFocus){var E=c()(c()({},N),{},{id:v.id});r(E)}}),o.on("node:mousedown",function(f){var v=f.node,N=v.getData();if(N.isFocus){v.updateData({isFocus:!1}),r(c()(c()({},N),{},{id:v.id}));return}});var m=function(v,N){var E,T,Z=v.getSourcePortId(),k=(E=v.getSourceNode())===null||E===void 0?void 0:E.getData(),P=(T=v.getTargetNode())===null||T===void 0?void 0:T.getData(),B=(0,Je.y1)(v.getSourceNode(),Z);if((0,Je.Fm)(k,B)){var K,O,w=(0,Qe.Xh)(k),H=((K=w.nodeConfig)===null||K===void 0?void 0:K.exceptionHandleConfig)||{},ee=H.exceptionHandleNodeIds,ne=ee===void 0?[]:ee;if(ne.includes(P.id))return!0;ne.push(P.id);var q=c()(c()({},((O=w.nodeConfig)===null||O===void 0?void 0:O.exceptionHandleConfig)||{}),{},{exceptionHandleNodeIds:ne});return w.nodeConfig.exceptionHandleConfig=q,N(w),!0}return!1};return o.on("edge:mousedown",function(){o.cleanSelection(),A?.()}),o.on("edge:connected",function(f){var v,N,E=f.isNew,T=f.edge;if(F(),T.setRouter("manhattan"),!!E){var Z=o.getEdges(),k=T.getTargetCellId(),P=T.getSourcePortId(),B=T.getTargetPortId(),K=(v=T.getSourceNode())===null||v===void 0?void 0:v.getData(),O=(N=T.getTargetNode())===null||N===void 0?void 0:N.getData();if(!(!K||!O||!P||!B)){var w=(0,Je.Uj)(T,Z);if(w!==!1){T.remove(),w&&typeof w=="string"&&dt.ZP.warning(w);return}var H=m(T,function(q){i({nodeData:q,targetNodeId:O.id.toString()}),o.addEdge(T),(0,Je.qf)(T),T.toFront()});if(!H){if(K.type==="Loop"||O.type==="Loop"){console.log(P);var ee=(0,Je.Ob)(K,O);if(ee&&typeof ee!="string"){i({nodeData:ee,targetNodeId:O.id.toString()}),o.addEdge(T),(0,Je.qf)(T),T.toFront();return}}if(K.type===C.C8.Condition||K.type===C.C8.IntentRecognition||K.type===C.C8.QA&&K.nodeConfig.answerType===C.J4.SELECT){var ne=(0,Je.i6)(K,O,P);i({nodeData:ne,targetNodeId:O.id.toString()})}else a({type:Ne.I3.created,targetId:k,sourceNode:K,id:T.id});o.addEdge(T),(0,Je.qf)(T),setTimeout(function(){K.loopNodeId||O.loopNodeId?T.prop("zIndex",15):T.prop("zIndex",1),(0,Je.$3)(o)},0)}}}}),o.on("scale",function(f){var v=f.sx;p(v)}),o.on("node:change:size",function(f){var v=f.node,N=v.getChildren();N&&N.length&&v.prop("originSize",v.getSize())}),o.on("node:change:position",function(f){var v,N=f.node;N.getData().type!=="Loop"&&N.toFront();var E=N.getParent(),T=N.getData();if(!E&&T.loopNodeId){var Z=o.getCellById(T.loopNodeId);Z&&Z.isNode()&&(E=Z,E instanceof vt.NB&&(0,Je.HP)(E))}E&&E.isNode()&&((v=E.getData())===null||v===void 0?void 0:v.type)==="Loop"&&(0,Je.HP)(E)}),(0,Je.JM)({graph:o,changeZIndex:u}),o},Zi=wi,qt="graph-container",Bi=(0,l.forwardRef)(function(j,n){var t=j.graphParams,r=j.changeDrawer,a=j.changeEdge,i=j.changeCondition,p=j.copyNode,d=j.removeNode,S=j.changeZoom,A=j.createNodeToPortOrEdge,y=j.onSaveNode,g=j.onClickBlank,o=vn.Z.useApp(),F=o.modal,u=o.message;ki();var I=(0,l.useRef)(null),m=(0,l.useRef)(null),f=(0,l.useRef)(!1);function v(){var Ce=I.current;if(Ce){var xe=document.createElement("div");xe.id=qt,Ce?.appendChild(xe)}}var N=function(xe){var ce=m.current.getNodes().filter(function(se){var pe=se.getData();return xe(pe)});return ce.length&&ce.forEach(function(se){var pe;se.prop("zIndex",4);var ie=se.getData();(pe=ie.innerNodes)!==null&&pe!==void 0&&pe.length&&ie.innerNodes.forEach(function(ye){var dn=(0,oe.Tw)(ie.id,ye),ln=m.current.addNode(dn);se.addChild(ln)})}),ce},E=function(xe){var ce=xe.map(function(se){return(0,oe.jN)(se)}).filter(Boolean);m.current.addEdges(ce),(0,Je.$3)(m.current)},T=function(xe,ce){var se=m.current.clientToGraph(xe.x,xe.y),pe=(0,ut.KW)(ce),ie=pe.width,ye=pe.height,dn=m.current.addNode({shape:ce.shape,id:ce.id,x:se.x,y:se.y,width:ie,height:ye,data:c()({},ce),resizable:!0,zIndex:99,ports:(0,oe.Dw)(ce)});if(m.current.addNode(dn),ce.loopNodeId){var ln=m.current.getCellById(dn.id),Gn=m.current.getCellById(ce.loopNodeId);Gn.addChild(ln),(0,Je.HP)(Gn);var Vn=Gn.getSize(),pt=Gn.getPosition(),Nt=Gn.getData();Nt.nodeConfig.extension=c()(c()({},Nt.nodeConfig.extension),{},{width:Vn.width,height:Vn.height,x:pt.x,y:pt.y}),i({nodeData:Nt})}},Z=function(xe,ce){if(m.current){T(xe,ce);var se=N(function(ie){return ie.id===ce.id&&ie.type==="Loop"});if(se.length){var pe=[];se.forEach(function(ie){var ye=ie.getData();pe=pe.concat((0,oe.W8)([ye],!1)),ye.innerNodes&&ye.innerNodes.length>0&&(pe=pe.concat((0,oe.W8)(ye.innerNodes,!1)))}),E(pe)}}},k=function(xe,ce){if(!(!m.current||!ce)){var se=m.current.getCellById(xe);if(se&&se.isNode()){var pe=se.getPosition();if(pe&&(ce.nodeConfig||(ce.nodeConfig={extension:{}}),ce.nodeConfig.extension=c()(c()({},ce.nodeConfig.extension),{},{x:pe.x,y:pe.y})),(0,Je.J7)(ce)){var ie=(0,oe.Dw)(ce);if(ce.type===C.C8.QA){var ye=(0,oe.ZI)({data:ce,ports:ie.items,type:Ne.yn.update}),dn=ye.width,ln=ye.height;se.setSize(dn,ln)}se.prop("ports",ie)}se.updateData(ce)}}},P=function(xe,ce){if(m.current&&(m.current.removeCell(xe),ce&&ce.loopNodeId)){var se=m.current.getCellById(ce.loopNodeId);(0,Je.HP)(se)}},B=function(xe){if(m.current){var ce=m.current.getCellById(xe);if(ce&&ce.isEdge()){var se=ce.getSourceNode();if(se){var pe=se.getData().nextNodeIds;pe&&se.updateData({nextNodeIds:pe.filter(function(ie){return ie!==Number(ce.getTargetNode().id)})})}}m.current.removeCell(xe)}},K=function(xe,ce,se){var pe=(0,oe.jN)({source:xe,target:ce,zIndex:se?25:1});m.current&&m.current.addEdge(pe)},O=function(xe){var ce=m.current.getCellById(xe);if(!(!ce||!m.current)){ce.updateData({isFocus:!1}),m.current.cleanSelection();var se=m.current.getSelectedCells();m.current.unselect(se),m.current.select(ce)}},w=function(xe,ce){var se=m.current.getCellById(xe);if(!(!se||!m.current)){var pe=se.getData();se.updateData({isFocus:!0,runResults:[].concat(W()((pe.runResults||[]).filter(function(ie){return ie.status!==C.Ss.EXECUTING})),[ce])}),m.current.select(se)}},H=function(){if(m.current){var xe=m.current.getNodes();xe.forEach(function(ce){ce.updateData({runResults:[]})})}},ee=function(){m.current&&m.current.trigger("blank:click")},ne=function(xe){m.current&&m.current.zoomTo(Number(xe))},q=function(){m.current&&m.current.zoomToFit({padding:{top:146,left:18,right:18,bottom:18},maxScale:1,minScale:.2,preserveAspectRatio:!0,useCellGeometry:!0})},te=function(){if(m.current&&t.nodeList.length>0){m.current.clearCells();var xe=t.nodeList.filter(function(se){return!se.loopNodeId}),ce=xe.map(function(se){return(0,oe.QP)(se)});m.current.fromJSON({nodes:ce}),N(function(se){return se.type===C.C8.Loop}),E(t.edgeList),setTimeout(function(){q()},0)}},ue=function(){if(!m.current)return{x:0,y:0,width:0,height:0};var xe=m.current.getGraphArea();return{x:xe.x,y:xe.y,width:xe.width,height:xe.height}},Ie=function(){return m.current};return(0,l.useImperativeHandle)(n,function(){return{getCurrentViewPort:ue,graphAddNode:Z,graphUpdateNode:k,graphDeleteNode:P,graphDeleteEdge:B,graphChangeZoom:ne,graphChangeZoomToFit:q,drawGraph:te,graphSelectNode:O,graphCreateNewEdge:K,getGraphRef:Ie,graphTriggerBlankClick:ee,graphActiveNodeRunResult:w,graphResetRunResult:H}}),(0,l.useEffect)(function(){if(I.current){v(),m.current=Zi({containerId:qt,changeDrawer:r,changeEdge:a,changeCondition:i,changeZoom:S,createNodeToPortOrEdge:A,onSaveNode:y,onClickBlank:g});var Ce=li({graph:m.current,changeEdge:a,copyNode:p,changeCondition:i,removeNode:d,modal:F,message:u});return function(){setTimeout(function(){Ce(),m.current&&m.current.dispose()},100)}}},[]),(0,l.useEffect)(function(){t.nodeList.length===0&&(f.current=!1)},[t.nodeList]),(0,l.useEffect)(function(){t.nodeList.length>0&&!f.current&&(te(),f.current=!0)},[t.nodeList]),(0,e.jsx)("div",{ref:I,id:qt})}),Pi=Bi,Li=s(86384),Oi=s(6171),Mi=s(86548),Vi=s(24019),Ui=function(n){var t=n.isValidLoading,r=n.info,a=n.onToggleVersionHistory,i=n.setShowCreateWorkflow,p=n.showPublish,d=(0,Te.useParams)(),S=d.spaceId,A=r.name,y=r.icon,g=r.publishStatus,o=r.modified,F=r.description,u=r.publishDate,I=(0,l.useMemo)(function(){if(r){var m;return!(r!=null&&(m=r.permissions)!==null&&m!==void 0&&m.includes(C.jE.Publish))}else return!1},[r]);return(0,e.jsxs)("div",{className:"fold-header-style flex items-center gap-20",children:[(0,e.jsxs)("div",{className:"dis-left flex-1",children:[(0,e.jsx)(Oi.Z,{className:"back-icon-style",onClick:function(){return(0,Li.bC)("/space/".concat(S,"/library"))}}),(0,e.jsx)("img",{src:y||(0,oe.Pk)(ze.qR.Workflow),alt:"",className:"header-icon-style"}),(0,e.jsxs)("div",{className:"dis-col header-content-style ",children:[(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("strong",{className:"header-name-style",children:A}),(0,e.jsx)(me.Z,{content:F,children:(0,e.jsx)(Wn.Z,{className:"mr-6"})}),g==="Published"&&(0,e.jsx)(me.Z,{content:"\u5DF2\u53D1\u5E03",children:(0,e.jsx)(Ea.Z,{className:"mr-6",style:{color:"#00B23C"}})}),(0,e.jsx)(Mi.Z,{onClick:i}),u===null&&(0,e.jsx)(sn.Z,{color:"default",bordered:!1,style:{marginLeft:"6px"},children:"\u672A\u53D1\u5E03"}),u!==null&&u!==o&&(0,e.jsx)(sn.Z,{bordered:!1,color:"volcano",style:{marginLeft:"6px"},children:"\u6709\u66F4\u65B0\u672A\u53D1\u5E03"})]}),(0,e.jsx)("div",{className:"header-tag-style",children:(0,e.jsxs)(sn.Z,{color:"#EBECF5",style:{color:"rgba(15,21,40,0.82)"},children:["\u5DF2\u81EA\u52A8\u4FDD\u5B58 ",(0,mn.hK)(o??new Date().toString())]})})]})]}),(0,e.jsx)(Vi.Z,{className:"ico cursor-pointer",onClick:a}),(0,e.jsx)(_.ZP,{disabled:I,onClick:p,type:"primary",loading:t,children:t?"\u6821\u9A8C\u4E2D":"\u53D1\u5E03"})]})},Ki=Ui,Wi=["nodeConfig"],Gi=["nodeConfig"],Hi=["nodeConfig"],$i=["nodeConfig"],zi=fn.Ne.filter(function(j){return[ze.qR.Plugin,ze.qR.Workflow,ze.qR.Table,ze.qR.MCP].includes(j.key)}),Ji=function(){var n,t,r=(0,Te.useModel)("workflow"),a=r.getWorkflow,i=r.storeWorkflow,p=r.clearWorkflow,d=r.visible,S=r.setVisible,A=(0,Te.useParams)(),y=Number(A.workflowId),g=Number(A.spaceId),o=(0,l.useState)(Ve.Ec),F=$()(o,2),u=F[0],I=F[1],m=(0,l.useState)(),f=$()(m,2),v=f[0],N=f[1],E=(0,l.useState)(""),T=$()(E,2),Z=T[0],k=T[1],P=(0,l.useState)(!1),B=$()(P,2),K=B[0],O=B[1],w=(0,l.useState)(!1),H=$()(w,2),ee=H[0],ne=H[1],q=(0,l.useState)(!1),te=$()(q,2),ue=te[0],Ie=te[1],Ce=(0,l.useState)(!1),xe=$()(Ce,2),ce=xe[0],se=xe[1],pe=(0,l.useState)(ze.qR.Plugin),ie=$()(pe,2),ye=ie[0],dn=ie[1],ln=(0,l.useState)({x:0,y:0}),Gn=$()(ln,2),Vn=Gn[0],pt=Gn[1],Nt=(0,l.useState)(!1),ba=$()(Nt,2),Xi=ba[0],Fa=ba[1],An=(0,l.useRef)(null),Yi=h.Z.useForm(),qi=$()(Yi,1),Hn=qi[0],_i=(0,l.useState)(!1),Ia=$()(_i,2),el=Ia[0],Ta=Ia[1],nl=(0,l.useState)({nodeList:[],edgeList:[]}),Da=$()(nl,2),ka=Da[0],_t=Da[1],tl=(0,l.useState)({question:"",options:[]}),Ra=$()(tl,2),al=Ra[0],rl=Ra[1],sl=(0,l.useState)({}),wa=$()(sl,2),il=wa[0],ll=wa[1],ol=(0,l.useState)({errorList:[],show:!1}),Za=$()(ol,2),Rt=Za[0],mt=Za[1],ul=(0,l.useState)(!1),Ba=$()(ul,2),dl=Ba[0],Pa=Ba[1],Re=(0,l.useRef)(null),La=(0,l.useRef)(0),wt=(0,l.useRef)(),cl=(0,l.useRef)(null),vl=(0,l.useState)(!1),Oa=$()(vl,2),Ma=Oa[0],ea=Oa[1],pl=(0,l.useState)(!1),Va=$()(pl,2),ml=Va[0],Yn=Va[1],fl=(0,Te.useModel)("model"),Et=fl.setTestRun,ft=(0,Te.useModel)("workflow"),Ua=ft.setReferenceList,qn=ft.setIsModified,gl=ft.skillChange,gt=ft.setSkillChange,Zt=ft.isModified,hl=ft.setSpaceId,ht=function(){var D=new Date;N(function(x){return x?c()(c()({},x),{},{modified:D.toString()}):null})};(0,nr.Z)(Ma),er();var xl=(0,l.useCallback)(function(z,D){var x=(0,ut.ed)(z,D,An.current);An.current=x},[An]);(0,l.useEffect)(function(){i("drawerForm",u),gl&&(Hn.setFieldsValue(u.nodeConfig),gt(!1))},[u]);var na=function(){var z=Q()(V()().mark(function D(){var x,b,R;return V()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,kn.ZP.getDetails(y);case 3:x=M.sent,N(x.data),hl(x.data.spaceId),b=x.data.nodes,R=(0,oe.W8)(b),_t({edgeList:R,nodeList:b}),M.next=14;break;case 11:M.prev=11,M.t0=M.catch(0),console.error("Failed to fetch graph data:",M.t0);case 14:case"end":return M.stop()}},D,null,[[0,11]])}));return function(){return z.apply(this,arguments)}}(),Cl=function(){var z=Q()(V()().mark(function D(x){var b;return V()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return ce&&se(!1),L.next=3,kn.ZP.updateDetails(x);case 3:b=L.sent,b.code===Zn.ZP.success&&(ht(),na());case 5:case"end":return L.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),yl=function(D){if(D===-1){var x;(x=Re.current)===null||x===void 0||x.graphChangeZoomToFit()}else{var b;(b=Re.current)===null||b===void 0||b.graphChangeZoom(D)}},jl=function(D){N(function(x){return x?c()(c()({},x),{},{extension:{size:D}}):null})},Bt=function(){var z=Q()(V()().mark(function D(x){var b,R;return V()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(x===Ne.zQ.empty||La.current===x)){M.next=2;break}return M.abrupt("return",!1);case 2:return M.next=4,kn.ZP.getOutputArgs(x);case 4:return b=M.sent,R=b.code===Zn.ZP.success,R&&(b.data&&b.data.previousNodes&&b.data.previousNodes.length?Ua(b.data):Ua({previousNodes:[],innerPreviousNodes:[],argMap:{}})),M.abrupt("return",R);case 8:case"end":return M.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),Ka=function(){var z=Q()(V()().mark(function D(x){var b,R;return V()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,kn.ZP.getNodeConfig(x);case 2:if(b=M.sent,b.code!==Zn.ZP.success){M.next=7;break}return I(b.data),(R=Re.current)===null||R===void 0||R.graphUpdateNode(String(b.data.id),b.data),M.abrupt("return",b.data);case 7:return M.abrupt("return",!1);case 8:case"end":return M.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),St=function(){var z=Q()(V()().mark(function D(x){var b,R,L,M,U,X,Y,Ee;return V()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(b=x.type,R=x.targetId,L=x.sourceNode,M=x.id,Re.current){Me.next=3;break}return Me.abrupt("return");case 3:return U=Re.current,X=U.graphUpdateNode,Y=U.graphDeleteEdge,Me.next=6,tr({type:b,targetId:R,sourceNode:L,id:M,graphUpdateNode:X,graphDeleteEdge:Y,getReference:function(){return Bt(a("drawerForm").id)}});case 6:Ee=Me.sent,Ee&&xl("sourceNode",{nextNodeIds:Ee});case 8:case"end":return Me.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),Nl=function(){var z=Q()(V()().mark(function D(x){var b,R,L,M;return V()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(x.id!==Ne.zQ.empty){X.next=2;break}return X.abrupt("return",!1);case 2:return R=(0,Qe.Xh)(x),(b=Re.current)===null||b===void 0||b.graphUpdateNode(String(R.id),R),L=!1,X.next=7,(0,ut.zD)(R);case 7:if(M=X.sent,M.code!==Zn.ZP.success){X.next=14;break}return x.id===a("drawerForm").id&&I(R),X.next=12,Bt(a("drawerForm").id);case 12:ht(),L=!0;case 14:return X.abrupt("return",L);case 15:case"end":return X.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),Jn=function(){var z=Q()(V()().mark(function D(x){var b,R,L,M,U,X,Y,Ee,Ze;return V()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(R=x.nodeData,L=x.update,M=x.targetNodeId,U=(0,Qe.Xh)(R),X=L&&L===Ne.Yi.moved,X&&R.id===a("drawerForm").id&&(Ee=(Y=cl.current)===null||Y===void 0?void 0:Y.getFormValues(),U=c()(c()({},R),{},{nodeConfig:c()(c()(c()({},R.nodeConfig),Ee),{},{extension:c()({},R.nodeConfig.extension)})})),U.id!==Ne.zQ.empty){Ue.next=6;break}return Ue.abrupt("return");case 6:return(b=Re.current)===null||b===void 0||b.graphUpdateNode(String(U.id),U),Ue.next=9,(0,ut.zD)(U);case 9:if(Ze=Ue.sent,Ze.code!==Zn.ZP.success){Ue.next=17;break}if(ht(),!X){Ue.next=14;break}return Ue.abrupt("return");case 14:M&&U.type===C.C8.Loop&&Ka(Number(R.id)),U.id===a("drawerForm").id&&I(U),Bt(a("drawerForm").id);case 17:case"end":return Ue.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),xt=(0,l.useCallback)(function(){var z=Q()(V()().mark(function D(x){var b,R,L,M;return V()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return b=!1,X.prev=1,R=Hn.getFieldsValue(!0),([C.C8.IntentRecognition,C.C8.Condition].includes(x.type)||x.type===C.C8.QA&&R.answerType===C.J4.SELECT)&&x.id===a("drawerForm").id?(M=(0,ut.$N)(x.type,R,x.nodeConfig),L=c()(c()({},x),{},{nodeConfig:c()(c()({},x.nodeConfig),M)})):(L=c()(c()({},x),{},{nodeConfig:c()(c()({},x.nodeConfig),R)}),x.type===C.C8.QA&&(L.nextNodeIds=[])),X.next=6,Nl(L);case 6:b=X.sent,X.next=13;break;case 9:X.prev=9,X.t0=X.catch(1),console.error("\u8868\u5355\u63D0\u4EA4\u5931\u8D25:",X.t0),b=!1;case 13:return X.abrupt("return",b);case 14:case"end":return X.stop()}},D,null,[[1,9]])}));return function(D){return z.apply(this,arguments)}}(),[Hn]),Pt=(0,l.useCallback)(Q()(V()().mark(function z(){var D,x,b,R,L,M,U;return V()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(D=!1,x=a("skillChange"),a("isModified")!==!1){Y.next=4;break}return Y.abrupt("return",D);case 4:return Y.prev=4,qn(!1),Y.next=8,xt(a("drawerForm"));case 8:if(D=Y.sent,!x){Y.next=16;break}return Y.next=12,kn.ZP.getNodeConfig(a("drawerForm").id);case 12:b=Y.sent,R=b.code===Zn.ZP.success,L=b.data,R&&L&&L.nodeConfig[Ve.Fw]?(U=(0,ut.gc)(Hn.getFieldsValue(!0)[Ve.Fw]||[],L.nodeConfig[Ve.Fw]),Hn.setFieldValue(Ve.Fw,U),gt(!1),I(b.data),(M=Re.current)===null||M===void 0||M.graphUpdateNode(String(L.id),L)):gt(!1);case 16:Y.next=22;break;case 18:Y.prev=18,Y.t0=Y.catch(4),console.error("Failed to fetch node config:",Y.t0),gt(!1);case 22:return Y.abrupt("return",D);case 23:case"end":return Y.stop()}},z,null,[[4,18]])})),[qn,Hn,gt]),At=(0,l.useCallback)(function(){var z=Q()(V()().mark(function D(x){var b,R,L;return V()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:b=a("isModified"),R=a("drawerForm"),b===!0&&R?.id!==0?(qn(!1),xt(R),wt.current&&clearTimeout(wt.current)):x&&x.id!==0&&Bt(x.id),x&&x.type!==C.C8.Start&&(Et(!1),k("")),L=a("visible"),I(function(X){return Et(!1),X.id===Ne.zQ.empty&&x===null?(S(!1),X):x!==null?(L||S(!0),x):(S(!1),{id:Ne.zQ.empty,shape:C.K$.General,description:"",workflowId:y,type:C.C8.Start,nodeConfig:{},name:"",icon:""})});case 6:case"end":return U.stop()}},D)}));return function(D){return z.apply(this,arguments)}}(),[]),Wa=function(D){return D===C.C8.Condition||D===C.C8.IntentRecognition},El=function(){var z=Q()(V()().mark(function D(x,b){return V()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return gt(!0),L.next=3,Jn({nodeData:c()(c()({},x),{},{nodeConfig:c()(c()({},x.nodeConfig),{},{knowledgeBaseConfigs:b})})});case 3:case"end":return L.stop()}},D)}));return function(x,b){return z.apply(this,arguments)}}(),Sl=function(){var z=Q()(V()().mark(function D(x,b,R,L,M){var U,X,Y;return V()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return X=(0,oe.k6)(x,b,R,L),Ze.next=3,Jn({nodeData:X});case 3:Y=b.split("-").slice(0,-1).join("-"),(U=Re.current)===null||U===void 0||U.graphCreateNewEdge(Y,String(R),M);case 5:case"end":return Ze.stop()}},D)}));return function(x,b,R,L,M){return z.apply(this,arguments)}}(),Al=function(){var z=Q()(V()().mark(function D(x,b,R,L,M){var U,X,Y;return V()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return X=(0,oe.Le)({sourceNode:x,id:R,targetNodeId:L?.id}),Ze.next=3,Jn({nodeData:X});case 3:Y=b.split("-").slice(0,-1).join("-"),(U=Re.current)===null||U===void 0||U.graphCreateNewEdge(Y,String(R),M);case 5:case"end":return Ze.stop()}},D)}));return function(x,b,R,L,M){return z.apply(this,arguments)}}(),bl=function(){var z=Q()(V()().mark(function D(x,b,R){var L;return V()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,St({type:Ne.I3.created,targetId:x.toString(),sourceNode:b});case 2:(L=Re.current)===null||L===void 0||L.graphCreateNewEdge(String(b.id),String(x),R);case 3:case"end":return U.stop()}},D)}));return function(x,b,R){return z.apply(this,arguments)}}(),Fl=function(){var z=Q()(V()().mark(function D(x,b,R){var L,M,U,X;return V()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return M=(0,oe.F8)(x,b),U=M.nodeData,X=M.sourcePortId,Ee.next=3,Jn({nodeData:U});case 3:(L=Re.current)===null||L===void 0||L.graphCreateNewEdge(X,String(b.id),R);case 4:case"end":return Ee.stop()}},D)}));return function(x,b,R){return z.apply(this,arguments)}}(),Il=function(){var z=Q()(V()().mark(function D(x,b,R,L){var M;return V()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,St({type:Ne.I3.created,targetId:b,sourceNode:R});case 2:(M=Re.current)===null||M===void 0||M.graphCreateNewEdge(String(x),b,L);case 3:case"end":return X.stop()}},D)}));return function(x,b,R,L){return z.apply(this,arguments)}}(),Tl=function(){var z=Q()(V()().mark(function D(x,b,R,L){var M,U,X,Y,Ee,Ze;return V()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(M=R.split("-")[0],!Wa(x.type)){Ue.next=8;break}return X=(0,oe.F8)(x,b),Y=X.nodeData,Ee=X.sourcePortId,Ue.next=5,Jn({nodeData:Y});case 5:(U=Re.current)===null||U===void 0||U.graphCreateNewEdge(Ee,b.id.toString(),L),Ue.next=11;break;case 8:return Ue.next=10,St({type:Ne.I3.created,targetId:M,sourceNode:x});case 10:(Ze=Re.current)===null||Ze===void 0||Ze.graphCreateNewEdge(x.id.toString(),M.toString(),L);case 11:case"end":return Ue.stop()}},D)}));return function(x,b,R,L){return z.apply(this,arguments)}}(),Dl=function(){var z=Q()(V()().mark(function D(x,b,R,L,M){var U;return V()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!Wa(x.type)){Y.next=5;break}return Y.next=3,Fl(x,b,M);case 3:Y.next=7;break;case 5:return Y.next=7,Il(x.id,b.id.toString(),x,M);case 7:return Y.next=9,St({type:Ne.I3.deleted,targetId:b.id.toString(),sourceNode:R});case 9:(U=Re.current)===null||U===void 0||U.graphDeleteEdge(L);case 10:case"end":return Y.stop()}},D)}));return function(x,b,R,L,M){return z.apply(this,arguments)}}(),kl=function(){var z=Q()(V()().mark(function D(x,b){var R,L,M,U,X,Y,Ee,Ze,Me,Ue,et,Qn,$n,hn,Un,Ya;return V()().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:if(U=(0,oe.uP)(x.type),X=x.nodeConfig,Y=Se()(x,Wi),Ee=b.nodeConfig||{},Ze=Ee.toolName,Me=Ee.mcpId,Ue=c()(c()({},Y),{},{shape:U,nodeConfig:c()(c()({},X),Ze?{toolName:Ze,mcpId:Me}:{})}),et=X?.extension||{},(R=Re.current)===null||R===void 0||R.graphAddNode(et,Ue),!(b.type===C.C8.Knowledge&&(L=b.nodeConfig)!==null&&L!==void 0&&L.knowledgeBaseConfigs)){an.next=9;break}return an.next=9,El(Ue,b.nodeConfig.knowledgeBaseConfigs);case 9:return an.next=11,At(Ue);case 11:if((M=Re.current)===null||M===void 0||M.graphSelectNode(String(x.id)),ht(),!An.current){an.next=47;break}if(Qn=An.current,$n=Qn.portId,hn=Qn.edgeId,Un=!!x.loopNodeId,Ya=$n.endsWith("out"),an.prev=17,!$n.includes(Ne.TG.exception)){an.next=23;break}return an.next=21,Al(An.current.sourceNode,$n,x.id,An.current.targetNode,Un);case 21:an.next=35;break;case 23:if(!($n.length>15)){an.next=28;break}return an.next=26,Sl(An.current.sourceNode,$n,x.id,An.current.targetNode,Un);case 26:an.next=35;break;case 28:if(!Ya){an.next=33;break}return an.next=31,bl(x.id,An.current.sourceNode,Un);case 31:an.next=35;break;case 33:return an.next=35,Tl(Ue,An.current.sourceNode,$n,Un);case 35:if(!An.current.targetNode){an.next=38;break}return an.next=38,Dl(Ue,An.current.targetNode,An.current.sourceNode,hn,Un);case 38:an.next=44;break;case 40:throw an.prev=40,an.t0=an.catch(17),console.error("\u5904\u7406\u8282\u70B9\u8FDE\u63A5\u65F6\u53D1\u751F\u9519\u8BEF:",an.t0),an.t0;case 44:return an.prev=44,An.current=null,an.finish(44);case 47:case"end":return an.stop()}},D,null,[[17,40,44,47]])}));return function(x,b){return z.apply(this,arguments)}}(),Ga=function(){var z=Q()(V()().mark(function D(x,b){var R,L,M,U,X,Y,Ee,Ze,Me,Ue,et,Qn;return V()().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:if(R=JSON.parse(JSON.stringify(x)),R.workflowId=y,R.extension=b,L=(0,oe.ZI)({data:R,ports:[],type:Ne.yn.create}),M=L.width,U=L.height,X=[C.C8.Condition,C.C8.QA,C.C8.IntentRecognition,C.C8.Loop],x.type&&X.includes(x.type)&&(R.extension=c()(c()({},b),{},{height:U,width:M})),!(u.type===C.C8.Loop||u.loopNodeId)){hn.next=15;break}if(R.type!==C.C8.Loop){hn.next=10;break}return dt.ZP.warning("\u5FAA\u73AF\u4F53\u91CC\u8BF7\u4E0D\u8981\u518D\u6DFB\u52A0\u5FAA\u73AF\u4F53"),hn.abrupt("return");case 10:return R.loopNodeId=Number(u.loopNodeId)||Number(u.id),hn.next=13,kn.ZP.getNodeConfig(R.loopNodeId);case 13:Y=hn.sent,Y.code===Zn.ZP.success&&(Ee=Y.data,Ze=Ee.nodeConfig.extension,R.extension=c()(c()({},R.extension),{},{x:(Ze?.x||0)+40,y:(Ze?.y||0)+110}));case 15:return An.current&&(Me=An.current.sourceNode,Me.loopNodeId&&(R.loopNodeId=Me.loopNodeId)),Ue=R.nodeConfig,et=Se()(R,Gi),hn.next=19,kn.ZP.apiAddNode(c()({nodeConfigDto:c()({},Ue)},et));case 19:if(Qn=hn.sent,Qn.code!==Zn.ZP.success){hn.next=29;break}return hn.prev=21,hn.next=24,kl(Qn.data,x);case 24:hn.next=29;break;case 26:hn.prev=26,hn.t0=hn.catch(21),console.error("\u5904\u7406\u8282\u70B9\u521B\u5EFA\u6210\u529F\u540E\u7684\u64CD\u4F5C\u5931\u8D25:",hn.t0);case 29:case"end":return hn.stop()}},D,null,[[21,26]])}));return function(x,b){return z.apply(this,arguments)}}(),Ha=function(){var z=Q()(V()().mark(function D(x){var b,R,L,M,U,X,Y,Ee,Ze,Me,Ue,et,Qn,$n;return V()().wrap(function(Un){for(;;)switch(Un.prev=Un.next){case 0:return Un.next=2,kn.ZP.apiCopyNode(x.id.toString());case 2:b=Un.sent,b.code===Zn.ZP.success&&(M=b.data,U=M.nodeConfig,X=Se()(M,Hi),Y=U?.extension||{},Ee=x.nodeConfig||{},Ze=Ee.toolName,Me=Ee.mcpId,Ue=c()(c()({},X),{},{shape:(0,oe.uP)(b.data.type),nodeConfig:c()(c()(c()({},U),Ze?{toolName:Ze,mcpId:Me}:{}),{},{extension:c()(c()({},Y),{},{x:(Y.x||0)+32,y:(Y.y||0)+32})})}),et={x:(Y.x||0)+20,y:(Y.y||0)+20},(R=Re.current)===null||R===void 0||R.graphAddNode(et,Ue),Qn=(0,oe.uP)(b.data.type),$n=c()(c()({},b.data),{},{shape:Qn}),Jn({nodeData:$n}),(L=Re.current)===null||L===void 0||L.graphSelectNode(String(b.data.id)));case 4:case"end":return Un.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),$a=function(){var z=Q()(V()().mark(function D(x,b){var R,L;return V()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return S(!1),La.current=Number(x),I({id:0,description:"",shape:C.K$.General,workflowId:y,type:C.C8.Start,nodeConfig:{},name:"",icon:""}),U.next=5,kn.ZP.apiDeleteNode(x);case 5:R=U.sent,R.code===Zn.ZP.success&&((L=Re.current)===null||L===void 0||L.graphDeleteNode(String(x)),wt.current&&clearTimeout(wt.current),ht(),b&&(b.type==="Loop"?At(null):Ka(b.loopNodeId)));case 7:case"end":return U.stop()}},D)}));return function(x,b){return z.apply(this,arguments)}}(),Rl=function(D,x){if(!(x&&x!=="workflow")){var b;if(D.targetType===ze.qR.Knowledge||D.targetType===ze.qR.Table){var R=[c()(c()({},D),{},{type:C.C8.Knowledge,knowledgeBaseId:D.targetId})],L=sessionStorage.getItem("tableType");b={name:D.name,shape:C.K$.General,description:D.description,type:D.targetType===ze.qR.Knowledge?C.C8.Knowledge:L||C.C8.TableDataQuery,typeId:D.targetId,nodeConfig:{knowledgeBaseConfigs:R,extension:{}}}}else if(D.targetType===ze.qR.Workflow||D.targetType===ze.qR.Plugin){var M=D.targetType===ze.qR.Workflow?C.C8.Workflow:C.C8.Plugin;b={name:D.name,shape:C.K$.General,description:D.description,type:M,typeId:D.targetId}}else if(D.targetType===ze.qR.MCP)b={name:D.name,shape:C.K$.General,description:D.description,type:C.C8.MCP,typeId:D.targetId,nodeConfig:{toolName:D.toolName,mcpId:D.targetId}};else{dt.ZP.warning("\u6682\u4E0D\u652F\u6301\u8BE5\u7C7B\u578B\u7EC4\u4EF6");return}Ga(b,Vn),sessionStorage.getItem("tableType")&&sessionStorage.removeItem("tableType"),Ie(!1)}},za=function(){var z=Q()(V()().mark(function D(x,b,R){var L,M,U,X,Y,Ee;return V()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(M=x?.type||"",U=[C.C8.Plugin,C.C8.Workflow,C.C8.MCP].includes(M),X=["TableDataAdd","TableDataDelete","TableDataUpdate","TableDataQuery","TableSQL"].includes(M),Y=(L=Re.current)===null||L===void 0?void 0:L.getCurrentViewPort(),!U){Me.next=10;break}dn(M),Ie(!0),pt((0,Je.Pk)(b,Y,R)),Me.next=20;break;case 10:if(!X){Me.next=17;break}dn(ze.qR.Table),Ie(!0),pt((0,Je.Pk)(b,Y,R)),sessionStorage.setItem("tableType",M),Me.next=20;break;case 17:return Ee=(0,Je.Pk)(b,Y,R),Me.next=20,Ga(x,Ee);case 20:case"end":return Me.stop()}},D)}));return function(x,b,R){return z.apply(this,arguments)}}(),wl=function(){var z=Q()(V()().mark(function D(){var x,b,R,L,M,U;return V()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(Yn(!1),a("isModified")!==!0){Y.next=4;break}return Y.next=4,Pt();case 4:return Y.next=6,kn.ZP.getDetails(y);case 6:return b=Y.sent,R=b.data.nodes,_t(function(Ee){return c()(c()({},Ee),{},{nodeList:R})}),At(b.data.startNode),(x=Re.current)===null||x===void 0||x.graphSelectNode(String(b.data.startNode.id)),Y.next=13,kn.ZP.validWorkflow(v?.id);case 13:if(L=Y.sent,L.code!==Zn.ZP.success){Y.next=25;break}if(M=L.data.filter(function(Ee){return!Ee.success}),M.length!==0){Y.next=20;break}return Y.abrupt("return",!0);case 20:return U=M.map(function(Ee){return{nodeId:Ee.nodeId,error:Ee.messages.join(",")}}),mt({show:!0,errorList:U}),Y.abrupt("return",!1);case 23:Y.next=26;break;case 25:return Y.abrupt("return",!1);case 26:case"end":return Y.stop()}},D)}));return function(){return z.apply(this,arguments)}}(),Zl=function(){ne(!1);var D=new Date;N(c()(c()({},v),{},{modified:D.toString(),publishDate:D.toString(),publishStatus:"Published"}))},Ja=function(){var D;k(""),(D=Re.current)===null||D===void 0||D.graphResetRunResult()},Qa=function(){var z=Q()(V()().mark(function D(x){var b,R;return V()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return b={nodeId:u.id,params:x},k(""),M.next=4,(0,ra.W)({url:"".concat("","/api/workflow/test/node/execute"),method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem(Fe.LA)),Accept:" application/json, text/plain, */* "},body:b,onMessage:function(X){X.success?(X.complete&&(X.data&&X.data.output&&k(X.data.output),k(JSON.stringify(X.data,null,2)),localStorage.removeItem("testRun")),X.data.status==="STOP_WAIT_ANSWER"&&(Yn(!1),O(!0),localStorage.setItem("testRun",JSON.stringify(x)))):X.message&&k(X.message)},onError:function(X){console.error("\u6D41\u5F0F\u8BF7\u6C42\u5F02\u5E38:",X)},onOpen:function(X){console.log("\u8FDE\u63A5\u5DF2\u5EFA\u7ACB",X.status)},onClose:function(){Yn(!1)}});case 4:R=M.sent,R();case 6:case"end":return M.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),Bl=function(){var z=Q()(V()().mark(function D(x){var b;return V()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return Yn(!0),L.next=3,(0,ra.W)({url:"".concat("","/api/workflow/test/execute"),method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem(Fe.LA)),Accept:" application/json, text/plain, */* "},body:x,onMessage:function(U){if(U.data&&U.data.nodeId){var X,Y={requestId:U.requestId,options:c()(c()({},U.data.result),{},{nodeId:U.data.nodeId,nodeName:U.data.nodeName}),status:U.data.status};(X=Re.current)===null||X===void 0||X.graphActiveNodeRunResult(U.data.nodeId.toString(),Y)}U.success?(U.complete&&(U.data&&U.data.output&&(k(U.data.output),localStorage.removeItem("testRun")),ll(U.nodeExecuteResultMap[(v?.startNode.id).toString()].data),k(JSON.stringify(U.data,null,2)),Yn(!1)),U.data.status==="STOP_WAIT_ANSWER"&&(Yn(!1),O(!0),localStorage.setItem("testRun",JSON.stringify(x)),U.data.result&&rl(U.data.result.data))):mt(function(Ee){return U.data&&U.data.result?{errorList:[].concat(W()(Ee.errorList),[U.data.result]),show:!0}:U.data?Ee:{errorList:[].concat(W()(Ee.errorList),[{error:U.message}]),show:!0}})},onError:function(U){console.error("\u6D41\u5F0F\u8BF7\u6C42\u5F02\u5E38:",U)},onOpen:function(U){console.log("\u8FDE\u63A5\u5DF2\u5EFA\u7ACB",U.status)},onClose:function(){Yn(!1)}});case 3:b=L.sent,b(),ht();case 6:case"end":return L.stop()}},D)}));return function(x){return z.apply(this,arguments)}}(),Xa=function(){var z=Q()(V()().mark(function D(){var x,b;return V()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return x=setTimeout(function(){Fa(!0)},300),L.prev=1,L.next=4,wl();case 4:b=L.sent,b&&(k(""),Et(!0)),L.next=11;break;case 8:L.prev=8,L.t0=L.catch(1),console.error("\u8BD5\u8FD0\u884C\u6240\u6709\u8282\u70B9\u5931\u8D25:",L.t0);case 11:return L.prev=11,clearTimeout(x),Fa(!1),L.finish(11);case 15:case"end":return L.stop()}},D,null,[[1,8,11,15]])}));return function(){return z.apply(this,arguments)}}(),Pl=(0,l.useCallback)(function(){var z=Q()(V()().mark(function D(x,b){var R,L;return V()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(mt({errorList:[],show:!1}),Ja(),x!=="Start"){U.next=8;break}L=localStorage.getItem("testRun")||null,L?(R=c()(c()({},JSON.parse(L)),b),O(!1),localStorage.removeItem("testRun")):R={workflowId:v?.id,params:b,requestId:(0,ae.Z)()},Bl(R),U.next=17;break;case 8:if(x!=="Code"){U.next=16;break}if(!Zt){U.next=13;break}return qn(!1),U.next=13,xt(a("drawerForm"));case 13:Qa(b),U.next=17;break;case 16:Qa(b);case 17:Yn(!0);case 18:case"end":return U.stop()}},D)}));return function(D,x){return z.apply(this,arguments)}}(),[Zt,u.id]),Ll=(0,l.useCallback)(function(){var z=Q()(V()().mark(function D(x){return V()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:R.t0=x,R.next=R.t0==="Rename"?3:R.t0==="Delete"?5:R.t0==="Duplicate"?7:R.t0==="TestRun"?9:21;break;case 3:return Ta(!0),R.abrupt("break",22);case 5:return $a(u.id),R.abrupt("break",22);case 7:return Ha(u),R.abrupt("break",22);case 9:if(!Zt){R.next=13;break}return qn(!1),R.next=13,xt(a("drawerForm"));case 13:if(a("drawerForm").type!==C.C8.Start){R.next=18;break}return R.next=16,Xa();case 16:R.next=20;break;case 18:k(""),Et(!0);case 20:return R.abrupt("break",22);case 21:return R.abrupt("break",22);case 22:case"end":return R.stop()}},D)}));return function(D){return z.apply(this,arguments)}}(),[Zt,u.id]),Ol=(0,l.useCallback)(function(){var z;(z=Re.current)===null||z===void 0||z.graphTriggerBlankClick()},[]),Ml=(0,l.useCallback)(function(){At(null),S(!1)},[]),Vl=function(D){var x=D.name,b=D.description,R=c()(c()({},u),{},{name:x,description:b});Jn({nodeData:R}),Ta(!1)},Ul=(0,l.useCallback)(function(z,D){var x,b=c()(c()({},z),D);Jn({nodeData:b});var R=(x=Re.current)===null||x===void 0?void 0:x.getGraphRef();if(R){var L=R.getCellById(z.id.toString());L&&(L.updateData({name:b.name}),I(function(M){return c()(c()({},M),{},{name:b.name})}))}else console.error("graph is null")},[Jn,I]),Kl=function(D){a("visible")&&D&&D.id===a("drawerForm").id||At(D)},Wl=function(D){var x,b=(x=Re.current)===null||x===void 0?void 0:x.getGraphRef(),R=b?.getCellById(D.toString());if(R){var L;(L=Re.current)===null||L===void 0||L.graphSelectNode(D.toString())}},Gl=function(D){if(!(d&&D&&D.id===a("drawerForm").id)&&D){var x,b=(x=Re.current)===null||x===void 0?void 0:x.getGraphRef(),R=b?.getCellById(D.id.toString());R&&b?.centerCell(R),Wl(D.id)}},Hl=function(){var z=Q()(V()().mark(function D(x){var b,R,L,M,U,X,Y,Ee;return V()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return R=x.child,L=x.sourceNode,M=x.portId,U=x.position,X=x.targetNode,Y=x.edgeId,An.current={sourceNode:L,portId:M,targetNode:X,edgeId:Y},Ee=(0,Je.q7)({position:U,portId:M,type:R.type,hasTargetNode:!!X,sourceNodeId:L.id.toString(),graph:(b=Re.current)===null||b===void 0?void 0:b.getGraphRef()}),Me.next=5,za(R,Ee);case 5:case"end":return Me.stop()}},D)}));return function(x){return z.apply(this,arguments)}}();(0,l.useEffect)(function(){return na(),function(){qn(function(z){return z===!0&&xt(a("drawerForm")),!1}),S(!1),Et(!1),p()}},[]),(0,l.useEffect)(function(){if(u.id!==0){var z=(0,Qe.Xh)(u);Hn.resetFields(),Hn.setFieldsValue(z.nodeConfig),(0,oe.wK)({type:z.type,nodeConfig:z.nodeConfig,form:Hn})}},[u.id,u.type]);var $l=function(){var z=Q()(V()().mark(function D(){var x,b,R;return V()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(Yn(!1),a("isModified")!==!0){M.next=4;break}return M.next=4,Pt();case 4:return M.next=6,kn.ZP.validWorkflow(v?.id);case 6:if(x=M.sent,x.code!==Zn.ZP.success){M.next=18;break}if(b=x.data.filter(function(U){return!U.success}),b.length!==0){M.next=13;break}return M.abrupt("return",!0);case 13:return R=b.map(function(U){return{nodeId:U.nodeId,error:U.messages.join(",")}}),mt({show:!0,errorList:R}),M.abrupt("return",!1);case 16:M.next=19;break;case 18:return M.abrupt("return",!1);case 19:case"end":return M.stop()}},D)}));return function(){return z.apply(this,arguments)}}(),zl=function(){var z=Q()(V()().mark(function D(){var x,b;return V()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return x=setTimeout(function(){Pa(!0)},300),L.next=3,$l();case 3:b=L.sent,b&&(ne(!0),mt(c()(c()({},Rt),{},{errorList:[],show:!1}))),x&&clearTimeout(x),Pa(!1);case 7:case"end":return L.stop()}},D)}));return function(){return z.apply(this,arguments)}}();qa({interval:3e3,run:(0,l.useCallback)(Q()(V()().mark(function z(){var D;return V()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return D=a("drawerForm"),b.next=3,xt(D);case 3:return b.abrupt("return",b.sent);case 4:case"end":return b.stop()}},z)})),[]),doNext:(0,l.useCallback)(function(){qn(!1)},[qn])});var Jl=function(){var z=Q()(V()().mark(function D(){return V()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return _t({nodeList:[],edgeList:[]}),b.next=3,na();case 3:case"end":return b.stop()}},D)}));return function(){return z.apply(this,arguments)}}(),Ql=(0,l.useCallback)(function(z,D){var x=a("drawerForm").id;if(!(!Re.current||!x||x===Ne.zQ.empty)){var b=Re.current.getGraphRef().getCellById(x.toString());if(!(!b||!b.isNode())){var R=b.getData();if(R){var L=R.nodeConfig,M=Se()(R,$i),U=Object.keys(z).reduce(function(X,Y){return typeof Y=="string"&&Y&&(X[Y]=D[Y]),X},{});Re.current.graphUpdateNode(x,c()(c()({},M),{},{nodeConfig:(0,ar.Z)((0,Qe.Xh)(L),U)}))}}}},[Re.current]);return(0,e.jsxs)("div",{id:"container",children:[(0,e.jsx)(Ki,{isValidLoading:dl,info:v??{},onToggleVersionHistory:function(){return ea(!0)},setShowCreateWorkflow:function(){return se(!0)},showPublish:zl}),(0,e.jsx)(Pi,{graphParams:ka,ref:Re,changeDrawer:Kl,changeEdge:St,changeCondition:Jn,removeNode:$a,copyNode:Ha,changeZoom:jl,createNodeToPortOrEdge:Hl,onSaveNode:Ul,onClickBlank:Ml}),(0,e.jsx)(ni,{dragChild:za,foldWrapItem:u,changeGraph:yl,handleTestRun:Xa,testRunLoading:Xi,zoomSize:(n=v==null||(t=v.extension)===null||t===void 0?void 0:t.size)!==null&&n!==void 0?n:1}),(0,e.jsx)(wn,{className:"fold-wrap-style",lineMargin:!0,title:u.name,visible:d,onClose:Ol,description:u.description,backgroundColor:(0,oe.ys)(u.type),icon:(0,oe.qM)(u.type),showNameInput:el,changeFoldWrap:Vl,otherAction:(0,e.jsx)(pn,{onChange:Ll,testRun:Ve.fY.includes(u.type),nodeType:u.type,action:u.type!==C.C8.Start&&u.type!==C.C8.End}),children:(0,e.jsx)("div",{className:"dispose-node-style",children:(0,e.jsx)(h.Z,{form:Hn,layout:"vertical",onFinishFailed:Pt,onFinish:Pt,clearOnDestroy:!0,onValuesChange:function(D){console.log("onValuesChange",D),qn(!0),Ql(D,Hn.getFieldsValue(!0))},children:(0,e.jsx)(Hs,{params:u},"".concat(u.type,"-").concat(u.id,"-nodePanelDrawer"))},"".concat(u.type,"-").concat(u.id,"-form"))})},"".concat(u.type,"-").concat(u.id,"-foldWrap")),(0,e.jsx)(Be.Z,{checkTag:ye,onAdded:Rl,open:ue,tabs:zi,addComponents:[{type:ze.qR.Workflow,targetId:y,status:ze.BQ.Added}],onCancel:function(){return Ie(!1)}}),(0,e.jsx)(Pn,{node:u,run:Pl,testRunResult:Z,clearRunResult:Ja,loading:ml,stopWait:K,formItemValue:il,testRunParams:al}),(0,e.jsx)(He.Z,c()({onConfirm:Cl,onCancel:function(){return se(!1)},open:ce,type:C.jA.Update},v)),(0,e.jsx)(ri,{visible:d,errorList:Rt.errorList,show:Rt.show,onClose:function(){return mt(c()(c()({},Rt),{},{errorList:[],show:!1}))},onClickItem:Gl,nodeList:ka.nodeList}),(0,e.jsx)(_e.Z,{mode:ze.qR.Workflow,targetId:y,spaceId:g,category:v?.category,open:ee,onCancel:function(){return ne(!1)},onConfirm:Zl}),(0,e.jsx)(aa.Z,{targetId:y,targetName:v?.name,targetType:ze.qR.Workflow,permissions:v?.permissions||[],visible:Ma,isDrawer:!0,onClose:function(){return ea(!1)},renderActions:function(D){return(0,e.jsx)(zs,{data:D,onRefresh:Jl,onClose:function(){return ea(!1)}})}})]})},Qi=Ji},29269:function(Nn,Ke,s){s.d(Ke,{DJ:function(){return c},RY:function(){return $},YM:function(){return _},b9:function(){return me},iE:function(){return Ge},x8:function(){return He}});var Le=s(86647),W=s(32909),G=s(95141),Se=s(86099),ke=s(25278),V=s(38089),We=s(84567),Q=s(85893),Ge=[{name:"",key:"group1",children:[{name:"\u5927\u6A21\u578B",icon:(0,Q.jsx)(W.EF,{}),bgIcon:W.G0,type:G.C8.LLM,shape:G.K$.General,description:"\u8C03\u7528\u5927\u8BED\u8A00\u6A21\u578B\uFF0C\u4F7F\u7528\u53D8\u91CF\u548C\u63D0\u793A\u8BCD\u751F\u6210\u56DE\u590D"},{name:"\u63D2\u4EF6",icon:(0,Q.jsx)(W.KS,{}),bgIcon:W.SU,type:G.C8.Plugin,shape:G.K$.General,description:"\u5FC5\u5E94\u641C\u7D22\u5F15\u64CE\u3002\u5F53\u4F60\u9700\u8981\u641C\u7D22\u4F60\u4E0D\u77E5\u9053\u7684\u4FE1\u606F\uFF0C\u6BD4\u5982\u5929\u6C14..."},{name:"\u5DE5\u4F5C\u6D41",icon:(0,Q.jsx)(W.fl,{}),bgIcon:W.Ls,type:G.C8.Workflow,shape:G.K$.General,description:"\u5FC5\u5E94\u641C\u7D22\u5F15\u64CE\u3002\u5F53\u4F60\u9700\u8981\u641C\u7D22\u4F60\u4E0D\u77E5\u9053\u7684\u4FE1\u606F\uFF0C\u6BD4\u5982\u5929\u6C14..."},{name:"MCP",icon:(0,Q.jsx)(W.VE,{}),bgIcon:W.zH,type:G.C8.MCP,shape:G.K$.General,description:"MCP \u7EC4\u4EF6"}]},{name:"\u4E1A\u52A1\u903B\u8F91",key:"group2",children:[{name:"\u4EE3\u7801",icon:(0,Q.jsx)(W.HF,{}),bgIcon:W.Po,type:G.C8.Code,shape:G.K$.General,description:"\u7F16\u5199\u4EE3\u7801\uFF0C\u5904\u7406\u8F93\u5165\u53D8\u91CF\u6765\u751F\u6210\u8FD4\u56DE\u503C"},{name:"\u6761\u4EF6\u5206\u652F",icon:(0,Q.jsx)(W.ZO,{}),bgIcon:W.TK,type:G.C8.Condition,shape:G.K$.General,description:"\u8FDE\u63A5\u591A\u4E2A\u4E0B\u6E38\u5206\u652F\uFF0C\u82E5\u8BBE\u5B9A\u7684\u6761\u4EF6\u6210\u7ACB\u5219\u4EC5\u8FD0\u884C\u5BF9\u5E94\u7684\u5206\u652F\uFF0C\u82E5 \u5747\u4E0D\u6210\u7ACB\u5219\u53EA\u8FD0\u884C\u201C\u5426\u5219\u201D\u5206\u652F"},{name:"\u610F\u56FE\u8BC6\u522B",icon:(0,Q.jsx)(W.mT,{}),bgIcon:W.cp,type:G.C8.IntentRecognition,shape:G.K$.General,description:"\u7528\u4E8E\u7528\u6237\u8F93\u5165\u7684\u610F\u56FE\u8BC6\u522B\uFF0C\u5E76\u5C06\u5176\u4E0E\u9884\u8BBE\u610F\u56FE\u9009\u9879\u8FDB\u884C\u5339\u914D\u3002"},{name:"\u5FAA\u73AF",icon:(0,Q.jsx)(W.ZX,{}),bgIcon:W.bD,type:G.C8.Loop,shape:G.K$.Loop,description:"\u7528\u4E8E\u901A\u8FC7\u8BBE\u5B9A\u5FAA\u73AF\u6B21\u6570\u548C\u903B\u8F91\uFF0C\u91CD\u590D\u6267\u884C\u4E00\u7CFB\u5217\u4EFB\u52A1\u3002"},{name:"\u7EE7\u7EED\u5FAA\u73AF",icon:(0,Q.jsx)(W.uS,{}),bgIcon:W.jI,type:G.C8.LoopContinue,shape:G.K$.General,description:""},{name:"\u7EC8\u6B62\u5FAA\u73AF",icon:(0,Q.jsx)(W.QL,{}),bgIcon:W.J2,type:G.C8.LoopBreak,shape:G.K$.General,description:""}]},{name:"\u77E5\u8BC6&\u6570\u636E",key:"group3",children:[{name:"\u77E5\u8BC6\u5E93",icon:(0,Q.jsx)(W.fF,{}),bgIcon:W.Lm,type:G.C8.Knowledge,shape:G.K$.General,description:"\u5728\u9009\u5B9A\u7684\u77E5\u8BC6\u4E2D\uFF0C\u6839\u636E\u8F93\u5165\u53D8\u91CF\u53EC\u56DE\u6700\u5339\u914D\u7684\u4FE1\u606F"},{name:"\u53D8\u91CF",icon:(0,Q.jsx)(W.JU,{}),bgIcon:W.Hl,type:G.C8.Variable,shape:G.K$.General,description:"\u7528\u4E8E\u8BFB\u53D6\u548C\u5199\u5165\u9879\u76EE\u4E2D\u7684\u53D8\u91CF\uFF0C\u53D8\u91CF\u540D\u987B\u4E0E\u9879\u76EE\u4E2D\u7684\u53D8\u91CF\u540D\u76F8\u5339\u914D"},{name:"\u957F\u671F\u8BB0\u5FC6",icon:(0,Q.jsx)(W.GY,{}),bgIcon:W.aA,type:G.C8.LongTermMemory,shape:G.K$.General,description:"\u7528\u4E8E\u8C03\u7528\u957F\u671F\u8BB0\u5FC6\uFF0C\u83B7\u53D6\u7528\u6237\u7684\u4E2A\u6027\u5316\u4FE1\u606F"}]},{name:"\u6570\u636E\u8868",key:"group4",children:[{name:"\u6570\u636E\u65B0\u589E",icon:(0,Q.jsx)(W.wN,{}),bgIcon:W.Te,type:G.C8.TableDataAdd,shape:G.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u8FDB\u884C\u6570\u636E\u5199\u5165"},{name:"\u6570\u636E\u5220\u9664",icon:(0,Q.jsx)(W.t_,{}),bgIcon:W.u8,type:G.C8.TableDataDelete,shape:G.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9AID\u8FDB\u884C\u6570\u636E\u5220\u9664"},{name:"\u6570\u636E\u66F4\u65B0",icon:(0,Q.jsx)(W.Lg,{}),bgIcon:W.Og,type:G.C8.TableDataUpdate,shape:G.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9A\u6761\u4EF6\u8FDB\u884C\u6570\u636E\u66F4\u65B0"},{name:"\u6570\u636E\u67E5\u8BE2",icon:(0,Q.jsx)(W.Qe,{}),bgIcon:W.c7,type:G.C8.TableDataQuery,shape:G.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9A\u6761\u4EF6\u8FDB\u884C\u6570\u636E\u67E5\u8BE2"},{name:"SQL\u81EA\u5B9A\u4E49",icon:(0,Q.jsx)(W.rX,{}),bgIcon:W.D9,type:G.C8.TableSQL,shape:G.K$.General,description:"\u53EF\u652F\u6301\u5BF9\u6570\u636E\u8868\u7684\u67E5\u8BE2\u63A7\u5236\uFF0C\u7528\u6237\u53EF\u67E5\u8BE2\u5176\u4ED6\u7528\u6237\u63D0\u4EA4\u7684\u6570\u636E\uFF0C\u7531\u5F00\u53D1\u8005\u63A7\u5236"}]},{name:"\u7EC4\u4EF6&\u5DE5\u5177",key:"group5",children:[{name:"\u95EE\u7B54",icon:(0,Q.jsx)(W.MO,{}),bgIcon:W.HI,type:G.C8.QA,shape:G.K$.General,description:"\u652F\u6301\u4E2D\u95F4\u5411\u7528\u6237\u63D0\u95EE\u95EE\u9898"},{name:"\u6587\u672C\u5904\u7406",icon:(0,Q.jsx)(W.lR,{}),bgIcon:W.v$,type:G.C8.TextProcessing,shape:G.K$.General,description:"\u7528\u4E8E\u5904\u7406\u591A\u4E2A\u5B57\u7B26\u4E32\u7C7B\u578B\u53D8\u91CF\u7684\u683C\u5F0F"},{name:"\u6587\u6863\u63D0\u53D6",icon:(0,Q.jsx)(W.zL,{}),bgIcon:W.AR,type:G.C8.DocumentExtraction,shape:G.K$.General,description:"\u7528\u4E8E\u63D0\u53D6\u6587\u6863\u5185\u5BB9\uFF0C\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B: txt\u3001 markdown\u3001pdf\u3001 html\u3001 xlsx\u3001 xls\u3001 docx\u3001 csv\u3001 md\u3001 htm"},{name:"http\u8BF7\u6C42",icon:(0,Q.jsx)(W.qm,{}),bgIcon:W.L5,type:G.C8.HTTPRequest,shape:G.K$.General,description:"\u7528\u4E8E\u914D\u7F6Ehttp\u8BF7\u6C42\u8C03\u7528\u5DF2\u6709\u7684\u670D\u52A1"}]},{name:"\u8F93\u51FA",key:"group6",children:[{name:"\u8FC7\u7A0B\u8F93\u51FA",icon:(0,Q.jsx)(W.N$,{}),bgIcon:W.bi,type:G.C8.Output,shape:G.K$.General,description:"\u652F\u6301\u4E2D\u95F4\u8FC7\u7A0B\u7684\u6D88\u606F\u8F93\u51FA\uFF0C\u652F\u6301\u6D41\u5F0F\u548C\u975E\u6D41\u5F0F\u4E24\u79CD\u65B9\u5F0F"}]}],c=[{label:"String",value:G.Gi.String},{label:"Integer",value:G.Gi.Integer},{label:"Number",value:G.Gi.Number},{label:"File",value:"File",children:[{label:"Doc",value:G.Gi.File_Doc},{label:"Excel",value:G.Gi.File_Excel},{label:"PPT",value:G.Gi.File_PPT},{label:"Txt",value:G.Gi.File_Txt},{label:"Image",value:G.Gi.File_Image},{label:"Audio",value:G.Gi.File_Audio},{label:"Video",value:G.Gi.File_Video},{label:"Svg",value:G.Gi.File_Svg},{label:"Code",value:G.Gi.File_Code}]},{label:"Boolean",value:G.Gi.Boolean},{label:"Object",value:G.Gi.Object},{label:"Array<String>",value:G.Gi.Array_String},{label:"Array<Integer>",value:G.Gi.Array_Integer},{label:"Array<Number>",value:G.Gi.Array_Number},{label:"Array<Boolean>",value:G.Gi.Array_Boolean},{label:"Array<Object>",value:G.Gi.Array_Object},{label:"Array<File>",value:"Array_File",children:[{label:"Default",value:G.Gi.Array_File_Default},{label:"Array<Image>",value:G.Gi.Array_File_Image},{label:"Array<Doc>",value:G.Gi.Array_File_Doc},{label:"Array<Code>",value:G.Gi.Array_File_Code},{label:"Array<PPT>",value:G.Gi.Array_File_PPT},{label:"Array<Txt>",value:G.Gi.Array_File_Txt},{label:"Array<Excel>",value:G.Gi.Array_File_Excel},{label:"Array<Audio>",value:G.Gi.Array_File_Audio},{label:"Array<Zip>",value:G.Gi.Array_File_Zip},{label:"Array<Video>",value:G.Gi.Array_File_Video},{label:"Array<Svg>",value:G.Gi.Array_File_Svg}]}],Oe=[{label:"\u6807\u9898\u751F\u6210",icon:(0,Q.jsx)(W.nG,{}),key:"\u6807\u9898\u751F\u6210",children:[{key:"output",label:"output",tag:"String"},{key:"setting",label:"Setting",tag:"Number"}]}],$=[{label:"\u4F7F\u7528\u6570\u7EC4\u5FAA\u73AF",value:"ARRAY_LOOP"},{label:"\u6307\u5B9A\u6B21\u6570\u5FAA\u73AF",value:"SPECIFY_TIMES_LOOP"},{label:"\u65E0\u9650\u5FAA\u73AF",value:"INFINITE_LOOP"}],Be=[{name:"name",placeholder:"\u53D8\u91CF\u540D",label:"\u53D8\u91CF\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u540D"}],component:ke.Z,width:140},{name:"dataType",placeholder:"\u9009\u62E9\u7C7B\u578B",label:"\u53D8\u91CF\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D8\u91CF\u7C7B\u578B"}],component:V.Z,width:110,options:c},{name:"description",placeholder:"\u63CF\u8FF0",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],component:We.Z,width:0},{name:"require",placeholder:"\u53D8\u91CF\u540D",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u540D"}],component:We.Z,width:0}],He=[{name:"name",placeholder:"\u53C2\u6570\u540D",label:"\u53C2\u6570\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"}],component:ke.Z,width:100},{name:"bindValue",placeholder:"\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570\u503C",label:"\u53C2\u6570\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u503C"}],component:Le.Z,width:180},{name:"description",placeholder:"\u63CF\u8FF0",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],component:We.Z,width:0}],Pe=[{name:"intent",placeholder:"\u8F93\u5165\u53C2\u6570\u503C",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u610F\u56FE\u7684\u63CF\u8FF0"}],component:ke.Z,width:296}],h=[{name:"name",placeholder:"\u53C2\u6570\u540D",label:"\u53C2\u6570\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"}],component:ke.Z,width:140},{name:"paramsValue",placeholder:"\u8F93\u5165\u6216\u5F15\u7528\u53D8\u91CF\u503C",label:"\u53D8\u91CF\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C"}],component:Le.Z,width:120}],ve=[{icon:(0,Q.jsx)(Se.Z,{}),name:"\u8D44\u6E90\u5E93\u5DE5\u4F5C\u6D41",key:"resources"},{icon:(0,Q.jsx)(Se.Z,{}),name:"\u5B98\u65B9\u793A\u4F8B",key:"example"}],_=[{label:"\u7B49\u4E8E",value:"EQUAL",displayValue:"="},{label:"\u4E0D\u7B49\u4E8E",value:"NOT_EQUAL",displayValue:"\u2260"},{label:"\u5927\u4E8E",value:"GREATER_THAN",displayValue:">"},{label:"\u5927\u4E8E\u7B49\u4E8E",value:"GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u5C0F\u4E8E",value:"LESS_THAN",displayValue:"<"},{label:"\u5C0F\u4E8E\u7B49\u4E8E",value:"LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u957F\u5EA6\u5927\u4E8E",value:"LENGTH_GREATER_THAN",displayValue:">"},{label:"\u957F\u5EA6\u5927\u4E8E\u7B49\u4E8E",value:"LENGTH_GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u957F\u5EA6\u5C0F\u4E8E",value:"LENGTH_LESS_THAN",displayValue:"<"},{label:"\u957F\u5EA6\u5C0F\u4E8E\u7B49\u4E8E",value:"LENGTH_LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u5305\u542B",value:"CONTAINS",displayValue:"\u2283"},{label:"\u4E0D\u5305\u542B",value:"NOT_CONTAINS",displayValue:"\u2285"},{label:"\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F",value:"MATCH_REGEX",displayValue:"~"},{label:"\u4E3A\u7A7A",value:"IS_NULL",displayValue:"\u2205"},{label:"\u4E0D\u4E3A\u7A7A",value:"NOT_NULL",displayValue:"!\u2205"}],me=[{label:"\u7B49\u4E8E",value:"EQUAL",displayValue:"="},{label:"\u4E0D\u7B49\u4E8E",value:"NOT_EQUAL",displayValue:"\u2260"},{label:"\u5927\u4E8E",value:"GREATER_THAN",displayValue:">"},{label:"\u5927\u4E8E\u7B49\u4E8E",value:"GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u5C0F\u4E8E",value:"LESS_THAN",displayValue:"<"},{label:"\u5C0F\u4E8E\u7B49\u4E8E",value:"LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u5C5E\u4E8E",value:"IN",displayValue:"\u2283"},{label:"\u4E0D\u5C5E\u4E8E",value:"NOT_IN",displayValue:"\u2285"},{label:"\u4E3A\u7A7A",value:"IS_NULL",displayValue:"\u2205"},{label:"\u4E0D\u4E3A\u7A7A",value:"NOT_NULL",displayValue:"!\u2205"}]},87025:function(Nn,Ke,s){s.d(Ke,{L:function(){return W},U:function(){return Le}});var Le=function(G){return G.WORKFLOW_LLM_NODE="WORKFLOW_LLM_NODE",G.AGENT="AGENT",G}({}),W=function(G){return G.prompt="prompt",G.code="code",G.sql="sql",G}({})},30961:function(Nn,Ke,s){s.d(Ke,{N:function(){return G},g:function(){return Se}});var Le=s(67294),W=s(85893),G=function(V,We){var Q=We.required;return(0,W.jsxs)(W.Fragment,{children:[V,Q?(0,W.jsx)("span",{style:{color:"red",fontWeight:600,marginLeft:"4px"},children:"*"}):null]})},Se=function(V){return(0,W.jsx)(W.Fragment,{children:V})}},48256:function(){},89118:function(){},65774:function(Nn,Ke,s){Nn.exports=s.p+"static/doc_image.5415f2c1.jpg"},47804:function(Nn){Nn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQySURBVHgB7ZpNTFRXFMf/M8wAE8cRyaDjTAtUFIdCSGVhVy26sDY1aaVpbbuqS1vauq5tUzcVyraVbmyiC78WigvxI5IQFd3NoCKJX3w4oAMy4wAShq9hvOcak1GeH7zz4MXc90te4F3eXM77v/vOOfecsUWj0SEojEMcXiiMHYpjCQDFsQSA4lgCQHEsAaA4lgBQHEsAKI4lABTHgQVkcnISsVgMg4OD6L9/X/x8iMSjBEYfj2JsbAzJ5IS8zuXKhXvJEniWebB8eT58K1ciEAjA5/NhxYoCOBwLZ6bhMycSCVy4eAnhUBidnZ2429UlhdCDy+VCSUkJSkvX4sMNG7Bp00Z4PB4YiU2UxNIwgKmpKfy1tw4tLS2Ixx9hIXC73aip2Yaff6o1TAhDBLgXiWDnzh/R09ODxYBWxX+N/6KwsBBc2AIkk0nUfPkVent7sZjQa3HwwAHhM/LAgR0F9u//f9Fvnrh9+w6aTp4EF9YKmJlJ4aOPq6XjM4O8vDxcuXwJdrv+58haAV1dd027eWJ4eFjY0A0OLAHC7VdhNm1tbeDAEiAUCsFsOm7cAAeWABER/symv78fHHQLkJqdxdBQDGYTi8UxK2zRi24BJicmZA5gNmTD+Pg49KJbgOnpaREGZ176d5vNhtzcXHB53RyUgr/KjtehW4CZVEqKoEVFRQXOnT2Dq+0hNDUdR1FREeZLcXExmk4cl3Ocbj6FqqoqzetSwg5TBEiL946eshYNf9eLPP1d+XtZMIhdu36ZV7JC8+7e/SvKyoLyfPXq9+S5ph1p3lZGtwBZWVnimPvxnJwcaXAmwXWlcs//ptA2+B1RD8ikovx9OJ1ObTsY9QLdApAxDocTi4nWKiI7nGYIQE/aCCfHJTs7m2UHawXQZuRFyCtHowPPjcXjcRGq3jxkknMVm7Tnxvr6+jQrS16vl1UyY2WCfr9/zhg5pb11dRgZGZHnAwODqKtvmJezIgH2NTbKzxKJxDB++/0PzWsD/lXgwKoJrhNFidbW1jnj58+34Nq16yL8FYoqUa8sjM6XcLgdX2/fLsMhCUErQIvKykpwYNUD6Ca/+fY7mMmRw4ewfv0H0AvrFSgXoclMR0iO+FmuoBeWAOR8tm79DGaxsbqa/QDYNcEdO743ZRXQ/6yt/QFc2AKsXbMGe/b8aXjD4lXQymtoqBeV4VJwMaQ3uO2Lz9G47x+xCSp/6f7ACGhu8jvHjh7BJ5s3wwgM6wwRVJjo6OhAc/Np3Lx1C93dPbpCYCbUDQqKDRV5+k+3bJFOj1MFfhFDBciExKBkKBLpk43RB+JIiCoutc1Gxfhj0RxNp59Wcuw2O9xLl4rMcpnMLgu8BfCtEg1Sf0A0Sf3Iz8839KYzWTAB3hasL0hAcSwBoDiWAFAcSwAojiUAFMcSAIpjCQDFsb4tLo4xKMwTd3B2uVYQghwAAAAASUVORK5CYII="},35044:function(Nn){Nn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAH1SURBVEiJvZaxbtNQFIb///q67YDUDAwMDJHqoQ/A2KE3UCkSCwMvgBBTB54A0ZFKIBUhBAxIvEEHhhIHeh+AB2BB6sJQqUtGGtf+WRrHVZI6dm3+6crnHH86v3TuPRwMvj8CzAcSVtL7lRVz4JwboSUxjo/PANwufBtJetsWmHF8/AvA5pxYK2BD8tuCWIfkyyTRyWDwY89732kEmKbpoCSnUTC997eSRGcA1pasGZF8bS3eOOf+VgYCwHDovaTtKoUSTkm+CkN8qgI2AJBlWZmtMyJxB9DBeKyTOPbPvfdLOUQAiGN/D9DPqtCilu2Yk8OceWwFbArsReNRSWVW5x0Oh35Lwi6gLolIunm3QN7xXhjis3PugosSvfedJEFXSiOAEWk2SHUlbAK4W4P9m0yfLAReJ++9HY/RJ/W1YukfU54zV9YYBXUKF3Z4eOg76+vayDJGWYYugAhQJCEi61rKqaVHR8PtILC7gC5/jkYuaxKnkl6EofninLuwk0AQ2KeAHjcBmYDSVPurq+ajc718Hu00Rf2mQTs7vZnBt0B+td1o7spAV4AA7rcNugIk0ZfaBeV1dR5gSfuXu07lB9ien6dbxphlYIWlqld7qbLGBA+Ba/1sBJQDAT34H6ACcOYZagWUAyU+I/UOwNp01W8eNNE/wcEU7Dx0xUMAAAAASUVORK5CYII="}}]);})();
