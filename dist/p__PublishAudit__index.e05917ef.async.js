"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[2667],{48279:function(V,P,e){e.d(P,{Z:function(){return x}});var p=e(48305),l=e.n(p),D=e(28190),h=e(9504),C=e(94581),v=e.n(C),j=e(75271),o={btn:"btn___T9zvq","confirm-btn":"confirm-btn___kcWcm"},d=e(52676),y=v().bind(o),I=function(t){var M=t.form,i=t.loading,m=t.okPrefixIcon,Z=t.okText,u=t.onConfirm,g=(0,j.useState)(!1),F=l()(g,2),A=F[0],a=F[1],W=D.Z.useWatch([],{form:M,preserve:!0});return(0,j.useEffect)(function(){M.validateFields({validateOnly:!0}).then(function(){return a(!0)}).catch(function(){return a(!1)})},[M,W]),(0,d.jsx)(h.ZP,{type:"primary",icon:m,loading:i,onClick:u,className:y(!A&&o["confirm-btn"],o.btn),disabled:!A,children:Z||"\u786E\u5B9A"})},B=I,S=e(14719),T={btn:"btn___T2mwV"},N=v().bind(T),f=function(t){var M=t.form,i=t.classNames,m=t.title,Z=t.open,u=t.loading,g=t.okPrefixIcon,F=t.okText,A=t.centered,a=A===void 0?!1:A,W=t.onCancel,Q=t.onConfirm,r=t.children;return(0,d.jsx)(S.Z,{title:m,open:Z,centered:a,classNames:i,destroyOnHidden:!0,footer:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.ZP,{className:N(T.btn),type:"default",onClick:W,children:"\u53D6\u6D88"}),(0,d.jsx)(B,{okPrefixIcon:g,loading:u,onConfirm:Q,form:M,okText:F})]}),onCancel:W,children:r})},x=f},10663:function(V,P,e){e.r(P),e.d(P,{default:function(){return ae}});var p=e(82092),l=e.n(p),D=e(26068),h=e.n(D),C=e(48305),v=e.n(C),j=e(95356),o=e(98164),d=e(92122),y=e(64691),I=e(3642),B=e(17023),S=e(29333),T=e(41249),N=e(68108),f=e(9504),x=e(17701),b=e(63619),t=e(10580),M=e(94581),i=e.n(M),m=e(16483),Z=e.n(m),u=e(75271),g=e(48279),F=e(26324),A=e(28190),a=e(52676),W=function(k){var H=k.open,O=k.onCancel,le=k.onConfirm,re=k.id,X=A.Z.useForm(),$=v()(X,1),U=$[0],oe=(0,u.useState)(!1),K=v()(oe,2),w=K[0],_=K[1],ie=(0,S.Z)(j.NH,{manual:!0,loadingDelay:300,onBefore:function(){_(!0)},onSuccess:function(){T.ZP.success("\u62D2\u7EDD\u5BA1\u6838\u6210\u529F"),U.resetFields(),le()},onFinally:function(){_(!1)}}),q=ie.run,ue=function(){U.validateFields().then(function(Y){q({id:re,reason:Y.reason})}).catch(function(Y){console.log(Y)})};return(0,a.jsx)(g.Z,{open:H,form:U,title:"\u62D2\u7EDD\u5BA1\u6838",onCancel:function(){U.resetFields(),O()},onConfirm:ue,loading:w,children:(0,a.jsx)(A.Z,{form:U,layout:"vertical",requiredMark:F.N,children:(0,a.jsx)(A.Z.Item,{name:"reason",label:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0"}],children:(0,a.jsx)(b.Z.TextArea,{rows:4,placeholder:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0"})})})})},Q=W,r=i().bind(o.Z),G=[{value:"",label:"\u5168\u90E8"},{value:y.Q.Agent,label:"\u667A\u80FD\u4F53"},{value:y.Q.Plugin,label:"\u63D2\u4EF6"},{value:y.Q.Workflow,label:"\u5DE5\u4F5C\u6D41"}],L=[{value:"",label:"\u5168\u90E8"},{value:d.xH.Applying,label:"\u5F85\u5BA1\u6838"},{value:d.xH.Published,label:"\u901A\u8FC7"},{value:d.xH.Rejected,label:"\u62D2\u7EDD"}],J=function(){var k=(0,u.useState)(""),H=v()(k,2),O=H[0],le=H[1],re=(0,u.useState)(d.xH.Applying),X=v()(re,2),$=X[0],U=X[1],oe=(0,u.useState)(""),K=v()(oe,2),w=K[0],_=K[1],ie=(0,u.useState)(1),q=v()(ie,2),ue=q[0],E=q[1],Y=(0,u.useState)({}),de=v()(Y,2),ve=de[0],fe=de[1],ee=(0,S.Z)(j.Ez,{debounceWait:300,defaultParams:[{pageNo:ue,pageSize:10,queryFilter:{targetType:O||void 0,publishStatus:$||void 0,kw:w}}]}),z=ee.data,ne=ee.run,me=ee.refresh,ge=ee.loading,te=function(n,s,R,Me){return{pageNo:n,pageSize:10,queryFilter:{targetType:s||void 0,publishStatus:R||void 0,kw:Me}}},xe=function(n){le(n),E(1);var s=te(1,n,$,w);ne(s)},ye=function(n){U(n),E(1);var s=te(1,O,n,w);ne(s)},Pe=function(n){_(n),E(1);var s=te(1,O,$,n);ne(s)},je=function(n){E(n);var s=te(n,O,$,w);ne(s)},Ce=(0,S.Z)(j.jw,{manual:!0,loadingDelay:300,onBefore:function(n){fe(function(s){return h()(h()({},s),{},l()({},n[0].id,!0))})},onSuccess:function(){T.ZP.success("\u901A\u8FC7\u5BA1\u6838\u6210\u529F"),me()},onFinally:function(n){fe(function(s){return h()(h()({},s),{},l()({},n[0].id,!1))})}}),be=Ce.run,Se=(0,u.useState)(!1),pe=v()(Se,2),Ze=pe[0],ce=pe[1],Fe=(0,u.useState)(),he=v()(Fe,2),Ae=he[0],Ie=he[1],Ne=function(n){Ie(n),ce(!0)},Oe=function(n){var s="";n.targetType===y.Q.Agent&&(s="/space/".concat(n.spaceId,"/agent/").concat(n.targetId,"?applyId=").concat(n.id)),n.targetType===y.Q.Plugin&&(n.pluginType==="CODE"?s="/space/".concat(n.spaceId,"/plugin/").concat(n.targetId,"/cloud-tool?applyId=").concat(n.id):s="/space/".concat(n.spaceId,"/plugin/").concat(n.targetId,"?applyId=").concat(n.id)),n.targetType===y.Q.Workflow&&(s="/space/".concat(n.spaceId,"/workflow/").concat(n.targetId,"?applyId=").concat(n.id)),s&&window.open(s,"_blank","noopener,noreferrer")},De=function(n){switch(n){case y.Q.Agent:return"\u667A\u80FD\u4F53";case y.Q.Plugin:return"\u63D2\u4EF6";case y.Q.Workflow:return"\u5DE5\u4F5C\u6D41"}},Te=[{title:"\u53D1\u5E03\u540D\u79F0",dataIndex:"name",key:"name",width:200,className:o.Z["table-column-fixed"],render:function(n){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(0,a.jsx)("span",{className:r("text-ellipsis-2"),children:n})})}},{title:"\u7C7B\u578B",dataIndex:"targetType",key:"targetType",width:100,render:function(n){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:De(n)})}},{title:"\u63CF\u8FF0\u4FE1\u606F",dataIndex:"description",key:"description",width:200,render:function(n){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(0,a.jsx)(N.Z,{title:n,placement:"topLeft",children:(0,a.jsx)("div",{className:r("text-ellipsis-2"),children:n})})})}},{title:"\u7248\u672C\u4FE1\u606F",dataIndex:"remark",key:"remark",width:200,render:function(n){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(0,a.jsx)(N.Z,{title:n,placement:"topLeft",children:(0,a.jsx)("div",{className:r("text-ellipsis-2"),children:n})})})}},{title:"\u53D1\u5E03\u8005",dataIndex:"applyUser",key:"applyUser",width:200,render:function(n){var s;return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(s=n?.userName)!==null&&s!==void 0?s:"--"})}},{title:"\u72B6\u6001",dataIndex:"publishStatus",key:"publishStatus",width:100,render:function(n){var s="",R="";switch(n){case d.xH.Published:s="\u901A\u8FC7",R=o.Z["dot-green"];break;case d.xH.Rejected:s="\u62D2\u7EDD",R=o.Z["dot-red"];break;case d.xH.Applying:s="\u5F85\u5BA1\u6838",R=o.Z["dot-blue"];break}return(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:r(o.Z.dot,R)}),s]})}},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"created",key:"created",width:180,render:function(n){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:Z()(n).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u64CD\u4F5C",key:"action",width:200,align:"center",fixed:"right",className:o.Z["table-column-fixed"],render:function(n,s){return(0,a.jsxs)(a.Fragment,{children:[s.publishStatus===d.xH.Applying?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.ZP,{type:"link",className:r(o.Z["table-action-ant-btn-link"]),loading:ve[s.id]||!1,onClick:function(){return be({id:s.id})},children:"\u901A\u8FC7"}),(0,a.jsx)(f.ZP,{type:"link",className:r(o.Z["table-action-ant-btn-link"]),onClick:function(){return Ne(s.id)},children:"\u62D2\u7EDD"})]}):null,(0,a.jsx)(f.ZP,{type:"link",onClick:function(){return Oe(s)},children:"\u67E5\u770B"})]})}}];return(0,a.jsxs)("div",{className:r(o.Z["system-manage-container"],"scroll-container"),children:[(0,a.jsx)("h3",{className:r(o.Z["system-manage-title"]),children:"\u53D1\u5E03\u5BA1\u6838"}),(0,a.jsxs)("section",{className:r("flex","content-between"),children:[(0,a.jsxs)("div",{className:r("flex"),children:[(0,a.jsx)(x.default,{className:r(o.Z["select-132"],"mr-16"),options:G,defaultValue:"",onChange:xe,optionLabelProp:"label",dropdownRender:function(n){return(0,a.jsx)(a.Fragment,{children:n})},menuItemSelectedIcon:(0,a.jsx)(I.Z,{style:{marginRight:8}})}),(0,a.jsx)(x.default,{className:r(o.Z["select-132"]),options:L,onChange:ye,optionLabelProp:"label",dropdownRender:function(n){return(0,a.jsx)(a.Fragment,{children:n})},defaultValue:d.xH.Applying,menuItemSelectedIcon:(0,a.jsx)(I.Z,{style:{marginRight:8}})})]}),(0,a.jsx)(b.Z,{className:r(o.Z["search-input-255"]),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u5DE5\u4F5C\u6D41\u6216\u667A\u80FD\u4F53\u540D\u79F0",prefix:(0,a.jsx)(B.Z,{}),onPressEnter:function(n){n.key==="Enter"&&Pe(n.currentTarget.value)}})]}),(0,a.jsx)(t.Z,{rowClassName:r(o.Z["table-row-divider"]),className:r("mt-30"),rowKey:"id",loading:ge,columns:Te,dataSource:z?.data.records,scroll:{x:"max-content"},virtual:!0,pagination:{total:z?.data.total,onChange:je,showTotal:function(n){return"\u5171 ".concat(n," \u6761")}}}),(0,a.jsx)(Q,{open:Ze,id:Ae,onCancel:function(){return ce(!1)},onConfirm:function(){ce(!1),me()}})]})},ae=J},95356:function(V,P,e){e.d(P,{Ez:function(){return v},NH:function(){return y},jw:function(){return o},kb:function(){return B},qZ:function(){return T}});var p=e(90228),l=e.n(p),D=e(87999),h=e.n(D),C=e(56179);function v(f){return j.apply(this,arguments)}function j(){return j=h()(l()().mark(function f(x){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/system/publish/apply/list",{method:"POST",data:x}));case 1:case"end":return t.stop()}},f)})),j.apply(this,arguments)}function o(f){return d.apply(this,arguments)}function d(){return d=h()(l()().mark(function f(x){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/system/publish/".concat(x.id),{method:"POST",data:x}));case 1:case"end":return t.stop()}},f)})),d.apply(this,arguments)}function y(f){return I.apply(this,arguments)}function I(){return I=h()(l()().mark(function f(x){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/system/publish/reject/".concat(x.id),{method:"POST",data:x}));case 1:case"end":return t.stop()}},f)})),I.apply(this,arguments)}function B(f){return S.apply(this,arguments)}function S(){return S=h()(l()().mark(function f(x){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/system/publish/list",{method:"POST",data:x}));case 1:case"end":return t.stop()}},f)})),S.apply(this,arguments)}function T(f){return N.apply(this,arguments)}function N(){return N=h()(l()().mark(function f(x){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/system/publish/offShelf/".concat(x.id),{method:"POST",data:x}));case 1:case"end":return t.stop()}},f)})),N.apply(this,arguments)}},64691:function(V,P,e){e.d(P,{Q:function(){return p}});var p=function(l){return l.Agent="Agent",l.Plugin="Plugin",l.Workflow="Workflow",l.Knowledge="Knowledge",l.Template="Template",l}({})},26324:function(V,P,e){e.d(P,{N:function(){return D},g:function(){return h}});var p=e(75271),l=e(52676),D=function(v,j){var o=j.required;return(0,l.jsxs)(l.Fragment,{children:[v,o?(0,l.jsx)("span",{style:{color:"red",fontWeight:600,marginLeft:"4px"},children:"*"}):null]})},h=function(v){return(0,l.jsx)(l.Fragment,{children:v})}},98164:function(V,P){P.Z={"xagi-nav-style2":"xagi-nav-style2___UkH3A",text:"text___quOtD","page-container":"page-container___i95W1","system-manage-container":"system-manage-container___LMJ0u","system-manage-title":"system-manage-title___WRyi3","table-column-fixed":"table-column-fixed___VLdtk","select-132":"select-132___xi4Oi","search-input-225":"search-input-225___qkYcd","search-input-255":"search-input-255___xY2Zb","dot-circle":"dot-circle___q_zNW","dot-red":"dot-red___eP5AX","dot-green":"dot-green___E1FGA","table-action-ant-btn-link":"table-action-ant-btn-link___itR3h"}},14719:function(V,P,e){e.d(P,{Z:function(){return M}});var p=e(38546),l=e(9536),D=e(30153),h=e(75271),C=e(82187),v=e.n(C),j=e(94813),o=e(60707),d=e(62249),y=e(23105),I=e(66802),B=e(34982),S=e(7892),T=function(i,m){var Z={};for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&m.indexOf(u)<0&&(Z[u]=i[u]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,u=Object.getOwnPropertySymbols(i);g<u.length;g++)m.indexOf(u[g])<0&&Object.prototype.propertyIsEnumerable.call(i,u[g])&&(Z[u[g]]=i[u[g]]);return Z};const N=i=>{const{prefixCls:m,className:Z,closeIcon:u,closable:g,type:F,title:A,children:a,footer:W}=i,Q=T(i,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=h.useContext(d.E_),G=r(),L=m||r("modal"),J=(0,y.Z)(G),[ae,se,k]=(0,S.ZP)(L,J),H=`${L}-confirm`;let O={};return F?O={closable:g??!1,title:"",footer:"",children:h.createElement(I.O,Object.assign({},i,{prefixCls:L,confirmPrefixCls:H,rootPrefixCls:G,content:a}))}:O={closable:g??!0,title:A,footer:W!==null&&h.createElement(B.$,Object.assign({},i)),children:a},ae(h.createElement(j.Panel,Object.assign({prefixCls:L,className:v()(se,`${L}-pure-panel`,F&&H,F&&`${H}-${F}`,Z,k,J)},Q,{closeIcon:(0,B.b)(L,u),closable:g},O)))};var f=(0,o.i)(N),x=e(21332);function b(i){return(0,p.ZP)((0,p.uW)(i))}const t=D.Z;t.useModal=x.Z,t.info=function(m){return(0,p.ZP)((0,p.cw)(m))},t.success=function(m){return(0,p.ZP)((0,p.vq)(m))},t.error=function(m){return(0,p.ZP)((0,p.AQ)(m))},t.warning=b,t.warn=b,t.confirm=function(m){return(0,p.ZP)((0,p.Au)(m))},t.destroyAll=function(){for(;l.Z.length;){const m=l.Z.pop();m&&m()}},t.config=p.ai,t._InternalPanelDoNotUseOrYouWillBeFired=f;var M=t}}]);})();
