"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[657],{65857:function(yn,Te,n){n.d(Te,{Z:function(){return x}});var Ne=n(22675),_=n(94581),O=n.n(_),C=n(75271),fe={avatar:"avatar___Q6WBB",nickname:"nickname___pjZCy"},s=n(52676),U=O().bind(fe),ue=function(Z){var Y=Z.className,se=Z.icon,ae=Z.name,p=Z.extra;return(0,s.jsxs)("div",{className:U("flex","flex-col","items-center","content-center",Y),children:[(0,s.jsx)("img",{className:U(fe.avatar),src:se||Ne,alt:""}),(0,s.jsx)("h3",{className:U("w-full","text-ellipsis",fe.nickname),children:ae}),p]})},x=ue},34077:function(yn,Te,n){n.d(Te,{Z:function(){return un}});var Ne=n(82092),_=n.n(Ne),O=n(22675),C=n(78987),fe=n(57625),s=n(59261),U=n(13383),ue=n(13278),x=n(72875),te=n(91268),Z=n(27689),Y=n(64799),se=n(92122),ae=n(41249),p=n(38683),t=n(94581),D=n.n(t),d=n(32699),le=n(75271),M=n(87453),Ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAERSURBVCiRjZFBccNADEWfdgrAYeAwcBmYQSwGMYKkCOwwKIOYgZZBITQQzCBBsOoh25lN7ab9pz3ozftaCTlmtkfkADTADbjg3qvqzEpC8a4zdEFkBGpEPs2sWQNfzOwIVKo6mhmIDKS0AV4ROSNiwHZpFNkhMpjZqKojEBEZgBb3N6A2s26tapvrDRajAR0wqWrM+83pvsJjVeCGyERKm2yatOv6YqYKIVzXjBH3o6qOuGsJmVkNVLi3S9D9BFQW4wdwKaBGVWfce6CzGM8lKN9D+fdqYAaqbOpVdco3PpdrSGGoPISdp7QNIVxxb4D9b7DwJLneEhZ5fwquwveTtX+CDzBEoMP99C/wh/mkquMXpnqTpDNkdZAAAAAASUVORK5CYII=",ge=n(6619),T=n(53895),pe={container:"container___bqr6a","elapsed-time":"elapsed-time___NLFZM","vertical-line":"vertical-line___viPQ6","more-action":"more-action___oDxDL",icon:"icon___hoIgl","copy-image":"copy-image___YsG7v"},g=n(52676),he=D().bind(pe),_e=function(e){var qe=e.messageInfo,en=qe||{},Pe=en.finalResult,F=(0,M.useModel)("conversationInfo"),Pn=F.handleDebug,_n=F.showType,kn=(0,M.useModel)("chat"),Fn=kn.pagePreviewData,cn=kn.hidePagePreview,wn=function(){Fn&&cn(),Pn(qe)},On=(0,le.useMemo)(function(){return Pe?((Pe?.endTime-Pe?.startTime)/1e3).toFixed(1):0},[Pe]);return(0,g.jsx)("div",{className:he(pe.container,"flex","content-between","items-center"),children:(0,g.jsxs)("div",{className:he("flex","items-center",pe["elapsed-time"]),children:[(0,g.jsxs)(s.Z,{condition:!!Pe,children:[(0,g.jsx)("span",{children:"".concat(On,"s")}),(0,g.jsxs)(s.Z,{condition:!!(Pe!=null&&Pe.totalTokens),children:[(0,g.jsx)("span",{className:he(pe["vertical-line"])}),(0,g.jsx)("span",{children:"".concat(Pe?.totalTokens," Tokens")})]})]}),(_n===T.wv.Version_History||_n===T.wv.Show_Stand||_n===T.wv.Hide)&&(0,g.jsx)(s.Z,{condition:!!Pe,children:(0,g.jsx)(ge.Z,{className:pe.icon,icon:(0,g.jsx)("img",{src:Ke,alt:""}),onClick:wn,title:"\u8C03\u8BD5",type:se.Ai.White})})]})})},o=_e,Ae={"xagi-nav-style2":"xagi-nav-style2___mrh9D",text:"text___O7qUb","page-container":"page-container___XXv4P",container:"container___I82RP","elapsed-time":"elapsed-time___VSdJP","vertical-line":"vertical-line___RYAxp","more-action":"more-action___J8lvL",icon:"icon___V_fce","copy-image":"copy-image___Lbh8o"},xn=D().bind(Ae),k=function(e){var qe=e.messageInfo,en=qe||{},Pe=en.text,F=function(){ae.ZP.success("\u590D\u5236\u6210\u529F")};return(0,g.jsx)("div",{className:xn(Ae.container,"flex","content-between","items-center"),children:(0,g.jsx)("div",{className:xn("flex",Ae["more-action"]),children:(0,g.jsx)(ue.Z,{text:Pe||"",onCopy:F,children:"\u590D\u5236"})})})},q=k,on=n(48305),J=n.n(on),fn=n(39373),w={"xagi-nav-style2":"xagi-nav-style2___A0cfb",text:"text___mQKpe","page-container":"page-container___clFMO",container:"container___bMNUQ","more-action":"more-action___PPoj0"},Me=D().bind(w),$e=function(e){var qe=e.messageInfo,en=(0,le.useState)(""),Pe=J()(en,2),F=Pe[0],Pn=Pe[1],_n=(0,le.useRef)(null),kn=function(){ae.ZP.success("\u590D\u5236\u6210\u529F")},Fn=function(){Pn((0,fn.BK)(qe?.time))},cn=function(){Fn(),_n.current=setInterval(function(){Fn()},6e4)};return(0,le.useEffect)(function(){return qe!=null&&qe.time&&cn(),function(){_n.current!==null&&(clearInterval(_n.current),_n.current=null)}},[qe?.time]),(0,g.jsxs)("div",{className:Me(w.container,"flex","content-between","items-center"),children:[(0,g.jsx)("div",{className:Me("flex",w["more-action"]),children:(0,g.jsx)(ue.Z,{text:qe?.text||"",onCopy:kn,children:"\u590D\u5236"})}),(0,g.jsx)("span",{children:F})]})},rn=$e,dn=n(30746),Ce={"xagi-nav-style2":"xagi-nav-style2___C6M16",text:"text___s3NJ6","page-container":"page-container___wYf4F",container:"container___zSEQO",avatar:"avatar___IfDvJ",author:"author___AmRDb","agent-title-bar":"agent-title-bar___Y8m62","attach-file-container":"attach-file-container___xvbrf",userContainer:"userContainer___sPaST","user-content":"user-content___M5R1a","chat-content":"chat-content___FWF0e","inner-container":"inner-container___rireg","think-content":"think-content___Qas0a","user-action-box":"user-action-box___T2sE4","copy-btn":"copy-btn___vb1lQ","copy-image":"copy-image___Hbxu3"},oe=D().bind(Ce),Oe=(0,le.memo)(function(gn){var e,qe=gn.className,en=gn.contentClassName,Pe=gn.roleInfo,F=gn.messageInfo,Pn=gn.mode,_n=Pn===void 0?"chat":Pn,kn=(0,M.useModel)("userInfo"),Fn=kn.userInfo,cn=(0,Z.K)(),wn=cn.data,On=wn.antdTheme==="dark",Vn=(0,te.Z)({answer:F?.text||"",thinking:F?.think||"",id:F?.id||""}),vt=Vn.markdownRef,Xn=Vn.messageIdRef,Dn=Fn||JSON.parse(localStorage.getItem(x.CD)),jn=function(){var Mn=Pe.assistant,Un=Pe.system;switch(F?.role){case Y.hZ.USER:return{name:Dn?.nickName||Dn?.userName||"\u6E38\u5BA2",avatar:Dn?.avatar||C};case Y.hZ.ASSISTANT:return{name:Mn.name,avatar:Mn.avatar||O};case Y.hZ.SYSTEM:return{name:Un.name,avatar:Un.avatar||O}}}(),X=function(){ae.ZP.success("\u590D\u5236\u6210\u529F")},Re=(0,le.useCallback)(function(Mn){return Mn.replace(/^\s+|\s+$/g,"")},[]),vn=(0,le.useMemo)(function(){return F?.role===Y.hZ.USER},[F?.role]),En=p.Z.useToken(),Qn=En.token;return(0,g.jsx)("div",{className:oe(Ce.container,"flex",qe),children:(0,g.jsxs)("div",{className:oe("flex-1","overflow-hide",_()({},Ce.userContainer,vn)),children:[!vn&&(0,g.jsxs)("div",{className:oe(Ce["agent-title-bar"]),children:[(0,g.jsx)("img",{className:oe(Ce.avatar),src:jn?.avatar,alt:""}),(0,g.jsx)("div",{className:oe(Ce.author),children:jn?.name}),(0,g.jsx)(s.Z,{condition:!!(F!=null&&F.status),children:(0,g.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:12},children:(0,g.jsx)("div",{style:{flex:1},children:(0,g.jsx)(dn.Z,{messageInfo:F})})})})]}),!!(F!=null&&(e=F.attachments)!==null&&e!==void 0&&e.length)&&(0,g.jsx)("div",{className:oe(Ce["attach-file-container"]),children:(0,g.jsx)(fe.Z,{files:F?.attachments})}),vn&&!!(F!=null&&F.text)&&(0,g.jsxs)("div",{className:oe(Ce["user-content"]),children:[(0,g.jsx)("div",{className:oe(Ce["chat-content"],Ce.user,"radius-6",en,"ds-markdown",{"ds-markdown-dark":On}),children:(0,g.jsx)("div",{className:"ds-markdown-answer",children:(0,g.jsx)("div",{style:{whiteSpace:"pre-wrap"},className:"ds-markdown-paragraph ds-typed-answer",children:Re(F?.text)})})}),(0,g.jsx)("div",{className:oe(Ce["user-action-box"],"flex","items-center"),children:(0,g.jsx)(ue.Z,{text:F.text||"",onCopy:X,children:"\u590D\u5236"})})]}),(0,g.jsxs)(s.Z,{condition:F?.role!==Y.hZ.USER,children:[(!!(F!=null&&F.think)||!!(F!=null&&F.text))&&(0,g.jsx)("div",{className:oe(Ce["inner-container"],en),children:(0,g.jsx)("div",{className:oe(Ce["chat-content"],"radius-6","w-full",_()({},Ce.typing,F.status===se.ge.Incomplete||F.status===se.ge.Loading)),children:(0,g.jsx)(U.ZP,{id:"".concat(Xn.current),markdownRef:vt},"".concat(Xn.current))})}),(0,g.jsx)(s.Z,{condition:F&&(F?.status===se.ge.Complete||!(F!=null&&F.status)),children:_n==="chat"?(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:12,padding:"0 ".concat(Qn.paddingXS,"px")},children:[(0,g.jsx)("div",{style:{flex:1},children:(0,g.jsx)(q,{messageInfo:F})}),(0,g.jsx)(o,{messageInfo:F})]}):_n==="home"?(0,g.jsx)(rn,{messageInfo:F}):null})]})]})})},function(gn,e){return(0,d.isEqual)(gn.messageInfo,e.messageInfo)}),un=Oe},70375:function(yn,Te,n){n.d(Te,{Z:function(){return Y}});var Ne=n(59261),_=n(64799),O=n(45019),C=n(94581),fe=n.n(C),s=n(75271),U=n(87453),ue={"xagi-nav-style2":"xagi-nav-style2___mMXYN",text:"text___QMrw8","page-container":"page-container___OILW5",container:"container___CqnIK","extra-box":"extra-box___y8u7O","gap-6":"gap-6___L0Qqc","img-box":"img-box___DFhgw","content-box":"content-box___YPipV",name:"name___MaQ7a",desc:"desc___POp__"},x=n(52676),te=fe().bind(ue),Z=function(ae){var p=ae.className,t=ae.showImage,D=t===void 0?!0:t,d=ae.agentComponentInfo,le=ae.defaultImage,M=ae.extra,Ke=(0,s.useMemo)(function(){var T=d.targetId,pe=d.type,g=d.targetConfig,he=d.spaceId;if(g&&he===g.spaceId)switch(pe){case _.qR.Plugin:return g?.type===O.AQ.HTTP?"/space/".concat(he,"/plugin/").concat(T):"/space/".concat(he,"/plugin/").concat(T,"/cloud-tool");case _.qR.Workflow:return"/space/".concat(he,"/workflow/").concat(T);case _.qR.Table:return"/space/".concat(he,"/table/").concat(T);case _.qR.Knowledge:return"/space/".concat(he,"/knowledge/").concat(T)}},[d]),ge=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:te("radius-6",ue["img-box"]),children:D&&(0,x.jsx)("img",{src:d.icon||le,alt:""})}),(0,x.jsxs)("div",{className:te("flex-1","flex","flex-col","content-center","overflow-hide",ue["content-box"]),children:[(0,x.jsx)("h3",{className:te("text-ellipsis",ue.name),children:d.name}),(0,x.jsx)(Ne.Z,{condition:d.description,children:(0,x.jsx)("p",{className:te("text-ellipsis",ue.desc),children:d.description})})]})]});return(0,x.jsxs)("div",{className:te("flex","items-center",ue.container,p),children:[Ke?(0,x.jsx)(U.Link,{to:Ke,target:"_blank",className:te("flex-1","flex","items-center","overflow-hide",ue["gap-6"]),children:ge}):(0,x.jsx)("div",{className:te("flex-1","flex","items-center","overflow-hide",ue["gap-6"]),children:ge}),(0,x.jsx)("div",{className:te(ue["extra-box"],"flex","items-center"),children:M})]})},Y=Z},69506:function(yn,Te,n){var Ne=n(48305),_=n.n(Ne),O=n(38683),C=n(6844),fe=n(75271),s=n(62597),U=n(52676),ue=function(te){var Z=te.items,Y=te.defaultActiveKey,se=te.onChangeCollapse,ae=O.Z.useToken(),p=ae.token,t=(0,fe.useState)([]),D=_()(t,2),d=D[0],le=D[1];(0,fe.useEffect)(function(){Y?.length>0&&le(Y)},[Y]);var M=function(ge){le(ge),se?.(ge)};return(0,U.jsx)(C.Z,{bordered:!1,ghost:!0,expandIcon:function(ge){var T=ge.isActive;return(0,U.jsx)(s.Z,{name:"icons-common-caret_right",rotate:T?90:0,style:{color:p.colorTextTertiary}})},activeKey:d,onChange:M,items:Z})};Te.Z=ue},82456:function(yn,Te,n){var Ne=n(26068),_=n.n(Ne),O=n(48305),C=n.n(O),fe=n(22675),s=n(48279),U=n(94201),ue=n(10560),x=n(80241),te=n(92122),Z=n(26324),Y=n(28190),se=n(41249),ae=n(63619),p=n(75271),t=n(87453),D=n(52676),d=function(M){var Ke=M.spaceId,ge=M.mode,T=ge===void 0?te.jA.Create:ge,pe=M.agentConfigInfo,g=M.open,he=M.onCancel,_e=M.onConfirmCreate,o=M.onConfirmUpdate,Ae=Y.Z.useForm(),xn=C()(Ae,1),k=xn[0],q=(0,p.useState)(""),on=C()(q,2),J=on[0],fn=on[1],w=(0,p.useState)(!1),Me=C()(w,2),$e=Me[0],rn=Me[1],dn=(0,t.useRequest)(x.YS,{manual:!0,debounceInterval:300,onSuccess:function(Pe){fn(""),_e?.(Pe),se.ZP.success("\u667A\u80FD\u4F53\u5DF2\u521B\u5EFA"),rn(!1)},onError:function(){rn(!1)}}),Ce=dn.run,oe=(0,t.useRequest)(x.mp,{manual:!0,debounceInterval:300,onSuccess:function(Pe,F){se.ZP.success("\u667A\u80FD\u4F53\u7F16\u8F91\u6210\u529F"),rn(!1);var Pn=F[0];o?.(Pn)},onError:function(){rn(!1)}}),Oe=oe.run,un=function(){fn(pe?.icon),k.setFieldsValue({name:pe?.name,description:pe?.description})};(0,p.useEffect)(function(){g&&un()},[g,pe]);var gn=function(Pe){rn(!0),T===te.jA.Create?Ce(_()(_()({},Pe),{},{icon:J,spaceId:Ke})):Oe(_()(_()({},Pe),{},{icon:J,id:pe?.id}))},e=function(){k.submit()},qe=function(){he(),un()};return(0,D.jsx)(s.Z,{form:k,title:T===te.jA.Create?"\u521B\u5EFA\u667A\u80FD\u4F53":"\u66F4\u65B0\u667A\u80FD\u4F53",open:g,loading:$e,onCancel:qe,onConfirm:e,children:(0,D.jsxs)(Y.Z,{form:k,requiredMark:Z.N,layout:"vertical",onFinish:gn,autoComplete:"off",children:[(0,D.jsx)(Y.Z.Item,{name:"name",label:"\u667A\u80FD\u4F53\u540D\u79F0",validateTrigger:"onBlur",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u667A\u80FD\u4F53\u540D\u79F0"},{validator:function(Pe,F){return!F||F?.length<=50?Promise.resolve():F?.length>50?Promise.reject(new Error("\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC750\u4E2A\u5B57\u7B26!")):Promise.reject(new Error("\u8BF7\u8F93\u5165\u667A\u80FD\u4F53\u540D\u79F0!"))}}],children:(0,D.jsx)(ae.Z,{placeholder:"\u7ED9\u667A\u80FD\u4F53\u8D77\u4E00\u4E2A\u72EC\u4E00\u65E0\u4E8C\u7684\u540D\u5B57",showCount:!0,maxLength:50})}),(0,D.jsx)(U.Z,{name:"description",label:"\u667A\u80FD\u4F53\u529F\u80FD\u4ECB\u7ECD",initialValue:pe?.description,placeholder:"\u4ECB\u7ECD\u667A\u80FD\u4F53\u7684\u529F\u80FD\uFF0C\u5C06\u4F1A\u5C55\u793A\u7ED9\u667A\u80FD\u4F53\u7684\u7528\u6237",maxLength:1e4}),(0,D.jsx)(Y.Z.Item,{name:"icon",label:"\u56FE\u6807",children:(0,D.jsx)(ue.Z,{onUploadSuccess:fn,imageUrl:J,defaultImage:fe,svgIconName:"icons-workspace-agent"})})]})})};Te.Z=d},6377:function(yn,Te,n){n.d(Te,{Z:function(){return ue}});var Ne=n(94581),_=n.n(Ne),O=n(75271),C={container:"container___dApW8",star:"star___pESlW"},fe=n(52676),s=_().bind(C),U=function(te){var Z=te.className,Y=te.label;return(0,fe.jsxs)("span",{className:s(C.container,"flex",Z),children:[(0,fe.jsx)("span",{children:Y}),(0,fe.jsx)("span",{className:s(C.star),children:"*"})]})},ue=U},2349:function(yn,Te,n){n.d(Te,{Z:function(){return M}});var Ne=n(48305),_=n.n(Ne),O=n(64799),C=n(26324),fe=n(13143),s=n(28246),U=n(63619),ue=n(51249),x=n(28190),te=n(9504),Z=n(94581),Y=n.n(Z),se=n(75271),ae=n(59261),p={"xagi-nav-style2":"xagi-nav-style2___y6MJu",text:"text___XcdJn","page-container":"page-container___aQb4E","variables-box":"variables-box___zOde3",header:"header____mIzl","down-icon":"down-icon___nE2JF","rotate-90":"rotate-90___n3jXV","conversation-container":"conversation-container___wfpdk","close-form":"close-form___uaNXu","form-box":"form-box___AloSZ",desc:"desc___XIVD5"},t=n(52676),D=Y().bind(p),d=s.Z.SHOW_CHILD,le=function(ge){var T=ge.className,pe=ge.form,g=ge.isFilled,he=g===void 0?!1:g,_e=ge.disabled,o=_e===void 0?!1:_e,Ae=ge.showSubmitButton,xn=Ae===void 0?!1:Ae,k=ge.variables,q=ge.userFillVariables,on=ge.onConfirm,J=(0,se.useState)(!0),fn=_()(J,2),w=fn[0],Me=fn[1];(0,se.useEffect)(function(){q&&pe.setFieldsValue(q)},[pe,q]);var $e=function(oe){Me(!1),on?.(oe)},rn=w?p["conversation-container"]:he?p["close-form"]:null,dn=function(oe){var Oe,un=oe.inputType,gn=oe.description,e=[O.oI.Select,O.oI.MultipleSelect].includes(un),qe;switch(un){case O.oI.Text:qe=(0,t.jsx)(U.Z,{variant:"filled",placeholder:gn||"\u8BF7\u8F93\u5165",allowClear:!0});break;case O.oI.Paragraph:case O.oI.AutoRecognition:qe=(0,t.jsx)(U.Z.TextArea,{variant:"filled",placeholder:gn||"\u8BF7\u8F93\u5165",allowClear:!0});break;case O.oI.Number:qe=(0,t.jsx)(ue.Z,{variant:"filled",className:"w-full",placeholder:gn||"\u8BF7\u8F93\u5165"});break;case O.oI.Select:case O.oI.MultipleSelect:qe=(0,t.jsx)(s.Z,{variant:"filled",expandTrigger:"hover",multiple:un===O.oI.MultipleSelect,maxTagCount:"responsive",showCheckedStrategy:d,placeholder:gn||"\u8BF7\u9009\u62E9",options:((Oe=oe.selectConfig)===null||Oe===void 0?void 0:Oe.options)||[],allowClear:!0});break;default:qe=(0,t.jsx)(U.Z,{placeholder:gn||"\u8BF7\u8F93\u5165",allowClear:!0})}return{isSelect:e,content:qe}};return k!=null&&k.length?(0,t.jsxs)("div",{className:D(p["variables-box"],"flex","flex-col",T),children:[(0,t.jsxs)("header",{className:D(p.header,"flex","items-center","content-between"),children:[(0,t.jsx)("span",{children:"\u5BF9\u8BDD\u8BBE\u7F6E"}),(0,t.jsx)(ae.Z,{condition:he,children:(0,t.jsx)("span",{className:D(p.text,"cursor-pointer"),onClick:function(){return Me(!w)},children:(0,t.jsx)(fe.Z,{className:D(w?"":p["rotate-90"],p["down-icon"])})})})]}),(0,t.jsxs)("div",{className:D(rn),children:[(0,t.jsxs)(x.Z,{form:pe,rootClassName:p["form-box"],disabled:o,preserve:!1,layout:"vertical",onFinish:$e,requiredMark:C.N,autoComplete:"off",children:[k?.map(function(Ce){var oe=Ce.name,Oe=Ce.displayName,un=Ce.require,gn=Ce.key,e=dn(Ce),qe=e.isSelect,en=e.content;return(0,t.jsx)(x.Z.Item,{name:oe,label:Oe,rules:[{required:un,message:"\u8BF7".concat(qe?"\u9009\u62E9":"\u8F93\u5165").concat(Oe)}],children:en},gn)}),(0,t.jsx)(ae.Z,{condition:xn,children:(0,t.jsx)(x.Z.Item,{children:(0,t.jsx)(te.ZP,{type:"primary",htmlType:"submit",block:!0,children:"\u5F00\u59CB\u5BF9\u8BDD"})})})]}),(0,t.jsx)(ae.Z,{condition:o,children:(0,t.jsx)("p",{className:D(p.desc),children:"\u5BF9\u8BDD\u5F00\u59CB\u540E\uFF0C\u5BF9\u8BDD\u8BBE\u7F6E\u5C06\u65E0\u6CD5\u4FEE\u6539\u3002"})})]})]}):null},M=le},84283:function(yn,Te,n){n.d(Te,{Z:function(){return ae}});var Ne=n(31759),_=n.n(Ne),O=n(44953),C=n(24573),fe=n(41249),s=n(94581),U=n.n(s),ue=n(75271),x=n(87453),te={"xagi-nav-style2":"xagi-nav-style2___a6A0C",text:"text___ijFbn","page-container":"page-container___AmrXf",container:"container___eQEDc",box:"box___qQPTu",icon:"icon___aN05X"},Z=n(52676),Y=U().bind(te),se=function(t){var D=t.className,d=t.itemClassName,le=t.loading,M=t.chatSuggestList,Ke=t.onClick,ge=(0,x.useModel)("chat"),T=ge.showPagePreview,pe=function(_e){var o={},Ae={};if(_e.args&&Array.isArray(_e.args)&&_e.args.forEach(function(q){q.inputType==="Path"&&q.name&&(o[q.name]=q.bindValue),q.inputType==="Query"&&q.name&&q.bindValue&&(Ae[q.name]=q.bindValue)}),(0,O.N4)(_e.pageUrl,o)){var xn=(0,O.Tx)(_e?.pageUrl,o),k="".concat("").concat(xn);T({name:_e.info||"\u9875\u9762\u9884\u89C8",uri:k,params:Ae,executeId:"event-".concat(Date.now())})}else fe.ZP.error("\u9875\u9762\u8DEF\u5F84\u53C2\u6570\u914D\u7F6E\u9519\u8BEF")},g=function(_e){if(_e.type==="Question"){Ke(_e.info);return}if(_e.type==="Page"){if(!_e.pageUrl){fe.ZP.error("\u9875\u9762\u8DEF\u5F84\u914D\u7F6E\u9519\u8BEF");return}pe(_e);return}if(_e.type==="Link"){if(!_e.url){fe.ZP.error("\u94FE\u63A5\u5730\u5740\u914D\u7F6E\u9519\u8BEF");return}window.open(_e.url,"_blank");return}};return le?(0,Z.jsx)("div",{className:Y("flex",te["loading-box"]),children:(0,Z.jsx)(C.Z,{})}):M?.length>0?(0,Z.jsx)("div",{className:Y(te.container,"flex","flex-col",D),children:M?.map(function(he,_e){return he?(0,Z.jsxs)("div",{onClick:function(){return typeof he=="string"?Ke(he):g(he)},className:Y(te.box,"cursor-pointer","hover-box",d,"text-ellipsis-2"),children:[_()(he)==="object"&&he?.icon&&(0,Z.jsx)("img",{className:Y(te.icon),src:he?.icon}),typeof he=="string"?he:he.info]},_e):null})}):null},ae=se},57534:function(yn,Te,n){n.d(Te,{Z:function(){return x}});var Ne=n(48305),_=n.n(Ne),O=n(75271),C=n(10894),fe=n.n(C),s={container:"container___nA1pk",left:"left___yCQVL",right:"right___W8W7y",divider:"divider___TKhrM",dragging:"dragging___ur7Jj",disabled:"disabled___tspGS",dragOverlay:"dragOverlay___E5wS3"},U=n(52676),ue=function(Z){var Y=Z.left,se=Z.right,ae=Z.minLeftWidth,p=ae===void 0?350:ae,t=Z.minRightWidth,D=t===void 0?350:t,d=Z.defaultLeftWidth,le=d===void 0?33:d,M=Z.dividerColor,Ke=M===void 0?"#e0e0e0":M,ge=Z.dividerHoverColor,T=ge===void 0?"#bbb":ge,pe=Z.dividerDraggingColor,g=pe===void 0?"#1890ff":pe,he=Z.style,_e=Z.className,o=(0,O.useRef)(null),Ae=(0,O.useState)(0),xn=_()(Ae,2),k=xn[0],q=xn[1],on=(0,O.useState)(le),J=_()(on,2),fn=J[0],w=J[1],Me=(0,O.useState)(!1),$e=_()(Me,2),rn=$e[0],dn=$e[1],Ce=(0,O.useState)(!1),oe=_()(Ce,2),Oe=oe[0],un=oe[1],gn=(0,O.useState)(!1),e=_()(gn,2),qe=e[0],en=e[1],Pe=(0,O.useRef)(0),F=(0,O.useRef)(null);(0,O.useEffect)(function(){var jn=setTimeout(function(){en(!0)},300);return function(){return clearTimeout(jn)}},[]),(0,O.useEffect)(function(){var jn=function(){if(o.current){var vn=o.current.offsetWidth;q(vn),!Oe&&vn>0&&un(!0)}};jn();var X=new ResizeObserver(jn);return o.current&&X.observe(o.current),window.addEventListener("resize",jn),function(){X.disconnect(),window.removeEventListener("resize",jn)}},[Oe]),(0,O.useEffect)(function(){if(!(!k||!Oe)){var jn=Pe.current;if(jn!==k&&!rn){Pe.current=k;var X;F.current!==null?X=F.current:X=fn/100*k;var Re=k-X,vn=X<p,En=Re<D;if(vn&&En){F.current=p;var Qn=p/k*100;w(Qn);return}if(vn){F.current=p;var Mn=p/k*100;w(Mn);return}if(En){var Un=k-D;F.current=Un;var _t=Un/k*100;w(Math.max(0,_t));return}if(F.current!==null){var mt=F.current/k*100;w(mt);return}var $n=k-D;if(X>$n){var ft=$n/k*100;w(ft)}}}},[k,Oe,fn,p,D,rn]);var Pn=!!Y,_n=!!se,kn=Pn&&_n,Fn=Pn&&!_n?100:!Pn&&_n?0:fn,cn=!kn,wn=(0,O.useCallback)(function(jn,X){if(!(!o.current||k===0)){var Re=X.x,vn=Re/k*100,En=p/k*100,Qn=D/k*100,Mn=100-Qn,Un=Math.max(En,Math.min(Mn,vn));w(Un),F.current!==null&&(F.current=null)}},[k,p,D]),On=(0,O.useCallback)(function(jn){if(!(!o.current||k===0)){var X=o.current.getBoundingClientRect(),Re=jn.clientX-X.left,vn=Re/k*100,En=p/k*100,Qn=D/k*100,Mn=100-Qn,Un=Math.max(En,Math.min(Mn,vn));w(Un),F.current!==null&&(F.current=null)}},[k,p,D]),Vn=(0,O.useCallback)(function(){dn(!1),document.body.style.userSelect="",document.removeEventListener("mousemove",On),document.removeEventListener("mouseup",Vn)},[On]),vt=(0,O.useCallback)(function(){dn(!0),document.body.style.userSelect="none",document.addEventListener("mousemove",On),document.addEventListener("mouseup",Vn)},[On,Vn]),Xn=(0,O.useCallback)(function(jn,X){if(dn(!1),document.body.style.userSelect="",document.removeEventListener("mousemove",On),document.removeEventListener("mouseup",Vn),o.current&&k>0){var Re=X.x,vn=Re/k*100,En=p/k*100,Qn=D/k*100,Mn=100-Qn,Un=Math.max(En,Math.min(Mn,vn));w(Un),F.current=null}},[k,p,D,On,Vn]),Dn={x:fn/100*k,y:0};return(0,U.jsxs)("div",{className:"".concat(s.container," ").concat(_e||""),style:he,ref:o,children:[rn&&(0,U.jsx)("div",{className:s.dragOverlay}),Pn&&(0,U.jsx)("div",{className:s.left,style:{width:"".concat(Fn,"%"),transition:Oe?"none":"width 0ms",overflow:rn?"hidden":"auto"},children:Y}),kn&&k>0&&(0,U.jsx)(fe(),{axis:"x",position:Dn,onStart:vt,onDrag:wn,onStop:Xn,disabled:cn,bounds:{left:p,right:k-D},children:(0,U.jsx)("div",{className:"".concat(s.divider," ").concat(cn?s.disabled:""," ").concat(rn?s.dragging:""),style:{"--divider-color":Ke,"--divider-hover-color":T,"--divider-dragging-color":g,opacity:qe?1:0,transition:"opacity 0.4s ease-in-out"}})}),_n&&(0,U.jsx)("div",{className:s.right,style:{width:"".concat(100-Fn,"%"),transition:Oe?"none":"width 0ms",overflow:rn?"hidden":"auto"},children:se})]})},x=ue},6772:function(yn,Te,n){n.d(Te,{Z:function(){return q}});var Ne=n(26068),_=n.n(Ne),O=n(92122),C=n(75271),fe=n(59261),s=n(94581),U=n.n(s),ue={"xagi-nav-style2":"xagi-nav-style2___bmZZd",text:"text___TlJTJ","page-container":"page-container___MtdBj",container:"container___bLyIn"},x=n(52676),te=U().bind(ue),Z=function(J){var fn=J.className,w=J.title,Me=J.content,$e=J.image,rn=J.onClick;return(0,x.jsxs)("div",{className:te(ue.container,"flex","flex-col","cursor-pointer",fn),onClick:rn,children:[(0,x.jsx)("h3",{className:"text-ellipsis-2",children:w}),(0,x.jsx)(fe.Z,{condition:$e,children:(0,x.jsx)("img",{className:"radius-6",src:$e,alt:""})}),(0,x.jsx)("p",{className:"text-ellipsis-2",children:Me})]})},Y=Z,se={"xagi-nav-style2":"xagi-nav-style2___LLKTW",text:"text___Vlepy","page-container":"page-container___T748_",container:"container___uoSDc",box:"box___on4p2"},ae=U().bind(se),p=function(J){var fn=J.className,w=J.title,Me=J.content,$e=J.image,rn=J.onClick;return(0,x.jsxs)("div",{className:ae(se.container,"flex","cursor-pointer","items-center",fn),onClick:rn,children:[(0,x.jsx)(fe.Z,{condition:$e,children:(0,x.jsx)("img",{className:"radius-6",src:$e,alt:""})}),(0,x.jsxs)("div",{className:ae(se.box,"flex-1","overflow-hide"),children:[(0,x.jsx)("h3",{className:"text-ellipsis",children:w}),(0,x.jsx)("p",{className:"text-ellipsis-2",children:Me})]})]})},t=p,D={"xagi-nav-style2":"xagi-nav-style2___UTXUD",text:"text___ImNss","page-container":"page-container___cWd2B",container:"container___ujWA4"},d=U().bind(D),le=function(J){var fn=J.className,w=J.title,Me=J.content,$e=J.onClick;return(0,x.jsxs)("div",{className:d(D.container,"cursor-pointer",fn),onClick:$e,children:[(0,x.jsx)("h3",{className:"text-ellipsis-2",children:w}),(0,x.jsx)("p",{className:"text-ellipsis-2",children:Me})]})},M=le,Ke={"xagi-nav-style2":"xagi-nav-style2___tYLnj",text:"text___GGppT","page-container":"page-container___fZGCQ",container:"container___mGrAV"},ge=U().bind(Ke),T=function(J){var fn=J.className,w=J.title,Me=J.content,$e=J.image,rn=J.onClick;return(0,x.jsxs)("div",{className:ge(Ke.container,"flex","flex-col","cursor-pointer",fn),onClick:rn,children:[(0,x.jsx)("h3",{className:"text-ellipsis-2",children:w}),(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("p",{className:"flex-1 text-ellipsis-2",children:Me}),(0,x.jsx)(fe.Z,{condition:$e,children:(0,x.jsx)("img",{className:"radius-6",src:$e,alt:""})})]})]})},pe=T,g=function(J){var fn=J.cardKey,w=J.bindLinkUrl,Me=function(){w&&window.open(w)};switch(fn){case O.H1.ONE:return(0,x.jsx)(t,_()(_()({},J),{},{onClick:Me}));case O.H1.TWO:return(0,x.jsx)(pe,_()(_()({},J),{},{onClick:Me}));case O.H1.THREE:return(0,x.jsx)(M,_()(_()({},J),{},{onClick:Me}));case O.H1.FOUR:return(0,x.jsx)(Y,_()(_()({},J),{},{onClick:Me}))}},he=g,_e=n(89083),o=n(70183),Ae={"inner-container":"inner-container____n5mL","card-item-container":"card-item-container___rBOVp","card-style-two":"card-style-two___mNZ7T"},xn=U().bind(Ae),k=function(J){var fn=J.className,w=J.visible,Me=J.onClose,$e=J.cardList,rn=function(Ce){return $e?.length===1&&Ce.cardKey===O.H1.TWO};return(0,x.jsx)(_e.Z,{title:"\u5C55\u793A\u53F0",className:fn,visible:w,onClose:Me,children:$e?.length>0?(0,x.jsx)("div",{className:xn(Ae["inner-container"],"scrollbar"),children:(0,x.jsx)("div",{className:xn(Ae["card-item-container"]),children:$e?.map(function(dn,Ce){return(0,x.jsx)(he,_()(_()({},dn),{},{className:rn(dn)?Ae["card-style-two"]:""}),"".concat(dn.cardKey).concat(Ce))})})}):(0,x.jsx)("div",{className:xn("flex","h-full","items-center","content-center"),children:(0,x.jsx)(o.Z,{description:"\u6682\u65E0\u6570\u636E"})})})},q=k},702:function(yn,Te,n){n.d(Te,{Z:function(){return o}});var Ne=n(90228),_=n.n(Ne),O=n(87999),C=n.n(O),fe=n(48305),s=n.n(fe),U=n(62597),ue=n(61265),x=n(80241),te=n(44953),Z=n(47383),Y=n(61606),se=n(27806),ae=n(81707),p=n(14258),t=n(68108),D=n(9504),d=n(56555),le=n(94581),M=n.n(le),Ke=n(75271),ge=n(70797),T=n(87453),pe={"xagi-nav-style2":"xagi-nav-style2___IxVei",text:"text___PJibU","page-container":"page-container___r4oL6","page-preview-iframe-container":"page-preview-iframe-container___i7gFb","page-preview-header":"page-preview-header___aUFBG","page-icon":"page-icon___fFlZK","close-btn":"close-btn___GIqOO","page-preview-body":"page-preview-body___op2OU","page-iframe-container":"page-iframe-container___iDJF0","page-iframe":"page-iframe___Fy7dV","loading-wrapper":"loading-wrapper___YqvYY"},g=n(52676),he=M().bind(pe),_e=function(xn){var k=xn.pagePreviewData,q=xn.showLoading,on=q===void 0?!0:q,J=xn.showHeader,fn=J===void 0?!0:J,w=xn.showCloseButton,Me=w===void 0?!0:w,$e=xn.onClose,rn=xn.style,dn=xn.className,Ce=xn.titleStyle,oe=xn.titleClassName,Oe=(0,Ke.useState)(0),un=s()(Oe,2),gn=un[0],e=un[1],qe=(0,Ke.useState)(!0),en=s()(qe,2),Pe=en[0],F=en[1],Pn=(0,Ke.useRef)(null),_n=(0,Ke.useMemo)(function(){if(!k)return"";var X=k.uri,Re=k.params;if(!X)return"";if(/^https?:\/\//.test(X)||(X="".concat("").concat(X)),!Re||Object.keys(Re).length===0)return X;var vn=new URLSearchParams(Re).toString();return e(Date.now),"".concat(X,"?").concat(vn)},[k]),kn=function(){F(!1)},Fn=function(){F(!1)},cn=(0,T.useModel)("chat"),wn=cn.previewPageTitle,On=cn.setPreviewPageTitle;if((0,Ke.useEffect)(function(){var X=Pn.current;X&&(X.src=_n,F(!0),X.onload=C()(_()().mark(function Re(){var vn,En,Qn,Mn,Un,_t,mt,$n;return _()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(En=X.contentDocument||((vn=X.contentWindow)===null||vn===void 0?void 0:vn.document),En){tt.next=3;break}return tt.abrupt("return");case 3:if(Qn=new ge.Z,Un=new MutationObserver(function(){clearTimeout(Mn),Mn=setTimeout(C()(_()().mark(function Rn(){var ln,an,bn,Wn,lt;return _()().wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:if(an=((ln=En.querySelector("head > title"))===null||ln===void 0?void 0:ln.textContent)||"\u9875\u9762\u9884\u89C8",On(an),bn=En.body.innerHTML,k!=null&&k.method){Hn.next=5;break}return Hn.abrupt("return");case 5:if(Wn="",k.data_type==="html"&&(Wn=bn),k.data_type==="markdown"&&(Wn=Qn.turndown(bn)),Wn){Hn.next=10;break}return Hn.abrupt("return");case 10:if(k?.method!=="browser_navigate_page"){Hn.next=15;break}return lt={requestId:k.request_id||"",html:Wn},console.log("CHART2",lt),Hn.next=15,(0,x.kR)(lt);case 15:case"end":return Hn.stop()}},Rn)})),500)}),Un.observe(En.body,{childList:!0,subtree:!0,characterData:!0}),k?.method!=="browser_navigate_page"){tt.next=13;break}if(mt=(_t=En.body.querySelector("body>h1"))===null||_t===void 0?void 0:_t.textContent,mt!=="Welcome to nginx!"){tt.next=13;break}return $n={requestId:k?.request_id,html:"\u65E0\u6CD5\u8BFB\u53D6\u6570\u636E"},console.log("CHART1",$n),tt.next=13,(0,x.kR)($n);case 13:return tt.abrupt("return",function(){Un.disconnect(),clearTimeout(Mn)});case 14:case"end":return tt.stop()}},Re)})))},[k]),!k)return null;function Vn(){var X;return(X=Pn.current)===null||X===void 0?void 0:X.contentWindow}function vt(){var X,Re=Vn();Re==null||(X=Re.location)===null||X===void 0||X.reload()}function Xn(){var X,Re=Vn();Re==null||(X=Re.history)===null||X===void 0||X.back()}function Dn(){var X,Re=Vn();Re==null||(X=Re.history)===null||X===void 0||X.forward()}function jn(){var X=_n;/^https?:\/\//.test(_n)||(X="".concat(window.location.protocol,"//").concat(window.location.host).concat(_n)),(0,te.TE)(X,function(){},!0)}return(0,g.jsxs)("div",{className:he(pe["page-preview-iframe-container"],dn),style:rn,children:[fn&&(0,g.jsxs)("div",{className:he(pe["page-preview-header"]),children:[(0,g.jsxs)("h3",{className:"text-ellipsis",children:[(0,g.jsx)(U.Z,{name:"icons-page",className:he(pe["page-icon"])}),(0,g.jsx)("span",{className:oe,style:Ce,children:wn})]}),(0,g.jsxs)("div",{style:{display:"flex",gap:"10px",marginRight:"20px"},children:[(0,g.jsx)(t.Z,{title:"\u5237\u65B0",children:(0,g.jsx)(D.ZP,{onClick:vt,icon:(0,g.jsx)(Z.Z,{})})}),(0,g.jsx)(t.Z,{title:"\u540E\u9000",children:(0,g.jsx)(D.ZP,{onClick:Xn,icon:(0,g.jsx)(Y.Z,{})})}),(0,g.jsx)(t.Z,{title:"\u524D\u8FDB",children:(0,g.jsx)(D.ZP,{onClick:Dn,icon:(0,g.jsx)(se.Z,{})})}),(0,g.jsx)(t.Z,{title:"\u590D\u5236\u94FE\u63A5",children:(0,g.jsx)(D.ZP,{onClick:jn,icon:(0,g.jsx)(ae.Z,{})})})]}),Me&&(0,g.jsx)(p.Z,{className:he(pe["close-btn"],"cursor-pointer"),onClick:$e})]}),(0,g.jsxs)("div",{className:he(pe["page-preview-body"]),children:[on&&Pe&&(0,g.jsx)("div",{className:he(pe["loading-wrapper"]),children:(0,g.jsx)(d.Z,{size:"large",tip:"\u9875\u9762\u52A0\u8F7D\u4E2D..."})}),(0,g.jsx)("iframe",{ref:Pn,src:_n,sandbox:ue.lM,className:he(pe["page-iframe"]),onLoad:kn,onError:Fn,style:{opacity:Pe?0:1,transition:"opacity 1.5s ease-in-out"}},gn)]})]})},o=_e},50644:function(yn,Te,n){n.d(Te,{H:function(){return ue}});var Ne=n(48305),_=n.n(Ne),O=n(68108),C=n(94581),fe=n.n(C),s=n(75271),U=n(52676),ue=function(te){var Z=te.className,Y=te.text,se=te.onClick,ae=te.placement,p=ae===void 0?"top":ae,t=(0,s.useRef)(null),D=(0,s.useState)(!1),d=_()(D,2),le=d[0],M=d[1];return(0,s.useEffect)(function(){var Ke=function(){if(t.current){var pe=t.current,g=pe.scrollWidth>pe.clientWidth;M(g)}},ge=requestAnimationFrame(Ke);return function(){cancelAnimationFrame(ge)}},[Y]),(0,U.jsx)("div",{className:fe()("text-ellipsis",Z),ref:t,onClick:se,children:(0,U.jsx)(O.Z,{title:le?Y:"",placement:p,children:Y})})}},71530:function(yn,Te,n){n.d(Te,{Z:function(){return _}});var Ne=function(O){return O.NewNotifyMessage="new_notify_message",O.RefreshChatMessage="refresh_chat_message",O}({}),_={NewNotifyMessage:Ne.NewNotifyMessage,RefreshChatMessage:Ne.RefreshChatMessage}},75468:function(yn,Te,n){var Ne=n(90228),_=n.n(Ne),O=n(87999),C=n.n(O),fe=n(80241),s=n(29333),U=n(87453),ue=function(){var te=(0,s.Z)(fe.co,{manual:!0,debounceMaxWait:300}),Z=te.runAsync,Y=function(){var se=C()(_()().mark(function ae(p,t){var D,d,le,M,Ke;return _()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return D=t?.variableParams,T.next=3,Z({agentId:p,devMode:!1,variables:D});case 3:d=T.sent,le=d.success,M=d.data,le&&(Ke=M?.id,U.history.push("/home/chat/".concat(Ke,"/").concat(p),t));case 7:case"end":return T.stop()}},ae)}));return function(p,t){return se.apply(this,arguments)}}();return{handleCreateConversation:Y,runAsyncConversationCreate:Z}};Te.Z=ue},11872:function(yn,Te,n){var Ne=n(64799),_=n(44953),O=n(41249),C=n(75271),fe=n(87453),s=function(ue){var x=ue.containerRef,te=ue.eventBindConfig,Z=(0,fe.useModel)("chat"),Y=Z.showPagePreview,se=(0,C.useRef)(new Set),ae=(0,C.useCallback)(function(p,t){var D,d="".concat(p,"-").concat(t);if(!se.current.has(d)){se.current.add(d),setTimeout(function(){se.current.delete(d)},3e3),console.log("[Event Delegate] \u89E6\u53D1\u4E8B\u4EF6:",{eventType:p,data:t});var le={};try{le=JSON.parse(t)}catch(g){console.error("[Event Delegate] \u6570\u636E\u89E3\u6790\u5931\u8D25:",g);return}var M=te==null||(D=te.eventConfigs)===null||D===void 0?void 0:D.find(function(g){return g.identification===p});if(!M){console.warn("[Event Delegate] \u672A\u627E\u5230\u4E8B\u4EF6\u914D\u7F6E: ".concat(p));return}switch(console.log("[Event Delegate] \u627E\u5230\u4E8B\u4EF6\u914D\u7F6E:",M),M.type){case Ne.ZE.Page:{if(!M.pageUrl){O.ZP.error("\u9875\u9762\u8DEF\u5F84\u914D\u7F6E\u9519\u8BEF");return}var Ke={},ge={};if(M.args&&Array.isArray(M.args)&&M.args.forEach(function(g){if(g.inputType==="Path"&&g.name){var he;Ke[g.name]=(he=le[g.name])!==null&&he!==void 0?he:g.bindValue}if(g.inputType==="Query"&&g.name){var _e;ge[g.name]=(_e=le[g.name])!==null&&_e!==void 0?_e:g.bindValue}}),(0,_.N4)(M.pageUrl,Ke)){var T=(0,_.Tx)(M.pageUrl,Ke),pe=M.basePath?"".concat(M.basePath).concat(T):"".concat("").concat(T);console.log("[Event Delegate] \u6253\u5F00\u9875\u9762:",{uri:pe,params:ge,name:M.name}),Y({name:M.pageName||"\u9875\u9762",uri:pe,params:ge,executeId:"event-".concat(Date.now())})}else O.ZP.error("\u9875\u9762\u8DEF\u5F84\u53C2\u6570\u914D\u7F6E\u9519\u8BEF");break}case Ne.ZE.Link:{if(!M.url){O.ZP.error("\u94FE\u63A5\u5730\u5740\u914D\u7F6E\u9519\u8BEF");return}console.log("[Event Delegate] \u6253\u5F00\u5916\u94FE:",M.url),window.open(M.url,"_blank");break}default:console.warn("[Event Delegate] \u672A\u77E5\u7684\u4E8B\u4EF6\u7C7B\u578B: ".concat(M.type))}}},[te,Y]);return(0,C.useEffect)(function(){var p=x.current;if(p){var t=function(d){var le=d.target,M=le.closest(".event");if(M){d.preventDefault(),d.stopPropagation();var Ke=M.getAttribute("event-type"),ge=M.getAttribute("data");Ke&&ge?ae(Ke,ge):console.warn("[Event Delegate] \u7F3A\u5C11\u5FC5\u8981\u7684\u5C5E\u6027:",{eventType:Ke,dataStr:ge})}};return p.addEventListener("click",t),console.log("[Event Delegate] \u4E8B\u4EF6\u4EE3\u7406\u5DF2\u521D\u59CB\u5316"),function(){p.removeEventListener("click",t),console.log("[Event Delegate] \u4E8B\u4EF6\u4EE3\u7406\u5DF2\u6E05\u7406")}}},[x,ae]),{handleEventClick:ae}};Te.Z=s},88458:function(yn,Te,n){var Ne=n(15558),_=n.n(Ne),O=n(48305),C=n.n(O),fe=n(64799),s=n(75271),U=function(){var x=(0,s.useState)([]),te=C()(x,2),Z=te[0],Y=te[1],se=function(t){var D=_()(Z);if(D.some(function(le){return le.id===t.id})){var d=D.findIndex(function(le){return le.id===t.id});D.splice(d,1)}else D.push({id:t.id,type:t.type});Y(D)},ae=function(t){if(t!=null&&t.length){var D=t.filter(function(d){return d.defaultSelected===fe.Km.Yes}).map(function(d){return{id:d.id,type:d.type}});Y(D||[])}};return{selectedComponentList:Z,setSelectedComponentList:Y,handleSelectComponent:se,initSelectedComponentList:ae}};Te.Z=U},27689:function(yn,Te,n){n.d(Te,{K:function(){return Z}});var Ne=n(90228),_=n.n(Ne),O=n(87999),C=n.n(O),fe=n(48305),s=n.n(fe),U=n(92068),ue=n(14334),x=n(75271),te=n(87453),Z=function(){var se=(0,x.useState)(U.unifiedThemeService.getCurrentData()),ae=s()(se,2),p=ae[0],t=ae[1],D=(0,x.useState)(!1),d=s()(D,2),le=d[0],M=d[1],Ke=(0,te.useModel)("tenantConfigInfo"),ge=Ke.tenantConfigInfo;(0,x.useEffect)(function(){var dn=function(oe){t(oe),M(!1)};return U.unifiedThemeService.addListener(dn),function(){U.unifiedThemeService.removeListener(dn)}},[]);var T=(0,x.useCallback)(function(dn){return C()(_()().mark(function Ce(){var oe=arguments;return _()().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return M(!0),un.prev=1,un.next=4,dn.apply(void 0,oe);case 4:un.next=11;break;case 6:throw un.prev=6,un.t0=un.catch(1),console.error("\u4E3B\u9898\u66F4\u65B0\u5931\u8D25:",un.t0),M(!1),un.t0;case 11:case"end":return un.stop()}},Ce,null,[[1,6]])}))},[]),pe=T(U.unifiedThemeService.updatePrimaryColor.bind(U.unifiedThemeService)),g=T(U.unifiedThemeService.updateAntdTheme.bind(U.unifiedThemeService)),he=T(U.unifiedThemeService.updateNavigationStyle.bind(U.unifiedThemeService)),_e=T(U.unifiedThemeService.updateLayoutStyle.bind(U.unifiedThemeService)),o=T(U.unifiedThemeService.updateBackground.bind(U.unifiedThemeService)),Ae=T(U.unifiedThemeService.updateLanguage.bind(U.unifiedThemeService)),xn=(0,x.useCallback)(C()(_()().mark(function dn(){var Ce;return _()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Ce=p.antdTheme==="light"?"dark":"light",Oe.next=3,g(Ce);case 3:case"end":return Oe.stop()}},dn)})),[p.antdTheme,g]),k=(0,x.useCallback)(C()(_()().mark(function dn(){var Ce;return _()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Ce=p.layoutStyle===ue.B.DARK?ue.B.LIGHT:ue.B.DARK,Oe.next=3,_e(Ce);case 3:case"end":return Oe.stop()}},dn)})),[p.layoutStyle,_e]),q=(0,x.useCallback)(C()(_()().mark(function dn(){var Ce;return _()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Ce=p.navigationStyle===ue.F.STYLE1?ue.F.STYLE2:ue.F.STYLE1,Oe.next=3,he(Ce);case 3:case"end":return Oe.stop()}},dn)})),[p.navigationStyle,he]),on=(0,x.useCallback)(C()(_()().mark(function dn(){var Ce;return _()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Ce=p.language==="zh-CN"?"en-US":"zh-CN",Oe.next=3,Ae(Ce);case 3:case"end":return Oe.stop()}},dn)})),[p.language,Ae]),J=T(U.unifiedThemeService.resetToDefault.bind(U.unifiedThemeService)),fn=p.antdTheme==="dark",w=p.layoutStyle===ue.B.DARK,Me=p.navigationStyle===ue.F.STYLE2,$e=p.language==="zh-CN",rn=(0,x.useMemo)(function(){return U.unifiedThemeService.getExtraColors()},[ge]);return{data:p,isLoading:le,updatePrimaryColor:pe,updateAntdTheme:g,updateNavigationStyle:he,updateLayoutStyle:_e,updateBackground:o,updateLanguage:Ae,toggleAntdTheme:xn,toggleNavigationTheme:k,toggleNavigationStyle:q,toggleLanguage:on,resetToDefault:J,primaryColor:p.primaryColor,antdTheme:p.antdTheme,navigationStyle:p.navigationStyle,layoutStyle:p.layoutStyle,backgroundId:p.backgroundId,language:p.language,isDarkMode:fn,isNavigationDark:w,isNavigationExpanded:Me,isChineseLanguage:$e,extraColors:rn}};Te.Z=Z},40643:function(yn,Te,n){n.r(Te),n.d(Te,{default:function(){return _i}});var Ne=n(82092),_=n.n(Ne),O=n(26068),C=n.n(O),fe=n(48305),s=n.n(fe),U=n(82456),ue=n(56716),x=n(57534),te=n(6772),Z=n(27791),Y=n(27689),se=n(65390),ae=n(85461),p=n(80241),t=n(64799),D=n(92122),d=n(53895),le=n(24057),M=n(39373),Ke=n(83005),ge=n(94581),T=n.n(ge),pe=n(16483),g=n.n(pe),he=n(32222),_e=n.n(he),o=n(75271),Ae=n(87453),xn=n(702),k=n(90228),q=n.n(k),on=n(87999),J=n.n(on),fn=n(15558),w=n.n(fn),Me=n(46388),$e=n(10802),rn=n(26145),dn=n(83352),Ce=n(70375),oe=n(6619),Oe=n(73415),un=n(24573),gn=n(86743),e=n(52676),qe=function(r){var l,i=r.textClassName,a=r.itemClassName,u=r.type,v=r.list,m=r.deleteList,y=r.onSet,S=r.onDel,j=function(E){switch(E){case t.qR.Plugin:return{text:"\u63D2\u4EF6\u80FD\u591F\u8BA9\u667A\u80FD\u4F53\u8C03\u7528\u5916\u90E8API\uFF0C\u4F8B\u5982\u641C\u7D22\u4FE1\u606F\u3001\u6D4F\u89C8\u7F51\u9875\u3001\u751F\u6210\u56FE\u7247\u7B49\uFF0C\u6269\u5C55\u667A\u80FD\u4F53\u7684\u80FD\u529B\u548C\u4F7F\u7528\u573A\u666F\u3002",image:rn};case t.qR.Workflow:return{text:"\u5DE5\u4F5C\u6D41\u652F\u6301\u901A\u8FC7\u53EF\u89C6\u5316\u7684\u65B9\u5F0F\uFF0C\u5BF9\u63D2\u4EF6\u3001\u5927\u8BED\u8A00\u6A21\u578B\u3001\u4EE3\u7801\u5757\u7B49\u529F\u80FD\u8FDB\u884C\u7EC4\u5408\uFF0C\u4ECE\u800C\u5B9E\u73B0\u590D\u6742\u3001\u7A33\u5B9A\u7684\u4E1A\u52A1\u6D41\u7A0B\u7F16\u6392\uFF0C\u4F8B\u5982\u65C5\u884C\u89C4\u5212\u3001\u62A5\u544A\u5206\u6790\u7B49\u3002",image:dn};case t.qR.MCP:return{text:"\u667A\u80FD\u4F53\u53EF\u4EE5\u901A\u8FC7\u6807\u51C6\u5316\u534F\u8BAE\uFF08MCP\uFF09\u8FDE\u63A5\u5404\u7C7B\u670D\u52A1API\u5E76\u53D1\u8D77\u8C03\u7528\u3002",image:$e};case t.qR.Table:return{text:"\u4EE5\u8868\u683C\u7ED3\u6784\u7EC4\u7EC7\u6570\u636E\uFF0C\u53EF\u5B9E\u73B0\u7C7B\u4F3C\u4E66\u7B7E\u548C\u56FE\u4E66\u7BA1\u7406\u7B49\u529F\u80FD\u3002",image:Me};case t.qR.Page:return{text:"\u9875\u9762\u662F\u667A\u80FD\u4F53\u7684\u53EF\u89C6\u5316\u754C\u9762\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u9875\u9762\u4E0E\u667A\u80FD\u4F53\u8FDB\u884C\u4EA4\u4E92\u3002",image:Me}}},N=function(E,c,B){return m?.some(function(A){return A.id===E&&A.targetId===c&&A.type===B})},I=function(E){var c,B=E.id,A=E.targetId,h=E.type;N(B,A,h)||S(E.id,E.targetId,E.type,((c=E.bindConfig)===null||c===void 0?void 0:c.toolName)||"")};return v!=null&&v.length?v.map(function(L){var E;return(0,e.jsx)(Ce.Z,{className:a,showImage:u!==t.qR.MCP,agentComponentInfo:L,defaultImage:(E=j(u))===null||E===void 0?void 0:E.image,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe.Z,{title:"\u8BBE\u7F6E",icon:(0,e.jsx)(Oe.Mf,{className:"cursor-pointer"}),onClick:function(){return y(L.id)}}),(0,e.jsx)(oe.Z,{title:"\u5220\u9664",icon:N(L.id,L.targetId,L.type)?(0,e.jsx)(un.Z,{}):(0,e.jsx)(gn.Z,{className:"cursor-pointer"}),onClick:function(){return I(L)}})]})},L.id)}):(0,e.jsx)("p",{className:i,children:(l=j(u))===null||l===void 0?void 0:l.text})},en=qe,Pe=n(69506),F=n(88459),Pn=n(61265),_n=n(39671),kn=n(40677),Fn=n(29333),cn=n(41249),wn=n(7914),On=n(68108),Vn=n(64807),vt=n(14258),Xn=n(14719),Dn=n(59261),jn=n(6377),X=n(63619),Re=n(9504),vn={"xagi-nav-style2":"xagi-nav-style2___E5g3B",text:"text___OR8er","page-container":"page-container___edfQB",container:"container___bIAoA",header:"header___xEh8u",desc:"desc___iAhI9","reply-content":"reply-content___DGIN1",textarea:"textarea___RVpuC",tips:"tips___lKH6p",footer:"footer___zzeZr","btn-disabled":"btn-disabled___gaWUM"},En=T().bind(vn),Qn=function(r){var l=r.async,i=r.asyncReplyContent,a=r.onSaveSet,u=(0,o.useState)(),v=s()(u,2),m=v[0],y=v[1],S=(0,o.useState)(""),j=s()(S,2),N=j[0],I=j[1],L=(0,o.useState)(!1),E=s()(L,2),c=E[0],B=E[1];(0,o.useEffect)(function(){I(i||"\u5DF2\u7ECF\u5F00\u59CB\u4E3A\u60A8\u5904\u7406\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\u8FD0\u884C\u7ED3\u679C"),y(l||t.Km.No)},[l,i]);var A=(0,o.useMemo)(function(){return m===t.Km.Yes&&!N},[m,N]),h=function(){var b=J()(q()().mark(function V(){var ve;return q()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return ve={async:m,asyncReplyContent:N},B(!0),re.next=4,a(ve);case 4:B(!1);case 5:case"end":return re.stop()}},V)}));return function(){return b.apply(this,arguments)}}(),H=function(V){var ve=V?t.Km.Yes:t.Km.No;y(ve)};return(0,e.jsxs)("div",{className:En("flex","flex-col","h-full",vn.container),children:[(0,e.jsxs)("div",{className:En("flex-1"),children:[(0,e.jsxs)("header",{className:En("flex","items-center",vn.header),children:[(0,e.jsx)("div",{className:En("flex-1"),children:"\u5F02\u6B65\u8FD0\u884C"}),(0,e.jsx)(wn.Z,{checked:m===t.Km.Yes,onChange:H})]}),(0,e.jsx)("p",{className:En(vn.desc),children:"\u4EFB\u52A1\u8FDB\u5165\u5F02\u6B65\u8FD0\u884C\u65F6\u9ED8\u8BA4\u8FD4\u56DE\u4E00\u6761\u56DE\u590D\u5185\u5BB9\uFF0C\u7528\u6237\u53EF\u4EE5\u7EE7\u7EED\u5BF9\u8BDD\uFF0C\u4EFB\u52A1\u5728\u540E\u53F0\u8FD0\u884C\u5B8C\u6210\u540E\u4F1A\u901A\u77E5\u7528\u6237"}),(0,e.jsxs)(Dn.Z,{condition:m,children:[(0,e.jsx)(jn.Z,{className:En(vn["reply-content"]),label:"\u56DE\u590D\u5185\u5BB9"}),(0,e.jsx)(X.Z.TextArea,{className:En("dispose-textarea-count"),classNames:{textarea:En(vn.textarea)},placeholder:"\u60A8\u53EF\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u6D88\u606F\u56DE\u590D,\u4EFB\u52A1\u8FD0\u884C\u65F6\u5C06\u81EA\u52A8\u56DE\u590D,\u6BD4\u5982: \u4EFB\u52A1\u5DF2\u5728\u8FDB\u884C\u4E2D,\u4E00\u65E6\u5B8C\u6210\u6211\u5C06\u7B2C\u4E00\u65F6\u95F4\u5411\u60A8\u62A5\u544A\u7ED3\u679C,\u60A8\u8FD8\u6709\u5176\u4ED6\u9700\u8981\u6211\u534F\u52A9\u7684\u4E8B\u9879\u5417?",autoSize:{minRows:5,maxRows:6},maxLength:1e3,showCount:!0,value:N,onChange:function(V){return I(V.target.value)}}),(0,e.jsx)(Dn.Z,{condition:!N,children:(0,e.jsx)("p",{className:En(vn.tips),children:"\u56DE\u590D\u5185\u5BB9\u5FC5\u987B\u8BBE\u7F6E"})})]})]}),(0,e.jsx)("footer",{className:En(vn.footer),children:(0,e.jsx)(Re.ZP,{type:"primary",onClick:h,loading:c,className:En(_()({},vn["btn-disabled"],A)),disabled:A,children:"\u4FDD\u5B58"})})]})},Mn=Qn,Un=n(3055),_t=n(84896),mt=n(13143),$n={"space-box":"space-box___WAHPn","input-number-arrow":"input-number-arrow___FvcHe","input-disabled":"input-disabled___X0xv_"},ft=T().bind($n),tt=function(r){var l=r.value,i=r.onChange,a=r.placeholder,u=a===void 0?"\u8BF7\u8F93\u5165":a,v=r.min,m=v===void 0?0:v,y=r.max,S=r.step,j=S===void 0?1:S,N=Number(l)===y?$n["input-disabled"]:"",I=Number(l)===m?$n["input-disabled"]:"",L=function(H){var b=H.target.value,V=/^-?\d*(\.\d*)?$/;(V.test(b)||b===""||b==="-")&&i(b)},E=function(H){var b=Math.max(H,m);y&&H>y&&(b=y),j.toString().includes(".")&&(b=parseFloat(b.toFixed(2))),i(b.toString())},c=function(){var H,b=l?.toString()||"0";(b&&b.charAt(b.length-1)==="."||b==="-")&&(b=b.slice(0,-1));var V=(H=b)===null||H===void 0?void 0:H.replace(/0*(\d+)/,"$1");E(Number(V))},B=function(){var H=l?Number(l):0,b=H+j;E(b)},A=function(){var H=l?Number(l):0,b=H-j;E(b)};return(0,e.jsxs)("div",{className:ft("flex",$n["space-box"]),children:[(0,e.jsx)(X.Z,{rootClassName:ft("flex-1"),placeholder:u,value:l,onChange:L,onBlur:c}),(0,e.jsxs)("div",{className:ft("flex","flex-col","content-between",$n["input-number-arrow"]),children:[(0,e.jsx)(_t.Z,{className:ft("cursor-pointer",N),onClick:B}),(0,e.jsx)(mt.Z,{className:ft("cursor-pointer",I),onClick:A})]})]})},Rn=tt,ln=n(49528),an=n(45019),bn=n(44689),Wn=[{value:t.Qr.AUTO,label:"\u81EA\u52A8\u8C03\u7528"},{value:t.Qr.ON_DEMAND,label:"\u6309\u9700\u8C03\u7528"},{value:t.Qr.MANUAL,label:"\u624B\u52A8\u9009\u62E9"},{value:t.Qr.MANUAL_ON_DEMAND,label:"\u624B\u52A8\u9009\u62E9+\u6309\u9700\u8C03\u7528"}],lt=[{value:t.Km.No,label:"\u5426"},{value:t.Km.Yes,label:"\u662F"}],da=[{value:t.E8.No,label:"\u5426"},{value:t.E8.Yes,label:"\u662F"}],Hn=[{value:t.kD.MIXED,label:(0,e.jsxs)("span",{className:"flex items-center",children:[(0,e.jsx)("span",{children:"\u6DF7\u5408"}),(0,e.jsx)(oe.Z,{title:"\u7ED3\u5408\u5168\u6587\u68C0\u7D22\u4E0E\u8BED\u4E49\u68C0\u7D22\u7684\u4F18\u52BF,\u5E76\u5BF9\u7ED3\u679C\u8FDB\u884C\u7EFC\u5408\u6392\u5E8F",icon:(0,e.jsx)(bn.Z,{})})]})},{value:t.kD.SEMANTIC,label:(0,e.jsxs)("span",{className:"flex items-center",children:[(0,e.jsx)("span",{children:"\u8BED\u4E49"}),(0,e.jsx)(oe.Z,{title:"\u57FA\u4E8E\u5411\u91CF\u7684\u6587\u672C\u76F8\u5173\u6027\u67E5\u8BE2,\u63A8\u8350\u5728\u9700\u8981\u7406\u89E3\u8BED\u4E49\u5173\u8054\u5EA6\u548C\u8DE8\u8BED\u8A00\u67E5\u8BE2\u7684\u573A\u666F\u4F7F\u7528\u3002",icon:(0,e.jsx)(bn.Z,{})})]})},{value:t.kD.FULL_TEXT,label:(0,e.jsxs)("span",{className:"flex items-center",children:[(0,e.jsx)("span",{children:"\u5168\u6587"}),(0,e.jsx)(oe.Z,{title:"\u4F9D\u8D56\u4E8E\u5173\u952E\u8BCD\u7684\u5168\u6587\u641C\u7D22,\u63A8\u8350\u5728\u641C\u7D22\u5177\u6709\u7279\u5B9A\u540D\u79F0\u3001\u7F29\u5199\u8BCD\u3001\u77ED\u8BED\u6216ID\u7684\u573A\u666F\u4F7F\u7528\u3002",icon:(0,e.jsx)(bn.Z,{})})]})}],xo=[{value:t.E3.DEFAULT,label:"\u9ED8\u8BA4"},{value:t.E3.CUSTOM,label:"\u81EA\u5B9A\u4E49"}],Eo=[{value:an.tJ.SINGLE,label:"\u5355\u5F20\u5361\u7247"},{value:an.tJ.LIST,label:"\u7AD6\u5411\u5217\u8868"}],Ao=[{label:"\u7CBE\u786E\u6A21\u5F0F",value:ln.jD.Precision},{label:"\u5E73\u8861\u6A21\u5F0F",value:ln.jD.Balanced},{label:"\u521B\u610F\u6A21\u5F0F",value:ln.jD.Creative},{label:"\u81EA\u5B9A\u4E49",value:ln.jD.Customization}],_o=_()(_()(_()({},ln.jD.Precision,{temperature:.1,topP:.7}),ln.jD.Balanced,{temperature:1,topP:.7}),ln.jD.Creative,{temperature:1,topP:.8}),wi=[{value:an.HD.Tenant,label:"\u5168\u5C40"},{value:an.HD.Space,label:"\u5DE5\u4F5C\u7A7A\u95F4"}],Wa=[{value:t.oI.Text,label:"\u5355\u884C\u6587\u672C"},{value:t.oI.Paragraph,label:"\u6BB5\u843D"},{value:t.oI.Number,label:"\u6570\u5B57"},{value:t.oI.Select,label:"\u5355\u9009"},{value:t.oI.MultipleSelect,label:"\u591A\u9009"},{value:t.oI.AutoRecognition,label:"\u667A\u80FD\u8BC6\u522B"}],So={options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",children:[]}]}]},Oi=null,yo=[{value:t._A.Question,label:"\u95EE\u9898\u5F15\u5BFC"},{value:t._A.Page,label:"\u6269\u5C55\u9875\u9762\u8DEF\u5F84"},{value:t._A.Link,label:"\u5916\u94FE\u5730\u5740"}],Qa=[{value:t.ZE.Page,label:"\u6269\u5C55\u9875\u9762\u6253\u5F00"},{value:t.ZE.Link,label:"\u5916\u90E8\u94FE\u63A5\u8DF3\u8F6C"}],jo=[{value:t.BV.Edit,label:"\u7F16\u8F91"},{value:t.BV.InsertSystemPrompt,label:"\u63D2\u5165\u5230\u7CFB\u7EDF\u63D0\u793A\u8BCD"},{value:t.BV.Delete,label:"\u5220\u9664"}],bo=[{value:t.Gw.No,label:"\u5426"},{value:t.Gw.Yes,label:"\u662F"}],Do=[{value:t.PT.No,label:"\u5426"},{value:t.PT.Yes,label:"\u662F"}],ca=n(26324),An=n(28190),st=n(51430),ya=n(17701),ja=n(29328),ba=n(70183),qt={"space-box":"space-box___KVU7O","radius-number":"radius-number___pKpEO","link-switch":"link-switch___BekgU",footer:"footer___xsshb"},St=T().bind(qt),Fo=function(r){var l,i,a=r.componentInfo,u=r.cardInfo,v=r.onSaveSet,m=(0,o.useState)(an.tJ.SINGLE),y=s()(m,2),S=y[0],j=y[1],N=(0,o.useState)("5"),I=s()(N,2),L=I[0],E=I[1],c=(0,o.useState)(""),B=s()(c,2),A=B[0],h=B[1],H=(0,o.useState)([]),b=s()(H,2),V=b[0],ve=b[1],f=(0,o.useState)(!1),re=s()(f,2),Ie=re[0],sn=re[1],ze=(0,o.useState)([]),ee=s()(ze,2),me=ee[0],Je=ee[1],Qe=(0,o.useState)(!1),z=s()(Qe,2),K=z[0],Le=z[1],Ze=(0,o.useState)(!1),Ye=s()(Ze,2),He=Ye[0],Se=Ye[1],xe=(0,o.useState)(""),ie=s()(xe,2),tn=ie[0],In=ie[1],Bn=(0,o.useState)(!1),nn=s()(Bn,2),Ge=nn[0],pn=nn[1],ye=a==null||(l=a.bindConfig)===null||l===void 0?void 0:l.outputArgBindConfigs,de=a==null||(i=a.bindConfig)===null||i===void 0?void 0:i.cardBindConfig;(0,o.useEffect)(function(){if(S===an.tJ.LIST){var R=_e()(ye),G=(0,kn.Lg)(R),$=(0,kn.y7)(G);ve($)}},[ye,S]),(0,o.useEffect)(function(){if(de&&u?.id===de.cardId){var R;if(j(de.bindCardStyle),E(de?.maxCardCount||"5"),h(de?.bindArray),de!=null&&de.bindLinkUrl&&(Se(!0),In(de?.bindLinkUrl)),de!=null&&(R=de.cardArgsBindConfigs)!==null&&R!==void 0&&R.length){var G,$=de==null||(G=de.cardArgsBindConfigs)===null||G===void 0?void 0:G.map(function(W){var be,Be=(u==null||(be=u.argList)===null||be===void 0||(be=be.find(function(Ve){return Ve.key===W.key}))===null||be===void 0?void 0:be.placeholder)||"";return{key:W.key,cardKey:W.bindValue,placeholder:Be}});Je($)}}else j(an.tJ.SINGLE),h(""),E("5"),Se(!1),In(""),Je(u?.argList||[])},[u,de]);var ce=(0,o.useMemo)(function(){var R=_e()(ye);if(S===an.tJ.SINGLE)return(0,kn.k$)(R);var G;return A?((G=(0,kn.DY)(R,A))===null||G===void 0?void 0:G.subArgs)||[]:[]},[ye,S,A]),hn=function(G){var $=G.target.value;j($),Se(!1),In(""),Je(u?.argList||[])},ne=function(G,$){var W=$.node;h(String(W.key)),sn(!1)},Ue=function(G,$){var W=_e()(me);W[G].open=$,Je(W)},je=function(G,$){var W=_e()(me);W[G].open=!1,W[G].cardKey=$?.key||"",Je(W)},Ee=function(G){Se(G),G||In("")},mn=function(){var R=J()(q()().mark(function G(){var $,W,be,Be;return q()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return $=me?.map(function(Tn){return{key:Tn.key,bindValue:Tn?.cardKey||""}}),W={cardId:u?.id,cardKey:u?.cardKey,bindCardStyle:S,cardArgsBindConfigs:$,bindLinkUrl:tn},be=S===an.tJ.SINGLE?W:C()(C()({},W),{},{maxCardCount:L,bindArray:A}),Be={cardBindConfig:be},pn(!0),De.next=7,v(Be);case 7:pn(!1);case 8:case"end":return De.stop()}},G)}));return function(){return R.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:St("flex-1","flex","flex-col"),children:[(0,e.jsxs)(An.Z,{layout:"vertical",preserve:!1,rootClassName:St("flex-1"),requiredMark:ca.N,children:[(0,e.jsx)(An.Z.Item,{label:"\u9009\u62E9\u5361\u7247\u6837\u5F0F",children:(0,e.jsx)(st.ZP.Group,{onChange:hn,value:S,options:Eo})}),S===an.tJ.LIST&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(An.Z.Item,{label:(0,e.jsx)(jn.Z,{label:"\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6"}),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6"}],children:(0,e.jsx)(Rn,{value:L,onChange:function(G){return E(G)},placeholder:"\u8BF7\u8F93\u5165\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6",max:20,min:1})}),(0,e.jsx)(An.Z.Item,{label:"\u4E3A\u5361\u7247\u6574\u4F53\u7ED1\u5B9A\u4E00\u4E2A\u6570\u7EC4",children:(0,e.jsx)(ya.default,{allowClear:!0,onClear:function(){h(""),sn(!1)},popupMatchSelectWidth:!1,open:Ie,value:A||null,onDropdownVisibleChange:function(G){sn(G)},onClick:function(){return sn(!0)},placeholder:"\u8BF7\u4E3A\u5361\u7247\u6574\u4F53\u7ED1\u5B9A\u4E00\u4E2A\u6570\u7EC4",popupRender:function(){return V?.length>0?(0,e.jsx)(ja.Z,{treeData:V,height:300,blockNode:!0,defaultExpandAll:!0,onClick:function($){$.stopPropagation()},onSelect:ne,fieldNames:{title:"name",key:"key",children:"subArgs"}}):(0,e.jsx)(ba.Z,{description:"\u6682\u65E0\u6570\u636E"})}})})]}),(0,e.jsx)(An.Z.Item,{label:"\u4E3A\u5361\u7247\u5185\u7684\u5217\u8868\u9879\u7ED1\u5B9A\u6570\u636E",children:me?.map(function(R,G){return(0,e.jsx)(An.Z.Item,{className:St("mb-16"),children:(0,e.jsxs)("div",{className:St("flex","items-center",qt["space-box"]),children:[(0,e.jsx)("span",{className:St(qt["radius-number"]),children:G+1}),(0,e.jsx)(ya.default,{allowClear:!0,onClear:function(){return je(G)},rootClassName:St("flex-1"),popupMatchSelectWidth:!1,disabled:S===an.tJ.LIST&&!A,open:!!R?.open,value:R?.cardKey||null,onDropdownVisibleChange:function(W){return Ue(G,W)},onClick:function(){return Ue(G,!0)},popupRender:function(){return ce?.length>0?(0,e.jsx)(ja.Z,{treeData:ce,height:300,blockNode:!0,defaultExpandAll:!0,onClick:function(be){be.stopPropagation()},onSelect:function(be,Be){var Ve=Be.node;return je(G,Ve)},fieldNames:{title:"name",key:"key",children:"subArgs"}}):(0,e.jsx)(ba.Z,{description:"\u6682\u65E0\u6570\u636E"})},placeholder:R.placeholder||"\u8BF7\u9009\u62E9"})]})},R.key)})}),(0,e.jsxs)(An.Z.Item,{label:"\u70B9\u51FB\u5361\u7247\u8DF3\u8F6C",tooltip:{title:"\u7ED1\u5B9A\u540E\uFF0C\u7528\u6237\u5728\u667A\u80FD\u4F53\u5BF9\u8BDD\u6D41\u4E2D\u70B9\u51FB \u5361\u7247\u53EF\u8DF3\u8F6C\u81F3\u5176\u4ED6\u9875\u9762",icon:(0,e.jsx)(bn.Z,{})},children:[(0,e.jsx)(wn.Z,{className:St(qt["link-switch"]),disabled:!(ce!=null&&ce.length),size:"small",checked:He,onChange:Ee}),(0,e.jsx)(Dn.Z,{condition:He,children:(0,e.jsx)(ya.default,{allowClear:!0,onClear:function(){In(""),Le(!1)},rootClassName:St("flex-1"),popupMatchSelectWidth:!1,open:K,value:tn||null,onDropdownVisibleChange:function(G){return Le(G)},onClick:function(){return Le(!0)},popupRender:function(){return(0,e.jsx)(ja.Z,{treeData:ce,height:300,blockNode:!0,defaultExpandAll:!0,onClick:function($){$.stopPropagation()},onSelect:function($,W){var be=W.node;In(be.key),Le(!1)},fieldNames:{title:"name",key:"key",children:"subArgs"}})},placeholder:"\u4E3Aurl\u9009\u62E9\u6570\u636E\u6765\u6E90"})})]})]}),(0,e.jsx)("footer",{className:St(qt.footer),children:(0,e.jsx)(Re.ZP,{type:"primary",onClick:mn,loading:Ge,children:"\u4FDD\u5B58"})})]})},Io=Fo,Da={"card-box":"card-box___L2_At",radio:"radio___oRbG0"},Fa=T().bind(Da),No=function(r){var l=r.cardKey,i=r.list,a=r.onChoose;return(0,e.jsx)("div",{className:Fa("h-full","overflow-y"),children:i?.map(function(u){return(0,e.jsxs)("div",{className:Fa(Da["card-box"],"flex","hover-box","cursor-pointer"),onClick:function(){return a(u)},children:[(0,e.jsx)("img",{className:"radius-6",src:u.imageUrl,alt:""}),(0,e.jsx)(st.ZP,{checked:u.cardKey===l,className:Fa(Da.radio)})]},u.id)})})},Bo=No,va={"xagi-nav-style2":"xagi-nav-style2___T7zkB",text:"text___QIxvP","page-container":"page-container___AK9tx",container:"container___KJPJn",title:"title___J7PRF"},kt=T().bind(va),Po=function(r){var l=r.loading,i=r.agentCardList,a=r.componentInfo,u=r.onSaveSet,v=(0,o.useState)(),m=s()(v,2),y=m[0],S=m[1];return(0,o.useEffect)(function(){var j,N=a==null||(j=a.bindConfig)===null||j===void 0||(j=j.cardBindConfig)===null||j===void 0?void 0:j.cardId;S(N?i.find(function(I){return I.id===N}):i[0])},[i,a]),(0,e.jsx)("div",{className:kt("flex","h-full",va.container),children:l?(0,e.jsx)(Un.Z,{className:kt("h-full")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:kt("flex-1","px-16","py-16"),children:[(0,e.jsx)("h3",{className:kt(va.title),children:"\u9009\u62E9\u5361\u7247\u6837\u5F0F"}),(0,e.jsx)(Bo,{cardKey:y?.cardKey,list:i,onChoose:S})]}),(0,e.jsxs)("div",{className:kt("flex-1","flex","flex-col","px-16","py-16"),children:[(0,e.jsx)("h3",{className:kt(va.title),children:"\u4E3A\u5361\u7247\u7ED1\u5B9A\u6570\u636E\u6E90"}),(0,e.jsx)(Io,{cardInfo:y,componentInfo:a,onSaveSet:u})]})]})})},To=Po,Dt={"xagi-nav-style2":"xagi-nav-style2___xErq3",text:"text___Jldky","page-container":"page-container___XNHR8",container:"container___f5OC_",header:"header____Mhqp",desc:"desc___zrBqq","reply-content":"reply-content___e4lnw",textarea:"textarea___I5Ny2",tips:"tips___gxuIs",footer:"footer___v3HYH","btn-disabled":"btn-disabled___pDNWH"},gt=T().bind(Dt),Mo=function(r){var l=r.exceptionOut,i=r.fallbackMsg,a=r.onSaveSet,u=(0,o.useState)(),v=s()(u,2),m=v[0],y=v[1],S=(0,o.useState)(""),j=s()(S,2),N=j[0],I=j[1],L=(0,o.useState)(!1),E=s()(L,2),c=E[0],B=E[1];(0,o.useEffect)(function(){I(i||""),y(l||t.Km.No)},[l,i]);var A=(0,o.useMemo)(function(){return m===t.Km.Yes&&!N},[m,N]),h=function(){var b=J()(q()().mark(function V(){var ve;return q()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return ve={exceptionOut:m,fallbackMsg:N},B(!0),re.next=4,a(ve);case 4:B(!1);case 5:case"end":return re.stop()}},V)}));return function(){return b.apply(this,arguments)}}(),H=function(V){var ve=V?t.Km.Yes:t.Km.No;y(ve)};return(0,e.jsxs)("div",{className:gt("flex","flex-col","h-full",Dt.container),children:[(0,e.jsxs)("div",{className:gt("flex-1"),children:[(0,e.jsxs)("header",{className:gt("flex","items-center",Dt.header),children:[(0,e.jsx)("div",{className:gt("flex-1"),children:"\u5F02\u5E38\u65F6\u4E2D\u65AD\u6D41\u7A0B"}),(0,e.jsx)(wn.Z,{checked:m===t.Km.Yes,onChange:H})]}),(0,e.jsx)("p",{className:gt(Dt.desc),children:"\u5F02\u5E38\u65F6\u8F93\u51FA\u7ED9\u5927\u6A21\u578B\u7684\u9ED8\u8BA4\u4FE1\u606F"}),(0,e.jsxs)(Dn.Z,{condition:m,children:[(0,e.jsx)(jn.Z,{className:gt(Dt["reply-content"]),label:"\u9ED8\u8BA4\u4FE1\u606F"}),(0,e.jsx)(X.Z.TextArea,{className:gt("dispose-textarea-count"),classNames:{textarea:gt(Dt.textarea)},placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u65F6\u8F93\u51FA\u7ED9\u5927\u6A21\u578B\u7684\u9ED8\u8BA4\u4FE1\u606F",autoSize:{minRows:5,maxRows:6},maxLength:1e3,showCount:!0,value:N,onChange:function(V){return I(V.target.value)}})]})]}),(0,e.jsx)("footer",{className:gt(Dt.footer),children:(0,e.jsx)(Re.ZP,{type:"primary",onClick:h,loading:c,className:gt(_()({},Dt["btn-disabled"],A)),disabled:A,children:"\u4FDD\u5B58"})})]})},Ro=Mo,Ft={"xagi-nav-style2":"xagi-nav-style2___jGSEw",text:"text___kxX4U","page-container":"page-container___x6Z85","modal-container":"modal-container___DIR0N",container:"container___jZY5S",left:"left___zfIP5",item:"item___kItJN",checked:"checked___Q1XQY",right:"right___AZIcw",close:"close___bZkPm"},Ha=n(20860),ma={"xagi-nav-style2":"xagi-nav-style2___un28i",text:"text___jZkxu","page-container":"page-container___FCTEI",container:"container___n6D12",icon:"icon___CDvAh",footer:"footer___bl30K"},Vt=T().bind(ma),Lo=function(r){var l=r.invokeType,i=r.onSaveSet,a=r.defaultSelected,u=(0,o.useState)(),v=s()(u,2),m=v[0],y=v[1],S=(0,o.useState)(t.Km.No),j=s()(S,2),N=j[0],I=j[1],L=(0,o.useState)(!1),E=s()(L,2),c=E[0],B=E[1];(0,o.useEffect)(function(){y(l||t.Qr.AUTO),I(a||t.Km.No)},[l,a]);var A=function(b){var V=b.target.value;y(V)},h=function(){var H=J()(q()().mark(function b(){var V;return q()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return V={invokeType:m,defaultSelected:N},B(!0),f.next=4,i(V);case 4:B(!1);case 5:case"end":return f.stop()}},b)}));return function(){return H.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:Vt(ma.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:Vt("flex-1"),children:[(0,e.jsxs)("h3",{className:Vt("gap-6","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u8C03\u7528\u65B9\u5F0F"}),(0,e.jsx)(On.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:"\u81EA\u52A8\u8C03\u7528\uFF1A\u7528\u6237\u6BCF\u6B21\u53D1\u9001\u6D88\u606F\u540E\u90FD\u4F1A\u89E6\u53D1\u8C03\u7528\u4E00\u6B21"}),(0,e.jsx)("p",{children:"\u6309\u9700\u8C03\u7528\uFF1A\u7531\u6A21\u578B\u6839\u636E\u4EFB\u52A1\u60C5\u51B5\u51B3\u5B9A\u662F\u5426\u9700\u8981\u8C03\u7528"}),(0,e.jsx)("p",{children:"\u624B\u52A8\u9009\u62E9\uFF1A\u7531\u7528\u6237\u51B3\u5B9A\u662F\u5426\u4F7F\u7528\u8BE5\u5DE5\u5177\uFF0C\u5728\u7528\u6237\u9009\u62E9\u7684\u60C5\u51B5\u4E0B\u548C\u81EA\u52A8\u8C03\u7528\u6548\u679C\u4E00\u6837"}),(0,e.jsx)("p",{children:"\u624B\u52A8\u9009\u62E9+\u6309\u9700\u8C03\u7528\uFF1A\u7528\u6237\u9009\u62E9\u540E\uFF0C\u7531\u6A21\u578B\u6839\u636E\u4EFB\u52A1\u60C5\u51B5\u9009\u62E9\u662F\u5426\u9700\u8981\u8C03\u7528\uFF1B\u7528\u6237\u4E0D\u9009\u62E9\u5219\u4E0D\u4F1A\u8C03\u7528"})]}),children:(0,e.jsx)(Ha.Z,{className:Vt(ma.icon)})})]}),(0,e.jsx)(st.ZP.Group,{options:Wn,onChange:A,value:m}),(0,e.jsxs)(Dn.Z,{condition:m===t.Qr.MANUAL||m===t.Qr.MANUAL_ON_DEMAND,children:[(0,e.jsx)("h3",{className:Vt("mt-16"),children:"\u662F\u5426\u9ED8\u8BA4\u9009\u4E2D"}),(0,e.jsx)(st.ZP.Group,{options:lt,onChange:function(b){return I(b.target.value)},value:N})]})]}),(0,e.jsx)("footer",{className:Vt(ma.footer),children:(0,e.jsx)(Re.ZP,{type:"primary",onClick:h,loading:c,children:"\u4FDD\u5B58"})})]})},Zo=(0,o.memo)(Lo),fa={"xagi-nav-style2":"xagi-nav-style2___E4WCM",text:"text___BTc0l","page-container":"page-container___aRrpX",container:"container___IwVbE",icon:"icon___yZKCd",footer:"footer___gT5kO"},ea=T().bind(fa),wo=function(r){var l=r.directOutput,i=r.onSaveSet,a=(0,o.useState)(),u=s()(a,2),v=u[0],m=u[1],y=(0,o.useState)(!1),S=s()(y,2),j=S[0],N=S[1];(0,o.useEffect)(function(){m(l||t.E8.No)},[l]);var I=function(c){var B=c.target.value;m(B)},L=function(){var E=J()(q()().mark(function c(){var B;return q()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return B={directOutput:v},N(!0),h.next=4,i(B);case 4:N(!1);case 5:case"end":return h.stop()}},c)}));return function(){return E.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:ea(fa.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:ea("flex-1"),children:[(0,e.jsxs)("h3",{className:ea("gap-6","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u662F\u5426\u76F4\u63A5\u8F93\u51FA"}),(0,e.jsx)(On.Z,{title:"\u5982\u679C\u9009\u62E9\u201C\u662F\u201D\uFF0C\u5C06\u4F1A\u628A\u5DE5\u4F5C\u6D41\u8FD0\u884C\u7ED3\u679C\u76F4\u63A5\u8F93\u51FA\u5230\u4F1A\u8BDD\u6846\u4E2D\uFF0C\u4E0D\u4F1A\u518D\u7ECF\u8FC7\u5927\u6A21\u578B\u603B\u7ED3\u8F93\u51FA\u3002",children:(0,e.jsx)(Ha.Z,{className:ea(fa.icon)})})]}),(0,e.jsx)(st.ZP.Group,{options:da,onChange:I,value:v})]}),(0,e.jsx)("footer",{className:ea(fa.footer),children:(0,e.jsx)(Re.ZP,{type:"primary",onClick:L,loading:j,children:"\u4FDD\u5B58"})})]})},Oo=(0,o.memo)(wo),Kt=T().bind(Ft),Uo=function(r){var l=r.open,i=r.currentComponentInfo,a=r.devConversationId,u=r.variables,v=r.onCancel,m=r.settingActionList,y=m===void 0?_n.a$:m,S=(0,o.useState)(d.wQ.Params),j=s()(S,2),N=j[0],I=j[1],L=(0,o.useState)(),E=s()(L,2),c=E[0],B=E[1],A=(0,o.useState)(!1),h=s()(A,2),H=h[0],b=h[1],V=(0,o.useState)([]),ve=s()(V,2),f=ve[0],re=ve[1],Ie=(0,Ae.useModel)("spaceAgent"),sn=Ie.setAgentComponentList,ze=(0,Ae.useModel)("conversationInfo"),ee=ze.runQueryConversation;(0,o.useEffect)(function(){I(d.wQ.Params),B(i)},[i]);var me={manual:!0,debounceWait:300},Je=(0,Fn.Z)(p.Cd,me),Qe=Je.runAsync,z=(0,Fn.Z)(p.ao,me),K=z.runAsync,Le=(0,Fn.Z)(p.M8,me),Ze=Le.runAsync,Ye=(0,Fn.Z)(p.Nc,me),He=Ye.runAsync,Se=(0,Fn.Z)(p.P4,C()(C()({},me),{},{onSuccess:function(nn){var Ge=nn.data;Ge!=null&&Ge.length&&re(Ge),b(!1)},onError:function(){b(!1)}})),xe=Se.run;(0,o.useEffect)(function(){b(!0),xe()},[]);var ie=function(){var Bn=J()(q()().mark(function nn(Ge){return q()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(c?.type!==t.qR.Plugin){ye.next=3;break}return ye.next=3,Qe(Ge);case 3:if(c?.type!==t.qR.Workflow){ye.next=6;break}return ye.next=6,K(Ge);case 6:if(c?.type!==t.qR.Table){ye.next=9;break}return ye.next=9,Ze(Ge);case 9:if(c?.type!==t.qR.MCP){ye.next=12;break}return ye.next=12,He(Ge);case 12:case"end":return ye.stop()}},nn)}));return function(Ge){return Bn.apply(this,arguments)}}(),tn=function(){var Bn=J()(q()().mark(function nn(Ge,pn,ye){var de,ce,hn;return q()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return de=c?.id||0,ce=Ge??{},hn=C()({id:de,bindConfig:C()(C()({},c?.bindConfig),ce)},pn||{}),Ue.next=5,ie(hn);case 5:ye===d.wQ.Method_Call&&a&&ee(a),B(function(je){return je&&("bindConfig"in je&&(je.bindConfig=C()(C()({},je.bindConfig),ce)),pn&&(je.exceptionOut=pn.exceptionOut,je.fallbackMsg=pn.fallbackMsg)),je}),sn(function(je){return je.map(function(Ee){return Ee.id===de&&(Ee.bindConfig=C()(C()({},Ee.bindConfig),ce),pn&&(Ee.exceptionOut=pn.exceptionOut,Ee.fallbackMsg=pn.fallbackMsg)),Ee})}),cn.ZP.success("\u4FDD\u5B58\u6210\u529F");case 9:case"end":return Ue.stop()}},nn)}));return function(Ge,pn,ye){return Bn.apply(this,arguments)}}(),In=function(){var nn,Ge,pn,ye,de,ce;switch(N){case d.wQ.Params:return(0,e.jsx)(Vn.Z,{variables:u||[],inputArgBindConfigs:c==null||(nn=c.bindConfig)===null||nn===void 0?void 0:nn.inputArgBindConfigs,onSaveSet:tn});case d.wQ.Method_Call:return(0,e.jsx)(Zo,{invokeType:c==null||(Ge=c.bindConfig)===null||Ge===void 0?void 0:Ge.invokeType,defaultSelected:c==null||(pn=c.bindConfig)===null||pn===void 0?void 0:pn.defaultSelected,onSaveSet:function(ne){return tn(ne,null,N)}});case d.wQ.Output_Way:return(0,e.jsx)(Oo,{directOutput:c==null||(ye=c.bindConfig)===null||ye===void 0?void 0:ye.directOutput,onSaveSet:tn});case d.wQ.Async_Run:return(0,e.jsx)(Mn,{async:c==null||(de=c.bindConfig)===null||de===void 0?void 0:de.async,asyncReplyContent:c==null||(ce=c.bindConfig)===null||ce===void 0?void 0:ce.asyncReplyContent,onSaveSet:tn});case d.wQ.Exception_Handling:return(0,e.jsx)(Ro,{exceptionOut:c?.exceptionOut||t.Km.No,fallbackMsg:c?.fallbackMsg||"",onSaveSet:function(ne){return tn(null,ne)}});case d.wQ.Card_Bind:return(0,e.jsx)(To,{loading:H,agentCardList:f,componentInfo:c,onSaveSet:tn})}};return(0,e.jsx)(Xn.Z,{centered:!0,open:l,onCancel:v,destroyOnHidden:!0,className:Kt(Ft["modal-container"]),modalRender:function(){return(0,e.jsxs)("div",{className:Kt(Ft.container,"flex","overflow-hide"),children:[(0,e.jsxs)("div",{className:Kt(Ft.left),children:[(0,e.jsx)("h3",{children:"\u8BBE\u7F6E"}),(0,e.jsx)("ul",{children:y.map(function(nn){return i?.type===t.qR.Table&&[d.wQ.Method_Call,d.wQ.Async_Run,d.wQ.Exception_Handling].includes(nn.type)||i?.type!==t.qR.Workflow&&nn.type===d.wQ.Output_Way?null:(0,e.jsx)("li",{className:Kt(Ft.item,"cursor-pointer",_()({},Ft.checked,N===nn.type)),onClick:function(){return I(nn.type)},children:nn.label},nn.type)})})]}),(0,e.jsx)("div",{className:Kt("flex-1",Ft.right),children:In()}),(0,e.jsx)(vt.Z,{className:Kt(Ft.close,"cursor-pointer"),onClick:v})]})}})},ko=Uo,Ia={"xagi-nav-style2":"xagi-nav-style2___D_5gS",text:"text___lu863","page-container":"page-container___6T91q",container:"container___n4vwB",title:"title___jfALi"},Ga=T().bind(Ia),Vo=function(r){var l=r.children,i=r.title;return(0,e.jsxs)("div",{className:Ga(Ia.container,"flex","content-between","items-center"),children:[(0,e.jsx)("p",{className:Ga(Ia.title),children:i}),l]})},na=Vo,za=n(84411),Ja=n(89858),Ya=n(16621),qn=n(43183),Xa=n(75994),pt=n(71691),$a=n(78434),Ko=n(7010),Na=n(10580),ot=n(92448),Ba=n(48279),Wo=n(47548),Qo=n(43898),qa=o.createContext({}),Ho=function(){var r=(0,o.useContext)(qa),l=r.setActivatorNodeRef,i=r.listeners;return(0,e.jsx)(Re.ZP,C()({type:"text",size:"small",icon:(0,e.jsx)(za.Z,{}),style:{cursor:"move"},ref:l},i))},Go=function(r){var l=r.id,i=r.value,a=r.onChange,u=r.onDelete,v=(0,pt.nB)({id:l}),m=v.attributes,y=v.listeners,S=v.setNodeRef,j=v.setActivatorNodeRef,N=v.transform,I=v.transition,L=v.isDragging,E={transform:$a.ux.Translate.toString(N),transition:I,zIndex:L?10:1,opacity:L?.8:1,paddingRight:"10px"},c=(0,o.useMemo)(function(){return{setActivatorNodeRef:j,listeners:y,attributes:m}},[j,y,m]);return(0,e.jsx)(qa.Provider,{value:c,children:(0,e.jsx)("div",{ref:S,style:E,className:"flex items-center gap-10",children:(0,e.jsx)(X.Z,{onChange:a,defaultValue:i,prefix:(0,e.jsx)(Ho,{}),suffix:(0,e.jsx)(gn.Z,{onClick:u})})})})},zo=Go,ta={"xagi-nav-style2":"xagi-nav-style2___Vw_lu",text:"text___DpIqc","page-container":"page-container___BZYHH","modal-body-container":"modal-body-container___iqS7z","radio-group":"radio-group___uJ5NF",tab:"tab___iCYZL","add-item-btn":"add-item-btn___ok9vO"},It={"xagi-nav-style2":"xagi-nav-style2___Fb04i",text:"text___gZ17y","page-container":"page-container___bO5a2","bind-box":"bind-box___RRQok","component-image":"component-image___tjc0T","example-box":"example-box___m9xlQ","e-header":"e-header___lPvLG",icon:"icon___RW1tv","icon-rotate":"icon-rotate___zDrWT","rotate-box":"rotate-box___BOAGL"},Nt=T().bind(It),Jo=function(r){var l=r.selectConfig,i=r.targetComponentInfo,a=r.onClick,u=o.useState(!0),v=s()(u,2),m=v[0],y=v[1],S=l||{},j=S.targetType,N=S.targetName,I=S.targetIcon,L=[i?.targetType,j].includes(t.qR.Plugin)?rn:dn;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Nt(It["bind-box"],"mb-16"),children:!i&&!N?(0,e.jsx)("div",{className:Nt("flex","items-center","content-center","h-full","cursor-pointer"),onClick:a,children:"\u8BF7\u9009\u62E9\u7B26\u5408\u6570\u636E\u89C4\u8303\u7684\u63D2\u4EF6\u6216\u5DE5\u4F5C\u6D41"}):(0,e.jsxs)("div",{className:Nt("flex","items-center","h-full","cursor-pointer","px-16","gap-10"),onClick:a,children:[(0,e.jsx)("img",{className:Nt(It["component-image"],"radius-6"),src:i?.icon||I||L,alt:""}),(0,e.jsx)("span",{children:i?.name||N})]})}),(0,e.jsxs)("div",{className:Nt(It["example-box"]),children:[(0,e.jsxs)("div",{className:Nt("flex","items-center","content-between","cursor-pointer",It["e-header"]),onClick:function(){return y(!m)},children:[(0,e.jsx)("span",{children:"\u63D2\u4EF6\u6216\u5DE5\u4F5C\u6D41\u8FD4\u56DE\u6570\u636E\u7ED3\u6784\u4EE5\u53CA\u793A\u4F8B"}),(0,e.jsx)(mt.Z,{className:Nt(It.icon,_()({},It["icon-rotate"],!m))})]}),(0,e.jsxs)("div",{className:Nt(_()({},It["rotate-box"],m)),children:[(0,e.jsx)("p",{children:"//options \u9009\u9879\u5217\u8868\uFF1B"}),(0,e.jsx)("p",{children:"//value\uFF1A\u9009\u9879\u503C\uFF1Blabel\u9009\u9879\u540D\u79F0\uFF1Bchildren\u4E0B\u7EA7\u9009\u9879"}),(0,e.jsx)("pre",{children:(0,e.jsx)("code",{children:JSON.stringify(So,null,2)})})]})]})]})},Yo=Jo,Wt=T().bind(ta),Xo=function(r){var l=r.mode,i=l===void 0?D.jA.Create:l,a=r.currentVariable,u=r.id,v=r.targetId,m=r.inputData,y=r.open,S=r.onCancel,j=r.onConfirm,N=An.Z.useForm(),I=s()(N,1),L=I[0],E=(0,o.useState)(t.oI.Text),c=s()(E,2),B=c[0],A=c[1],h=(0,o.useState)(t.z1.MANUAL),H=s()(h,2),b=H[0],V=H[1],ve=(0,o.useState)([{id:(0,ot.Z)(),value:"",label:""},{id:(0,ot.Z)(),value:"",label:""}]),f=s()(ve,2),re=f[0],Ie=f[1],sn=(0,o.useState)(""),ze=s()(sn,2),ee=ze[0],me=ze[1],Je=(0,o.useState)(!1),Qe=s()(Je,2),z=Qe[0],K=Qe[1],Le=(0,o.useState)([]),Ze=s()(Le,2),Ye=Ze[0],He=Ze[1],Se=(0,o.useState)(null),xe=s()(Se,2),ie=xe[0],tn=xe[1],In=(0,o.useRef)([]),Bn=(0,o.useState)(!1),nn=s()(Bn,2),Ge=nn[0],pn=nn[1];(0,o.useEffect)(function(){if(y){if(tn(null),i===D.jA.Create)A(t.oI.Text),L.setFieldValue("inputType",t.oI.Text),He([]),V(t.z1.MANUAL),Ie([{id:(0,ot.Z)(),value:"",label:""},{id:(0,ot.Z)(),value:"",label:""}]),me("");else if(i===D.jA.Update&&a){var $=a.name,W=a.displayName,be=a.require,Be=a.inputType,Ve=a.description,De=a.selectConfig,Tn=a.bindValue;if(A(Be),V(De?.dataSourceType),De?.dataSourceType===t.z1.BINDING)He([{type:De?.targetType,targetId:De?.targetId,status:t.BQ.Added}]),Ie([{id:(0,ot.Z)(),value:"",label:""},{id:(0,ot.Z)(),value:"",label:""}]);else{var we;if(He([]),De&&(De==null||(we=De.options)===null||we===void 0?void 0:we.length)>0){var Xe;Ie((De==null||(Xe=De.options)===null||Xe===void 0?void 0:Xe.map(function(Sn){return C()(C()({},Sn),{},{id:(0,ot.Z)()})}))||[])}}me(Tn||""),L.setFieldsValue({name:$,displayName:W,require:be,inputType:Be,description:Ve})}}},[y,i,a]);var ye=(0,qn.Dy)((0,qn.VT)(qn.we),(0,qn.VT)(qn.Lg,{coordinateGetter:pt.is})),de=function(W){var be=W.active,Be=W.over;Be&&be.id!==Be.id&&Ie(function(Ve){var De=Ve.findIndex(function(we){return we.id===be.id}),Tn=Ve.findIndex(function(we){return we.id===Be.id});return(0,pt.Rp)(Ve,De,Tn)})},ce=function(W){Ie(function(be){return be.filter(function(Be){return Be.id!==W})})},hn=function(){Ie(function(W){return[].concat(w()(W),[{id:(0,ot.Z)(),value:"",label:""}])})},ne=function(W,be){var Be=W.target.value;Ie(function(Ve){var De=w()(Ve),Tn=De.findIndex(function(we){return we.id===be});return Tn!==-1&&(De[Tn].value=Be,De[Tn].label=Be),De})},Ue=function(W){var be=W.targetId,Be=W.targetType;tn(W),He([{type:Be,targetId:be,status:t.BQ.Added}])},je=[{key:t.z1.MANUAL,label:"\u624B\u52A8\u521B\u5EFA",children:(0,e.jsxs)("div",{className:Wt("flex","flex-col","gap-10"),children:[(0,e.jsx)(qn.LB,{modifiers:[Xa.DL],sensors:ye,collisionDetection:qn.pE,onDragEnd:de,children:(0,e.jsx)(pt.Fo,{items:re.map(function($){return $.id}),strategy:pt.qw,children:re?.map(function($){var W=$.id,be=$.value;return(0,e.jsx)(zo,{id:W,value:be,onChange:function(Ve){return ne(Ve,W)},onDelete:function(){return ce(W)}},W)})})}),(0,e.jsxs)("div",{className:Wt(ta["add-item-btn"]),onClick:hn,children:[(0,e.jsx)(Ya.Z,{}),"\u6DFB\u52A0\u9009\u9879"]})]})},{key:t.z1.BINDING,label:"\u6570\u636E\u7ED1\u5B9A",children:(0,e.jsx)(Yo,{selectConfig:a?.selectConfig,targetComponentInfo:ie,onClick:function(){return K(!0)}})}],Ee=(0,Ae.useRequest)(p.D$,{manual:!0,debounceInterval:300,onSuccess:function(){pn(!1),cn.ZP.success("\u53D8\u91CF\u66F4\u65B0\u6210\u529F"),j(In.current)},onError:function(){pn(!1)}}),mn=Ee.run,R=function(W){var be=null,Be=ee;if([t.oI.Select,t.oI.MultipleSelect].includes(B)){if(b===t.z1.MANUAL){if(re!=null&&re.length){if(re!=null&&re.some(function(Xe){return!Xe.value})){cn.ZP.error("\u8BF7\u586B\u5199\u9009\u9879\u503C");return}}else{cn.ZP.error("\u8BF7\u6DFB\u52A0\u9009\u9879");return}be={dataSourceType:b,targetType:null,targetId:null,targetName:null,targetIcon:null,targetDescription:null,options:re}}else{var Ve;if(!ie&&!(a!=null&&(Ve=a.selectConfig)!==null&&Ve!==void 0&&Ve.targetId)){cn.ZP.error("\u8BF7\u9009\u62E9\u7ED1\u5B9A\u7EC4\u4EF6");return}be=ie?{dataSourceType:b,targetType:ie?.targetType,targetId:ie?.targetId,targetName:ie?.name,targetIcon:ie?.icon,targetDescription:ie?.description,options:[]}:a?.selectConfig}Be=""}var De=C()(C()({},W),{},{bindValue:Be,systemVariable:!1,selectConfig:be}),Tn;i===D.jA.Update&&a?Tn=m.map(function(Xe){return Xe.key===a.key?C()(C()({},Xe),De):Xe}):Tn=[].concat(w()(m),[C()(C()({},De),{},{key:(0,ot.Z)()})]),In.current=Tn;var we={id:u,targetId:v,bindConfig:{variables:Tn}};pn(!0),mn(we)},G=function(){L.submit()};return(0,e.jsxs)(Ba.Z,{form:L,open:y,loading:Ge,classNames:{body:Wt(ta["modal-body-container"])},title:"\u7F16\u8F91\u6216\u6DFB\u52A0\u53D8\u91CF",onCancel:S,onConfirm:G,children:[(0,e.jsxs)(An.Z,{form:L,preserve:!1,layout:"vertical",requiredMark:ca.N,onFinish:R,autoComplete:"off",children:[(0,e.jsx)(An.Z.Item,{name:"name",label:"\u5B57\u6BB5\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0"}],children:(0,e.jsx)(X.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0\uFF0C\u7B26\u5408\u5B57\u6BB5\u547D\u540D\u89C4\u5212",showCount:!0,maxLength:30})}),(0,e.jsx)(An.Z.Item,{name:"displayName",label:"\u5C55\u793A\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u5C55\u793A\u540D\u79F0"}],children:(0,e.jsx)(X.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u5C55\u793A\u540D\u79F0\uFF0C\u4F9B\u524D\u7AEF\u5C55\u793A\u4F7F\u7528",showCount:!0,maxLength:30})}),(0,e.jsx)(An.Z.Item,{name:"description",label:"\u63CF\u8FF0",children:(0,e.jsx)(X.Z.TextArea,{className:"dispose-textarea-count",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u63CF\u8FF0",showCount:!0,maxLength:200,autoSize:{minRows:3,maxRows:5}})}),(0,e.jsx)(An.Z.Item,{name:"inputType",label:"\u8F93\u5165\u65B9\u5F0F",children:(0,e.jsx)(st.ZP.Group,{className:Wt(ta["radio-group"]),options:Wa,value:B,onChange:function(W){return A(W.target.value)}})}),[t.oI.Select,t.oI.MultipleSelect].includes(B)?(0,e.jsx)(Wo.Z,{rootClassName:Wt(ta.tab),activeKey:b,onChange:function(W){return V(W)},items:je}):(0,e.jsx)(An.Z.Item,{className:Wt("mb-16"),label:"\u9ED8\u8BA4\u503C",children:(0,e.jsx)(X.Z.TextArea,{value:ee,onChange:function(W){return me(W.target.value)},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",autoSize:{minRows:3,maxRows:5}})}),(0,e.jsx)(An.Z.Item,{name:"require",valuePropName:"checked",children:(0,e.jsx)(Qo.Z,{children:"\u5FC5\u586B"})})]}),(0,e.jsx)(F.Z,{open:z,onCancel:function(){return K(!1)},checkTag:t.qR.Plugin,addComponents:Ye,onAdded:Ue,hideTop:[t.qR.Knowledge,t.qR.Table,t.qR.MCP]})]})},$o=Xo,eo={"table-container":"table-container___TK9dV"},dt=T().bind(eo),no=o.createContext({}),qo=function(){var r=(0,o.useContext)(no),l=r.setActivatorNodeRef,i=r.listeners;return(0,e.jsx)(Re.ZP,C()({type:"text",size:"small",icon:(0,e.jsx)(za.Z,{}),style:{cursor:"move"},ref:l},i))},er=function(r){var l=(0,pt.nB)({id:r["data-row-key"]}),i=l.attributes,a=l.listeners,u=l.setNodeRef,v=l.setActivatorNodeRef,m=l.transform,y=l.transition,S=l.isDragging,j=C()(C()(C()({},r.style),S?{position:"relative"}:{}),{},{transform:$a.ux.Translate.toString(m),transition:y,zIndex:S?10:1,opacity:S?.8:1,paddingRight:"10px"}),N=(0,o.useMemo)(function(){return{setActivatorNodeRef:v,listeners:a}},[v,a]);return(0,e.jsx)(no.Provider,{value:N,children:(0,e.jsx)("tr",C()(C()({},r),{},{ref:u,style:j},i))})},nr=function(r){var l=r.open,i=r.variablesInfo,a=r.onCancel,u=r.onConfirm,v=(0,o.useState)([]),m=s()(v,2),y=m[0],S=m[1],j=(0,o.useState)(D.jA.Create),N=s()(j,2),I=N[0],L=N[1],E=(0,o.useState)(),c=s()(E,2),B=c[0],A=c[1],h=(0,o.useState)(!1),H=s()(h,2),b=H[0],V=H[1],ve=(0,o.useRef)(!1),f=(0,o.useRef)(null),re=(0,o.useRef)([]),Ie=(0,o.useRef)(t.tE.Delete);(0,o.useEffect)(function(){var Se,xe=(i==null||(Se=i.bindConfig)===null||Se===void 0?void 0:Se.variables)||[];if(xe?.length>0){var ie=xe.map(function(tn){return C()(C()({},tn),{},{key:(0,ot.Z)()})});S(ie)}},[i]);var sn=function(xe){V(!0),L(D.jA.Update),A(xe)},ze=function(){V(!0),L(D.jA.Create),A(null)},ee=(0,Ae.useRequest)(p.D$,{manual:!0,debounceInterval:300,onSuccess:function(){Ie.current===t.tE.Delete?cn.ZP.success("\u5220\u9664\u6210\u529F"):cn.ZP.success("\u66F4\u65B0\u6210\u529F"),ve.current=!0,S(re.current)}}),me=ee.run,Je=function(xe){var ie={id:i?.id,targetId:i?.targetId,bindConfig:{variables:xe}};me(ie)},Qe=function(xe){var ie=y.filter(function(tn){return tn.key!==xe});re.current=ie,Ie.current=t.tE.Delete,Je(ie)},z=[{dataIndex:"sort",key:"sort",align:"center",width:40,fixed:"left",render:function(xe,ie){return!ie.systemVariable&&(0,e.jsx)("span",{className:dt("flex","items-center","h-full"),children:(0,e.jsx)(qo,{})})}},{title:(0,e.jsx)(jn.Z,{label:"\u540D\u79F0"}),dataIndex:"name",key:"name",width:180,fixed:"left",render:function(xe){return(0,e.jsx)("div",{className:dt("flex","items-center","h-full"),children:(0,e.jsx)("span",{className:dt("text-ellipsis"),children:xe||"--"})})}},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description",ellipsis:!0,width:180,render:function(xe){return(0,e.jsx)("span",{className:dt("flex","items-center","h-full"),children:xe||"--"})}},{title:"\u7C7B\u578B",dataIndex:"systemVariable",key:"systemVariable",width:100,ellipsis:!0,render:function(xe){return(0,e.jsx)("span",{className:dt("flex","items-center","h-full"),children:xe?"\u7CFB\u7EDF\u53D8\u91CF":"\u81EA\u5B9A\u4E49\u53D8\u91CF"})}},{title:"\u8F93\u5165\u65B9\u5F0F",dataIndex:"inputType",key:"inputType",width:100,render:function(xe){var ie;return(0,e.jsx)("span",{className:dt("flex","items-center","h-full"),children:((ie=Wa.find(function(tn){return tn.value===xe}))===null||ie===void 0?void 0:ie.label)||"--"})}},{title:"\u662F\u5426\u5FC5\u987B",dataIndex:"require",key:"require",width:100,align:"center",render:function(xe){return(0,e.jsx)("span",{className:dt("flex","items-center","content-center","h-full"),children:xe?"\u662F":"\u5426"})}},{title:"",dataIndex:"action",width:100,fixed:"right",render:function(xe,ie){return(0,e.jsx)(e.Fragment,{children:ie!=null&&ie.systemVariable?(0,e.jsx)("span",{children:"--"}):(0,e.jsxs)(Ko.Z,{className:dt("flex","content-between","items-center"),children:[(0,e.jsx)(Re.ZP,{type:"text",icon:(0,e.jsx)(Ja.Z,{className:dt("cursor-pointer"),onClick:function(){return sn(ie)}})}),(0,e.jsx)(Re.ZP,{type:"text",icon:(0,e.jsx)(gn.Z,{className:dt("cursor-pointer"),onClick:function(){return Qe(ie.key)}})})]})})}}],K=function(){var xe,ie;(xe=f.current)===null||xe===void 0||xe.scrollTo({top:(ie=f.current)===null||ie===void 0?void 0:ie.scrollHeight,behavior:"smooth"})};(0,o.useEffect)(function(){l&&K()},[l]);var Le=function(xe){V(!1),S(xe),ve.current=!0},Ze=function(){V(!1),ve.current?u():a()},Ye=function(xe){var ie=xe.active,tn=xe.over;if(tn&&ie.id!==tn.id){Ie.current=t.tE.Drag;var In=y.findIndex(function(Ge){return Ge.key===ie?.id}),Bn=y.findIndex(function(Ge){return Ge.key===tn?.id}),nn=(0,pt.Rp)(y,In,Bn);re.current=nn,S(nn),Je(nn)}},He=(0,qn.Dy)((0,qn.VT)(qn.we),(0,qn.VT)(qn.Lg,{coordinateGetter:pt.is}));return(0,e.jsxs)(Xn.Z,{width:870,title:"\u53D8\u91CF",open:l,footer:null,onCancel:Ze,children:[(0,e.jsx)(qn.LB,{modifiers:[Xa.DL],sensors:He,collisionDetection:qn.pE,onDragEnd:Ye,children:(0,e.jsx)(pt.Fo,{items:y.map(function(Se){return Se.key}),strategy:pt.qw,children:(0,e.jsx)(Na.Z,{ref:f,rowKey:"key",components:{body:{row:er}},className:dt(eo["table-container"]),columns:z,dataSource:y,pagination:!1,scroll:{y:y?.length>=10?560:void 0},footer:function(){return(0,e.jsx)(Re.ZP,{icon:(0,e.jsx)(Ya.Z,{}),onClick:ze,children:"\u65B0\u589E"})}})})}),(0,e.jsx)($o,{id:i?.id,targetId:i?.targetId,mode:I,currentVariable:B,inputData:y,open:b,onCancel:function(){return V(!1)},onConfirm:Le})]})},tr=nr,ar=n(67825),to=n.n(ar),Lt=n(63741),Qt=n(7098),Pa=n(38683),aa={"input-box":"input-box___ZIywZ","table-collapse-wrapper":"table-collapse-wrapper___tFKNw","table-collapse-active":"table-collapse-active___lGHGY","modal-body":"modal-body____lyds"},or=["pageUriId"],Zt=T().bind(aa),rr=function(r){var l=r.open,i=r.eventsInfo,a=r.currentEventConfig,u=r.pageArgConfigs,v=r.onCancel,m=r.onConfirm,y=An.Z.useForm(),S=s()(y,1),j=S[0],N=Pa.Z.useToken(),I=N.token,L=(0,o.useState)(!0),E=s()(L,2),c=E[0],B=E[1],A=(0,o.useState)(!1),h=s()(A,2),H=h[0],b=h[1],V=(0,o.useState)(t.ZE.Page),ve=s()(V,2),f=ve[0],re=ve[1],Ie=(0,o.useState)([]),sn=s()(Ie,2),ze=sn[0],ee=sn[1],me=(0,o.useState)(null),Je=s()(me,2),Qe=Je[0],z=Je[1],K=(0,o.useState)([]),Le=s()(K,2),Ze=Le[0],Ye=Le[1],He=function(){var de;if(!a)return[];if(!(u!=null&&u.length))return a?.args||[];var ce=(u==null||(de=u.find(function(ne){return ne.pageUri===a?.pageUri}))===null||de===void 0?void 0:de.args)||[],hn=[];return ce.forEach(function(ne){var Ue,je=a==null||(Ue=a.args)===null||Ue===void 0?void 0:Ue.find(function(Ee){return Ee.key===ne.key});je?hn.push(je):hn.push(ne)}),hn};(0,o.useEffect)(function(){if(l){if(a){j.setFieldsValue({name:a.name,identification:a.identification,url:a.url}),re(a.type);var ye=He();ee(ye),z(a.pageId||null)}if(u?.length>0){a?j.setFieldValue("type",a.type):j.setFieldValue("type",t.ZE.Page);var de=[];u?.forEach(function(ce){var hn=(0,ot.Z)();de.push({label:ce.name,value:hn,pageUri:ce.pageUri,pageId:ce.pageId}),a?.pageUri===ce.pageUri&&j.setFieldValue("pageUriId",hn)}),Ye(de)}else j.setFieldValue("type",t.ZE.Link),re(t.ZE.Link)}return function(){Ye([]),ee([]),re(t.ZE.Page),z(null),B(!0)}},[l,a]);var Se=function(de,ce,hn){var ne=w()(ze);ne.forEach(function(Ue){Ue.key===de&&(Ue[ce]=hn)}),ee(ne)},xe=(0,Ae.useRequest)(p.$c,{manual:!0,debounceInterval:300,onSuccess:function(){cn.ZP.success("\u66F4\u65B0\u6210\u529F"),m(),b(!1)},onError:function(){b(!1)}}),ie=xe.run,tn=function(de){var ce,hn=de.pageUriId,ne=to()(de,or);b(!0);var Ue=(ce=Ze.find(function(G){return G.value===hn}))===null||ce===void 0?void 0:ce.pageUri,je=C()(C()(C()({},a||{}),ne),{},{pageUri:Ue,args:ze,pageId:Qe}),Ee=w()(i.bindConfig.eventConfigs||[]),mn=Ee.findIndex(function(G){return G.pageUri===a?.pageUri&&G.pageId===a?.pageId&&G.name===a?.name});mn!==-1?Ee[mn]=je:Ee.push(je);var R={id:i?.id,bindConfig:{eventConfigs:Ee}};ie(R)},In=function(){j.submit()},Bn=function(de){re(de),j.setFieldsValue({type:de,pageUriId:"",url:""}),ee([])},nn=function(de,ce){var hn=ce.label,ne=ce.pageId,Ue=ce.pageUri,je=u.find(function(mn){return mn.pageUri===Ue&&mn.pageId===ne&&mn.name===hn})||null;if(z(ne),a?.pageUri===Ue){var Ee=He();ee(Ee)}else je!=null&&je.args&&ee(je.args)},Ge=[{title:"\u53C2\u6570\u540D",dataIndex:"name",key:"name",width:200,render:function(de,ce){return(0,e.jsx)("div",{className:Zt("h-full","flex","items-center"),children:ce.name})}},{title:function(){return(0,e.jsxs)("div",{className:Zt("h-full","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u53C2\u6570\u503C(\u975E\u5FC5\u586B)"}),(0,e.jsx)(oe.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:"\u4EE5\u4E0B\u53C2\u6570\u975E\u5FC5\u586B\uFF0C\u4E0D\u586B\u5199\u65F6\u7531\u6A21\u578B\u8865\u5145, \u53EF\u4EE5\u5728\u8F93\u5165\u6846\u4E2D\u52A8\u6001\u5F15\u7528\u53C2\u6570\uFF0C\u7559\u7A7A\u7684\u53C2\u6570\u5C06\u7531\u5927\u6A21\u578B\u81EA\u52A8\u8865\u5145"}),(0,e.jsxs)("div",{children:["\u667A\u80FD\u4F53ID ","{{","AGENT_ID","}}"]}),(0,e.jsxs)("div",{children:["\u7CFB\u7EDF\u7528\u6237ID ","{{","SYS_USER_ID","}}"]}),(0,e.jsxs)("div",{children:["\u7528\u6237UID ","{{","USER_UID","}}"]}),(0,e.jsxs)("div",{children:["\u7528\u6237\u540D ","{{","USER_NAME","}}"]})]}),icon:(0,e.jsx)(bn.Z,{})})]})},key:"bindValue",render:function(de,ce){return(0,e.jsx)("div",{className:Zt("h-full","flex","items-center"),children:(0,e.jsx)(X.Z,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165".concat(ce.description),value:ce.bindValue,onChange:function(ne){return Se(ce.key,"bindValue",ne.target.value)}})})}}],pn=(0,o.useMemo)(function(){return u.length>0?Qa:Qa.filter(function(ye){return ye.value!==t.ZE.Page})},[u]);return(0,e.jsxs)(Ba.Z,{form:j,title:"\u4E8B\u4EF6\u7ED1\u5B9A",open:l,loading:H,onCancel:v,onConfirm:In,classNames:{body:aa["modal-body"]},children:[(0,e.jsxs)(An.Z,{form:j,layout:"vertical",onFinish:tn,requiredMark:ca.N,autoComplete:"off",preserve:!1,children:[(0,e.jsx)(An.Z.Item,{name:"name",label:"\u4E8B\u4EF6\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E8B\u4EF6\u540D\u79F0"}],children:(0,e.jsx)(X.Z,{placeholder:"\u8BF7\u8F93\u5165\u4E8B\u4EF6\u540D\u79F0",allowClear:!0})}),(0,e.jsx)(An.Z.Item,{name:"identification",label:"\u4E8B\u4EF6\u6807\u8BC6\uFF08\u7528\u4E8E\u533A\u5206\u5177\u4F53\u4E8B\u4EF6\uFF09",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E8B\u4EF6\u6807\u8BC6"},{validator:function(de,ce){return!ce||(0,M.j0)(ce)?Promise.resolve():Promise.reject(new Error("\u4E8B\u4EF6\u6807\u8BC6\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF,\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\u5F00\u5934!"))}}],children:(0,e.jsx)(X.Z,{placeholder:"\u8BF7\u8F93\u5165\u4E8B\u4EF6\u6807\u8BC6,\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF",allowClear:!0})}),(0,e.jsx)(An.Z.Item,{name:"type",label:"\u54CD\u5E94\u52A8\u4F5C",children:(0,e.jsx)(Qt.Z,{placeholder:"\u8BF7\u9009\u62E9\u54CD\u5E94\u52A8\u4F5C",options:pn,value:f,onChange:Bn})}),f===t.ZE.Page?(0,e.jsx)(An.Z.Item,{name:"pageUriId",label:"\u9875\u9762\u8DEF\u5F84",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9875\u9762\u8DEF\u5F84"}],children:(0,e.jsx)(Qt.Z,{placeholder:"\u8BF7\u9009\u62E9\u9875\u9762\u8DEF\u5F84",options:Ze,onChange:nn})}):f===t.ZE.Link&&(0,e.jsx)(An.Z.Item,{name:"url",label:"\u94FE\u63A5\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u94FE\u63A5\u5730\u5740"},{validator:function(de,ce){return!ce||(0,M.ek)(ce)?Promise.resolve():Promise.reject(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u683C\u5F0F\u7684\u94FE\u63A5\u5730\u5740\uFF0C\u5FC5\u987B\u4EE5http://\u6216https://\u5F00\u5934!"))}}],children:(0,e.jsx)(X.Z,{placeholder:"https://www.xxx.com",allowClear:!0})})]}),f===t.ZE.Page&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:Zt(aa["input-box"],"flex","items-center"),children:[(0,e.jsx)(Lt.le,{name:"icons-common-caret_right",rotate:c?90:0,style:{color:I.colorTextTertiary},onClick:function(){return B(!c)}}),(0,e.jsx)("span",{className:Zt("user-select-none"),children:"\u8F93\u5165"}),(0,e.jsx)(oe.Z,{title:"\u914D\u7F6E\u8F93\u5165\u53C2\u6570",icon:(0,e.jsx)(bn.Z,{})})]}),(0,e.jsx)("div",{className:Zt(aa["table-collapse-wrapper"],c&&aa["table-collapse-active"]),children:(0,e.jsx)(Na.Z,{className:Zt("mb-16","flex-1"),columns:Ge,dataSource:ze,pagination:!1,virtual:!0,scroll:{y:480}})})]})]})},ir=rr,ur=n(28397),Ta={container:"container___KNheK",box:"box___O07Vc"},Ma=T().bind(Ta),lr=function(r){var l=r.textClassName,i=r.list,a=r.onClick;return i?.length>0?(0,e.jsx)("div",{className:Ma("flex","items-center",Ta.container),children:i?.map(function(u,v){return(0,e.jsx)(ur.Z,{list:jo,onClick:function(y){return a(u,y.value,v)},children:(0,e.jsx)("span",{className:Ma(Ta.box,"hover-box","cursor-pointer"),children:u.name})},v)})}):(0,e.jsx)("p",{className:Ma(l),children:"\u901A\u8FC7\u4E8B\u4EF6\u7ED1\u5B9A\u53EF\u7ED9\u5927\u6A21\u578B\u8FD4\u56DE\u7684\u5185\u5BB9\u6307\u5B9A\u70B9\u51FB\u64CD\u4F5C\u54CD\u5E94\u3002"})},sr=lr,et={"xagi-nav-style2":"xagi-nav-style2___wTLiv",text:"text___Prt2n","page-container":"page-container____Frz9",container:"container___Nt4W2","page-setting-item":"page-setting-item___jtwzN"},ao=n(92973),dr=n(48657),oo={"knowledge-extra":"knowledge-extra___TBNaC"},yt=n(15028),cr=n(63960),ro={"slider-box":"slider-box___gGjDf"},io=T().bind(ro),vr=function(r){var l=r.value,i=r.onChange,a=r.min,u=a===void 0?0:a,v=r.max,m=r.step,y=m===void 0?1:m;return(0,e.jsxs)("div",{className:io("flex-1","flex"),children:[(0,e.jsx)(cr.Z,{className:io(ro["slider-box"]),min:u,max:v,step:y,onChange:i,value:Number(l)||0}),(0,e.jsx)(Rn,{value:l,min:u,max:v,step:y,onChange:i})]})},Ht=vr,mr=n(44384),ga={"xagi-nav-style2":"xagi-nav-style2___tiJHy",text:"text___woITT","page-container":"page-container___PUZVi",container:"container___ZTPVh",title:"title___C_jJg"},Bt=T().bind(ga),fr=function(r){var l=r.open,i=r.agentComponentInfo,a=r.onCancel,u=(0,Ae.useModel)("spaceAgent"),v=u.agentComponentList,m=u.setAgentComponentList,y=(0,o.useState)({invokeType:t.Qr.AUTO,searchStrategy:t.kD.MIXED,maxRecallCount:5,matchingDegree:.5,noneRecallReplyType:t.E3.DEFAULT,noneRecallReply:""}),S=s()(y,2),j=S[0],N=S[1],I=(0,Ae.useRequest)(p.Uc,{manual:!0,debounceInterval:300}),L=I.run;(0,o.useEffect)(function(){i!=null&&i.bindConfig&&N(i.bindConfig)},[i]);var E=function(h,H){var b=C()(C()({},j),{},_()({},h,H));if(N(b),h==="invokeType"){var V=v.map(function(ve){return ve.id===i?.id&&(ve.bindConfig.invokeType=H),ve});m(V)}L({id:i?.id,targetId:i?.targetId,bindConfig:b})},c=function(h){Number.isNaN(h)||E("maxRecallCount",h)},B=function(h){Number.isNaN(h)||E("matchingDegree",h)};return(0,e.jsx)(Xn.Z,{title:"\u77E5\u8BC6\u5E93\u8BBE\u7F6E",open:l,footer:null,onCancel:a,children:(0,e.jsxs)("div",{className:Bt(ga.container),children:[(0,e.jsx)("h3",{className:Bt(ga.title),children:"\u53EC\u56DE"}),(0,e.jsxs)("div",{className:Bt("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u8C03\u7528\u65B9\u5F0F",title:"\u9009\u62E9\u662F\u5426\u6BCF\u8F6E\u5BF9\u8BDD\u81EA\u52A8\u53EC\u56DE\u6216\u6309\u9700\u4ECE\u7279\u5B9A\u77E5\u8BC6\u5E93\u53EC\u56DE"}),(0,e.jsx)(st.ZP.Group,{onChange:function(h){return E("invokeType",h.target.value)},value:j.invokeType,options:Wn.filter(function(A){return A.value!==t.Qr.MANUAL&&A.value!==t.Qr.MANUAL_ON_DEMAND})})]}),(0,e.jsxs)("div",{className:Bt("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u641C\u7D22\u7B56\u7565",title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u83B7\u53D6\u77E5\u8BC6\u7684\u68C0\u7D22\u65B9\u5F0F,\u4E0D\u540C\u7684\u68C0\u7D22\u7B56\u7565\u53EF\u4EE5\u66F4\u6709\u6548\u5730\u627E\u5230\u6B63\u786E\u7684\u4FE1\u606F,\u63D0\u9AD8\u5176\u751F\u6210\u7684\u7B54\u6848\u7684\u51C6\u786E\u6027\u548C\u53EF\u7528\u6027\u3002"}),(0,e.jsx)(st.ZP.Group,{onChange:function(h){return E("searchStrategy",h.target.value)},value:j.searchStrategy,options:Hn})]}),(0,e.jsxs)("div",{className:Bt("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u6700\u5927\u53EC\u56DE\u6570\u91CF",title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B\u7684\u6700\u5927\u6BB5\u843D\u6570,\u6570\u503C\u8D8A\u5927\u8FD4\u56DE\u7684\u5185\u5BB9\u8D8A\u591A"}),(0,e.jsx)(Ht,{min:1,max:10,value:j.maxRecallCount.toString(),onChange:c})]}),(0,e.jsxs)("div",{className:Bt("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u6700\u5C0F\u5339\u914D\u5EA6",title:"\u6839\u636E\u8BBE\u7F6E\u7684\u5339\u914D\u5EA6\u9009\u53D6\u6BB5\u843D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B,\u4F4E\u4E8E\u8BBE\u5B9A\u5339\u914D\u5EA6\u7684\u5185\u5BB9\u4E0D\u4F1A\u88AB\u53EC\u56DE"}),(0,e.jsx)(Ht,{min:.01,max:.99,step:.01,value:j.matchingDegree.toString(),onChange:B})]}),(0,e.jsx)(mr.Z,{}),(0,e.jsx)("h3",{className:Bt(ga.title),children:"\u56DE\u590D"}),(0,e.jsxs)("div",{className:Bt("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u65E0\u53EC\u56DE\u56DE\u590D",title:"\u5F53\u77E5\u8BC6\u5E93\u6CA1\u6709\u53EC\u56DE\u6709\u6548\u5207\u7247\u65F6\u7684\u56DE\u590D\u8BDD\u672F"}),(0,e.jsx)(st.ZP.Group,{onChange:function(h){return E("noneRecallReplyType",h.target.value)},value:j.noneRecallReplyType,options:xo})]}),(0,e.jsx)(Dn.Z,{condition:j.noneRecallReplyType===t.E3.CUSTOM,children:(0,e.jsx)(X.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165",value:j.noneRecallReply,onChange:function(h){return E("noneRecallReply",h.target.value)},autoSize:{minRows:3,maxRows:5}})})]})})},gr=fr,Ra=T().bind(oo),pr=function(r){var l=r.textClassName,i=r.list,a=r.deleteList,u=r.onDel,v=(0,o.useState)(!1),m=s()(v,2),y=m[0],S=m[1],j=(0,o.useState)(),N=s()(j,2),I=N[0],L=N[1],E=function(h){S(!0),L(h)},c=function(h,H){return a?.some(function(b){return b.targetId===h&&b.type===H})},B=function(h){var H=h.targetId,b=h.type;c(H,b)||u(h.id,h.targetId,h.type)};return i!=null&&i.length?(0,e.jsxs)(e.Fragment,{children:[i.map(function(A){var h;return(0,e.jsx)(Ce.Z,{agentComponentInfo:A,defaultImage:ao,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:Ra("cursor-pointer","hover-box",oo["knowledge-extra"]),onClick:function(){return E(A)},children:[(A==null||(h=A.bindConfig)===null||h===void 0?void 0:h.invokeType)===t.Qr.AUTO?"\u81EA\u52A8\u8C03\u7528":"\u6309\u9700\u8C03\u7528",(0,e.jsx)(dr.Z,{})]}),(0,e.jsx)(oe.Z,{title:"\u53D6\u6D88\u77E5\u8BC6\u5E93",icon:c(A.targetId,A.type)?(0,e.jsx)(un.Z,{}):(0,e.jsx)(gn.Z,{className:Ra("cursor-pointer")}),onClick:function(){return B(A)}})]})},A.id)}),(0,e.jsx)(gr,{agentComponentInfo:I,open:y,onCancel:function(){return S(!1)}})]}):(0,e.jsx)("p",{className:Ra(l),children:"\u5C06\u6587\u6863\u3001URL\u3001\u4E09\u65B9\u6570\u636E\u6E90\u4E0A\u4F20\u4E3A\u6587\u672C\u77E5\u8BC6\u5E93\u540E\uFF0C\u7528\u6237\u53D1\u9001\u6D88\u606F\u65F6\uFF0C\u667A\u80FD\u4F53\u80FD\u591F\u5F15\u7528\u6587\u672C\u77E5\u8BC6\u4E2D\u7684\u5185\u5BB9\u56DE\u7B54\u7528\u6237\u95EE\u9898\u3002"})},hr=pr,uo={},lo=T().bind(uo),Cr=function(r){var l=r.textClassName,i=r.openLongMemory,a=i===void 0?d.nb.Close:i;return console.log(a),(0,e.jsx)("div",{className:lo(uo.container),children:(0,e.jsx)("p",{className:lo(l),children:"\u603B\u7ED3\u804A\u5929\u5BF9\u8BDD\u7684\u5185\u5BB9\uFF0C\u5E76\u7528\u4E8E\u66F4\u597D\u7684\u54CD\u5E94\u7528\u6237\u7684\u6D88\u606F\u3002"})})},xr=Cr,rt={"xagi-nav-style2":"xagi-nav-style2___v4Ft8",text:"text___GudlW","page-container":"page-container___tpdhX",container:"container___pz0mN","group-mcp-item":"group-mcp-item___akoCX","img-box":"img-box___DKgNV",name:"name___zlseW",desc:"desc___In9oO","extra-box":"extra-box___KlFIX","down-icon":"down-icon___EAqjU","down-icon-rotate":"down-icon-rotate___HuIxH","group-mcp-item-children":"group-mcp-item-children___Ren3g"},ht=T().bind(rt),Er=function(r){var l=r.item,i=r.deleteList,a=r.onSet,u=r.onDel,v=(0,o.useState)(!1),m=s()(v,2),y=m[0],S=m[1];return(0,e.jsxs)("div",{className:ht(rt.container),children:[(0,e.jsxs)("div",{className:ht("flex","items-center",rt["group-mcp-item"],_()({},rt.border,y)),onClick:function(){return S(!y)},children:[(0,e.jsx)("span",{className:ht("radius-6",rt["img-box"]),children:(0,e.jsx)("img",{src:l.icon,alt:""})}),(0,e.jsxs)("div",{className:ht("flex","flex-col","flex-1","overflow-hide"),children:[(0,e.jsx)("h3",{className:ht("text-ellipsis",rt.name),children:l.groupName}),(0,e.jsx)("p",{className:ht("text-ellipsis",rt.desc),children:l.groupDescription})]}),(0,e.jsxs)("div",{className:ht(rt["extra-box"],"flex","items-center","cursor-pointer"),children:[(0,e.jsx)("span",{children:"\u5DE5\u5177\uFF08".concat(l.children.length,"\uFF09")}),(0,e.jsx)(mt.Z,{className:ht(rt["down-icon"],_()({},rt["down-icon-rotate"],y))})]})]}),y&&(0,e.jsx)(en,{textClassName:ht(rt.text),itemClassName:ht(rt["group-mcp-item-children"]),type:t.qR.MCP,list:l.children,deleteList:i,onSet:a,onDel:u})]})},Ar=Er,so="data:image/png;base64,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",_r=n(81829),Sr=n(10560),Gt={star:"star___zBiI6","input-box":"input-box___iTyTD","table-collapse-wrapper":"table-collapse-wrapper___kesXr","table-collapse-active":"table-collapse-active___cf2GG","modal-body":"modal-body___QHoLI"},yr=["pageUriId"],Pt=T().bind(Gt),jr=function(r){var l=r.open,i=r.agentConfigInfo,a=r.currentGuidQuestionDto,u=r.pageArgConfigs,v=r.onCancel,m=r.onConfirm,y=r.currentGuidQuestionDtoIndex,S=Pa.Z.useToken(),j=S.token,N=(0,o.useState)(!0),I=s()(N,2),L=I[0],E=I[1],c=An.Z.useForm(),B=s()(c,1),A=B[0],h=(0,o.useState)(!1),H=s()(h,2),b=H[0],V=H[1],ve=(0,o.useState)(""),f=s()(ve,2),re=f[0],Ie=f[1],sn=(0,o.useState)(t._A.Question),ze=s()(sn,2),ee=ze[0],me=ze[1],Je=(0,o.useState)([]),Qe=s()(Je,2),z=Qe[0],K=Qe[1],Le=(0,o.useState)(null),Ze=s()(Le,2),Ye=Ze[0],He=Ze[1],Se=(0,o.useState)([]),xe=s()(Se,2),ie=xe[0],tn=xe[1],In=(0,Ae.useRequest)(p.mp,{manual:!0,debounceInterval:1e3,onSuccess:function(je,Ee){cn.ZP.success("\u66F4\u65B0\u6210\u529F");var mn=Ee[0].guidQuestionDtos;m?.(mn),V(!1)},onError:function(){V(!1)}}),Bn=In.run,nn=function(){var je;if(!a)return[];if(!(u!=null&&u.length))return a?.args||[];var Ee=(u==null||(je=u.find(function(R){return R.pageUri===a?.pageUri}))===null||je===void 0?void 0:je.args)||[],mn=[];return Ee.forEach(function(R){var G,$=a==null||(G=a.args)===null||G===void 0?void 0:G.find(function(W){return W.key===R.key});$?mn.push($):mn.push(R)}),mn};(0,o.useEffect)(function(){if(l){if(a){A.setFieldsValue({icon:a.icon,type:a.type,info:a.info,url:a.url}),me(a.type),Ie(a.icon||so);var Ue=nn();K(Ue),He(a.pageId||null)}if(u?.length>0){var je=[];u?.forEach(function(Ee){var mn=(0,ot.Z)();je.push({label:Ee.name,value:mn,pageUri:Ee.pageUri,pageId:Ee.pageId}),a?.pageUri===Ee.pageUri&&A.setFieldValue("pageUriId",mn)}),tn(je)}}return function(){Ie(""),K([]),He(null),tn([]),E(!0)}},[l,a,u]);var Ge=function(je,Ee,mn){var R=w()(z);R.forEach(function(G){G.key===je&&(G[Ee]=mn)}),K(R)},pn=function(je){var Ee,mn=je.pageUriId,R=to()(je,yr);if(R.type===t._A.Page){var G=z?.find(function(Be){return Be.require&&!Be.bindValue});if(G){cn.ZP.error("\u53C2\u6570\u540D\uFF1A".concat(G.name,"\u662F\u5FC5\u586B\u53C2\u6570\uFF0C\u53C2\u6570\u503C\u4E0D\u80FD\u4E3A\u7A7A"));return}}V(!0);var $=(Ee=ie.find(function(Be){return Be.value===mn}))===null||Ee===void 0?void 0:Ee.pageUri,W=C()(C()(C()({},a),R),{},{pageUri:$,args:z,pageId:Ye}),be=_e()(i?.guidQuestionDtos||[]);be[y]=W,Bn(C()(C()({},i),{},{guidQuestionDtos:be}))},ye=function(){A.submit()},de=function(je){Ie(je),A.setFieldValue("icon",je)},ce=function(je){A.setFieldsValue({type:je,pageUriId:"",url:""}),me(je),K([])},hn=function(je,Ee){var mn=Ee.label,R=Ee.pageId,G=Ee.pageUri,$=u.find(function(Ve){return Ve.pageUri===G&&Ve.pageId===R&&Ve.name===mn})||null;if(He(R),a?.pageUri===G){var W=nn();K(W)}else{var be;if($!=null&&(be=$.args)!==null&&be!==void 0&&be.length){var Be=$.args.map(function(Ve){return C()(C()({},Ve),{},{bindValueType:Ve.bindValueType||t.Oy.Input})});K(Be)}}},ne=[{title:"\u53C2\u6570\u540D",dataIndex:"name",key:"name",width:200,render:function(je,Ee){return(0,e.jsxs)("div",{className:Pt("h-full","flex","items-center","gap-4"),children:[(0,e.jsx)("span",{children:Ee.name}),(0,e.jsx)(Dn.Z,{condition:Ee.require,children:(0,e.jsx)("span",{className:Pt(Gt.star),children:"*"})})]})}},{title:function(){return(0,e.jsxs)("div",{className:Pt("h-full","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u53C2\u6570\u503C"}),(0,e.jsx)(oe.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:"\u53EF\u4EE5\u5728\u8F93\u5165\u6846\u4E2D\u52A8\u6001\u5F15\u7528\u53C2\u6570\uFF0C\u7559\u7A7A\u7684\u53C2\u6570\u5C06\u7531\u5927\u6A21\u578B\u81EA\u52A8\u8865\u5145"}),(0,e.jsxs)("div",{children:["\u667A\u80FD\u4F53ID ","{{","AGENT_ID","}}"]}),(0,e.jsxs)("div",{children:["\u7CFB\u7EDF\u7528\u6237ID ","{{","SYS_USER_ID","}}"]}),(0,e.jsxs)("div",{children:["\u7528\u6237UID ","{{","USER_UID","}}"]}),(0,e.jsxs)("div",{children:["\u7528\u6237\u540D ","{{","USER_NAME","}}"]})]}),icon:(0,e.jsx)(bn.Z,{})})]})},key:"bindValue",render:function(je,Ee){return(0,e.jsx)("div",{className:Pt("h-full","flex","items-center"),children:(0,e.jsx)(X.Z,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165".concat(Ee.description),value:Ee.bindValue,onChange:function(R){return Ge(Ee.key,"bindValue",R.target.value)}})})}}];return(0,e.jsxs)(Ba.Z,{form:A,title:"\u9884\u7F6E\u95EE\u9898\u8BBE\u7F6E",open:l,loading:b,onCancel:v,onConfirm:ye,classNames:{body:Gt["modal-body"]},children:[(0,e.jsxs)(An.Z,{form:A,layout:"vertical",onFinish:pn,requiredMark:ca.N,autoComplete:"off",preserve:!1,children:[(0,e.jsx)(An.Z.Item,{name:"icon",label:"\u56FE\u6807",children:(0,e.jsx)(Sr.Z,{onUploadSuccess:de,defaultImage:"",imageUrl:re})}),(0,e.jsx)(An.Z.Item,{name:"info",label:"\u5C55\u793A\u4FE1\u606F",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5C55\u793A\u4FE1\u606F"}],children:(0,e.jsx)(X.Z,{placeholder:"\u8FD9\u91CC\u662F\u95EE\u9898\u5185\u5BB9",showCount:!0,maxLength:30})}),(0,e.jsx)(An.Z.Item,{name:"type",label:"\u7C7B\u578B",children:(0,e.jsx)(Qt.Z,{placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",options:yo,onChange:ce})}),ee===t._A.Page?(0,e.jsx)(An.Z.Item,{name:"pageUriId",label:"\u9875\u9762\u8DEF\u5F84",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9875\u9762\u8DEF\u5F84"}],children:(0,e.jsx)(Qt.Z,{placeholder:"\u8BF7\u9009\u62E9\u9875\u9762\u8DEF\u5F84",options:ie,onChange:hn})}):ee===t._A.Link&&(0,e.jsx)(An.Z.Item,{name:"url",label:"\u94FE\u63A5\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u94FE\u63A5\u5730\u5740"},{validator:function(je,Ee){return!Ee||(0,M.ek)(Ee)?Promise.resolve():Promise.reject(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u683C\u5F0F\u7684\u94FE\u63A5\u5730\u5740\uFF0C\u5FC5\u987B\u4EE5http://\u6216https://\u5F00\u5934!"))}}],children:(0,e.jsx)(X.Z,{placeholder:"https://www.xxx.com",allowClear:!0})})]}),ee===t._A.Page&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:Pt(Gt["input-box"],"flex","items-center"),children:[(0,e.jsx)(Lt.le,{name:"icons-common-caret_right",rotate:L?90:0,style:{color:j.colorTextTertiary},onClick:function(){return E(!L)}}),(0,e.jsx)("span",{className:Pt("user-select-none"),children:"\u8F93\u5165"}),(0,e.jsx)(oe.Z,{title:"\u914D\u7F6E\u8F93\u5165\u53C2\u6570",icon:(0,e.jsx)(bn.Z,{})})]}),(0,e.jsx)("div",{className:Pt(Gt["table-collapse-wrapper"],L&&Gt["table-collapse-active"]),children:(0,e.jsx)(Na.Z,{className:Pt("mb-16","flex-1"),columns:ne,dataSource:z,pagination:!1,virtual:!0,scroll:{y:480}})})]})]})},br=jr,jt={"header-title":"header-title___EsoqP","title-box":"title-box___HQ_Xl",title:"title___ku1cn","content-box":"content-box___fiZV5","custom-style-editor":"custom-style-editor___BXC9u",input:"input___fm7tL","icon-input-prefix":"icon-input-prefix___pl6iT","icon-input-suffix":"icon-input-suffix___UNkw7"},bt=T().bind(jt),Dr=function(r){var l=r.agentConfigInfo,i=r.pageArgConfigs,a=r.onChangeAgent,u=r.onConfirmUpdateEventQuestions,v=Pa.Z.useToken(),m=v.token,y=(0,o.useState)(""),S=s()(y,2),j=S[0],N=S[1],I=(0,o.useState)([]),L=s()(I,2),E=L[0],c=L[1],B=(0,o.useState)(),A=s()(B,2),h=A[0],H=A[1],b=(0,o.useState)(!1),V=s()(b,2),ve=V[0],f=V[1],re=(0,o.useRef)(-1);(0,o.useEffect)(function(){if(l){var Qe;N(l.openingChatMsg),((Qe=l.guidQuestionDtos)===null||Qe===void 0?void 0:Qe.length)>0&&c(l.guidQuestionDtos)}},[l]);var Ie=function(){var z=w()(E);z.push({type:t._A.Question,info:""}),c(z)},sn=function(z){var K=w()(E);K.splice(z,1),c(K),a(K,"guidQuestionDtos")},ze=function(z){N(z),a(z,"openingChatMsg")},ee=function(z,K){var Le=w()(E);Le[z].info=K,c(Le),a(Le,"guidQuestionDtos")},me=function(z,K){f(!0),H(z),re.current=K},Je=function(z){f(!1),c(z),u(z,"guidQuestionDtos")};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:bt(jt["header-title"]),children:"\u5F00\u573A\u767D\u6587\u6848"}),(0,e.jsx)("div",{className:bt(jt["content-box"]),children:(0,e.jsx)(_r.Qo,{value:j,onChange:ze,className:bt(jt["custom-style-editor"]),focusBorderColor:"var(--xagi-color-primary)",toolbarAlign:"left"})}),(0,e.jsxs)("div",{className:bt("flex","content-between","items-center",jt["title-box"]),children:[(0,e.jsx)("p",{className:bt(jt.title,"flex","items-center"),children:"\u5F00\u573A\u767D\u9884\u7F6E\u95EE\u9898"}),(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u9884\u7F6E\u95EE\u9898",icon:(0,e.jsx)(Lt.le,{name:"icons-common-plus",style:{color:m.colorTextTertiary,fontSize:"15px"}}),onClick:Ie})]}),E?.map(function(Qe,z){return(0,e.jsx)(X.Z,{rootClassName:bt(jt.input),placeholder:"\u8F93\u5165\u5F00\u573A\u767D\u5F15\u5BFC\u95EE\u9898",value:Qe.info,onChange:function(Le){return ee(z,Le.target.value)},showCount:!1,maxLength:30,prefix:(0,e.jsx)("img",{className:bt(jt["icon-input-prefix"]),src:Qe.icon||so}),suffix:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe.Z,{title:"\u5220\u9664\u9884\u7F6E\u95EE\u9898",className:bt(jt["icon-input-suffix"]),icon:(0,e.jsx)(gn.Z,{className:bt("cursor-pointer")}),onClick:function(){return sn(z)}}),(0,e.jsx)(oe.Z,{title:"\u8BBE\u7F6E",icon:(0,e.jsx)(Oe.Mf,{className:"cursor-pointer"}),onClick:function(){return me(Qe,z)}})]})},z)}),(0,e.jsx)(br,{open:ve,agentConfigInfo:l,currentGuidQuestionDto:h,pageArgConfigs:i,onCancel:function(){return f(!1)},onConfirm:Je,currentGuidQuestionDtoIndex:re.current})]})},Fr=Dr,La={"xagi-nav-style2":"xagi-nav-style2___hJnMr",text:"text___sZeNy","page-container":"page-container___CUlgN",container:"container___BmjaU",footer:"footer___tVMuM"},pa=T().bind(La),Ir=function(r){var l=r.homeIndexType,i=r.onChangePageInfo,a=r.onSaveSet,u=(0,o.useState)(!1),v=s()(u,2),m=v[0],y=v[1],S=function(I){var L=I.target.value;i("homeIndex",L)},j=function(){var N=J()(q()().mark(function I(){return q()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return y(!0),E.next=3,a();case 3:y(!1);case 4:case"end":return E.stop()}},I)}));return function(){return N.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:pa(La.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:pa("flex-1"),children:[(0,e.jsx)("h3",{className:pa("mb-12"),children:"\u662F\u5426\u4E3A\u9ED8\u8BA4\u9996\u9875"}),(0,e.jsx)(st.ZP.Group,{options:Do,onChange:S,value:l})]}),(0,e.jsx)("footer",{className:pa(La.footer),children:(0,e.jsx)(Re.ZP,{type:"primary",onClick:j,loading:m,children:"\u4FDD\u5B58"})})]})},Nr=Ir,Tt={"xagi-nav-style2":"xagi-nav-style2___T9lGQ",text:"text___wR27q","page-container":"page-container___kuBTf","modal-container":"modal-container___Gngcg",container:"container___SjPFD",left:"left___qGLCU",item:"item___WrhGG",checked:"checked___dW3s3",right:"right___VG9Bk",close:"close___ChWUL"},Za={"xagi-nav-style2":"xagi-nav-style2___GETZ_",text:"text___tuJI7","page-container":"page-container___UH1ur",container:"container___KB13y",footer:"footer___RcLSi"},ha=T().bind(Za),Br=function(r){var l=r.visibleToLLMType,i=r.onChangePageInfo,a=r.onSaveSet,u=(0,o.useState)(!1),v=s()(u,2),m=v[0],y=v[1],S=function(I){var L=I.target.value;i("visibleToLLM",L)},j=function(){var N=J()(q()().mark(function I(){return q()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return y(!0),E.next=3,a();case 3:y(!1);case 4:case"end":return E.stop()}},I)}));return function(){return N.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:ha(Za.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:ha("flex-1"),children:[(0,e.jsx)("h3",{className:ha("mb-12"),children:"\u662F\u5426\u6A21\u578B\u53EF\u89C1"}),(0,e.jsx)(st.ZP.Group,{options:bo,onChange:S,value:l})]}),(0,e.jsx)("footer",{className:ha(Za.footer),children:(0,e.jsx)(Re.ZP,{type:"primary",onClick:j,loading:m,children:"\u4FDD\u5B58"})})]})},Pr=Br,zt=T().bind(Tt),Tr=function(r){var l=r.open,i=r.currentComponentInfo,a=r.allPageComponentList,u=r.onCancel,v=(0,o.useState)(d.rm.Visible_To_LLM),m=s()(v,2),y=m[0],S=m[1],j=(0,o.useState)(),N=s()(j,2),I=N[0],L=N[1];(0,o.useEffect)(function(){l&&(S(d.rm.Visible_To_LLM),L(i))},[l,i]);var E=(0,Fn.Z)(p.eT,{manual:!0}),c=E.runAsync,B=function(){var H=J()(q()().mark(function b(){var V,ve,f;return q()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.prev=0,(I==null||(V=I.bindConfig)===null||V===void 0?void 0:V.homeIndex)===t.PT.Yes&&(ve=[],a?.forEach(function(sn){var ze;if(sn.id!==I?.id&&((ze=sn.bindConfig)===null||ze===void 0?void 0:ze.homeIndex)===t.PT.Yes){var ee=C()({},sn);ee.bindConfig.homeIndex=t.PT.No;var me={id:ee?.id,bindConfig:ee?.bindConfig};ve.push(c(me).catch(function(Je){return console.error("\u66F4\u65B0\u5176\u4ED6\u9875\u9762\u5931\u8D25:",Je),null}))}}),ve.length>0&&Promise.all(ve)),f={id:I?.id,bindConfig:I?.bindConfig},Ie.next=5,c(f);case 5:cn.ZP.success("\u4FDD\u5B58\u6210\u529F"),Ie.next=12;break;case 8:Ie.prev=8,Ie.t0=Ie.catch(0),console.error("\u4FDD\u5B58\u914D\u7F6E\u5931\u8D25:",Ie.t0),cn.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return Ie.stop()}},b,null,[[0,8]])}));return function(){return H.apply(this,arguments)}}(),A=function(b,V){var ve=_e()(I);ve&&(ve.bindConfig[b]=V),L(ve)},h=function(){var b,V;switch(y){case d.rm.Visible_To_LLM:return(0,e.jsx)(Pr,{visibleToLLMType:I==null||(b=I.bindConfig)===null||b===void 0?void 0:b.visibleToLLM,onChangePageInfo:A,onSaveSet:B});case d.rm.Home_Index:return(0,e.jsx)(Nr,{homeIndexType:I==null||(V=I.bindConfig)===null||V===void 0?void 0:V.homeIndex,onChangePageInfo:A,onSaveSet:B})}};return(0,e.jsx)(Xn.Z,{centered:!0,open:l,onCancel:u,destroyOnHidden:!0,className:zt(Tt["modal-container"]),modalRender:function(){return(0,e.jsxs)("div",{className:zt(Tt.container,"flex","overflow-hide"),children:[(0,e.jsxs)("div",{className:zt(Tt.left),children:[(0,e.jsx)("h3",{children:"\u8BBE\u7F6E"}),(0,e.jsx)("ul",{children:_n.fu.map(function(b){return(0,e.jsx)("li",{className:zt(Tt.item,"cursor-pointer",_()({},Tt.checked,y===b.type)),onClick:function(){return S(b.type)},children:b.label},b.type)})})]}),(0,e.jsx)("div",{className:zt("flex-1",Tt.right),children:h()}),(0,e.jsx)(vt.Z,{className:zt(Tt.close,"cursor-pointer"),onClick:u})]})}})},Mr=Tr,wa={container:"container___BIda5",box:"box___HxIHi"},Oa=T().bind(wa),Rr=function(r){var l=r.textClassName,i=r.list,a=r.onClick,u=(0,o.useState)([]),v=s()(u,2),m=v[0],y=v[1];return(0,o.useEffect)(function(){var S=i?.filter(function(j){return!j.systemVariable})||[];y(S)},[i]),(0,e.jsx)(e.Fragment,{children:m?.length>0?(0,e.jsx)("div",{className:Oa("flex","items-center",wa.container),children:m?.map(function(S){return(0,e.jsx)("span",{className:Oa(wa.box,"radius-6","hover-box","cursor-pointer"),onClick:a,children:S.name},S.key)})}):(0,e.jsx)("p",{className:Oa(l),children:"\u7528\u4E8E\u4FDD\u5B58\u7528\u6237\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u8BA9\u667A\u80FD\u4F53\u8BB0\u4F4F\u7528\u6237\u7684\u7279\u5F81\uFF0C\u4F7F\u56DE\u590D\u66F4\u52A0\u4E2A\u6027\u5316\u3002"})})},Lr=Rr,it=T().bind(et),Zr=function(r){var l,i,a,u=r.agentId,v=r.agentConfigInfo,m=r.onChangeAgent,y=r.onConfirmUpdateEventQuestions,S=r.onInsertSystemPrompt,j=(0,o.useState)(!1),N=s()(j,2),I=N[0],L=N[1],E=(0,o.useState)(!1),c=s()(E,2),B=c[0],A=c[1],h=(0,o.useState)(t.qR.Plugin),H=s()(h,2),b=H[0],V=H[1],ve=(0,o.useState)([]),f=s()(ve,2),re=f[0],Ie=f[1],sn=(0,o.useState)([]),ze=s()(sn,2),ee=ze[0],me=ze[1],Je=(0,o.useState)(),Qe=s()(Je,2),z=Qe[0],K=Qe[1],Le=(0,o.useState)([]),Ze=s()(Le,2),Ye=Ze[0],He=Ze[1],Se=(0,o.useState)(!1),xe=s()(Se,2),ie=xe[0],tn=xe[1],In=(0,o.useState)(!1),Bn=s()(In,2),nn=Bn[0],Ge=Bn[1],pn=(0,o.useState)(!1),ye=s()(pn,2),de=ye[0],ce=ye[1],hn=(0,Ae.useModel)("spaceAgent"),ne=hn.agentComponentList,Ue=hn.setAgentComponentList,je=(0,Ae.useModel)("conversationInfo"),Ee=je.handleVariables,mn=(0,o.useState)(),R=s()(mn,2),G=R[0],$=R[1],W=function(P){return ne?.filter(function(Fe){return Fe.type===P})||[]},be=(0,o.useMemo)(function(){var Q=W(t.qR.MCP),P=new Map;return Q.forEach(function(Fe){var We=Fe.targetId,Cn=Fe.icon,Zn=Fe.groupName,at=Fe.groupDescription,Yn=We.toString();P.has(Yn)||P.set(Yn,{targetId:We,icon:Cn,groupName:Zn,groupDescription:at,children:[]});var At=P.get(Yn);At.children.push(Fe)}),Array.from(P.values())},[ne]),Be=(0,o.useMemo)(function(){return ne?.find(function(Q){return Q.type===t.qR.Variable})},[ne]),Ve=(0,o.useMemo)(function(){return ne?.find(function(Q){return Q.type===t.qR.Event})},[ne]),De=(0,o.useMemo)(function(){return ne?.filter(function(Q){return Q.type===t.qR.Page})||[]},[ne]),Tn=(0,o.useMemo)(function(){var Q=ne?.filter(function(Fe){return Fe.type===t.qR.Page})||[],P=[];return Q.forEach(function(Fe){var We;P.push.apply(P,w()(((We=Fe.bindConfig)===null||We===void 0?void 0:We.pageArgConfigs)||[]))}),P},[ne]),we=function(P){return ne?.some(function(Fe){return Fe.type===P})},Xe=(0,o.useMemo)(function(){var Q=[];return we(t.qR.Plugin)&&Q.push(d.bX.Plugin),we(t.qR.Workflow)&&Q.push(d.bX.Workflow),we(t.qR.MCP)&&Q.push(d.bX.MCP),Q},[ne]),Sn=(0,o.useMemo)(function(){return we(t.qR.Knowledge)?[d.bX.Text]:[]},[ne]),Nn=(0,o.useMemo)(function(){var Q,P=[],Fe=(Be==null||(Q=Be.bindConfig)===null||Q===void 0||(Q=Q.variables)===null||Q===void 0?void 0:Q.filter(function(We){return!We.systemVariable}))||[];return we(t.qR.Variable)&&Fe.length&&P.push(d.bX.Variable),we(t.qR.Table)&&P.push(d.bX.Table),P},[ne]),nt=(0,o.useMemo)(function(){var Q,P=[];return we(t.qR.Page)&&P.push(d.bX.Page),we(t.qR.Event)&&Ve!==null&&Ve!==void 0&&(Q=Ve.bindConfig)!==null&&Q!==void 0&&(Q=Q.eventConfigs)!==null&&Q!==void 0&&Q.length&&P.push(d.bX.Page_Event_Binding),P},[ne]),Ct=(0,Fn.Z)(p.dO,{manual:!0,debounceWait:300}),Ot=Ct.runAsync,xt=(0,Fn.Z)(p.Nu,{manual:!0,debounceWait:300}),la=xt.runAsync,Xt=(0,Fn.Z)(p.Wu,{manual:!0,debounceWait:300}),sa=Xt.runAsync,Et=function(){var Q=J()(q()().mark(function P(Fe,We,Cn,Zn){var at,Yn,At,Ut;return q()().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:return at=[].concat(w()(Ye),[{id:Fe,targetId:We,type:Cn}]),He(at),$t.next=4,la(Fe);case 4:cn.ZP.success("\u5DF2\u6210\u529F\u5220\u9664"),Yn=ne?.filter(function(ct){var Ka;return!(ct.id===Fe&&ct.type===Cn&&(((Ka=ct.bindConfig)===null||Ka===void 0?void 0:Ka.toolName)||"")===(Zn||""))})||[],Ue(Yn),At=ee?.filter(function(ct){return!(ct.targetId===We&&ct.type===Cn&&(ct.toolName||"")===(Zn||""))})||[],me(At),Ut=Ye.filter(function(ct){return ct.id!==Fe&&ct.targetId!==We&&ct.type!==Cn}),He(Ut),Cn===t.qR.Page&&De?.length===1&&v?.expandPageArea===t.p$.Yes&&m(t.p$.No,"expandPageArea");case 12:case"end":return $t.stop()}},P)}));return function(Fe,We,Cn,Zn){return Q.apply(this,arguments)}}(),Mt=function(){var Q=J()(q()().mark(function P(){var Fe,We,Cn,Zn,at=arguments;return q()().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Fe=at.length>0&&at[0]!==void 0?at[0]:!1,At.next=3,Ot(u);case 3:We=At.sent,Cn=We.data,Ue(Cn),Fe||(Zn=Cn?.map(function(Ut){var Sa,$t=Ut.type===t.qR.MCP?(Sa=Ut.bindConfig)===null||Sa===void 0?void 0:Sa.toolName:"";return{type:Ut.type,targetId:Ut.targetId,status:t.BQ.Added,toolName:$t}})||[],me(Zn));case 7:case"end":return At.stop()}},P)}));return function(){return Q.apply(this,arguments)}}(),ka=(0,Fn.Z)(p.AM,{manual:!0,debounceWait:300,onSuccess:function(){var Q=J()(q()().mark(function Fe(){return q()().wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:return cn.ZP.success("\u5DF2\u6210\u529F\u6DFB\u52A0"),Cn.next=3,Mt();case 3:case"end":return Cn.stop()}},Fe)}));function P(){return Q.apply(this,arguments)}return P}(),onError:function(P,Fe){var We=Fe[0],Cn=We.targetId,Zn=We.type;me(function(at){return at.filter(function(Yn){return Yn.type===Zn&&Yn.targetId!==Cn})})}}),Va=ka.run;(0,o.useEffect)(function(){Mt()},[u]);var Rt=function(P,Fe){P.stopPropagation(),V(Fe),tn(!0)},Aa=function(P){P.stopPropagation(),A(!0)},Si=function(){var Q=J()(q()().mark(function P(){var Fe,We;return q()().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:return A(!1),Mt(!0),Zn.next=4,sa(u);case 4:Fe=Zn.sent,We=Fe.data,Ee(We);case 7:case"end":return Zn.stop()}},P)}));return function(){return Q.apply(this,arguments)}}(),_a=function(P){var Fe,We=ne?.find(function(at){return at.id===P}),Cn=We==null||(Fe=We.bindConfig)===null||Fe===void 0?void 0:Fe.inputArgBindConfigs,Zn=(0,kn.T6)(Cn||[]);We&&We.bindConfig&&(We.bindConfig.inputArgBindConfigs=Zn),We?.type===t.qR.Workflow&&(We.bindConfig.argBindConfigs=null),K(We),L(!0)},yi=[{key:d.bX.Plugin,label:"\u63D2\u4EF6",children:(0,e.jsx)(en,{textClassName:it(et.text),type:t.qR.Plugin,list:W(t.qR.Plugin),deleteList:Ye,onSet:_a,onDel:Et}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u63D2\u4EF6",onClick:function(P){return Rt(P,t.qR.Plugin)}}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.Workflow,label:"\u5DE5\u4F5C\u6D41",children:(0,e.jsx)(en,{textClassName:it(et.text),type:t.qR.Workflow,list:W(t.qR.Workflow),deleteList:Ye,onSet:_a,onDel:Et}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u5DE5\u4F5C\u6D41",onClick:function(P){return Rt(P,t.qR.Workflow)}}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.MCP,label:"MCP",children:be!=null&&be.length?be.map(function(Q){return(0,e.jsx)(Ar,{item:Q,deleteList:Ye,onSet:_a,onDel:Et},Q.targetId)}):(0,e.jsx)("p",{className:it(et.text),children:"\u667A\u80FD\u4F53\u53EF\u4EE5\u901A\u8FC7\u6807\u51C6\u5316\u534F\u8BAE\uFF08MCP\uFF09\u8FDE\u63A5\u5404\u7C7B\u670D\u52A1API\u5E76\u53D1\u8D77\u8C03\u7528\u3002"}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0MCP",onClick:function(P){return Rt(P,t.qR.MCP)}}),classNames:{header:"collapse-header",body:"collapse-body"}}],ji=[{key:d.bX.Text,label:"\u6587\u672C",children:(0,e.jsx)(hr,{textClassName:it(et.text),list:W(t.qR.Knowledge),deleteList:Ye,onDel:Et}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u77E5\u8BC6\u5E93",onClick:function(P){return Rt(P,t.qR.Knowledge)}}),classNames:{header:"collapse-header",body:"collapse-body"}}],bi=[{key:d.bX.Variable,label:"\u53D8\u91CF",children:(0,e.jsx)(Lr,{textClassName:it(et.text),list:(Be==null||(l=Be.bindConfig)===null||l===void 0?void 0:l.variables)||[],onClick:Aa}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u53D8\u91CF",onClick:Aa}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.Table,label:"\u6570\u636E\u8868",children:(0,e.jsx)(en,{textClassName:it(et.text),type:t.qR.Table,list:W(t.qR.Table),deleteList:Ye,onSet:_a,onDel:Et}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u6570\u636E\u8868",onClick:function(P){return Rt(P,t.qR.Table)}}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.Long_Memory,label:"\u957F\u671F\u8BB0\u5FC6",children:(0,e.jsx)(xr,{textClassName:it(et.text),openLongMemory:v?.openLongMemory}),extra:(0,e.jsx)(wn.Z,{value:v?.openLongMemory===d.nb.Open,onClick:function(P,Fe){Fe.stopPropagation()},onChange:function(P){return m(P?d.nb.Open:d.nb.Close,"openLongMemory")}}),classNames:{header:"collapse-header",body:"collapse-body"}}],Di=[{key:d.bX.User_Problem_Suggestion,label:"\u7528\u6237\u95EE\u9898\u5EFA\u8BAE",children:(0,e.jsx)("p",{className:it(et.text),children:v?.openSuggest===d.nb.Open?"\u5728\u667A\u80FD\u4F53\u56DE\u590D\u540E\uFF0C\u6839\u636E Prompt \u63D0\u4F9B\u591A\u6761\u7528\u6237\u63D0\u95EE\u5EFA\u8BAE":"\u5728\u6BCF\u6B21\u667A\u80FD\u4F53\u56DE\u590D\u540E\uFF0C\u4E0D\u4F1A\u63D0\u4F9B\u4EFB\u4F55\u7528\u6237\u95EE\u9898\u5EFA\u8BAE"}),extra:(0,e.jsx)(wn.Z,{value:v?.openSuggest===d.nb.Open,onClick:function(P,Fe){Fe.stopPropagation()},onChange:function(P){return m(P?d.nb.Open:d.nb.Close,"openSuggest")}}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.Open_Scheduled_Task,label:"\u5B9A\u65F6\u4EFB\u52A1",children:(0,e.jsx)("p",{className:it(et.text),children:"\u5F00\u542F\u540E\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1\u7684\u65B9\u5F0F\u8BA9\u667A\u80FD\u4F53\u6267\u884C\u4EFB\u52A1"}),extra:(0,e.jsx)(wn.Z,{value:v?.openScheduledTask===d.nb.Open,onClick:function(P,Fe){Fe.stopPropagation()},onChange:function(P){return m(P?d.nb.Open:d.nb.Close,"openScheduledTask")}}),classNames:{header:"collapse-header",body:"collapse-body"}}],Fi=function(P){var Fe=ne?.find(function(We){return We.id===P});K(Fe),ce(!0)},Co=function(P){Ge(!0),$(P)},Ii=(0,Fn.Z)(p.$c,{manual:!0,debounceWait:300}),Ni=Ii.runAsync,Bi=function(){var Q=J()(q()().mark(function P(Fe){var We,Cn,Zn;return q()().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return Cn=_e()(Ve==null||(We=Ve.bindConfig)===null||We===void 0?void 0:We.eventConfigs),Cn?.splice(Fe,1),Zn={id:Ve?.id,bindConfig:{eventConfigs:Cn}},Yn.next=5,Ni(Zn);case 5:cn.ZP.success("\u5220\u9664\u6210\u529F"),Mt(!0);case 7:case"end":return Yn.stop()}},P)}));return function(Fe){return Q.apply(this,arguments)}}(),Pi=function(P,Fe,We){switch(Fe){case t.BV.Edit:Co(P);break;case t.BV.InsertSystemPrompt:if(S){var Cn=`\u8FD4\u56DE\u5185\u5BB9\u540E\u9762\u8FFD\u52A0\u5F15\u7528\u4FE1\u606F\u5982\u4E0B
<div class="event" event-type="`.concat(P.identification,`" data='\u52A8\u6001JSON\u53C2\u6570'>[#\u5F15\u7528\u7F16\u53F7]</div>

`).concat(P.identification,"\u7684\u52A8\u6001JSON\u53C2\u6570JsonSchema\u5982\u4E0B\n\n  ```\n  ").concat(P.argJsonSchema?JSON.stringify(JSON.parse(P.argJsonSchema),null,2):`{
 "type": "object", "properties": {}, "required": []
}`,"\n  ```");S(Cn),cn.ZP.success("\u5DF2\u63D2\u5165\u5230\u7CFB\u7EDF\u63D0\u793A\u8BCD")}else cn.ZP.warning("\u63D2\u5165\u7CFB\u7EDF\u63D0\u793A\u8BCD\u529F\u80FD\u4E0D\u53EF\u7528");break;case t.BV.Delete:Bi(We);break}},Ti=[{key:d.bX.Opening_Remarks,label:"\u5F00\u573A\u767D",children:(0,e.jsx)(Fr,{agentConfigInfo:v,pageArgConfigs:Tn,onChangeAgent:m,onConfirmUpdateEventQuestions:y}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.Page,label:"\u9875\u9762",children:(0,e.jsx)(en,{textClassName:it(et.text),type:t.qR.Page,list:De,deleteList:Ye,onSet:Fi,onDel:Et}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u9875\u9762",onClick:function(P){return Rt(P,t.qR.Page)}}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.Default_Expand_Page_Area,label:"\u5C55\u5F00\u9875\u9762\u533A",children:(0,e.jsx)("p",{className:it(et.text),children:"\u5F53\u7ED9\u667A\u80FD\u4F53\u7ED1\u5B9A\u4E86\u9875\u9762\u540E\uFF0C\u6253\u5F00\u8BE5\u914D\u7F6E\u9879\u65F6\uFF0C\u4F1A\u5728\u667A\u80FD\u4F53\u5BF9\u8BDD\u6846\u65C1\u8FB9\u9ED8\u8BA4\u5C55\u5F00\u9875\u9762"}),extra:(0,e.jsx)(On.Z,{title:De!=null&&De.length?"":"\u8BF7\u5148\u6DFB\u52A0\u9875\u9762",children:(0,e.jsx)(wn.Z,{disabled:!(De!=null&&De.length),value:v?.expandPageArea===t.p$.Yes,onClick:function(P,Fe){Fe.stopPropagation()},onChange:function(P){return m(P?t.p$.Yes:t.p$.No,"expandPageArea")}})}),classNames:{header:"collapse-header",body:"collapse-body"}},{key:d.bX.Page_Event_Binding,label:"\u4E8B\u4EF6\u7ED1\u5B9A",children:(0,e.jsx)(sr,{textClassName:it(et.text),list:(Ve==null||(i=Ve.bindConfig)===null||i===void 0?void 0:i.eventConfigs)||[],onClick:Pi}),extra:(0,e.jsx)(oe.Z,{title:"\u6DFB\u52A0\u4E8B\u4EF6\u7ED1\u5B9A",onClick:function(P){P.stopPropagation(),Co()}}),classNames:{header:"collapse-header",body:"collapse-body"}}],Mi=function(P){me(function(Fe){return[].concat(w()(Fe),[{type:P.targetType,targetId:P.targetId,status:t.BQ.Loading,toolName:P.toolName||""}])}),Va({agentId:u,type:P.targetType,targetId:P.targetId,toolName:P.toolName||""})},Ri=(0,o.useCallback)(function(Q){return Q===t.qR.MCP?_n.a$.filter(function(P){return![d.wQ.Method_Call,d.wQ.Async_Run,d.wQ.Card_Bind].includes(P.type)}):_n.a$},[]),Li=function(){Ge(!1),Mt(!0)},Zi=function(){ce(!1),Mt(!0)};return(0,e.jsxs)("div",{className:T()("overflow-y","flex-1",et.container),children:[(0,e.jsx)(na,{title:"\u6280\u80FD"}),(0,e.jsx)(Pe.Z,{items:yi,defaultActiveKey:Xe}),(0,e.jsx)(na,{title:"\u77E5\u8BC6"}),(0,e.jsx)(Pe.Z,{items:ji,defaultActiveKey:Sn}),(0,e.jsx)(na,{title:"\u8BB0\u5FC6"}),(0,e.jsx)(Pe.Z,{items:bi,defaultActiveKey:Nn}),(0,e.jsx)(na,{title:"\u5BF9\u8BDD\u4F53\u9A8C"}),(0,e.jsx)(Pe.Z,{items:Di,onChangeCollapse:Ie,defaultActiveKey:re}),(0,e.jsx)(na,{title:"\u754C\u9762\u914D\u7F6E"}),(0,e.jsx)(Pe.Z,{items:Ti,defaultActiveKey:nt}),(0,e.jsx)(F.Z,{open:ie,onCancel:function(){return tn(!1)},checkTag:b,addComponents:ee,onAdded:Mi,tabs:Pn.Ne.filter(function(Q){return Q.key!==t.qR.Agent})}),(0,e.jsx)(tr,{open:B,variablesInfo:Be,onCancel:function(){return A(!1)},onConfirm:Si}),(0,e.jsx)(ko,{open:I,variables:(Be==null||(a=Be.bindConfig)===null||a===void 0?void 0:a.variables)||[],currentComponentInfo:z,devConversationId:v?.devConversationId,settingActionList:Ri(z?.type),onCancel:function(){return L(!1)}}),(0,e.jsx)(ir,{open:nn,eventsInfo:Ve,currentEventConfig:G,pageArgConfigs:Tn,onCancel:function(){return Ge(!1)},onConfirm:Li}),(0,e.jsx)(Mr,{open:de,currentComponentInfo:z,allPageComponentList:De,onCancel:Zi})]})},wr=Zr,Or=n(22675),co=n(62597),Ur=n(12758),kr=n(58176),Gn={"xagi-nav-style2":"xagi-nav-style2___qKUvh",text:"text___PhyIY","page-container":"page-container___HL1GJ",header:"header___NlYJu","icon-backward":"icon-backward___b3IzE",avatar:"avatar___Erdew","header-info":"header-info___ij1jH","h-title":"h-title___fTG4i","edit-ico":"edit-ico___GDJ3n","agent-rel-info":"agent-rel-info____068A","space-name":"space-name___YpRDg","save-time-box":"save-time-box___aotv9","save-time":"save-time___dyOcH",volcano:"volcano___iFHwy","fold-box":"fold-box___Xvnhk","fold-btn":"fold-btn___iTXFj","header-title":"header-title___u7b9G","right-box":"right-box___eAszv","publish-btn":"publish-btn___GXQ6m",fold:"fold___V7K4E",ico:"ico___zKzSv"},zn=T().bind(Gn),Vr=function(r){var l,i,a,u=r.agentConfigInfo,v=r.onToggleShowStand,m=r.onToggleVersionHistory,y=r.onEditAgent,S=r.onPublish,j=r.onOtherAction,N=(0,Ae.useParams)(),I=N.spaceId,L=(0,o.useMemo)(function(){if(u){var A;return!(u!=null&&(A=u.permissions)!==null&&A!==void 0&&A.includes(D.jE.Publish))}else return!1},[u]),E=function(h){var H;return u==null||(H=u.permissions)===null||H===void 0?void 0:H.includes(h)},c=(0,o.useMemo)(function(){return _n.$m.filter(function(A){var h=A.type;switch(h){case d.KZ.Temporary_Session:return E(D.jE.TempChat);case d.KZ.Export_Config:return E(D.jE.Export);default:return!0}}).map(function(A){return{key:A.type,label:(0,e.jsx)("div",{onClick:function(){j(A.type)},children:A.label})}})},[u]),B=[{key:"showStand",label:(0,e.jsx)("div",{onClick:v,children:"\u5C55\u793A\u53F0"})},{key:"versionHistory",label:(0,e.jsx)("div",{onClick:m,children:"\u7248\u672C\u5386\u53F2"})}].concat(w()(c));return(0,e.jsxs)("header",{className:zn("flex","items-center","relative",Gn.header),children:[(0,e.jsx)(co.Z,{name:"icons-nav-backward",className:zn(Gn["icon-backward"]),onClick:function(){Ae.history.push("/space/".concat(I,"/develop"))}}),(0,e.jsx)("img",{className:zn(Gn.avatar),src:u?.icon||Or,alt:""}),(0,e.jsx)("div",{className:zn("flex","flex-col",Gn["header-info"]),children:(0,e.jsxs)("div",{className:zn("flex","items-center"),children:[(0,e.jsx)("h3",{className:zn(Gn["h-title"],"text-ellipsis"),children:u?.name}),(0,e.jsxs)("div",{className:zn("flex","items-center",Gn["agent-rel-info"]),children:[(0,e.jsx)(Dn.Z,{condition:u==null||(l=u.space)===null||l===void 0?void 0:l.icon,children:(0,e.jsx)("img",{src:u==null||(i=u.space)===null||i===void 0?void 0:i.icon,alt:""})}),(0,e.jsx)("span",{className:zn(Gn["space-name"],"text-ellipsis"),children:u==null||(a=u.space)===null||a===void 0?void 0:a.name})]}),(0,e.jsx)(Ja.Z,{className:zn(Gn["edit-ico"]),onClick:y})]})}),(0,e.jsxs)("div",{className:zn(Gn["right-box"],"flex","items-center"),children:[(0,e.jsxs)("div",{className:zn("flex","items-center",Gn["save-time-box"]),children:[(0,e.jsxs)("span",{className:zn(Gn["save-time"]),children:["\u8349\u7A3F\u81EA\u52A8\u4FDD\u5B58\u4E8E\xA0",g()(u?.modified).format("HH:mm")]}),u?.publishDate!==null&&g()(u?.publishDate).isBefore(u?.modified)&&(0,e.jsx)(Ur.Z,{bordered:!1,color:"volcano",className:zn(Gn.volcano),children:"\u6709\u66F4\u65B0\u672A\u53D1\u5E03"})]}),(0,e.jsx)("div",{className:zn(Gn["fold-box"]),children:(0,e.jsx)(kr.Z,{menu:{items:B},placement:"bottomLeft",children:(0,e.jsx)("span",{className:zn("flex","items-center","cursor-pointer",Gn["fold-btn"]),children:(0,e.jsx)(co.Z,{name:"icons-common-more"})})})}),(0,e.jsx)(Re.ZP,{type:"primary",className:zn(Gn["publish-btn"]),onClick:S,disabled:L,children:"\u53D1\u5E03"})]})]})},Kr=Vr,Wr=n(99730),Qr=n(80110),Hr=n(88958),Gr=n(73981),ut={"xagi-nav-style2":"xagi-nav-style2___drQy_",text:"text___e2QrX","page-container":"page-container___lY4DG","modal-wrapper":"modal-wrapper___zxeVv",select:"select___s38yZ",title:"title___bLrDJ","generate-name":"generate-name___dwPDv"},Jn=T().bind(ut),zr=function(r){var l=r.spaceId,i=r.modelComponentConfig,a=r.devConversationId,u=r.open,v=r.onCancel,m=(0,o.useState)(0),y=s()(m,2),S=y[0],j=y[1],N=(0,o.useState)([]),I=s()(N,2),L=I[0],E=I[1],c=(0,o.useRef)([]),B=(0,o.useState)({contextRounds:0,maxTokens:0,mode:ln.jD.Precision,temperature:0,topP:0,reasoningModelId:null}),A=s()(B,2),h=A[0],H=A[1],b=(0,o.useRef)(0),V=(0,Ae.useModel)("conversationInfo"),ve=V.runQueryConversation,f=(0,Ae.useRequest)(Wr.Bj,{manual:!0,debounceInterval:300,onSuccess:function(K){c.current=K;var Le=K?.map(function(Ze){return{label:Ze.name,value:Ze.id}})||[];E(Le)}}),re=f.run;(0,o.useEffect)(function(){u&&i&&(b.current=i.id,H(i.bindConfig),j(i.targetId))},[u,i]),(0,o.useEffect)(function(){re({spaceId:l,modelType:Qr.Mj.Chat})},[l]);var Ie=(0,o.useMemo)(function(){var z;return((z=c.current)===null||z===void 0||(z=z.filter(function(K){return K.isReasonModel===1&&K.id!==S}))===null||z===void 0?void 0:z.map(function(K){return{label:K.name,value:K.id}}))||[]},[c.current,S]),sn=(0,o.useMemo)(function(){var z;return(z=c.current)===null||z===void 0?void 0:z.find(function(K){return K.id===S})},[c.current,S]),ze=function(){var z=J()(q()().mark(function K(Le){var Ze,Ye=arguments;return q()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Ze=Ye.length>1&&Ye[1]!==void 0?Ye[1]:S,Se.next=3,(0,p.VV)({id:b.current,targetId:Ze,bindConfig:Le});case 3:case"end":return Se.stop()}},K)}));return function(Le){return z.apply(this,arguments)}}(),ee=function(K){var Le,Ze=Number(K);j(Ze);var Ye=(Le=c.current)===null||Le===void 0?void 0:Le.find(function(Se){return Se.id===Ze}),He=C()({},h);Ye&&Ye.maxTokens<He.maxTokens&&(He=C()(C()({},He),{},{maxTokens:Ye.maxTokens})),Ze===h.reasoningModelId&&(He=C()(C()({},He),{},{reasoningModelId:null})),H(He),ze(He,Ze)},me=function(K){var Le=C()(C()(C()({},h),K!==ln.jD.Customization?_o[K]:{}),{},{mode:K});H(Le),ze(Le)},Je=function(){var z=J()(q()().mark(function K(Le,Ze){var Ye,He;return q()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Ze==="reasoningModelId"?Ye=Number(Le)||null:Ye=Number(Le)||0,He=C()(C()({},h),{},_()(_()({},Ze,Ye),"mode",ln.jD.Customization)),H(He),xe.next=5,ze(He);case 5:Ze==="reasoningModelId"&&a&&ve(a);case 6:case"end":return xe.stop()}},K)}));return function(Le,Ze){return z.apply(this,arguments)}}(),Qe=function(){var K=L?.find(function(Ze){return Ze.value===S}),Le=String(K?.label)||"";v(S,Le,h)};return(0,e.jsxs)(Xn.Z,{title:"\u6A21\u578B\u8BBE\u7F6E",classNames:{content:Jn(ut["modal-wrapper"])},open:u,footer:null,onCancel:Qe,children:[(0,e.jsxs)(Hr.Z,{gap:20,children:[(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h3",{className:Jn(ut.title),children:"\u4F1A\u8BDD\u6A21\u578B"}),(0,e.jsx)(Qt.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F1A\u8BDD\u6A21\u578B",className:Jn(ut.select),onChange:ee,options:L,value:S})]}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h3",{className:Jn(ut.title),children:"\u63A8\u7406\u6A21\u578B(\u53EF\u9009)"}),(0,e.jsx)(Qt.Z,{placeholder:"\u8BF7\u9009\u62E9\u63A8\u7406\u6A21\u578B",className:Jn(ut.select),onChange:function(K){return Je(K,"reasoningModelId")},options:Ie,value:h.reasoningModelId,allowClear:!0})]})]}),(0,e.jsxs)("h3",{className:Jn(ut.title,"flex","items-center"),children:["\u751F\u6210\u591A\u6837\u6027",(0,e.jsx)(oe.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h4",{className:Jn(ut["generate-name"]),children:"\u7CBE\u786E\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u4E25\u683C\u9075\u5FAA\u6307\u4EE4\u751F\u6210\u5185\u5BB9"}),(0,e.jsx)("p",{children:"\u9002\u7528\u4E8E\u9700\u51C6\u786E\u65E0\u8BEF\u7684\u573A\u5408\uFF0C\u5982\u6B63\u5F0F\u6587\u6863\u3001\u4EE3\u7801\u7B49"}),(0,e.jsx)("h4",{className:Jn(ut["generate-name"]),children:"\u5E73\u8861\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u5728\u521B\u65B0\u548C\u7CBE\u786E\u4E4B\u95F4\u5BFB\u6C42\u5E73\u8861"}),(0,e.jsx)("p",{children:"\u9002\u7528\u4E8E\u5927\u591A\u6570\u65E5\u5E38\u5E94\u7528\u573A\u666F\uFF0C\u751F\u6210\u6709\u8DA3\u4F46\u4E0D\u5931\u4E25\u8C28\u7684\u5185\u5BB9"}),(0,e.jsx)("h4",{className:Jn(ut["generate-name"]),children:"\u521B\u610F\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u6FC0\u53D1\u521B\u610F\uFF0C\u63D0\u4F9B\u65B0\u9896\u72EC\u7279\u7684\u60F3\u6CD5"}),(0,e.jsx)("p",{children:"\u9002\u5408\u9700\u8981\u7075\u611F\u548C\u72EC\u7279\u89C2\u70B9\u7684\u573A\u666F\uFF0C\u5982\u5934\u8111\u98CE\u66B4\u3001\u521B\u610F\u5199\u4F5C\u7B49"}),(0,e.jsx)("h4",{className:Jn(ut["generate-name"]),children:"\u81EA\u5B9A\u4E49\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u901A\u8FC7\u9AD8\u7EA7\u8BBE\u7F6E\uFF0C\u81EA\u5B9A\u4E49\u751F\u6210\u65B9\u5F0F"}),(0,e.jsx)("p",{children:"\u6839\u636E\u9700\u6C42\uFF0C\u8FDB\u884C\u7CBE\u7EC6\u8C03\u6574\uFF0C\u5B9E\u73B0\u4E2A\u6027\u5316\u4F18\u5316"})]}),icon:(0,e.jsx)(bn.Z,{}),type:D.Ai.White})]}),(0,e.jsx)(Gr.Z,{options:Ao,rootClassName:Jn("mb-16"),value:h?.mode,onChange:me,block:!0}),(0,e.jsxs)("div",{className:Jn("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u751F\u6210\u968F\u673A\u6027",title:"temperature: \u8C03\u9AD8\u6E29\u5EA6\u4F1A\u4F7F\u5F97\u6A21\u578B\u7684\u8F93\u51FA\u66F4\u591A\u6837\u6027\u548C\u521B\u65B0\u6027\uFF0C\u53CD\u4E4B\uFF0C\u964D\u4F4E\u6E29\u5EA6\u4F1A\u4F7F\u8F93\u51FA\u5185\u5BB9\u66F4\u52A0\u9075\u5FAA\u6307\u4EE4\u8981\u6C42\u4F46\u51CF\u5C11\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E \u201CTop p\u201D \u540C\u65F6\u8C03\u6574"}),(0,e.jsx)(Ht,{min:0,max:1,step:.1,value:String(h?.temperature)||"0",onChange:function(K){return Je(K,"temperature")}})]}),(0,e.jsxs)("div",{className:Jn("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"Top p",title:"Top p \u4E3A\u7D2F\u8BA1\u6982\u7387: \u6A21\u578B\u5728\u751F\u6210\u8F93\u51FA\u65F6\u4F1A\u4ECE\u6982\u7387\u6700\u9AD8\u7684\u8BCD\u6C47\u5F00\u59CB\u9009\u62E9\uFF0C\u76F4\u5230\u8FD9\u4E9B\u8BCD\u6C47\u7684\u603B\u6982\u7387\u7D2F\u79EF\u8FBE\u5230 Top p \u503C\u3002\u8FD9\u6837\u53EF\u4EE5\u9650\u5236\u6A21\u578B\u53EA\u9009\u62E9\u8FD9\u4E9B\u9AD8\u6982\u7387\u7684\u8BCD\u6C47\uFF0C\u4ECE\u800C\u63A7\u5236\u8F93\u51FA\u5185\u5BB9\u7684\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E \u201C\u751F\u6210\u968F\u673A\u6027\u201D \u540C\u65F6\u8C03\u6574\u3002"}),(0,e.jsx)(Ht,{min:0,max:1,step:.1,value:String(h?.topP)||"0",onChange:function(K){return Je(K,"topP")}})]}),(0,e.jsx)("h3",{className:Jn(ut.title),children:"\u8F93\u5165\u53CA\u8F93\u51FA\u8BBE\u7F6E"}),(0,e.jsxs)("div",{className:Jn("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u643A\u5E26\u4E0A\u4E0B\u6587\u8F6E\u6570",title:"\u8BBE\u7F6E\u5E26\u5165\u6A21\u578B\u4E0A\u4E0B\u6587\u7684\u5BF9\u8BDD\u5386\u53F2\u8F6E\u6570\u3002\u8F6E\u6570\u8D8A\u591A\uFF0C\u591A\u8F6E\u5BF9\u8BDD\u7684\u76F8\u5173\u6027\u8D8A\u9AD8\uFF0C\u4F46\u6D88\u8017\u7684 Token \u4E5F\u8D8A\u591A"}),(0,e.jsx)(Ht,{min:0,max:100,step:1,value:String(h?.contextRounds)||"0",onChange:function(K){return Je(K,"contextRounds")}})]}),(0,e.jsxs)("div",{className:Jn("flex","mb-16"),children:[(0,e.jsx)(yt.Z,{label:"\u6700\u5927\u56DE\u590D\u957F\u5EA6",title:"\u63A7\u5236\u6A21\u578B\u8F93\u51FA\u7684 Tokens \u957F\u5EA6\u4E0A\u9650\u3002\u901A\u5E38 100 Tokens \u7EA6\u7B49\u4E8E 150 \u4E2A\u4E2D\u6587\u6C49\u5B57\u3002"}),(0,e.jsx)(Ht,{min:1,max:sn?.maxTokens||4096,step:1,value:String(h?.maxTokens)||"0",onChange:function(K){return Je(K,"maxTokens")}})]})]})},Jr=zr,Ua={"xagi-nav-style2":"xagi-nav-style2___igdHc",text:"text___FYHpi","page-container":"page-container___xKmft","edit-header":"edit-header___LXHm6","drop-box":"drop-box___RbaYp"},vo=T().bind(Ua),Yr=function(r){var l=r.icon,i=r.modelName,a=r.onClick;return(0,e.jsxs)("div",{className:vo("flex","content-between","items-center",Ua["edit-header"]),children:[(0,e.jsx)("h3",{children:"\u7F16\u6392"}),(0,e.jsxs)("div",{className:vo("flex","items-center","cursor-pointer",Ua["drop-box"]),onClick:a,children:[(0,e.jsx)(Dn.Z,{condition:!!l,children:(0,e.jsx)("img",{src:l,alt:""})}),(0,e.jsx)("span",{children:i}),(0,e.jsx)(Lt.le,{name:"icons-common-caret_down",style:{fontSize:16}})]})]})},Xr=Yr,$r=n(77992),qr=n(26292),ei=n(89083),ni=n(64771),ti=n(58226),Ln={"xagi-nav-style2":"xagi-nav-style2___doNDO",text:"text___ZGIMU","page-container":"page-container___CxNyw",header:"header___Zhp3M","time-box":"time-box___MlxEC",num:"num___pCG3M","vertical-line":"vertical-line___zScjb",box:"box___DfwY3",value:"value___G3F6B",wrap:"wrap___SC3yY",title:"title___Lh0ck","execute-box":"execute-box___GwF5n","component-img":"component-img___a4HVL",name:"name___mFM56",active:"active___vF1vf","render-container":"render-container___EHMbK"},ai=n(50644),wt={container:"container___TOg3u",box:"box___NOAzh","mt-10":"mt-10___DaRdj",label:"label___kH9Er",value:"value___PNdD7"},Ca=T().bind(wt),oi=function(r){var l=r.node,i=function(m,y,S){return(0,e.jsxs)("div",{className:Ca("flex",wt.box,S),children:[(0,e.jsxs)("span",{className:Ca(wt.label),children:[m,"\uFF1A"]}),(0,e.jsx)(ai.H,{text:y||"--",className:Ca(wt.value,"flex-1")})]})},a=l?"".concat(l?.endTime-l?.startTime,"ms"):"--",u=(0,o.useMemo)(function(){switch(l?.type){case t.qR.Plugin:return"\u63D2\u4EF6";case t.qR.Workflow:return"\u5DE5\u4F5C\u6D41";case t.qR.Knowledge:return"\u77E5\u8BC6\u5E93";case t.qR.Variable:return"\u53D8\u91CF";case t.qR.Table:return"\u6570\u636E\u8868";case t.qR.Model:return"\u6A21\u578B";case t.qR.MCP:return"MCP";default:return"--"}},[l?.type]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:Ca(wt.container),children:[i("\u7C7B\u578B",u),i("\u72B6\u6001","\u6210\u529F"),i("\u540D\u79F0",l?.name),i("\u8017\u65F6",a)]}),i("\u53D1\u8D77\u65F6\u95F4",l!=null&&l.startTime?g()(l?.startTime).format("YYYY-MM-DD HH:mm"):"",wt["mt-10"]),i("\u7ED3\u675F\u65F6\u95F4",l!=null&&l.endTime?g()(l?.endTime).format("YYYY-MM-DD HH:mm"):"",wt["mt-10"])]})},Kn=T().bind(Ln),ri=function(r){var l,i=r.visible,a=r.onClose,u=(0,Ae.useModel)("conversationInfo"),v=u.requestId,m=u.finalResult,y=u.setFinalResult,S=(0,o.useState)(),j=s()(S,2),N=j[0],I=j[1],L=(0,o.useState)(0),E=s()(L,2),c=E[0],B=E[1],A=(0,o.useState)(""),h=s()(A,2),H=h[0],b=h[1],V=(0,o.useState)(""),ve=s()(V,2),f=ve[0],re=ve[1],Ie=function(me){return typeof me=="string"?me:JSON.stringify(me,null,2)};(0,o.useEffect)(function(){var ee=m?.componentExecuteResults||[];if(ee?.length>0){var me=ee[c];if(I(me),me){var Je=Ie(me.input);b(Je);var Qe=Ie(me.data);re(Qe)}}else I(null),b(""),re("")},[m,c]),(0,o.useEffect)(function(){B(0)},[m]),(0,o.useEffect)(function(){return function(){y(null)}},[]);var sn=function(){cn.ZP.success("\u590D\u5236\u6210\u529F")},ze=function(me){switch(me.type){case t.qR.Plugin:return rn;case t.qR.Workflow:return dn;case t.qR.Knowledge:return ao;case t.qR.Variable:return qr;case t.qR.Table:return Me;case t.qR.Model:return $r;case t.qR.MCP:return $e;default:return rn}};return(0,e.jsx)(ei.Z,{title:"\u8C03\u8BD5\u8BE6\u60C5",onClose:a,visible:i,children:m?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("header",{className:Kn(Ln.header),children:[(0,e.jsx)("div",{className:Kn("flex",Ln["time-box"]),children:(0,e.jsxs)("div",{className:Kn(Ln.num,"flex","items-center"),children:[(0,e.jsxs)("span",{children:["\u8017\u65F6",m.endTime-m.startTime," ms"]}),(0,e.jsx)("span",{className:Kn(Ln["vertical-line"])}),(0,e.jsxs)("span",{children:[m.totalTokens," Tokens"]})]})}),(0,e.jsxs)("div",{className:Kn("flex",Ln.box),children:[(0,e.jsx)("span",{children:"requestId:"}),(0,e.jsx)("span",{className:Kn(Ln.value,"text-ellipsis"),children:v}),(0,e.jsx)(ti.CopyToClipboard,{text:v||"",onCopy:sn,children:(0,e.jsx)(ni.Z,{})})]})]}),(0,e.jsxs)("div",{className:Kn(Ln.wrap),children:[(0,e.jsx)("h5",{className:Kn(Ln.title),children:"\u8C03\u7528\u7EC4\u4EF6"}),m==null||(l=m.componentExecuteResults)===null||l===void 0?void 0:l.map(function(ee,me){return(0,e.jsxs)("div",{className:Kn(Ln["execute-box"],"flex","items-center"),children:[(0,e.jsx)("img",{className:Kn(Ln["component-img"]),src:ee?.icon||ze(ee),onError:function(Qe){Qe.currentTarget.onerror=null,Qe.currentTarget.src=ze(ee)},alt:""}),(0,e.jsx)("span",{className:Kn(Ln.name,"cursor-pointer",_()({},Ln.active,c===me)),onClick:function(){return B(me)},children:ee.name})]},ee?.id||me)})]}),(0,e.jsxs)("div",{className:Kn(Ln.wrap),children:[(0,e.jsx)("h5",{className:Kn(Ln.title),children:"\u8282\u70B9\u8BE6\u60C5"}),(0,e.jsx)(oi,{node:N})]}),(0,e.jsxs)("div",{className:Kn(Ln.wrap,Ln["render-container"]),children:[(0,e.jsx)("h5",{className:Kn(Ln.title),children:"\u8F93\u5165"}),(0,e.jsx)("pre",{children:H})]}),(0,e.jsxs)("div",{className:Kn(Ln.wrap,Ln["render-container"]),children:[(0,e.jsx)("h5",{className:Kn(Ln.title),children:"\u8F93\u51FA"}),(0,e.jsx)("pre",{children:f})]})]}):(0,e.jsx)("div",{className:Kn("flex","h-full","items-center","content-center"),children:(0,e.jsx)(ba.Z,{description:"\u6682\u65E0\u6570\u636E"})})})},ii=(0,o.memo)(ri),Jt={"xagi-nav-style2":"xagi-nav-style2___ENYpU",text:"text___ARP6g","page-container":"page-container___G6HH4",container:"container___NqsMD","title-style":"title-style___JBmj5","edit-content":"edit-content___FOZJf",section:"section___tvgXt","edit-info":"edit-info___B_f4_","h-line":"h-line___sXIzi"},ui=n(65857),li=n(49974),si=n(34077),di=n(2349),mo=n(84283),fo=n(71530),ci=n(75468),vi=n(11872),mi=n(88458),go=n(35855),fi=n(32699),oa={"xagi-nav-style2":"xagi-nav-style2___viIps",text:"text___USG72","page-container":"page-container___sAe9w",container:"container___Kt1nG",loading:"loading___tGVwz","main-content":"main-content___YdPCn","chat-wrapper":"chat-wrapper___IAYX5"},ra={"xagi-nav-style2":"xagi-nav-style2___OXozL",text:"text___AjEUO","page-container":"page-container___Rd4a6",container:"container___bIrt_","extra-box":"extra-box___CdP4P",debug:"debug___pjPlo"},xa=T().bind(ra),gi=function(r){var l=r.onPressDebug,i=r.onShowPreview,a=r.isShowPreview,u=(0,Ae.useModel)("conversationInfo"),v=u.showType;return(0,e.jsxs)("header",{className:xa("flex","content-between","items-center",ra.container),children:[(0,e.jsx)("h3",{children:"\u9884\u89C8\u4E0E\u8C03\u8BD5"}),(0,e.jsxs)("div",{className:xa(ra["extra-box"],"flex"),children:[(v===d.wv.Version_History||v===d.wv.Show_Stand||v===d.wv.Hide)&&(0,e.jsx)(Re.ZP,{type:"text",className:xa(ra.debug),icon:(0,e.jsx)(Lt.le,{name:"icons-common-debug",style:{fontSize:16}}),onClick:l,children:"\u8C03\u8BD5"}),a&&(0,e.jsx)(Re.ZP,{type:"text",className:xa(ra.debug),icon:(0,e.jsx)(Lt.le,{name:"icons-nav-ecosystem",style:{fontSize:16}}),onClick:function(){return i?.()}})]})]})},pi=gi,Yt=T().bind(oa),hi=function(r){var l,i=r.agentId,a=r.agentConfigInfo,u=r.onAgentConfigInfo,v=r.onPressDebug,m=r.onOpenPreview,y=An.Z.useForm(),S=s()(y,1),j=S[0],N=(0,o.useRef)(0),I=(0,o.useState)(null),L=s()(I,2),E=L[0],c=L[1],B=(0,Ae.useModel)("conversationInfo"),A=B.conversationInfo,h=B.messageList,H=B.setMessageList,b=B.chatSuggestList,V=B.loadingConversation,ve=B.runQueryConversation,f=B.isLoadingConversation,re=B.setIsLoadingConversation,Ie=B.loadingSuggest,sn=B.onMessageSend,ze=B.messageViewRef,ee=B.messageViewScrollToBottom,me=B.allowAutoScrollRef,Je=B.scrollTimeoutRef,Qe=B.handleClearSideEffect,z=B.showScrollBtn,K=B.setShowScrollBtn,Le=B.resetInit,Ze=B.manualComponents,Ye=B.variables,He=B.userFillVariables,Se=B.requiredNameList,xe=B.showType,ie=B.setShowType,tn=(0,Ae.useModel)("chat"),In=tn.pagePreviewData,Bn=(0,ci.Z)(),nn=Bn.runAsyncConversationCreate,Ge=(0,mi.Z)(),pn=Ge.selectedComponentList,ye=Ge.handleSelectComponent,de=Ge.initSelectedComponentList,ce=An.Z.useWatch([],{form:j,preserve:!0});(0,o.useEffect)(function(){ce&&Object.keys(ce).length===0||j.validateFields({validateOnly:!0}).then(function(){return c(ce)}).catch(function(){return c(null)})},[j,ce]),(0,o.useEffect)(function(){He&&c(He)},[He]);var hn=(0,o.useMemo)(function(){if(Se?.length>0){if(!E)return!0;var R=(0,M.VL)(Se,Object.keys(E));return!R}return!1},[Se,E]),ne=(0,o.useMemo)(function(){return{assistant:{name:a?.name,avatar:a?.icon},system:{name:a?.name,avatar:a?.icon}}},[a]);(0,o.useEffect)(function(){var R=ze.current;if(R){var G=function(){var be=R.scrollTop,Be=R.scrollHeight,Ve=R.clientHeight;be+Ve<Be?(me.current=!1,Je.current&&(clearTimeout(Je.current),Je.current=null),K(!0)):(me.current=!0,K(!1))},$=(0,fi.throttle)(G,300);return R.addEventListener("wheel",$),function(){R.removeEventListener("wheel",$),Le()}}},[]),(0,o.useEffect)(function(){de(Ze)},[Ze]),(0,o.useEffect)(function(){if(a){var R=a.devConversationId;N.current=R,re(!1),ve(R)}},[a?.devConversationId]);var Ue=function(G){var $=G.conversationId,W=G.message;N.current===Number($)&&(H(function(be){return[].concat(w()(be),[W])}),me.current&&ee())};(0,o.useEffect)(function(){return go.Z.on(fo.Z.RefreshChatMessage,Ue),function(){go.Z.off(fo.Z.RefreshChatMessage,Ue)}},[]);var je=(0,o.useCallback)(J()(q()().mark(function R(){var G,$,W,be,Be;return q()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return Qe(),H([]),re(!1),De.next=5,nn({agentId:i,devMode:!0});case 5:G=De.sent,$=G.success,W=G.data,$&&(be=W?.id,N.current=be,a&&(Be=_e()(a),Be.devConversationId=be,u(Be)),ve(be));case 9:case"end":return De.stop()}},R)})),[i,a]),Ee=function(G,$){var W=N.current;if(W){if(hn){j.validateFields(),cn.ZP.warning("\u8BF7\u586B\u5199\u5FC5\u586B\u53C2\u6570");return}sn(W,G,$,pn,E,!0,!1)}},mn=function(){me.current=!0,ee(),K(!1)};return(0,vi.Z)({containerRef:ze,eventBindConfig:A==null||(l=A.agent)===null||l===void 0?void 0:l.eventBindConfig}),(0,o.useEffect)(function(){In&&xe===d.wv.Debug_Details&&ie(d.wv.Hide)},[In,xe,ie]),(0,e.jsx)("div",{className:Yt(oa.container,"flex","h-full"),children:a!=null&&a.hideChatArea?null:(0,e.jsxs)("div",{className:Yt("flex","flex-col"),style:{flex:1,minWidth:340},children:[(0,e.jsx)(pi,{onPressDebug:v,isShowPreview:!In&&!!(a!=null&&a.expandPageArea),onShowPreview:function(){m?.()}}),(0,e.jsxs)("div",{className:Yt(oa["main-content"],"flex-1","flex","flex-col","overflow-hide"),children:[(0,e.jsx)(di.Z,{form:j,variables:Ye,isFilled:!0,userFillVariables:He}),(0,e.jsx)("div",{className:Yt(oa["chat-wrapper"],"scroll-container","flex-1"),ref:ze,children:V?(0,e.jsx)("div",{className:Yt("flex","items-center","content-center","h-full"),children:(0,e.jsx)(un.Z,{className:Yt(oa.loading)})}):h?.length>0?(0,e.jsxs)(e.Fragment,{children:[h?.map(function(R){return(0,e.jsx)(si.Z,{messageInfo:R,roleInfo:ne,mode:"chat"},R?.id)}),(0,e.jsx)(mo.Z,{loading:Ie,chatSuggestList:b,onClick:Ee})]}):f&&(0,e.jsx)(ui.Z,{className:"h-full",icon:a?.icon,name:a?.name,extra:(0,e.jsx)(mo.Z,{className:"mt-16",loading:Ie,chatSuggestList:b,onClick:Ee})})}),(0,e.jsx)(li.Z,{clearDisabled:!(h!=null&&h.length),onEnter:Ee,onClear:je,wholeDisabled:hn,visible:z,manualComponents:Ze,selectedComponentList:pn,onSelectComponent:ye,onScrollBottom:mn},"edit-agent-".concat(i))]})]})})},Ci=hi,xi=n(84720),po=n(39244),ia={"xagi-nav-style2":"xagi-nav-style2___B3J39",text:"text___uQ7fZ","page-container":"page-container___nYwgb",container:"container___jDARb","system-tips-wrapper":"system-tips-wrapper____JACe","system-tips":"system-tips___GQnw1","optimize-btn":"optimize-btn___SX6yI","text-area":"text-area___eJKj6"},Ea=T().bind(ia),ho=(0,o.forwardRef)(function(ke,r){var l=ke.value,i=ke.agentConfigInfo,a=ke.onChange,u=ke.onReplace,v=(0,o.useState)(!1),m=s()(v,2),y=m[0],S=m[1],j=(0,o.useRef)(null),N=(0,o.useRef)(null),I=function(c){var B;if(!N.current){var A=l||"",h=A?"".concat(A,`
`).concat(c):c;a(h);return}var H=(B=N.current)===null||B===void 0?void 0:B.getCursorPosition();try{var b,V,ve;if(typeof((b=N.current)===null||b===void 0?void 0:b.replaceText)!="function")throw new Error("replaceText \u65B9\u6CD5\u4E0D\u5B58\u5728");var f={from:H,to:H,text:c,cursorOffset:c.length,scrollIntoView:!0,userEvent:"insertText"};(V=N.current)===null||V===void 0||(ve=V.replaceText)===null||ve===void 0||ve.call(V,f);return}catch{}var re=l||"";if(re){var Ie=re.substring(0,H),sn=re.substring(H),ze="".concat(Ie,`
`).concat(c).concat(sn);a(ze)}else a(c)};(0,o.useImperativeHandle)(r,function(){return{insertText:function(c){I(c)}}});var L=function(c){S(!1),u(c)};return(0,e.jsxs)("div",{className:Ea("flex","flex-col","flex-1",ia.container),children:[(0,e.jsxs)("div",{className:Ea("flex","items-center","content-between",ia["system-tips-wrapper"]),children:[(0,e.jsx)("span",{className:Ea(ia["system-tips"]),children:"\u7CFB\u7EDF\u63D0\u793A\u8BCD"}),(0,e.jsx)(On.Z,{title:"\u81EA\u52A8\u4F18\u5316\u63D0\u793A\u8BCD",placement:"top",children:(0,e.jsx)(Re.ZP,{color:"primary",variant:"filled",size:"small",className:Ea(ia["optimize-btn"]),icon:(0,e.jsx)(Lt.le,{name:"icons-common-stars",style:{fontSize:16}}),onClick:function(){return S(!0)},children:"\u4F18\u5316"})})]}),(0,e.jsx)(po.h,{children:(0,e.jsx)("div",{ref:j,className:"flex-1 scroll-container",children:(0,e.jsx)(po.g,{value:l,onChange:a,isControled:!0,placeholder:"\u8F93\u5165\u7CFB\u7EDF\u63D0\u793A\u8BCD\uFF0C\u5BF9\u5927\u6A21\u578B\u8FDB\u884C\u89D2\u8272\u5851\u9020",getEditor:function(c){N.current=c}})})}),(0,e.jsx)(xi.Z,{open:y,onCancel:function(){return S(!1)},onReplace:L,targetId:i?.id,defaultValue:l||"".concat(i?.name||"")+"".concat(i?.description||"")})]})});ho.displayName="SystemTipsWord";var Ei=ho,ua=T().bind(Jt),Ai=function(){var r,l,i=(0,Ae.useParams)(),a=(0,o.useRef)(null),u=Number(i.spaceId),v=Number(i.agentId),m=(0,o.useState)(!1),y=s()(m,2),S=y[0],j=y[1],N=(0,o.useState)(!1),I=s()(N,2),L=I[0],E=I[1],c=(0,o.useState)(!1),B=s()(c,2),A=B[0],h=B[1],H=(0,Y.Z)(),b=H.navigationStyle,V=(0,o.useState)(),ve=s()(V,2),f=ve[0],re=ve[1],Ie=(0,Ae.useModel)("conversationInfo"),sn=Ie.cardList,ze=Ie.showType,ee=Ie.setShowType,me=Ie.setIsSuggest,Je=Ie.messageList,Qe=Ie.setChatSuggestList,z=(0,Ae.useModel)("tenantConfigInfo"),K=z.setTitle,Le=(0,Ae.useModel)("chat"),Ze=Le.pagePreviewData,Ye=Le.hidePagePreview,He=Le.showPagePreview,Se=(0,Ae.useRequest)(p.T_,{manual:!0,debounceInterval:300,onSuccess:function(Xe){re(Xe)}}),xe=Se.run,ie=(0,Ae.useRequest)(p.T_,{manual:!0,debounceInterval:300,onSuccess:function(Xe){var Sn=C()(C()({},f),{},{pageHomeIndex:Xe.pageHomeIndex});re(Sn)}}),tn=ie.run,In=(0,Ae.useRequest)(p.mp,{manual:!0,debounceInterval:1e3}),Bn=In.run;(0,o.useEffect)(function(){xe(v),K()},[v]),(0,o.useEffect)(function(){(0,M.t7)()},[]);var nn=function(Xe){var Sn=C()(C()({},f),Xe);re(Sn),E(!1)},Ge=function(Xe,Sn,Nn){h(!1);var nt=_e()(f);nt.modelComponentConfig.bindConfig=Nn,nt.modelComponentConfig.targetId=Xe,nt.modelComponentConfig.name=Sn,re(nt)},pn=function(Xe,Sn){var Nn=C()(C()({},f),{},_()({},Sn,Xe));if(Nn.publishStatus===D.xH.Published&&(Nn.modified=g()().toString()),re(Nn),Sn==="guidQuestionDtos"&&!(Je!=null&&Je.length)){var nt,Ct=Xe,Ot=(Ct==null||(nt=Ct.filter(function(xt){return!!xt.info}))===null||nt===void 0?void 0:nt.map(function(xt){return xt.info}))||[];Qe(Ot)}return Nn},ye=function(Xe,Sn){var Nn=pn(Xe,Sn);Sn==="openSuggest"&&me(Xe===d.nb.Open),Sn==="expandPageArea"&&tn(v);var nt=Nn.id,Ct=Nn.name,Ot=Nn.description,xt=Nn.icon,la=Nn.userPrompt,Xt=Nn.openSuggest,sa=Nn.systemPrompt,Et=Nn.suggestPrompt,Mt=Nn.openingChatMsg,ka=Nn.openScheduledTask,Va=Nn.openLongMemory,Rt=Nn.expandPageArea,Aa=Nn.guidQuestionDtos;Bn({id:nt,name:Ct,description:Ot,icon:xt,systemPrompt:sa,userPrompt:la,openSuggest:Xt,suggestPrompt:Et,openingChatMsg:Mt,openScheduledTask:ka,openLongMemory:Va,expandPageArea:Rt,guidQuestionDtos:Aa})},de=function(Xe){var Sn;(Sn=a.current)===null||Sn===void 0||Sn.insertText(Xe)};(0,o.useEffect)(function(){Ze&&ee(d.wv.Hide)},[Ze]);var ce=function(){j(!1);var Xe=g()().toString(),Sn=C()(C()({},f),{},{publishDate:Xe,modified:Xe,publishStatus:D.xH.Published});re(Sn)},hn=(0,o.useState)([]),ne=s()(hn,2),Ue=ne[0],je=ne[1],Ee=(0,o.useState)(!1),mn=s()(Ee,2),R=mn[0],G=mn[1],$=(0,o.useState)(!1),W=s()($,2),be=W[0],Be=W[1],Ve=function(Xe){var Sn=Xe?.agentStatistics||{},Nn=Sn.userCount,nt=Nn===void 0?0:Nn,Ct=Sn.convCount,Ot=Ct===void 0?0:Ct,xt=Sn.collectCount,la=xt===void 0?0:xt,Xt=Sn.likeCount,sa=Xt===void 0?0:Xt,Et=[{label:"\u5BF9\u8BDD\u4EBA\u6570",value:nt},{label:"\u5BF9\u8BDD\u6B21\u6570",value:Ot},{label:"\u6536\u85CF\u7528\u6237\u6570",value:la},{label:"\u70B9\u8D5E\u6B21\u6570",value:sa}];je(Et)},De=function(Xe){switch(Xe){case d.KZ.Analyze:Ve(f),G(!0);break;case d.KZ.Temporary_Session:Be(!0);break;case d.KZ.Export_Config:(0,le.oB)("\u5BFC\u51FA\u914D\u7F6E - ".concat(f?.name),"\u5982\u679C\u5185\u90E8\u5305\u542B\u6570\u636E\u8868\u6216\u77E5\u8BC6\u5E93\uFF0C\u6570\u636E\u672C\u8EAB\u4E0D\u4F1A\u5BFC\u51FA",function(){return(0,Ke._)(f?.id,t.qR.Agent),new Promise(function(Sn){setTimeout(Sn,1e3)})});break;case d.KZ.Log:Ae.history.push("/space/".concat(u,"/").concat(f?.id,"/log"));break}},Tn=function(){f&&f!==null&&f!==void 0&&f.expandPageArea&&f!==null&&f!==void 0&&f.pageHomeIndex?He({name:"\u9875\u9762\u9884\u89C8",uri:""+f?.pageHomeIndex,params:{},executeId:""}):He(null)};return(0,o.useEffect)(function(){Tn()},[f?.expandPageArea,f?.pageHomeIndex]),(0,e.jsxs)("div",{className:ua(Jt.container,"h-full","flex","flex-col"),children:[(0,e.jsx)(Kr,{agentConfigInfo:f,onToggleShowStand:function(){Ye(),ee(d.wv.Show_Stand)},onToggleVersionHistory:function(){Ye(),ee(d.wv.Version_History)},onEditAgent:function(){return E(!0)},onPublish:function(){return j(!0)},onOtherAction:De}),(0,e.jsxs)("section",{className:ua("flex","flex-1",Jt.section,"xagi-nav-".concat(b)),children:[(0,e.jsxs)("div",{className:ua("radius-6","flex","flex-col",Jt["edit-info"]),children:[(0,e.jsx)(Xr,{icon:f==null||(r=f.modelComponentConfig)===null||r===void 0?void 0:r.icon,modelName:f==null||(l=f.modelComponentConfig)===null||l===void 0?void 0:l.name,onClick:function(){return h(!0)}}),(0,e.jsxs)("div",{className:ua("flex-1","flex","overflow-y",Jt["edit-content"]),children:[(0,e.jsx)(Ei,{ref:a,agentConfigInfo:f,value:f?.systemPrompt,onChange:function(Xe){return ye(Xe,"systemPrompt")},onReplace:function(Xe){return ye(Xe,"systemPrompt")}}),(0,e.jsx)(wr,{agentId:v,agentConfigInfo:f,onChangeAgent:ye,onConfirmUpdateEventQuestions:pn,onInsertSystemPrompt:de})]})]}),(!(f!=null&&f.hideChatArea)||Ze)&&(0,e.jsx)("div",{style:{flex:Ze?"9 1":"4 1",minWidth:Ze?"1050px":"350px"},children:(0,e.jsx)(x.Z,{minRightWidth:700,left:f!=null&&f.hideChatArea?null:(0,e.jsx)(Ci,{agentConfigInfo:f,agentId:v,onPressDebug:function(){Ye(),ee(d.wv.Debug_Details)},onAgentConfigInfo:re,onOpenPreview:Tn}),right:Ze&&(0,e.jsx)(xn.Z,{pagePreviewData:Ze,showHeader:!0,onClose:Ye,showCloseButton:!(f!=null&&f.hideChatArea),titleClassName:ua(Jt["title-style"])})})}),(0,e.jsx)(ii,{visible:ze===d.wv.Debug_Details,onClose:function(){return ee(d.wv.Hide)}}),(0,e.jsx)(te.Z,{cardList:sn,visible:ze===d.wv.Show_Stand,onClose:function(){return ee(d.wv.Hide)}}),(0,e.jsx)(Z.Z,{targetId:v,targetName:f?.name,targetType:t.qR.Agent,permissions:f?.permissions||[],visible:ze===d.wv.Version_History,onClose:function(){return ee(d.wv.Hide)}})]}),(0,e.jsx)(ue.Z,{targetId:v,open:S,spaceId:u,category:f?.category,onCancel:function(){return j(!1)},onConfirm:ce}),(0,e.jsx)(U.Z,{spaceId:u,mode:D.jA.Update,agentConfigInfo:f,open:L,onCancel:function(){return E(!1)},onConfirmUpdate:nn}),(0,e.jsx)(Jr,{spaceId:u,modelComponentConfig:f?.modelComponentConfig,open:A,devConversationId:f?.devConversationId,onCancel:Ge}),(0,e.jsx)(se.Z,{open:R,onCancel:function(){return G(!1)},title:"\u667A\u80FD\u4F53\u6982\u89C8",list:Ue}),(0,e.jsx)(ae.Z,{agentId:f?.id,open:be,name:f?.name,onCancel:function(){return Be(!1)}})]})},_i=Ai},65390:function(yn,Te,n){n.d(Te,{Z:function(){return x}});var Ne=n(14719),_=n(94581),O=n.n(_),C=n(75271),fe={"analyze-wrapper":"analyze-wrapper___DMVbd","analyze-box":"analyze-box___mZugc","row-line":"row-line___cymU3","vertical-line":"vertical-line___LT3CR"},s=n(52676),U=O().bind(fe),ue=function(Z){var Y=Z.open,se=Z.onCancel,ae=Z.title,p=Z.list;return(0,s.jsx)(Ne.Z,{open:Y,onCancel:se,title:ae,footer:!1,width:556,children:(0,s.jsxs)("div",{className:U("flex","flex-wrap",fe["analyze-wrapper"]),children:[p?.map(function(t,D){return(0,s.jsxs)("div",{className:U(fe["analyze-box"],"flex","flex-col"),children:[(0,s.jsx)("span",{children:t.label}),(0,s.jsx)("div",{className:U("flex","items-center","content-center"),children:t.value})]},D)}),(0,s.jsx)("div",{className:U(fe["row-line"])}),(0,s.jsx)("div",{className:U(fe["vertical-line"])})]})})},x=ue},85461:function(yn,Te,n){n.d(Te,{Z:function(){return rn}});var Ne=n(82092),_=n.n(Ne),O=n(26068),C=n.n(O),fe=n(15558),s=n.n(fe),U=n(48305),ue=n.n(U),x=n(72611),te=n(50644),Z=n(94652),Y=n(86743),se=n(16621),ae=n(41249),p=n(68108),t=n(43898),D=n(67130),d=n(86524),le=n(9504),M=n(14719),Ke=n(10580),ge=n(70183),T=n(39319),pe=n(39357),g=n(94581),he=n.n(g),_e=n(16483),o=n.n(_e),Ae=n(75271),xn=n(58226),k=n.n(xn),q=n(87453),on={container:"container___ucaEF","table-wrap":"table-wrap___KFIpR","url-box":"url-box___A_aT7","chat-url":"chat-url___qrgrJ","img-box":"img-box___onytl","copy-img-box":"copy-img-box___wP83A",img:"img___DXQBL","qr-code-modal":"qr-code-modal___vOzXg"},J=n(24057),fn=n(70199),w=n(52676);o().locale("zh-cn");var Me=he().bind(on),$e=function(Ce){var oe=Ce.agentId,Oe=Ce.name,un=Ce.open,gn=Ce.onCancel,e=(0,Ae.useState)([]),qe=ue()(e,2),en=qe[0],Pe=qe[1],F=(0,Ae.useState)(""),Pn=ue()(F,2),_n=Pn[0],kn=Pn[1],Fn=(0,Ae.useState)(!1),cn=ue()(Fn,2),wn=cn[0],On=cn[1],Vn=(0,q.useRequest)(Z.Ai,{manual:!0,debounceInterval:300,onSuccess:function(ln){Pe([].concat(s()(en),[ln]))}}),vt=Vn.run,Xn=Vn.loading,Dn=(0,q.useRequest)(Z.is,{manual:!0,debounceInterval:300,onSuccess:function(ln){Pe(ln||[])}}),jn=Dn.run,X=Dn.loading,Re=(0,q.useRequest)(Z.kt,{manual:!0,debounceInterval:300,onSuccess:function(){ae.ZP.success("\u4FEE\u6539\u6210\u529F")}}),vn=Re.run,En=(0,q.useRequest)(Z.zZ,{manual:!0,debounceInterval:300,onSuccess:function(){ae.ZP.success("\u5220\u9664\u6210\u529F")}}),Qn=En.run,Mn=function(){ae.ZP.success("\u590D\u5236\u6210\u529F")};(0,Ae.useEffect)(function(){!un||!oe||jn(oe)},[oe,un]);var Un=function(ln,an,bn){var Wn=en?.map(function(da){var Hn=da;return Hn.id===ln&&(Hn=C()(C()({},Hn),{},_()({},an,bn))),Hn});Pe(Wn||[]);var lt=bn;an==="expire"&&(lt=bn?o()(bn.toString()):""),an==="requireLogin"&&(lt=bn?1:0),vn(_()({id:ln,agentId:oe},an,lt))},_t=function(ln,an){var bn=en?.filter(function(Wn){return Wn.id!==ln});Pe(bn||[]),Qn(ln,an)},mt=function(ln,an,bn){(0,J.oB)("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u94FE\u63A5\u5417?",bn,function(){return _t(ln,an),new Promise(function(Wn){setTimeout(Wn,1e3)})})},$n=function(ln){On(!0),kn(ln)},ft=[{title:"\u94FE\u63A5\u5730\u5740",dataIndex:"chatUrl",key:"chatUrl",className:"flex",render:function(ln,an){return(0,w.jsxs)("div",{className:Me("flex","items-center","overflow-hide",on["url-box"]),children:[(0,w.jsx)(te.H,{text:ln,className:Me(on["chat-url"],"flex-1")}),(0,w.jsx)(k(),{text:ln||"",onCopy:Mn,children:(0,w.jsx)(p.Z,{title:"\u590D\u5236",children:(0,w.jsx)("span",{className:Me(on["img-box"],on["copy-img-box"],"flex","content-center","items-center","cursor-pointer"),children:(0,w.jsx)("img",{className:Me("cursor-pointer",on.img),src:x,alt:""})})})}),(0,w.jsx)(p.Z,{title:"\u4E8C\u7EF4\u7801",children:(0,w.jsx)("span",{className:Me(on["img-box"],"flex","content-center","items-center","cursor-pointer"),onClick:function(){return $n(an.chatUrl)},children:(0,w.jsx)("img",{className:Me("cursor-pointer",on.img),src:an.qrCodeUrl,alt:""})})})]})}},{title:"\u767B\u5F55\u53EF\u7528",dataIndex:"requireLogin",key:"requireLogin",width:85,align:"center",render:function(ln,an){return(0,w.jsx)("div",{className:Me("h-full","flex","items-center","content-center"),children:(0,w.jsx)(t.Z,{checked:!!an.requireLogin,onChange:function(Wn){return Un(an.id,"requireLogin",Wn.target.checked)}})})}},{title:"\u6709\u6548\u671F",key:"expire",width:210,render:function(ln,an){return(0,w.jsx)(D.ZP,{locale:pe.Z,children:(0,w.jsx)(d.default,{minDate:o()(),value:an.expire?o()(an.expire):null,allowClear:!1,showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onChange:function(Wn,lt){return Un(an.id,"expire",lt.toString())}})})}},{title:"\u64CD\u4F5C",width:80,key:"action",align:"center",render:function(ln,an){return(0,w.jsx)("div",{className:Me("h-full","flex","items-center","content-center"),children:(0,w.jsx)(le.ZP,{type:"text",icon:(0,w.jsx)(Y.Z,{}),onClick:function(){return mt(an.id,an.agentId,an.chatUrl)}})})}}],tt=function(){Pe([]),gn()};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(M.Z,{classNames:{content:Me(on.container),header:Me(on.container),body:Me(on.container)},title:(0,w.jsxs)("div",{className:Me("text-ellipsis"),style:{width:"400px"},children:[Oe,"-\u4E34\u65F6\u4F1A\u8BDD\u94FE\u63A5\u7BA1\u7406"]}),open:un,width:710,destroyOnHidden:!0,footer:null,onCancel:tt,children:(0,w.jsx)(Ke.Z,{className:Me(on["table-wrap"]),rowKey:"id",columns:ft,dataSource:en,pagination:!1,loading:X,virtual:!0,scroll:{y:450},locale:{emptyText:(0,w.jsx)(ge.Z,{description:"\u6682\u65E0\u6570\u636E"})},footer:function(){return(0,w.jsx)(le.ZP,{onClick:function(){return vt(oe)},loading:Xn,icon:(0,w.jsx)(se.Z,{}),children:"\u65B0\u589E\u94FE\u63A5"})}})}),(0,w.jsx)(M.Z,{open:wn,destroyOnHidden:!0,footer:null,className:on["qr-code-modal"],onCancel:function(){return On(!1)},modalRender:function(){return(0,w.jsx)(T.Z,{size:500,value:_n||"-"})}})]})},rn=$e},94652:function(yn,Te,n){n.d(Te,{Ai:function(){return O},is:function(){return ue},kt:function(){return C},mY:function(){return fe},vU:function(){return s},zZ:function(){return _}});var Ne=n(87453);function _(x,te){return(0,Ne.request)("/api/temp/chat/".concat(te,"/link/").concat(x,"/delete"),{method:"POST"})}function O(x){return(0,Ne.request)("/api/temp/chat/".concat(x,"/link/create"),{method:"POST"})}function C(x){return(0,Ne.request)("/api/temp/chat/link/update",{method:"POST",data:x})}function fe(x){return(0,Ne.request)("/api/temp/chat/conversation/query",{method:"POST",data:x})}function s(x){return(0,Ne.request)("/api/temp/chat/conversation/create",{method:"POST",data:x})}function U(x){return request("/api/temp/chat/completions",{method:"POST",data:x})}function ue(x){return(0,Ne.request)("/api/temp/chat/".concat(x,"/link/list"),{method:"GET"})}},24057:function(yn,Te,n){n.d(Te,{Tg:function(){return ue},oB:function(){return U},sO:function(){return x}});var Ne=n(48305),_=n.n(Ne),O=n(64267),C=n(14719),fe=n(52676),s=C.Z.confirm,U=function(Z,Y,se,ae){s({title:Z,icon:(0,fe.jsx)(O.Z,{}),content:Y,okText:"\u786E\u5B9A",maskClosable:!0,cancelText:"\u53D6\u6D88",onOk:se,onCancel:ae})},ue=function(Z){if(!Z)return"";if(typeof Z=="string"){var Y=Z.split("."),se=_()(Y,2),ae=se[0],p=se[1];return p&&p.length>6?"".concat(ae,".").concat(p.slice(0,6)):Z}var t=Z;if(isNaN(t))return"";var D=t.toString().split("."),d=_()(D,2),le=d[0],M=d[1];return M&&M.length>6?"".concat(le,".").concat(M.slice(0,6)):t.toString()},x=function(Z){if(!Z)return"";var Y=Z.toString(),se=Y.indexOf(".");return se===-1?Y:Y.substring(0,se+7)}},83005:function(yn,Te,n){n.d(Te,{_:function(){return ue},b:function(){return x}});var Ne=n(90228),_=n.n(Ne),O=n(87999),C=n.n(O),fe=n(41705),s=n(3440),U=n(64799),ue=function(){var te=C()(_()().mark(function Z(Y){var se,ae,p,t,D,d,le,M=arguments;return _()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return se=M.length>1&&M[1]!==void 0?M[1]:U.qR.Agent,ge.prev=1,ge.next=4,(0,fe.Ee)(Y,se);case 4:ae=ge.sent,p=ae.headers["content-disposition"],t=decodeURIComponent(p.split("filename=")[1].replace(/"/g,"")),D=new Blob([ae.data]),d=URL.createObjectURL(D),le=document.createElement("a"),le.href=d,le.download=t,le.click(),URL.revokeObjectURL(d);case 14:return ge.prev=14,ge.finish(14);case 16:case"end":return ge.stop()}},Z,null,[[1,,14,16]])}));return function(Y){return te.apply(this,arguments)}}(),x=function(){var te=C()(_()().mark(function Z(Y,se){var ae,p,t,D;return _()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=3,(0,s.S5)(Y);case 3:ae=le.sent,p=new Blob([ae.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t=URL.createObjectURL(p),D=document.createElement("a"),D.href=t,D.download="".concat(se,".xlsx"),D.click(),URL.revokeObjectURL(t);case 11:return le.prev=11,le.finish(11);case 13:case"end":return le.stop()}},Z,null,[[0,,11,13]])}));return function(Y,se){return te.apply(this,arguments)}}()},72611:function(yn){yn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFwSURBVEiJ7ZbRTcNADIY/J5f3jhA2gAmACQgjMAHlualqlHsHNqATABNQNugGZATee5V5oKDSVtRBgITU/ym6s+/zXXz2wU7/XbJpUFXLEMI50HOu8yIi48FgMO0MbJqmEpE7J+gTNKV0oKrtV0ZhLQKR0eLzFph4SCJSmVlVFMUJcNMJCOwDpJQuVPXFA1TVhzzPx3Vd328NbnUgxmgAdV1/zKlqL8uyKsuyQ08AIjKdzWbjTQFv2uEnLRLoESg9MAAzI4TQV9Xj1X+6FVgUxZWZlUArItdm5jlmBcoQwgg46wQ0syMAETn1pD2Aqj6FEJ6BahWYOfx7AF7YAtgu+3YF/qh2wL8Dqmr5V8AJQAjhOwW8OzCldAa0+FtTJ61d/MUd2vsNGPiSpoW3PuldtGmao2XfZXlK21hERiJyF2OcAp5a+g5c640bnxirijFeAX2P7bvM7HI4HOq3gPDWE/M83/fYzufzdttTY6cf0yt+NXkX7pGGegAAAABJRU5ErkJggg=="},10802:function(yn){yn.exports="data:image/png;base64,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"},26292:function(yn){yn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAMRSURBVFiFzZm/TxNhGMe/74Uci69p0om61MHiAA0BGZwQEyZNMQ5Eo4OkSZFNBkcD/QtgU0iInR3ANhgGE6A7GkMXr4vHUqaLTc6FDn0dnr68x/WuvLWV6ye53Hu997187v3x3MsDQwhia/wVYMwAYgJAEkAsrO4/UqeDHUE0i2yp8jmoEgsWY6stqevEhhArflHDeyE202sA+4jrlwOAJBjbJQfFRQ+KzfQaGFavXSsIgTxbOlkDWoJic/wJGNuNVKoNschylQINMWPrEdsEwFYBgA1m70nEogFmzEetEY4xYwDiQdQa4YgJA/0PwP0kOQRdQZ4AJpeBVAZwa8CXLJ11MDnw9BMwzAHHAsrvdNvGjKvrtOQebZOcvDa5nhwAxEdVm5F79Cye0GqqJ3gnox5oH1IPOJa+4NkxtTk7pms5GhoMadVKTNPZrQFf3+iLeamW6Hi2T4J97UHJH80518dndCfox+TA/bfA2Iv2e6kM3dPsqTD0hjiMVAYYe0nl4ZvAt/dUnloGJl9T+dwFvn+ISPD0kGRMroQAVW64VKcHrh7i+CgdQbg1YC9LIlLMK7eXDV/tnZ7bleDjbRXz7IP2+45FIl46yclQY3JgbqMPgueuKvNbwXWSDy9fm7z9N4kQqqyxoq8W9H7SgobEuyAa7uXhngoIxjKmNlwK3j0LurXwN03Ots85/5yUn0c/jqX1Pe49DnrlHEvNyYbbua0mvYWZakn1sLc3HAvYWaApYfcWZnoTBNSq9OPW9LdjHehuiG90uc3yY3K10M71poCeYLVIZ54Anu9TbOxWbG6D2soXdH72U7Ckgq7cdGp8BS7gCVrxF3KW9vdZfw7uLNCuZWSaFkU3G1bHoo1E/C5wekAvrAkTW+nfGNw/nOoGADtqiw7UDYD9iNoiHHZkAM1y1BqhiGaRsltb6V+IJifYCZvlTm63wozIR+sSgBArQCsOslylAIHBkRTIy1TwpRz1QGRZPdlVICiJTvnCdUSRRIfIs1yl4P2xTVBCosZ8Kz0Xw//5N4RNYa5Z9otJ/gI08QqsvSbWIgAAAABJRU5ErkJggg=="}}]);})();
