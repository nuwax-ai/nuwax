"use strict";(()=>{(self.webpackChunknuwax_frontend=self.webpackChunknuwax_frontend||[]).push([[2667],{80723:function(M,x,n){n.d(x,{Z:function(){return h}});var S=n(48305),u=n.n(S),i=n(28190),f=n(9504),p=n(94581),s=n.n(p),v=n(75271),r={btn:"btn___T9zvq","confirm-btn":"confirm-btn___kcWcm"},o=n(52676),g=s().bind(r),I=function(a){var F=a.form,W=a.loading,_=a.okPrefixIcon,U=a.okText,y=a.onConfirm,H=(0,v.useState)(!1),R=u()(H,2),P=R[0],t=R[1],E=i.Z.useWatch([],{form:F,preserve:!0});return(0,v.useEffect)(function(){F.validateFields({validateOnly:!0}).then(function(){return t(!0)}).catch(function(){return t(!1)})},[F,E]),(0,o.jsx)(f.ZP,{type:"primary",icon:_,loading:W,onClick:y,className:g(!P&&r["confirm-btn"],r.btn),disabled:!P,children:U||"\u786E\u5B9A"})},L=I,b=n(14719),D={btn:"btn___T2mwV"},Z=s().bind(D),m=function(a){var F=a.form,W=a.classNames,_=a.title,U=a.open,y=a.loading,H=a.okPrefixIcon,R=a.okText,P=a.centered,t=P===void 0?!1:P,E=a.onCancel,q=a.onConfirm,c=a.children;return(0,o.jsx)(b.Z,{title:_,open:U,centered:t,classNames:W,destroyOnHidden:!0,footer:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.ZP,{className:Z(D.btn),type:"default",onClick:E,children:"\u53D6\u6D88"}),(0,o.jsx)(L,{okPrefixIcon:H,loading:y,onConfirm:q,form:F,okText:R})]}),onCancel:E,children:c})},h=m},13844:function(M,x,n){n.r(x),n.d(x,{default:function(){return pe}});var S=n(82092),u=n.n(S),i=n(26068),f=n.n(i),p=n(48305),s=n.n(p),v=n(76026),r=n(66367),o=n(30799),g=n(65104),I=n(3642),L=n(17023),b=n(29333),D=n(41249),Z=n(68108),m=n(9504),h=n(17701),j=n(63619),a=n(78321),F=n(94581),W=n.n(F),_=n(16483),U=n.n(_),y=n(75271),H=n(80723),R=n(60393),P=n(28190),t=n(52676),E=function(N){var K=N.open,O=N.onCancel,ee=N.onConfirm,ne=N.id,z=P.Z.useForm(),T=s()(z,1),k=T[0],te=(0,y.useState)(!1),Q=s()(te,2),w=Q[0],$=Q[1],ae=(0,b.Z)(v.NH,{manual:!0,loadingDelay:300,onBefore:function(){$(!0)},onSuccess:function(){D.ZP.success("\u62D2\u7EDD\u5BA1\u6838\u6210\u529F"),k.resetFields(),ee()},onFinally:function(){$(!1)}}),Y=ae.run,le=function(){k.validateFields().then(function(V){Y({id:ne,reason:V.reason})}).catch(function(V){console.log(V)})};return(0,t.jsx)(H.Z,{open:K,form:k,title:"\u62D2\u7EDD\u5BA1\u6838",onCancel:function(){k.resetFields(),O()},onConfirm:le,loading:w,children:(0,t.jsx)(P.Z,{form:k,layout:"vertical",requiredMark:R.N,children:(0,t.jsx)(P.Z.Item,{name:"reason",label:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0"}],children:(0,t.jsx)(j.Z.TextArea,{rows:4,placeholder:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0"})})})})},q=E,c=W().bind(r.Z),ce=[{value:"",label:"\u5168\u90E8"},{value:g.Q.Agent,label:"\u667A\u80FD\u4F53"},{value:g.Q.Plugin,label:"\u63D2\u4EF6"},{value:g.Q.Workflow,label:"\u5DE5\u4F5C\u6D41"},{value:g.Q.Skill,label:"\u6280\u80FD"}],me=[{value:"",label:"\u5168\u90E8"},{value:o.xH.Applying,label:"\u5F85\u5BA1\u6838"},{value:o.xH.Published,label:"\u901A\u8FC7"},{value:o.xH.Rejected,label:"\u62D2\u7EDD"}],fe=function(){var N=(0,y.useState)(""),K=s()(N,2),O=K[0],ee=K[1],ne=(0,y.useState)(o.xH.Applying),z=s()(ne,2),T=z[0],k=z[1],te=(0,y.useState)(""),Q=s()(te,2),w=Q[0],$=Q[1],ae=(0,y.useState)(1),Y=s()(ae,2),le=Y[0],C=Y[1],V=(0,y.useState)({}),re=s()(V,2),ve=re[0],ue=re[1],G=(0,b.Z)(v.Ez,{debounceWait:300,defaultParams:[{pageNo:le,pageSize:10,queryFilter:{targetType:O||void 0,publishStatus:T||void 0,kw:w}}]}),B=G.data,J=G.run,ie=G.refresh,ge=G.loading,X=function(e,l,A,Ee){return{pageNo:e,pageSize:10,queryFilter:{targetType:l||void 0,publishStatus:A||void 0,kw:Ee}}},xe=function(e){ee(e),C(1);var l=X(1,e,T,w);J(l)},ye=function(e){k(e),C(1);var l=X(1,O,e,w);J(l)},Se=function(e){$(e),C(1);var l=X(1,O,T,e);J(l)},be=function(e){C(e);var l=X(e,O,T,w);J(l)},je=(0,b.Z)(v.jw,{manual:!0,loadingDelay:300,onBefore:function(e){ue(function(l){return f()(f()({},l),{},u()({},e[0].id,!0))})},onSuccess:function(){D.ZP.success("\u901A\u8FC7\u5BA1\u6838\u6210\u529F"),ie()},onFinally:function(e){ue(function(l){return f()(f()({},l),{},u()({},e[0].id,!1))})}}),Pe=je.run,Ce=(0,y.useState)(!1),oe=s()(Ce,2),Ae=oe[0],se=oe[1],Ie=(0,y.useState)(),de=s()(Ie,2),Ze=de[0],De=de[1],Fe=function(e){De(e),se(!0)},ke=function(e){var l="";e.targetType===g.Q.Agent&&(l="/space/".concat(e.spaceId,"/agent/").concat(e.targetId,"?applyId=").concat(e.id)),e.targetType===g.Q.Plugin&&(e.pluginType==="CODE"?l="/space/".concat(e.spaceId,"/plugin/").concat(e.targetId,"/cloud-tool?applyId=").concat(e.id):l="/space/".concat(e.spaceId,"/plugin/").concat(e.targetId,"?applyId=").concat(e.id)),e.targetType===g.Q.Workflow&&(l="/space/".concat(e.spaceId,"/workflow/").concat(e.targetId,"?applyId=").concat(e.id)),e.targetType===g.Q.Skill&&(l="/space/".concat(e.spaceId,"/skill-details/").concat(e.targetId,"?applyId=").concat(e.id)),l&&window.open(l,"_blank","noopener,noreferrer")},Me=function(e){switch(e){case g.Q.Agent:return"\u667A\u80FD\u4F53";case g.Q.Plugin:return"\u63D2\u4EF6";case g.Q.Workflow:return"\u5DE5\u4F5C\u6D41";case g.Q.Skill:return"\u6280\u80FD"}},Re=[{title:"\u53D1\u5E03\u540D\u79F0",dataIndex:"name",key:"name",width:200,className:r.Z["table-column-fixed"],render:function(e){return(0,t.jsx)("div",{className:c("flex","items-center","h-full"),children:(0,t.jsx)("span",{className:c("text-ellipsis-2"),children:e})})}},{title:"\u7C7B\u578B",dataIndex:"targetType",key:"targetType",width:100,render:function(e){return(0,t.jsx)("div",{className:c("flex","items-center","h-full"),children:Me(e)})}},{title:"\u63CF\u8FF0\u4FE1\u606F",dataIndex:"description",key:"description",width:200,render:function(e){return(0,t.jsx)("div",{className:c("flex","items-center","h-full"),children:(0,t.jsx)(Z.Z,{title:e,placement:"topLeft",children:(0,t.jsx)("div",{className:c("text-ellipsis-2"),children:e})})})}},{title:"\u7248\u672C\u4FE1\u606F",dataIndex:"remark",key:"remark",width:200,render:function(e){return(0,t.jsx)("div",{className:c("flex","items-center","h-full"),children:(0,t.jsx)(Z.Z,{title:e,placement:"topLeft",children:(0,t.jsx)("div",{className:c("text-ellipsis-2"),children:e})})})}},{title:"\u53D1\u5E03\u8005",dataIndex:"applyUser",key:"applyUser",width:200,render:function(e){var l;return(0,t.jsx)("div",{className:c("flex","items-center","h-full"),children:(l=e?.userName)!==null&&l!==void 0?l:"--"})}},{title:"\u72B6\u6001",dataIndex:"publishStatus",key:"publishStatus",width:100,render:function(e){var l="",A="";switch(e){case o.xH.Published:l="\u901A\u8FC7",A=r.Z["dot-green"];break;case o.xH.Rejected:l="\u62D2\u7EDD",A=r.Z["dot-red"];break;case o.xH.Applying:l="\u5F85\u5BA1\u6838",A=r.Z["dot-blue"];break}return(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:c(r.Z.dot,A)}),l]})}},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"created",key:"created",width:180,render:function(e){return(0,t.jsx)("div",{className:c("flex","items-center","h-full"),children:U()(e).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u64CD\u4F5C",key:"action",width:200,align:"center",fixed:"right",className:r.Z["table-column-fixed"],render:function(e,l){return(0,t.jsxs)(t.Fragment,{children:[l.publishStatus===o.xH.Applying?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.ZP,{type:"link",className:c(r.Z["table-action-ant-btn-link"]),loading:ve[l.id]||!1,onClick:function(){return Pe({id:l.id})},children:"\u901A\u8FC7"}),(0,t.jsx)(m.ZP,{type:"link",className:c(r.Z["table-action-ant-btn-link"]),onClick:function(){return Fe(l.id)},children:"\u62D2\u7EDD"})]}):null,(0,t.jsx)(m.ZP,{type:"link",onClick:function(){return ke(l)},children:"\u67E5\u770B"})]})}}];return(0,t.jsxs)("div",{className:c(r.Z["system-manage-container"],"scroll-container"),children:[(0,t.jsx)("h3",{className:c(r.Z["system-manage-title"]),children:"\u53D1\u5E03\u5BA1\u6838"}),(0,t.jsxs)("section",{className:c("flex","content-between"),children:[(0,t.jsxs)("div",{className:c("flex"),children:[(0,t.jsx)(h.default,{className:c(r.Z["select-132"],"mr-16"),options:ce,defaultValue:"",onChange:xe,optionLabelProp:"label",popupRender:function(e){return(0,t.jsx)(t.Fragment,{children:e})},menuItemSelectedIcon:(0,t.jsx)(I.Z,{style:{marginRight:8}})}),(0,t.jsx)(h.default,{className:c(r.Z["select-132"]),options:me,onChange:ye,optionLabelProp:"label",popupRender:function(e){return(0,t.jsx)(t.Fragment,{children:e})},defaultValue:o.xH.Applying,menuItemSelectedIcon:(0,t.jsx)(I.Z,{style:{marginRight:8}})})]}),(0,t.jsx)(j.Z,{className:c(r.Z["search-input-255"]),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u5DE5\u4F5C\u6D41\u6216\u667A\u80FD\u4F53\u540D\u79F0",prefix:(0,t.jsx)(L.Z,{}),onPressEnter:function(e){e.key==="Enter"&&Se(e.currentTarget.value)}})]}),(0,t.jsx)(a.Z,{rowClassName:c(r.Z["table-row-divider"]),className:c("mt-30"),rowKey:"id",loading:ge,columns:Re,dataSource:B?.data.records,scroll:{x:"max-content"},virtual:!0,pagination:{total:B?.data.total,onChange:be,showTotal:function(e){return"\u5171 ".concat(e," \u6761")}}}),(0,t.jsx)(q,{open:Ae,id:Ze,onCancel:function(){return se(!1)},onConfirm:function(){se(!1),ie()}})]})},pe=fe},76026:function(M,x,n){n.d(x,{Ez:function(){return s},NH:function(){return g},jw:function(){return r},kb:function(){return L},qZ:function(){return D}});var S=n(90228),u=n.n(S),i=n(87999),f=n.n(i),p=n(53586);function s(m){return v.apply(this,arguments)}function v(){return v=f()(u()().mark(function m(h){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/system/publish/apply/list",{method:"POST",data:h}));case 1:case"end":return a.stop()}},m)})),v.apply(this,arguments)}function r(m){return o.apply(this,arguments)}function o(){return o=f()(u()().mark(function m(h){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/system/publish/".concat(h.id),{method:"POST",data:h}));case 1:case"end":return a.stop()}},m)})),o.apply(this,arguments)}function g(m){return I.apply(this,arguments)}function I(){return I=f()(u()().mark(function m(h){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/system/publish/reject/".concat(h.id),{method:"POST",data:h}));case 1:case"end":return a.stop()}},m)})),I.apply(this,arguments)}function L(m){return b.apply(this,arguments)}function b(){return b=f()(u()().mark(function m(h){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/system/publish/list",{method:"POST",data:h}));case 1:case"end":return a.stop()}},m)})),b.apply(this,arguments)}function D(m){return Z.apply(this,arguments)}function Z(){return Z=f()(u()().mark(function m(h){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/system/publish/offShelf/".concat(h.id),{method:"POST",data:h}));case 1:case"end":return a.stop()}},m)})),Z.apply(this,arguments)}},65104:function(M,x,n){n.d(x,{Q:function(){return S},b:function(){return u}});var S=function(i){return i.Agent="Agent",i.Plugin="Plugin",i.Workflow="Workflow",i.Knowledge="Knowledge",i.Template="Template",i.Skill="Skill",i}({}),u=function(i){return i.All="All",i.Agent="Agent",i.Workflow="Workflow",i.Page="Page",i.Skill="Skill",i}({})},60393:function(M,x,n){n.d(x,{N:function(){return i},g:function(){return f}});var S=n(75271),u=n(52676),i=function(s,v){var r=v.required;return(0,u.jsxs)(u.Fragment,{children:[s,r?(0,u.jsx)("span",{style:{color:"red",fontWeight:600,marginLeft:"4px"},children:"*"}):null]})},f=function(s){return(0,u.jsx)(u.Fragment,{children:s})}},66367:function(M,x){x.Z={"xagi-nav-style2":"xagi-nav-style2___UkH3A",text:"text___quOtD","page-container":"page-container___i95W1","system-manage-container":"system-manage-container___LMJ0u","system-manage-title":"system-manage-title___WRyi3","table-column-fixed":"table-column-fixed___VLdtk","select-132":"select-132___xi4Oi","search-input-225":"search-input-225___qkYcd","search-input-255":"search-input-255___xY2Zb","dot-circle":"dot-circle___q_zNW","dot-red":"dot-red___eP5AX","dot-green":"dot-green___E1FGA","table-action-ant-btn-link":"table-action-ant-btn-link___itR3h"}},40595:function(M,x,n){n.d(x,{G:function(){return f}});var S=n(18415),u=function(s){if((0,S.Z)()&&window.document.documentElement){var v=Array.isArray(s)?s:[s],r=window.document.documentElement;return v.some(function(o){return o in r.style})}return!1},i=function(s,v){if(!u(s))return!1;var r=document.createElement("div"),o=r.style[s];return r.style[s]=v,r.style[s]!==o};function f(p,s){return!Array.isArray(p)&&s!==void 0?i(p,s):u(p)}}}]);})();
