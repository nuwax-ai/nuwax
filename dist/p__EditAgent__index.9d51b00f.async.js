"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[657],{65857:function($e,pe,n){n.d(pe,{Z:function(){return x}});var le=n(22675),j=n(94581),Y=n.n(j),d=n(75271),G={avatar:"avatar___Q6WBB",nickname:"nickname___pjZCy"},s=n(52676),T=Y().bind(G),W=function(L){var X=L.className,ne=L.icon,O=L.name,t=L.extra;return(0,s.jsxs)("div",{className:T("flex","flex-col","items-center","content-center",X),children:[(0,s.jsx)("img",{className:T(G.avatar),src:ne||le,alt:""}),(0,s.jsx)("h3",{className:T("w-full","text-ellipsis",G.nickname),children:O}),t]})},x=W},34077:function($e,pe,n){n.d(pe,{Z:function(){return Se}});var le=n(82092),j=n.n(le),Y=n(22675),d=n(78987),G=n(57625),s=n(59261),T=n(97830),W=n(13278),x=n(72875),se=n(91268),L=n(27689),X=n(64799),ne=n(92122),O=n(41249),t=n(38683),E=n(94581),i=n.n(E),ie=n(32699),$=n(75271),fe=n(56179),nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAERSURBVCiRjZFBccNADEWfdgrAYeAwcBmYQSwGMYKkCOwwKIOYgZZBITQQzCBBsOoh25lN7ab9pz3ozftaCTlmtkfkADTADbjg3qvqzEpC8a4zdEFkBGpEPs2sWQNfzOwIVKo6mhmIDKS0AV4ROSNiwHZpFNkhMpjZqKojEBEZgBb3N6A2s26tapvrDRajAR0wqWrM+83pvsJjVeCGyERKm2yatOv6YqYKIVzXjBH3o6qOuGsJmVkNVLi3S9D9BFQW4wdwKaBGVWfce6CzGM8lKN9D+fdqYAaqbOpVdco3PpdrSGGoPISdp7QNIVxxb4D9b7DwJLneEhZ5fwquwveTtX+CDzBEoMP99C/wh/mkquMXpnqTpDNkdZAAAAAASUVORK5CYII=",P=n(6619),Re={container:"container___bqr6a","elapsed-time":"elapsed-time___NLFZM","vertical-line":"vertical-line___viPQ6","more-action":"more-action___oDxDL",icon:"icon___hoIgl","copy-image":"copy-image___YsG7v"},S=n(52676),tn=i().bind(Re),ln=function(Ie){var Be=Ie.messageInfo,Xe=Be||{},ue=Xe.finalResult,b=(0,fe.useModel)("conversationInfo"),an=b.handleDebug,En=(0,$.useMemo)(function(){return ue?((ue?.endTime-ue?.startTime)/1e3).toFixed(1):0},[ue]);return(0,S.jsx)("div",{className:tn(Re.container,"flex","content-between","items-center"),children:(0,S.jsxs)("div",{className:tn("flex","items-center",Re["elapsed-time"]),children:[(0,S.jsxs)(s.Z,{condition:!!ue,children:[(0,S.jsx)("span",{children:"".concat(En,"s")}),(0,S.jsxs)(s.Z,{condition:!!(ue!=null&&ue.totalTokens),children:[(0,S.jsx)("span",{className:tn(Re["vertical-line"])}),(0,S.jsx)("span",{children:"".concat(ue?.totalTokens," Tokens")})]})]}),(0,S.jsx)(s.Z,{condition:!!ue,children:(0,S.jsx)(P.Z,{className:Re.icon,icon:(0,S.jsx)("img",{src:nn,alt:""}),onClick:function(){return an(Be)},title:"\u8C03\u8BD5",type:ne.Ai.White})})]})})},r=ln,de={"xagi-nav-style2":"xagi-nav-style2___mrh9D",text:"text___O7qUb","page-container":"page-container___XXv4P",container:"container___I82RP","elapsed-time":"elapsed-time___VSdJP","vertical-line":"vertical-line___RYAxp","more-action":"more-action___J8lvL",icon:"icon___V_fce","copy-image":"copy-image___Lbh8o"},qe=i().bind(de),ge=function(Ie){var Be=Ie.messageInfo,Xe=Be||{},ue=Xe.text,b=function(){O.ZP.success("\u590D\u5236\u6210\u529F")};return(0,S.jsx)("div",{className:qe(de.container,"flex","content-between","items-center"),children:(0,S.jsx)("div",{className:qe("flex",de["more-action"]),children:(0,S.jsx)(W.Z,{text:ue||"",onCopy:b,children:"\u590D\u5236"})})})},fn=ge,Qe=n(48305),Ze=n.n(Qe),w=n(39373),ke={"xagi-nav-style2":"xagi-nav-style2___A0cfb",text:"text___mQKpe","page-container":"page-container___clFMO",container:"container___bMNUQ","more-action":"more-action___PPoj0"},V=i().bind(ke),me=function(Ie){var Be=Ie.messageInfo,Xe=(0,$.useState)(""),ue=Ze()(Xe,2),b=ue[0],an=ue[1],En=(0,$.useRef)(null),An=function(){O.ZP.success("\u590D\u5236\u6210\u529F")},$n=function(){an((0,w.BK)(Be?.time))},ut=function(){$n(),En.current=setInterval(function(){$n()},6e4)};return(0,$.useEffect)(function(){return Be!=null&&Be.time&&ut(),function(){En.current!==null&&(clearInterval(En.current),En.current=null)}},[Be?.time]),(0,S.jsxs)("div",{className:V(ke.container,"flex","content-between","items-center"),children:[(0,S.jsx)("div",{className:V("flex",ke["more-action"]),children:(0,S.jsx)(W.Z,{text:Be?.text||"",onCopy:An,children:"\u590D\u5236"})}),(0,S.jsx)("span",{children:b})]})},Ne=me,e=n(30746),he={"xagi-nav-style2":"xagi-nav-style2___C6M16",text:"text___s3NJ6","page-container":"page-container___wYf4F",container:"container___zSEQO",avatar:"avatar___IfDvJ",author:"author___AmRDb","agent-title-bar":"agent-title-bar___Y8m62","attach-file-container":"attach-file-container___xvbrf",userContainer:"userContainer___sPaST","user-content":"user-content___M5R1a","chat-content":"chat-content___FWF0e","inner-container":"inner-container___rireg","think-content":"think-content___Qas0a","user-action-box":"user-action-box___T2sE4","copy-btn":"copy-btn___vb1lQ","copy-image":"copy-image___Hbxu3"},ae=i().bind(he),Ge=(0,$.memo)(function(ce){var Ie,Be=ce.className,Xe=ce.contentClassName,ue=ce.roleInfo,b=ce.messageInfo,an=ce.mode,En=an===void 0?"chat":an,An=(0,fe.useModel)("userInfo"),$n=An.userInfo,ut=(0,L.K)(),On=ut.data,ft=On.antdTheme==="dark",hn=(0,se.Z)({answer:b?.text||"",thinking:b?.think||"",id:b?.id||""}),gt=hn.markdownRef,Bn=hn.messageIdRef,Rn=$n||JSON.parse(localStorage.getItem(x.CD)),rn=function(){var zn=ue.assistant,sn=ue.system;switch(b?.role){case X.hZ.USER:return{name:Rn?.nickName||Rn?.userName||"\u6E38\u5BA2",avatar:Rn?.avatar||d};case X.hZ.ASSISTANT:return{name:zn.name,avatar:zn.avatar||Y};case X.hZ.SYSTEM:return{name:sn.name,avatar:sn.avatar||Y}}}(),Ft=function(){O.ZP.success("\u590D\u5236\u6210\u529F")},lt=(0,$.useCallback)(function(zn){return zn.replace(/^\s+|\s+$/g,"")},[]),pt=(0,$.useMemo)(function(){return b?.role===X.hZ.USER},[b?.role]),Pn=t.Z.useToken(),Nt=Pn.token;return(0,S.jsx)("div",{className:ae(he.container,"flex",Be),children:(0,S.jsxs)("div",{className:ae("flex-1","overflow-hide",j()({},he.userContainer,pt)),children:[!pt&&(0,S.jsxs)("div",{className:ae(he["agent-title-bar"]),children:[(0,S.jsx)("img",{className:ae(he.avatar),src:rn?.avatar,alt:""}),(0,S.jsx)("div",{className:ae(he.author),children:rn?.name}),(0,S.jsx)(s.Z,{condition:!!(b!=null&&b.status),children:(0,S.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:12},children:(0,S.jsx)("div",{style:{flex:1},children:(0,S.jsx)(e.Z,{messageInfo:b})})})})]}),!!(b!=null&&(Ie=b.attachments)!==null&&Ie!==void 0&&Ie.length)&&(0,S.jsx)("div",{className:ae(he["attach-file-container"]),children:(0,S.jsx)(G.Z,{files:b?.attachments})}),pt&&!!(b!=null&&b.text)&&(0,S.jsxs)("div",{className:ae(he["user-content"]),children:[(0,S.jsx)("div",{className:ae(he["chat-content"],he.user,"radius-6",Xe,"ds-markdown",{"ds-markdown-dark":ft}),children:(0,S.jsx)("div",{className:"ds-markdown-answer",children:(0,S.jsx)("div",{style:{whiteSpace:"pre-wrap"},className:"ds-markdown-paragraph ds-typed-answer",children:lt(b?.text)})})}),(0,S.jsx)("div",{className:ae(he["user-action-box"],"flex","items-center"),children:(0,S.jsx)(W.Z,{text:b.text||"",onCopy:Ft,children:"\u590D\u5236"})})]}),(0,S.jsxs)(s.Z,{condition:b?.role!==X.hZ.USER,children:[(!!(b!=null&&b.think)||!!(b!=null&&b.text))&&(0,S.jsx)("div",{className:ae(he["inner-container"],Xe),children:(0,S.jsx)("div",{className:ae(he["chat-content"],"radius-6","w-full",j()({},he.typing,b.status===ne.ge.Incomplete||b.status===ne.ge.Loading)),children:(0,S.jsx)(T.ZP,{id:"".concat(Bn.current),markdownRef:gt},"".concat(Bn.current))})}),(0,S.jsx)(s.Z,{condition:b&&(b?.status===ne.ge.Complete||!(b!=null&&b.status)),children:En==="chat"?(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:12,padding:"0 ".concat(Nt.paddingXS,"px")},children:[(0,S.jsx)("div",{style:{flex:1},children:(0,S.jsx)(fn,{messageInfo:b})}),(0,S.jsx)(r,{messageInfo:b})]}):En==="home"?(0,S.jsx)(Ne,{messageInfo:b}):null})]})]})})},function(ce,Ie){return(0,ie.isEqual)(ce.messageInfo,Ie.messageInfo)}),Se=Ge},13943:function($e,pe,n){n.d(pe,{Z:function(){return ne}});var le=n(48305),j=n.n(le),Y=n(38683),d=n(6844),G=n(94581),s=n.n(G),T=n(75271),W=n(77661),x={"xagi-nav-style2":"xagi-nav-style2___gADG8",text:"text___emLLn","page-container":"page-container___wxeCP",header:"header___t5fwB"},se=n(52676),L=s().bind(x),X=function(t){var E=t.className,i=t.items,ie=t.defaultActiveKey,$=t.onChangeCollapse,fe=(0,T.useState)([]),nn=j()(fe,2),P=nn[0],Re=nn[1];(0,T.useEffect)(function(){ie?.length>0&&Re(ie)},[ie]);var S=function(de){Re(de),$?.(de)},tn=Y.Z.useToken(),ln=tn.token;return(0,se.jsx)(d.Z,{bordered:!1,expandIcon:function(de){var qe=de.isActive;return(0,se.jsx)(W.Z,{name:"icons-common-caret_right",rotate:qe?90:0,style:{color:ln.colorTextTertiary}})},className:L(x.header,E),activeKey:P,onChange:S,items:i})},ne=X},82456:function($e,pe,n){var le=n(26068),j=n.n(le),Y=n(48305),d=n.n(Y),G=n(22675),s=n(48279),T=n(94201),W=n(10560),x=n(80241),se=n(92122),L=n(26324),X=n(28190),ne=n(41249),O=n(63619),t=n(75271),E=n(56179),i=n(52676),ie=function(fe){var nn=fe.spaceId,P=fe.mode,Re=P===void 0?se.jA.Create:P,S=fe.agentConfigInfo,tn=fe.open,ln=fe.onCancel,r=fe.onConfirmCreate,de=fe.onConfirmUpdate,qe=X.Z.useForm(),ge=d()(qe,1),fn=ge[0],Qe=(0,t.useState)(""),Ze=d()(Qe,2),w=Ze[0],ke=Ze[1],V=(0,t.useState)(!1),me=d()(V,2),Ne=me[0],e=me[1],he=(0,E.useRequest)(x.YS,{manual:!0,debounceInterval:300,onSuccess:function(b){ke(""),r?.(b),ne.ZP.success("\u667A\u80FD\u4F53\u5DF2\u521B\u5EFA"),e(!1)},onError:function(){e(!1)}}),ae=he.run,Ge=(0,E.useRequest)(x.mp,{manual:!0,debounceInterval:300,onSuccess:function(b,an){ne.ZP.success("\u667A\u80FD\u4F53\u7F16\u8F91\u6210\u529F"),e(!1);var En=an[0];de?.(En)},onError:function(){e(!1)}}),Se=Ge.run,ce=function(){ke(S?.icon),fn.setFieldsValue({name:S?.name,description:S?.description})};(0,t.useEffect)(function(){tn&&ce()},[tn,S]);var Ie=function(b){e(!0),Re===se.jA.Create?ae(j()(j()({},b),{},{icon:w,spaceId:nn})):Se(j()(j()({},b),{},{icon:w,id:S?.id}))},Be=function(){fn.submit()},Xe=function(){ln(),ce()};return(0,i.jsx)(s.Z,{form:fn,title:Re===se.jA.Create?"\u521B\u5EFA\u667A\u80FD\u4F53":"\u66F4\u65B0\u667A\u80FD\u4F53",open:tn,loading:Ne,onCancel:Xe,onConfirm:Be,children:(0,i.jsxs)(X.Z,{form:fn,requiredMark:L.N,layout:"vertical",onFinish:Ie,autoComplete:"off",children:[(0,i.jsx)(X.Z.Item,{name:"name",label:"\u667A\u80FD\u4F53\u540D\u79F0",validateTrigger:"onBlur",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u667A\u80FD\u4F53\u540D\u79F0"},{validator:function(b,an){return!an||an?.length<=50?Promise.resolve():an?.length>50?Promise.reject(new Error("\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC750\u4E2A\u5B57\u7B26!")):Promise.reject(new Error("\u8BF7\u8F93\u5165\u667A\u80FD\u4F53\u540D\u79F0!"))}}],children:(0,i.jsx)(O.Z,{placeholder:"\u7ED9\u667A\u80FD\u4F53\u8D77\u4E00\u4E2A\u72EC\u4E00\u65E0\u4E8C\u7684\u540D\u5B57",showCount:!0,maxLength:50})}),(0,i.jsx)(T.Z,{name:"description",label:"\u667A\u80FD\u4F53\u529F\u80FD\u4ECB\u7ECD",initialValue:S?.description,placeholder:"\u4ECB\u7ECD\u667A\u80FD\u4F53\u7684\u529F\u80FD\uFF0C\u5C06\u4F1A\u5C55\u793A\u7ED9\u667A\u80FD\u4F53\u7684\u7528\u6237",maxLength:500}),(0,i.jsx)(X.Z.Item,{name:"icon",label:"\u56FE\u6807",children:(0,i.jsx)(W.Z,{onUploadSuccess:ke,imageUrl:w,defaultImage:G,svgIconName:"icons-workspace-agent"})})]})})};pe.Z=ie},6377:function($e,pe,n){n.d(pe,{Z:function(){return W}});var le=n(94581),j=n.n(le),Y=n(75271),d={container:"container___dApW8",star:"star___pESlW"},G=n(52676),s=j().bind(d),T=function(se){var L=se.className,X=se.label;return(0,G.jsxs)("span",{className:s(d.container,"flex",L),children:[(0,G.jsx)("span",{children:X}),(0,G.jsx)("span",{className:s(d.star),children:"*"})]})},W=T},2349:function($e,pe,n){n.d(pe,{Z:function(){return fe}});var le=n(48305),j=n.n(le),Y=n(64799),d=n(26324),G=n(13143),s=n(28246),T=n(63619),W=n(51249),x=n(28190),se=n(9504),L=n(94581),X=n.n(L),ne=n(75271),O=n(59261),t={"xagi-nav-style2":"xagi-nav-style2___y6MJu",text:"text___XcdJn","page-container":"page-container___aQb4E","variables-box":"variables-box___zOde3",header:"header____mIzl","down-icon":"down-icon___nE2JF","rotate-90":"rotate-90___n3jXV","conversation-container":"conversation-container___wfpdk","close-form":"close-form___uaNXu","form-box":"form-box___AloSZ",desc:"desc___XIVD5"},E=n(52676),i=X().bind(t),ie=s.Z.SHOW_CHILD,$=function(P){var Re=P.className,S=P.form,tn=P.isFilled,ln=tn===void 0?!1:tn,r=P.disabled,de=r===void 0?!1:r,qe=P.showSubmitButton,ge=qe===void 0?!1:qe,fn=P.variables,Qe=P.userFillVariables,Ze=P.onConfirm,w=(0,ne.useState)(!0),ke=j()(w,2),V=ke[0],me=ke[1];(0,ne.useEffect)(function(){Qe&&S.setFieldsValue(Qe)},[S,Qe]);var Ne=function(Ge){me(!1),Ze?.(Ge)},e=V?t["conversation-container"]:ln?t["close-form"]:null,he=function(Ge){var Se,ce=Ge.inputType,Ie=Ge.description,Be=[Y.oI.Select,Y.oI.MultipleSelect].includes(ce),Xe;switch(ce){case Y.oI.Text:Xe=(0,E.jsx)(T.Z,{variant:"filled",placeholder:Ie||"\u8BF7\u8F93\u5165",allowClear:!0});break;case Y.oI.Paragraph:case Y.oI.AutoRecognition:Xe=(0,E.jsx)(T.Z.TextArea,{variant:"filled",placeholder:Ie||"\u8BF7\u8F93\u5165",allowClear:!0});break;case Y.oI.Number:Xe=(0,E.jsx)(W.Z,{variant:"filled",className:"w-full",placeholder:Ie||"\u8BF7\u8F93\u5165"});break;case Y.oI.Select:case Y.oI.MultipleSelect:Xe=(0,E.jsx)(s.Z,{variant:"filled",expandTrigger:"hover",multiple:ce===Y.oI.MultipleSelect,maxTagCount:"responsive",showCheckedStrategy:ie,placeholder:Ie||"\u8BF7\u9009\u62E9",options:((Se=Ge.selectConfig)===null||Se===void 0?void 0:Se.options)||[],allowClear:!0});break;default:Xe=(0,E.jsx)(T.Z,{placeholder:Ie||"\u8BF7\u8F93\u5165",allowClear:!0})}return{isSelect:Be,content:Xe}};return fn!=null&&fn.length?(0,E.jsxs)("div",{className:i(t["variables-box"],"flex","flex-col",Re),children:[(0,E.jsxs)("header",{className:i(t.header,"flex","items-center","content-between"),children:[(0,E.jsx)("span",{children:"\u5BF9\u8BDD\u8BBE\u7F6E"}),(0,E.jsx)(O.Z,{condition:ln,children:(0,E.jsx)("span",{className:i(t.text,"cursor-pointer"),onClick:function(){return me(!V)},children:(0,E.jsx)(G.Z,{className:i(V?"":t["rotate-90"],t["down-icon"])})})})]}),(0,E.jsxs)("div",{className:i(e),children:[(0,E.jsxs)(x.Z,{form:S,rootClassName:t["form-box"],disabled:de,preserve:!1,layout:"vertical",onFinish:Ne,requiredMark:d.N,autoComplete:"off",children:[fn?.map(function(ae){var Ge=ae.name,Se=ae.displayName,ce=ae.require,Ie=ae.key,Be=he(ae),Xe=Be.isSelect,ue=Be.content;return(0,E.jsx)(x.Z.Item,{name:Ge,label:Se,rules:[{required:ce,message:"\u8BF7".concat(Xe?"\u9009\u62E9":"\u8F93\u5165").concat(Se)}],children:ue},Ie)}),(0,E.jsx)(O.Z,{condition:ge,children:(0,E.jsx)(x.Z.Item,{children:(0,E.jsx)(se.ZP,{type:"primary",htmlType:"submit",block:!0,children:"\u5F00\u59CB\u5BF9\u8BDD"})})})]}),(0,E.jsx)(O.Z,{condition:de,children:(0,E.jsx)("p",{className:i(t.desc),children:"\u5BF9\u8BDD\u5F00\u59CB\u540E\uFF0C\u5BF9\u8BDD\u8BBE\u7F6E\u5C06\u65E0\u6CD5\u4FEE\u6539\u3002"})})]})]}):null},fe=$},84283:function($e,pe,n){n.d(pe,{Z:function(){return x}});var le=n(24573),j=n(94581),Y=n.n(j),d=n(75271),G={"xagi-nav-style2":"xagi-nav-style2___a6A0C",text:"text___ijFbn","page-container":"page-container___AmrXf",container:"container___eQEDc",box:"box___qQPTu"},s=n(52676),T=Y().bind(G),W=function(L){var X=L.className,ne=L.itemClassName,O=L.loading,t=L.chatSuggestList,E=L.onClick;return O?(0,s.jsx)("div",{className:T("flex",G["loading-box"]),children:(0,s.jsx)(le.Z,{})}):t?.length>0?(0,s.jsx)("div",{className:T(G.container,"flex","flex-col",X),children:t?.map(function(i,ie){return i?(0,s.jsx)("div",{onClick:function(){return E(i)},className:T(G.box,"px-16","cursor-pointer","hover-box",ne,"text-ellipsis-2"),children:i},ie):null})}):null},x=W},6772:function($e,pe,n){n.d(pe,{Z:function(){return Qe}});var le=n(26068),j=n.n(le),Y=n(92122),d=n(75271),G=n(59261),s=n(94581),T=n.n(s),W={"xagi-nav-style2":"xagi-nav-style2___bmZZd",text:"text___TlJTJ","page-container":"page-container___MtdBj",container:"container___bLyIn"},x=n(52676),se=T().bind(W),L=function(w){var ke=w.className,V=w.title,me=w.content,Ne=w.image,e=w.onClick;return(0,x.jsxs)("div",{className:se(W.container,"flex","flex-col","cursor-pointer",ke),onClick:e,children:[(0,x.jsx)("h3",{className:"text-ellipsis-2",children:V}),(0,x.jsx)(G.Z,{condition:Ne,children:(0,x.jsx)("img",{className:"radius-6",src:Ne,alt:""})}),(0,x.jsx)("p",{className:"text-ellipsis-2",children:me})]})},X=L,ne={"xagi-nav-style2":"xagi-nav-style2___LLKTW",text:"text___Vlepy","page-container":"page-container___T748_",container:"container___uoSDc",box:"box___on4p2"},O=T().bind(ne),t=function(w){var ke=w.className,V=w.title,me=w.content,Ne=w.image,e=w.onClick;return(0,x.jsxs)("div",{className:O(ne.container,"flex","cursor-pointer","items-center",ke),onClick:e,children:[(0,x.jsx)(G.Z,{condition:Ne,children:(0,x.jsx)("img",{className:"radius-6",src:Ne,alt:""})}),(0,x.jsxs)("div",{className:O(ne.box,"flex-1","overflow-hide"),children:[(0,x.jsx)("h3",{className:"text-ellipsis",children:V}),(0,x.jsx)("p",{className:"text-ellipsis-2",children:me})]})]})},E=t,i={"xagi-nav-style2":"xagi-nav-style2___UTXUD",text:"text___ImNss","page-container":"page-container___cWd2B",container:"container___ujWA4"},ie=T().bind(i),$=function(w){var ke=w.className,V=w.title,me=w.content,Ne=w.onClick;return(0,x.jsxs)("div",{className:ie(i.container,"cursor-pointer",ke),onClick:Ne,children:[(0,x.jsx)("h3",{className:"text-ellipsis-2",children:V}),(0,x.jsx)("p",{className:"text-ellipsis-2",children:me})]})},fe=$,nn={"xagi-nav-style2":"xagi-nav-style2___tYLnj",text:"text___GGppT","page-container":"page-container___fZGCQ",container:"container___mGrAV"},P=T().bind(nn),Re=function(w){var ke=w.className,V=w.title,me=w.content,Ne=w.image,e=w.onClick;return(0,x.jsxs)("div",{className:P(nn.container,"flex","flex-col","cursor-pointer",ke),onClick:e,children:[(0,x.jsx)("h3",{className:"text-ellipsis-2",children:V}),(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("p",{className:"flex-1 text-ellipsis-2",children:me}),(0,x.jsx)(G.Z,{condition:Ne,children:(0,x.jsx)("img",{className:"radius-6",src:Ne,alt:""})})]})]})},S=Re,tn=function(w){var ke=w.cardKey,V=w.bindLinkUrl,me=function(){V&&window.open(V)};switch(ke){case Y.H1.ONE:return(0,x.jsx)(E,j()(j()({},w),{},{onClick:me}));case Y.H1.TWO:return(0,x.jsx)(S,j()(j()({},w),{},{onClick:me}));case Y.H1.THREE:return(0,x.jsx)(fe,j()(j()({},w),{},{onClick:me}));case Y.H1.FOUR:return(0,x.jsx)(X,j()(j()({},w),{},{onClick:me}))}},ln=tn,r=n(89083),de=n(70183),qe={"inner-container":"inner-container____n5mL","card-item-container":"card-item-container___rBOVp","card-style-two":"card-style-two___mNZ7T"},ge=T().bind(qe),fn=function(w){var ke=w.className,V=w.visible,me=w.onClose,Ne=w.cardList,e=function(ae){return Ne?.length===1&&ae.cardKey===Y.H1.TWO};return(0,x.jsx)(r.Z,{title:"\u5C55\u793A\u53F0",className:ke,visible:V,onClose:me,children:Ne?.length>0?(0,x.jsx)("div",{className:ge(qe["inner-container"],"scrollbar"),children:(0,x.jsx)("div",{className:ge(qe["card-item-container"]),children:Ne?.map(function(he,ae){return(0,x.jsx)(ln,j()(j()({},he),{},{className:e(he)?qe["card-style-two"]:""}),"".concat(he.cardKey).concat(ae))})})}):(0,x.jsx)("div",{className:ge("flex","h-full","items-center","content-center"),children:(0,x.jsx)(de.Z,{description:"\u6682\u65E0\u6570\u636E"})})})},Qe=fn},50644:function($e,pe,n){n.d(pe,{H:function(){return W}});var le=n(48305),j=n.n(le),Y=n(68108),d=n(94581),G=n.n(d),s=n(75271),T=n(52676),W=function(se){var L=se.className,X=se.text,ne=se.onClick,O=se.placement,t=O===void 0?"top":O,E=(0,s.useRef)(null),i=(0,s.useState)(!1),ie=j()(i,2),$=ie[0],fe=ie[1];return(0,s.useEffect)(function(){var nn=function(){if(E.current){var S=E.current,tn=S.scrollWidth>S.clientWidth;fe(tn)}},P=requestAnimationFrame(nn);return function(){cancelAnimationFrame(P)}},[X]),(0,T.jsx)("div",{className:G()("text-ellipsis",L),ref:E,onClick:ne,children:(0,T.jsx)(Y.Z,{title:$?X:"",placement:t,children:X})})}},96534:function($e,pe,n){n.d(pe,{Ew:function(){return E},Op:function(){return se},Ri:function(){return x},UX:function(){return ne},Y5:function(){return L},ZR:function(){return nn},a1:function(){return $},dS:function(){return t},ko:function(){return X},nX:function(){return fe},p_:function(){return i}});var le=n(82092),j=n.n(le),Y=n(6619),d=n(64799),G=n(49528),s=n(45019),T=n(44689),W=n(52676),x=[{value:d.Qr.AUTO,label:"\u81EA\u52A8\u8C03\u7528"},{value:d.Qr.ON_DEMAND,label:"\u6309\u9700\u8C03\u7528"},{value:d.Qr.MANUAL,label:"\u624B\u52A8\u9009\u62E9"},{value:d.Qr.MANUAL_ON_DEMAND,label:"\u624B\u52A8\u9009\u62E9+\u6309\u9700\u8C03\u7528"}],se=[{value:d.Km.No,label:"\u5426"},{value:d.Km.Yes,label:"\u662F"}],L=[{value:d.E8.No,label:"\u5426"},{value:d.E8.Yes,label:"\u662F"}],X=[{value:d.kD.MIXED,label:(0,W.jsxs)("span",{className:"flex items-center",children:[(0,W.jsx)("span",{children:"\u6DF7\u5408"}),(0,W.jsx)(Y.Z,{title:"\u7ED3\u5408\u5168\u6587\u68C0\u7D22\u4E0E\u8BED\u4E49\u68C0\u7D22\u7684\u4F18\u52BF,\u5E76\u5BF9\u7ED3\u679C\u8FDB\u884C\u7EFC\u5408\u6392\u5E8F",icon:(0,W.jsx)(T.Z,{})})]})},{value:d.kD.SEMANTIC,label:(0,W.jsxs)("span",{className:"flex items-center",children:[(0,W.jsx)("span",{children:"\u8BED\u4E49"}),(0,W.jsx)(Y.Z,{title:"\u57FA\u4E8E\u5411\u91CF\u7684\u6587\u672C\u76F8\u5173\u6027\u67E5\u8BE2,\u63A8\u8350\u5728\u9700\u8981\u7406\u89E3\u8BED\u4E49\u5173\u8054\u5EA6\u548C\u8DE8\u8BED\u8A00\u67E5\u8BE2\u7684\u573A\u666F\u4F7F\u7528\u3002",icon:(0,W.jsx)(T.Z,{})})]})},{value:d.kD.FULL_TEXT,label:(0,W.jsxs)("span",{className:"flex items-center",children:[(0,W.jsx)("span",{children:"\u5168\u6587"}),(0,W.jsx)(Y.Z,{title:"\u4F9D\u8D56\u4E8E\u5173\u952E\u8BCD\u7684\u5168\u6587\u641C\u7D22,\u63A8\u8350\u5728\u641C\u7D22\u5177\u6709\u7279\u5B9A\u540D\u79F0\u3001\u7F29\u5199\u8BCD\u3001\u77ED\u8BED\u6216ID\u7684\u573A\u666F\u4F7F\u7528\u3002",icon:(0,W.jsx)(T.Z,{})})]})}],ne=[{value:d.E3.DEFAULT,label:"\u9ED8\u8BA4"},{value:d.E3.CUSTOM,label:"\u81EA\u5B9A\u4E49"}],O=[{value:d.c0.TIME,label:"\u5B9A\u65F6\u89E6\u53D1",img:""},{value:d.c0.EVENT,label:"\u4E8B\u4EF6\u89E6\u53D1",img:""}],t=[{value:s.tJ.SINGLE,label:"\u5355\u5F20\u5361\u7247"},{value:s.tJ.LIST,label:"\u7AD6\u5411\u5217\u8868"}],E=[{label:"\u7CBE\u786E\u6A21\u5F0F",value:G.jD.Precision},{label:"\u5E73\u8861\u6A21\u5F0F",value:G.jD.Balanced},{label:"\u521B\u610F\u6A21\u5F0F",value:G.jD.Creative},{label:"\u81EA\u5B9A\u4E49",value:G.jD.Customization}],i=j()(j()(j()({},G.jD.Precision,{temperature:.1,topP:.7}),G.jD.Balanced,{temperature:1,topP:.7}),G.jD.Creative,{temperature:1,topP:.8}),ie=[{value:s.HD.Tenant,label:"\u5168\u5C40"},{value:s.HD.Space,label:"\u5DE5\u4F5C\u7A7A\u95F4"}],$=[{value:d.oI.Text,label:"\u5355\u884C\u6587\u672C"},{value:d.oI.Paragraph,label:"\u6BB5\u843D"},{value:d.oI.Number,label:"\u6570\u5B57"},{value:d.oI.Select,label:"\u5355\u9009"},{value:d.oI.MultipleSelect,label:"\u591A\u9009"},{value:d.oI.AutoRecognition,label:"\u667A\u80FD\u8BC6\u522B"}],fe={options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",children:[]}]}]},nn=400},71530:function($e,pe,n){n.d(pe,{Z:function(){return j}});var le=function(Y){return Y.NewNotifyMessage="new_notify_message",Y.RefreshChatMessage="refresh_chat_message",Y}({}),j={NewNotifyMessage:le.NewNotifyMessage,RefreshChatMessage:le.RefreshChatMessage}},75468:function($e,pe,n){var le=n(90228),j=n.n(le),Y=n(87999),d=n.n(Y),G=n(80241),s=n(29333),T=n(56179),W=function(){var se=(0,s.Z)(G.co,{manual:!0,debounceMaxWait:300}),L=se.runAsync,X=function(){var ne=d()(j()().mark(function O(t,E){var i,ie,$,fe,nn;return j()().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return i=E?.variableParams,Re.next=3,L({agentId:t,devMode:!1,variables:i});case 3:ie=Re.sent,$=ie.success,fe=ie.data,$&&(nn=fe?.id,T.history.push("/home/chat/".concat(nn,"/").concat(t),E));case 7:case"end":return Re.stop()}},O)}));return function(t,E){return ne.apply(this,arguments)}}();return{handleCreateConversation:X,runAsyncConversationCreate:L}};pe.Z=W},88458:function($e,pe,n){var le=n(15558),j=n.n(le),Y=n(48305),d=n.n(Y),G=n(64799),s=n(75271),T=function(){var x=(0,s.useState)([]),se=d()(x,2),L=se[0],X=se[1],ne=function(E){var i=j()(L);if(i.some(function($){return $.id===E.id})){var ie=i.findIndex(function($){return $.id===E.id});i.splice(ie,1)}else i.push({id:E.id,type:E.type});X(i)},O=function(E){if(E!=null&&E.length){var i=E.filter(function(ie){return ie.defaultSelected===G.Km.Yes}).map(function(ie){return{id:ie.id,type:ie.type}});X(i||[])}};return{selectedComponentList:L,setSelectedComponentList:X,handleSelectComponent:ne,initSelectedComponentList:O}};pe.Z=T},27689:function($e,pe,n){n.d(pe,{K:function(){return L}});var le=n(90228),j=n.n(le),Y=n(87999),d=n.n(Y),G=n(48305),s=n.n(G),T=n(92068),W=n(14334),x=n(75271),se=n(56179),L=function(){var ne=(0,x.useState)(T.unifiedThemeService.getCurrentData()),O=s()(ne,2),t=O[0],E=O[1],i=(0,x.useState)(!1),ie=s()(i,2),$=ie[0],fe=ie[1],nn=(0,se.useModel)("tenantConfigInfo"),P=nn.tenantConfigInfo;(0,x.useEffect)(function(){var he=function(Ge){E(Ge),fe(!1)};return T.unifiedThemeService.addListener(he),function(){T.unifiedThemeService.removeListener(he)}},[]);var Re=(0,x.useCallback)(function(he){return d()(j()().mark(function ae(){var Ge=arguments;return j()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return fe(!0),ce.prev=1,ce.next=4,he.apply(void 0,Ge);case 4:ce.next=11;break;case 6:throw ce.prev=6,ce.t0=ce.catch(1),console.error("\u4E3B\u9898\u66F4\u65B0\u5931\u8D25:",ce.t0),fe(!1),ce.t0;case 11:case"end":return ce.stop()}},ae,null,[[1,6]])}))},[]),S=Re(T.unifiedThemeService.updatePrimaryColor.bind(T.unifiedThemeService)),tn=Re(T.unifiedThemeService.updateAntdTheme.bind(T.unifiedThemeService)),ln=Re(T.unifiedThemeService.updateNavigationStyle.bind(T.unifiedThemeService)),r=Re(T.unifiedThemeService.updateLayoutStyle.bind(T.unifiedThemeService)),de=Re(T.unifiedThemeService.updateBackground.bind(T.unifiedThemeService)),qe=Re(T.unifiedThemeService.updateLanguage.bind(T.unifiedThemeService)),ge=(0,x.useCallback)(d()(j()().mark(function he(){var ae;return j()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return ae=t.antdTheme==="light"?"dark":"light",Se.next=3,tn(ae);case 3:case"end":return Se.stop()}},he)})),[t.antdTheme,tn]),fn=(0,x.useCallback)(d()(j()().mark(function he(){var ae;return j()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return ae=t.layoutStyle===W.B.DARK?W.B.LIGHT:W.B.DARK,Se.next=3,r(ae);case 3:case"end":return Se.stop()}},he)})),[t.layoutStyle,r]),Qe=(0,x.useCallback)(d()(j()().mark(function he(){var ae;return j()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return ae=t.navigationStyle===W.F.STYLE1?W.F.STYLE2:W.F.STYLE1,Se.next=3,ln(ae);case 3:case"end":return Se.stop()}},he)})),[t.navigationStyle,ln]),Ze=(0,x.useCallback)(d()(j()().mark(function he(){var ae;return j()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return ae=t.language==="zh-CN"?"en-US":"zh-CN",Se.next=3,qe(ae);case 3:case"end":return Se.stop()}},he)})),[t.language,qe]),w=Re(T.unifiedThemeService.resetToDefault.bind(T.unifiedThemeService)),ke=t.antdTheme==="dark",V=t.layoutStyle===W.B.DARK,me=t.navigationStyle===W.F.STYLE2,Ne=t.language==="zh-CN",e=(0,x.useMemo)(function(){return T.unifiedThemeService.getExtraColors()},[P]);return{data:t,isLoading:$,updatePrimaryColor:S,updateAntdTheme:tn,updateNavigationStyle:ln,updateLayoutStyle:r,updateBackground:de,updateLanguage:qe,toggleAntdTheme:ge,toggleNavigationTheme:fn,toggleNavigationStyle:Qe,toggleLanguage:Ze,resetToDefault:w,primaryColor:t.primaryColor,antdTheme:t.antdTheme,navigationStyle:t.navigationStyle,layoutStyle:t.layoutStyle,backgroundId:t.backgroundId,language:t.language,isDarkMode:ke,isNavigationDark:V,isNavigationExpanded:me,isChineseLanguage:Ne,extraColors:e}};pe.Z=L},76058:function($e,pe,n){n.r(pe),n.d(pe,{default:function(){return pr}});var le=n(82092),j=n.n(le),Y=n(26068),d=n.n(Y),G=n(48305),s=n.n(G),T=n(82456),W=n(56716),x=n(6772),se=n(27791),L=n(27689),X=n(65390),ne=n(85461),O=n(80241),t=n(64799),E=n(92122),i=n(53895),ie=n(24057),$=n(39373),fe=n(83005),nn=n(94581),P=n.n(nn),Re=n(16483),S=n.n(Re),tn=n(32222),ln=n.n(tn),r=n(75271),de=n(56179),qe=n(90228),ge=n.n(qe),fn=n(15558),Qe=n.n(fn),Ze=n(87999),w=n.n(Ze),ke=n(68670),V=n(6619),me=n(39671),Ne={container:"container___BIda5",box:"box___HxIHi"},e=n(52676),he=P().bind(Ne),ae=function(o){var l=o.textClassName,a=o.list,c=o.onClick,u=(0,r.useState)([]),D=s()(u,2),v=D[0],C=D[1];return(0,r.useEffect)(function(){var h=a?.filter(function(_){return!_.systemVariable})||[];C(h)},[a]),(0,e.jsx)(e.Fragment,{children:v?.length>0?(0,e.jsx)("div",{className:he("flex","items-center",Ne.container),children:v?.map(function(h){return(0,e.jsx)("span",{className:he(Ne.box,"radius-6","hover-box","cursor-pointer"),onClick:c,children:h.name},h.key)})}):(0,e.jsx)("p",{className:he(l),children:"\u7528\u4E8E\u4FDD\u5B58\u7528\u6237\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u8BA9\u667A\u80FD\u4F53\u8BB0\u4F4F\u7528\u6237\u7684\u7279\u5F81\uFF0C\u4F7F\u56DE\u590D\u66F4\u52A0\u4E2A\u6027\u5316\u3002"})})},Ge=ae,Se=n(13943),ce=n(29333),Ie=n(41249),Be=n(7914),Xe={"xagi-nav-style2":"xagi-nav-style2___D_5gS",text:"text___lu863","page-container":"page-container___6T91q",container:"container___n4vwB",title:"title___jfALi"},ue=P().bind(Xe),b=function(o){var l=o.children,a=o.title;return(0,e.jsxs)("div",{className:ue(Xe.container,"flex","content-between","items-center"),children:[(0,e.jsx)("p",{className:ue(Xe.title),children:a}),l]})},an=b,En=n(6377),An=n(96534),$n=n(84411),ut=n(89858),On=n(86743),ft=n(16621),hn=n(43183),gt=n(75994),Bn=n(71691),Rn=n(78434),rn=n(9504),Ft=n(7010),lt=n(14719),pt=n(10580),Pn=n(92448),Nt=n(48279),zn=n(26324),sn=n(28190),Tn=n(63619),kn=n(51430),Xt=n(47548),Jt=n(43898),Ot=r.createContext({}),$t=function(){var o=(0,r.useContext)(Ot),l=o.setActivatorNodeRef,a=o.listeners;return(0,e.jsx)(rn.ZP,d()({type:"text",size:"small",icon:(0,e.jsx)($n.Z,{}),style:{cursor:"move"},ref:l},a))},Sn=function(o){var l=o.id,a=o.value,c=o.onChange,u=o.onDelete,D=(0,Bn.nB)({id:l}),v=D.attributes,C=D.listeners,h=D.setNodeRef,_=D.setActivatorNodeRef,N=D.transform,Z=D.transition,p=D.isDragging,y={transform:Rn.ux.Translate.toString(N),transition:Z,zIndex:p?10:1,opacity:p?.8:1,paddingRight:"10px"},f=(0,r.useMemo)(function(){return{setActivatorNodeRef:_,listeners:C,attributes:v}},[_,C,v]);return(0,e.jsx)(Ot.Provider,{value:f,children:(0,e.jsx)("div",{ref:h,style:y,className:"flex items-center gap-10",children:(0,e.jsx)(Tn.Z,{onChange:c,defaultValue:a,prefix:(0,e.jsx)($t,{}),suffix:(0,e.jsx)(On.Z,{onClick:u})})})})},dn=Sn,We={"xagi-nav-style2":"xagi-nav-style2___Vw_lu",text:"text___DpIqc","page-container":"page-container___BZYHH","modal-body-container":"modal-body-container___iqS7z","radio-group":"radio-group___uJ5NF",tab:"tab___iCYZL","add-item-btn":"add-item-btn___ok9vO"},jn=n(26145),wn=n(83352),qn=n(13143),Yn={"xagi-nav-style2":"xagi-nav-style2___Fb04i",text:"text___gZ17y","page-container":"page-container___bO5a2","bind-box":"bind-box___RRQok","component-image":"component-image___tjc0T","example-box":"example-box___m9xlQ","e-header":"e-header___lPvLG",icon:"icon___RW1tv","icon-rotate":"icon-rotate___zDrWT","rotate-box":"rotate-box___BOAGL"},Un=P().bind(Yn),Pa=function(o){var l=o.selectConfig,a=o.targetComponentInfo,c=o.onClick,u=r.useState(!0),D=s()(u,2),v=D[0],C=D[1],h=l||{},_=h.targetType,N=h.targetName,Z=h.targetIcon,p=[a?.targetType,_].includes(t.qR.Plugin)?jn:wn;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Un(Yn["bind-box"],"mb-16"),children:!a&&!N?(0,e.jsx)("div",{className:Un("flex","items-center","content-center","h-full","cursor-pointer"),onClick:c,children:"\u8BF7\u9009\u62E9\u7B26\u5408\u6570\u636E\u89C4\u8303\u7684\u63D2\u4EF6\u6216\u5DE5\u4F5C\u6D41"}):(0,e.jsxs)("div",{className:Un("flex","items-center","h-full","cursor-pointer","px-16","gap-10"),onClick:c,children:[(0,e.jsx)("img",{className:Un(Yn["component-image"],"radius-6"),src:a?.icon||Z||p,alt:""}),(0,e.jsx)("span",{children:a?.name||N})]})}),(0,e.jsxs)("div",{className:Un(Yn["example-box"]),children:[(0,e.jsxs)("div",{className:Un("flex","items-center","content-between","cursor-pointer",Yn["e-header"]),onClick:function(){return C(!v)},children:[(0,e.jsx)("span",{children:"\u63D2\u4EF6\u6216\u5DE5\u4F5C\u6D41\u8FD4\u56DE\u6570\u636E\u7ED3\u6784\u4EE5\u53CA\u793A\u4F8B"}),(0,e.jsx)(qn.Z,{className:Un(Yn.icon,j()({},Yn["icon-rotate"],!v))})]}),(0,e.jsxs)("div",{className:Un(j()({},Yn["rotate-box"],v)),children:[(0,e.jsx)("p",{children:"//options \u9009\u9879\u5217\u8868\uFF1B"}),(0,e.jsx)("p",{children:"//value\uFF1A\u9009\u9879\u503C\uFF1Blabel\u9009\u9879\u540D\u79F0\uFF1Bchildren\u4E0B\u7EA7\u9009\u9879"}),(0,e.jsx)("pre",{children:(0,e.jsx)("code",{children:JSON.stringify(An.nX,null,2)})})]})]})]})},La=Pa,Et=P().bind(We),Za=function(o){var l=o.mode,a=l===void 0?E.jA.Create:l,c=o.currentVariable,u=o.id,D=o.targetId,v=o.inputData,C=o.open,h=o.onCancel,_=o.onConfirm,N=sn.Z.useForm(),Z=s()(N,1),p=Z[0],y=(0,r.useState)(t.oI.Text),f=s()(y,2),K=f[0],g=f[1],m=(0,r.useState)(t.z1.MANUAL),U=s()(m,2),B=U[0],J=U[1],A=(0,r.useState)([{id:(0,Pn.Z)(),value:"",label:""},{id:(0,Pn.Z)(),value:"",label:""}]),Oe=s()(A,2),oe=Oe[0],Ue=Oe[1],Ke=(0,r.useState)(""),ze=s()(Ke,2),ye=ze[0],te=ze[1],He=(0,r.useState)(!1),un=s()(He,2),_e=un[0],k=un[1],Ee=(0,r.useState)([]),we=s()(Ee,2),Ye=we[0],Ve=we[1],re=(0,r.useState)(null),q=s()(re,2),F=q[0],be=q[1],Cn=(0,r.useRef)([]),xn=(0,r.useState)(!1),Ae=s()(xn,2),De=Ae[0],Pe=Ae[1];(0,r.useEffect)(function(){if(C){if(be(null),a===E.jA.Create)g(t.oI.Text),p.setFieldValue("inputType",t.oI.Text),Ve([]),J(t.z1.MANUAL),Ue([{id:(0,Pn.Z)(),value:"",label:""},{id:(0,Pn.Z)(),value:"",label:""}]),te("");else if(a===E.jA.Update&&c){var R=c.name,I=c.displayName,ve=c.require,Fe=c.inputType,en=c.description,Ce=c.selectConfig,Je=c.bindValue;if(g(Fe),J(Ce?.dataSourceType),Ce?.dataSourceType===t.z1.BINDING)Ve([{type:Ce?.targetType,targetId:Ce?.targetId,status:t.BQ.Added}]),Ue([{id:(0,Pn.Z)(),value:"",label:""},{id:(0,Pn.Z)(),value:"",label:""}]);else{var yn;if(Ve([]),Ce&&(Ce==null||(yn=Ce.options)===null||yn===void 0?void 0:yn.length)>0){var Mn;Ue((Ce==null||(Mn=Ce.options)===null||Mn===void 0?void 0:Mn.map(function(_t){return d()(d()({},_t),{},{id:(0,Pn.Z)()})}))||[])}}te(Je||""),p.setFieldsValue({name:R,displayName:I,require:ve,inputType:Fe,description:en})}}},[C,a,c]);var je=(0,hn.Dy)((0,hn.VT)(hn.we),(0,hn.VT)(hn.Lg,{coordinateGetter:Bn.is})),Q=function(I){var ve=I.active,Fe=I.over;Fe&&ve.id!==Fe.id&&Ue(function(en){var Ce=en.findIndex(function(yn){return yn.id===ve.id}),Je=en.findIndex(function(yn){return yn.id===Fe.id});return(0,Bn.Rp)(en,Ce,Je)})},Me=function(I){Ue(function(ve){return ve.filter(function(Fe){return Fe.id!==I})})},cn=function(){Ue(function(I){return[].concat(Qe()(I),[{id:(0,Pn.Z)(),value:"",label:""}])})},on=function(I,ve){var Fe=I.target.value;Ue(function(en){var Ce=Qe()(en),Je=Ce.findIndex(function(yn){return yn.id===ve});return Je!==-1&&(Ce[Je].value=Fe,Ce[Je].label=Fe),Ce})},pn=function(I){var ve=I.targetId,Fe=I.targetType;be(I),Ve([{type:Fe,targetId:ve,status:t.BQ.Added}])},vn=[{key:t.z1.MANUAL,label:"\u624B\u52A8\u521B\u5EFA",children:(0,e.jsxs)("div",{className:Et("flex","flex-col","gap-10"),children:[(0,e.jsx)(hn.LB,{modifiers:[gt.DL],sensors:je,collisionDetection:hn.pE,onDragEnd:Q,children:(0,e.jsx)(Bn.Fo,{items:oe.map(function(R){return R.id}),strategy:Bn.qw,children:oe?.map(function(R){var I=R.id,ve=R.value;return(0,e.jsx)(dn,{id:I,value:ve,onChange:function(en){return on(en,I)},onDelete:function(){return Me(I)}},I)})})}),(0,e.jsxs)("div",{className:Et(We["add-item-btn"]),onClick:cn,children:[(0,e.jsx)(ft.Z,{}),"\u6DFB\u52A0\u9009\u9879"]})]})},{key:t.z1.BINDING,label:"\u6570\u636E\u7ED1\u5B9A",children:(0,e.jsx)(La,{selectConfig:c?.selectConfig,targetComponentInfo:F,onClick:function(){return k(!0)}})}],mn=(0,de.useRequest)(O.D$,{manual:!0,debounceInterval:300,onSuccess:function(){Pe(!1),Ie.ZP.success("\u53D8\u91CF\u66F4\u65B0\u6210\u529F"),_(Cn.current)},onError:function(){Pe(!1)}}),xt=mn.run,H=function(I){var ve=null,Fe=ye;if([t.oI.Select,t.oI.MultipleSelect].includes(K)){if(B===t.z1.MANUAL){if(oe!=null&&oe.length){if(oe!=null&&oe.some(function(Mn){return!Mn.value})){Ie.ZP.error("\u8BF7\u586B\u5199\u9009\u9879\u503C");return}}else{Ie.ZP.error("\u8BF7\u6DFB\u52A0\u9009\u9879");return}ve={dataSourceType:B,targetType:null,targetId:null,targetName:null,targetIcon:null,targetDescription:null,options:oe}}else{var en;if(!F&&!(c!=null&&(en=c.selectConfig)!==null&&en!==void 0&&en.targetId)){Ie.ZP.error("\u8BF7\u9009\u62E9\u7ED1\u5B9A\u7EC4\u4EF6");return}ve=F?{dataSourceType:B,targetType:F?.targetType,targetId:F?.targetId,targetName:F?.name,targetIcon:F?.icon,targetDescription:F?.description,options:[]}:c?.selectConfig}Fe=""}var Ce=d()(d()({},I),{},{bindValue:Fe,systemVariable:!1,selectConfig:ve}),Je;a===E.jA.Update&&c?Je=v.map(function(Mn){return Mn.key===c.key?d()(d()({},Mn),Ce):Mn}):Je=[].concat(Qe()(v),[d()(d()({},Ce),{},{key:(0,Pn.Z)()})]),Cn.current=Je;var yn={id:u,targetId:D,bindConfig:{variables:Je}};Pe(!0),xt(yn)},M=function(){p.submit()};return(0,e.jsxs)(Nt.Z,{form:p,open:C,loading:De,classNames:{body:Et(We["modal-body-container"])},title:"\u7F16\u8F91\u6216\u6DFB\u52A0\u53D8\u91CF",onCancel:h,onConfirm:M,children:[(0,e.jsxs)(sn.Z,{form:p,preserve:!1,layout:"vertical",requiredMark:zn.N,onFinish:H,autoComplete:"off",children:[(0,e.jsx)(sn.Z.Item,{name:"name",label:"\u5B57\u6BB5\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0"}],children:(0,e.jsx)(Tn.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0\uFF0C\u7B26\u5408\u5B57\u6BB5\u547D\u540D\u89C4\u5212",showCount:!0,maxLength:30})}),(0,e.jsx)(sn.Z.Item,{name:"displayName",label:"\u5C55\u793A\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u5C55\u793A\u540D\u79F0"}],children:(0,e.jsx)(Tn.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u5C55\u793A\u540D\u79F0\uFF0C\u4F9B\u524D\u7AEF\u5C55\u793A\u4F7F\u7528",showCount:!0,maxLength:30})}),(0,e.jsx)(sn.Z.Item,{name:"description",label:"\u63CF\u8FF0",children:(0,e.jsx)(Tn.Z.TextArea,{className:"dispose-textarea-count",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u63CF\u8FF0",showCount:!0,maxLength:200,autoSize:{minRows:3,maxRows:5}})}),(0,e.jsx)(sn.Z.Item,{name:"inputType",label:"\u8F93\u5165\u65B9\u5F0F",children:(0,e.jsx)(kn.ZP.Group,{className:Et(We["radio-group"]),options:An.a1,value:K,onChange:function(I){return g(I.target.value)}})}),[t.oI.Select,t.oI.MultipleSelect].includes(K)?(0,e.jsx)(Xt.Z,{rootClassName:Et(We.tab),activeKey:B,onChange:function(I){return J(I)},items:vn}):(0,e.jsx)(sn.Z.Item,{className:Et("mb-16"),label:"\u9ED8\u8BA4\u503C",children:(0,e.jsx)(Tn.Z.TextArea,{value:ye,onChange:function(I){return te(I.target.value)},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",autoSize:{minRows:3,maxRows:5}})}),(0,e.jsx)(sn.Z.Item,{name:"require",valuePropName:"checked",children:(0,e.jsx)(Jt.Z,{children:"\u5FC5\u586B"})})]}),(0,e.jsx)(ke.Z,{open:_e,onCancel:function(){return k(!1)},checkTag:t.qR.Plugin,addComponents:Ye,onAdded:pn,hideTop:[t.qR.Knowledge,t.qR.Table,t.qR.MCP]})]})},Oa=Za,ga={"table-container":"table-container___TK9dV"},Wn=P().bind(ga),pa=r.createContext({}),Ua=function(){var o=(0,r.useContext)(pa),l=o.setActivatorNodeRef,a=o.listeners;return(0,e.jsx)(rn.ZP,d()({type:"text",size:"small",icon:(0,e.jsx)($n.Z,{}),style:{cursor:"move"},ref:l},a))},wa=function(o){var l=(0,Bn.nB)({id:o["data-row-key"]}),a=l.attributes,c=l.listeners,u=l.setNodeRef,D=l.setActivatorNodeRef,v=l.transform,C=l.transition,h=l.isDragging,_=d()(d()(d()({},o.style),h?{position:"relative"}:{}),{},{transform:Rn.ux.Translate.toString(v),transition:C,zIndex:h?10:1,opacity:h?.8:1,paddingRight:"10px"}),N=(0,r.useMemo)(function(){return{setActivatorNodeRef:D,listeners:c}},[D,c]);return(0,e.jsx)(pa.Provider,{value:N,children:(0,e.jsx)("tr",d()(d()({},o),{},{ref:u,style:_},a))})},Va=function(o){var l=o.open,a=o.variablesInfo,c=o.onCancel,u=o.onConfirm,D=(0,r.useState)([]),v=s()(D,2),C=v[0],h=v[1],_=(0,r.useState)(E.jA.Create),N=s()(_,2),Z=N[0],p=N[1],y=(0,r.useState)(),f=s()(y,2),K=f[0],g=f[1],m=(0,r.useState)(!1),U=s()(m,2),B=U[0],J=U[1],A=(0,r.useRef)(!1),Oe=(0,r.useRef)(null),oe=(0,r.useRef)([]),Ue=(0,r.useRef)(t.tE.Delete);(0,r.useEffect)(function(){var re,q=(a==null||(re=a.bindConfig)===null||re===void 0?void 0:re.variables)||[];if(q?.length>0){var F=q.map(function(be){return d()(d()({},be),{},{key:(0,Pn.Z)()})});h(F)}},[a]);var Ke=function(q){J(!0),p(E.jA.Update),g(q)},ze=function(){J(!0),p(E.jA.Create),g(null)},ye=(0,de.useRequest)(O.D$,{manual:!0,debounceInterval:300,onSuccess:function(){Ue.current===t.tE.Delete?Ie.ZP.success("\u5220\u9664\u6210\u529F"):Ie.ZP.success("\u66F4\u65B0\u6210\u529F"),A.current=!0,h(oe.current)}}),te=ye.run,He=function(q){var F={id:a?.id,targetId:a?.targetId,bindConfig:{variables:q}};te(F)},un=function(q){var F=C.filter(function(be){return be.key!==q});oe.current=F,Ue.current=t.tE.Delete,He(F)},_e=[{dataIndex:"sort",key:"sort",align:"center",width:40,fixed:"left",render:function(q,F){return!F.systemVariable&&(0,e.jsx)("span",{className:Wn("flex","items-center","h-full"),children:(0,e.jsx)(Ua,{})})}},{title:(0,e.jsx)(En.Z,{label:"\u540D\u79F0"}),dataIndex:"name",key:"name",width:180,fixed:"left",render:function(q){return(0,e.jsx)("div",{className:Wn("flex","items-center","h-full"),children:(0,e.jsx)("span",{className:Wn("text-ellipsis"),children:q||"--"})})}},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description",ellipsis:!0,width:180,render:function(q){return(0,e.jsx)("span",{className:Wn("flex","items-center","h-full"),children:q||"--"})}},{title:"\u7C7B\u578B",dataIndex:"systemVariable",key:"systemVariable",width:100,ellipsis:!0,render:function(q){return(0,e.jsx)("span",{className:Wn("flex","items-center","h-full"),children:q?"\u7CFB\u7EDF\u53D8\u91CF":"\u81EA\u5B9A\u4E49\u53D8\u91CF"})}},{title:"\u8F93\u5165\u65B9\u5F0F",dataIndex:"inputType",key:"inputType",width:100,render:function(q){var F;return(0,e.jsx)("span",{className:Wn("flex","items-center","h-full"),children:((F=An.a1.find(function(be){return be.value===q}))===null||F===void 0?void 0:F.label)||"--"})}},{title:"\u662F\u5426\u5FC5\u987B",dataIndex:"require",key:"require",width:100,align:"center",render:function(q){return(0,e.jsx)("span",{className:Wn("flex","items-center","content-center","h-full"),children:q?"\u662F":"\u5426"})}},{title:"",dataIndex:"action",width:100,fixed:"right",render:function(q,F){return(0,e.jsx)(e.Fragment,{children:F!=null&&F.systemVariable?(0,e.jsx)("span",{children:"--"}):(0,e.jsxs)(Ft.Z,{className:Wn("flex","content-between","items-center"),children:[(0,e.jsx)(rn.ZP,{type:"text",icon:(0,e.jsx)(ut.Z,{className:Wn("cursor-pointer"),onClick:function(){return Ke(F)}})}),(0,e.jsx)(rn.ZP,{type:"text",icon:(0,e.jsx)(On.Z,{className:Wn("cursor-pointer"),onClick:function(){return un(F.key)}})})]})})}}],k=function(){var q,F;(q=Oe.current)===null||q===void 0||q.scrollTo({top:(F=Oe.current)===null||F===void 0?void 0:F.scrollHeight,behavior:"smooth"})};(0,r.useEffect)(function(){l&&k()},[l]);var Ee=function(q){J(!1),h(q),A.current=!0},we=function(){J(!1),A.current?u():c()},Ye=function(q){var F=q.active,be=q.over;if(be&&F.id!==be.id){Ue.current=t.tE.Drag;var Cn=C.findIndex(function(De){return De.key===F?.id}),xn=C.findIndex(function(De){return De.key===be?.id}),Ae=(0,Bn.Rp)(C,Cn,xn);oe.current=Ae,h(Ae),He(Ae)}},Ve=(0,hn.Dy)((0,hn.VT)(hn.we),(0,hn.VT)(hn.Lg,{coordinateGetter:Bn.is}));return(0,e.jsxs)(lt.Z,{width:870,title:"\u53D8\u91CF",open:l,footer:null,onCancel:we,children:[(0,e.jsx)(hn.LB,{modifiers:[gt.DL],sensors:Ve,collisionDetection:hn.pE,onDragEnd:Ye,children:(0,e.jsx)(Bn.Fo,{items:C.map(function(re){return re.key}),strategy:Bn.qw,children:(0,e.jsx)(pt.Z,{ref:Oe,rowKey:"key",components:{body:{row:wa}},className:Wn(ga["table-container"]),columns:_e,dataSource:C,pagination:!1,scroll:{y:C?.length>=10?560:void 0},footer:function(){return(0,e.jsx)(rn.ZP,{icon:(0,e.jsx)(ft.Z,{}),onClick:ze,children:"\u65B0\u589E"})}})})}),(0,e.jsx)(Oa,{id:a?.id,targetId:a?.targetId,mode:Z,currentVariable:K,inputData:C,open:B,onCancel:function(){return J(!1)},onConfirm:Ee})]})},Ka=Va,Hn={"xagi-nav-style2":"xagi-nav-style2___wTLiv",text:"text___Prt2n","page-container":"page-container____Frz9",container:"container___Nt4W2",select:"select___GzVHt"},ha=n(92973),et=n(59261),st=n(45019),nt={"xagi-nav-style2":"xagi-nav-style2___mMXYN",text:"text___QMrw8","page-container":"page-container___OILW5",container:"container___CqnIK","extra-box":"extra-box___y8u7O","gap-6":"gap-6___L0Qqc","img-box":"img-box___DFhgw","content-box":"content-box___YPipV",name:"name___MaQ7a",desc:"desc___POp__"},it=P().bind(nt),ka=function(o){var l=o.className,a=o.showImage,c=a===void 0?!0:a,u=o.agentComponentInfo,D=o.defaultImage,v=o.extra,C=(0,r.useMemo)(function(){var _=u.targetId,N=u.type,Z=u.targetConfig,p=u.spaceId;if(Z&&p===Z.spaceId)switch(N){case t.qR.Plugin:return Z?.type===st.AQ.HTTP?"/space/".concat(p,"/plugin/").concat(_):"/space/".concat(p,"/plugin/").concat(_,"/cloud-tool");case t.qR.Workflow:return"/space/".concat(p,"/workflow/").concat(_);case t.qR.Table:return"/space/".concat(p,"/table/").concat(_);case t.qR.Knowledge:return"/space/".concat(p,"/knowledge/").concat(_)}},[u]),h=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:it("radius-6",nt["img-box"]),children:c&&(0,e.jsx)("img",{src:u.icon||D,alt:""})}),(0,e.jsxs)("div",{className:it("flex-1","flex","flex-col","content-center","overflow-hide",nt["content-box"]),children:[(0,e.jsx)("h3",{className:it("text-ellipsis",nt.name),children:u.name}),(0,e.jsx)(et.Z,{condition:u.description,children:(0,e.jsx)("p",{className:it("text-ellipsis",nt.desc),children:u.description})})]})]});return(0,e.jsxs)("div",{className:it("flex","items-center",nt.container,l),children:[C?(0,e.jsx)(de.Link,{to:C,target:"_blank",className:it("flex-1","flex","items-center","overflow-hide",nt["gap-6"]),children:h}):(0,e.jsx)("div",{className:it("flex-1","flex","items-center","overflow-hide",nt["gap-6"]),children:h}),(0,e.jsx)("div",{className:it(nt["extra-box"],"flex","items-center"),children:v})]})},Ca=ka,Wa=n(48657),qt=n(24573),xa={"knowledge-extra":"knowledge-extra___TBNaC"},tt=n(15028),Ha=n(84896),It={"space-box":"space-box___WAHPn","input-number-arrow":"input-number-arrow___FvcHe","input-disabled":"input-disabled___X0xv_"},Bt=P().bind(It),Qa=function(o){var l=o.value,a=o.onChange,c=o.placeholder,u=c===void 0?"\u8BF7\u8F93\u5165":c,D=o.min,v=D===void 0?0:D,C=o.max,h=o.step,_=h===void 0?1:h,N=Number(l)===C?It["input-disabled"]:"",Z=Number(l)===v?It["input-disabled"]:"",p=function(U){var B=U.target.value,J=/^-?\d*(\.\d*)?$/;(J.test(B)||B===""||B==="-")&&a(B)},y=function(U){var B=Math.max(U,v);C&&U>C&&(B=C),_.toString().includes(".")&&(B=parseFloat(B.toFixed(2))),a(B.toString())},f=function(){var U,B=l?.toString()||"0";(B&&B.charAt(B.length-1)==="."||B==="-")&&(B=B.slice(0,-1));var J=(U=B)===null||U===void 0?void 0:U.replace(/0*(\d+)/,"$1");y(Number(J))},K=function(){var U=l?Number(l):0,B=U+_;y(B)},g=function(){var U=l?Number(l):0,B=U-_;y(B)};return(0,e.jsxs)("div",{className:Bt("flex",It["space-box"]),children:[(0,e.jsx)(Tn.Z,{rootClassName:Bt("flex-1"),placeholder:u,value:l,onChange:p,onBlur:f}),(0,e.jsxs)("div",{className:Bt("flex","flex-col","content-between",It["input-number-arrow"]),children:[(0,e.jsx)(Ha.Z,{className:Bt("cursor-pointer",N),onClick:K}),(0,e.jsx)(qn.Z,{className:Bt("cursor-pointer",Z),onClick:g})]})]})},_a=Qa,Ga=n(63960),Ea={"slider-box":"slider-box___gGjDf"},Aa=P().bind(Ea),za=function(o){var l=o.value,a=o.onChange,c=o.min,u=c===void 0?0:c,D=o.max,v=o.step,C=v===void 0?1:v;return(0,e.jsxs)("div",{className:Aa("flex-1","flex"),children:[(0,e.jsx)(Ga.Z,{className:Aa(Ea["slider-box"]),min:u,max:D,step:C,onChange:a,value:Number(l)||0}),(0,e.jsx)(_a,{value:l,min:u,max:D,step:C,onChange:a})]})},At=za,Ya=n(44384),Ut={"xagi-nav-style2":"xagi-nav-style2___tiJHy",text:"text___woITT","page-container":"page-container___PUZVi",container:"container___ZTPVh",title:"title___C_jJg"},dt=P().bind(Ut),Xa=function(o){var l=o.open,a=o.agentComponentInfo,c=o.onCancel,u=(0,de.useModel)("spaceAgent"),D=u.agentComponentList,v=u.setAgentComponentList,C=(0,r.useState)({invokeType:t.Qr.AUTO,searchStrategy:t.kD.MIXED,maxRecallCount:5,matchingDegree:.5,noneRecallReplyType:t.E3.DEFAULT,noneRecallReply:""}),h=s()(C,2),_=h[0],N=h[1],Z=(0,de.useRequest)(O.Uc,{manual:!0,debounceInterval:300}),p=Z.run;(0,r.useEffect)(function(){a!=null&&a.bindConfig&&N(a.bindConfig)},[a]);var y=function(m,U){var B=d()(d()({},_),{},j()({},m,U));if(N(B),m==="invokeType"){var J=D.map(function(A){return A.id===a?.id&&(A.bindConfig.invokeType=U),A});v(J)}p({id:a?.id,targetId:a?.targetId,bindConfig:B})},f=function(m){Number.isNaN(m)||y("maxRecallCount",m)},K=function(m){Number.isNaN(m)||y("matchingDegree",m)};return(0,e.jsx)(lt.Z,{title:"\u77E5\u8BC6\u5E93\u8BBE\u7F6E",open:l,footer:null,onCancel:c,children:(0,e.jsxs)("div",{className:dt(Ut.container),children:[(0,e.jsx)("h3",{className:dt(Ut.title),children:"\u53EC\u56DE"}),(0,e.jsxs)("div",{className:dt("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u8C03\u7528\u65B9\u5F0F",title:"\u9009\u62E9\u662F\u5426\u6BCF\u8F6E\u5BF9\u8BDD\u81EA\u52A8\u53EC\u56DE\u6216\u6309\u9700\u4ECE\u7279\u5B9A\u77E5\u8BC6\u5E93\u53EC\u56DE"}),(0,e.jsx)(kn.ZP.Group,{onChange:function(m){return y("invokeType",m.target.value)},value:_.invokeType,options:An.Ri.filter(function(g){return g.value!==t.Qr.MANUAL&&g.value!==t.Qr.MANUAL_ON_DEMAND})})]}),(0,e.jsxs)("div",{className:dt("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u641C\u7D22\u7B56\u7565",title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u83B7\u53D6\u77E5\u8BC6\u7684\u68C0\u7D22\u65B9\u5F0F,\u4E0D\u540C\u7684\u68C0\u7D22\u7B56\u7565\u53EF\u4EE5\u66F4\u6709\u6548\u5730\u627E\u5230\u6B63\u786E\u7684\u4FE1\u606F,\u63D0\u9AD8\u5176\u751F\u6210\u7684\u7B54\u6848\u7684\u51C6\u786E\u6027\u548C\u53EF\u7528\u6027\u3002"}),(0,e.jsx)(kn.ZP.Group,{onChange:function(m){return y("searchStrategy",m.target.value)},value:_.searchStrategy,options:An.ko})]}),(0,e.jsxs)("div",{className:dt("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u6700\u5927\u53EC\u56DE\u6570\u91CF",title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B\u7684\u6700\u5927\u6BB5\u843D\u6570,\u6570\u503C\u8D8A\u5927\u8FD4\u56DE\u7684\u5185\u5BB9\u8D8A\u591A"}),(0,e.jsx)(At,{min:1,max:10,value:_.maxRecallCount.toString(),onChange:f})]}),(0,e.jsxs)("div",{className:dt("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u6700\u5C0F\u5339\u914D\u5EA6",title:"\u6839\u636E\u8BBE\u7F6E\u7684\u5339\u914D\u5EA6\u9009\u53D6\u6BB5\u843D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B,\u4F4E\u4E8E\u8BBE\u5B9A\u5339\u914D\u5EA6\u7684\u5185\u5BB9\u4E0D\u4F1A\u88AB\u53EC\u56DE"}),(0,e.jsx)(At,{min:.01,max:.99,step:.01,value:_.matchingDegree.toString(),onChange:K})]}),(0,e.jsx)(Ya.Z,{}),(0,e.jsx)("h3",{className:dt(Ut.title),children:"\u56DE\u590D"}),(0,e.jsxs)("div",{className:dt("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u65E0\u53EC\u56DE\u56DE\u590D",title:"\u5F53\u77E5\u8BC6\u5E93\u6CA1\u6709\u53EC\u56DE\u6709\u6548\u5207\u7247\u65F6\u7684\u56DE\u590D\u8BDD\u672F"}),(0,e.jsx)(kn.ZP.Group,{onChange:function(m){return y("noneRecallReplyType",m.target.value)},value:_.noneRecallReplyType,options:An.UX})]}),(0,e.jsx)(et.Z,{condition:_.noneRecallReplyType===t.E3.CUSTOM,children:(0,e.jsx)(Tn.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165",value:_.noneRecallReply,onChange:function(m){return y("noneRecallReply",m.target.value)},autoSize:{minRows:3,maxRows:5}})})]})})},Ja=Xa,ea=P().bind(xa),$a=function(o){var l=o.textClassName,a=o.list,c=o.deleteList,u=o.onDel,D=(0,r.useState)(!1),v=s()(D,2),C=v[0],h=v[1],_=(0,r.useState)(),N=s()(_,2),Z=N[0],p=N[1],y=function(m){h(!0),p(m)},f=function(m,U){return c?.some(function(B){return B.targetId===m&&B.type===U})},K=function(m){var U=m.targetId,B=m.type;f(U,B)||u(m.id,m.targetId,m.type)};return a!=null&&a.length?(0,e.jsxs)(e.Fragment,{children:[a.map(function(g){var m;return(0,e.jsx)(Ca,{agentComponentInfo:g,defaultImage:ha,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:ea("cursor-pointer","hover-box",xa["knowledge-extra"]),onClick:function(){return y(g)},children:[(g==null||(m=g.bindConfig)===null||m===void 0?void 0:m.invokeType)===t.Qr.AUTO?"\u81EA\u52A8\u8C03\u7528":"\u6309\u9700\u8C03\u7528",(0,e.jsx)(Wa.Z,{})]}),(0,e.jsx)(V.Z,{title:"\u53D6\u6D88\u77E5\u8BC6\u5E93",icon:f(g.targetId,g.type)?(0,e.jsx)(qt.Z,{}):(0,e.jsx)(On.Z,{className:ea("cursor-pointer")}),onClick:function(){return K(g)}})]})},g.id)}),(0,e.jsx)(Ja,{agentComponentInfo:Z,open:C,onCancel:function(){return h(!1)}})]}):(0,e.jsx)("p",{className:ea(l),children:"\u5C06\u6587\u6863\u3001URL\u3001\u4E09\u65B9\u6570\u636E\u6E90\u4E0A\u4F20\u4E3A\u6587\u672C\u77E5\u8BC6\u5E93\u540E\uFF0C\u7528\u6237\u53D1\u9001\u6D88\u606F\u65F6\uFF0C\u667A\u80FD\u4F53\u80FD\u591F\u5F15\u7528\u6587\u672C\u77E5\u8BC6\u4E2D\u7684\u5185\u5BB9\u56DE\u7B54\u7528\u6237\u95EE\u9898\u3002"})},qa=$a,Sa={},ja=P().bind(Sa),eo=function(o){var l=o.textClassName,a=o.openLongMemory,c=a===void 0?i.nb.Close:a;return console.log(c),(0,e.jsx)("div",{className:ja(Sa.container),children:(0,e.jsx)("p",{className:ja(l),children:"\u603B\u7ED3\u804A\u5929\u5BF9\u8BDD\u7684\u5185\u5BB9\uFF0C\u5E76\u7528\u4E8E\u66F4\u597D\u7684\u54CD\u5E94\u7528\u6237\u7684\u6D88\u606F\u3002"})})},no=eo,Da=n(46388),ya=n(10802),to=n(73415),ao=function(o){var l,a=o.textClassName,c=o.itemClassName,u=o.type,D=o.list,v=o.deleteList,C=o.onSet,h=o.onDel,_=function(y){switch(y){case t.qR.Plugin:return{text:"\u63D2\u4EF6\u80FD\u591F\u8BA9\u667A\u80FD\u4F53\u8C03\u7528\u5916\u90E8API\uFF0C\u4F8B\u5982\u641C\u7D22\u4FE1\u606F\u3001\u6D4F\u89C8\u7F51\u9875\u3001\u751F\u6210\u56FE\u7247\u7B49\uFF0C\u6269\u5C55\u667A\u80FD\u4F53\u7684\u80FD\u529B\u548C\u4F7F\u7528\u573A\u666F\u3002",image:jn};case t.qR.Workflow:return{text:"\u5DE5\u4F5C\u6D41\u652F\u6301\u901A\u8FC7\u53EF\u89C6\u5316\u7684\u65B9\u5F0F\uFF0C\u5BF9\u63D2\u4EF6\u3001\u5927\u8BED\u8A00\u6A21\u578B\u3001\u4EE3\u7801\u5757\u7B49\u529F\u80FD\u8FDB\u884C\u7EC4\u5408\uFF0C\u4ECE\u800C\u5B9E\u73B0\u590D\u6742\u3001\u7A33\u5B9A\u7684\u4E1A\u52A1\u6D41\u7A0B\u7F16\u6392\uFF0C\u4F8B\u5982\u65C5\u884C\u89C4\u5212\u3001\u62A5\u544A\u5206\u6790\u7B49\u3002",image:wn};case t.qR.MCP:return{text:"\u667A\u80FD\u4F53\u53EF\u4EE5\u901A\u8FC7\u6807\u51C6\u5316\u534F\u8BAE\uFF08MCP\uFF09\u8FDE\u63A5\u5404\u7C7B\u670D\u52A1API\u5E76\u53D1\u8D77\u8C03\u7528\u3002",image:ya};case t.qR.Table:return{text:"\u4EE5\u8868\u683C\u7ED3\u6784\u7EC4\u7EC7\u6570\u636E\uFF0C\u53EF\u5B9E\u73B0\u7C7B\u4F3C\u4E66\u7B7E\u548C\u56FE\u4E66\u7BA1\u7406\u7B49\u529F\u80FD\u3002",image:Da}}},N=function(y,f,K){return v?.some(function(g){return g.id===y&&g.targetId===f&&g.type===K})},Z=function(y){var f,K=y.id,g=y.targetId,m=y.type;N(K,g,m)||h(y.id,y.targetId,y.type,((f=y.bindConfig)===null||f===void 0?void 0:f.toolName)||"")};return D!=null&&D.length?D.map(function(p){var y;return(0,e.jsx)(Ca,{className:c,showImage:u!==t.qR.MCP,agentComponentInfo:p,defaultImage:(y=_(u))===null||y===void 0?void 0:y.image,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{title:"\u8BBE\u7F6E",icon:(0,e.jsx)(to.Mf,{className:"cursor-pointer"}),onClick:function(){return C(p.id)}}),(0,e.jsx)(V.Z,{title:"\u5220\u9664",icon:N(p.id,p.targetId,p.type)?(0,e.jsx)(qt.Z,{}):(0,e.jsx)(On.Z,{className:"cursor-pointer"}),onClick:function(){return Z(p)}})]})},p.id)}):(0,e.jsx)("p",{className:a,children:(l=_(u))===null||l===void 0?void 0:l.text})},wt=ao,oo=n(61265),Tt=n(40677),ro=n(64807),uo=n(14258),at={"xagi-nav-style2":"xagi-nav-style2___E5g3B",text:"text___OR8er","page-container":"page-container___edfQB",container:"container___bIAoA",header:"header___xEh8u",desc:"desc___iAhI9","reply-content":"reply-content___DGIN1",textarea:"textarea___RVpuC",tips:"tips___lKH6p",footer:"footer___zzeZr","btn-disabled":"btn-disabled___gaWUM"},Qn=P().bind(at),lo=function(o){var l=o.async,a=o.asyncReplyContent,c=o.onSaveSet,u=(0,r.useState)(),D=s()(u,2),v=D[0],C=D[1],h=(0,r.useState)(""),_=s()(h,2),N=_[0],Z=_[1],p=(0,r.useState)(!1),y=s()(p,2),f=y[0],K=y[1];(0,r.useEffect)(function(){Z(a||"\u5DF2\u7ECF\u5F00\u59CB\u4E3A\u60A8\u5904\u7406\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\u8FD0\u884C\u7ED3\u679C"),C(l||t.Km.No)},[l,a]);var g=(0,r.useMemo)(function(){return v===t.Km.Yes&&!N},[v,N]),m=function(){var B=w()(ge()().mark(function J(){var A;return ge()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return A={async:v,asyncReplyContent:N},K(!0),oe.next=4,c(A);case 4:K(!1);case 5:case"end":return oe.stop()}},J)}));return function(){return B.apply(this,arguments)}}(),U=function(J){var A=J?t.Km.Yes:t.Km.No;C(A)};return(0,e.jsxs)("div",{className:Qn("flex","flex-col","h-full",at.container),children:[(0,e.jsxs)("div",{className:Qn("flex-1"),children:[(0,e.jsxs)("header",{className:Qn("flex","items-center",at.header),children:[(0,e.jsx)("div",{className:Qn("flex-1"),children:"\u5F02\u6B65\u8FD0\u884C"}),(0,e.jsx)(Be.Z,{checked:v===t.Km.Yes,onChange:U})]}),(0,e.jsx)("p",{className:Qn(at.desc),children:"\u4EFB\u52A1\u8FDB\u5165\u5F02\u6B65\u8FD0\u884C\u65F6\u9ED8\u8BA4\u8FD4\u56DE\u4E00\u6761\u56DE\u590D\u5185\u5BB9\uFF0C\u7528\u6237\u53EF\u4EE5\u7EE7\u7EED\u5BF9\u8BDD\uFF0C\u4EFB\u52A1\u5728\u540E\u53F0\u8FD0\u884C\u5B8C\u6210\u540E\u4F1A\u901A\u77E5\u7528\u6237"}),(0,e.jsxs)(et.Z,{condition:v,children:[(0,e.jsx)(En.Z,{className:Qn(at["reply-content"]),label:"\u56DE\u590D\u5185\u5BB9"}),(0,e.jsx)(Tn.Z.TextArea,{className:Qn("dispose-textarea-count"),classNames:{textarea:Qn(at.textarea)},placeholder:"\u60A8\u53EF\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u6D88\u606F\u56DE\u590D,\u4EFB\u52A1\u8FD0\u884C\u65F6\u5C06\u81EA\u52A8\u56DE\u590D,\u6BD4\u5982: \u4EFB\u52A1\u5DF2\u5728\u8FDB\u884C\u4E2D,\u4E00\u65E6\u5B8C\u6210\u6211\u5C06\u7B2C\u4E00\u65F6\u95F4\u5411\u60A8\u62A5\u544A\u7ED3\u679C,\u60A8\u8FD8\u6709\u5176\u4ED6\u9700\u8981\u6211\u534F\u52A9\u7684\u4E8B\u9879\u5417?",autoSize:{minRows:5,maxRows:6},maxLength:1e3,showCount:!0,value:N,onChange:function(J){return Z(J.target.value)}}),(0,e.jsx)(et.Z,{condition:!N,children:(0,e.jsx)("p",{className:Qn(at.tips),children:"\u56DE\u590D\u5185\u5BB9\u5FC5\u987B\u8BBE\u7F6E"})})]})]}),(0,e.jsx)("footer",{className:Qn(at.footer),children:(0,e.jsx)(rn.ZP,{type:"primary",onClick:m,loading:f,className:Qn(j()({},at["btn-disabled"],g)),disabled:g,children:"\u4FDD\u5B58"})})]})},so=lo,io=n(3055),ba=n(44689),na=n(17701),ta=n(29328),aa=n(70183),Mt={"space-box":"space-box___KVU7O","radius-number":"radius-number___pKpEO","link-switch":"link-switch___BekgU",footer:"footer___xsshb"},ot=P().bind(Mt),co=function(o){var l,a,c=o.componentInfo,u=o.cardInfo,D=o.onSaveSet,v=(0,r.useState)(st.tJ.SINGLE),C=s()(v,2),h=C[0],_=C[1],N=(0,r.useState)("5"),Z=s()(N,2),p=Z[0],y=Z[1],f=(0,r.useState)(""),K=s()(f,2),g=K[0],m=K[1],U=(0,r.useState)([]),B=s()(U,2),J=B[0],A=B[1],Oe=(0,r.useState)(!1),oe=s()(Oe,2),Ue=oe[0],Ke=oe[1],ze=(0,r.useState)([]),ye=s()(ze,2),te=ye[0],He=ye[1],un=(0,r.useState)(!1),_e=s()(un,2),k=_e[0],Ee=_e[1],we=(0,r.useState)(!1),Ye=s()(we,2),Ve=Ye[0],re=Ye[1],q=(0,r.useState)(""),F=s()(q,2),be=F[0],Cn=F[1],xn=(0,r.useState)(!1),Ae=s()(xn,2),De=Ae[0],Pe=Ae[1],je=c==null||(l=c.bindConfig)===null||l===void 0?void 0:l.outputArgBindConfigs,Q=c==null||(a=c.bindConfig)===null||a===void 0?void 0:a.cardBindConfig;(0,r.useEffect)(function(){if(h===st.tJ.LIST){var H=ln()(je),M=(0,Tt.Lg)(H),R=(0,Tt.y7)(M);A(R)}},[je,h]),(0,r.useEffect)(function(){if(Q&&u?.id===Q.cardId){var H;if(_(Q.bindCardStyle),y(Q?.maxCardCount||"5"),m(Q?.bindArray),Q!=null&&Q.bindLinkUrl&&(re(!0),Cn(Q?.bindLinkUrl)),Q!=null&&(H=Q.cardArgsBindConfigs)!==null&&H!==void 0&&H.length){var M,R=Q==null||(M=Q.cardArgsBindConfigs)===null||M===void 0?void 0:M.map(function(I){var ve,Fe=(u==null||(ve=u.argList)===null||ve===void 0||(ve=ve.find(function(en){return en.key===I.key}))===null||ve===void 0?void 0:ve.placeholder)||"";return{key:I.key,cardKey:I.bindValue,placeholder:Fe}});He(R)}}else _(st.tJ.SINGLE),m(""),y("5"),re(!1),Cn(""),He(u?.argList||[])},[u,Q]);var Me=(0,r.useMemo)(function(){var H=ln()(je);if(h===st.tJ.SINGLE)return(0,Tt.k$)(H);var M;return g?((M=(0,Tt.DY)(H,g))===null||M===void 0?void 0:M.subArgs)||[]:[]},[je,h,g]),cn=function(M){var R=M.target.value;_(R),re(!1),Cn(""),He(u?.argList||[])},on=function(M,R){var I=R.node;m(String(I.key)),Ke(!1)},pn=function(M,R){var I=ln()(te);I[M].open=R,He(I)},vn=function(M,R){var I=ln()(te);I[M].open=!1,I[M].cardKey=R?.key||"",He(I)},mn=function(M){re(M),M||Cn("")},xt=function(){var H=w()(ge()().mark(function M(){var R,I,ve,Fe;return ge()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=te?.map(function(Je){return{key:Je.key,bindValue:Je?.cardKey||""}}),I={cardId:u?.id,cardKey:u?.cardKey,bindCardStyle:h,cardArgsBindConfigs:R,bindLinkUrl:be},ve=h===st.tJ.SINGLE?I:d()(d()({},I),{},{maxCardCount:p,bindArray:g}),Fe={cardBindConfig:ve},Pe(!0),Ce.next=7,D(Fe);case 7:Pe(!1);case 8:case"end":return Ce.stop()}},M)}));return function(){return H.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:ot("flex-1","flex","flex-col"),children:[(0,e.jsxs)(sn.Z,{layout:"vertical",preserve:!1,rootClassName:ot("flex-1"),requiredMark:zn.N,children:[(0,e.jsx)(sn.Z.Item,{label:"\u9009\u62E9\u5361\u7247\u6837\u5F0F",children:(0,e.jsx)(kn.ZP.Group,{onChange:cn,value:h,options:An.dS})}),h===st.tJ.LIST&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(sn.Z.Item,{label:(0,e.jsx)(En.Z,{label:"\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6"}),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6"}],children:(0,e.jsx)(_a,{value:p,onChange:function(M){return y(M)},placeholder:"\u8BF7\u8F93\u5165\u5361\u7247\u5217\u8868\u6700\u5927\u957F\u5EA6",max:20,min:1})}),(0,e.jsx)(sn.Z.Item,{label:"\u4E3A\u5361\u7247\u6574\u4F53\u7ED1\u5B9A\u4E00\u4E2A\u6570\u7EC4",children:(0,e.jsx)(na.default,{allowClear:!0,onClear:function(){m(""),Ke(!1)},popupMatchSelectWidth:!1,open:Ue,value:g||null,onDropdownVisibleChange:function(M){Ke(M)},onClick:function(){return Ke(!0)},placeholder:"\u8BF7\u4E3A\u5361\u7247\u6574\u4F53\u7ED1\u5B9A\u4E00\u4E2A\u6570\u7EC4",dropdownRender:function(){return J?.length>0?(0,e.jsx)(ta.Z,{treeData:J,height:300,blockNode:!0,defaultExpandAll:!0,onClick:function(R){R.stopPropagation()},onSelect:on,fieldNames:{title:"name",key:"key",children:"subArgs"}}):(0,e.jsx)(aa.Z,{description:"\u6682\u65E0\u6570\u636E"})}})})]}),(0,e.jsx)(sn.Z.Item,{label:"\u4E3A\u5361\u7247\u5185\u7684\u5217\u8868\u9879\u7ED1\u5B9A\u6570\u636E",children:te?.map(function(H,M){return(0,e.jsx)(sn.Z.Item,{className:ot("mb-16"),children:(0,e.jsxs)("div",{className:ot("flex","items-center",Mt["space-box"]),children:[(0,e.jsx)("span",{className:ot(Mt["radius-number"]),children:M+1}),(0,e.jsx)(na.default,{allowClear:!0,onClear:function(){return vn(M)},rootClassName:ot("flex-1"),popupMatchSelectWidth:!1,disabled:h===st.tJ.LIST&&!g,open:!!H?.open,value:H?.cardKey||null,onDropdownVisibleChange:function(I){return pn(M,I)},onClick:function(){return pn(M,!0)},dropdownRender:function(){return Me?.length>0?(0,e.jsx)(ta.Z,{treeData:Me,height:300,blockNode:!0,defaultExpandAll:!0,onClick:function(ve){ve.stopPropagation()},onSelect:function(ve,Fe){var en=Fe.node;return vn(M,en)},fieldNames:{title:"name",key:"key",children:"subArgs"}}):(0,e.jsx)(aa.Z,{description:"\u6682\u65E0\u6570\u636E"})},placeholder:H.placeholder||"\u8BF7\u9009\u62E9"})]})},H.key)})}),(0,e.jsxs)(sn.Z.Item,{label:"\u70B9\u51FB\u5361\u7247\u8DF3\u8F6C",tooltip:{title:"\u7ED1\u5B9A\u540E\uFF0C\u7528\u6237\u5728\u667A\u80FD\u4F53\u5BF9\u8BDD\u6D41\u4E2D\u70B9\u51FB \u5361\u7247\u53EF\u8DF3\u8F6C\u81F3\u5176\u4ED6\u9875\u9762",icon:(0,e.jsx)(ba.Z,{})},children:[(0,e.jsx)(Be.Z,{className:ot(Mt["link-switch"]),disabled:!(Me!=null&&Me.length),size:"small",checked:Ve,onChange:mn}),(0,e.jsx)(et.Z,{condition:Ve,children:(0,e.jsx)(na.default,{allowClear:!0,onClear:function(){Cn(""),Ee(!1)},rootClassName:ot("flex-1"),popupMatchSelectWidth:!1,open:k,value:be||null,onDropdownVisibleChange:function(M){return Ee(M)},onClick:function(){return Ee(!0)},dropdownRender:function(){return(0,e.jsx)(ta.Z,{treeData:Me,height:300,blockNode:!0,defaultExpandAll:!0,onClick:function(R){R.stopPropagation()},onSelect:function(R,I){var ve=I.node;Cn(ve.key),Ee(!1)},fieldNames:{title:"name",key:"key",children:"subArgs"}})},placeholder:"\u4E3Aurl\u9009\u62E9\u6570\u636E\u6765\u6E90"})})]})]}),(0,e.jsx)("footer",{className:ot(Mt.footer),children:(0,e.jsx)(rn.ZP,{type:"primary",onClick:xt,loading:De,children:"\u4FDD\u5B58"})})]})},vo=co,oa={"card-box":"card-box___L2_At",radio:"radio___oRbG0"},ra=P().bind(oa),mo=function(o){var l=o.cardKey,a=o.list,c=o.onChoose;return(0,e.jsx)("div",{className:ra("h-full","overflow-y"),children:a?.map(function(u){return(0,e.jsxs)("div",{className:ra(oa["card-box"],"flex","hover-box","cursor-pointer"),onClick:function(){return c(u)},children:[(0,e.jsx)("img",{className:"radius-6",src:u.imageUrl,alt:""}),(0,e.jsx)(kn.ZP,{checked:u.cardKey===l,className:ra(oa.radio)})]},u.id)})})},fo=mo,Vt={"xagi-nav-style2":"xagi-nav-style2___T7zkB",text:"text___QIxvP","page-container":"page-container___AK9tx",container:"container___KJPJn",title:"title___J7PRF"},St=P().bind(Vt),go=function(o){var l=o.loading,a=o.agentCardList,c=o.componentInfo,u=o.onSaveSet,D=(0,r.useState)(),v=s()(D,2),C=v[0],h=v[1];return(0,r.useEffect)(function(){var _,N=c==null||(_=c.bindConfig)===null||_===void 0||(_=_.cardBindConfig)===null||_===void 0?void 0:_.cardId;h(N?a.find(function(Z){return Z.id===N}):a[0])},[a,c]),(0,e.jsx)("div",{className:St("flex","h-full",Vt.container),children:l?(0,e.jsx)(io.Z,{className:St("h-full")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:St("flex-1","px-16","py-16"),children:[(0,e.jsx)("h3",{className:St(Vt.title),children:"\u9009\u62E9\u5361\u7247\u6837\u5F0F"}),(0,e.jsx)(fo,{cardKey:C?.cardKey,list:a,onChoose:h})]}),(0,e.jsxs)("div",{className:St("flex-1","flex","flex-col","px-16","py-16"),children:[(0,e.jsx)("h3",{className:St(Vt.title),children:"\u4E3A\u5361\u7247\u7ED1\u5B9A\u6570\u636E\u6E90"}),(0,e.jsx)(vo,{cardInfo:C,componentInfo:c,onSaveSet:u})]})]})})},po=go,ct={"xagi-nav-style2":"xagi-nav-style2___xErq3",text:"text___Jldky","page-container":"page-container___XNHR8",container:"container___f5OC_",header:"header____Mhqp",desc:"desc___zrBqq","reply-content":"reply-content___e4lnw",textarea:"textarea___I5Ny2",tips:"tips___gxuIs",footer:"footer___v3HYH","btn-disabled":"btn-disabled___pDNWH"},Xn=P().bind(ct),ho=function(o){var l=o.exceptionOut,a=o.fallbackMsg,c=o.onSaveSet,u=(0,r.useState)(),D=s()(u,2),v=D[0],C=D[1],h=(0,r.useState)(""),_=s()(h,2),N=_[0],Z=_[1],p=(0,r.useState)(!1),y=s()(p,2),f=y[0],K=y[1];(0,r.useEffect)(function(){Z(a||""),C(l||t.Km.No)},[l,a]);var g=(0,r.useMemo)(function(){return v===t.Km.Yes&&!N},[v,N]),m=function(){var B=w()(ge()().mark(function J(){var A;return ge()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return A={exceptionOut:v,fallbackMsg:N},K(!0),oe.next=4,c(A);case 4:K(!1);case 5:case"end":return oe.stop()}},J)}));return function(){return B.apply(this,arguments)}}(),U=function(J){var A=J?t.Km.Yes:t.Km.No;C(A)};return(0,e.jsxs)("div",{className:Xn("flex","flex-col","h-full",ct.container),children:[(0,e.jsxs)("div",{className:Xn("flex-1"),children:[(0,e.jsxs)("header",{className:Xn("flex","items-center",ct.header),children:[(0,e.jsx)("div",{className:Xn("flex-1"),children:"\u5F02\u5E38\u65F6\u4E2D\u65AD\u6D41\u7A0B"}),(0,e.jsx)(Be.Z,{checked:v===t.Km.Yes,onChange:U})]}),(0,e.jsx)("p",{className:Xn(ct.desc),children:"\u5F02\u5E38\u65F6\u8F93\u51FA\u7ED9\u5927\u6A21\u578B\u7684\u9ED8\u8BA4\u4FE1\u606F"}),(0,e.jsxs)(et.Z,{condition:v,children:[(0,e.jsx)(En.Z,{className:Xn(ct["reply-content"]),label:"\u9ED8\u8BA4\u4FE1\u606F"}),(0,e.jsx)(Tn.Z.TextArea,{className:Xn("dispose-textarea-count"),classNames:{textarea:Xn(ct.textarea)},placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u65F6\u8F93\u51FA\u7ED9\u5927\u6A21\u578B\u7684\u9ED8\u8BA4\u4FE1\u606F",autoSize:{minRows:5,maxRows:6},maxLength:1e3,showCount:!0,value:N,onChange:function(J){return Z(J.target.value)}})]})]}),(0,e.jsx)("footer",{className:Xn(ct.footer),children:(0,e.jsx)(rn.ZP,{type:"primary",onClick:m,loading:f,className:Xn(j()({},ct["btn-disabled"],g)),disabled:g,children:"\u4FDD\u5B58"})})]})},Co=ho,vt={"xagi-nav-style2":"xagi-nav-style2___jGSEw",text:"text___kxX4U","page-container":"page-container___x6Z85","modal-container":"modal-container___DIR0N",container:"container___jZY5S",left:"left___zfIP5",item:"item___kItJN",checked:"checked___Q1XQY",right:"right___AZIcw",close:"close___bZkPm"},Fa=n(20860),ua=n(68108),Kt={"xagi-nav-style2":"xagi-nav-style2___un28i",text:"text___jZkxu","page-container":"page-container___FCTEI",container:"container___n6D12",icon:"icon___CDvAh",footer:"footer___bl30K"},jt=P().bind(Kt),xo=function(o){var l=o.invokeType,a=o.onSaveSet,c=o.defaultSelected,u=(0,r.useState)(),D=s()(u,2),v=D[0],C=D[1],h=(0,r.useState)(t.Km.No),_=s()(h,2),N=_[0],Z=_[1],p=(0,r.useState)(!1),y=s()(p,2),f=y[0],K=y[1];(0,r.useEffect)(function(){C(l||t.Qr.AUTO),Z(c||t.Km.No)},[l,c]);var g=function(B){var J=B.target.value;C(J)},m=function(){var U=w()(ge()().mark(function B(){var J;return ge()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return J={invokeType:v,defaultSelected:N},K(!0),Oe.next=4,a(J);case 4:K(!1);case 5:case"end":return Oe.stop()}},B)}));return function(){return U.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:jt(Kt.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:jt("flex-1"),children:[(0,e.jsxs)("h3",{className:jt("gap-6","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u8C03\u7528\u65B9\u5F0F"}),(0,e.jsx)(ua.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:"\u81EA\u52A8\u8C03\u7528\uFF1A\u7528\u6237\u6BCF\u6B21\u53D1\u9001\u6D88\u606F\u540E\u90FD\u4F1A\u89E6\u53D1\u8C03\u7528\u4E00\u6B21"}),(0,e.jsx)("p",{children:"\u6309\u9700\u8C03\u7528\uFF1A\u7531\u6A21\u578B\u6839\u636E\u4EFB\u52A1\u60C5\u51B5\u51B3\u5B9A\u662F\u5426\u9700\u8981\u8C03\u7528"}),(0,e.jsx)("p",{children:"\u624B\u52A8\u9009\u62E9\uFF1A\u7531\u7528\u6237\u51B3\u5B9A\u662F\u5426\u4F7F\u7528\u8BE5\u5DE5\u5177\uFF0C\u5728\u7528\u6237\u9009\u62E9\u7684\u60C5\u51B5\u4E0B\u548C\u81EA\u52A8\u8C03\u7528\u6548\u679C\u4E00\u6837"}),(0,e.jsx)("p",{children:"\u624B\u52A8\u9009\u62E9+\u6309\u9700\u8C03\u7528\uFF1A\u7528\u6237\u9009\u62E9\u540E\uFF0C\u7531\u6A21\u578B\u6839\u636E\u4EFB\u52A1\u60C5\u51B5\u9009\u62E9\u662F\u5426\u9700\u8981\u8C03\u7528\uFF1B\u7528\u6237\u4E0D\u9009\u62E9\u5219\u4E0D\u4F1A\u8C03\u7528"})]}),children:(0,e.jsx)(Fa.Z,{className:jt(Kt.icon)})})]}),(0,e.jsx)(kn.ZP.Group,{options:An.Ri,onChange:g,value:v}),(0,e.jsxs)(et.Z,{condition:v===t.Qr.MANUAL||v===t.Qr.MANUAL_ON_DEMAND,children:[(0,e.jsx)("h3",{className:jt("mt-16"),children:"\u662F\u5426\u9ED8\u8BA4\u9009\u4E2D"}),(0,e.jsx)(kn.ZP.Group,{options:An.Op,onChange:function(B){return Z(B.target.value)},value:N})]})]}),(0,e.jsx)("footer",{className:jt(Kt.footer),children:(0,e.jsx)(rn.ZP,{type:"primary",onClick:m,loading:f,children:"\u4FDD\u5B58"})})]})},_o=(0,r.memo)(xo),kt={"xagi-nav-style2":"xagi-nav-style2___E4WCM",text:"text___BTc0l","page-container":"page-container___aRrpX",container:"container___IwVbE",icon:"icon___yZKCd",footer:"footer___gT5kO"},Rt=P().bind(kt),Eo=function(o){var l=o.directOutput,a=o.onSaveSet,c=(0,r.useState)(),u=s()(c,2),D=u[0],v=u[1],C=(0,r.useState)(!1),h=s()(C,2),_=h[0],N=h[1];(0,r.useEffect)(function(){v(l||t.E8.No)},[l]);var Z=function(f){var K=f.target.value;v(K)},p=function(){var y=w()(ge()().mark(function f(){var K;return ge()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return K={directOutput:D},N(!0),m.next=4,a(K);case 4:N(!1);case 5:case"end":return m.stop()}},f)}));return function(){return y.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:Rt(kt.container,"flex","flex-col"),children:[(0,e.jsxs)("div",{className:Rt("flex-1"),children:[(0,e.jsxs)("h3",{className:Rt("gap-6","flex","items-center"),children:[(0,e.jsx)("span",{children:"\u662F\u5426\u76F4\u63A5\u8F93\u51FA"}),(0,e.jsx)(ua.Z,{title:"\u5982\u679C\u9009\u62E9\u201C\u662F\u201D\uFF0C\u5C06\u4F1A\u628A\u5DE5\u4F5C\u6D41\u8FD0\u884C\u7ED3\u679C\u76F4\u63A5\u8F93\u51FA\u5230\u4F1A\u8BDD\u6846\u4E2D\uFF0C\u4E0D\u4F1A\u518D\u7ECF\u8FC7\u5927\u6A21\u578B\u603B\u7ED3\u8F93\u51FA\u3002",children:(0,e.jsx)(Fa.Z,{className:Rt(kt.icon)})})]}),(0,e.jsx)(kn.ZP.Group,{options:An.Y5,onChange:Z,value:D})]}),(0,e.jsx)("footer",{className:Rt(kt.footer),children:(0,e.jsx)(rn.ZP,{type:"primary",onClick:p,loading:_,children:"\u4FDD\u5B58"})})]})},Ao=(0,r.memo)(Eo),Dt=P().bind(vt),So=function(o){var l=o.open,a=o.currentComponentInfo,c=o.devConversationId,u=o.variables,D=o.onCancel,v=o.settingActionList,C=v===void 0?me.a$:v,h=(0,r.useState)(i.wQ.Params),_=s()(h,2),N=_[0],Z=_[1],p=(0,r.useState)(),y=s()(p,2),f=y[0],K=y[1],g=(0,r.useState)(!1),m=s()(g,2),U=m[0],B=m[1],J=(0,r.useState)([]),A=s()(J,2),Oe=A[0],oe=A[1],Ue=(0,de.useModel)("spaceAgent"),Ke=Ue.setAgentComponentList,ze=(0,de.useModel)("conversationInfo"),ye=ze.runQueryConversation;(0,r.useEffect)(function(){Z(i.wQ.Params),K(a)},[a]);var te={manual:!0,debounceWait:300},He=(0,ce.Z)(O.Cd,te),un=He.runAsync,_e=(0,ce.Z)(O.ao,te),k=_e.runAsync,Ee=(0,ce.Z)(O.M8,te),we=Ee.runAsync,Ye=(0,ce.Z)(O.Nc,te),Ve=Ye.runAsync,re=(0,ce.Z)(O.P4,d()(d()({},te),{},{onSuccess:function(Ae){var De=Ae.data;De!=null&&De.length&&oe(De),B(!1)},onError:function(){B(!1)}})),q=re.run;(0,r.useEffect)(function(){B(!0),q()},[]);var F=function(){var xn=w()(ge()().mark(function Ae(De){return ge()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(f?.type!==t.qR.Plugin){je.next=3;break}return je.next=3,un(De);case 3:if(f?.type!==t.qR.Workflow){je.next=6;break}return je.next=6,k(De);case 6:if(f?.type!==t.qR.Table){je.next=9;break}return je.next=9,we(De);case 9:if(f?.type!==t.qR.MCP){je.next=12;break}return je.next=12,Ve(De);case 12:case"end":return je.stop()}},Ae)}));return function(De){return xn.apply(this,arguments)}}(),be=function(){var xn=w()(ge()().mark(function Ae(De,Pe,je){var Q,Me,cn;return ge()().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return Q=f?.id||0,Me=De??{},cn=d()({id:Q,bindConfig:d()(d()({},f?.bindConfig),Me)},Pe||{}),pn.next=5,F(cn);case 5:je===i.wQ.Method_Call&&c&&ye(c),K(function(vn){return vn&&("bindConfig"in vn&&(vn.bindConfig=d()(d()({},vn.bindConfig),Me)),Pe&&(vn.exceptionOut=Pe.exceptionOut,vn.fallbackMsg=Pe.fallbackMsg)),vn}),Ke(function(vn){return vn.map(function(mn){return mn.id===Q&&(mn.bindConfig=d()(d()({},mn.bindConfig),Me),Pe&&(mn.exceptionOut=Pe.exceptionOut,mn.fallbackMsg=Pe.fallbackMsg)),mn})}),Ie.ZP.success("\u4FDD\u5B58\u6210\u529F");case 9:case"end":return pn.stop()}},Ae)}));return function(De,Pe,je){return xn.apply(this,arguments)}}(),Cn=function(){var Ae,De,Pe,je,Q,Me;switch(N){case i.wQ.Params:return(0,e.jsx)(ro.Z,{variables:u||[],inputArgBindConfigs:f==null||(Ae=f.bindConfig)===null||Ae===void 0?void 0:Ae.inputArgBindConfigs,onSaveSet:be});case i.wQ.Method_Call:return(0,e.jsx)(_o,{invokeType:f==null||(De=f.bindConfig)===null||De===void 0?void 0:De.invokeType,defaultSelected:f==null||(Pe=f.bindConfig)===null||Pe===void 0?void 0:Pe.defaultSelected,onSaveSet:function(on){return be(on,null,N)}});case i.wQ.Output_Way:return(0,e.jsx)(Ao,{directOutput:f==null||(je=f.bindConfig)===null||je===void 0?void 0:je.directOutput,onSaveSet:be});case i.wQ.Async_Run:return(0,e.jsx)(so,{async:f==null||(Q=f.bindConfig)===null||Q===void 0?void 0:Q.async,asyncReplyContent:f==null||(Me=f.bindConfig)===null||Me===void 0?void 0:Me.asyncReplyContent,onSaveSet:be});case i.wQ.Exception_Handling:return(0,e.jsx)(Co,{exceptionOut:f?.exceptionOut||t.Km.No,fallbackMsg:f?.fallbackMsg||"",onSaveSet:function(on){return be(null,on)}});case i.wQ.Card_Bind:return(0,e.jsx)(po,{loading:U,agentCardList:Oe,componentInfo:f,onSaveSet:be})}};return(0,e.jsx)(lt.Z,{centered:!0,open:l,onCancel:D,destroyOnHidden:!0,className:Dt(vt["modal-container"]),modalRender:function(){return(0,e.jsxs)("div",{className:Dt(vt.container,"flex","overflow-hide"),children:[(0,e.jsxs)("div",{className:Dt(vt.left),children:[(0,e.jsx)("h3",{children:"\u8BBE\u7F6E"}),(0,e.jsx)("ul",{children:C.map(function(Ae){return a?.type===t.qR.Table&&[i.wQ.Method_Call,i.wQ.Async_Run,i.wQ.Exception_Handling].includes(Ae.type)||a?.type!==t.qR.Workflow&&Ae.type===i.wQ.Output_Way?null:(0,e.jsx)("li",{className:Dt(vt.item,"cursor-pointer",j()({},vt.checked,N===Ae.type)),onClick:function(){return Z(Ae.type)},children:Ae.label},Ae.type)})})]}),(0,e.jsx)("div",{className:Dt("flex-1",vt.right),children:Cn()}),(0,e.jsx)(uo.Z,{className:Dt(vt.close,"cursor-pointer"),onClick:D})]})}})},jo=So,Vn={"xagi-nav-style2":"xagi-nav-style2___v4Ft8",text:"text___GudlW","page-container":"page-container___tpdhX",container:"container___pz0mN","group-mcp-item":"group-mcp-item___akoCX","img-box":"img-box___DKgNV",name:"name___zlseW",desc:"desc___In9oO","extra-box":"extra-box___KlFIX","down-icon":"down-icon___EAqjU","down-icon-rotate":"down-icon-rotate___HuIxH","group-mcp-item-children":"group-mcp-item-children___Ren3g"},Jn=P().bind(Vn),Do=function(o){var l=o.item,a=o.deleteList,c=o.onSet,u=o.onDel,D=(0,r.useState)(!1),v=s()(D,2),C=v[0],h=v[1];return(0,e.jsxs)("div",{className:Jn(Vn.container),children:[(0,e.jsxs)("div",{className:Jn("flex","items-center",Vn["group-mcp-item"],j()({},Vn.border,C)),onClick:function(){return h(!C)},children:[(0,e.jsx)("span",{className:Jn("radius-6",Vn["img-box"]),children:(0,e.jsx)("img",{src:l.icon,alt:""})}),(0,e.jsxs)("div",{className:Jn("flex","flex-col","flex-1","overflow-hide"),children:[(0,e.jsx)("h3",{className:Jn("text-ellipsis",Vn.name),children:l.groupName}),(0,e.jsx)("p",{className:Jn("text-ellipsis",Vn.desc),children:l.groupDescription})]}),(0,e.jsxs)("div",{className:Jn(Vn["extra-box"],"flex","items-center","cursor-pointer"),children:[(0,e.jsx)("span",{children:"\u5DE5\u5177\uFF08".concat(l.children.length,"\uFF09")}),(0,e.jsx)(qn.Z,{className:Jn(Vn["down-icon"],j()({},Vn["down-icon-rotate"],C))})]})]}),C&&(0,e.jsx)(wt,{textClassName:Jn(Vn.text),itemClassName:Jn(Vn["group-mcp-item-children"]),type:t.qR.MCP,list:l.children,deleteList:a,onSet:c,onDel:u})]})},yo=Do,yt={title:"title___ku1cn","content-box":"content-box___fiZV5",add:"add___TngwK",input:"input___fm7tL"},ht=P().bind(yt),bo=function(o){var l=o.agentConfigInfo,a=o.onChangeAgent,c=(0,r.useState)(""),u=s()(c,2),D=u[0],v=u[1],C=(0,r.useState)([""]),h=s()(C,2),_=h[0],N=h[1];(0,r.useEffect)(function(){if(l){var K;v(l.openingChatMsg),((K=l.openingGuidQuestions)===null||K===void 0?void 0:K.length)>0&&N(l.openingGuidQuestions)}},[l]);var Z=function(){var g=Qe()(_);g.push(""),N(g)},p=function(g){var m=Qe()(_);m.splice(g,1),N(m),a(m,"openingGuidQuestions")},y=function(g){v(g),a(g,"openingChatMsg")},f=function(g,m){var U=Qe()(_);U[g]=m,N(U),a(U,"openingGuidQuestions")};return(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:ht(yt.title),children:"\u5F00\u573A\u767D\u6587\u6848"}),(0,e.jsx)("div",{className:ht(yt["content-box"]),children:(0,e.jsx)(Tn.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u5F00\u573A\u767D",value:D,onChange:function(g){return y(g.target.value)},autoSize:{minRows:3,maxRows:5}})}),(0,e.jsxs)("div",{className:ht("flex","content-between"),children:[(0,e.jsx)("p",{className:ht(yt.title),children:"\u5F00\u573A\u767D\u9884\u7F6E\u95EE\u9898"}),(0,e.jsx)(ft.Z,{className:ht(yt.add,"cursor-pointer"),onClick:Z})]}),(0,e.jsx)("div",{children:_?.map(function(K,g){return(0,e.jsx)(Tn.Z,{rootClassName:ht(yt.input),placeholder:"\u8F93\u5165\u5F00\u573A\u767D\u5F15\u5BFC\u95EE\u9898",value:K,onChange:function(U){return f(g,U.target.value)},showCount:!0,maxLength:30,suffix:(0,e.jsx)(On.Z,{className:ht("cursor-pointer"),onClick:function(){return p(g)}})},g)})})]})},Fo=bo,rt=P().bind(Hn),No=function(o){var l,a,c=o.agentId,u=o.agentConfigInfo,D=o.onChangeAgent,v=(0,r.useState)(!1),C=s()(v,2),h=C[0],_=C[1],N=(0,r.useState)(!1),Z=s()(N,2),p=Z[0],y=Z[1],f=(0,r.useState)(t.qR.Plugin),K=s()(f,2),g=K[0],m=K[1],U=(0,r.useState)([i.bX.Opening_Remarks]),B=s()(U,2),J=B[0],A=B[1],Oe=(0,r.useState)([]),oe=s()(Oe,2),Ue=oe[0],Ke=oe[1],ze=(0,r.useState)(),ye=s()(ze,2),te=ye[0],He=ye[1],un=(0,r.useState)([]),_e=s()(un,2),k=_e[0],Ee=_e[1],we=(0,r.useState)(!1),Ye=s()(we,2),Ve=Ye[0],re=Ye[1],q=(0,de.useModel)("spaceAgent"),F=q.agentComponentList,be=q.setAgentComponentList,Cn=(0,de.useModel)("conversationInfo"),xn=Cn.handleVariables,Ae=function(z){return F?.filter(function(xe){return xe.type===z})||[]},De=(0,r.useMemo)(function(){var ee=Ae(t.qR.MCP),z=new Map;return ee.forEach(function(xe){var Le=xe.targetId,_n=xe.icon,In=xe.groupName,Ln=xe.groupDescription,Zn=Le.toString();z.has(Zn)||z.set(Zn,{targetId:Le,icon:_n,groupName:In,groupDescription:Ln,children:[]});var mt=z.get(Zn);mt.children.push(xe)}),Array.from(z.values())},[F]),Pe=(0,r.useMemo)(function(){return F?.find(function(ee){return ee.type===t.qR.Variable})},[F]),je=function(z){return F?.some(function(xe){return xe.type===z})},Q=(0,r.useMemo)(function(){var ee=[];return je(t.qR.Plugin)&&ee.push(i.bX.Plugin),je(t.qR.Workflow)&&ee.push(i.bX.Workflow),je(t.qR.Trigger)&&ee.push(i.bX.Trigger),je(t.qR.MCP)&&ee.push(i.bX.MCP),ee},[F]),Me=(0,r.useMemo)(function(){return je(t.qR.Knowledge)?[i.bX.Text]:[]},[F]),cn=(0,r.useMemo)(function(){var ee=[];return je(t.qR.Variable)&&ee.push(i.bX.Variable),je(t.qR.Table)&&ee.push(i.bX.Table),ee},[F]),on=(0,ce.Z)(O.dO,{manual:!0,debounceWait:300}),pn=on.runAsync,vn=(0,ce.Z)(O.Nu,{manual:!0,debounceWait:300}),mn=vn.runAsync,xt=(0,ce.Z)(O.Wu,{manual:!0,debounceWait:300}),H=xt.runAsync,M=function(){var ee=w()(ge()().mark(function z(xe,Le,_n,In){var Ln,Zn,mt,zt;return ge()().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Ln=[].concat(Qe()(k),[{id:xe,targetId:Le,type:_n}]),Ee(Ln),Yt.next=4,mn(xe);case 4:Ie.ZP.success("\u5DF2\u6210\u529F\u5220\u9664"),Zn=F?.filter(function(Gn){var fa;return!(Gn.id===xe&&Gn.type===_n&&(((fa=Gn.bindConfig)===null||fa===void 0?void 0:fa.toolName)||"")===(In||""))})||[],be(Zn),mt=Ue?.filter(function(Gn){return!(Gn.targetId===Le&&Gn.type===_n&&(Gn.toolName||"")===(In||""))})||[],Ke(mt),zt=k.filter(function(Gn){return Gn.id!==xe&&Gn.targetId!==Le&&Gn.type!==_n}),Ee(zt);case 11:case"end":return Yt.stop()}},z)}));return function(xe,Le,_n,In){return ee.apply(this,arguments)}}(),R=function(){var ee=w()(ge()().mark(function z(){var xe,Le,_n;return ge()().wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:return Ln.next=2,pn(c);case 2:xe=Ln.sent,Le=xe.data,be(Le),_n=Le?.map(function(Zn){var mt,zt=Zn.type===t.qR.MCP?(mt=Zn.bindConfig)===null||mt===void 0?void 0:mt.toolName:"";return{type:Zn.type,targetId:Zn.targetId,status:t.BQ.Added,toolName:zt}})||[],Ke(_n);case 7:case"end":return Ln.stop()}},z)}));return function(){return ee.apply(this,arguments)}}(),I=(0,ce.Z)(O.AM,{manual:!0,debounceWait:300,onSuccess:function(){var ee=w()(ge()().mark(function xe(){return ge()().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:return Ie.ZP.success("\u5DF2\u6210\u529F\u6DFB\u52A0"),_n.next=3,R();case 3:case"end":return _n.stop()}},xe)}));function z(){return ee.apply(this,arguments)}return z}(),onError:function(z,xe){var Le=xe[0],_n=Le.targetId,In=Le.type;Ke(function(Ln){return Ln.filter(function(Zn){return Zn.type===In&&Zn.targetId!==_n})})}}),ve=I.run;(0,r.useEffect)(function(){R()},[c]);var Fe=function(z,xe){z.stopPropagation(),m(xe),re(!0)},en=function(z){z.stopPropagation(),y(!0)},Ce=function(){var ee=w()(ge()().mark(function z(){var xe,Le;return ge()().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:return y(!1),R(),In.next=4,H(c);case 4:xe=In.sent,Le=xe.data,xn(Le);case 7:case"end":return In.stop()}},z)}));return function(){return ee.apply(this,arguments)}}(),Je=function(z){var xe,Le=F?.find(function(Ln){return Ln.id===z}),_n=Le==null||(xe=Le.bindConfig)===null||xe===void 0?void 0:xe.inputArgBindConfigs,In=(0,Tt.T6)(_n||[]);Le&&Le.bindConfig&&(Le.bindConfig.inputArgBindConfigs=In),Le?.type===t.qR.Workflow&&(Le.bindConfig.argBindConfigs=null),He(Le),_(!0)},yn=[{key:i.bX.Plugin,label:"\u63D2\u4EF6",children:(0,e.jsx)(wt,{textClassName:rt(Hn.text),type:t.qR.Plugin,list:Ae(t.qR.Plugin),deleteList:k,onSet:Je,onDel:M}),extra:(0,e.jsx)(V.Z,{title:"\u6DFB\u52A0\u63D2\u4EF6",onClick:function(z){return Fe(z,t.qR.Plugin)}})},{key:i.bX.Workflow,label:"\u5DE5\u4F5C\u6D41",children:(0,e.jsx)(wt,{textClassName:rt(Hn.text),type:t.qR.Workflow,list:Ae(t.qR.Workflow),deleteList:k,onSet:Je,onDel:M}),extra:(0,e.jsx)(V.Z,{title:"\u6DFB\u52A0\u5DE5\u4F5C\u6D41",onClick:function(z){return Fe(z,t.qR.Workflow)}})},{key:i.bX.MCP,label:"MCP",children:De!=null&&De.length?De.map(function(ee){return(0,e.jsx)(yo,{item:ee,deleteList:k,onSet:Je,onDel:M},ee.targetId)}):(0,e.jsx)("p",{className:rt(Hn.text),children:"\u667A\u80FD\u4F53\u53EF\u4EE5\u901A\u8FC7\u6807\u51C6\u5316\u534F\u8BAE\uFF08MCP\uFF09\u8FDE\u63A5\u5404\u7C7B\u670D\u52A1API\u5E76\u53D1\u8D77\u8C03\u7528\u3002"}),extra:(0,e.jsx)(V.Z,{title:"\u6DFB\u52A0MCP",onClick:function(z){return Fe(z,t.qR.MCP)}})}],Mn=[{key:i.bX.Text,label:"\u6587\u672C",children:(0,e.jsx)(qa,{textClassName:rt(Hn.text),list:Ae(t.qR.Knowledge),deleteList:k,onDel:M}),extra:(0,e.jsx)(V.Z,{title:"\u6DFB\u52A0\u77E5\u8BC6\u5E93",onClick:function(z){return Fe(z,t.qR.Knowledge)}})}],_t=[{key:i.bX.Variable,label:"\u53D8\u91CF",children:(0,e.jsx)(Ge,{textClassName:rt(Hn.text),list:(Pe==null||(l=Pe.bindConfig)===null||l===void 0?void 0:l.variables)||[],onClick:en}),extra:(0,e.jsx)(V.Z,{title:"\u6DFB\u52A0\u53D8\u91CF",onClick:en})},{key:i.bX.Table,label:"\u6570\u636E\u8868",children:(0,e.jsx)(wt,{textClassName:rt(Hn.text),type:t.qR.Table,list:Ae(t.qR.Table),onSet:Je,onDel:M}),extra:(0,e.jsx)(V.Z,{title:"\u6DFB\u52A0\u6570\u636E\u8868",onClick:function(z){return Fe(z,t.qR.Table)}})},{key:i.bX.Long_Memory,label:"\u957F\u671F\u8BB0\u5FC6",children:(0,e.jsx)(no,{textClassName:rt(Hn.text),openLongMemory:u?.openLongMemory}),extra:(0,e.jsx)(Be.Z,{value:u?.openLongMemory===i.nb.Open,onClick:function(z,xe){xe.stopPropagation()},onChange:function(z){return D(z?i.nb.Open:i.nb.Close,"openLongMemory")}})}],ca=[{key:i.bX.Opening_Remarks,label:"\u5F00\u573A\u767D",children:(0,e.jsx)(Fo,{agentConfigInfo:u,onChangeAgent:D})},{key:i.bX.User_Problem_Suggestion,label:"\u7528\u6237\u95EE\u9898\u5EFA\u8BAE",children:(0,e.jsx)("p",{className:rt(Hn.text),children:"\u5728\u6BCF\u6B21\u667A\u80FD\u4F53\u56DE\u590D\u540E\uFF0C\u4E0D\u4F1A\u63D0\u4F9B\u4EFB\u4F55\u7528\u6237\u95EE\u9898\u5EFA\u8BAE"}),extra:(0,e.jsx)(Be.Z,{value:u?.openSuggest===i.nb.Open,onClick:function(z,xe){xe.stopPropagation()},onChange:function(z){return D(z?i.nb.Open:i.nb.Close,"openSuggest")}})},{key:i.bX.Open_Scheduled_Task,label:"\u5B9A\u65F6\u4EFB\u52A1",children:(0,e.jsx)("p",{className:rt(Hn.text),children:"\u5F00\u542F\u540E\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1\u7684\u65B9\u5F0F\u8BA9\u667A\u80FD\u4F53\u6267\u884C\u4EFB\u52A1"}),extra:(0,e.jsx)(Be.Z,{value:u?.openScheduledTask===i.nb.Open,onClick:function(z,xe){xe.stopPropagation()},onChange:function(z){return D(z?i.nb.Open:i.nb.Close,"openScheduledTask")}})}],va=function(z){Ke(function(xe){return[].concat(Qe()(xe),[{type:z.targetType,targetId:z.targetId,status:t.BQ.Loading,toolName:z.toolName||""}])}),ve({agentId:c,type:z.targetType,targetId:z.targetId,toolName:z.toolName||""})},ma=(0,r.useCallback)(function(ee){return ee===t.qR.MCP?me.a$.filter(function(z){return![i.wQ.Method_Call,i.wQ.Async_Run,i.wQ.Card_Bind].includes(z.type)}):me.a$},[]);return(0,e.jsxs)("div",{className:P()("overflow-y","flex-1",Hn.container),children:[(0,e.jsx)(an,{title:"\u6280\u80FD"}),(0,e.jsx)(Se.Z,{items:yn,defaultActiveKey:Q}),(0,e.jsx)(an,{title:"\u77E5\u8BC6"}),(0,e.jsx)(Se.Z,{items:Mn,defaultActiveKey:Me}),(0,e.jsx)(an,{title:"\u8BB0\u5FC6"}),(0,e.jsx)(Se.Z,{items:_t,defaultActiveKey:cn}),(0,e.jsx)(an,{title:"\u5BF9\u8BDD\u4F53\u9A8C"}),(0,e.jsx)(Se.Z,{items:ca,onChangeCollapse:A,defaultActiveKey:J}),(0,e.jsx)(ke.Z,{open:Ve,onCancel:function(){return re(!1)},checkTag:g,addComponents:Ue,onAdded:va,tabs:oo.Ne.filter(function(ee){return ee.key!==t.qR.Agent})}),(0,e.jsx)(Ka,{open:p,variablesInfo:Pe,onCancel:function(){return y(!1)},onConfirm:Ce}),(0,e.jsx)(jo,{open:h,variables:(Pe==null||(a=Pe.bindConfig)===null||a===void 0?void 0:a.variables)||[],currentComponentInfo:te,devConversationId:u?.devConversationId,settingActionList:ma(te?.type),onCancel:function(){return _(!1)}})]})},Io=No,Bo=n(22675),Na=n(77661),To=n(86230),Mo=n(12758),Ro=n(58176),bn={"xagi-nav-style2":"xagi-nav-style2___qKUvh",text:"text___PhyIY","page-container":"page-container___HL1GJ",header:"header___NlYJu","icon-backward":"icon-backward___b3IzE",avatar:"avatar___Erdew","header-info":"header-info___ij1jH","h-title":"h-title___fTG4i","edit-ico":"edit-ico___GDJ3n","agent-rel-info":"agent-rel-info____068A","space-name":"space-name___YpRDg","save-time-box":"save-time-box___aotv9","save-time":"save-time___dyOcH",volcano:"volcano___iFHwy","fold-box":"fold-box___Xvnhk","fold-btn":"fold-btn___iTXFj","header-title":"header-title___u7b9G","right-box":"right-box___eAszv","publish-btn":"publish-btn___GXQ6m",fold:"fold___V7K4E",ico:"ico___zKzSv"},Fn=P().bind(bn),Po=function(o){var l,a,c,u=o.agentConfigInfo,D=o.onToggleShowStand,v=o.onToggleVersionHistory,C=o.onEditAgent,h=o.onPublish,_=o.onOtherAction,N=(0,de.useParams)(),Z=N.spaceId,p=(0,r.useMemo)(function(){if(u){var g;return!(u!=null&&(g=u.permissions)!==null&&g!==void 0&&g.includes(E.jE.Publish))}else return!1},[u]),y=function(m){var U;return u==null||(U=u.permissions)===null||U===void 0?void 0:U.includes(m)},f=(0,r.useMemo)(function(){return me.$m.filter(function(g){var m=g.type;switch(m){case i.KZ.Temporary_Session:return y(E.jE.TempChat);case i.KZ.Export_Config:return y(E.jE.Export);default:return!0}}).map(function(g){return{key:g.type,label:(0,e.jsx)("div",{onClick:function(){_(g.type)},children:g.label})}})},[u]),K=[{key:"showStand",label:(0,e.jsx)("div",{onClick:D,children:"\u5C55\u793A\u53F0"})},{key:"versionHistory",label:(0,e.jsx)("div",{onClick:v,children:"\u7248\u672C\u5386\u53F2"})}].concat(Qe()(f));return(0,e.jsxs)("header",{className:Fn("flex","items-center","relative",bn.header),children:[(0,e.jsx)(Na.Z,{name:"icons-nav-backward",className:Fn(bn["icon-backward"]),onClick:function(){return(0,To.bC)("/space/".concat(Z,"/develop"))}}),(0,e.jsx)("img",{className:Fn(bn.avatar),src:u?.icon||Bo,alt:""}),(0,e.jsx)("div",{className:Fn("flex","flex-col",bn["header-info"]),children:(0,e.jsxs)("div",{className:Fn("flex","items-center"),children:[(0,e.jsx)("h3",{className:Fn(bn["h-title"],"text-ellipsis"),children:u?.name}),(0,e.jsxs)("div",{className:Fn("flex","items-center",bn["agent-rel-info"]),children:[(0,e.jsx)(et.Z,{condition:u==null||(l=u.space)===null||l===void 0?void 0:l.icon,children:(0,e.jsx)("img",{src:u==null||(a=u.space)===null||a===void 0?void 0:a.icon,alt:""})}),(0,e.jsx)("span",{className:Fn(bn["space-name"],"text-ellipsis"),children:u==null||(c=u.space)===null||c===void 0?void 0:c.name})]}),(0,e.jsx)(ut.Z,{className:Fn(bn["edit-ico"]),onClick:C})]})}),(0,e.jsxs)("div",{className:Fn(bn["right-box"],"flex","items-center"),children:[(0,e.jsxs)("div",{className:Fn("flex","items-center",bn["save-time-box"]),children:[(0,e.jsxs)("span",{className:Fn(bn["save-time"]),children:["\u8349\u7A3F\u81EA\u52A8\u4FDD\u5B58\u4E8E\xA0",S()(u?.modified).format("HH:mm")]}),u?.publishDate!==null&&S()(u?.publishDate).isBefore(u?.modified)&&(0,e.jsx)(Mo.Z,{bordered:!1,color:"volcano",className:Fn(bn.volcano),children:"\u6709\u66F4\u65B0\u672A\u53D1\u5E03"})]}),(0,e.jsx)("div",{className:Fn(bn["fold-box"]),children:(0,e.jsx)(Ro.Z,{menu:{items:K},placement:"bottomLeft",children:(0,e.jsx)("span",{className:Fn("flex","items-center","cursor-pointer",bn["fold-btn"]),children:(0,e.jsx)(Na.Z,{name:"icons-common-more"})})})}),(0,e.jsx)(rn.ZP,{type:"primary",className:Fn(bn["publish-btn"]),onClick:h,disabled:p,children:"\u53D1\u5E03"})]})]})},Lo=Po,Ia=n(7098),Zo=n(99730),la=n(49528),Oo=n(80110),Uo=n(88958),wo=n(73981),Kn={"xagi-nav-style2":"xagi-nav-style2___drQy_",text:"text___e2QrX","page-container":"page-container___lY4DG","modal-wrapper":"modal-wrapper___zxeVv",select:"select___s38yZ",title:"title___bLrDJ","generate-name":"generate-name___dwPDv"},Nn=P().bind(Kn),Vo=function(o){var l=o.spaceId,a=o.modelComponentConfig,c=o.devConversationId,u=o.open,D=o.onCancel,v=(0,r.useState)(0),C=s()(v,2),h=C[0],_=C[1],N=(0,r.useState)([]),Z=s()(N,2),p=Z[0],y=Z[1],f=(0,r.useRef)([]),K=(0,r.useState)({contextRounds:0,maxTokens:0,mode:la.jD.Precision,temperature:0,topP:0,reasoningModelId:null}),g=s()(K,2),m=g[0],U=g[1],B=(0,r.useRef)(0),J=(0,de.useModel)("conversationInfo"),A=J.runQueryConversation,Oe=(0,de.useRequest)(Zo.Bj,{manual:!0,debounceInterval:300,onSuccess:function(k){f.current=k;var Ee=k?.map(function(we){return{label:we.name,value:we.id}})||[];y(Ee)}}),oe=Oe.run;(0,r.useEffect)(function(){u&&a&&(B.current=a.id,U(a.bindConfig),_(a.targetId))},[u,a]),(0,r.useEffect)(function(){oe({spaceId:l,modelType:Oo.Mj.Chat})},[l]);var Ue=(0,r.useMemo)(function(){var _e;return((_e=f.current)===null||_e===void 0||(_e=_e.filter(function(k){return k.isReasonModel===1&&k.id!==h}))===null||_e===void 0?void 0:_e.map(function(k){return{label:k.name,value:k.id}}))||[]},[f.current,h]),Ke=(0,r.useMemo)(function(){var _e;return(_e=f.current)===null||_e===void 0?void 0:_e.find(function(k){return k.id===h})},[f.current,h]),ze=function(){var _e=w()(ge()().mark(function k(Ee){var we,Ye=arguments;return ge()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return we=Ye.length>1&&Ye[1]!==void 0?Ye[1]:h,re.next=3,(0,O.VV)({id:B.current,targetId:we,bindConfig:Ee});case 3:case"end":return re.stop()}},k)}));return function(Ee){return _e.apply(this,arguments)}}(),ye=function(k){var Ee,we=Number(k);_(we);var Ye=(Ee=f.current)===null||Ee===void 0?void 0:Ee.find(function(re){return re.id===we}),Ve=d()({},m);Ye&&Ye.maxTokens<Ve.maxTokens&&(Ve=d()(d()({},Ve),{},{maxTokens:Ye.maxTokens})),we===m.reasoningModelId&&(Ve=d()(d()({},Ve),{},{reasoningModelId:null})),U(Ve),ze(Ve,we)},te=function(k){var Ee=d()(d()(d()({},m),k!==la.jD.Customization?An.p_[k]:{}),{},{mode:k});U(Ee),ze(Ee)},He=function(){var _e=w()(ge()().mark(function k(Ee,we){var Ye,Ve;return ge()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return we==="reasoningModelId"?Ye=Number(Ee)||null:Ye=Number(Ee)||0,Ve=d()(d()({},m),{},j()(j()({},we,Ye),"mode",la.jD.Customization)),U(Ve),q.next=5,ze(Ve);case 5:we==="reasoningModelId"&&c&&A(c);case 6:case"end":return q.stop()}},k)}));return function(Ee,we){return _e.apply(this,arguments)}}(),un=function(){var k=p?.find(function(we){return we.value===h}),Ee=String(k?.label)||"";D(h,Ee,m)};return(0,e.jsxs)(lt.Z,{title:"\u6A21\u578B\u8BBE\u7F6E",classNames:{content:Nn(Kn["modal-wrapper"])},open:u,footer:null,onCancel:un,children:[(0,e.jsxs)(Uo.Z,{gap:20,children:[(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h3",{className:Nn(Kn.title),children:"\u4F1A\u8BDD\u6A21\u578B"}),(0,e.jsx)(Ia.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F1A\u8BDD\u6A21\u578B",className:Nn(Kn.select),onChange:ye,options:p,value:h})]}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h3",{className:Nn(Kn.title),children:"\u63A8\u7406\u6A21\u578B(\u53EF\u9009)"}),(0,e.jsx)(Ia.Z,{placeholder:"\u8BF7\u9009\u62E9\u63A8\u7406\u6A21\u578B",className:Nn(Kn.select),onChange:function(k){return He(k,"reasoningModelId")},options:Ue,value:m.reasoningModelId,allowClear:!0})]})]}),(0,e.jsxs)("h3",{className:Nn(Kn.title,"flex","items-center"),children:["\u751F\u6210\u591A\u6837\u6027",(0,e.jsx)(V.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h4",{className:Nn(Kn["generate-name"]),children:"\u7CBE\u786E\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u4E25\u683C\u9075\u5FAA\u6307\u4EE4\u751F\u6210\u5185\u5BB9"}),(0,e.jsx)("p",{children:"\u9002\u7528\u4E8E\u9700\u51C6\u786E\u65E0\u8BEF\u7684\u573A\u5408\uFF0C\u5982\u6B63\u5F0F\u6587\u6863\u3001\u4EE3\u7801\u7B49"}),(0,e.jsx)("h4",{className:Nn(Kn["generate-name"]),children:"\u5E73\u8861\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u5728\u521B\u65B0\u548C\u7CBE\u786E\u4E4B\u95F4\u5BFB\u6C42\u5E73\u8861"}),(0,e.jsx)("p",{children:"\u9002\u7528\u4E8E\u5927\u591A\u6570\u65E5\u5E38\u5E94\u7528\u573A\u666F\uFF0C\u751F\u6210\u6709\u8DA3\u4F46\u4E0D\u5931\u4E25\u8C28\u7684\u5185\u5BB9"}),(0,e.jsx)("h4",{className:Nn(Kn["generate-name"]),children:"\u521B\u610F\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u6FC0\u53D1\u521B\u610F\uFF0C\u63D0\u4F9B\u65B0\u9896\u72EC\u7279\u7684\u60F3\u6CD5"}),(0,e.jsx)("p",{children:"\u9002\u5408\u9700\u8981\u7075\u611F\u548C\u72EC\u7279\u89C2\u70B9\u7684\u573A\u666F\uFF0C\u5982\u5934\u8111\u98CE\u66B4\u3001\u521B\u610F\u5199\u4F5C\u7B49"}),(0,e.jsx)("h4",{className:Nn(Kn["generate-name"]),children:"\u81EA\u5B9A\u4E49\u6A21\u5F0F:"}),(0,e.jsx)("p",{children:"\u901A\u8FC7\u9AD8\u7EA7\u8BBE\u7F6E\uFF0C\u81EA\u5B9A\u4E49\u751F\u6210\u65B9\u5F0F"}),(0,e.jsx)("p",{children:"\u6839\u636E\u9700\u6C42\uFF0C\u8FDB\u884C\u7CBE\u7EC6\u8C03\u6574\uFF0C\u5B9E\u73B0\u4E2A\u6027\u5316\u4F18\u5316"})]}),icon:(0,e.jsx)(ba.Z,{}),type:E.Ai.White})]}),(0,e.jsx)(wo.Z,{options:An.Ew,rootClassName:Nn("mb-16"),value:m?.mode,onChange:te,block:!0}),(0,e.jsxs)("div",{className:Nn("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u751F\u6210\u968F\u673A\u6027",title:"temperature: \u8C03\u9AD8\u6E29\u5EA6\u4F1A\u4F7F\u5F97\u6A21\u578B\u7684\u8F93\u51FA\u66F4\u591A\u6837\u6027\u548C\u521B\u65B0\u6027\uFF0C\u53CD\u4E4B\uFF0C\u964D\u4F4E\u6E29\u5EA6\u4F1A\u4F7F\u8F93\u51FA\u5185\u5BB9\u66F4\u52A0\u9075\u5FAA\u6307\u4EE4\u8981\u6C42\u4F46\u51CF\u5C11\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E \u201CTop p\u201D \u540C\u65F6\u8C03\u6574"}),(0,e.jsx)(At,{min:0,max:1,step:.1,value:String(m?.temperature)||"0",onChange:function(k){return He(k,"temperature")}})]}),(0,e.jsxs)("div",{className:Nn("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"Top p",title:"Top p \u4E3A\u7D2F\u8BA1\u6982\u7387: \u6A21\u578B\u5728\u751F\u6210\u8F93\u51FA\u65F6\u4F1A\u4ECE\u6982\u7387\u6700\u9AD8\u7684\u8BCD\u6C47\u5F00\u59CB\u9009\u62E9\uFF0C\u76F4\u5230\u8FD9\u4E9B\u8BCD\u6C47\u7684\u603B\u6982\u7387\u7D2F\u79EF\u8FBE\u5230 Top p \u503C\u3002\u8FD9\u6837\u53EF\u4EE5\u9650\u5236\u6A21\u578B\u53EA\u9009\u62E9\u8FD9\u4E9B\u9AD8\u6982\u7387\u7684\u8BCD\u6C47\uFF0C\u4ECE\u800C\u63A7\u5236\u8F93\u51FA\u5185\u5BB9\u7684\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E \u201C\u751F\u6210\u968F\u673A\u6027\u201D \u540C\u65F6\u8C03\u6574\u3002"}),(0,e.jsx)(At,{min:0,max:1,step:.1,value:String(m?.topP)||"0",onChange:function(k){return He(k,"topP")}})]}),(0,e.jsx)("h3",{className:Nn(Kn.title),children:"\u8F93\u5165\u53CA\u8F93\u51FA\u8BBE\u7F6E"}),(0,e.jsxs)("div",{className:Nn("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u643A\u5E26\u4E0A\u4E0B\u6587\u8F6E\u6570",title:"\u8BBE\u7F6E\u5E26\u5165\u6A21\u578B\u4E0A\u4E0B\u6587\u7684\u5BF9\u8BDD\u5386\u53F2\u8F6E\u6570\u3002\u8F6E\u6570\u8D8A\u591A\uFF0C\u591A\u8F6E\u5BF9\u8BDD\u7684\u76F8\u5173\u6027\u8D8A\u9AD8\uFF0C\u4F46\u6D88\u8017\u7684 Token \u4E5F\u8D8A\u591A"}),(0,e.jsx)(At,{min:0,max:100,step:1,value:String(m?.contextRounds)||"0",onChange:function(k){return He(k,"contextRounds")}})]}),(0,e.jsxs)("div",{className:Nn("flex","mb-16"),children:[(0,e.jsx)(tt.Z,{label:"\u6700\u5927\u56DE\u590D\u957F\u5EA6",title:"\u63A7\u5236\u6A21\u578B\u8F93\u51FA\u7684 Tokens \u957F\u5EA6\u4E0A\u9650\u3002\u901A\u5E38 100 Tokens \u7EA6\u7B49\u4E8E 150 \u4E2A\u4E2D\u6587\u6C49\u5B57\u3002"}),(0,e.jsx)(At,{min:1,max:Ke?.maxTokens||4096,step:1,value:String(m?.maxTokens)||"0",onChange:function(k){return He(k,"maxTokens")}})]})]})},Ko=Vo,sa=n(63741),ia={"xagi-nav-style2":"xagi-nav-style2___igdHc",text:"text___FYHpi","page-container":"page-container___xKmft","edit-header":"edit-header___LXHm6","drop-box":"drop-box___RbaYp"},Ba=P().bind(ia),ko=function(o){var l=o.icon,a=o.modelName,c=o.onClick;return(0,e.jsxs)("div",{className:Ba("flex","content-between","items-center",ia["edit-header"]),children:[(0,e.jsx)("h3",{children:"\u7F16\u6392"}),(0,e.jsxs)("div",{className:Ba("flex","items-center","cursor-pointer",ia["drop-box"]),onClick:c,children:[(0,e.jsx)(et.Z,{condition:!!l,children:(0,e.jsx)("img",{src:l,alt:""})}),(0,e.jsx)("span",{children:a}),(0,e.jsx)(sa.le,{name:"icons-common-caret_down",style:{fontSize:16}})]})]})},Wo=ko,Ho=n(77992),Qo=n(26292),Go=n(89083),zo=n(64771),Yo=n(58226),gn={"xagi-nav-style2":"xagi-nav-style2___doNDO",text:"text___ZGIMU","page-container":"page-container___CxNyw",header:"header___Zhp3M","time-box":"time-box___MlxEC",num:"num___pCG3M","vertical-line":"vertical-line___zScjb",box:"box___DfwY3",value:"value___G3F6B",wrap:"wrap___SC3yY",title:"title___Lh0ck","execute-box":"execute-box___GwF5n","component-img":"component-img___a4HVL",name:"name___mFM56",active:"active___vF1vf","render-container":"render-container___EHMbK"},Xo=n(50644),Ct={container:"container___TOg3u",box:"box___NOAzh","mt-10":"mt-10___DaRdj",label:"label___kH9Er",value:"value___PNdD7"},Wt=P().bind(Ct),Jo=function(o){var l=o.node,a=function(v,C,h){return(0,e.jsxs)("div",{className:Wt("flex",Ct.box,h),children:[(0,e.jsxs)("span",{className:Wt(Ct.label),children:[v,"\uFF1A"]}),(0,e.jsx)(Xo.H,{text:C||"--",className:Wt(Ct.value,"flex-1")})]})},c=l?"".concat(l?.endTime-l?.startTime,"ms"):"--",u=(0,r.useMemo)(function(){switch(l?.type){case t.qR.Plugin:return"\u63D2\u4EF6";case t.qR.Workflow:return"\u5DE5\u4F5C\u6D41";case t.qR.Knowledge:return"\u77E5\u8BC6\u5E93";case t.qR.Variable:return"\u53D8\u91CF";case t.qR.Table:return"\u6570\u636E\u8868";case t.qR.Model:return"\u6A21\u578B";case t.qR.MCP:return"MCP";default:return"--"}},[l?.type]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:Wt(Ct.container),children:[a("\u7C7B\u578B",u),a("\u72B6\u6001","\u6210\u529F"),a("\u540D\u79F0",l?.name),a("\u8017\u65F6",c)]}),a("\u53D1\u8D77\u65F6\u95F4",l!=null&&l.startTime?S()(l?.startTime).format("YYYY-MM-DD HH:mm"):"",Ct["mt-10"]),a("\u7ED3\u675F\u65F6\u95F4",l!=null&&l.endTime?S()(l?.endTime).format("YYYY-MM-DD HH:mm"):"",Ct["mt-10"])]})},Dn=P().bind(gn),$o=function(o){var l,a=o.visible,c=o.onClose,u=(0,de.useModel)("conversationInfo"),D=u.requestId,v=u.finalResult,C=u.setFinalResult,h=(0,r.useState)(),_=s()(h,2),N=_[0],Z=_[1],p=(0,r.useState)(0),y=s()(p,2),f=y[0],K=y[1],g=(0,r.useState)(""),m=s()(g,2),U=m[0],B=m[1],J=(0,r.useState)(""),A=s()(J,2),Oe=A[0],oe=A[1],Ue=function(te){return typeof te=="string"?te:JSON.stringify(te,null,2)};(0,r.useEffect)(function(){var ye=v?.componentExecuteResults||[];if(ye?.length>0){var te=ye[f];if(Z(te),te){var He=Ue(te.input);B(He);var un=Ue(te.data);oe(un)}}else Z(null),B(""),oe("")},[v,f]),(0,r.useEffect)(function(){K(0)},[v]),(0,r.useEffect)(function(){return function(){C(null)}},[]);var Ke=function(){Ie.ZP.success("\u590D\u5236\u6210\u529F")},ze=function(te){switch(te.type){case t.qR.Plugin:return jn;case t.qR.Workflow:return wn;case t.qR.Knowledge:return ha;case t.qR.Variable:return Qo;case t.qR.Table:return Da;case t.qR.Model:return Ho;case t.qR.MCP:return ya;default:return jn}};return(0,e.jsx)(Go.Z,{title:"\u8C03\u8BD5\u8BE6\u60C5",onClose:c,visible:a,children:v?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("header",{className:Dn(gn.header),children:[(0,e.jsx)("div",{className:Dn("flex",gn["time-box"]),children:(0,e.jsxs)("div",{className:Dn(gn.num,"flex","items-center"),children:[(0,e.jsxs)("span",{children:["\u8017\u65F6",v.endTime-v.startTime," ms"]}),(0,e.jsx)("span",{className:Dn(gn["vertical-line"])}),(0,e.jsxs)("span",{children:[v.totalTokens," Tokens"]})]})}),(0,e.jsxs)("div",{className:Dn("flex",gn.box),children:[(0,e.jsx)("span",{children:"requestId:"}),(0,e.jsx)("span",{className:Dn(gn.value,"text-ellipsis"),children:D}),(0,e.jsx)(Yo.CopyToClipboard,{text:D||"",onCopy:Ke,children:(0,e.jsx)(zo.Z,{})})]})]}),(0,e.jsxs)("div",{className:Dn(gn.wrap),children:[(0,e.jsx)("h5",{className:Dn(gn.title),children:"\u8C03\u7528\u7EC4\u4EF6"}),v==null||(l=v.componentExecuteResults)===null||l===void 0?void 0:l.map(function(ye,te){return(0,e.jsxs)("div",{className:Dn(gn["execute-box"],"flex","items-center"),children:[(0,e.jsx)("img",{className:Dn(gn["component-img"]),src:ye?.icon||ze(ye),onError:function(un){un.currentTarget.onerror=null,un.currentTarget.src=ze(ye)},alt:""}),(0,e.jsx)("span",{className:Dn(gn.name,"cursor-pointer",j()({},gn.active,f===te)),onClick:function(){return K(te)},children:ye.name})]},ye?.id||te)})]}),(0,e.jsxs)("div",{className:Dn(gn.wrap),children:[(0,e.jsx)("h5",{className:Dn(gn.title),children:"\u8282\u70B9\u8BE6\u60C5"}),(0,e.jsx)(Jo,{node:N})]}),(0,e.jsxs)("div",{className:Dn(gn.wrap,gn["render-container"]),children:[(0,e.jsx)("h5",{className:Dn(gn.title),children:"\u8F93\u5165"}),(0,e.jsx)("pre",{children:U})]}),(0,e.jsxs)("div",{className:Dn(gn.wrap,gn["render-container"]),children:[(0,e.jsx)("h5",{className:Dn(gn.title),children:"\u8F93\u51FA"}),(0,e.jsx)("pre",{children:Oe})]})]}):(0,e.jsx)("div",{className:Dn("flex","h-full","items-center","content-center"),children:(0,e.jsx)(aa.Z,{description:"\u6682\u65E0\u6570\u636E"})})})},qo=(0,r.memo)($o),Pt={"xagi-nav-style2":"xagi-nav-style2___ENYpU",text:"text___ARP6g","page-container":"page-container___G6HH4",container:"container___NqsMD","edit-content":"edit-content___FOZJf",section:"section___tvgXt","edit-info":"edit-info___B_f4_","h-line":"h-line___sXIzi"},er=n(65857),nr=n(49974),tr=n(34077),ar=n(2349),Ta=n(84283),Ma=n(71530),or=n(75468),rr=n(88458),Ra=n(35855),ur=n(32699),Lt={"xagi-nav-style2":"xagi-nav-style2___viIps",text:"text___USG72","page-container":"page-container___sAe9w",container:"container___Kt1nG",loading:"loading___tGVwz","main-content":"main-content___YdPCn","chat-wrapper":"chat-wrapper___IAYX5"},Ht={"xagi-nav-style2":"xagi-nav-style2___OXozL",text:"text___AjEUO","page-container":"page-container___Rd4a6",container:"container___bIrt_","extra-box":"extra-box___CdP4P",debug:"debug___pjPlo"},da=P().bind(Ht),lr=function(o){var l=o.onPressDebug;return(0,e.jsxs)("header",{className:da("flex","content-between","items-center",Ht.container),children:[(0,e.jsx)("h3",{children:"\u9884\u89C8\u4E0E\u8C03\u8BD5"}),(0,e.jsx)("div",{className:da(Ht["extra-box"],"flex"),children:(0,e.jsx)(rn.ZP,{type:"text",className:da(Ht.debug),icon:(0,e.jsx)(sa.le,{name:"icons-common-debug",style:{fontSize:16}}),onClick:l,children:"\u8C03\u8BD5"})})]})},sr=lr,Zt=P().bind(Lt),ir=function(o){var l=o.agentId,a=o.agentConfigInfo,c=o.onPressDebug,u=sn.Z.useForm(),D=s()(u,1),v=D[0],C=(0,r.useRef)(0),h=(0,r.useState)(null),_=s()(h,2),N=_[0],Z=_[1],p=(0,de.useModel)("conversationInfo"),y=p.messageList,f=p.setMessageList,K=p.chatSuggestList,g=p.loadingConversation,m=p.runQueryConversation,U=p.isLoadingConversation,B=p.setIsLoadingConversation,J=p.loadingSuggest,A=p.onMessageSend,Oe=p.messageViewRef,oe=p.messageViewScrollToBottom,Ue=p.allowAutoScrollRef,Ke=p.scrollTimeoutRef,ze=p.handleClearSideEffect,ye=p.showScrollBtn,te=p.setShowScrollBtn,He=p.resetInit,un=p.manualComponents,_e=p.variables,k=p.userFillVariables,Ee=p.requiredNameList,we=(0,or.Z)(),Ye=we.runAsyncConversationCreate,Ve=(0,rr.Z)(),re=Ve.selectedComponentList,q=Ve.handleSelectComponent,F=Ve.initSelectedComponentList,be=sn.Z.useWatch([],{form:v,preserve:!0});(0,r.useEffect)(function(){be&&Object.keys(be).length===0||v.validateFields({validateOnly:!0}).then(function(){return Z(be)}).catch(function(){return Z(null)})},[v,be]),(0,r.useEffect)(function(){k&&Z(k)},[k]);var Cn=(0,r.useMemo)(function(){if(Ee?.length>0){if(!N)return!0;var Q=(0,$.VL)(Ee,Object.keys(N));return!Q}return!1},[Ee,N]),xn=(0,r.useMemo)(function(){return{assistant:{name:a?.name,avatar:a?.icon},system:{name:a?.name,avatar:a?.icon}}},[a]);(0,r.useEffect)(function(){var Q=Oe.current;if(Q){var Me=function(){var pn=Q.scrollTop,vn=Q.scrollHeight,mn=Q.clientHeight;pn+mn<vn?(Ue.current=!1,Ke.current&&(clearTimeout(Ke.current),Ke.current=null),te(!0)):(Ue.current=!0,te(!1))},cn=(0,ur.throttle)(Me,300);return Q.addEventListener("wheel",cn),function(){Q.removeEventListener("wheel",cn),He()}}},[]),(0,r.useEffect)(function(){F(un)},[un]),(0,r.useEffect)(function(){if(a){var Q=a.devConversationId;C.current=Q,B(!1),m(Q)}},[a?.devConversationId]);var Ae=function(Me){var cn=Me.conversationId,on=Me.message;C.current===Number(cn)&&(f(function(pn){return[].concat(Qe()(pn),[on])}),Ue.current&&oe())};(0,r.useEffect)(function(){return Ra.Z.on(Ma.Z.RefreshChatMessage,Ae),function(){Ra.Z.off(Ma.Z.RefreshChatMessage,Ae)}},[]);var De=(0,r.useCallback)(w()(ge()().mark(function Q(){var Me,cn,on,pn;return ge()().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return ze(),f([]),B(!1),mn.next=5,Ye({agentId:l,devMode:!0});case 5:Me=mn.sent,cn=Me.success,on=Me.data,cn&&(pn=on?.id,C.current=pn,m(pn));case 9:case"end":return mn.stop()}},Q)})),[l]),Pe=function(Me,cn){var on=C.current;if(on){if(Cn){v.validateFields(),Ie.ZP.warning("\u8BF7\u586B\u5199\u5FC5\u586B\u53C2\u6570");return}A(on,Me,cn,re,N,!0,!1)}},je=function(){Ue.current=!0,oe(),te(!1)};return(0,e.jsxs)("div",{className:Zt(Lt.container,"h-full","flex","flex-col"),children:[(0,e.jsx)(sr,{onPressDebug:c}),(0,e.jsxs)("div",{className:Zt(Lt["main-content"],"flex-1","flex","flex-col","overflow-hide"),children:[(0,e.jsx)(ar.Z,{form:v,variables:_e,isFilled:!0,userFillVariables:k}),(0,e.jsx)("div",{className:Zt(Lt["chat-wrapper"],"scroll-container","flex-1"),ref:Oe,children:g?(0,e.jsx)("div",{className:Zt("flex","items-center","content-center","h-full"),children:(0,e.jsx)(qt.Z,{className:Zt(Lt.loading)})}):y?.length>0?(0,e.jsxs)(e.Fragment,{children:[y?.map(function(Q){return(0,e.jsx)(tr.Z,{messageInfo:Q,roleInfo:xn,mode:"chat"},Q?.id)}),(0,e.jsx)(Ta.Z,{loading:J,chatSuggestList:K,onClick:Pe})]}):U&&(0,e.jsx)(er.Z,{className:"h-full",icon:a?.icon,name:a?.name,extra:(0,e.jsx)(Ta.Z,{className:"mt-16",loading:J,chatSuggestList:K,onClick:Pe})})}),(0,e.jsx)(nr.Z,{clearDisabled:!(y!=null&&y.length),onEnter:Pe,onClear:De,wholeDisabled:Cn,visible:ye,manualComponents:un,selectedComponentList:re,onSelectComponent:q,onScrollBottom:je},"edit-agent-".concat(l))]})]})},dr=ir,cr=n(84720),bt={"xagi-nav-style2":"xagi-nav-style2___B3J39",text:"text___uQ7fZ","page-container":"page-container___nYwgb",container:"container___jDARb","system-tips-wrapper":"system-tips-wrapper____JACe","system-tips":"system-tips___GQnw1","optimize-btn":"optimize-btn___SX6yI","text-area":"text-area___eJKj6"},Qt=P().bind(bt),vr=Tn.Z.TextArea,mr=function(o){var l=o.value,a=o.agentConfigInfo,c=o.onChange,u=o.onReplace,D=(0,r.useState)(!1),v=s()(D,2),C=v[0],h=v[1],_=(0,r.useRef)(null),N=function(p){h(!1),u(p)};return(0,e.jsxs)("div",{className:Qt("flex","flex-col","flex-1",bt.container),children:[(0,e.jsxs)("div",{className:Qt("flex","items-center","content-between",bt["system-tips-wrapper"]),children:[(0,e.jsx)("span",{className:Qt(bt["system-tips"]),children:"\u7CFB\u7EDF\u63D0\u793A\u8BCD"}),(0,e.jsx)(ua.Z,{title:"\u81EA\u52A8\u4F18\u5316\u63D0\u793A\u8BCD",placement:"top",children:(0,e.jsx)(rn.ZP,{color:"primary",variant:"filled",size:"small",className:Qt(bt["optimize-btn"]),icon:(0,e.jsx)(sa.le,{name:"icons-common-stars",style:{fontSize:16}}),onClick:function(){return h(!0)},children:"\u4F18\u5316"})})]}),(0,e.jsx)(vr,{classNames:{textarea:"flex-1"},ref:_,rootClassName:bt["text-area"],placeholder:"\u8F93\u5165\u7CFB\u7EDF\u63D0\u793A\u8BCD\uFF0C\u5BF9\u5927\u6A21\u578B\u8FDB\u884C\u89D2\u8272\u5851\u9020",variant:"borderless",value:l,onChange:function(p){return c(p.target.value)}}),(0,e.jsx)(cr.Z,{open:C,onCancel:function(){return h(!1)},onReplace:N,targetId:a?.id,defaultValue:l||"".concat(a?.name||"")+"".concat(a?.description||"")})]})},fr=mr,Gt=P().bind(Pt),gr=function(){var o,l,a=(0,de.useParams)(),c=Number(a.spaceId),u=Number(a.agentId),D=(0,r.useState)(!1),v=s()(D,2),C=v[0],h=v[1],_=(0,r.useState)(!1),N=s()(_,2),Z=N[0],p=N[1],y=(0,r.useState)(!1),f=s()(y,2),K=f[0],g=f[1],m=(0,L.Z)(),U=m.navigationStyle,B=(0,r.useState)(),J=s()(B,2),A=J[0],Oe=J[1],oe=(0,de.useModel)("conversationInfo"),Ue=oe.cardList,Ke=oe.showType,ze=oe.setShowType,ye=oe.setIsSuggest,te=oe.messageList,He=oe.setChatSuggestList,un=(0,de.useModel)("tenantConfigInfo"),_e=un.setTitle,k=(0,de.useRequest)(O.T_,{manual:!0,debounceInterval:300,onSuccess:function(M){Oe(M)}}),Ee=k.run,we=(0,de.useRequest)(O.mp,{manual:!0,debounceInterval:1e3}),Ye=we.run;(0,r.useEffect)(function(){Ee(u),_e()},[u]),(0,r.useEffect)(function(){(0,$.t7)()},[]);var Ve=function(M){var R=d()(d()({},A),M);Oe(R),p(!1)},re=function(M,R,I){g(!1);var ve=ln()(A);ve.modelComponentConfig.bindConfig=I,ve.modelComponentConfig.targetId=M,ve.modelComponentConfig.name=R,Oe(ve)},q=function(M,R){var I=d()(d()({},A),{},j()({},R,M));if(I.publishStatus===E.xH.Published&&(I.modified=S()().toString()),Oe(I),R==="openSuggest"&&ye(M===i.nb.Open),R==="openingGuidQuestions"&&!(te!=null&&te.length)){var ve=M,Fe=ve?.filter(function(Le){return!!Le})||[];He(Fe)}var en=I.id,Ce=I.name,Je=I.description,yn=I.icon,Mn=I.userPrompt,_t=I.openSuggest,ca=I.systemPrompt,va=I.suggestPrompt,ma=I.openingChatMsg,ee=I.openScheduledTask,z=I.openingGuidQuestions,xe=I.openLongMemory;Ye({id:en,name:Ce,description:Je,icon:yn,systemPrompt:ca,userPrompt:Mn,openSuggest:_t,suggestPrompt:va,openingChatMsg:ma,openScheduledTask:ee,openingGuidQuestions:z,openLongMemory:xe})},F=function(){Ke===i.wv.Debug_Details?ze(i.wv.Hide):ze(i.wv.Debug_Details)},be=function(){h(!1);var M=S()().toString(),R=d()(d()({},A),{},{publishDate:M,modified:M,publishStatus:E.xH.Published});Oe(R)},Cn=(0,r.useState)([]),xn=s()(Cn,2),Ae=xn[0],De=xn[1],Pe=(0,r.useState)(!1),je=s()(Pe,2),Q=je[0],Me=je[1],cn=(0,r.useState)(!1),on=s()(cn,2),pn=on[0],vn=on[1],mn=function(M){var R=M?.agentStatistics||{},I=R.userCount,ve=I===void 0?0:I,Fe=R.convCount,en=Fe===void 0?0:Fe,Ce=R.collectCount,Je=Ce===void 0?0:Ce,yn=R.likeCount,Mn=yn===void 0?0:yn,_t=[{label:"\u5BF9\u8BDD\u4EBA\u6570",value:ve},{label:"\u5BF9\u8BDD\u6B21\u6570",value:en},{label:"\u6536\u85CF\u7528\u6237\u6570",value:Je},{label:"\u70B9\u8D5E\u6B21\u6570",value:Mn}];De(_t)},xt=function(M){switch(M){case i.KZ.Analyze:mn(A),Me(!0);break;case i.KZ.Temporary_Session:vn(!0);break;case i.KZ.Export_Config:(0,ie.oB)("\u5BFC\u51FA\u914D\u7F6E - ".concat(A?.name),"\u5982\u679C\u5185\u90E8\u5305\u542B\u6570\u636E\u8868\u6216\u77E5\u8BC6\u5E93\uFF0C\u6570\u636E\u672C\u8EAB\u4E0D\u4F1A\u5BFC\u51FA",function(){return(0,fe._)(A?.id,t.qR.Agent),new Promise(function(R){setTimeout(R,1e3)})});break;case i.KZ.Log:de.history.push("/space/".concat(c,"/").concat(A?.id,"/log"));break}};return(0,e.jsxs)("div",{className:Gt(Pt.container,"h-full","flex","flex-col"),children:[(0,e.jsx)(Lo,{agentConfigInfo:A,onToggleShowStand:function(){return ze(i.wv.Show_Stand)},onToggleVersionHistory:function(){return ze(i.wv.Version_History)},onEditAgent:function(){return p(!0)},onPublish:function(){return h(!0)},onOtherAction:xt}),(0,e.jsxs)("section",{className:Gt("flex","flex-1",Pt.section,"xagi-nav-".concat(U)),children:[(0,e.jsxs)("div",{className:Gt("radius-6","flex","flex-col",Pt["edit-info"]),children:[(0,e.jsx)(Wo,{icon:A==null||(o=A.modelComponentConfig)===null||o===void 0?void 0:o.icon,modelName:A==null||(l=A.modelComponentConfig)===null||l===void 0?void 0:l.name,onClick:function(){return g(!0)}}),(0,e.jsxs)("div",{className:Gt("flex-1","flex","overflow-y",Pt["edit-content"]),children:[(0,e.jsx)(fr,{agentConfigInfo:A,value:A?.systemPrompt,onChange:function(M){return q(M,"systemPrompt")},onReplace:function(M){return q(M,"systemPrompt")}}),(0,e.jsx)(Io,{agentId:u,agentConfigInfo:A,onChangeAgent:q})]})]}),(0,e.jsx)(dr,{agentConfigInfo:A,agentId:u,onPressDebug:F}),(0,e.jsx)(qo,{visible:Ke===i.wv.Debug_Details,onClose:function(){return ze(i.wv.Hide)}}),(0,e.jsx)(x.Z,{cardList:Ue,visible:Ke===i.wv.Show_Stand,onClose:function(){return ze(i.wv.Hide)}}),(0,e.jsx)(se.Z,{targetId:u,targetName:A?.name,targetType:t.qR.Agent,permissions:A?.permissions||[],visible:Ke===i.wv.Version_History,onClose:function(){return ze(i.wv.Hide)}})]}),(0,e.jsx)(W.Z,{targetId:u,open:C,spaceId:c,category:A?.category,onCancel:function(){return h(!1)},onConfirm:be}),(0,e.jsx)(T.Z,{spaceId:c,mode:E.jA.Update,agentConfigInfo:A,open:Z,onCancel:function(){return p(!1)},onConfirmUpdate:Ve}),(0,e.jsx)(Ko,{spaceId:c,modelComponentConfig:A?.modelComponentConfig,open:K,devConversationId:A?.devConversationId,onCancel:re}),(0,e.jsx)(X.Z,{open:Q,onCancel:function(){return Me(!1)},title:"\u667A\u80FD\u4F53\u6982\u89C8",list:Ae}),(0,e.jsx)(ne.Z,{agentId:A?.id,open:pn,name:A?.name,onCancel:function(){return vn(!1)}})]})},pr=gr},65390:function($e,pe,n){n.d(pe,{Z:function(){return x}});var le=n(14719),j=n(94581),Y=n.n(j),d=n(75271),G={"analyze-wrapper":"analyze-wrapper___DMVbd","analyze-box":"analyze-box___mZugc","row-line":"row-line___cymU3","vertical-line":"vertical-line___LT3CR"},s=n(52676),T=Y().bind(G),W=function(L){var X=L.open,ne=L.onCancel,O=L.title,t=L.list;return(0,s.jsx)(le.Z,{open:X,onCancel:ne,title:O,footer:!1,width:556,children:(0,s.jsxs)("div",{className:T("flex","flex-wrap",G["analyze-wrapper"]),children:[t?.map(function(E,i){return(0,s.jsxs)("div",{className:T(G["analyze-box"],"flex","flex-col"),children:[(0,s.jsx)("span",{children:E.label}),(0,s.jsx)("div",{className:T("flex","items-center","content-center"),children:E.value})]},i)}),(0,s.jsx)("div",{className:T(G["row-line"])}),(0,s.jsx)("div",{className:T(G["vertical-line"])})]})})},x=W},85461:function($e,pe,n){n.d(pe,{Z:function(){return e}});var le=n(82092),j=n.n(le),Y=n(26068),d=n.n(Y),G=n(15558),s=n.n(G),T=n(48305),W=n.n(T),x=n(72611),se=n(50644),L=n(94652),X=n(86743),ne=n(16621),O=n(41249),t=n(68108),E=n(43898),i=n(67130),ie=n(86524),$=n(9504),fe=n(14719),nn=n(10580),P=n(70183),Re=n(39319),S=n(39357),tn=n(94581),ln=n.n(tn),r=n(16483),de=n.n(r),qe=n(75271),ge=n(58226),fn=n.n(ge),Qe=n(56179),Ze={container:"container___ucaEF","table-wrap":"table-wrap___KFIpR","url-box":"url-box___A_aT7","chat-url":"chat-url___qrgrJ","img-box":"img-box___onytl","copy-img-box":"copy-img-box___wP83A",img:"img___DXQBL","qr-code-modal":"qr-code-modal___vOzXg"},w=n(24057),ke=n(81414),V=n(52676);de().locale("zh-cn");var me=ln().bind(Ze),Ne=function(ae){var Ge=ae.agentId,Se=ae.name,ce=ae.open,Ie=ae.onCancel,Be=(0,qe.useState)([]),Xe=W()(Be,2),ue=Xe[0],b=Xe[1],an=(0,qe.useState)(""),En=W()(an,2),An=En[0],$n=En[1],ut=(0,qe.useState)(!1),On=W()(ut,2),ft=On[0],hn=On[1],gt=(0,Qe.useRequest)(L.Ai,{manual:!0,debounceInterval:300,onSuccess:function(dn){b([].concat(s()(ue),[dn]))}}),Bn=gt.run,Rn=gt.loading,rn=(0,Qe.useRequest)(L.is,{manual:!0,debounceInterval:300,onSuccess:function(dn){b(dn||[])}}),Ft=rn.run,lt=rn.loading,pt=(0,Qe.useRequest)(L.kt,{manual:!0,debounceInterval:300,onSuccess:function(){O.ZP.success("\u4FEE\u6539\u6210\u529F")}}),Pn=pt.run,Nt=(0,Qe.useRequest)(L.zZ,{manual:!0,debounceInterval:300,onSuccess:function(){O.ZP.success("\u5220\u9664\u6210\u529F")}}),zn=Nt.run,sn=function(){O.ZP.success("\u590D\u5236\u6210\u529F")};(0,qe.useEffect)(function(){!ce||!Ge||Ft(Ge)},[Ge,ce]);var Tn=function(dn,We,jn){var wn=ue?.map(function(Yn){var Un=Yn;return Un.id===dn&&(Un=d()(d()({},Un),{},j()({},We,jn))),Un});b(wn||[]);var qn=jn;We==="expire"&&(qn=jn?de()(jn.toString()):""),We==="requireLogin"&&(qn=jn?1:0),Pn(j()({id:dn,agentId:Ge},We,qn))},kn=function(dn,We){var jn=ue?.filter(function(wn){return wn.id!==dn});b(jn||[]),zn(dn,We)},Xt=function(dn,We,jn){(0,w.oB)("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u94FE\u63A5\u5417?",jn,function(){return kn(dn,We),new Promise(function(wn){setTimeout(wn,1e3)})})},Jt=function(dn){hn(!0),$n(dn)},Ot=[{title:"\u94FE\u63A5\u5730\u5740",dataIndex:"chatUrl",key:"chatUrl",className:"flex",render:function(dn,We){return(0,V.jsxs)("div",{className:me("flex","items-center","overflow-hide",Ze["url-box"]),children:[(0,V.jsx)(se.H,{text:dn,className:me(Ze["chat-url"],"flex-1")}),(0,V.jsx)(fn(),{text:dn||"",onCopy:sn,children:(0,V.jsx)(t.Z,{title:"\u590D\u5236",children:(0,V.jsx)("span",{className:me(Ze["img-box"],Ze["copy-img-box"],"flex","content-center","items-center","cursor-pointer"),children:(0,V.jsx)("img",{className:me("cursor-pointer",Ze.img),src:x,alt:""})})})}),(0,V.jsx)(t.Z,{title:"\u4E8C\u7EF4\u7801",children:(0,V.jsx)("span",{className:me(Ze["img-box"],"flex","content-center","items-center","cursor-pointer"),onClick:function(){return Jt(We.chatUrl)},children:(0,V.jsx)("img",{className:me("cursor-pointer",Ze.img),src:We.qrCodeUrl,alt:""})})})]})}},{title:"\u767B\u5F55\u53EF\u7528",dataIndex:"requireLogin",key:"requireLogin",width:85,align:"center",render:function(dn,We){return(0,V.jsx)("div",{className:me("h-full","flex","items-center","content-center"),children:(0,V.jsx)(E.Z,{checked:!!We.requireLogin,onChange:function(wn){return Tn(We.id,"requireLogin",wn.target.checked)}})})}},{title:"\u6709\u6548\u671F",key:"expire",width:210,render:function(dn,We){return(0,V.jsx)(i.ZP,{locale:S.Z,children:(0,V.jsx)(ie.default,{minDate:de()(),value:We.expire?de()(We.expire):null,allowClear:!1,showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onChange:function(wn,qn){return Tn(We.id,"expire",qn.toString())}})})}},{title:"\u64CD\u4F5C",width:80,key:"action",align:"center",render:function(dn,We){return(0,V.jsx)("div",{className:me("h-full","flex","items-center","content-center"),children:(0,V.jsx)($.ZP,{type:"text",icon:(0,V.jsx)(X.Z,{}),onClick:function(){return Xt(We.id,We.agentId,We.chatUrl)}})})}}],$t=function(){b([]),Ie()};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(fe.Z,{classNames:{content:me(Ze.container),header:me(Ze.container),body:me(Ze.container)},title:(0,V.jsxs)("div",{className:me("text-ellipsis"),style:{width:"400px"},children:[Se,"-\u4E34\u65F6\u4F1A\u8BDD\u94FE\u63A5\u7BA1\u7406"]}),open:ce,width:710,destroyOnHidden:!0,footer:null,onCancel:$t,children:(0,V.jsx)(nn.Z,{className:me(Ze["table-wrap"]),rowKey:"id",columns:Ot,dataSource:ue,pagination:!1,loading:lt,virtual:!0,scroll:{y:450},locale:{emptyText:(0,V.jsx)(P.Z,{description:"\u6682\u65E0\u6570\u636E"})},footer:function(){return(0,V.jsx)($.ZP,{onClick:function(){return Bn(Ge)},loading:Rn,icon:(0,V.jsx)(ne.Z,{}),children:"\u65B0\u589E\u94FE\u63A5"})}})}),(0,V.jsx)(fe.Z,{open:ft,destroyOnHidden:!0,footer:null,className:Ze["qr-code-modal"],onCancel:function(){return hn(!1)},modalRender:function(){return(0,V.jsx)(Re.Z,{size:500,value:An||"-"})}})]})},e=Ne},94652:function($e,pe,n){n.d(pe,{Ai:function(){return Y},is:function(){return W},kt:function(){return d},mY:function(){return G},vU:function(){return s},zZ:function(){return j}});var le=n(56179);function j(x,se){return(0,le.request)("/api/temp/chat/".concat(se,"/link/").concat(x,"/delete"),{method:"POST"})}function Y(x){return(0,le.request)("/api/temp/chat/".concat(x,"/link/create"),{method:"POST"})}function d(x){return(0,le.request)("/api/temp/chat/link/update",{method:"POST",data:x})}function G(x){return(0,le.request)("/api/temp/chat/conversation/query",{method:"POST",data:x})}function s(x){return(0,le.request)("/api/temp/chat/conversation/create",{method:"POST",data:x})}function T(x){return request("/api/temp/chat/completions",{method:"POST",data:x})}function W(x){return(0,le.request)("/api/temp/chat/".concat(x,"/link/list"),{method:"GET"})}},24057:function($e,pe,n){n.d(pe,{Tg:function(){return W},oB:function(){return T},sO:function(){return x}});var le=n(48305),j=n.n(le),Y=n(64267),d=n(14719),G=n(52676),s=d.Z.confirm,T=function(L,X,ne,O){s({title:L,icon:(0,G.jsx)(Y.Z,{}),content:X,okText:"\u786E\u5B9A",maskClosable:!0,cancelText:"\u53D6\u6D88",onOk:ne,onCancel:O})},W=function(L){if(!L)return"";if(typeof L=="string"){var X=L.split("."),ne=j()(X,2),O=ne[0],t=ne[1];return t&&t.length>6?"".concat(O,".").concat(t.slice(0,6)):L}var E=L;if(isNaN(E))return"";var i=E.toString().split("."),ie=j()(i,2),$=ie[0],fe=ie[1];return fe&&fe.length>6?"".concat($,".").concat(fe.slice(0,6)):E.toString()},x=function(L){if(!L)return"";var X=L.toString(),ne=X.indexOf(".");return ne===-1?X:X.substring(0,ne+7)}},83005:function($e,pe,n){n.d(pe,{_:function(){return W},b:function(){return x}});var le=n(90228),j=n.n(le),Y=n(87999),d=n.n(Y),G=n(41705),s=n(3440),T=n(64799),W=function(){var se=d()(j()().mark(function L(X){var ne,O,t,E,i,ie,$,fe=arguments;return j()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return ne=fe.length>1&&fe[1]!==void 0?fe[1]:T.qR.Agent,P.prev=1,P.next=4,(0,G.Ee)(X,ne);case 4:O=P.sent,t=O.headers["content-disposition"],E=decodeURIComponent(t.split("filename=")[1].replace(/"/g,"")),i=new Blob([O.data]),ie=URL.createObjectURL(i),$=document.createElement("a"),$.href=ie,$.download=E,$.click(),URL.revokeObjectURL(ie);case 14:return P.prev=14,P.finish(14);case 16:case"end":return P.stop()}},L,null,[[1,,14,16]])}));return function(X){return se.apply(this,arguments)}}(),x=function(){var se=d()(j()().mark(function L(X,ne){var O,t,E,i;return j()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.prev=0,$.next=3,(0,s.S5)(X);case 3:O=$.sent,t=new Blob([O.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),E=URL.createObjectURL(t),i=document.createElement("a"),i.href=E,i.download="".concat(ne,".xlsx"),i.click(),URL.revokeObjectURL(E);case 11:return $.prev=11,$.finish(11);case 13:case"end":return $.stop()}},L,null,[[0,,11,13]])}));return function(X,ne){return se.apply(this,arguments)}}()},72611:function($e){$e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFwSURBVEiJ7ZbRTcNADIY/J5f3jhA2gAmACQgjMAHlualqlHsHNqATABNQNugGZATee5V5oKDSVtRBgITU/ym6s+/zXXz2wU7/XbJpUFXLEMI50HOu8yIi48FgMO0MbJqmEpE7J+gTNKV0oKrtV0ZhLQKR0eLzFph4SCJSmVlVFMUJcNMJCOwDpJQuVPXFA1TVhzzPx3Vd328NbnUgxmgAdV1/zKlqL8uyKsuyQ08AIjKdzWbjTQFv2uEnLRLoESg9MAAzI4TQV9Xj1X+6FVgUxZWZlUArItdm5jlmBcoQwgg46wQ0syMAETn1pD2Aqj6FEJ6BahWYOfx7AF7YAtgu+3YF/qh2wL8Dqmr5V8AJQAjhOwW8OzCldAa0+FtTJ61d/MUd2vsNGPiSpoW3PuldtGmao2XfZXlK21hERiJyF2OcAp5a+g5c640bnxirijFeAX2P7bvM7HI4HOq3gPDWE/M83/fYzufzdttTY6cf0yt+NXkX7pGGegAAAABJRU5ErkJggg=="},10802:function($e){$e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAYAAAAdHLWhAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAbsSURBVHic7Zw/TBtXHMe/7xmDy9D4xJApKllCN7NFYihEkcpERZayVaAEVHUJkTqXo3MkyBKhkChWtnQJKVOrRjVLKja8NVniqEuHIh+Vyj/D/TqYcy/Hs3ln+917577Pxv3zz/e997l3751haJM7bnWCMV4A0QQYGwYwDCDf7vF6DA+AB6IdMFYi8suPXafUzoFYnI2/dqvDp+BLYJhAPRCLPB6R/+AEWC26jie7k1RAoWBm2y7PEuAxQvEY/rJMUBcGNO9WZ8H4EmyL6TaeT/7cE9fZaLVRy4AW3L0VYljsbl2WMIyw+si9dK/petHCWbeaz/LMUxBNqyvN0oCxjZp/OidSXp9oextOwhBNZ3kGAG5FV/HoggV3b8WGowGi6QV3byW6+APF3Xar05zxF8lVZTkH+XPrrlMM/mwENOtW81nG38E+bOqmkiH/xprrVICQ4vrBl2DDMYH6M+cZDLCtx0Qy5F9dc50KB4A+YBE2HKMIWhEHAMb4Xb3lWM5RH+8EOxuV/lVzORYBRP4Nzhgv6C7EIoYxXuAgmtBdiKUJRBMcjI3qrsPSBMaGOWzvzWRsQIaTPzdYajEL4XRDWhkdqX+dt+9PsX9ImqvpDj0R0Fghi6nxAQydCWHX8/H8p0PsvDnRXFnnpDqgoTzHzOcDGP00e275NzODeFs5wdMfD7Hr+Zoq7Bw2v7yXOhcM5hhuXu/H1PiA1PabW0d4tX2cSu2lrgVFdSbD1PgAxgrZVGovNQE101mc/dOoPeMVF1dnsqRFe0a3oHZ0JktatGdkQJ3qLM7nmK49oxSnSmeymKg9Y1qQSp3JYqL2tAeUlM5kMU172hSnW2ey6NaelhZkgs5k0a29RAMyTWey6NReIopLi85kSVJ7ylvQUJ7j268GU6EzWQLt3X+2r7w1KT9rY4VsT4UTMJTnGCuoV7XyM/e6XNPeVVXBrufjdbmm/HPsPagNeuoeBAD7h4TNrSO8Ltcw90UO14a1Px+3xc7vNTz/+aj3enFRRkf6MDOZS829adfzGxdY0mi5lHfenODt+39Sob3/5UgCYL72dOhMhDHTDaZoT6fORBhz2ZqgPd06E2FMQIA+7ZmiMxGJ+2R0pA+Dudb/w2nX83H/2T4ePlc7lLLr+Si+PMDDHw6kPufK5eT1m1gLGsrzxhhWcGLevD9tuY9K7cXRWXh6JOkR7UQ6CVPjA8ITHOfLDuV5V7QXR2fhiyrM/iHh1fYxNreOOqpFBuUB3bzej5nJXNP1wZeVvZrb7e3F7Z01u6jCFF8eKO/tKVfcwQUnfTDHGlepKu21qzMTSERxY4UsvpzMXdg5ALqrvW7oTESSz0qJPagGLeXm9f4Lt+1Ueyp0FvBq+xi/bB/3VichzJXLHDOTcjd72d4e8N+UBgAlOvvjz1Pp7ng30TbUo0p7MpiqMxFax+JUaq8ZJutMhBGDpaq0FyYNOhNhREABKrSXJp2JMCogoLvaS5vORBgXUEAn2kurzkQkGtBQnmPqs378Vq5J30Piau+vPVKis7FCFqMjfb350ojotas4Xec42pMhjs5E97AkJ/aUB9Tq1d+4Xec42hMRV2et7mHBnJXq1qQ8IJkbddyucxztBcePqzOZe9jm1pHyKQetLSiKCu11qrNm9EwLAuK9+tst7XVTZ1F66h4UJs6saLvaOwi9eCK7n2yX3L76KyCu9j7KsVTP/0RJxY+IuzVQGmCqzkRoH0lQqb0oputMhPaAAlRpD0iPzkQYExCgRntp0pkIowIK6Ib20qgzEUYGFNCO9gCkVmcijA4IiK892eEfE3UmwviAAnS8+msCqQkoIKlXf03BqN8HyaD61V/TSF1AgPwPvdKmMxGpU5yITl/9NZlUtqAogfaufZJp/N0r9ERAQF17vRRMgBk/grE0hQPwdBdhaYrHAVR0V2FpisdBVNFdhaUJRDscjJV012FpAmMlTuSXdddhEUPklxkAzC/vvQMwrLccSwRvfemSU+9mE0p6a7FEIfIfAGfPQRn4y3rLsUTwToBV4CygNdepgFDUWpKlASMUi67jAaGRhLNWVNFVlKWBdxwyWiOgeiuyqtONT/5c0HqAyFjcuusUGdXdZ0keRlh94jobHywTbTj//d8vQDSdTFkWAABjG+vffXwrulg4ml3zT+fA2IZonUUBjG3U/NM54apW+y24eyvEsKimKgtQ19oj99K9pusvOsBttzrNGX8KIN/VyiwVkL+87jrFVhtdOGH3xHU2auRfPes82LmjbkAoZsi/cVE4gEQLCjPrVvN9wCJj/C5si4pLBYRSBv7ymutUZHeKFVCYO251gjFeANEEGBtFPTAbWh0PQAVEFTBWIvLLj12n1M6B/gWdLkpDqhynIgAAAABJRU5ErkJggg=="},26292:function($e){$e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAMRSURBVFiFzZm/TxNhGMe/74Uci69p0om61MHiAA0BGZwQEyZNMQ5Eo4OkSZFNBkcD/QtgU0iInR3ANhgGE6A7GkMXr4vHUqaLTc6FDn0dnr68x/WuvLWV6ye53Hu997187v3x3MsDQwhia/wVYMwAYgJAEkAsrO4/UqeDHUE0i2yp8jmoEgsWY6stqevEhhArflHDeyE202sA+4jrlwOAJBjbJQfFRQ+KzfQaGFavXSsIgTxbOlkDWoJic/wJGNuNVKoNschylQINMWPrEdsEwFYBgA1m70nEogFmzEetEY4xYwDiQdQa4YgJA/0PwP0kOQRdQZ4AJpeBVAZwa8CXLJ11MDnw9BMwzAHHAsrvdNvGjKvrtOQebZOcvDa5nhwAxEdVm5F79Cye0GqqJ3gnox5oH1IPOJa+4NkxtTk7pms5GhoMadVKTNPZrQFf3+iLeamW6Hi2T4J97UHJH80518dndCfox+TA/bfA2Iv2e6kM3dPsqTD0hjiMVAYYe0nl4ZvAt/dUnloGJl9T+dwFvn+ISPD0kGRMroQAVW64VKcHrh7i+CgdQbg1YC9LIlLMK7eXDV/tnZ7bleDjbRXz7IP2+45FIl46yclQY3JgbqMPgueuKvNbwXWSDy9fm7z9N4kQqqyxoq8W9H7SgobEuyAa7uXhngoIxjKmNlwK3j0LurXwN03Ots85/5yUn0c/jqX1Pe49DnrlHEvNyYbbua0mvYWZakn1sLc3HAvYWaApYfcWZnoTBNSq9OPW9LdjHehuiG90uc3yY3K10M71poCeYLVIZ54Anu9TbOxWbG6D2soXdH72U7Ckgq7cdGp8BS7gCVrxF3KW9vdZfw7uLNCuZWSaFkU3G1bHoo1E/C5wekAvrAkTW+nfGNw/nOoGADtqiw7UDYD9iNoiHHZkAM1y1BqhiGaRsltb6V+IJifYCZvlTm63wozIR+sSgBArQCsOslylAIHBkRTIy1TwpRz1QGRZPdlVICiJTvnCdUSRRIfIs1yl4P2xTVBCosZ8Kz0Xw//5N4RNYa5Z9otJ/gI08QqsvSbWIgAAAABJRU5ErkJggg=="}}]);})();
