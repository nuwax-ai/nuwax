"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[3988],{3055:function(j,o,e){e.d(o,{Z:function(){return g}});var d=e(24573),i=e(94581),c=e.n(i),M=e(75271),u={"xagi-nav-style2":"xagi-nav-style2___xuAte",text:"text___sfO7S","page-container":"page-container___rvj3b",container:"container___MWZZN"},r=e(52676),h=c().bind(u),a=function(s){var _=s.className;return(0,r.jsxs)("div",{className:h("flex","flex-1","items-center","content-center",u.container,_),children:[(0,r.jsx)(d.Z,{}),(0,r.jsx)("span",{children:"\u52A0\u8F7D\u4E2D..."})]})},g=a},18327:function(j,o,e){e.r(o);var d=e(90228),i=e.n(d),c=e(87999),M=e.n(c),u=e(48305),r=e.n(u),h=e(3055),a=e(98166),g=e(86230),v=e(75271),s=e(56179),_=e(52676),T=function(){var U=(0,v.useState)(!0),O=r()(U,2),I=O[0],L=O[1],E=(0,s.useLocation)(),P=500,A=["/login","/verify-code","/set-password","/chat-temp"],C=A.some(function(l){return E.pathname.includes(l)}),D=function(m,f){var t=Date.now()-f;t>=P?m():setTimeout(m,P-t<=0?0:P-t)};return(0,v.useEffect)(function(){console.time("authWithLoading");var l=function(){var m=M()(i()().mark(function f(){var t,W,p;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=Date.now(),n.prev=1,W=(0,a.Kf)(),W===null){n.next=7;break}L(!1),n.next=13;break;case 7:return console.timeLog("authWithLoading","fetchUserInfoFromServer:start"),n.next=10,a.KD.fetchUserInfoFromServer(!1);case 10:p=n.sent,console.timeLog("authWithLoading","fetchUserInfoFromServer:data",p),p?(console.timeLog("authWithLoading","fetchUserInfoFromServer:success"),(0,a.me)(!0)):((0,a.om)(),D(function(){console.timeLog("authWithLoading","fetchUserInfoFromServer:error","setLoading(false)"),L(!1)},t));case 13:n.next=21;break;case 15:n.prev=15,n.t0=n.catch(1),console.timeLog("authWithLoading","catch",n.t0),console.error("\u9A8C\u8BC1\u767B\u5F55\u72B6\u6001\u5931\u8D25:",n.t0),(0,a.om)(),D(function(){console.timeLog("authWithLoading","catch","redirectToLogin",E.pathname),(0,g.rf)("-1")},t);case 21:return n.prev=21,D(function(){L(!1)},t),n.finish(21);case 24:case"end":return n.stop()}},f,null,[[1,15,21,24]])}));return function(){return m.apply(this,arguments)}}();return l(),function(){console.timeEnd("authWithLoading")}},[E.pathname]),C?(0,_.jsx)(s.Outlet,{}):I?(0,_.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,_.jsx)(h.Z,{})}):(0,_.jsx)(s.Outlet,{})};o.default=T}}]);})();
