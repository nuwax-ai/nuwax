"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[4788],{65173:function(st,Sn,E){var An=E(15558),H=E.n(An),Q=E(48305),Ve=E.n(Q),He=E(61884),_=E(44689),On=E(62237),X=E(63876),Kn=E(12758),h=E(29328),Mn=E(63619),z=E(58176),dn=E(75271),cn=E(56179),Dn=E(15457),I=E(52676),ye=function(Ie){if(!Ie)return 0;for(var me=0,s=0;s<Ie.length;s++)/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/.test(Ie[s])?me+=2:me+=1;return me},le=function(Ie,me){if(!Ie)return"";for(var s=0,Ne="",e=0;e<Ie.length;e++){var en=Ie[e],vn=/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/.test(en)?2:1;if(s+vn>me)break;Ne+=en,s+=vn}return Ne.length<Ie.length&&(Ne+="..."),Ne},Re=function(Ie){var me=Ie.placeholder,s=Ie.form,Ne=Ie.fieldName,e=Ie.style,en=Ie.isDisabled,vn=en===void 0?!1:en,Tn=Ie.referenceType,N=Tn===void 0?"Reference":Tn,_n=Ie.isLoop,$n=Ie.value,ze=Ie.onChange,un=(0,cn.useModel)("workflow"),Qe=un.referenceList,Gn=un.getValue,Be=un.getLoopValue,se=un.setIsModified,Je=(0,dn.useState)(""),wn=Ve()(Je,2),_e=wn[0],he=wn[1],Xe=(0,dn.useState)([$n||""]),we=Ve()(Xe,2),nn=we[0],Pt=we[1],tn=(0,dn.useState)(300),Xn=Ve()(tn,2),mt=Xn[0],kn=Xn[1];(0,dn.useEffect)(function(){var Ee=function(){var jn=window.innerHeight,Oe=document.querySelector(".input-or-reference");if(Oe){var fn=Oe.getBoundingClientRect(),sn=jn-fn.top-20;kn(Math.min(Math.max(sn,150),400))}};return Ee(),window.addEventListener("resize",Ee),window.addEventListener("scroll",Ee),function(){window.removeEventListener("resize",Ee),window.removeEventListener("scroll",Ee)}},[]);var Nn=function(be,jn){if(Ne&&s){var Oe=Ne.slice(0,-1);if(s.setFieldValue([].concat(H()(Oe),["bindValueType"]),jn),jn==="Reference"){var fn,sn=Qe==null||(fn=Qe.argMap)===null||fn===void 0||(fn=fn[be])===null||fn===void 0?void 0:fn.dataType;s.setFieldValue([].concat(H()(Oe),["dataType"]),sn||"String"),s.setFieldValue(Ne,be);var an=s.getFieldValue([].concat(H()(Oe),["name"]));(!an||vn)&&s.setFieldValue([].concat(H()(Oe),["name"]),Qe.argMap[be].name)}else s.setFieldValue([].concat(H()(Oe),["dataType"]),"String"),s.setFieldValue(Ne,be)}se(!0)};(0,dn.useEffect)(function(){if(Ne&&s){var Ee=s.getFieldValue(Ne),be=s.getFieldValue([].concat(H()(Ne.slice(0,-1)),["bindValueType"]));if(be==="Reference"){var jn=Ee&&Qe.argMap[Ee];he(jn?_n?Be(Ee):Gn(Ee):"")}else he("")}},[s?.getFieldsValue(),Qe.argMap]);var Lt=function(){Nn("","Input"),he("")},Yn=function(be){return(0,I.jsxs)("div",{className:"tree-custom-title-style",children:[(0,I.jsx)("span",{title:"",children:be.name}),(0,I.jsx)(X.Z,{content:be.description||"\u6682\u65E0\u63CF\u8FF0",children:(0,I.jsx)(_.Z,{title:"",style:{marginLeft:"4px",fontSize:12}})}),(0,I.jsx)(Kn.Z,{color:"#C9CDD4",style:{marginLeft:"8px",fontSize:10,lineHeight:"14px"},children:be.dataType})]})},Hn=function(be){!be||!be.length||(Nn(be[0],"Reference"),he(Gn(be[0])),Pt(be))},Vn=function(be){if(be&&be.length){var jn=!1;return be.map(function(Oe){var fn=Oe?.outputArgs.some(function(sn){var an,ht;return(sn==null||(an=sn.children)===null||an===void 0?void 0:an.length)&&(sn==null||(ht=sn.children)===null||ht===void 0?void 0:ht.length)>0});return{key:Oe.id,label:ye(Oe.name)>16?le(Oe.name,16):Oe.name,icon:(0,He.qM)(Oe.type),popupClassName:"inputOrReferencePopup",children:Oe.outputArgs?[{key:"".concat(Oe.id,"-tree-select"),label:(0,I.jsx)("div",{style:{paddingTop:12,paddingRight:12,paddingBottom:8},onClick:function(an){jn||(an.stopPropagation(),an.preventDefault())},children:(0,I.jsx)(h.Z,{onSelect:function(an){Hn(an),jn=!0},defaultExpandAll:!0,treeData:Oe.outputArgs,fieldNames:{title:"name",key:"key",children:"children"},titleRender:Yn,defaultSelectedKeys:nn,blockNode:!0,className:"custom-tree-style ".concat(fn?"":"custom-tree-no-children-style"),style:{maxHeight:"".concat(mt,"px"),overflow:"auto"}})})}]:void 0}})}else return[{key:"no-data",popupClassName:"inputOrReferencePopup",label:(0,I.jsx)("div",{style:{padding:8,color:"red"},children:"\u672A\u6DFB\u52A0\u4E0A\u7EA7\u8282\u70B9\u8FDE\u7EBF\u6216\u4E0A\u7EA7\u8282\u70B9\u65E0\u53C2\u6570"}),disabled:!0}]},ot=function(){return Vn(_n?Qe.innerPreviousNodes:Qe.previousNodes)};return(0,I.jsxs)("div",{className:"input-or-reference dis-sb",style:e,children:[N==="Reference"||N===null?_e?(0,I.jsx)(Kn.Z,{closable:!0,onClose:Lt,className:"input-or-reference-tag text-ellipsis",color:"#C9CDD4",children:_e.length>10?(0,I.jsx)(X.Z,{content:_e,placement:"topRight",children:(0,I.jsx)("span",{className:"tag-text-style",children:_e})}):(0,I.jsx)("span",{className:"tag-text-style",children:_e})}):(0,I.jsx)(Mn.Z,{placeholder:me||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:vn,onChange:function(be){ze?.(be.target.value),Nn(be.target.value,"Input")}}):(0,I.jsx)(Mn.Z,{placeholder:me||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:vn,value:$n,onChange:function(be){ze?.(be.target.value),Nn(be.target.value,"Input")}}),(0,I.jsx)(z.Z,{menu:{items:ot(),style:{maxHeight:328}},trigger:["click"],overlayStyle:{minWidth:200},placement:"bottomRight",children:(0,I.jsx)(On.Z,{style:{cursor:"pointer"},className:"input-reference-icon-style"})})]})};Sn.Z=Re},45262:function(st,Sn,E){E.d(Sn,{Q:function(){return Re}});var An=E(26068),H=E.n(An),Q=E(48305),Ve=E.n(Q),He=E(61884),_=E(44689),On=E(86743),X=E(12758),Kn=E(14719),h=E(9504),Mn=E(63876),z=E(63619),dn=E(7914),cn=E(75271),Dn=E(43562),I=E(52676),ye=function(Ie){var me=Ie.params;return(0,I.jsx)(I.Fragment,{children:(me||[]).map(function(s){return(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{className:"dis-left",children:[(0,I.jsx)("span",{className:"mr-16",children:s.name}),(0,I.jsx)(X.Z,{color:"#C9CDD4",children:s.dataType})]}),(0,I.jsx)("p",{className:"skill-params-description",children:s.description})]},s.name)})})},le=function(Ie){var me,s=Ie.open,Ne=Ie.onCancel,e=Ie.params,en=Ie.onConfirm,vn=(0,cn.useState)("input"),Tn=Ve()(vn,2),N=Tn[0],_n=Tn[1],$n=(0,cn.useState)(e),ze=Ve()($n,2),un=ze[0],Qe=ze[1],Gn=function(){en(un),Ne()};(0,cn.useEffect)(function(){Qe(e)},[e?.inputArgBindConfigs]);var Be=function(Je,wn){Qe(wn==="input"?function(_e){var he;return H()(H()({},_e),{},{inputArgBindConfigs:(he=_e.inputArgBindConfigs)===null||he===void 0?void 0:he.map(function(Xe){return Xe.name===Je.name?Je:Xe})})}:function(_e){var he;return H()(H()({},_e),{},{outputArgBindConfigs:(he=_e.outputArgBindConfigs)===null||he===void 0?void 0:he.map(function(Xe){return Xe.name===Je.name?Je:Xe})})})};return(0,I.jsx)(Kn.Z,{keyboard:!1,maskClosable:!1,open:s,centered:!0,onCancel:function(){return Ne()},className:"skill-dispose-modal-style",width:800,footer:function(){return(0,I.jsx)(h.ZP,{onClick:Gn,children:"\u4FDD\u5B58"})},children:(0,I.jsxs)("div",{className:"skill-dispose-container flex ",children:[(0,I.jsxs)("div",{className:"skill-dispose-left",children:[(0,I.jsx)("div",{className:"skill-dispose-left-title",children:"\u8BBE\u7F6E"}),(0,I.jsx)("p",{className:"skill-menu-style ".concat(N==="input"?"select-menu":""),onClick:function(){return _n("input")},children:"\u914D\u7F6E\u8F93\u5165\u53C2\u6570"})]}),(0,I.jsx)("div",{className:"skill-dispose-right",children:N==="input"&&(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{className:"dis-sb content-item-style content-title-style",children:[(0,I.jsx)("span",{className:"flex-1",children:"\u53C2\u6570\u540D\u79F0"}),(0,I.jsx)("span",{className:"content-center-item-style",children:"\u9ED8\u8BA4\u503C"}),(0,I.jsxs)("p",{className:"content-right-item-style flex",children:[(0,I.jsx)("span",{children:"\u5F00\u542F"}),(0,I.jsx)(Mn.Z,{content:"\u5F53\u53C2\u6570\u8BBE\u7F6E\u4E3A\u4E0D\u53EF\u89C1\u65F6\uFF0C\u5927\u6A21\u578B\u5C06\u65E0\u6CD5\u770B\u5230\u8BE5\u53C2\u6570\u3002\u5982\u679C\u8BE5\u53C2\u6570\u8BBE\u7F6E\u4E86\u9ED8\u8BA4\u503C\u5E76\u4E14\u4E0D\u53EF\u89C1\uFF0C\u5219\u5728\u8C03\u7528\u63D2\u4EF6\u65F6\uFF0C\u667A\u80FD\u4F53\u4F1A\u9ED8\u8BA4\u53EA\u4F7F\u7528\u8FD9\u4E2A\u8BBE\u5B9A\u503C",styles:{body:{width:"300px"}},children:(0,I.jsx)(_.Z,{className:"ml-12"})})]})]}),un==null||(me=un.outputArgBindConfigs)===null||me===void 0?void 0:me.map(function(se){var Je;return(0,I.jsxs)("div",{className:"dis-sb content-item-style",children:[(0,I.jsx)("div",{className:"flex-1",children:(0,I.jsxs)("p",{className:"flex",children:[(0,I.jsx)("span",{className:"mr-16",children:se.name}),(0,I.jsx)(X.Z,{color:"#C9CDD4",children:se.dataType})]})}),(0,I.jsx)(z.Z,{className:"content-center-item-style",value:(Je=se.bindValue)!==null&&Je!==void 0?Je:"",onChange:function(_e){Be(H()(H()({},se),{},{bindValue:_e.target.value}),"input")}}),(0,I.jsx)("p",{className:"content-right-item-style",children:(0,I.jsx)(dn.Z,{size:"small",checked:se.enable,onChange:function(_e){Be(H()(H()({},se),{},{enable:_e}),"input")}})})]},se.name)})]})})]})})},Re=function(Ie){var me=Ie.params,s=Ie.disabled,Ne=s===void 0?!1:s,e=Ie.removeItem,en=Ie.modifyItem,vn=(0,cn.useState)(null),Tn=Ve()(vn,2),N=Tn[0],_n=Tn[1],$n=(0,cn.useState)(!1),ze=Ve()($n,2),un=ze[0],Qe=ze[1],Gn=(0,cn.useState)(!1),Be=Ve()(Gn,2),se=Be[0],Je=Be[1],wn=function(Xe){e(Xe)},_e=function(Xe){en(Xe)};return(0,I.jsxs)("div",{className:"skill-list",children:[me.map(function(he){return(0,I.jsx)("div",{children:(0,I.jsxs)("div",{className:"skill-item-style dis-left",style:{opacity:Ne?.5:1,cursor:Ne?"not-allowed":"pointer"},onMouseEnter:function(){_n(he),Je(!0)},onMouseLeave:function(){return Je(!1)},children:[(0,I.jsx)("img",{src:he.icon===""?(0,He.Pk)(he.targetType):he.icon,alt:"",className:"skill-item-icon"}),(0,I.jsxs)("div",{className:"skill-item-content-style",children:[(0,I.jsx)("div",{className:"skill-item-title-style",children:he.name}),(0,I.jsx)("div",{className:"skill-item-desc-style",children:he.description})]}),(N?.typeId&&N?.typeId===he?.typeId||N?.knowledgeBaseId&&N?.knowledgeBaseId===he?.knowledgeBaseId)&&se&&(0,I.jsx)("div",{className:"mask-layer-style",children:(0,I.jsxs)("div",{className:"skill-item-dispose-style",style:{color:"#fff",backgroundColor:"transparent"},children:[he.outputArgBindConfigs&&he.outputArgBindConfigs.length&&(0,I.jsx)(Mn.Z,{content:(0,I.jsx)(ye,{params:he.outputArgBindConfigs}),trigger:"hover",children:(0,I.jsx)(_.Z,{className:"white"})}),!Ne&&(0,I.jsx)(Mn.Z,{content:"\u79FB\u9664",trigger:"hover",children:(0,I.jsx)(On.Z,{className:"ml-12  white",onClick:function(){return wn(he)}})})]})})]})},"skill-".concat(he.type,"-").concat(he.typeId||he.knowledgeBaseId,"-").concat(he.name))}),(0,I.jsx)(le,{open:un,onCancel:function(){return Qe(!1)},params:N,onConfirm:_e})]})}},76571:function(st,Sn,E){var An=E(75271),H=function(Ve){var He="drawer-scroll-hidden";if(!document.getElementById("drawer-scroll-style")){var _=document.createElement("style");_.id="drawer-scroll-style",_.innerHTML=`
        .`.concat(He,` {
          overflow-x: hidden !important;
        }
      `),document.head.appendChild(_)}(0,An.useEffect)(function(){Ve?(document.body.classList.add(He),document.documentElement.classList.add(He)):setTimeout(function(){document.body.classList.remove(He),document.documentElement.classList.remove(He)},400)},[Ve])};Sn.Z=H},89611:function(st,Sn,E){E.r(Sn),E.d(Sn,{default:function(){return Ys}});var An=E(15558),H=E.n(An),Q=E(67825),Ve=E.n(Q),He=E(90228),_=E.n(He),On=E(87999),X=E.n(On),Kn=E(26068),h=E.n(Kn),Mn=E(48305),z=E.n(Mn),dn=E(68670),cn=E(75484),Dn=E(14258),I=E(28190),ye=E(63619),le=E(9504),Re=E(63876),pn=E(70183),Ie=E(94581),me=E.n(Ie),s=E(75271),Ne={"xagi-nav-style2":"xagi-nav-style2___iPIiE",text:"text___eVO4C","page-container":"page-container____YLsd","show-stand":"show-stand___x0v4C",hidden:"hidden___LyPql","stand-header":"stand-header___C7ruv","form-style":"form-style___voUbC","form-item-style":"form-item-style___BoNFn","icon-margin":"icon-margin___Z4x9N",close:"close___yXK9c",desc:"desc___Seg_N","divider-horizontal":"divider-horizontal____jNfi",margin:"margin___VG7KG",empty:"empty___nLARw","title-style":"title-style___Cybj_","icon-box-style":"icon-box-style___cfSXc"},e=E(52676),en=me().bind(Ne),vn=function(n){var t=n.className,r=n.icon,a=n.title,i=n.description,u=n.visible,o=n.otherAction,y=n.onClose,S=n.lineMargin,C=n.children,m=n.changeFoldWrap,p=n.showNameInput,l=n.backgroundColor,j=u?"":Ne.hidden,w=S?Ne.margin:"",d=r?Ne["icon-margin"]:"",D=(0,s.useState)(!1),g=z()(D,2),f=g[0],c=g[1],A=(0,s.useState)(!1),k=z()(A,2),P=k[0],Z=k[1],T=I.Z.useForm(),V=z()(T,1),L=V[0],R=(0,s.useRef)(null),U=(0,s.useRef)(null);(0,s.useEffect)(function(){L.setFieldsValue({name:a,description:i})},[a,i]),(0,s.useEffect)(function(){f&&R.current&&R.current.focus()},[f]),(0,s.useEffect)(function(){P&&U.current&&U.current.focus()},[P]),(0,s.useEffect)(function(){p&&c(!0)},[p]);var ne=function(Y){m?.(Y),c(!1),Z(!1)},q="linear-gradient(to bottom, ".concat(l," 0, white 42px)");return(0,e.jsxs)("div",{className:en("flex flex-col",Ne["show-stand"],j,t),style:{background:q,paddingTop:"3px"},children:[(0,e.jsx)("div",{className:en(Ne["stand-header"],"flex","items-center"),style:{height:f?"66px":P?"90px":"66px"},children:(0,e.jsxs)(I.Z,{form:L,onFinish:ne,className:Ne["form-style"],children:[(0,e.jsx)(I.Z.Item,{name:"name",className:Ne["form-item-style"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8282\u70B9\u540D\u79F0"}],style:{height:f?"32px":"24px"},children:f?(0,e.jsx)(ye.Z,{value:a,ref:R,onKeyDown:function(Y){Y.key==="Enter"&&(L.submit(),c(!1))},maxLength:25,onBlur:function(){L.submit(),c(!1)}}):(0,e.jsxs)("div",{className:"dis-sb",style:{color:l},children:[(0,e.jsxs)("div",{className:"dis-sa",onDoubleClick:function(){return c(!0)},children:[(0,e.jsx)("div",{className:Ne["icon-box-style"],children:r}),(0,e.jsx)("span",{className:en("flex-1 text-ellipsis ",Ne["title-style"],d),children:a})]}),(0,e.jsxs)("div",{className:"dis-left fold-action-style",children:[o,(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(Dn.Z,{}),size:"small",onClick:y})]})]})}),(0,e.jsx)(I.Z.Item,{name:"description",className:Ne["form-item-style"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8282\u70B9\u63CF\u8FF0"}],children:P?(0,e.jsx)(ye.Z.TextArea,{ref:U,value:i,placeholder:i,onKeyDown:function(Y){Y.key==="Enter"&&(L.submit(),Z(!1))},onBlur:function(){L.submit(),Z(!1)},rows:2,style:{marginTop:"10px",resize:"none"}}):(0,e.jsx)(Re.Z,{title:i,styles:{body:{width:"300px"}},trigger:"click",children:(0,e.jsx)("div",{onDoubleClick:function(){return Z(!0)},className:"text-ellipsis cursor-pointer ".concat(Ne.desc),children:i})})})]})}),(0,e.jsx)("div",{className:en(Ne["divider-horizontal"],w)}),(0,e.jsx)("div",{className:"flex-1 overflow-y",children:C||(0,e.jsx)(pn.Z,{className:en(Ne.empty),description:"\u6682\u65E0\u5185\u5BB9"})})]})},Tn=vn,N=E(92122),_n=E(1301),$n=E(32347),ze=E(46219),un=function(n){var t=n.onChange,r=n.testRun,a=n.action,i=n.nodeType,u=ze.Z.useApp(),o=u.modal,y=s.useState(!1),S=z()(y,2),C=S[0],m=S[1],p=i===N.C8.Loop,l=function(d){if(p){o.confirm({title:"\u786E\u5B9A\u8981\u5220\u9664\u5FAA\u73AF\u8282\u70B9\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){t(d),m(!1)}});return}t(d),m(!1)},j=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{onClick:function(){return l("Rename")},className:"cursor-pointer",style:{padding:"3px 0"},children:"\u91CD\u547D\u540D"}),!p&&(0,e.jsx)("p",{onClick:function(){return l("Duplicate")},className:"cursor-pointer",style:{padding:"3px 0"},children:"\u521B\u5EFA\u526F\u672C"}),(0,e.jsx)("p",{onClick:function(){return l("Delete")},className:"cursor-pointer",style:{padding:"3px 0"},children:"\u5220\u9664"})]});return(0,e.jsxs)("div",{className:"dis-left",children:[r&&(0,e.jsx)(Re.Z,{placement:"top",content:"\u6D4B\u8BD5\u8BE5\u8282\u70B9",children:(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(_n.Z,{}),style:{marginRight:"6px",fontSize:"12px"},size:"small",onClick:function(){return l("TestRun")}})}),a&&(0,e.jsx)(Re.Z,{content:j,trigger:"click",open:C,onOpenChange:function(d){return m(d)},children:(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)($n.Z,{}),style:{marginRight:"6px",fontSize:"12px"},size:"small",onClick:function(){return m(!0)}})})]})},Qe=un,Gn=E(56716),Be=E(39373),se=E(61884),Je=E(73813),wn=E(6015),_e=E(37998),he=E(88104),Xe=E(6844),we=E(56179),nn=E(12758),Pt=E(82092),tn=E.n(Pt),Xn=E(61265),mt=E(72875),kn=E(45019),Nn=E(44953),Lt=E(7980),Yn=E(51249),Hn=E(51430),Vn=E(32699),ot=E.n(Vn),Ee=E(92448),be=E(34204),jn=["item","loading"],Oe=function(n){var t,r,a,i=n.item,u=n.loading,o=Ve()(n,jn),y=(t=localStorage.getItem(mt.LA))!==null&&t!==void 0?t:"",S=ze.Z.useApp(),C=S.message,m=I.Z.useFormInstance(),p=(0,we.useModel)("workflow"),l=p.getWorkflow,j=(0,s.useState)(!1),w=z()(j,2),d=w[0],D=w[1],g=(0,s.useState)([]),f=z()(g,2),c=f[0],A=f[1];(0,s.useEffect)(function(){var L,R;D((L=(R=i.dataType)===null||R===void 0?void 0:R.startsWith("Array_"))!==null&&L!==void 0?L:!1)},[i.dataType]);var k=(0,s.useCallback)(function(L){var R=L.fileList.filter(function(U){return U.status!==N.KM.removed}).map(function(U){var ne,q,te,Y=U.url||((ne=U.response)===null||ne===void 0?void 0:ne.data.url),ie=(q=U.response)===null||q===void 0?void 0:q.data.key,de=U.name||((te=U.response)===null||te===void 0?void 0:te.data.fileName)||"";return{key:ie||"",status:U.status,uid:U.uid||(0,Ee.Z)(),name:de,url:Y}});return R},[]),P=(0,s.useCallback)(function(L){var R=k(L);if(A(d?R:[R[0]]),L.file.status===N.KM.error){var U;C.warning((U=L.file.response)===null||U===void 0?void 0:U.message)}},[A,d]),Z=(0,s.useCallback)(function(L,R,U){var ne,q=R?L:[L];return Array.isArray(q)&&(ne=q[0])!==null&&ne!==void 0&&ne.url?q.map(function(te){if((0,Vn.isString)(te)){var Y=l("testRunValues"),ie=Y[U],de=R&&(0,Vn.isString)(ie)?JSON.parse(ie):ie;return Array.isArray(de)?de.find(function(Ke){return Ke?.url===te}):de}else if(te!=null&&te.url){var ge;return{uid:te?.uid||(0,Ee.Z)(),name:te?.name||(te==null||(ge=te.url)===null||ge===void 0?void 0:ge.split("/").pop())||te?.url||"",url:te?.url,status:N.KM.done}}return te})||[]:[]},[]);switch((0,s.useEffect)(function(){var L;if((L=i.dataType)!==null&&L!==void 0&&L.includes("File")){var R=m.getFieldsValue(!0)[i.name],U=d&&(0,Vn.isString)(R)?JSON.parse(R):R,ne=Z(U,d,i.name);A(ne)}},[i.name,i.dataType,d]),(0,s.useEffect)(function(){var L;if((L=i.dataType)!==null&&L!==void 0&&L.includes("File")){var R;R=c.filter(function(U){return U.status===N.KM.done})||[],d||(R=R[0]||{}),m.setFieldValue(i.name,R)}},[c,m,i.dataType,i.name,d]),!0){case((r=i.dataType)===null||r===void 0?void 0:r.includes("File")):{var T,V=h()(h()({},o),{},{maxCount:d?10:1});return delete V.value,(0,e.jsx)(Lt.Z,h()(h()({},V),{},{fileList:c,action:Xn.GI,onChange:function(R){P(R)},multiple:d,headers:{Authorization:y?"Bearer ".concat(y):""},accept:(0,Nn.Df)(d?(T=i.dataType)===null||T===void 0?void 0:T.replace("Array_",""):i.dataType),disabled:u,children:(0,e.jsx)(le.ZP,{children:"\u4E0A\u4F20\u6587\u4EF6"})}))}case(i.dataType==="Object"||((a=i.dataType)===null||a===void 0?void 0:a.includes("Array"))):return(0,e.jsx)(be.Z,{value:m.getFieldValue(i.name)||"",codeLanguage:kn.vQ.JSON,onChange:function(R){m.setFieldsValue(tn()({},i.name,R))},height:"180px"});case i.dataType==="Number":return(0,e.jsx)(Yn.Z,h()(h()({},o),{},{disabled:u}));case i.dataType==="Integer":return(0,e.jsx)(Yn.Z,h()(h()({},o),{},{precision:0,disabled:u}));case i.dataType==="Boolean":return(0,e.jsx)(Hn.ZP.Group,h()(h()({},o),{},{disabled:u,options:[{label:"true",value:"true"},{label:"false",value:"false"}]}));case i.dataType==="String":return(0,e.jsx)(ye.Z,h()({},o));default:return(0,e.jsx)(ye.Z,h()(h()({},o),{},{disabled:u}))}},fn=Oe,sn=function(n){var t=n.items,r=n.loading,a=n.options;return(0,e.jsx)(e.Fragment,{children:t.map(function(i,u){if(a!==void 0&&JSON.stringify(a.argMap)!=="{}"){var o=a.argMap[i.bindValue];o&&(i.dataType=o.dataType)}return(0,e.jsx)("div",{children:(0,e.jsx)(I.Z.Item,{name:[i.name],label:(0,e.jsxs)(e.Fragment,{children:[i.name,(0,e.jsx)(nn.Z,{color:"#C9CDD4",className:"ml-10",children:i.dataType})]}),rules:i.require?[{required:!0,message:"".concat(i.name,"\u662F\u5FC5\u586B\u9879")}]:[],children:(0,e.jsx)(fn,{item:i,loading:r})})},i.key||"".concat(i.name,"-").concat(u))})})},an=sn;function ht(x,n){if(x.length<=n)return x;var t=n-3,r=Math.ceil(t/2),a=Math.floor(t/2);return x.slice(0,r)+"..."+x.slice(x.length-a)}var qa=function(n){var t,r=n.params,a=n.items,i=n.value,u=n.answerType,o=n.onAnswer,y=n.onChange,S=n.onSubmit,C=function(p){o?.(p.data.description)};return(0,e.jsxs)("div",{className:"stop-wait-style dis-col flex-1 overflow-y",children:[(0,e.jsxs)("div",{className:"stop-wait-header dis-center",children:[(0,se.qM)(N.C8.QA),(0,e.jsx)("div",{}),(0,e.jsx)("span",{className:"ml-10",children:"\u95EE\u7B54"}),(0,e.jsx)("span",{className:"ml-10",children:"\u56DE\u590D\u4EE5\u4E0B\u95EE\u9898\u540E\u7EE7\u7EED\u8BD5\u8FD0\u884C"})]}),(0,e.jsx)(wn.Z,{className:"flex-1",avatar:(0,e.jsx)("img",{src:E(47804),className:"bubble-avatar"}),variant:u===N.J4.SELECT?"borderless":"filled",header:(0,e.jsx)("span",{children:"\u673A\u5668\u4EBA"}),content:r!=null&&(t=r.options)!==null&&t!==void 0&&t.length?(0,e.jsx)("div",{className:"qa-question-style",children:(0,e.jsx)(_e.Z,{title:r?.question,items:a,vertical:!0,onItemClick:C})}):(0,e.jsx)("div",{className:"qa-question-style",children:r?.question})}),(0,e.jsx)(he.Z,{value:i,onChange:y,onSubmit:S})]})},er=function(n){var t=n.config,r=n.loading,a=n.options,i=t.body,u=t.headers,o=t.queries;return(0,e.jsxs)(e.Fragment,{children:[i&&i.length>0&&(0,e.jsx)(an,{items:i,loading:r,options:a}),u&&u.length>0&&(0,e.jsx)(an,{items:u,loading:r,options:a}),o&&o.length>0&&(0,e.jsx)(an,{items:o,loading:r,options:a}),!(i!=null&&i.length)&&!(u!=null&&u.length)&&!(o!=null&&o.length)&&(0,e.jsx)(pn.Z,{description:"\u672C\u6B21\u8BD5\u8FD0\u884C\u65E0\u9700\u8F93\u5165"})]})},nr=function(n){var t=n.type,r=n.config,a=n.loading,i=n.options,u=r.inputArgs;return(0,e.jsxs)(e.Fragment,{children:[t!==N.C8.HTTPRequest&&(u&&u.length?(0,e.jsx)(an,{items:u,loading:a,options:i}):(0,e.jsx)(pn.Z,{description:"\u672C\u6B21\u8BD5\u8FD0\u884C\u65E0\u9700\u8F93\u5165"})),t===N.C8.HTTPRequest&&(0,e.jsx)(er,{config:r,loading:a,options:i})]})},tr=function(n){var t=n.form,r=n.value,a=n.config,i=a.inputArgs;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"collapse-title-style dis-left",children:"\u8F93\u5165"}),i?.map(function(u){return(0,e.jsx)(ye.Z,{prefix:ht(u.name+":",20),value:(0,se.E4)(t.getFieldValue(u.name),u?.dataType||""),disabled:!0,className:"mb-12 override-input-style"},u.name)}),(0,e.jsx)("p",{className:"collapse-title-style dis-left",children:"\u8F93\u51FA"}),(0,e.jsx)("pre",{className:"result-style overflow-y",children:r})]})},ar=function(n){var t=n.node,r=n.run,a=n.loading,i=n.testRunResult,u=n.clearRunResult,o=n.stopWait,y=n.formItemValue,S=n.testRunParams,C=(0,we.useModel)("model"),m=C.testRun,p=C.setTestRun,l=(0,we.useModel)("workflow"),j=l.referenceList,w=l.storeWorkflow,d=I.Z.useForm(),D=z()(d,1),g=D[0],f=(0,s.useState)([]),c=z()(f,2),A=c[0],k=c[1],P=function(q){w("testRunValues",(0,Be.Xh)(q));var te=(0,Be.Xh)(q);if(q&&JSON.stringify(q)!=="{}"){if(t.nodeConfig.inputArgs&&t.nodeConfig.inputArgs.length){var Y=function(De){if(Object.prototype.hasOwnProperty.call(q,De)){var ue,re,ee=t.nodeConfig.inputArgs.find(function(J){return J.name===De});if(ee&&(ue=ee.dataType)!==null&&ue!==void 0&&ue.includes("File"))te[De]=(0,se.wJ)(q[De],ee.dataType);else if(ee&&(ee.dataType==="Object"||(re=ee.dataType)!==null&&re!==void 0&&re.includes("Array")))try{te[De]=JSON.parse(q[De])}catch(J){console.error("JSON \u89E3\u6790\u5931\u8D25:",J)}}};for(var ie in q)Y(ie)}else if(t.type===N.C8.HTTPRequest){var de=[].concat(H()(t.nodeConfig.body||[]),H()(t.nodeConfig.queries||[]),H()(t.nodeConfig.headers||[])),ge=function(De){if(Object.prototype.hasOwnProperty.call(q,De)){var ue,re=de?.find(function(ee){return ee.name===De});if(re&&(re.dataType==="Object"||(ue=re.dataType)!==null&&ue!==void 0&&ue.includes("Array")))try{te[De]=JSON.parse(q[De])}catch(ee){console.error("JSON \u89E3\u6790\u5931\u8D25:",ee)}}};for(var Ke in q)ge(Ke)}r(t.type,te)}else r(t.type)},Z=[{key:"inputArgs",label:"\u8BD5\u8FD0\u884C\u8F93\u5165",children:(0,e.jsxs)(I.Z,{form:g,layout:"vertical",onFinish:P,className:"test-run-form",children:[(0,e.jsxs)("div",{className:"dis-left",children:[(0,se.qM)(t.type),(0,e.jsx)("span",{style:{marginLeft:"10px"},children:t.name})]}),nr({loading:a,type:t.type,config:t.nodeConfig,options:j})]})}].concat(H()(i?[{key:"outputArgs",label:"\u8FD0\u884C\u7ED3\u679C",children:tr({form:g,config:t.nodeConfig,value:i})}]:[])),T=function(q){r("Start",{answer:q})},V=(0,s.useState)(""),L=z()(V,2),R=L[0],U=L[1];return(0,s.useEffect)(function(){if(o){var ne=(S?.options||[]).map(function(q){return{key:q.uuid,description:q.content}});k(ne)}},[m,o]),(0,s.useEffect)(function(){var ne=JSON.parse(JSON.stringify(y||{}));if(t.type===N.C8.HTTPRequest&&JSON.stringify(ne)!=="{}"){for(var q in ne)typeof ne[q]!="string"&&ne[q]!==null&&(ne[q]=JSON.stringify(ne[q]));g.setFieldsValue(ne)}},[y]),m?(0,e.jsx)("div",{className:"test-run-style",style:{display:"flex",paddingTop:"100px"},children:(0,e.jsxs)("div",{className:"test-content-style dis-col ",children:[(0,e.jsxs)("div",{className:"test-run-header dis-sb",children:[(0,e.jsx)("span",{children:"\u8BD5\u8FD0\u884C"}),(0,e.jsx)(Dn.Z,{className:"cursor-pointer",onClick:function(){p(!1),u()}})]}),!o&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"collapse-item-style flex-1 ",children:(0,e.jsx)(Xe.Z,{items:Z,ghost:!0,defaultActiveKey:["inputArgs","outputArgs"]})}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(Je.Z,{}),type:"primary",onClick:function(){g.submit()},loading:a,className:"mt-16",children:"\u8FD0\u884C"})]}),o&&(0,e.jsx)(qa,{params:S,items:A,answerType:t.nodeConfig.answerType,onAnswer:T,onChange:function(q){U(q)},onSubmit:function(){T(R),U("")}})]})}):null},rr=ar,ir=E(27791),on=E(59934),Ze=E(27687),sr=function(n){(0,s.useEffect)(function(){var t=function(a){(a.ctrlKey||a.metaKey)&&a.key.toLowerCase()==="s"&&(a.preventDefault(),n&&n())};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}},[n])},or=sr,lr=E(76571);function aa(x,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.leading,a=r===void 0?!0:r,i=t.trailing,u=i===void 0?!0:i,o=(0,s.useRef)(null),y=(0,s.useCallback)(function(){o.current||(o.current=(0,Vn.throttle)(function(){x.apply(void 0,arguments)},n,{leading:a,trailing:u})),o.current.apply(o,arguments)},[x,n,a,u]);return y}function ur(x){var n=x.run,t=x.doNext,r=x.delay,a=r===void 0?500:r,i=(0,we.useModel)("workflow"),u=i.isModified,o=i.setUpdateLoading,y=(0,s.useRef)(!1),S=(0,s.useRef)(!0),C=(0,s.useRef)(0),m=(0,s.useCallback)(X()(_()().mark(function l(){var j;return _()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(j=++C.current,console.log("\u{1F504} useModifiedSaveUpdate: \u8282\u6D41\u6267\u884C\u4FDD\u5B58 [\u7B2C".concat(j,"\u6B21]")),S.current){d.next=4;break}return d.abrupt("return");case 4:if(!y.current){d.next=7;break}return console.log("\u23F8\uFE0F useModifiedSaveUpdate: \u4FDD\u5B58\u6B63\u5728\u8FDB\u884C\u4E2D\uFF0C\u8DF3\u8FC7\u672C\u6B21\u8C03\u7528"),d.abrupt("return");case 7:return d.prev=7,y.current=!0,console.log("\u2705 useModifiedSaveUpdate: \u5F00\u59CB\u6267\u884C\u4FDD\u5B58\u64CD\u4F5C"),o(!0),d.next=13,n();case 13:t?.(),console.log("\u{1F389} useModifiedSaveUpdate: \u4FDD\u5B58\u6210\u529F\u5B8C\u6210"),d.next=20;break;case 17:d.prev=17,d.t0=d.catch(7),console.error("\u274C useModifiedSaveUpdate: \u4FDD\u5B58\u5931\u8D25",d.t0);case 20:return d.prev=20,o(!1),y.current=!1,d.finish(20);case 24:case"end":return d.stop()}},l,null,[[7,17,20,24]])})),[n,t,o]),p=aa(function(){return console.log("\u{1F680} useModifiedSaveUpdate: \u8282\u6D41\u51FD\u6570\u88AB\u8C03\u7528"),m()},a,{leading:!0,trailing:!0});(0,s.useEffect)(function(){console.log("\u{1F4DD} useModifiedSaveUpdate: isModified \u72B6\u6001\u53D8\u5316 =",u),u&&S.current&&(console.log("\u26A1 useModifiedSaveUpdate: \u89E6\u53D1\u8282\u6D41\u4FDD\u5B58\u51FD\u6570"),p())},[u,p]),(0,s.useEffect)(function(){return S.current=!0,console.log("\u{1F517} useModifiedSaveUpdate: Hook \u521D\u59CB\u5316\u5B8C\u6210"),function(){console.log("\u{1F9F9} useModifiedSaveUpdate: \u6E05\u7406 Hook \u72B6\u6001"),S.current=!1,y.current=!1}},[])}var Ye=E(96861),Se=E(64799),ce=E(9051),ra=E(95468),Fe=E(74286),dr=function(){var x=X()(_()().mark(function n(t){var r,a,i,u,o,y,S,C,m,p,l,j,w;return _()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(r=t.type,a=t.targetId,i=t.sourceNode,u=t.id,o=t.graphUpdateNode,y=t.graphDeleteEdge,S=t.callback,C=i.nextNodeIds===null?[]:i.nextNodeIds,m=(0,Be.Xh)(C),p=String(i.id),l={nodeId:H()(C),sourceId:Number(i.id)},j=r===ce.I3.created,!j){D.next=14;break}if(!C.includes(Number(a))){D.next=11;break}return D.abrupt("return",!1);case 11:l.nodeId.push(Number(a));case 12:D.next=15;break;case 14:r===ce.I3.deleted&&(l.nodeId=l.nodeId.filter(function(g){return Number(g)!==Number(a)}));case 15:return o(p,h()(h()({},i),{},{nextNodeIds:H()(l.nodeId)})),D.prev=16,D.next=19,Ye.ZP.apiAddEdge(l);case 19:if(w=D.sent,w.code===on.ZP.success){D.next=26;break}return o(p,h()(h()({},i),{},{nextNodeIds:m})),j&&y(String(u)),D.abrupt("return",!1);case 26:return S?.(),D.abrupt("return",l.nodeId);case 28:D.next=35;break;case 30:return D.prev=30,D.t0=D.catch(16),console.error("Failed to add edge:",D.t0),o(p,h()(h()({},i),{},{nextNodeIds:m})),D.abrupt("return",!1);case 35:case"end":return D.stop()}},n,null,[[16,30]])}));return function(t){return x.apply(this,arguments)}}(),lt=E(46534),ia=E(24573),xt=E(41249),sa=E(56555),ut=E(73415),Ot=E(3790),cr=E(67130),zn=E(7010),pr=E(18505),vr=function(n){var t=n.marginRight,r=n.title,a=n.inputFieldName,i=n.placeholder,u=n.visible,o=n.onClose;return(0,e.jsxs)("div",{className:"expand-textarea",style:{display:u?"block":"none",right:t},children:[(0,e.jsxs)("div",{className:"expand-textarea-header dis-sb",children:[(0,e.jsx)("div",{className:"expand-textarea-header-title",children:r}),(0,e.jsx)("div",{className:"dis-left mg",children:(0,e.jsx)(cr.ZP,{button:{className:"gradient-button"},children:(0,e.jsx)(zn.Z,{children:(0,e.jsx)(Dn.Z,{onClick:function(){return o()},className:"cursor-pointer"})})})})]}),(0,e.jsx)(pr.l0.Item,{name:a,className:"expand-textarea-pre-style",children:(0,e.jsx)(ye.Z.TextArea,{placeholder:i,className:"no-resize-textarea"})})]})},fr=vr,gr=function(n){var t=n.title,r=n.inputFieldName,a=n.placeholder,i=n.rows,u=i===void 0?3:i,o=n.onExpand,y=n.onOptimize,S=n.onOptimizeClick,C=(0,s.useState)(""),m=z()(C,2),p=m[0],l=m[1],j=(0,we.useModel)("workflow"),w=j.setExpanded,d=j.expanded;return(0,s.useEffect)(function(){return l((0,Ee.Z)()),function(){l(""),w("")}},[]),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style gap-6 flex items-center",children:t}),(0,e.jsxs)("div",{children:[y&&S&&(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(ut.pL,{}),size:"small",style:{marginRight:"6px"},onClick:function(){return S()}}),o&&(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(Ot.Z,{}),size:"small",onClick:function(){return w(p)}})]})]}),(0,e.jsx)(I.Z.Item,{name:r,children:(0,e.jsx)(ye.Z.TextArea,{placeholder:a,autoSize:{minRows:u,maxRows:u}})}),d&&d===p&&(0,e.jsx)(fr,{title:t,inputFieldName:r,marginRight:370+12*2,placeholder:a,visible:d===p,onClose:function(){return w("")}})]})},Ct=gr,Mt=E(13143),It=E(29328),mr=function(n){var t=n.showCheck,r=n.isBody;return(0,e.jsxs)("div",{className:"dis-left font-12 mb-6 font-color-gray07",children:[(0,e.jsx)("span",{className:"flex-1 ",children:"\u53D8\u91CF\u540D"}),(0,e.jsx)("span",{style:{width:80+(t?60:50)+(r?62:0)},children:"\u53D8\u91CF\u7C7B\u578B"})]})},hr=mr,En=E(44689),gn=E(16621),$e=E(17701),xr=function(n){var t=n.title,r=n.form,a=n.notShowTitle,i=n.showAddButton,u=n.onAddRoot,o=n.onChange;return(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:(0,e.jsx)("span",{children:t})}),(0,e.jsxs)("div",{children:[a&&(0,e.jsx)(I.Z.Item,{name:"outputType",noStyle:!0,children:(0,e.jsx)($e.default,{prefix:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(Re.Z,{align:{offset:[-12,-12]},content:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"\u6587\u672C: \u4F7F\u7528\u666E\u901A\u6587\u672C\u683C\u5F0F\u56DE\u590D"}),(0,e.jsx)("li",{children:"Markdown: \u5C06\u5F15\u5BFC\u6A21\u578B\u4F7F\u7528 Markdown \u683C\u5F0F\u8F93\u51FA\u56DE\u590D"}),(0,e.jsx)("li",{children:"JSON: \u5C06\u5F15\u5BFC\u6A21\u578B\u4F7F\u7528 JSON \u683C\u5F0F\u8F93\u51FA"})]}),children:(0,e.jsx)(En.Z,{})}),(0,e.jsx)("span",{className:"ml-10",children:"\u8F93\u51FA\u683C\u5F0F"})]}),options:[{label:"\u6587\u672C",value:"Text"},{label:"Markdown",value:"Markdown"},{label:"JSON",value:"JSON"}],style:{width:"calc(100% - ".concat(i?34:0,"px)")},onChange:function(S){r.setFieldValue("outputType",S),S!=="JSON"&&(o([{key:(0,Ee.Z)(),name:"output",description:"\u8F93\u51FA\u7ED3\u679C",dataType:N.Gi.String,require:!1,systemVariable:!1,bindValueType:"Input",bindValue:""}]),r.submit())}})}),i&&(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(gn.Z,{}),size:"small",onClick:u,className:"ml-10",type:"text"})]})]})},Cr=xr,Ue=E(48512),Vt=E(21514),qn=E(86743),oa=E(28246),Qn=E(68108),Ut=E(43898),la=(0,s.memo)(function(x){var n=x.nodeData,t=x.form,r=x.showCheck,a=x.isNotAdd,i=x.onUpdateField,u=x.onAddChild,o=x.onDelete,y=x.onUpdateRequire,S=[N.Gi.Object,N.Gi.Array_Object].includes(n.dataType),C=(0,Nn.n3)(n.dataType||void 0),m=I.Z.useWatch("outputType",{form:t,preserve:!0});return(0,e.jsxs)("div",{className:"dis-left",style:{width:"100%"},children:[(0,e.jsx)("div",{className:"flex-1",style:{position:"relative",marginRight:"6px"},children:(0,e.jsx)(ye.Z,{defaultValue:n.name,onBlur:function(l){return i(n.key,"name",l.target.value)},disabled:n.systemVariable,placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0",className:"tree-form-name flex-1",style:{backgroundColor:n.systemVariable?"#f5f5f5":void 0}},n.key)}),(0,e.jsx)("div",{style:{width:"80px",position:"relative"},children:(0,e.jsx)(oa.Z,{allowClear:!1,options:Ue.DJ,defaultValue:C,onChange:function(l){i(n.key,"dataType",(0,Nn.$g)(l))},changeOnSelect:!0,disabled:n.systemVariable||!a&&m==="Text"||m==="Markdown"||n.subArgs&&n.subArgs.length>0,placement:"bottomRight",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",style:{width:"100%",backgroundColor:n.systemVariable?"#f5f5f5":void 0},className:"tree-form-name",size:"small"})}),(0,e.jsxs)("div",{className:"nested-form-icon-button",style:{width:r?60:48},children:[S&&(0,e.jsx)(Qn.Z,{title:"\u65B0\u589E\u5B50\u8282\u70B9",children:(0,e.jsx)(le.ZP,{type:"text",className:"tree-icon-style",onClick:function(l){l.stopPropagation(),u(n.key)},icon:(0,e.jsx)(ut.Em,{})})}),(0,e.jsx)(Re.Z,{content:(0,e.jsx)(ye.Z.TextArea,{defaultValue:n.description||"",onBlur:function(l){return i(n.key,"description",l.target.value)},rows:3},n.key),trigger:"click",children:(0,e.jsx)(Qn.Z,{title:"\u6DFB\u52A0\u63CF\u8FF0",children:(0,e.jsx)(le.ZP,{type:"text",className:"tree-icon-style",disabled:n.systemVariable,icon:(0,e.jsx)(Vt.Z,{})})})}),r&&(0,e.jsx)(Qn.Z,{title:"\u662F\u5426\u5FC5\u987B",children:(0,e.jsx)(Ut.Z,{checked:n.require,onChange:function(l){return y(n,l.target.checked)},disabled:n.systemVariable})}),(0,e.jsx)(Qn.Z,{title:"\u5220\u9664",children:(0,e.jsx)(le.ZP,{type:"text",disabled:n.systemVariable,className:"tree-icon-style",onClick:function(){return o(n.key)},icon:(0,e.jsx)(qn.Z,{})})})]})]})},function(x,n){var t;return((t=n.nodeData.subArgs)===null||t===void 0?void 0:t.length)===0?!1:x.nodeData.key===n.nodeData.key&&x.nodeData.name===n.nodeData.name&&x.nodeData.dataType===n.nodeData.dataType&&x.nodeData.require===n.nodeData.require&&x.nodeData.systemVariable===n.nodeData.systemVariable&&x.nodeData.description===n.nodeData.description&&x.nodeData.subArgs===n.nodeData.subArgs&&x.showCheck===n.showCheck&&x.isNotAdd===n.isNotAdd});la.displayName="TreeNodeTitle";var yr=la,St=E(62237),Nr=E(58176),qo=E(15457),jr=function(n){var t=n.placeholder,r=n.data,a=n.style,i=n.isDisabled,u=i===void 0?!1:i,o=n.referenceType,y=o===void 0?"Reference":o,S=n.value,C=n.onChange,m=(0,we.useModel)("workflow"),p=m.getValue,l=m.setIsModified,j=(0,s.useState)(""),w=z()(j,2),d=w[0],D=w[1],g=function(T,V,L){C?.(T,V,L),D(T),l(!0)};(0,s.useEffect)(function(){if(y==="Reference"&&S){var Z=S&&r.argMap[S];D(Z?p(S):"")}else D(S||"")},[S,r.argMap,y]);var f=function(){g("","Input",N.Gi.String),D("")},c=function(T){return(0,e.jsxs)("div",{className:"tree-custom-title-style",children:[(0,e.jsx)("span",{title:"",children:T.name}),(0,e.jsx)(Re.Z,{content:T.description||"\u6682\u65E0\u63CF\u8FF0",children:(0,e.jsx)(En.Z,{title:"",style:{marginLeft:"4px"}})}),(0,e.jsx)(nn.Z,{className:"ml-20",color:"#C9CDD4",children:T.dataType})]})},A=function(T){var V;if(T[0]){var L=T[0].toString(),R=r==null||(V=r.argMap)===null||V===void 0||(V=V[L])===null||V===void 0?void 0:V.dataType;g(L,"Reference",R),D(p(L))}},k=function(T){if(T&&T.length){var V=!1;return T.map(function(L){return{key:L.id,label:L.name.length>8?L.name.slice(0,8)+"...":L.name,icon:(0,se.qM)(L.type),popupClassName:"inputOrReferencePopup",children:L.outputArgs?[{key:"".concat(L.id,"-tree-select"),label:(0,e.jsx)("div",{style:{paddingTop:12,paddingRight:12,paddingBottom:8},onClick:function(U){V||(U.stopPropagation(),U.preventDefault())},children:(0,e.jsx)(It.Z,{onSelect:function(U){A(U),V=!0},defaultExpandAll:!0,treeData:L.outputArgs,fieldNames:{title:"name",key:"key",children:"children"},blockNode:!0,showIcon:!0,titleRender:c,className:"custom-tree-style"})})}]:void 0}})}else return[{key:"no-data",popupClassName:"inputOrReferencePopup",label:(0,e.jsx)("div",{style:{padding:8,color:"red"},children:"\u672A\u6DFB\u52A0\u4E0A\u7EA7\u8282\u70B9\u8FDE\u7EBF\u6216\u4E0A\u7EA7\u8282\u70B9\u65E0\u53C2\u6570"}),disabled:!0}]},P=function(){return k(r.previousNodes)};return(0,e.jsxs)("div",{className:"input-or-reference dis-sb",style:a,children:[y==="Reference"&&d!==""?(0,e.jsx)(nn.Z,{closable:!0,onClose:f,className:"input-or-reference-tag text-ellipsis",color:"#C9CDD4",children:d.length>10?(0,e.jsx)(Re.Z,{content:d,placement:"topRight",children:(0,e.jsx)("span",{className:"tag-text-style",children:d})}):(0,e.jsx)("span",{className:"tag-text-style",children:d})}):(0,e.jsx)(ye.Z,{placeholder:t||"\u8BF7\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570",style:{marginRight:8},size:"small",disabled:u,value:d,onChange:function(T){g(T.target.value,"Input",N.Gi.String)}}),(0,e.jsx)(Nr.Z,{menu:{items:P()},trigger:["click"],overlayStyle:{minWidth:200},placement:"bottomRight",children:(0,e.jsx)(St.Z,{style:{cursor:"pointer"},className:"input-reference-icon-style"})})]})},ua=jr,da=(0,s.memo)(function(x){var n=x.nodeData,t=x.showCheck,r=x.onUpdateField,a=x.onAddChild,i=x.onDelete,u=x.onUpdateRequire,o=[N.Gi.Object,N.Gi.Array_Object].includes(n.dataType)&&n.bindValueType==="Input"&&!n.bindValue,y=(0,Nn.n3)(n.dataType||void 0),S=(0,we.useModel)("workflow"),C=S.referenceList;return(0,e.jsxs)("div",{className:"dis-left",style:{width:"100%"},children:[(0,e.jsx)("div",{className:"flex-1",style:{position:"relative",marginRight:"6px"},children:(0,e.jsx)(ye.Z,{defaultValue:n.name,onBlur:function(p){return r(n.key,"name",p.target.value)},disabled:n.systemVariable,placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0",className:"tree-form-name flex-1",style:{backgroundColor:n.systemVariable?"#f5f5f5":void 0}},n.key)}),(0,e.jsx)("div",{style:{width:"40px",position:"relative"},children:(0,e.jsx)(oa.Z,{allowClear:!1,options:Ue.DJ,value:y,onChange:function(p){r(n.key,"dataType",(0,Nn.$g)(p))},changeOnSelect:!0,placement:"bottomRight",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",style:{width:"100%",backgroundColor:"#f5f5f5"},className:"tree-form-name is-body-cascader",size:"small"})}),(0,e.jsx)("div",{style:{width:"100px",marginLeft:"6px",position:"relative"},children:(0,e.jsx)(ua,{referenceType:n.bindValueType,data:C,value:n.bindValue,onChange:function(p,l){r(n.key,"bindValue",p,l)}})}),(0,e.jsxs)("div",{className:"nested-form-icon-button",style:{width:t?60:48},children:[o&&(0,e.jsx)(Qn.Z,{title:"\u65B0\u589E\u5B50\u8282\u70B9",children:(0,e.jsx)(le.ZP,{type:"text",className:"tree-icon-style",onClick:function(p){p.stopPropagation(),a(n.key)},icon:(0,e.jsx)(ut.Em,{})})}),(0,e.jsx)(Re.Z,{content:(0,e.jsx)(ye.Z.TextArea,{defaultValue:n.description||"",onBlur:function(p){return r(n.key,"description",p.target.value)},rows:3},n.key),trigger:"click",children:(0,e.jsx)(Qn.Z,{title:"\u6DFB\u52A0\u63CF\u8FF0",children:(0,e.jsx)(le.ZP,{type:"text",className:"tree-icon-style",disabled:n.systemVariable,icon:(0,e.jsx)(Vt.Z,{})})})}),t&&(0,e.jsx)(Qn.Z,{title:"\u662F\u5426\u5FC5\u987B",children:(0,e.jsx)(Ut.Z,{checked:n.require,onChange:function(p){return u(n,p.target.checked)},disabled:n.systemVariable})}),(0,e.jsx)(Qn.Z,{title:"\u5220\u9664",children:(0,e.jsx)(le.ZP,{type:"text",disabled:n.systemVariable,className:"tree-icon-style",onClick:function(){return i(n.key)},icon:(0,e.jsx)(qn.Z,{})})})]})]})},function(x,n){var t;return((t=n.nodeData.subArgs)===null||t===void 0?void 0:t.length)===0?!1:x.nodeData.key===n.nodeData.key&&x.nodeData.name===n.nodeData.name&&x.nodeData.dataType===n.nodeData.dataType&&x.nodeData.require===n.nodeData.require&&x.nodeData.systemVariable===n.nodeData.systemVariable&&x.nodeData.bindValue===n.nodeData.bindValue&&x.nodeData.bindValueType===n.nodeData.bindValueType&&x.nodeData.description===n.nodeData.description&&x.nodeData.subArgs===n.nodeData.subArgs&&x.showCheck===n.showCheck});da.displayName="TreeNodeTitleBody";var Er=da,br=E(335),et=E.n(br),Fr=function(n,t){var r=(0,we.useModel)("workflow"),a=r.setIsModified,i=(0,s.useRef)(n),u=(0,s.useCallback)(function(m,p){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],j=et()(m),w;try{for(j.s();!(w=j.n()).done;){var d=w.value,D=[].concat(H()(l),[d]);if(d.key===p)return D;if(d.subArgs){var g=u(d.subArgs,p,D);if(g)return g}}}catch(f){j.e(f)}finally{j.f()}return null},[]),o=(0,s.useCallback)(function(m){var p=h()(h()({},m),{},{require:!1});return m.subArgs&&(p.subArgs=m.subArgs.map(function(l){return o(l)})),p},[]),y=(0,s.useCallback)(function(m,p,l){return l>p.length?m:m.map(function(j){if(j.key===p[l].key){var w=h()(h()({},j),{},{require:!0});return l<p.length-1&&j.subArgs?h()(h()({},w),{},{subArgs:y(j.subArgs,p,l+1)}):w}return j})},[]),S=(0,s.useCallback)(function(m,p){return m.map(function(l){return l.key===p.key?p:l.subArgs?h()(h()({},l),{},{subArgs:S(l.subArgs,p)}):l})},[]),C=(0,s.useCallback)(function(){var m=X()(_()().mark(function p(l,j){var w,d,D;return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!j){f.next=7;break}if(d=u(i.current,l.key),d){f.next=4;break}return f.abrupt("return");case 4:w=y(i.current,d,0),f.next=9;break;case 7:D=o(l),w=S(i.current,D);case 9:t(w),a(!0);case 11:case"end":return f.stop()}},p)}));return function(p,l){return m.apply(this,arguments)}}(),[i.current,u,y,o,S,t,a]);return(0,s.useEffect)(function(){return i.current=n,function(){i.current=[]}},[n]),(0,s.useMemo)(function(){return{updateRequireStatus:C}},[C,n,t,a])},Ir=function x(n,t,r,a,i,u){return n.map(function(o){if(o.key===t){var y=h()(h()({},o),{},tn()(tn()({},r,a),"bindValueType",i||o.bindValueType));return u&&(y.dataType=u),y}return o.subArgs?h()(h()({},o),{},{subArgs:x(o.subArgs,t,r,a,i,u)}):o})},Sr=function x(n,t){return n.filter(function(r){return r.key===t?!1:(r.subArgs&&(r.subArgs=x(r.subArgs,t)),!0)})},Ar=function x(n,t,r){return n.map(function(a){return a.key===t?h()(h()({},a),{},{subArgs:[].concat(H()(a.subArgs||[]),[r])}):a.subArgs?h()(h()({},a),{},{subArgs:x(a.subArgs,t,r)}):a})},ca=function x(n){return n.map(function(t){var r=h()(h()({},t),{},{key:t.key||(0,Ee.Z)()});return r.subArgs&&r.subArgs.length>0&&(r.subArgs=x(r.subArgs)),r})},Dr=function(n,t,r){var a=(0,s.useState)([]),i=z()(a,2),u=i[0],o=i[1],y=(0,s.useState)([]),S=z()(y,2),C=S[0],m=S[1],p=(0,we.useModel)("workflow"),l=p.setIsModified;(0,s.useEffect)(function(){var P=n?ca((0,Be.Xh)(n)):[];o(P)},[]);var j=(0,s.useCallback)(function(P){return t.setFieldValue(r,P),l(!0),P},[t,r,l]),w=(0,s.useCallback)(function(P,Z){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,V=et()(P),L;try{for(V.s();!(L=V.n()).done;){var R=L.value;if(R.key===Z)return T;if(R.subArgs){var U=w(R.subArgs,Z,T+1);if(U)return U}}}catch(ne){V.e(ne)}finally{V.f()}return 0},[]),d=(0,s.useCallback)(function(P){var Z=[];return P.forEach(function(T){T.subArgs&&T.subArgs.length>0&&(Z.push(T.key),Z.push.apply(Z,H()(d(T.subArgs))))}),Z},[]),D=(0,s.useCallback)(function(P){var Z=ca(P);o(Z),j(Z)},[j]),g=(0,s.useCallback)(function(){var P={key:(0,Ee.Z)(),name:"",description:"",dataType:N.Gi.String,require:!1,systemVariable:!1,bindValueType:"Input",bindValue:""};o(function(Z){var T=[].concat(H()(Z),[P]);return j(T)})},[j]),f=(0,s.useCallback)(function(P){o(function(Z){var T=w(Z,P);if(T>=4)return Z;var V={key:(0,Ee.Z)(),name:"",description:null,dataType:N.Gi.String,require:!1,systemVariable:!1,bindValueType:"Input",bindValue:""},L=Ar(Z,P,V);return j(L)}),m(function(Z){return Array.from(new Set([].concat(H()(Z),[P])))})},[w,j]),c=(0,s.useCallback)(function(P){o(function(Z){var T=Sr(Z,P);return j(T)})},[j]),A=(0,s.useCallback)(function(P,Z,T,V,L){o(function(R){var U=Ir(R,P,Z,T,V,L);return j(U)})},[j]),k=(0,s.useMemo)(function(){return d(u)},[u,d]);return(0,s.useEffect)(function(){m(k)},[k]),(0,s.useMemo)(function(){return{treeData:u,expandedKeys:C,setExpandedKeys:m,addRootNode:g,addChildNode:f,deleteNode:c,updateNodeField:A,getNodeDepth:w,updateTreeData:D}},[u,C,m,g,f,c,A,w,D])},pa=function(n){var t=n.params,r=n.form,a=n.title,i=n.inputItemName,u=i===void 0?"inputArgs":i,o=n.notShowTitle,y=n.showCheck,S=n.isBody,C=n.isNotAdd,m=Dr(t,r,u),p=m.treeData,l=m.expandedKeys,j=m.setExpandedKeys,w=m.addRootNode,d=m.addChildNode,D=m.deleteNode,g=m.updateNodeField,f=m.updateTreeData,c=Fr(p,f),A=c.updateRequireStatus,k=(0,s.useCallback)(w,[w]),P=(0,s.useCallback)(function(T,V){return S?(0,e.jsx)(Er,{nodeData:T,showCheck:y,onUpdateField:g,onAddChild:d,onDelete:D,onUpdateRequire:A}):(0,e.jsx)(yr,{nodeData:T,form:r,showCheck:y,isNotAdd:C,onUpdateField:g,onAddChild:d,onDelete:D,onUpdateRequire:A},"treeNodeTitle-".concat(T.key||V))},[S,y,r,C,g,d,D,A]),Z=!C&&(!o||r.getFieldValue("outputType")==="JSON");return(0,e.jsxs)("div",{children:[(0,e.jsx)(Cr,{title:a,form:r,notShowTitle:o,showAddButton:Z,onChange:function(V){return f(V)},onAddRoot:k}),p&&p.length>0&&(0,e.jsx)(hr,{showCheck:y,isBody:S}),(0,e.jsx)(It.Z,{switcherIcon:(0,e.jsx)(Mt.Z,{}),defaultExpandAll:!0,defaultExpandParent:!0,blockNode:!0,expandedKeys:l,treeData:p,fieldNames:{title:"name",key:"key",children:"subArgs"},onExpand:function(V){return j(V)},titleRender:function(V){return P(V,V.key)},className:"".concat(p.find(function(T){return T.subArgs&&T.subArgs.length>0})?"tree-form-style":"tree-form-style-no-child")})]})};pa.displayName="CustomTree";var nt=pa,Tr=function(n){var t=[{label:"OpenAI",options:[]},{label:"Ollama",options:[]}];return n.forEach(function(r){var a=t.find(function(i){return i.label===r.apiProtocol});a&&a.options.push(r)}),t},wr=E(48939),kr=E(94855),Rr=E(88958),Wt=E(63960),Kt=E(44384),mn=E(6619),Br=function(n){var t=n.item,r=t.icon,a=t.name,i=t.description;return(0,e.jsxs)("div",{className:"dis-left model-list-item-style",children:[(0,e.jsx)("img",{src:r,alt:""}),(0,e.jsxs)("div",{className:"dis-col",children:[(0,e.jsx)("div",{className:"dis-left",children:(0,e.jsx)("span",{className:"model-list-item-label",children:a})}),(0,e.jsx)("span",{className:"model-list-item-desc text-ellipsis-2",children:i})]})]})},Zr=Br,Pr=function(n){var t=n.form,r=n.modelConfig,a=(0,s.useState)([]),i=z()(a,2),u=i[0],o=i[1],y=(0,s.useState)([]),S=z()(y,2),C=S[0],m=S[1],p=(0,s.useState)(!1),l=z()(p,2),j=l[0],w=l[1],d=(0,we.useParams)(),D=d.spaceId,g=function(){var c=X()(_()().mark(function A(){var k;return _()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,w(!0),Z.next=4,Ye.ZP.getModelListByWorkflowId({modelType:"Chat",spaceId:D});case 4:k=Z.sent,o(k.data),m(Tr(k.data)),Z.next=12;break;case 9:Z.prev=9,Z.t0=Z.catch(0),console.error("Failed to fetch graph data:",Z.t0);case 12:return Z.prev=12,w(!1),Z.finish(12);case 15:case"end":return Z.stop()}},A,null,[[0,9,12,15]])}));return function(){return c.apply(this,arguments)}}(),f=function(A){if(t.getFieldValue("modelId")===null)return null;var k=[].concat(H()(u),[r?.id!==void 0?{id:r?.id,name:r?.name}:{}]).find(function(P){return P.id===Number(A.value)});return(0,e.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,e.jsx)("span",{children:k&&k.name||""})})};return(0,s.useEffect)(function(){g()},[]),(0,e.jsx)(I.Z.Item,{name:"modelId",children:(0,e.jsx)($e.default,{placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B",style:{width:"100%",marginTop:"10px"},className:"input-style",labelRender:f,placement:"bottomLeft",popupMatchSelectWidth:!1,loading:j,children:C?.map(function(c,A){return(0,e.jsx)(s.Fragment,{children:c.options.map(function(k,P){return(0,e.jsx)($e.default.Option,{value:k.id,label:(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[k.icon&&(0,e.jsx)("img",{src:k.icon,alt:"",style:{width:"20px",height:"20px",marginRight:"8px"}}),(0,e.jsx)("span",{children:k.name})]}),children:(0,e.jsx)(Zr,{item:k})},"".concat(A,"-").concat(P))})},"model-options-".concat(A))})})})},Lr=[{label:"\u7CBE\u786E\u6A21\u5F0F",value:"Precision"},{label:"\u5E73\u8861\u6A21\u5F0F",value:"Balanced"},{label:"\u521B\u610F\u6A21\u5F0F",value:"Creative"},{label:"\u81EA\u5B9A\u4E49",value:"Customization"}],va={Precision:{temperature:.1,topP:.7,maxTokens:1024},Balanced:{temperature:1,topP:.7,maxTokens:1024},Creative:{temperature:1,topP:.8,maxTokens:1024}},_t=function(n){var t=n.title,r=n.configKey,a=n.content,i=n.min,u=n.max,o=n.step,y=n.form,S=function(m){m!==null&&y.setFieldsValue(tn()(tn()({},r,m),"mode","Customization"))};return(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsxs)("div",{className:"dis-left label-style",children:[(0,e.jsx)("span",{className:"mr-16",children:t}),(0,e.jsx)(mn.Z,{title:a,icon:(0,e.jsx)(En.Z,{})})]}),(0,e.jsx)(I.Z.Item,{style:{marginBottom:"0",flex:1},noStyle:!0,children:(0,e.jsxs)(Rr.Z,{gap:"middle",children:[(0,e.jsx)(I.Z.Item,{name:r,noStyle:!0,children:(0,e.jsx)(Wt.Z,{min:i,max:u,className:"slider-style",step:o,value:y.getFieldValue(r),onChange:S,style:{width:280}})}),(0,e.jsx)(I.Z.Item,{name:r,children:(0,e.jsx)(Yn.Z,{min:i,max:u,step:o,size:"small",style:{margin:"0 16px"},className:"input-style",value:y.getFieldValue(r),onChange:S})})]})})]})},Or=function(n){var t=n.form,r=(0,s.useState)(!0),a=z()(r,2),i=a[0],u=a[1],o=I.Z.useWatch("mode",t),y=function(d){if(d!=="Customization"&&va[d]){var D=va[d],g=D.temperature,f=D.topP,c=D.maxTokens;t.setFieldsValue({temperature:g,topP:f,maxTokens:c,mode:d})}else t.setFieldsValue({mode:"Customization"})},S=(0,s.useState)(4093),C=z()(S,2),m=C[0],p=C[1],l=(0,we.useParams)(),j=l.spaceId;return(0,s.useEffect)(function(){var w=function(){var d=X()(_()().mark(function D(){var g,f,c,A;return _()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return f=t.getFieldsValue(!0),c=f.modelId,P.next=3,Ye.ZP.getModelListByWorkflowId({modelType:"Chat",spaceId:j});case 3:A=P.sent,p(((g=A.data.find(function(Z){return Z.id===c}))===null||g===void 0?void 0:g.maxTokens)||4093);case 5:case"end":return P.stop()}},D)}));return function(){return d.apply(this,arguments)}}();w()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"model-dispose-mode-style",children:[(0,e.jsx)("div",{className:"model-title-style border-bottom",children:"\u6A21\u578B"}),(0,e.jsxs)("div",{className:"dis-sb margin-top-10",children:[(0,e.jsx)("span",{className:"dispose-title-style",children:"\u751F\u6210\u591A\u6837\u6027"}),(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(I.Z.Item,{name:"mode",style:{marginBottom:0},children:(0,e.jsx)(Hn.ZP.Group,{optionType:"button",className:"radio-button-style",options:Lr,onChange:function(d){return y(d.target.value)},value:o,block:!0})}),(0,e.jsxs)("div",{onClick:function(){return u(!i)},className:"right-content-style",children:[(0,e.jsx)("span",{children:"\u9AD8\u7EA7\u8BBE\u7F6E"}),i?(0,e.jsx)(wr.Z,{}):(0,e.jsx)(kr.Z,{})]})]})]}),(0,e.jsxs)("div",{style:{display:i?"block":"none"},children:[(0,e.jsx)(_t,{form:t,min:0,max:1,step:.1,title:"\u751F\u6210\u968F\u673A\u6027",configKey:"temperature",content:"temperature: \u8C03\u9AD8\u6E29\u5EA6\u4F1A\u4F7F\u5F97\u6A21\u578B\u7684\u8F93\u51FA\u66F4\u591A\u6837\u6027\u548C\u521B\u65B0\u6027\uFF0C\u53CD\u4E4B\uFF0C\u964D\u4F4E\u6E29\u5EA6\u4F1A\u4F7F\u8F93\u51FA\u5185\u5BB9\u66F4\u52A0\u9075\u5FAA\u6307\u4EE4\u8981\u6C42\u4F46\u51CF\u5C11\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E 'Top p' \u540C\u65F6\u8C03\u6574\u3002"}),(0,e.jsx)(_t,{form:t,min:0,max:1,step:.1,title:"Top P",configKey:"topP",content:"Top p \u4E3A\u7D2F\u8BA1\u6982\u7387: \u6A21\u578B\u5728\u751F\u6210\u8F93\u51FA\u65F6\u4F1A\u4ECE\u6982\u7387\u6700\u9AD8\u7684\u8BCD\u6C47\u5F00\u59CB\u9009\u62E9\uFF0C\u76F4\u5230\u8FD9\u4E9B\u8BCD\u6C47\u7684\u603B\u6982\u7387\u7D2F\u79EF\u8FBE\u5230 Top p \u503C\u3002\u8FD9\u6837\u53EF\u4EE5\u9650\u5236\u6A21\u578B\u53EA\u9009\u62E9\u8FD9\u4E9B\u9AD8\u6982\u7387\u7684\u8BCD\u6C47\uFF0C\u4ECE\u800C\u63A7\u5236\u8F93\u51FA\u5185\u5BB9\u7684\u591A\u6837\u6027\u3002\u5EFA\u8BAE\u4E0D\u8981\u4E0E '\u751F\u6210\u968F\u673A\u6027' \u540C\u65F6\u8C03\u6574\u3002"})]}),(0,e.jsx)(Kt.Z,{}),(0,e.jsx)("div",{className:"dispose-title-style",children:"\u8F93\u5165\u53CA\u8F93\u51FA\u8BBE\u7F6E"}),(0,e.jsx)(_t,{form:t,min:5,max:m,step:1,title:"\u6700\u5927\u56DE\u590D\u957F\u5EA6",configKey:"maxTokens",content:"\u63A7\u5236\u6A21\u578B\u8F93\u51FA\u7684 Tokens \u957F\u5EA6\u4E0A\u9650\u3002\u901A\u5E38 100 Tokens \u7EA6\u7B49\u4E8E 150 \u4E2A\u4E2D\u6587\u6C49\u5B57\u3002"})]})})},$t=function(n){var t=n.form,r=n.modelConfig;return(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u6A21\u578B"}),(0,e.jsx)(Re.Z,{content:(0,e.jsx)(Or,{form:t}),trigger:"click",placement:"left",children:(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(St.Z,{}),size:"small"})})]}),(0,e.jsx)(Pr,{form:t,modelConfig:r})]})},Mr=E(84720),Vr=E(40677),hn={"xagi-nav-style2":"xagi-nav-style2___N4a9l",text:"text___t3rIt","page-container":"page-container___spPC0","skill-list":"skill-list___myZuC","skill-dispose-modal-style":"skill-dispose-modal-style___vhnmJ","ant-modal-header":"ant-modal-header___xYl_z","ant-modal-content":"ant-modal-content___s2QyI","ant-modal-footer":"ant-modal-footer___zkcBw","skill-item-dispose-mask":"skill-item-dispose-mask___UWhqe","skill-item-container":"skill-item-container___suWbg","skill-item-style":"skill-item-style___Yzmv7","skill-item-icon":"skill-item-icon___bOVOI","skill-item-content-style":"skill-item-content-style___hAIJw","skill-item-title-style":"skill-item-title-style___hdurd","skill-item-desc-style":"skill-item-desc-style___s7EZB","mask-layer-style":"mask-layer-style___c42Qv","skill-params-description":"skill-params-description___NiVJd","skill-dispose-container":"skill-dispose-container___lkRrz","skill-dispose-left":"skill-dispose-left___TfYks","skill-dispose-left-title":"skill-dispose-left-title___C0Eun","skill-menu-style":"skill-menu-style___M8lz5","select-menu":"select-menu___ENzUV","skill-dispose-right":"skill-dispose-right___dSXOM","content-title-style":"content-title-style___hwirH","content-item-style":"content-item-style___iS0xn","content-center-item-style":"content-center-item-style___VjZoq","content-right-item-style":"content-right-item-style___r2QbX","output-style":"output-style___K0ods","output-remark-style":"output-remark-style___IOtW4","tree-title-style":"tree-title-style___Jw5lz",white:"white___ZOJgo","skill-tree":"skill-tree____z6Lg","dis-no-wrap":"dis-no-wrap___vOvTN","database-tag-style":"database-tag-style___SAQdi","background-c9":"background-c9___lgoPg"},At=E(14719),Ur=E(64807),yt={"xagi-nav-style2":"xagi-nav-style2___kiCQ1",text:"text___tfUd4","page-container":"page-container___xbTTe","modal-container":"modal-container___vk9mh",container:"container___O4FsC",left:"left___UJiFa",right:"right___u_Jgi",close:"close___sIdxz"},Dt=me().bind(yt),Wr=function(n){var t=n.open,r=n.inputArgBindConfigs,a=n.variables,i=n.onCancel,u=n.onSave,o=function(S){u(S)};return(0,e.jsx)(At.Z,{centered:!0,open:t,onCancel:i,className:Dt(yt["modal-container"]),modalRender:function(){return(0,e.jsxs)("div",{className:Dt(yt.container,"overflow-hide","flex","flex-col"),children:[(0,e.jsx)("div",{className:Dt("flex-1",yt.right),children:(0,e.jsx)(Ur.Z,{style:{paddingTop:"48px"},variables:a,inputArgBindConfigs:r,onSaveSet:o})}),(0,e.jsx)(Dn.Z,{className:Dt(yt.close,"cursor-pointer"),onClick:i})]})}})},Kr=Wr,rn=me().bind(hn),fa=function(n,t){return n.length>t?n.slice(0,t)+"...":n},_r=function(n){var t=n.params;return(0,e.jsx)("div",{style:{maxWidth:"300px"},children:(t||[]).map(function(r){return(0,e.jsxs)("div",{style:{padding:"3px 0"},children:[(0,e.jsxs)("div",{className:rn("dis-left"),children:[(0,e.jsx)("span",{className:rn("mr-16"),children:fa(r.name,30)}),(0,e.jsx)(nn.Z,{color:"#C9CDD4",children:r.dataType})]}),(0,e.jsx)("p",{className:rn(hn["skill-params-description"]),children:fa(r.description||"",70)})]},r.name)})})},$r=function(n){var t=n.params,r=n.disabled,a=r===void 0?!1:r,i=n.removeItem,u=n.modifyItem,o=n.variables,y=o===void 0?[]:o,S=n.loading,C=S===void 0?!1:S,m=(0,s.useState)(null),p=z()(m,2),l=p[0],j=p[1],w=(0,s.useState)(!1),d=z()(w,2),D=d[0],g=d[1],f=(0,s.useState)(!1),c=z()(f,2),A=c[0],k=c[1],P=function(U){i(U)},Z=function(U){u(h()(h()({},l),{},{inputArgBindConfigs:U.inputArgBindConfigs})),g(!1),j(null)},T=function(U){var ne=U.inputArgBindConfigs,q=(0,Vr.T6)(ne||[]);j(h()(h()({},U),{},{inputArgBindConfigs:q})),g(!0)},V=function(U){return l?.typeId===U.typeId&&(l?.toolName||"")===(U.toolName||"")},L=(0,s.useCallback)(function(R,U){return"".concat(U,"-").concat(R?.type,"-").concat(R?.typeId,"-").concat(R?.toolName||"")},[]);return(0,e.jsxs)("div",{className:rn(hn["skill-list"],"relative"),children:[t.length&&(0,e.jsx)(sa.Z,{spinning:C,delay:200,style:{display:C?"block":"none",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3}})||null,t.map(function(R,U){return(0,e.jsx)("div",{className:rn(hn["skill-item-container"],U===0&&"margin-top-10"),children:(0,e.jsxs)("div",{className:rn(hn["skill-item-style"],"dis-left"),style:{opacity:a?.5:1,cursor:a?"not-allowed":"pointer"},onMouseEnter:function(){j(R),k(!0)},onMouseLeave:function(){return k(!1)},children:[(0,e.jsx)("img",{src:R.icon||(0,se.Pk)(R.targetType),alt:"",className:rn(hn["skill-item-icon"])}),(0,e.jsxs)("div",{className:rn(hn["skill-item-content-style"]),children:[(0,e.jsx)("div",{className:rn(hn["skill-item-title-style"]),children:R.name}),(0,e.jsx)("div",{className:rn(hn["skill-item-desc-style"]),children:R.description})]}),V(R)&&A&&(0,e.jsx)("div",{className:rn(hn["mask-layer-style"]),children:(0,e.jsxs)("div",{className:rn(hn["skill-item-dispose-style"],hn["skill-item-dispose-mask"]),children:[R.inputArgBindConfigs&&R.inputArgBindConfigs.length&&(0,e.jsx)(Re.Z,{content:(0,e.jsx)(_r,{params:R.inputArgBindConfigs}),placement:"right",trigger:"hover",children:(0,e.jsx)(En.Z,{className:rn("white")})}),(0,e.jsx)(Re.Z,{content:"\u7F16\u8F91\u53C2\u6570",trigger:"hover",children:(0,e.jsx)(St.Z,{className:rn("ml-12 cursor-pointer white"),onClick:function(){T(R),g(!0)}})}),!a&&(0,e.jsx)(Re.Z,{content:"\u79FB\u9664",trigger:"hover",children:(0,e.jsx)(qn.Z,{className:rn("ml-12  white"),onClick:function(){return P(R)}})})]})})]})},L(R,"skill"))}),(0,e.jsx)(Kr,{open:D,variables:y,inputArgBindConfigs:l?.inputArgBindConfigs,onSave:Z,onCancel:function(){return g(!1)}},L(l,"setting"))]})},Gt=E(63136),Nt=E(20860),Tt=E(65173),ln=function(n){var t=n.title,r=n.fieldConfigs,a=n.form,i=n.inputItemName,u=i===void 0?"inputArgs":i,o=n.showCopy,y=o===void 0?!1:o,S=n.disabledAdd,C=n.disabledDelete,m=n.disabledInput,p=n.isLoop,l=(0,we.useModel)("workflow"),j=l.volid,w=r.reduce(function(d,D){return d[D.name]=null,d},{});return(0,s.useEffect)(function(){j&&a.validateFields()},[j]),(0,e.jsx)("div",{className:"form-list-style",children:(0,e.jsx)(I.Z.List,{name:u,children:function(D,g){var f=g.add,c=g.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"dis-sb ",children:[(0,e.jsx)("span",{className:"node-title-style gap-6 flex items-center",children:t}),!S&&(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(gn.Z,{}),onClick:function(){return f(w)},size:"small",type:"text"})]}),D.map(function(A,k){var P=a.getFieldValue([u,A.name,"bindValueType"]);return(0,e.jsxs)("div",{children:[k===0&&(0,e.jsxs)("div",{className:"font-color-gray07 font-12 mt-6",children:[(0,e.jsx)("span",{children:"\u53C2\u6570\u540D"}),(0,e.jsx)("span",{style:{marginLeft:"22%"},children:"\u53D8\u91CF\u503C"})]}),(0,e.jsx)(I.Z.Item,{children:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(I.Z.Item,{label:"\u53C2\u6570\u540D",name:[A.name,"name"],noStyle:!0,children:(0,e.jsx)(ye.Z,{size:"small",style:{width:"30%",marginRight:"10px"},placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D",disabled:m})}),(0,e.jsx)(I.Z.Item,{name:[A.name,"bindValue"],noStyle:!0,children:(0,e.jsx)(Tt.Z,{form:a,fieldName:[u,A.name,"bindValue"],style:{flex:1,marginRight:"10px"},referenceType:P,isLoop:p})}),(0,e.jsx)(I.Z.Item,{name:[A.name,"bindType"],noStyle:!0,hidden:!0,children:(0,e.jsx)(ye.Z,{type:"hidden"})}),y&&(0,e.jsx)(Re.Z,{content:(0,e.jsx)(I.Z.Item,{name:[A.name,"description"],noStyle:!0,children:(0,e.jsx)(ye.Z.TextArea,{autoSize:{minRows:3,maxRows:5}})}),trigger:"click",children:(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(Vt.Z,{}),className:"margin-right",size:"small",type:"text"})}),!C&&(0,e.jsx)(I.Z.Item,{name:[A.name,"require"],noStyle:!0,children:(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(qn.Z,{}),size:"small",type:"text",onClick:function(){return c(A.name)}})})]})},A.key)]},A.name)})]})}})})},Gr=function(n){var t=n.title,r=n.inputItemName,a=r===void 0?"conditionArgs":r,i=n.disabledAdd,u=n.disabledDelete,o=n.disabledInput;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.Z.List,{name:a,children:function(S,C){var m=C.add,p=C.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:t}),!i&&(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(gn.Z,{}),size:"small",type:"text",onClick:function(){return m({key:(0,Ee.Z)(),name:"",bindValue:"",dataType:N.Gi.String})}})]}),S.map(function(l,j){return(0,e.jsxs)("div",{children:[j===0&&(0,e.jsxs)("div",{className:"font-color-gray07",children:[(0,e.jsx)("span",{children:"\u53C2\u6570\u540D"}),(0,e.jsx)("span",{style:{marginLeft:"20%"},children:"\u53D8\u91CF\u503C"})]}),(0,e.jsx)(I.Z.Item,{children:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)(I.Z.Item,{label:"\u53C2\u6570\u540D",name:[l.name,"name"],noStyle:!0,children:(0,e.jsx)(ye.Z,{size:"small",style:{width:"30%",marginRight:"10px"},placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D",disabled:o})}),(0,e.jsx)(I.Z.Item,{label:"\u53D8\u91CF\u540D",name:[l.name,"bindValue"],noStyle:!0,children:(0,e.jsx)(ye.Z,{placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u503C",size:"small",style:{width:"55%",marginRight:"10px"}})}),!u&&(0,e.jsx)(I.Z.Item,{noStyle:!0,children:(0,e.jsx)(qn.Z,{onClick:function(){return p(l.name)}})})]})},l.key)]},l.key)})]})}})})},tt=function(n){var t=n.treeData,r=(0,s.useState)([]),a=z()(r,2),i=a[0],u=a[1];(0,s.useEffect)(function(){var y=function S(C){var m=[];return C.forEach(function(p){p.subArgs&&p.subArgs.length>0&&(m.push(p.key),m.push.apply(m,H()(S(p.subArgs))))}),m};u(y(t))},[t]);var o=function y(S){return S.map(function(C){return h()(h()({},C),{},{title:(0,e.jsxs)("span",{children:[C.name," ",(0,e.jsx)(nn.Z,{color:"#C9CDD4",style:{marginLeft:"5px"},children:Xn.zx[C.dataType]})]}),children:C.subArgs?y(C.subArgs):void 0})})};return(0,e.jsx)(It.Z,{showLine:!0,expandedKeys:i,onExpand:function(S){return u(S)},switcherIcon:(0,e.jsx)(Mt.Z,{}),treeData:o(t),defaultExpandAll:!0})},el=function(n){var t=n.options,r=n.placeholder,a=n.onChange,i=function(y){a&&a(y)},u=function(y){return _jsx(Select.Option,{value:y.value,children:_jsxs("span",{className:"option-container",children:[_jsx(Checkbox,{}),_jsx("span",{children:y.label})]})},y.value)};return _jsx(Select,{mode:"multiple",showSearch:!0,placeholder:r,optionLabelProp:"label",onChange:i,filterOption:function(y,S){var C;return S==null||(C=S.props.children)===null||C===void 0?void 0:C.toString().toLowerCase().includes(y.toLowerCase())},dropdownRender:function(y){return _jsx("div",{className:"custom-dropdown",children:React.cloneElement(y,{className:"".concat(y.props.className," custom-menu")})})},tokenSeparators:[","],style:{width:"100%"},children:t.map(u)})},ga=function(n){var t=n.form,r=n.title,a=n.field,i=n.inputItemName,u=i===void 0?"inputArgs":i,o=n.showIndex,y=n.limitAddLength,S=y===void 0?-1:y,C=(0,s.useState)(!1),m=z()(C,2),p=m[0],l=m[1],j=I.Z.useWatch(u,{form:t,preserve:!0});return(0,s.useEffect)(function(){S>-1&&l((j?.length||0)>=S)},[j,t,S]),(0,e.jsx)(I.Z.List,{name:u,children:function(d,D){var g=D.add,f=D.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:r}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(gn.Z,{}),size:"small",type:"text",disabled:p,onClick:function(){var A=t.getFieldValue(u)||[],k=Math.max(0,A.length-1);g(tn()(tn()(tn()(tn()({},a,""),"index",A.length),"nextNodeIds",[]),"uuid",(0,Ee.Z)()),k),t.submit()}})]}),d.map(function(c,A){var k=!1;return t.getFieldValue([u,c.name,"intentType"])==="OTHER"&&(k=!0),t.getFieldValue([u,c.name,"content"])==="\u6B64\u9009\u9879\u7528\u6237\u4E0D\u53EF\u89C1\uFF0C\u7528\u6237\u56DE\u590D\u65E0\u5173\u5185\u5BB9\u65F6\u8D70\u6B64\u5206\u652F"&&(k=!0),(0,e.jsx)(I.Z.Item,{children:(0,e.jsxs)("div",{className:"dis-left",children:[o&&(0,e.jsx)(I.Z.Item,{noStyle:!0,name:[c.name,"index"],children:(0,e.jsx)("span",{className:"mr-16",children:Ze.bQ[A]})}),(0,e.jsx)(I.Z.Item,{name:[c.name,a],className:"flex-1",children:(0,e.jsx)(ye.Z,{disabled:k,onBlur:function(){t.submit()}})}),!k&&d.length>2&&(0,e.jsx)(I.Z.Item,{noStyle:!0,children:(0,e.jsx)(qn.Z,{className:"ml-10",onClick:function(){f(c.name),t.submit()}})})]})},c.name+"_"+Ze.bQ[A])})]})}})},nl=function(n){var t=n.form,r=n.title,a=n.inputItemName;return _jsx(_Fragment,{children:_jsx(Form.List,{name:a,children:function(u){return _jsxs(_Fragment,{children:[_jsx("span",{className:"node-title-style",children:r}),u.map(function(o,y){var S=t.getFieldValue([a,o.name,"bindValueType"]);return _jsxs("div",{children:[y===0&&_jsxs(_Fragment,{children:[_jsx("span",{children:"\u53C2\u6570\u540D"}),_jsx("span",{style:{marginLeft:"25%"},children:"\u53C2\u6570\u503C"})]}),_jsx(Form.Item,{children:_jsxs("div",{className:"dis-left",children:[_jsx(Form.Item,{noStyle:!0,name:[o.name,"bindValue"],children:_jsxs("div",{className:"dis-left node-form-label-style",children:[_jsx("span",{className:"margin-right-6 font-12 form-name-style",children:t.getFieldValue([a,o.name,"name"])}),_jsx(Popover,{placement:"right",content:t.getFieldValue([a,o.name,"description"]),children:_jsx(InfoCircleOutlined,{className:"margin-right-6 font-12"})})]})}),_jsx(Form.Item,{name:[o.name,"bindValue"],noStyle:!0,children:_jsx(InputOrReference,{form:t,fieldName:[a,o.name,"bindValue"],style:{width:"65%"},referenceType:S})})]})},o.key)]},o.name)})]})}})})},Hr=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"PATCH",value:"PATCH"}],zr=[{label:"\u65E0",value:N.lT.OTHER,style:{marginTop:3,marginBottom:3}},{label:"form-data",value:N.lT.FORM_DATA,style:{marginTop:3,marginBottom:3}},{label:"json",value:N.lT.JSON,style:{marginTop:3,marginBottom:3}},{label:"x-www-form-urlencoded",value:N.lT.X_WWW_FORM_URLENCODED,style:{marginTop:3,marginBottom:3}}],Qr=Xn.Ne.filter(function(x){return[Se.qR.Plugin,Se.qR.Workflow,Se.qR.MCP].includes(x.key)}),Jr=function(n){var t=n.form,r=n.id,a=n.nodeConfig,i=n.type,u=(0,s.useState)(!1),o=z()(u,2),y=o[0],S=o[1],C=(0,s.useState)(!1),m=z()(C,2),p=m[0],l=m[1],j=(0,s.useState)([]),w=z()(j,2),d=w[0],D=w[1],g=(0,s.useState)(!1),f=z()(g,2),c=f[0],A=f[1],k=(0,s.useRef)(),P=(0,we.useModel)("workflow"),Z=P.setSkillChange,T=P.setIsModified,V=P.skillChange,L=(0,s.useState)(!1),R=z()(L,2),U=R[0],ne=R[1],q=function(re,ee){var J=re?.map(function(ae){return{type:ae.type,targetId:Number(ae.typeId),status:ee(ae),toolName:ae.toolName||""}})||[];D(J)},te=function(re){var ee=t.getFieldValue(Ze.Fw)||[];re.type=re.targetType,re.typeId=re.targetId,t.setFieldValue(Ze.Fw,ee.concat([re])),T(!0),t.submit(),A(!0)};(0,s.useEffect)(function(){return V?k.current=setTimeout(function(){ne(!0)},300):(clearTimeout(k.current),ne(!1)),function(){clearTimeout(k.current)}},[V]);var Y=function(re){var ee=t.getFieldValue(Ze.Fw);if(ee){var J=ee.filter(function(ae){return!(ae.typeId===re.typeId&&(ae.toolName||"")===(re.toolName||""))});t.setFieldValue(Ze.Fw,J),T(!0),Z(!0)}},ie=function(re){var ee=t.getFieldValue(Ze.Fw);if(ee){var J=ee.map(function(ae){return ae.typeId===re.typeId&&(ae.toolName||"")===(re.toolName||"")?re:ae});t.setFieldValue(Ze.Fw,J),T(!0),Z(!0)}},de=function(){S(!0)},ge=t.getFieldValue(Ze.Fw);(0,s.useEffect)(function(){q(ge,function(){return Se.BQ.Added})},[ge]);var Ke=(I.Z.useWatch(ce.dy.inputArgs,{form:t,preserve:!0})||[]).filter(function(ue){return!["",null,void 0].includes(ue.name)}),xn=(0,s.useCallback)(function(){S(!1),c&&(A(!1),Z(!0),T(!0),t.submit())},[c,t,Z,A,S]),De=t.getFieldValue(Ze.Fw);return(0,e.jsxs)("div",{className:"model-node-style",children:[(0,e.jsx)($t,{form:t,modelConfig:a?.modelConfig}),(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u6280\u80FD"}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(gn.Z,{}),size:"small",onClick:de,type:"text"})]}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return De?(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)($r,{params:De,skillName:Ze.Fw,variables:Ke,form:t,removeItem:Y,modifyItem:ie,loading:U})}):(0,e.jsx)(pn.Z,{})}}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8F93\u5165",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:(0,e.jsxs)(e.Fragment,{children:["\u7CFB\u7EDF\u63D0\u793A\u8BCD",(0,e.jsx)(mn.Z,{title:"\u4E3A\u5BF9\u8BDD\u63D0\u4F9B\u7CFB\u7EDF\u7EA7\u6307\u5BFC\uFF0C\u5982\u8BBE\u5B9A\u4EBA\u8BBE\u548C\u56DE\u590D\u903B\u8F91\u3002",icon:(0,e.jsx)(Nt.Z,{})})]}),inputFieldName:"systemPrompt",onExpand:!0,onOptimize:!0,onOptimizeClick:function(){return l(!0)},placeholder:"\u7CFB\u7EDF\u63D0\u793A\u8BCD\uFF0C\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001 {{\u53D8\u91CF\u540D[\u6570\u7EC4\u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:(0,e.jsxs)(e.Fragment,{children:["\u7528\u6237\u63D0\u793A\u8BCD",(0,e.jsx)(mn.Z,{title:"\u5411\u6A21\u578B\u63D0\u4F9B\u7528\u6237\u6307\u4EE4\uFF0C\u5982\u67E5\u8BE2\u6216\u4EFB\u4F55\u57FA\u4E8E\u6587\u672C\u8F93\u5165\u7684\u63D0\u95EE\u3002",icon:(0,e.jsx)(Nt.Z,{})})]}),inputFieldName:"userPrompt",onExpand:!0,placeholder:"\u7528\u6237\u63D0\u793A\u8BCD\uFF0C\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001 {{\u53D8\u91CF\u540D[\u6570\u7EC4\u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,name:"outputArgs",children:(0,e.jsx)(nt,{title:"\u8F93\u51FA",notShowTitle:!0,form:t,params:a?.outputArgs||[],inputItemName:"outputArgs"},"".concat(i,"-").concat(r,"-outputArgs"))}),(0,e.jsx)(dn.Z,{checkTag:Se.qR.Plugin,onAdded:te,open:y,addSkillLoading:U,onCancel:xn,addComponents:d,tabs:Qr}),(0,e.jsx)(Mr.Z,{title:"\u63D0\u793A\u8BCD\u4F18\u5316",open:p,onCancel:function(){l(!1)},defaultValue:t.getFieldValue("systemPrompt")||"",onReplace:function(re){if(re){var ee=re;ee.includes("```")&&(ee=ee.replace(/```/g,"")),t.setFieldsValue({systemPrompt:ee||""}),T(!0),l(!1)}},targetId:r,type:Gt.U.WORKFLOW_LLM_NODE})]})},Xr=function(n){var t=n.form;return(0,e.jsxs)("div",{className:"model-node-style",children:[(0,e.jsx)(I.Z.Item,{noStyle:!0,children:(0,e.jsx)($t,{form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8F93\u5165",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ga,{title:"\u610F\u56FE\u5339\u914D",form:t,field:"intent",hasUuid:!0,showIndex:!0,limitAddLength:26,inputItemName:ce.dy.intentConfigs})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:"\u8865\u5145\u63D0\u793A\u8BCD",inputFieldName:"systemPrompt",onExpand:!0,placeholder:"\u652F\u6301\u989D\u5916\u7684\u7CFB\u7EDF\u63D0\u793A\u8BCD\uFF0C\u5982\u5BF9\u610F\u56FE\u9009\u9879\u505A\u66F4\u8BE6\u7EC6\u7684\u4F8B\u5B50\u4EE5\u589E \u5F3A\u7528\u6237\u8F93\u51FA\u4E0E\u610F\u56FE\u5339\u914D\u7684\u6210\u529F\u7387\u3002"})}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(tt,{treeData:t.getFieldValue("outputArgs")})]})}})]})},Yr=function(n){var t=n.form,r=n.nodeConfig,a=n.type,i=n.id,u=function(y){var S=t.getFieldValue("options");if(y==="SELECT"&&(!S||!S.length)&&(S=[{uuid:(0,Ee.Z)(),index:0,content:"",nextNodeIds:[]},{uuid:(0,Ee.Z)(),index:1,content:"\u6B64\u9009\u9879\u7528\u6237\u4E0D\u53EF\u89C1\uFF0C\u7528\u6237\u56DE\u590D\u65E0\u5173\u5185\u5BB9\u65F6\u8D70\u6B64\u5206\u652F",nextNodeIds:[]}]),console.log("bb",y,t.getFieldValue("answerType")),y==="TEXT"){var C;S=(C=S)===null||C===void 0?void 0:C.map(function(m){return h()(h()({},m),{},{nextNodeIds:[]})})}t.setFieldsValue({answerType:y,options:S}),t.submit()};return(0,e.jsxs)("div",{className:"node-title-style",children:[(0,e.jsx)($t,{form:t}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8F93\u5165",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:"\u63D0\u95EE\u95EE\u9898",inputFieldName:"question",onExpand:!0,placeholder:"\u53EF\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(I.Z.Item,{label:"\u56DE\u7B54\u7C7B\u578B",name:"answerType",children:(0,e.jsx)(Hn.ZP.Group,{onChange:function(y){return u(y.target.value)},children:(0,e.jsxs)(zn.Z,{direction:"vertical",children:[(0,e.jsx)(Hn.ZP,{value:"TEXT",children:"\u76F4\u63A5\u56DE\u7B54"}),(0,e.jsx)(Hn.ZP,{value:"SELECT",children:"\u9009\u9879\u56DE\u7B54"})]})})})}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("answerType")==="TEXT"?(0,e.jsx)(nt,{title:"\u8F93\u51FA",form:t,params:r?.outputArgs||[],inputItemName:"outputArgs",showCheck:!0},"".concat(a,"-").concat(i,"-outputArgs")):null}}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("answerType")==="SELECT"?(0,e.jsx)(ga,{title:"\u8BBE\u7F6E\u9009\u9879\u5185\u5BB9",form:t,field:"content",inputItemName:ce.dy.options,hasUuid:!0,showIndex:!0}):null}})]})},qr=function(n){var t=n.form,r=n.nodeConfig,a=n.type,i=n.id,u=r?.body||[],o=r?.outputArgs||[];return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(I.Z.Item,{label:"\u8BF7\u6C42\u65B9\u6CD5\u4E0E\u8DEF\u5F84",children:(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)(I.Z.Item,{name:"method",noStyle:!0,children:(0,e.jsx)($e.default,{style:{width:"30%",marginRight:"10px"},options:Hr,placeholder:"\u8BF7\u6C42\u65B9\u6CD5"})}),(0,e.jsx)(I.Z.Item,{name:"url",noStyle:!0,children:(0,e.jsx)(ye.Z,{placeholder:"\u8BF7\u8F93\u5165url\u5730\u5740"})})]})})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(I.Z.Item,{name:"contentType",label:"\u8BF7\u6C42\u5185\u5BB9\u683C\u5F0F",children:(0,e.jsx)(Hn.ZP.Group,{className:"margin-bottom",options:zr})})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(I.Z.Item,{label:"\u8BF7\u6C42\u8D85\u65F6\u914D\u7F6E",name:"timeout",children:(0,e.jsx)(ye.Z,{placeholder:"\u8BF7\u8F93\u5165\u8D85\u65F6\u914D\u7F6E\u65F6\u957F",addonAfter:"s"})})}),(0,e.jsxs)("div",{className:"has-child-node",children:[(0,e.jsx)("p",{className:"node-title-bold-style",children:"\u5165\u53C2"}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"Header",fieldConfigs:Ue.x8,inputItemName:ce.dy.headers,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"Query",form:t,fieldConfigs:Ue.x8,inputItemName:ce.dy.queries})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(nt,{title:"Body",form:t,inputItemName:"body",isBody:!0,params:u},"".concat(a,"-").concat(i,"-body"))})]}),(0,e.jsx)(I.Z.Item,{name:"outputArgs",children:(0,e.jsx)(nt,{title:"\u51FA\u53C2",form:t,inputItemName:"outputArgs",params:o},"".concat(a,"-").concat(i,"-outputArgs"))})]})},wt={ModelNode:Jr,IntentionNode:Xr,QuestionsNode:Yr,HttpToolNode:qr},Ht=E(33797),zt=E(41295),ei=function(n){var t=n.form,r=function(i){if(i.destination){var u=t.getFieldValue("conditionBranchConfigs"),o=u.length-2;if(!(i.destination.index>o)){var y=u.splice(i.source.index,1),S=z()(y,1),C=S[0];u.splice(i.destination.index,0,C);var m=u.map(function(p,l){return h()(h()({},p),{},{branchType:l===0?"IF":l===u.length-1?"ELSE":"ELSE_IF"})});t.setFieldsValue({conditionBranchConfigs:m}),t.submit()}}};return(0,e.jsx)(zt.Z5,{onDragEnd:r,children:(0,e.jsx)(I.Z.List,{name:"conditionBranchConfigs",children:function(i,u){var o=u.add,y=u.remove;return(0,e.jsx)(zt.bK,{droppableId:"conditionBranches",children:function(C){return(0,e.jsxs)("div",h()(h()({},C.droppableProps),{},{ref:C.innerRef,children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u6761\u4EF6\u5206\u652F"}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(gn.Z,{}),type:"text",onClick:function(){var p=t.getFieldValue("conditionBranchConfigs")||[],l=Math.max(0,p.length-1);o({uuid:(0,Ee.Z)(),conditionType:"AND",conditionArgs:[{compareType:"EQUAL",firstArg:{bindValue:""},secondArg:{bindValue:""}}],nextNodeIds:[],branchType:"ELSE_IF"},l),t.submit()}})]}),i.map(function(m,p){var l=p===i.length-1;if(!l){var j=t.getFieldValue(["conditionBranchConfigs",m.name]);return(0,e.jsx)(zt._l,{draggableId:j.uuid,index:p,children:function(d){return(0,e.jsxs)("div",h()(h()({ref:d.innerRef},d.draggableProps),{},{className:"condition-card-style",children:[(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsxs)("div",h()(h()({className:"dis-left"},d.dragHandleProps),{},{style:{cursor:"grab",width:"100%"},children:[(0,e.jsx)("span",{className:"margin-right",children:Ze.Vy[j.branchType]}),(0,e.jsxs)(nn.Z,{color:"#C9CDD4",children:["\u4F18\u5148\u7EA7",p+1]})]})),i.length>2&&(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(Ht.Z,{}),type:"text",onClick:function(){if(y(m.name),m.name===0){var g=t.getFieldValue("conditionBranchConfigs")||[],f=g.map(function(c,A){return h()(h()({},c),{},{branchType:A===0?"IF":A===g.length-1?"ELSE":"ELSE_IF"})});t.setFieldsValue({conditionBranchConfigs:f})}t.submit()}})]}),(0,e.jsxs)(zn.Z,{children:[j.conditionArgs.length>1&&(0,e.jsx)(I.Z.Item,{noStyle:!0,shouldUpdate:function(g,f){var c,A;return((c=g.conditionBranchConfigs)===null||c===void 0||(c=c[m.name])===null||c===void 0?void 0:c.conditionArgs)!==((A=f.conditionBranchConfigs)===null||A===void 0||(A=A[m.name])===null||A===void 0?void 0:A.conditionArgs)},children:function(g){var f=g.getFieldValue,c=f(["conditionBranchConfigs",m.name,"conditionArgs"]);return c?.length>1&&(0,e.jsx)(I.Z.Item,{name:[m.name,"conditionType"],style:{marginTop:"-26px"},children:(0,e.jsx)($e.default,{style:{marginRight:"4px",width:54},options:[{label:"\u4E14",value:"AND"},{label:"\u6216",value:"OR"}]})})}}),p!==i.length-1&&(0,e.jsx)(I.Z.List,{name:[m.name,"conditionArgs"],children:function(g,f){return(0,e.jsxs)("div",{className:"position-relative",children:[(0,e.jsx)("div",{className:"dis-left",children:(0,e.jsx)("div",{className:"dis-col",children:g.map(function(c){var A=t.getFieldValue(["conditionBranchConfigs",m.name,"conditionArgs",c.name,"secondArg","bindValueType"]);return(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)(I.Z.Item,{name:[c.name,"compareType"],noStyle:!0,children:(0,e.jsx)($e.default,{popupMatchSelectWidth:!1,options:Ue.YM,optionLabelProp:"displayValue",style:{marginRight:"10px",width:54}})}),(0,e.jsxs)("div",{children:[(0,e.jsx)(I.Z.Item,{name:[c.name,"firstArg","bindValue"],children:(0,e.jsx)(Tt.Z,{isDisabled:!0,form:t,fieldName:["conditionBranchConfigs",m.name,"conditionArgs",c.name,"firstArg","bindValue"],placeholder:"\u8BF7\u5F15\u7528\u53C2\u6570",style:{width:g.length>1?150:180}})}),(0,e.jsx)(I.Z.Item,{name:[c.name,"secondArg","bindValue"],children:(0,e.jsx)(Tt.Z,{form:t,referenceType:A,style:{width:g.length>1?150:180},fieldName:["conditionBranchConfigs",m.name,"conditionArgs",c.name,"secondArg","bindValue"]})})]}),g.length>1&&(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(Ht.Z,{}),onClick:function(){f.remove(c.name)}})]},c.name)})})}),(0,e.jsx)(le.ZP,{type:"primary",onClick:function(){f.add({compareType:"EQUAL",firstArg:null,secondArg:null})},icon:(0,e.jsx)(gn.Z,{}),children:"\u65B0\u589E"})]})}})]})]}))}},j.uuid)}return(0,e.jsx)("div",{className:"condition-card-style",children:"\u5426\u5219"},m.name)}),C.placeholder]}))}})}})})},ni=ei,ti=function(n){var t=n.form,r=n.title,a=n.params,i=n.options,u=n.showAdd,o=n.showDelete,y=n.descText,S=y===void 0?"\u53D8\u91CF\u7C7B\u578B":y,C=n.nameText,m=C===void 0?"\u53D8\u91CF\u540D":C,p=(0,s.useState)(a||[]),l=z()(p,2),j=l[0],w=l[1],d=(0,we.useModel)("workflow"),D=d.setIsModified,g=d.referenceList;(0,s.useEffect)(function(){a&&!ot().isEqual(a,j)&&w(a)},[a]);var f=function(V){w(V),t.setFieldValue("inputArgs",V),D(!0)},c=function(V,L,R){var U=function q(te){return te.map(function(Y){return Y.key===V?h()(h()({},Y),{},{bindValue:L,bindValueType:R}):Y.subArgs?h()(h()({},Y),{},{subArgs:q(Y.subArgs)}):Y})},ne=U(j);f(ne)},A=function(V){w(function(L){var R=[].concat(H()(L),[V]);return f(R),R})},k=function(V){var L=j.filter(function(R){return R.key!==V});f(L),D(!0)},P=(0,e.jsx)(e.Fragment,{children:i?.filter(function(T){return!j.some(function(V){return V.name===T.key})&&!T.systemVariable}).map(function(T){return(0,e.jsxs)("div",{className:"dis-sb cursor-pointer mb-6",onClick:function(){return A(T)},style:{width:220},children:[(0,e.jsx)("span",{children:T.name}),(0,e.jsx)(nn.Z,{color:"#C9CDD4",children:T.dataType})]},T.key)})}),Z=function(V){return(0,e.jsxs)("div",{className:"dis-sb",style:{width:"100%"},children:[(0,e.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,e.jsx)("span",{className:"margin-right-6 font-12 ",children:V.name}),(0,e.jsx)(mn.Z,{title:V.description||"\u6682\u65E0\u63CF\u8FF0",icon:(0,e.jsx)(En.Z,{})})]}),(0,e.jsx)("div",{style:{width:"175px"},children:(0,e.jsx)(ua,{data:g,referenceType:V.bindValueType||"Input",onChange:function(R,U){c(V.key,R,U)},value:V.bindValue})}),o&&(0,e.jsx)(qn.Z,{style:{marginLeft:"6px"},onClick:function(){return k(V.key)}})]})};return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:r}),u&&(0,e.jsx)(Re.Z,{content:P,trigger:"click",children:(0,e.jsx)(le.ZP,{type:"text",size:"small",icon:(0,e.jsx)(gn.Z,{})})})]}),j&&j.length>0&&(0,e.jsxs)("div",{className:"dis-left font-12 mb-6 font-color-gray07",children:[(0,e.jsx)("span",{style:{marginLeft:"1%"},children:m}),(0,e.jsx)("span",{style:{marginLeft:o?"30%":"35%"},children:S})]}),(0,e.jsx)(It.Z,{treeData:j,defaultExpandAll:!0,fieldNames:{title:"name",key:"key",children:"subArgs"},titleRender:Z,switcherIcon:null,showIcon:!1,className:"tree-input-style"})]})},Qt=ti,tl=E(43562),ai=function(n){var t=n.icon,r=n.name,a=n.description,i=n.showParams,u=n.params,o=(0,s.useState)(!1),y=z()(o,2),S=y[0],C=y[1];return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"skill-item-style background-c9 dis-sb",children:(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("img",{src:!t||t===""?(0,se.Pk)(Se.qR.Table):t,alt:"",className:"skill-item-icon"}),(0,e.jsxs)("div",{className:"skill-item-content-style",children:[(0,e.jsx)("div",{className:"skill-item-title-style",children:r}),(0,e.jsx)("div",{className:"skill-item-desc-style",children:a})]})]})}),i&&u&&(0,e.jsx)("div",{children:S?(0,e.jsxs)("div",{className:"dis-wrap-sa margin-bottom",children:[u?.map(function(m){return(0,e.jsx)("div",{className:"database-tag-style",children:m},m)}),(0,e.jsx)("div",{onClick:function(){return C(!1)},className:"database-tag-style cursor-pointer",children:"\u6536\u8D77"})]}):(0,e.jsxs)("div",{className:"dis-left margin-bottom",children:[(0,e.jsx)("div",{className:"flex-1 dis-left dis-no-wrap ",children:u?.map(function(m){return(0,e.jsx)("div",{className:"database-tag-style",children:m},m)})}),(0,e.jsx)("div",{onClick:function(){return C(!0)},className:"database-tag-style cursor-pointer",children:"..."})]})})]})},ri=ai,ii=E(35044),si=E(19979),Un={"xagi-nav-style2":"xagi-nav-style2___k1HI0",text:"text___MhtOa","page-container":"page-container___uMiaa",btn:"btn___Us0pI","chat-wrapper":"chat-wrapper___uSZyL","replace-btn":"replace-btn___SHOm4",footer:"footer____WBeJ","chat-input":"chat-input___nZ16_",input:"input___Gcyqk","icon-box":"icon-box___b3mce","send-image":"send-image___QdGwv"},at=me().bind(Un),oi=function(n){var t,r,a=n.open,i=n.onCancel,u=n.onReplace,o=n.title,y=n.tableId,S=n.inputArgs,C=(0,s.useState)(""),m=z()(C,2),p=m[0],l=m[1],j=(0,we.useModel)("assistantOptimize"),w=j.messageList,d=j.setMessageList,D=j.onMessageSend,g=j.messageViewRef,f=j.allowAutoScrollRef,c=j.resetInit,A=(0,s.useState)(""),k=z()(A,2),P=k[0],Z=k[1];(0,s.useEffect)(function(){return Z((0,Ee.Z)()),function(){c()}},[]),(0,s.useEffect)(function(){var L=g.current;if(L){var R=function(){var ne=L.scrollTop,q=L.scrollHeight,te=L.clientHeight;ne+te<q?f.current=!1:f.current=!0};return L.addEventListener("scroll",R),function(){L.removeEventListener("scroll",R)}}},[]);var T=function(){var L=X()(_()().mark(function R(U){var ne;return _()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:d([]),l(""),ne={requestId:P,prompt:U||p,tableId:y,inputArgs:S},D(ne,Gt.L.sql);case 4:case"end":return te.stop()}},R)}));return function(U){return L.apply(this,arguments)}}(),V=function(R){R.preventDefault();var U=R.target,ne=U.value,q=U.selectionStart,te=U.selectionEnd;if(R.nativeEvent.keyCode===13&&(R.nativeEvent.shiftKey||R.nativeEvent.ctrlKey)){var Y=ne.slice(0,q)+`
`+ne.slice(te);l(Y)}else if(R.nativeEvent.keyCode===13&&ne.trim()){var ie={requestId:P,prompt:p,tableId:y,inputArgs:S};D(ie,Gt.L.sql),l("")}};return(0,e.jsxs)(At.Z,{title:o,open:a,onCancel:function(R){d([]),i?.(R)},maskClosable:!1,footer:null,children:[(0,e.jsx)("div",{ref:g,className:at(Un["chat-wrapper"],"flex-1"),children:w?.length>0&&(0,e.jsx)(e.Fragment,{children:w?.map(function(L,R){return(0,e.jsx)(si.Z,{ifShowReplace:!0,onReplace:u,messageInfo:L},R)})})}),w?.length>0&&(0,e.jsxs)("div",{className:at("flex"),children:[(0,e.jsx)(le.ZP,{className:at(Un["replace-btn"],Un.btn),loading:(w==null||(t=w[w?.length-1])===null||t===void 0?void 0:t.status)!=="complete",disabled:(w==null||(r=w[w?.length-1])===null||r===void 0?void 0:r.status)!=="complete",onClick:function(){var R;return u?.(w==null||(R=w[w?.length-1])===null||R===void 0?void 0:R.text)},children:"\u66FF\u6362"}),(0,e.jsx)(le.ZP,{onClick:function(R){d([]),i?.(R)},className:at(Un.btn,"ml-10 "),children:"\u9000\u51FA"})]}),(0,e.jsx)("div",{className:at(Un.footer,"flex","items-center"),children:(0,e.jsxs)("div",{className:at(Un["chat-input"],"flex","items-center","w-full"),children:[(0,e.jsx)(ye.Z.TextArea,{value:p,onChange:function(R){return l(R.target.value)},rootClassName:Un.input,onPressEnter:V,placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684SQL\u67E5\u8BE2\u9700\u6C42\uFF0C\u903B\u8F91\u5C3D\u91CF\u63CF\u8FF0\u8BE6\u7EC6",autoSize:{minRows:1,maxRows:3}}),(0,e.jsx)("img",{onClick:function(){return T()},className:at(Un["send-image"],"cursor-pointer"),src:ii,alt:""})]})})]})},li=oi,ui=function(n){var t=n.form,r=n.type,a=n.nodeConfig,i=n.id,u=(0,s.useState)(!1),o=z()(u,2),y=o[0],S=o[1],C=(0,we.useModel)("workflow"),m=C.setIsModified,p=[{firstArg:{bindValue:null,bindValueType:null},secondArg:{bindValue:null,bindValueType:null},compareType:null},{firstArg:{bindValue:null,bindValueType:null},secondArg:{bindValue:null,bindValueType:null},compareType:null}],l=function(){S(!0)};return(0,s.useEffect)(function(){t.getFieldValue("conditionType")||t.setFieldValue("conditionType","AND")},[t.getFieldValue("conditionType")]),(0,e.jsxs)("div",{children:[r==="TableSQL"&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8F93\u5165",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}),r!=="TableDataAdd"&&r!=="TableSQL"&&(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("p",{className:"node-title-style",children:r==="TableDataDelete"?"\u5220\u9664\u6761\u4EF6":r==="TableDataUpdate"?"\u66F4\u65B0\u6761\u4EF6":"\u67E5\u8BE2\u6761\u4EF6"}),(0,e.jsx)(I.Z.Item,{children:(0,e.jsxs)(zn.Z,{children:[(0,e.jsx)(I.Z.Item,{noStyle:!0,shouldUpdate:function(w,d){return w.conditionArgs!==d.conditionArgs},children:function(w){var d=w.getFieldValue,D=d("conditionArgs");return D?.length>1&&(0,e.jsx)(I.Z.Item,{name:"conditionType",style:{marginTop:"-26px"},initialValue:"AND",children:(0,e.jsx)($e.default,{style:{marginRight:"4px",width:54},options:[{label:"\u4E14",value:"AND"},{label:"\u6216",value:"OR"}]})})}}),(0,e.jsx)(I.Z.List,{name:"conditionArgs",initialValue:p,children:function(w,d){return(0,e.jsxs)("div",{className:"position-relative",children:[w.length>=1?(0,e.jsx)("div",{className:"dis-left",children:(0,e.jsx)("div",{className:"dis-col",children:w.map(function(D){var g=t.getFieldValue(["conditionArgs",D.name,"secondArg","bindValueType"]);return(0,e.jsxs)("div",{className:"dis-sb",children:[(0,e.jsx)(I.Z.Item,{name:[D.name,"compareType"],noStyle:!0,children:(0,e.jsx)($e.default,{popupMatchSelectWidth:!1,options:Ue.b9,optionLabelProp:"displayValue",style:{marginRight:"10px",width:54}})}),(0,e.jsxs)("div",{children:[(0,e.jsx)(I.Z.Item,{name:[D.name,"firstArg","bindValue"],children:(0,e.jsx)($e.default,{placeholder:"\u8BF7\u9009\u62E9",options:t.getFieldValue("tableFields"),fieldNames:{label:"name",value:"key"},style:{width:w.length>1?150:180}})}),(0,e.jsx)(I.Z.Item,{name:[D.name,"secondArg","bindValue"],children:(0,e.jsx)(Tt.Z,{form:t,referenceType:g,style:{width:w.length>1?150:180},fieldName:["conditionArgs",D.name,"secondArg","bindValue"]})})]}),(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(Ht.Z,{}),onClick:function(){d.remove(D.name)}})]},D.name)})})}):(0,e.jsx)(pn.Z,{description:"\u5F53\u524D\u67E5\u8BE2\u6570\u636E\u4E3A\u7A7A"}),(0,e.jsx)(le.ZP,{type:"primary",onClick:function(){d.add({compareType:"EQUAL",firstArg:null,secondArg:null})},icon:(0,e.jsx)(gn.Z,{}),children:"\u6DFB\u52A0\u6761\u4EF6"})]})}})]})})]}),(r==="TableDataAdd"||r==="TableDataUpdate")&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Qt,{title:r==="TableDataAdd"?"\u8F93\u5165":"\u9009\u62E9\u66F4\u65B0\u5B57\u6BB5",form:t,options:t.getFieldValue("tableFields")||[],showAdd:r==="TableDataUpdate",params:t.getFieldValue("inputArgs")||[],showDelete:r==="TableDataUpdate",descText:"\u53D8\u91CF\u503C"})}),r==="TableDataQuery"&&(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("div",{className:" margin-bottom",children:(0,e.jsx)("span",{className:"node-title-style ",children:"\u67E5\u8BE2\u4E0A\u9650"})}),(0,e.jsx)(I.Z.Item,{name:"limit",children:(0,e.jsx)(Yn.Z,{min:1,max:1e3,placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u4E0A\u9650"})})]}),(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("div",{className:"dis-sb margin-bottom ",children:(0,e.jsx)("span",{className:"node-title-style",children:"\u6570\u636E\u8868"})}),t.getFieldValue("tableId")?(0,e.jsx)(ri,{icon:t.getFieldValue("icon"),name:t.getFieldValue("name"),description:t.getFieldValue("description"),params:t.getFieldValue("tableFields").map(function(j){return j.name})||[],showParams:r==="TableSQL"}):null]}),r==="TableSQL"&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Ct,{title:"SQL",inputFieldName:"sql",onExpand:!0,onOptimize:!0,onOptimizeClick:l,placeholder:"\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001 {{\u53D8\u91CF\u540D[\u6570\u7EC4\u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u51FA\u53C2\u6570\u4E2D\u7684\u53D8\u91CF"})}),r==="TableSQL"||r==="TableDataQuery"?(0,e.jsx)(I.Z.Item,{name:"inputArgs",children:(0,e.jsx)(nt,{title:"\u8F93\u51FA",inputItemName:"outputArgs",params:a?.outputArgs||[],form:t,showCheck:!0,isNotAdd:!0},"".concat(r,"-").concat(i,"-outputArgs"))}):(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(tt,{treeData:t.getFieldValue("outputArgs")})]})}}),(0,e.jsx)(li,{title:"\u751F\u6210sql\u8BED\u53E5",open:y,onCancel:function(){S(!1)},onReplace:function(w){if(w){var d=w;d.includes("```")&&(d=d.replace(/```/g,""));var D=d.startsWith("sql")?d.replace("sql","").trim():d.trim();t.setFieldsValue({sql:D||""}),m(!0)}},tableId:t.getFieldValue("tableId"),inputArgs:t.getFieldValue("inputArgs")})]})},di=ui,ci=kn.vQ.JavaScript,pi=[{value:kn.vQ.JavaScript,label:"JavaScript"},{value:kn.vQ.Python,label:"Python"}],vi=function(n){var t=n.visible,r=n.onClose,a=n.value,i=n.language,u=n.onChange,o=n.disabledSwitchLanguage,y=o===void 0?!1:o,S=(0,s.useState)(i||ci),C=z()(S,2),m=C[0],p=C[1],l=(0,s.useState)(a||""),j=z()(l,2),w=j[0],d=j[1];(0,s.useEffect)(function(){d(a||"")},[a]);var D=function(c){d(c),u?.({code:c,language:m})},g=function(c){p(c),u?.({code:w,language:c})};return(0,e.jsx)(e.Fragment,{children:t&&(0,e.jsxs)("div",{className:"monaco-container",children:[(0,e.jsxs)("div",{className:"monaco-header dis-sb margin-bottom",children:[(0,e.jsxs)(zn.Z,{align:"center",wrap:!0,className:"dis-left",style:{flex:1},children:[(0,e.jsx)(ut.HF,{}),(0,e.jsx)("span",{className:"mr-16",style:{height:28,lineHeight:"20px",paddingBottom:8,display:"inline-block"},children:"\u4EE3\u7801"}),!y&&(0,e.jsx)($e.default,{style:{width:120},value:m,onChange:g,options:pi,size:"small",placeholder:"\u8BF7\u9009\u62E9\u8BED\u8A00"})]}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(Dn.Z,{}),size:"small",type:"text",onClick:r})]}),(0,e.jsx)("div",{className:"monaco-editor-content",children:(0,e.jsx)(be.Z,{value:w,onChange:D,codeLanguage:m,minimap:!0,height:"790px",codeOptimizeVisible:!1})})]})})},fi=vi,gi=function x(n){var t={};if(!n||!n.length)return t;var r=n.filter(function(a){return!(!a.name||!a.dataType)});return r.forEach(function(a){a.dataType===N.Gi.Array_Object?t[a.name]=[x(a.subArgs||[])]:a.dataType===N.Gi.Object?t[a.name]=x(a.subArgs||[]):a.dataType.startsWith("Array_")?t[a.name]=[]:t[a.name]=""}),t};function Jt(x,n){if(ot().isArray(x))return x.map(function(a,i){return Jt(a,ot().get(n,i))});if(ot().isPlainObject(x)){var t={};for(var r in x)x.hasOwnProperty(r)&&(t[r]=Jt(x[r],n?.[r]));return t}else return n!==void 0?n:x}var mi=function(n){var t=n.watchField,r=n.fieldName,a=n.specificContent,i=I.Z.useFormInstance(),u=I.Z.useWatch(t,{form:i,preserve:!0}),o=I.Z.useWatch(r,{form:i,preserve:!0})||{},y=(0,s.useMemo)(function(){var S=(0,Fe.Dt)(o.specificContent||a)||"{}";try{if(!u)return"";var C=gi(u),m=Jt(C,JSON.parse(S));return m}catch{return""}},[u,o.specificContent,o.exceptionHandleType,a]);return y},We={"xagi-nav-style2":"xagi-nav-style2___HNLzm",text:"text___LqaZE","page-container":"page-container___wzbcy",exceptionItem:"exceptionItem___wEeCK",exceptionItemHeader:"exceptionItemHeader___ZtLj2",exceptionItemTitle:"exceptionItemTitle___YcVJ6",exceptionItemTip:"exceptionItemTip___sjJe1",exceptionItemForm:"exceptionItemForm___hv2kO",exceptionItemRow:"exceptionItemRow___iFWTr",exceptionItemFormItem:"exceptionItemFormItem___a8VSi","ant-form-item-required":"ant-form-item-required___i46Xn",timeoutItem:"timeoutItem___BmVM1",retryItem:"retryItem___bjEZP",handleTypeItem:"handleTypeItem___I9kSy",exceptionContentItem:"exceptionContentItem___vz_sL",exceptionItemInput:"exceptionItemInput___k4K5d",exceptionItemSelect:"exceptionItemSelect___tu1p8","ant-select-selection-item":"ant-select-selection-item___RIMSR","ant-select-selection-placeholder":"ant-select-selection-placeholder___d3l1y",disabled:"disabled___fCiKY",exceptionItemContentWrapper:"exceptionItemContentWrapper___ynh5L",exceptionItemContentLabel:"exceptionItemContentLabel___N4UMG",editorWrapper:"editorWrapper___Z7JbG"},hi="",xi=(0,s.memo)(function(x){var n=x.name,t=x.timeout,r=t===void 0?180:t,a=x.retryCount,i=a===void 0?0:a,u=x.exceptionHandleType,o=u===void 0?N.Xy.INTERRUPT:u,y=x.disabled,S=y===void 0?!1:y,C=x.specificContent,m=x.exceptionHandleNodeIds,p=(0,we.useModel)("workflow"),l=p.setIsModified,j=I.Z.useFormInstance(),w=(0,s.useMemo)(function(){return Ze.vp},[]),d=(0,s.useMemo)(function(){return Ze.cN},[]),D=(0,s.useState)(o),g=z()(D,2),f=g[0],c=g[1],A=(0,s.useState)((0,Fe.Dt)(C)||hi),k=z()(A,2),P=k[0],Z=k[1],T=(0,s.useState)(!1),V=z()(T,2),L=V[0],R=V[1];(0,s.useEffect)(function(){if(j){var ie=h()(h()({timeout:r,retryCount:i,exceptionHandleType:o},o===N.Xy.SPECIFIC_CONTENT&&{specificContent:(0,Fe.Dt)(C)}),o===N.Xy.EXECUTE_EXCEPTION_FLOW&&{exceptionHandleNodeIds:m});j.setFieldsValue(tn()({},n,ie))}},[j,n,r,i,o,C,m]);var U=mi({specificContent:j.getFieldValue([n,"specificContent"])||"",fieldName:n,watchField:"outputArgs"});(0,s.useEffect)(function(){Z((0,Fe.Dt)(U))},[U]),(0,s.useEffect)(function(){j&&(c(o),o!==N.Xy.EXECUTE_EXCEPTION_FLOW&&j.setFieldValue([n,"exceptionHandleNodeIds"],[]))},[j,n,o]),(0,s.useEffect)(function(){j&&f!==N.Xy.EXECUTE_EXCEPTION_FLOW&&j.setFieldValue([n,"exceptionHandleNodeIds"],[])},[j,n,f]);var ne=(0,s.useCallback)((0,Vn.debounce)(function(){l(!0)},100),[]),q=function(de){j.setFieldValue([n,"specificContent"],de),ne()},te=function(de){if(c(de),de===N.Xy.SPECIFIC_CONTENT)try{q(C||"")}catch{}else q("")},Y=function(de){if(j)try{JSON.parse(de),q(de)}catch{}};return(0,e.jsxs)("div",{className:me()(We.exceptionItem),children:[(0,e.jsxs)("div",{className:me()(We.exceptionItemHeader),children:[(0,e.jsx)("span",{className:me()(We.exceptionItemTitle),children:"\u5F02\u5E38\u5904\u7406"}),(0,e.jsx)(mn.Z,{title:"\u53EF\u8BBE\u7F6E\u5F02\u5E38\u5904\u7406\uFF0C\u5305\u62EC\u8D85\u65F6\u3001\u91CD\u8BD5\u3001\u5F02\u5E38\u5904\u7406\u65B9\u5F0F\u3002\u5F00\u542F\u6D41\u5F0F\u8F93\u51FA\u540E\uFF0C\u4E00\u65E6\u5F00\u59CB\u8F93\u51FA\u6570\u636E\uFF0C\u5373\u4F7F\u51FA\u73B0\u5F02\u5E38\u4E5F\u65E0\u6CD5\u91CD\u8BD5\u6216\u8005\u8DF3\u8F6C\u5F02\u5E38\u5206\u652F\u3002",icon:(0,e.jsx)(En.Z,{})})]}),(0,e.jsxs)("div",{className:me()(We.exceptionItemForm),children:[(0,e.jsxs)("div",{className:me()(We.exceptionItemRow),children:[(0,e.jsx)(I.Z.Item,{name:[n,"timeout"],label:(0,e.jsxs)("span",{className:"flex items-center",children:["\u8D85\u65F6\u65F6\u95F4",(0,e.jsx)(mn.Z,{title:"\u8BBE\u7F6E\u8282\u70B9\u6267\u884C\u7684\u6700\u5927\u7B49\u5F85\u65F6\u95F4",icon:(0,e.jsx)(En.Z,{})})]}),className:me()(We.exceptionItemFormItem,We.timeoutItem),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D85\u65F6\u65F6\u95F4"}],children:(0,e.jsx)(ye.Z,{size:"small",suffix:"s",type:"number",className:me()(We.exceptionItemInput)})}),(0,e.jsx)(I.Z.Item,{name:[n,"retryCount"],label:"\u91CD\u8BD5\u6B21\u6570",className:me()(We.exceptionItemFormItem,We.retryItem),children:(0,e.jsx)($e.default,{size:"small",options:d,className:me()(We.exceptionItemSelect,tn()({},We.disabled,S)),disabled:S,placeholder:"\u4E0D\u91CD\u8BD5"})}),(0,e.jsx)(I.Z.Item,{name:[n,"exceptionHandleType"],label:"\u5F02\u5E38\u5904\u7406\u65B9\u5F0F",className:me()(We.exceptionItemFormItem,We.handleTypeItem),children:(0,e.jsx)($e.default,{size:"small",options:w,className:me()(We.exceptionItemSelect,tn()({},We.disabled,S)),disabled:S,placeholder:"\u4E2D\u65AD\u6D41\u7A0B",onChange:te})})]}),f===N.Xy.SPECIFIC_CONTENT&&(0,e.jsxs)("div",{className:me()(We.exceptionItemContentWrapper),children:[(0,e.jsxs)("div",{className:me()(We.exceptionItemContentLabel),children:[(0,e.jsx)("span",{children:"\u81EA\u5B9A\u4E49\u8FD4\u56DE\u5185\u5BB9"}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(Ot.Z,{}),size:"small",type:"text",onClick:function(){return R(!0)}})]}),(0,e.jsx)(I.Z.Item,{name:[n,"specificContent"],className:me()(We.exceptionItemFormItem,We.exceptionContentItem),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u8FD4\u56DE\u5185\u5BB9"},{validator:function(de,ge){if(!ge)return Promise.resolve();try{return JSON.parse(ge),Promise.resolve()}catch{return Promise.reject(new Error("\u8BF7\u8F93\u5165\u6709\u6548\u7684JSON\u683C\u5F0F"))}}}],children:(0,e.jsx)("div",{className:me()(We.editorWrapper),children:(0,e.jsx)(be.Z,{codeLanguage:kn.vQ.JSON,height:"150px",value:P,codeOptimizeVisible:!1,onChange:Y})})})]}),(0,e.jsx)(fi,{disabledSwitchLanguage:!0,value:P,language:kn.vQ.JSON,visible:L,onClose:function(){return R(!1)},onChange:function(de){var ge=de.code;Y(ge)}})]})]})},function(x,n){return(0,Fe.Vb)(x,n)}),Ci=E(45262),yi="\u68C0\u7D22\u5173\u952E\u8BCD",Rn="knowledgeBaseConfigs",ma="inputArgs",Ni=function(n){var t=n.form,r=n.type,a=n.id,i=(0,s.useState)(!1),u=z()(i,2),o=u[0],y=u[1],S=(0,we.useModel)("workflow"),C=S.setIsModified,m=(0,s.useState)([]),p=z()(m,2),l=p[0],j=p[1],w=function(){y(!0)},d=function(k){var P=t.getFieldValue(Rn)||[];k.type=k.targetType,k.knowledgeBaseId=k.targetId,t.setFieldValue(Rn,P.concat(k)),C(!0),y(!1),j([].concat(H()(l),[{type:k.targetType,targetId:k.targetId,status:Se.BQ.Added}]))},D=function(k){var P=t.getFieldValue(Rn);if(P){var Z=P.filter(function(T){return T.knowledgeBaseId!==k.knowledgeBaseId});t.setFieldValue(Rn,Z),C(!0)}},g=function(k){C(!0);var P=t.getFieldValue(Rn);if(P){var Z=P.map(function(T){return T.knowledgeBaseId===k.knowledgeBaseId?k:T});t.setFieldValue(Rn,Z)}},f=t.getFieldValue(Rn);(0,s.useEffect)(function(){var A=f?.map(function(k){return{type:k.type,targetId:k.knowledgeBaseId,status:Se.BQ.Added}})||[];j(A)},[f]);var c=(t?.getFieldValue(ma)||[]).map(function(A){return h()(h()({},A),{},{description:A.description||yi})});return(0,e.jsxs)("div",{className:"knowledge-node",children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Qt,{title:"\u8F93\u5165",form:t,params:c},"".concat(r,"-").concat(a,"-").concat(ma))}),(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u77E5\u8BC6\u5E93"}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(gn.Z,{}),size:"small",onClick:w})]}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue(Rn)?(0,e.jsx)(Ci.Q,{skillName:Rn,params:t.getFieldValue(Rn),form:t,modifyItem:g,removeItem:D}):(0,e.jsx)(pn.Z,{})}})]}),(0,e.jsxs)("div",{className:"knowledge-node-box node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb mb-16",children:[(0,e.jsxs)("div",{className:"knowlegenow-left-title flex items-center",children:[(0,e.jsx)("span",{children:"\u641C\u7D22\u7B56\u7565"}),(0,e.jsx)(mn.Z,{title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u83B7\u53D6\u77E5\u8BC6\u7684\u68C0\u7D22\u65B9\u5F0F\uFF0C\u4E0D\u540C\u7684\u68C0\u7D22\u7B56\u7565\u53EF\u4EE5\u66F4\u6709\u6548\u5730\u627E\u5230\u6B63\u786E\u7684\u4FE1\u606F\uFF0C\u63D0\u9AD8\u5176\u751F\u6210\u7684\u7B54\u6848\u7684\u51C6\u786E\u6027\u548C\u53EF\u7528\u6027",icon:(0,e.jsx)(En.Z,{})})]}),(0,e.jsx)(I.Z.Item,{name:["searchStrategy"],noStyle:!0,children:(0,e.jsx)($e.default,{className:"flex-1",options:[{label:"\u8BED\u4E49",value:"SEMANTIC"},{label:"\u6DF7\u5408",value:"MIXED"},{label:"\u5168\u6587",value:"FULL_TEXT"}]})})]}),(0,e.jsxs)("div",{className:"dis-sb mb-16",children:[(0,e.jsxs)("div",{className:"knowlegenow-left-title flex items-center",children:[(0,e.jsx)("span",{children:"\u6700\u5927\u53EC\u56DE\u6570\u91CF"}),(0,e.jsx)(mn.Z,{title:"\u4ECE\u77E5\u8BC6\u5E93\u4E2D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B\u7684\u6700\u5927\u6BB5\u843D\u6570\uFF0C\u6570\u503C\u8D8A\u5927\u8FD4\u56DE\u7684\u5185\u5BB9\u8D8A\u591A",icon:(0,e.jsx)(En.Z,{})})]}),(0,e.jsx)(I.Z.Item,{name:["maxRecallCount"],noStyle:!0,children:(0,e.jsx)(Wt.Z,{min:1,max:20,step:1,marks:{1:1,20:20},className:"flex-1"})})]}),(0,e.jsxs)("div",{className:"dis-sb ",children:[(0,e.jsxs)("div",{className:"knowlegenow-left-title flex items-center",children:[(0,e.jsx)("span",{children:"\u6700\u5C0F\u5339\u914D\u5EA6"}),(0,e.jsx)(mn.Z,{title:"\u6839\u636E\u8BBE\u7F6E\u7684\u5339\u914D\u5EA6\u9009\u53D6\u6BB5\u843D\u8FD4\u56DE\u7ED9\u5927\u6A21\u578B\uFF0C\u4F4E\u4E8E\u8BBE\u5B9A\u5339\u914D\u5EA6\u7684\u5185\u5BB9\u4E0D\u4F1A\u88AB\u53EC\u56DE",icon:(0,e.jsx)(En.Z,{})})]}),(0,e.jsx)(I.Z.Item,{name:"matchingDegree",noStyle:!0,children:(0,e.jsx)(Wt.Z,{min:.01,max:.99,step:.01,marks:{.01:.01,.99:.99},className:"flex-1"})})]})]}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(tt,{treeData:t.getFieldValue("outputArgs")})]})}}),(0,e.jsx)(dn.Z,{checkTag:Se.qR.Knowledge,onAdded:d,open:o,onCancel:function(){return y(!1)},addComponents:l,hideTop:[Se.qR.Table,Se.qR.Plugin,Se.qR.Workflow,Se.qR.MCP]})]})},ji={KnowledgeNode:Ni},Ei=function(n){var t=n.form,r=n.isShow,a=n.close;return(0,e.jsx)(e.Fragment,{children:r&&(0,e.jsxs)("div",{className:"monaco-container",children:[(0,e.jsxs)("div",{className:"monaco-header dis-sb margin-bottom",children:[(0,e.jsxs)(zn.Z,{align:"center",wrap:!0,className:"dis-left",style:{flex:1},children:[(0,e.jsx)(ut.HF,{}),(0,e.jsx)("span",{className:"mr-16",style:{height:28,lineHeight:"20px",paddingBottom:8,display:"inline-block"},children:"\u4EE3\u7801"}),(0,e.jsx)(I.Z.Item,{name:"codeLanguage",children:(0,e.jsx)($e.default,{style:{width:120},options:[{value:"JavaScript",label:"JavaScript"},{value:"Python",label:"Python"}],size:"small",placeholder:"\u8BF7\u9009\u62E9\u8BED\u8A00"})})]}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(Dn.Z,{}),size:"small",type:"text",onClick:a})]}),(0,e.jsx)("div",{className:"monaco-editor-content",children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:t.getFieldValue("codeLanguage")==="JavaScript"?"codeJavaScript":"codePython",children:(0,e.jsx)(be.Z,{value:t.getFieldValue(t.getFieldValue("codeLanguage")==="JavaScript"?"codeJavaScript":"codePython"),onChange:function(u){t.setFieldValue(t.getFieldValue("codeLanguage")==="JavaScript"?"codeJavaScript":"codePython",u)},codeLanguage:t.getFieldValue("codeLanguage")||"JavaScript",minimap:!0,height:"790px"})})})]})})},bi=Ei,Xt=E(73981),Fi=function(n){var t=n.form,r=n.nodeConfig,a=n.id,i=n.type;return(0,e.jsx)(I.Z.Item,{name:"inputArgs",children:(0,e.jsx)(nt,{title:"\u8F93\u5165",inputItemName:"inputArgs",params:r?.inputArgs||[],form:t,showCheck:!0},"".concat(i,"-").concat(a,"-inputArgs"))})},Ii=function(n){var t=n.form;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8F93\u5165",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t,disabledAdd:!0,disabledDelete:!0,disabledInput:!0})}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(tt,{treeData:t.getFieldValue("outputArgs")})]})}})]})},Si=function(n){var t=n.form,r=n.type,a=[{label:"\u8FD4\u56DE\u53D8\u91CF",value:"VARIABLE"},{label:"\u8FD4\u56DE\u6587\u672C",value:"TEXT"}];return(0,e.jsxs)(e.Fragment,{children:[r==="End"&&(0,e.jsx)("div",{className:"dis-center",children:(0,e.jsx)(I.Z.Item,{name:"returnType",children:(0,e.jsx)(Xt.Z,{options:a,style:{marginBottom:"10px"}})})}),(0,e.jsx)("div",{className:t.getFieldValue("returnType")!=="VARIABLE"?"node-item-style":"",children:(0,e.jsx)(ln,{title:"\u8F93\u51FA\u53D8\u91CF",form:t,fieldConfigs:Ue.x8,showCopy:!0,inputItemName:ce.dy.outputArgs})}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("returnType")!=="VARIABLE"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"dis-sb margin-bottom",children:(0,e.jsxs)("span",{className:"node-title-style gap-6 flex items-center",children:["\u8F93\u51FA\u5185\u5BB9",(0,e.jsx)(mn.Z,{title:"\u53EF\u4EE5\u5728\u4EE5\u4E0B\u8F93\u5165\u6846\u4E2D\u91CD\u65B0\u7EC4\u7EC7\u8F93\u51FA\u5185\u5BB9\uFF0C\u5927\u6A21\u578B\u5C06\u4F18\u5148\u4F7F\u7528\u8F93\u5165\u6846\u4E2D\u7684\u5185\u5BB9\u3002",icon:(0,e.jsx)(Nt.Z,{})})]})}),(0,e.jsx)(I.Z.Item,{name:"content",children:(0,e.jsx)(ye.Z.TextArea,{placeholder:"\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D.\u5B50\u53D8\u91CF\u540D}}\u3001{{\u53D8\u91CF\u540D[\u6570\u7EC4 \u7D22\u5F15]}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u51FA\u53C2\u6570\u4E2D\u7684\u53D8\u91CF",autoSize:{minRows:3,maxRows:5},style:{marginBottom:"10px"}})})]})}})]})},Ai=function(n){var t=n.form;return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("span",{className:"node-title-style margin-bottom gap-6 flex items-center",children:["\u5FAA\u73AF\u8BBE\u7F6E",(0,e.jsx)(mn.Z,{title:"\u5982\u679C\u5F15\u7528\u6570\u7EC4\uFF0C\u5FAA\u73AF\u6B21\u6570\u4E3A\u6570\u7EC4\u7684\u957F\u5EA6\uFF1B\u5982\u679C\u6307\u5B9A\u6B21\u6570\uFF0C\u5FAA\u73AF\u6B21\u6570\u4E3A\u6307\u5B9A\u7684\u6B21\u6570\uFF1B\u5982\u679C\u9009\u62E9\u65E0\u9650\u5FAA\u73AF\uFF0C\u9700\u914D\u5408\u201C\u7EC8\u6B62\u5FAA\u73AF\u201D\u8282\u70B9\u5B8C\u6210\u5FAA\u73AF\u6D41\u7A0B\u3002",icon:(0,e.jsx)(Nt.Z,{})})]}),(0,e.jsx)(I.Z.Item,{name:"loopType",children:(0,e.jsx)($e.default,{options:Ue.RY,style:{width:"100%",marginBottom:"10px"}})})]}),(0,e.jsx)(I.Z.Item,{noStyle:!0,shouldUpdate:function(a,i){return a.loopType!==i.loopType},children:function(){var a=t.getFieldValue("loopType");return a==="SPECIFY_TIMES_LOOP"?(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u5FAA\u73AF\u6B21\u6570"}),(0,e.jsx)(I.Z.Item,{name:"loopTimes",children:(0,e.jsx)(Yn.Z,{size:"small",style:{width:"100%",marginBottom:"10px"},placeholder:"\u8BF7\u8F93\u5165\u5FAA\u73AF\u6B21\u6570\uFF0C\u5E76\u4E14\u503C\u4E3A\u6B63\u6574\u6570",min:1,precision:0})})]}):a==="ARRAY_LOOP"?(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u5FAA\u73AF\u6570\u7EC4",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}):null}}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:(0,e.jsxs)(e.Fragment,{children:["\u4E2D\u95F4\u53D8\u91CF",(0,e.jsx)(mn.Z,{title:"\u53D8\u91CF\u53EF\u5728\u591A\u6B21\u5FAA\u73AF\u4E2D\u5B9E\u73B0\u5171\u4EAB\uFF0C\u53EF\u7528\u4E8E\u5728\u591A\u6B21\u5FAA\u73AF\u4E2D\u4F20\u9012\u53D8\u91CF\u3002",icon:(0,e.jsx)(Nt.Z,{})})]}),fieldConfigs:Ue.x8,inputItemName:ce.dy.variableArgs,form:t,isVariable:!0})}),(0,e.jsx)(ln,{title:"\u8F93\u51FA",fieldConfigs:Ue.x8,inputItemName:ce.dy.outputArgs,form:t,isLoop:!0})]})},Di=function(n){var t=n.form,r=Ze.mH,a=t.getFieldValue("configType"),i=a===ce.Do.SET_VARIABLE;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z.Item,{name:"configType",style:{display:"flex",justifyContent:"center"},children:(0,e.jsx)(Xt.Z,{options:r})}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return i?(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8BBE\u7F6E\u53D8\u91CF",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}):null}}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return i?null:(0,e.jsx)(Gr,{title:"\u8F93\u51FA\u53D8\u91CF",fieldConfigs:Ue.x8,inputItemName:ce.dy.outputArgs,form:t})}}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return i?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(tt,{treeData:[{name:"isSuccess",dataType:N.Gi.Boolean,description:"",require:!0,systemVariable:!1,bindValue:"",key:"outputArray"}]})]}):null}})]})},Ti=function(n){var t=n.form,r=[{label:"\u5B57\u7B26\u4E32\u62FC\u63A5",value:"CONCAT"},{label:"\u5B57\u7B26\u4E32\u5206\u5272",value:"SPLIT"}],a=(0,s.useState)([{value:"\\n",label:"\u6362\u884C (\\n)"},{value:"\\t",label:"\u5236\u8868\u7B26 (\\t)"},{value:"\u3002",label:"\u53E5\u53F7 (\u3002)"},{value:",",label:"\u9017\u53F7 (,)"},{value:";",label:"\u5206\u53F7 (;)"},{value:"&nbsp;",label:"\u7A7A\u683C ( )"}]),i=z()(a,2),u=i[0],o=i[1],y=(0,s.useState)({label:"",value:""}),S=z()(y,2),C=S[0],m=S[1],p=function(j){if(j.preventDefault(),!(C.label===""||C.value==="")){var w={label:"".concat(C.label,"(").concat(C.value,")"),value:C.value};o([].concat(H()(u),[w])),m({label:"",value:""}),localStorage.setItem("arrayLinkSetting",JSON.stringify([].concat(H()(u),[w])))}};return(0,s.useEffect)(function(){var l=localStorage.getItem("arrayLinkSetting");l&&o(JSON.parse(l))},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z.Item,{name:"textHandleType",style:{display:"flex",justifyContent:"center"},children:(0,e.jsx)(Xt.Z,{options:r})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8F93\u5165",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("textHandleType")==="CONCAT"?(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u5B57\u7B26\u4E32\u62FC\u63A5"}),(0,e.jsx)(Re.Z,{placement:"topRight",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"node-title-style",children:"\u6570\u7EC4\u8FDE\u63A5\u7B26\u8BBE\u7F6E"}),(0,e.jsx)("p",{children:"\u4F7F\u7528\u4EE5\u4E0B\u7B26\u53F7\u6765\u81EA\u52A8\u8FDE\u63A5\u6570\u7EC4\u4E2D\u7684\u6BCF\u4E2A\u9879\u76EE"}),(0,e.jsx)("p",{className:"array-link-setting-select-label",children:"\u8FDE\u63A5\u7B26"}),(0,e.jsx)(I.Z.Item,{name:"join",children:(0,e.jsx)($e.default,{options:u,allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u8FDE\u63A5\u7B26\u53F7",dropdownRender:function(w){return(0,e.jsxs)(e.Fragment,{children:[w,(0,e.jsx)(Kt.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{padding:"8px"},className:"dis-sb",children:(0,e.jsxs)(zn.Z,{children:[(0,e.jsx)(ye.Z,{value:C.label,placeholder:"\u9009\u9879\u540D\u79F0",onChange:function(D){return m({value:C.value,label:D.target.value})},onKeyDown:function(D){return D.stopPropagation()}}),(0,e.jsx)(ye.Z,{value:C.value,placeholder:"\u9009\u9879\u503C",onChange:function(D){return m({label:C.label,value:D.target.value})},onKeyDown:function(D){return D.stopPropagation()}}),(0,e.jsx)(le.ZP,{type:"primary",onClick:p,children:"\u6DFB\u52A0"})]})})]})},style:{width:"100%",marginBottom:"10px"}})})]}),trigger:"click",children:(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(St.Z,{}),size:"small"})})]}),(0,e.jsx)(I.Z.Item,{name:"text",children:(0,e.jsx)(ye.Z.TextArea,{placeholder:"\u53EF\u4EE5\u4F7F\u7528{{\u53D8\u91CF\u540D}}\u7684\u65B9\u5F0F\u5F15\u7528\u8F93\u5165\u53C2\u6570\u4E2D\u7684\u53D8\u91CF",autoSize:{minRows:3,maxRows:5}})})]}):null}}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return t.getFieldValue("textHandleType")==="SPLIT"?(0,e.jsxs)("div",{className:"node-item-style",children:[(0,e.jsx)("span",{className:"node-title-style",children:"\u5206\u9694\u7B26"}),(0,e.jsx)(I.Z.Item,{name:"splits",children:(0,e.jsx)($e.default,{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u5272\u7B26\u53F7",mode:"multiple",maxTagCount:3,dropdownRender:function(w){return(0,e.jsxs)(e.Fragment,{children:[w,(0,e.jsx)(Kt.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{padding:"8px"},className:"dis-sb",children:(0,e.jsxs)(zn.Z,{children:[(0,e.jsx)(ye.Z,{value:C.label,placeholder:"\u9009\u9879\u540D\u79F0",onChange:function(D){return m({value:C.value,label:D.target.value})},onKeyDown:function(D){return D.stopPropagation()}}),(0,e.jsx)(ye.Z,{value:C.value,placeholder:"\u9009\u9879\u503C",onChange:function(D){return m({label:C.label,value:D.target.value})},onKeyDown:function(D){return D.stopPropagation()}}),(0,e.jsx)(le.ZP,{type:"primary",onClick:p,children:"\u6DFB\u52A0"})]})})]})},options:u})})]}):null}}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(tt,{treeData:t.getFieldValue("textHandleType")==="CONCAT"?[{name:"output",dataType:N.Gi.String,description:"",require:!0,systemVariable:!1,bindValue:"",key:"outputArray"}]:[{name:"output",dataType:N.Gi.Array_String,description:"",require:!0,systemVariable:!1,bindValue:"",key:"outputString"}]})]})}})]})},wi=function(n){var t=n.form,r=n.nodeConfig,a=n.type,i=n.id,u=(0,s.useState)(!1),o=z()(u,2),y=o[0],S=o[1],C=(0,we.useModel)("workflow"),m=C.setIsModified,p=t.getFieldValue("codeLanguage")===kn.vQ.JavaScript?"codeJavaScript":"codePython",l=t.getFieldValue("codeLanguage")||kn.vQ.JavaScript;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(ln,{title:"\u8F93\u5165",fieldConfigs:Ue.x8,inputItemName:ce.dy.inputArgs,form:t})}),(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"dis-sb margin-bottom",children:[(0,e.jsx)("span",{className:"node-title-style ",children:"\u4EE3\u7801"}),(0,e.jsx)(le.ZP,{icon:(0,e.jsx)(Ot.Z,{}),size:"small",type:"text",onClick:function(){return S(!0)}})]}),(0,e.jsx)(be.Z,{form:t,value:t.getFieldValue(p),onChange:function(w){t.setFieldValue(p,w),m(!0)},codeLanguage:l,height:"180px"})]})}),(0,e.jsx)(nt,{title:"\u8F93\u51FA",params:r?.outputArgs||[],form:t,inputItemName:"outputArgs"},"".concat(a,"-").concat(i,"-outputArgs")),(0,e.jsx)(bi,{form:t,isShow:y,close:function(){return S(!1)}})]})},rt={StartNode:Fi,EndNode:Si,CycleNode:Ai,VariableNode:Di,CodeNode:wi,TextProcessingNode:Ti,DocumentExtractionNode:Ii},ki=function(n){var t=n.form;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("inputArgs")&&(0,e.jsx)("div",{className:"node-item-style",children:(0,e.jsx)(Qt,{form:t,title:"\u8F93\u5165",params:t.getFieldValue("inputArgs")})})}}),(0,e.jsx)(I.Z.Item,{shouldUpdate:!0,children:function(){return t.getFieldValue("outputArgs")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"node-title-style margin-bottom",children:"\u8F93\u51FA"}),(0,e.jsx)(tt,{treeData:t.getFieldValue("outputArgs")})]})}})]})},Ri={PluginInNode:ki},Bi=rt.StartNode,Zi=rt.EndNode,Pi=rt.CycleNode,Li=rt.VariableNode,Oi=rt.TextProcessingNode,Mi=rt.CodeNode,Vi=rt.DocumentExtractionNode,Ui=wt.ModelNode,Wi=wt.IntentionNode,Ki=wt.QuestionsNode,_i=wt.HttpToolNode,$i=Ri.PluginInNode,Gi=ji.KnowledgeNode,Hi=function(){return(0,e.jsx)("div",{className:"node-title-style",children:"\u7528\u4E8E\u7EC8\u6B62\u5F53\u524D\u5FAA\u73AF\uFF0C\u6267\u884C\u4E0B\u6B21\u5FAA\u73AF"})},zi=function(){return(0,e.jsx)("div",{className:"node-title-style",children:"\u7528\u4E8E\u7ACB\u5373\u7EC8\u6B62\u5F53\u524D\u6240\u5728\u7684\u5FAA\u73AF\uFF0C\u8DF3\u51FA\u5FAA\u73AF\u4F53"})},Qi=function(n,t){var r=n.type,a={type:n.type,id:n.id,form:t,nodeConfig:n.nodeConfig};switch(r){case N.C8.Start:return(0,e.jsx)(Bi,h()({},a));case N.C8.DocumentExtraction:return(0,e.jsx)(Vi,h()({},a));case N.C8.End:case N.C8.Output:return(0,e.jsx)(Zi,h()({},a));case N.C8.Loop:return(0,e.jsx)(Pi,h()({},a));case N.C8.Variable:return(0,e.jsx)(Li,h()({},a));case N.C8.TextProcessing:return(0,e.jsx)(Oi,h()({},a));case N.C8.LLM:return(0,e.jsx)(Ui,h()({},a));case N.C8.Plugin:case N.C8.Workflow:case N.C8.LongTermMemory:case N.C8.MCP:return(0,e.jsx)($i,h()({},a));case N.C8.Code:return(0,e.jsx)(Mi,h()({},a));case N.C8.QA:return(0,e.jsx)(Ki,h()({},a));case N.C8.HTTPRequest:return(0,e.jsx)(_i,h()({},a));case N.C8.Knowledge:return(0,e.jsx)(Gi,h()({},a));case N.C8.Condition:return(0,e.jsx)(ni,h()({},a));case N.C8.IntentRecognition:return(0,e.jsx)(Wi,h()({},a));case N.C8.LoopBreak:return(0,e.jsx)(zi,{});case N.C8.LoopContinue:return(0,e.jsx)(Hi,{});case N.C8.TableDataAdd:case N.C8.TableDataDelete:case N.C8.TableDataUpdate:case N.C8.TableDataQuery:case N.C8.TableSQL:return(0,e.jsx)(di,h()({},a));default:return(0,e.jsx)(e.Fragment,{})}},Ji=function(n){var t=n.data,r=(0,s.useMemo)(function(){return{exceptionHandleType:N.Xy.INTERRUPT,timeout:180,retryCount:0,name:"exceptionHandleConfig"}},[]),a=(0,s.useState)(r),i=z()(a,2),u=i[0],o=i[1];return(0,s.useEffect)(function(){return o(function(y){return h()(h()({},y),t||{})}),function(){o(r)}},[]),(0,e.jsx)(xi,h()({},u))};function Xi(x){var n,t=x.params,r=I.Z.useFormInstance(),a=(0,Fe.g_)(t);return(0,e.jsxs)(e.Fragment,{children:[Qi(t,r),a&&(0,e.jsx)(Ji,{data:(n=t.nodeConfig)===null||n===void 0?void 0:n.exceptionHandleConfig})]})}var Yi=function(n){var t=n.data,r=n.onRefresh,a=n.onClose,i=(0,s.useState)(null),u=z()(i,2),o=u[0],y=u[1],S=(0,s.useState)(!1),C=z()(S,2),m=C[0],p=C[1],l=function(){var j=X()(_()().mark(function w(d){var D;return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,p(!0),f.next=4,Ye.ZP.apiRestoreWorkflowVersion(d.id);case 4:D=f.sent,D.code===on.ZP.success&&(xt.ZP.success("\u8FD8\u539F\u6210\u529F"),p(!1),r(),a()),f.next=11;break;case 8:f.prev=8,f.t0=f.catch(0),p(!1);case 11:case"end":return f.stop()}},w,null,[[0,8]])}));return function(d){return j.apply(this,arguments)}}();return(0,e.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",right:0,top:0,zIndex:1e3},onMouseEnter:function(){y(t.id)},onMouseLeave:function(){y(null)},children:t.id===o&&(0,e.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"100%"},children:(0,e.jsx)(le.ZP,{variant:"outlined",loading:m,onClick:function(){return l(t)},children:"\u8FD8\u539F"})})},t.id)},qi=Yi,es=E(21862),ns=E(62849),ts=E(92126),as=function(n){return(0,e.jsx)("div",{className:"icon-box-style",style:h()({width:"20px",height:"20px",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},n&&{backgroundImage:'url("'.concat(n,'")')})})},rs=function(n){var t=n.dragChild,r=n.isLoop,a=r===void 0?!1:r,i=function(o,y){t(o,y)};return(0,e.jsxs)("div",{className:"stencil-content",children:[(0,e.jsx)("p",{className:"stencil-title",children:"\u8282\u70B9\u9009\u62E9"}),(0,e.jsx)("div",{className:"stencil-list-style",children:Ue.iE.map(function(u){return(0,e.jsxs)("div",{className:"stencil-list-item",children:[u.name&&(0,e.jsx)("p",{className:"stencil-list-title",children:u.name}),(0,e.jsx)("div",{className:"stencil-list-content",children:u.children.filter(function(o){return a?o.type!==N.C8.Loop:!0}).map(function(o){var y=[N.C8.LoopBreak,N.C8.LoopContinue].includes(o?.type||""),S=y?a:!0;return S&&(0,e.jsxs)("div",{className:"child-content dis-left",draggable:"true",onDragEnd:function(m){return i(o,m)},onClick:function(){return i(o)},children:[as(o.bgIcon||""),(0,e.jsx)("span",{children:o.name})]},o.type)})})]},u.name)})})]})},ha=rs,is=[{label:"\u653E\u5927 10%",value:"+"},{label:"\u7F29\u5C0F 10%",value:"-"},{label:"\u7F29\u653E\u5230\u9002\u914D\u753B\u5E03",value:-1},{label:(0,e.jsx)("div",{style:{borderTop:"1px solid #d9d9d9",marginTop:"15px",height:0,width:"90%",marginLeft:"5%"}}),value:"divider",disabled:!0,style:{padding:0,cursor:"default"}},{label:"\u7F29\u653E\u5230 50%",value:.5},{label:"\u7F29\u653E\u5230 100%",value:1},{label:"\u7F29\u653E\u5230 150%",value:1.5},{label:"\u7F29\u653E\u5230 200%",value:2}],ss=function(n){var t=n.zoomSize,r=t===void 0?1:t,a=n.dragChild,i=n.handleTestRun,u=n.changeGraph,o=n.foldWrapItem,y=n.testRunLoading,S=(0,s.useState)(!1),C=z()(S,2),m=C[0],p=C[1],l=(0,s.useState)(0),j=z()(l,2),w=j[0],d=j[1],D=function(f){p(f),d(0)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"absolute-box",children:[(0,e.jsxs)("div",{className:"action-section",children:[(0,e.jsx)(le.ZP,{type:"text",style:{marginRight:2},icon:(0,e.jsx)(es.Z,{}),onClick:function(){var f=-10,c=Math.round(r*100),A=c+f,k=Math.max(20,Math.min(300,A)),P=k/100;u(Number(P))}}),(0,e.jsx)($e.default,{options:is,value:"".concat(Math.round(r*100),"%"),onChange:function(f){var c;if(typeof f=="string"&&["+","-"].includes(f)){var A=f==="+"?10:-10,k=Math.round(r*100),P=k+A,Z=Math.max(20,Math.min(300,P));c=Z/100}else c=f;u(Number(c))},style:{width:80,marginRight:2,height:28},popupMatchSelectWidth:!1,optionLabelProp:"displayValue",size:"small"}),(0,e.jsx)(le.ZP,{type:"text",style:{marginRight:12},icon:(0,e.jsx)(gn.Z,{}),onClick:function(){var f=10,c=Math.round(r*100),A=c+f,k=Math.max(20,Math.min(300,A)),P=k/100;u(Number(P))}}),(0,e.jsx)(Re.Z,{content:"\u7F29\u653E\u5230\u9002\u914D\u753B\u5E03",trigger:["hover"],mouseEnterDelay:1,children:(0,e.jsx)(le.ZP,{type:"text",style:{marginRight:12},icon:(0,e.jsx)(ns.Z,{}),onClick:function(){return u(-1)}})}),(0,e.jsx)(Re.Z,{content:(0,e.jsx)(ha,{isLoop:o.type===N.C8.Loop,dragChild:function(f,c){d(w+1),a(f,c,w)}}),trigger:["click"],open:m,onOpenChange:D,children:(0,e.jsx)(le.ZP,{onMouseEnter:function(){return p(!0)},icon:(0,e.jsx)(gn.Z,{}),type:"primary",onClick:function(){return p(!0)},children:"\u6DFB\u52A0\u8282\u70B9"})})]}),(0,e.jsxs)("div",{className:"action-section",style:{marginLeft:18},children:[(0,e.jsx)(ts.Z,{title:"\u8C03\u8BD5",style:{paddingRight:12,paddingLeft:12}}),(0,e.jsx)(le.ZP,{loading:y,icon:(0,e.jsx)(Je.Z,{}),variant:"solid",color:"green",onClick:i,children:"\u8BD5\u8FD0\u884C"})]})]})})},os=ss,xa=500,ls=function(n){return(n||"").length>xa?n.slice(0,xa)+"...":n},us=function(n){var t=n.visible,r=n.errorList,a=n.show,i=n.onClose,u=n.onClickItem,o=n.nodeList,y=(0,we.useModel)("workflow"),S=y.setVolid;return(0,e.jsxs)("div",{style:{right:t?"388px":"10px",display:a?"flex":"none",flexDirection:"column"},className:"error-list-style dis-col",children:[(0,e.jsxs)("div",{className:"dis-sb error-list-header",style:{height:"48px"},children:[(0,e.jsx)("span",{children:"\u9519\u8BEF\u5217\u8868"}),(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(Dn.Z,{}),onClick:function(){i(),S(!1)}})]}),r&&(0,e.jsx)("div",{className:"error-list-content",children:r.map(function(C){if(C&&C.nodeId){var m=o.find(function(p){return p.id===C.nodeId});return m?(0,e.jsxs)("div",{className:"dis-left error-list-item hover-box",onClick:function(){u(m),S(!0)},children:[(0,e.jsx)("div",{className:"image-div-style",children:(0,se.qM)(m.type)}),(0,e.jsxs)("div",{className:"content-error-item-width",children:[(0,e.jsx)("p",{className:"error-node-name",children:m.name||"\u6682\u65E0"}),C.error.length>110?(0,e.jsx)(Re.Z,{content:(0,e.jsx)("p",{children:ls(C.error)}),trigger:"hover",mouseEnterDelay:.5,placement:"top",open:void 0,children:(0,e.jsx)("p",{className:"error-text",children:C.error})}):(0,e.jsx)("p",{className:"error-text",children:C.error})]})]},C.nodeId):null}else return C?(0,e.jsx)("div",{className:"dis-left error-list-item",children:C.error.length>3e3?(0,e.jsx)(Re.Z,{content:(0,e.jsx)("p",{children:C.error}),trigger:"hover",mouseEnterDelay:.5,placement:"top",open:void 0,children:(0,e.jsx)("p",{className:"error-text",children:C.error})}):(0,e.jsx)("p",{className:"error-text",children:C.error})},C.error):null})})]})},ds=us,cs=[N.C8.Start,N.C8.End,N.C8.LoopStart,N.C8.LoopEnd],ps=function(n){var t=n.graph,r=n.changeEdgeConfigWithRefresh,a=n.copyNode,i=n.changeNodeConfigWithRefresh,u=n.removeNode,o=n.modal,y=n.message;t.bindKey(["meta+c","ctrl+c"],function(){var m=t.getSelectedCells();return m.length&&t.copy(m),!1}),t.bindKey(["meta+v","ctrl+v"],function(){if(!t.isClipboardEmpty()){var m=t.getSelectedCells();if(m&&m.length>0){var p=m[0].getData();if(p.type===N.C8.LoopStart||p.type===N.C8.LoopEnd||p.type===N.C8.Loop){y.error("\u4E0D\u80FD\u7C98\u8D34\u5FAA\u73AF\u8282\u70B9");return}if(p.type===N.C8.Start){y.error("\u4E0D\u80FD\u7C98\u8D34\u5F00\u59CB\u8282\u70B9");return}if(p.type===N.C8.End){y.error("\u4E0D\u80FD\u7C98\u8D34\u7ED3\u675F\u8282\u70B9");return}a(p)}t.cleanSelection()}return!1});var S=function(p){var l,j,w=p[0],d=(l=w.getTargetNode())===null||l===void 0?void 0:l.id,D=(j=w.getSourceNode())===null||j===void 0?void 0:j.getData(),g=w.getSourcePortId(),f=JSON.parse(JSON.stringify(D));if(D.type===N.C8.Condition){var c=et()(f.nodeConfig.conditionBranchConfigs),A;try{for(c.s();!(A=c.n()).done;){var k=A.value;g.includes(k.uuid)&&(k.nextNodeIds=k.nextNodeIds.filter(function(U){return U!==Number(d)}))}}catch(U){c.e(U)}finally{c.f()}}else if(D.type===N.C8.QA)if(f.nodeConfig.answerType===N.J4.SELECT){var P=et()(f.nodeConfig.options),Z;try{for(P.s();!(Z=P.n()).done;){var T=Z.value;g.includes(T.uuid)&&(T.nextNodeIds=T.nextNodeIds.filter(function(U){return U!==Number(d)}))}}catch(U){P.e(U)}finally{P.f()}}else{r({type:ce.I3.deleted,targetId:d,sourceNode:D,id:"0"}),t.removeCells(p);return}else{var V=et()(f.nodeConfig.intentConfigs),L;try{for(V.s();!(L=V.n()).done;){var R=L.value;g.includes(R.uuid)&&(R.nextNodeIds=R.nextNodeIds.filter(function(U){return U!==Number(d)}))}}catch(U){V.e(U)}finally{V.f()}}i({nodeData:f,targetNodeId:d?.toString()})},C=function(p,l){var j,w,d=p.getSourcePortId(),D=(j=p.getSourceNode())===null||j===void 0?void 0:j.getData(),g=(w=p.getTargetNode())===null||w===void 0?void 0:w.getData(),f=(0,Fe.y1)(p.getSourceNode(),d);if((0,Fe.Fm)(D,f)){var c,A,k=(0,Be.Xh)(D),P=((c=k.nodeConfig)===null||c===void 0?void 0:c.exceptionHandleConfig)||{},Z=P.exceptionHandleNodeIds,T=Z===void 0?[]:Z,V=T.filter(function(R){return R!==Number(g.id)}),L=h()(h()({},((A=k.nodeConfig)===null||A===void 0?void 0:A.exceptionHandleConfig)||{}),{},{exceptionHandleNodeIds:V});return k.nodeConfig.exceptionHandleConfig=L,l(k),!0}return!1};return t.bindKey(["delete","backspace"],function(){var m=t.getSelectedCells();if(m.length){var p=m[0];if(p.isEdge()){var l,j,w,d=(l=p.getSourceNode())===null||l===void 0?void 0:l.getData(),D=(j=p.getTargetNode())===null||j===void 0?void 0:j.getData(),g=(w=p.getTargetNode())===null||w===void 0?void 0:w.id;if(!(0,Fe.DU)(d,D)){y.warning("\u4E0D\u80FD\u5220\u9664\u5FAA\u73AF\u8282\u70B9\u8FDE\u7EBF");return}var f=C(p,function(c){t.removeCells([p]),i({nodeData:c,targetNodeId:D.id.toString()})});if(f)return;if(d.type===N.C8.Loop||D.type===N.C8.Loop){if(d.type===N.C8.Loop&&D.loopNodeId&&D.loopNodeId===d.id){d.innerStartNodeId=-1,i({nodeData:d,targetNodeId:g?.toString()}),t.removeCells([p]);return}if(D.type===N.C8.Loop&&d.loopNodeId&&d.loopNodeId===D.id){D.innerEndNodeId=-1,i({nodeData:D,targetNodeId:D.id.toString()}),t.removeCells([p]);return}}d.type===N.C8.Condition||d.type===N.C8.IntentRecognition||d.type===N.C8.QA?S(m):r({type:ce.I3.deleted,targetId:g,sourceNode:d,id:"0"})}else{if(cs.includes(p.getData().type)){y.warning("\u4E0D\u80FD\u5220\u9664\u5F00\u59CB\u8282\u70B9\u548C\u7ED3\u675F\u8282\u70B9");return}if(p.getData().loopNodeId||p.getData().type===N.C8.Loop){if(p.getData().type===N.C8.Loop){o.confirm({title:"\u786E\u5B9A\u8981\u5220\u9664\u5FAA\u73AF\u8282\u70B9\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){u(p.id,p.getData()),t.removeCells(m)},onCancel:function(){return!1}});return}u(p.id,p.getData())}else u(p.id)}t.removeCells(m)}return!1}),function(){}},vs=ps,fs=E(31759),Ca=E.n(fs),dt=E(51196),gs=E(54231),ms=E(81376),hs=E(61943),xs=E(90541),Cs=E(66508),ys=E(67552),Yt={clickableElement:"clickableElement___p1WCl",editableTitleInput:"editableTitleInput___kZ3s9"},ya=me().bind(Yt),Ns=(0,s.memo)(function(x){var n=x.value,t=x.disabled,r=x.onChange,a=x.onSave,i=x.onEditingStatusChange,u=x.dataId,o=(0,s.useRef)(null),y=(0,s.useState)(n),S=z()(y,2),C=S[0],m=S[1],p=(0,s.useState)(!1),l=z()(p,2),j=l[0],w=l[1];(0,s.useEffect)(function(){m(n)},[n]),(0,s.useEffect)(function(){i?.(j)},[j]);var d=function(){var A=X()(_()().mark(function k(P){var Z;return _()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:Z=P.target.value,m(Z),r?.(n);case 3:case"end":return V.stop()}},k)}));return function(P){return A.apply(this,arguments)}}(),D=function(){var A=X()(_()().mark(function k(){var P;return _()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(C!==n){T.next=3;break}return w(!1),T.abrupt("return",!1);case 3:return T.next=5,a?.(C);case 5:if(T.t0=T.sent,T.t0){T.next=8;break}T.t0=!0;case 8:return P=T.t0,P&&w(!1),T.abrupt("return",P);case 11:case"end":return T.stop()}},k)}));return function(){return A.apply(this,arguments)}}(),g=function(){C!==n&&m(n),w(!1)},f=function(k){k.key==="Escape"&&g()},c=(0,s.useCallback)(function(){w(!0)},[]);return(0,s.useEffect)(function(){if(!t)return o.current&&o.current.addEventListener("onEditTitle",c),function(){o.current&&o.current.removeEventListener("onEditTitle",c)}},[o.current]),(0,e.jsx)("div",{className:"node-editable-title-text","data-id":u,ref:o,style:{width:"calc(100% - 26px)",maxWidth:300},children:j?(0,e.jsx)(ye.Z,{size:"small",className:ya(Yt.editableTitleInput),autoFocus:j,value:C,onChange:d,onBlur:D,onPressEnter:D,onKeyDown:f}):(0,e.jsx)("div",{className:ya(Yt.clickableElement),children:C})})},function(x,n){return x.value===n.value&&x.disabled===n.disabled&&x.dataId===n.dataId}),Na=Ns,js=function(n){var t=n.graph,r=n.nodeId,a=(0,s.useState)(!1),i=z()(a,2),u=i[0],o=i[1];return(0,s.useEffect)(function(){if(t){var y=function(p){var l,j=p.node;(j==null||(l=j.getData())===null||l===void 0?void 0:l.id)===r&&o(!1)},S=function(p){var l,j=p.node;(j==null||(l=j.getData())===null||l===void 0?void 0:l.id)===r&&o(!0)};t.on("node:unselected",y),t.on("node:selected",S);var C=t.getCellById(r.toString());return o(t.isSelected(C)),function(){t.off("node:unselected",y),t.off("node:selected",S)}}},[t,r]),u},ja=js,Ea=E(35477),ba=E(15470),Fa=E(4692),Es=E(75434),bs=E(84896),ke={"xagi-nav-style2":"xagi-nav-style2___L56Sx",text:"text___bvYdz","page-container":"page-container___zBB1w",runResultContainer:"runResultContainer___peKfn",runResultHeader:"runResultHeader___Cfxpf",runResultStatus:"runResultStatus___qwys5",statusIcon:"statusIcon___GrXnz",success:"success___E4sQV",error:"error___ka9Ph",statusText:"statusText___jtf9r",runTime:"runTime___M8Jwd",collapseIcon:"collapseIcon___kXdVO",runResultBody:"runResultBody___liKCK",runResultInfo:"runResultInfo___jjjjQ",totalCount:"totalCount___iqje0",runResultPagination:"runResultPagination___C1AgQ",runResultPaginationPages:"runResultPaginationPages___yWWts",runResultPageItem:"runResultPageItem___YHKvA",active:"active___duVga",runResultPageSelect:"runResultPageSelect___vcCo2",selectArrow:"selectArrow___t89U_",onlyErrorCheckbox:"onlyErrorCheckbox___oqk2N",runResultBatch:"runResultBatch___EJ6wb",runResultBatchHeader:"runResultBatchHeader___rxC1F",runResultBatchContent:"runResultBatchContent___H70IQ",runResultSection:"runResultSection___UOHNI",runResultSectionHeader:"runResultSectionHeader___a7NiU",runResultSectionContent:"runResultSectionContent___FsJ3w",keyValueItem:"keyValueItem___Y0WRE",key:"key___tiO80",value:"value___jlGfv",runResultPageSelectRoot:"runResultPageSelectRoot___na4kg"},Le=me().bind(ke),Ia=5,Fs=function(n){var t=n.success,r=t===void 0?!0:t,a=n.loading,i=a===void 0?!1:a,u=n.time,o=u===void 0?"0.001s":u,y=n.total,S=y===void 0?10:y,C=n.current,m=C===void 0?1:C,p=n.onlyError,l=p===void 0?!1:p,j=n.onPageChange,w=n.onOnlyErrorChange,d=n.batchVariables,D=d===void 0?{}:d,g=n.inputParams,f=g===void 0?{}:g,c=n.outputResult,A=c===void 0?{}:c,k=n.collapsible,P=k===void 0?!0:k,Z=n.expanded,T=Z===void 0?!1:Z,V=n.title,L=V===void 0?"":V,R=n.onExpandChange,U=(0,s.useRef)(null),ne=(0,s.useState)(!T),q=z()(ne,2),te=q[0],Y=q[1],ie=function(){var ue=!te;Y(ue),R?.(!ue)},de=function(ue){j?.(ue)},ge=function(ue){w?.(ue.target.checked)},Ke=function(){for(var ue=[],re=Math.min(Ia,S),ee=function(pe){ue.push((0,e.jsx)("span",{className:Le(ke.runResultPageItem,tn()({},ke.active,m===pe)),onClick:function(){return de(pe)},children:pe},pe))},J=1;J<=re;J++)ee(J);return(0,e.jsxs)("div",{className:Le(ke.runResultPagination),children:[(0,e.jsx)("div",{className:Le(ke.runResultPaginationPages),children:ue}),(0,e.jsx)("div",{className:Le(ke.runResultPageSelect),children:S>Ia&&(0,e.jsx)($e.default,{value:m,onChange:de,options:Array.from({length:S},function(ae,pe){return{value:pe+1,label:pe+1}}),listHeight:100,className:ke.runResultPageSelectRoot,size:"small",getPopupContainer:function(){return U.current}})})]})},xn=function(ue,re){return(0,e.jsxs)("div",{className:Le(ke.runResultSection),children:[(0,e.jsxs)("div",{className:Le(ke.runResultSectionHeader),children:[(0,e.jsx)("span",{children:re}),(0,e.jsx)(ba.Z,{data:ue,jsonSpace:2,tooltipTitle:"\u590D\u5236"})]}),(0,e.jsx)("div",{className:Le(ke.runResultSectionContent,"overflow-y"),children:(0,e.jsx)("code",{children:JSON.stringify(ue,null,2)})})]})};return(0,e.jsxs)("div",{ref:U,className:Le(ke.runResultContainer),onClick:function(ue){ue.stopPropagation()},children:[(0,e.jsxs)("div",{className:Le(ke.runResultHeader),children:[(0,e.jsxs)("div",{className:Le(ke.runResultStatus),children:[i?(0,e.jsx)(ia.Z,{className:Le(ke.statusIcon)}):r?(0,e.jsx)(Fa.Z,{className:Le(ke.statusIcon,ke.success)}):(0,e.jsx)(Es.Z,{className:Le(ke.statusIcon,ke.error)}),(0,e.jsx)("span",{className:Le(ke.statusText),children:L||(i?"\u8FD0\u884C\u4E2D":r?"\u8FD0\u884C\u6210\u529F":"\u8FD0\u884C\u5931\u8D25")}),!i&&(0,e.jsx)("span",{className:Le(ke.runTime),children:o})]}),P&&(0,e.jsx)("div",{className:Le(ke.collapseIcon),onClick:ie,children:te?(0,e.jsx)(Mt.Z,{}):(0,e.jsx)(bs.Z,{})})]}),!te&&(0,e.jsxs)("div",{className:Le(ke.runResultBody),children:[(0,e.jsxs)("div",{className:Le(ke.runResultInfo),children:[(0,e.jsxs)("div",{className:Le(ke.totalCount),children:["\u603B\u6570: ",S]}),S>1&&!r&&(0,e.jsx)("div",{className:Le(ke.onlyErrorCheckbox),children:(0,e.jsx)(Ut.Z,{checked:l,onChange:ge,children:"\u53EA\u770B\u9519\u8BEF"})})]}),S>1&&Ke()||null,Object.keys(D).length>0&&(0,e.jsxs)("div",{className:Le(ke.runResultBatch),children:[(0,e.jsxs)("div",{className:Le(ke.runResultBatchHeader),children:[(0,e.jsx)("span",{children:"\u672C\u6B21\u6279\u5904\u7406\u53D8\u91CF"}),(0,e.jsx)(ba.Z,{data:D,jsonSpace:2,tooltipTitle:"\u590D\u5236"})]}),(0,e.jsx)("div",{className:Le(ke.runResultSectionContent,"overflow-y"),children:(0,e.jsx)("pre",{children:JSON.stringify(D,null,2)})})]}),xn(f,"\u8F93\u5165"),xn(A,"\u8F93\u51FA")]})]})},Is=Fs,Ss=function(n){var t=n.data,r=t.nodeConfig.conditionBranchConfigs;return(0,e.jsx)("div",{className:"condition-node-content-style",children:r?.map(function(a){var i,u,o,y,S=a.conditionArgs?(i=a.conditionArgs[0])===null||i===void 0||(i=i.firstArg)===null||i===void 0?void 0:i.name:"",C=((u=a.conditionArgs[0])===null||u===void 0||(u=u.secondArg)===null||u===void 0?void 0:u.name)||((o=a.conditionArgs[0])===null||o===void 0||(o=o.secondArg)===null||o===void 0?void 0:o.bindValue)||"";return(0,e.jsxs)("div",{className:"dis-left condition-item-style",children:[(0,e.jsx)("span",{className:"condition-title-sytle",children:Ze.Vy[a.branchType||ce.F0.ELSE_IF]}),(0,e.jsx)("div",{className:"flex-1 condition-node-left-input",children:S}),a.conditionArgs&&a.conditionArgs.length>0&&(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"condition-node-compare-type",children:(y=a.conditionArgs[0])!==null&&y!==void 0&&y.compareType?Ze.cr[a.conditionArgs[0].compareType]:""}),(0,e.jsx)("div",{className:"condition-node-right-input",children:C})]})]},a.uuid)})})},As=function(n){var t,r=n.data,a=r.nodeConfig.inputArgs,i=r.nodeConfig.question,u=r.nodeConfig.answerType;return(0,e.jsxs)("div",{className:"qa-node-content-style",children:[(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style",children:"\u8F93\u5165"}),a?.slice(0,2).map(function(o,y){return(0,e.jsx)(nn.Z,{children:o.name},"inputArgs-".concat(o.name,"-").concat(y))}),a&&a.length>2&&(0,e.jsxs)(nn.Z,{children:["+",a.length-2]}),!a&&(0,e.jsx)("span",{children:"\u672A\u914D\u7F6E\u8F93\u5165\u5185\u5BB9"})]}),(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style",children:"\u63D0\u95EE\u5185\u5BB9"}),(0,e.jsx)("span",{className:"question-content-style",children:i||"\u672A\u914D\u7F6E\u63D0\u95EE\u5185\u5BB9"})]}),(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style",children:"\u95EE\u7B54\u7C7B\u578B"}),(0,e.jsx)("span",{children:Ze.X6[u]})]}),u===N.J4.SELECT&&((t=r.nodeConfig.options)===null||t===void 0?void 0:t.map(function(o,y){return(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("span",{className:"text-right qa-title-style"}),(0,e.jsx)(nn.Z,{children:Ze.bQ[y]}),(0,e.jsx)("span",{className:"qa-content-style",children:o.content||"\u672A\u914D\u7F6E\u5185\u5BB9"})]},"options-".concat(o.uuid||Ze.bQ[y],"-").concat(y))}))]})},Ds=function(n){var t=n.data,r=t.nodeConfig.intentConfigs;return(0,e.jsx)("div",{className:"qa-node-content-style",children:r?.map(function(a,i){return(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsxs)("span",{className:"qa-title-style",children:["\u9009\u9879",i+1]}),(0,e.jsx)("span",{className:"qa-content-style",children:a.intent||"\u672A\u914D\u7F6E\u610F\u56FE"})]},i)})})},Ts=[N.C8.LoopStart,N.C8.LoopEnd,N.C8.Start,N.C8.End],Sa=function(n){var t,r,a=n.data,i=((a?.reduce(function(Y,ie){var de,ge;return Y+(((ie==null||(de=ie.options)===null||de===void 0?void 0:de.endTime)||0)-((ie==null||(ge=ie.options)===null||ge===void 0?void 0:ge.startTime)||0))},0)||0)/1e3).toFixed(3),u=a?.length||0,o=(0,s.useState)(u),y=z()(o,2),S=y[0],C=y[1],m=(0,s.useState)(1),p=z()(m,2),l=p[0],j=p[1],w=(0,s.useState)(!1),d=z()(w,2),D=d[0],g=d[1],f=(0,s.useState)(!1),c=z()(f,2),A=c[0],k=c[1],P=(0,s.useState)([]),Z=z()(P,2),T=Z[0],V=Z[1],L=a.every(function(Y){return Y?.status===N.Ss.FINISHED}),R=a.some(function(Y){return Y?.status===N.Ss.EXECUTING||Y?.status===N.Ss.STOP_WAIT_ANSWER}),U=function(ie){console.log("\u9875\u7801\u53D8\u5316\uFF1A",ie),j(ie)},ne=function(ie){console.log("\u53EA\u770B\u9519\u8BEF\u53D8\u5316\uFF1A",ie),g(ie)},q=function(ie){console.log("\u5C55\u5F00/\u6536\u8D77\u53D8\u5316\uFF1A",ie),k(ie)};(0,s.useEffect)(function(){V(a)},[a]),(0,s.useEffect)(function(){if(D&&!L){var Y=a.filter(function(ie){return ie?.status===N.Ss.FAILED});V(Y.length>0?Y:[])}else V(a)},[D,L]),(0,s.useEffect)(function(){C(T.length),j(1)},[T]);var te=(0,s.useCallback)(function(){var Y=a.map(function(ie){return ie?.status});switch(!0){case Y.some(function(ie){return ie===N.Ss.STOP_WAIT_ANSWER}):return"\u8BF7\u7B54\u590D\u95EE\u9898";case Y.some(function(ie){return ie===N.Ss.EXECUTING}):return"\u8FD0\u884C\u4E2D";case Y.some(function(ie){return ie===N.Ss.FAILED}):return"\u8FD0\u884C\u5931\u8D25";case Y.every(function(ie){return ie===N.Ss.FINISHED}):return"\u8FD0\u884C\u6210\u529F";default:return"\u8FD0\u884C\u5931\u8D25"}},[a]);return a?.length===0?null:(0,e.jsx)(Is,{success:L,title:te(),loading:R,collapsible:!R,time:"".concat(i,"s"),total:S,current:l,onlyError:D,onPageChange:U,onOnlyErrorChange:ne,expanded:A,onExpandChange:q,inputParams:((t=T[l-1])===null||t===void 0||(t=t.options)===null||t===void 0?void 0:t.input)||{},outputResult:((r=T[l-1])===null||r===void 0||(r=r.options)===null||r===void 0?void 0:r.data)||{}})},ws=function(n){var t,r=n.data;return(0,e.jsxs)("div",{className:"exception-handle-style",children:[(0,e.jsx)("span",{className:"exception-handle-title",children:"\u5F02\u5E38\u65F6"}),(0,e.jsx)("p",{className:"exception-handle-content",children:(t=Ze.vp.find(function(a){return a.value===r?.exceptionHandleType}))===null||t===void 0?void 0:t.label})]})},ks=function(n){var t=n.node,r=n.graph,a=t.getData(),i=ja({graph:r,nodeId:a?.id}),u=(0,s.useState)(a?.name||""),o=z()(u,2),y=o[0],S=o[1];if((0,s.useEffect)(function(){S(a?.name||"")},[a?.name]),!a)return null;var C="linear-gradient(to bottom, ".concat((0,se.ys)(a.type)," 0%, white 100%)"),m=[N.C8.QA,N.C8.Condition,N.C8.IntentRecognition].includes(a.type),p=m?"10px":"0",l=function(c){t.setData({enableMove:!c})},j=function(c){return S(c),r.trigger("node:custom:save",{data:t.getData(),payload:{name:c}}),!0},w=Ts.includes(a.type),d=a.runResults||[],D=[N.C8.LoopStart,N.C8.LoopEnd].includes(a.type)?!1:!!d.length,g=(0,Fe.g_)(a);return a?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"general-node ".concat(i?"selected-general-node":""),children:[(0,e.jsxs)("div",{className:"general-node-header",style:{background:C,marginBottom:p},children:[(0,e.jsx)("div",{className:"dis-left general-node-header-image",children:(0,se.qM)(a.type)}),(0,e.jsx)(Na,{dataId:a.id.toString(),value:y,onSave:j,disabled:w,onEditingStatusChange:l},a.id.toString())]}),a.type===N.C8.Condition&&(0,e.jsx)(Ss,{data:a}),a.type===N.C8.QA&&(0,e.jsx)(As,{data:a}),a.type===N.C8.IntentRecognition&&(0,e.jsx)(Ds,{data:a}),g&&(0,e.jsx)(ws,{data:a.nodeConfig.exceptionHandleConfig})]}),D&&(0,e.jsx)(Sa,{data:d})]}):null},Rs=function(n){var t=n.node,r=n.graph,a=t.getData(),i=(0,s.useState)(a?.name||""),u=z()(i,2),o=u[0],y=u[1],S=ja({graph:r,nodeId:a?.id}),C="linear-gradient(to bottom, ".concat((0,se.ys)(a.type)," 0%, white 42px)");(0,s.useEffect)(function(){y(a?.name||"")},[a?.name]);var m=function(d){t.setData({enableMove:!d})},p=function(d){return y(d),r.trigger("node:custom:save",{data:t.getData(),payload:{name:d}}),!0},l=a.runResults||[],j=!!l.length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"loop-node-style general-node ".concat(S?"selected-general-node":""),style:{background:C},children:[(0,e.jsxs)("div",{className:"loop-node-title-style dis-left",children:[(0,e.jsx)(ut.ZX,{style:{marginRight:"6px"}}),(0,e.jsx)(Na,{value:o,dataId:a.id.toString(),onEditingStatusChange:m,onSave:p},a.id.toString())]}),(0,e.jsx)("div",{className:"loop-node-content"})]}),j&&(0,e.jsx)(Sa,{data:l})]})};function Bs(){(0,Ea.z2)({shape:N.K$.General,component:ks}),(0,Ea.z2)({shape:N.K$.Loop,component:Rs,resizable:!0,draggable:!0})}var Zs=function(n,t){var r=2,a=2,i=Math.abs(t.x-n.x),u=Math.floor(i/3*2),o=n.x<t.x?n.x+r:n.x-r,y=t.x>n.x?t.x-a:t.x+a,S=n.y,C=t.y,m={x:o+u,y:S},p={x:y-u,y:C};return dt.y$.normalize("M ".concat(o," ").concat(S,`
     L `).concat(o+(n.x<t.x?r:-r)," ").concat(S,`
     C `).concat(m.x," ").concat(m.y," ").concat(p.x," ").concat(p.y," ").concat(y," ").concat(C,`
     L `).concat(y," ").concat(C,`
    `))},Ps=function(n){var t=n.containerId,r=n.changeDrawer,a=n.changeCondition,i=n.changeEdgeConfigWithRefresh,u=n.changeNodeConfigWithRefresh,o=n.changeZoom,y=n.createNodeByPortOrEdge,S=n.onSaveNode,C=n.onClickBlank,m=document.getElementById(t);if(!m)throw new Error("Container not found");dt.kJ.registerConnector("curveConnector",Zs,!0),dt.kS.config({markup:[{tagName:"path",selector:"wrap"},{tagName:"path",selector:"line"}],connector:{name:"curveConnector"},attrs:{wrap:{connection:!0,strokeWidth:10,strokeLinejoin:"round",cursor:"pointer",pointerEvents:"none"},line:{connection:!0,strokeWidth:1,pointerEvents:"none",targetMarker:{name:"classic",size:6}}}});var p=function(f,c,A,k,P,Z){var T=c.target.getBoundingClientRect(),V=T.left+T.width/2,L=T.top+T.height/2,R=f.clientToLocal({x:V,y:L}),U=function(Y){y({child:Y,sourceNode:A,portId:k,position:R,targetNode:P,edgeId:Z})},ne=!!(A!=null&&A.loopNodeId),q=(0,e.jsx)("div",{className:"confirm-popover",children:(0,e.jsx)(ha,{dragChild:function(Y){U(Y),At.Z.destroyAll()},isLoop:ne})});At.Z.confirm({content:q,footer:null,icon:null,width:260,maskClosable:!0,getContainer:function(){return document.body},style:{position:"fixed",left:V}})},l=new dt.kJ({container:m,grid:{visible:!0,type:"dot",size:22,args:{color:"#606060",thickness:1}},autoResize:!0,panning:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,minScale:.2,maxScale:3,modifiers:["ctrl","meta"]},background:{color:"#f2f2f2"},connecting:{router:"manhattan",connector:"curveConnector",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,allowNode:!1,allowLoop:!1,allowEdge:!1,highlight:!0,snap:{radius:22,anchor:"bbox"},createEdge:function(){return new dt.bn.kS({attrs:{line:{strokeDasharray:"5 5",strokeWidth:1,targetMarker:null,zIndex:1,style:{animation:"ant-line 30s infinite linear"}}}})},validateConnection:function(f){var c=f.sourceMagnet,A=f.targetMagnet,k=f.sourceCell,P=f.targetCell;if(!c||!A||!k||!P||k===P)return!1;var Z=A.closest(".x6-port-body"),T=c.getAttribute("port-group")||"",V=Z.getAttribute("port-group")||"",L=c.getAttribute("port"),R=Z.getAttribute("port");if(!L||!R)return!1;var U=l.getEdges(),ne=U.some(function(ie){var de=ie.getSource(),ge=ie.getTarget();return Ca()(de)==="object"&&"cell"in de&&"port"in de&&Ca()(ge)==="object"&&"cell"in ge&&"port"in ge?de.cell===k.id&&de.port===L&&ge.cell===P.id&&ge.port===R:!1});if(ne)return!1;var q=P.getData(),te=k.getData();if(te.type===N.C8.LoopBreak&&q.type!==N.C8.LoopEnd)return!1;var Y=function(de){var ge;return((ge=de.getData())===null||ge===void 0?void 0:ge.type)==="Loop"};return!Y(k)&&!Y(P)?(T===ce.TG.out||T===ce.TG.special||T===ce.TG.exception)&&V===ce.TG.in:(Y(k)||Y(P),!0)}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5147FF",stroke:"#5147FF"}}}},embedding:{enabled:!1},interacting:{nodeMovable:function(f){var c=f.cell,A=c.getData(),k=A.enableMove;return k}}}),j=function(){l.getNodes().forEach(function(f){var c=f.getPorts(),A=c.map(function(k){return h()(h()({},k),{},{attrs:h()(h()({},k.attrs),{},{circle:{r:3},pointerEvents:"all",event:"mouseenter"})})});f.prop("ports/items",A)})},w=function(f){var c=l.getNodes();c.forEach(function(Z){Z.prop("zIndex",4)});var A=c.filter(function(Z){var T=Z.getData();return T.type==="Loop"});if(A.forEach(function(Z){Z.prop("zIndex",5);var T=Z.getChildren();T?.forEach(function(V){V.prop("zIndex",8)})}),f){var k=f.getData();if(k.type==="Loop"){var P=f.getChildren();P?.forEach(function(Z){Z.isEdge()?Z.prop("zIndex",15):Z.prop("zIndex",20)}),f.prop("zIndex",10)}else f.prop("zIndex",99)}};l.use(new Cs.H).use(new hs.N).use(new gs.T).use(new ms.A).use(new xs.Y({}));var d=function(f){var c,A,k,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"active",Z=arguments.length>2?arguments[2]:void 0,T=h()(h()({},f),{},{attrs:h()(h()({},f.attrs),{},{circle:h()(h()({},((c=f.attrs)===null||c===void 0?void 0:c.circle)||{}),{},{stroke:Z||"#5147FF",fill:Z||"#5147FF"})})}),V={normal:h()(h()({},T),{},{attrs:h()(h()({},T.attrs),{},{circle:h()(h()({},T.attrs.circle),{},{r:3}),icon:h()(h()({},((A=f.attrs)===null||A===void 0?void 0:A.icon)||{}),{},{width:0,height:0,opacity:0}),hoverCircle:{pointerEvents:"visiblePainted"}})}),active:h()(h()({},T),{},{attrs:h()(h()({},T.attrs),{},{circle:h()(h()({},T.attrs.circle),{},{r:8}),icon:h()(h()({},((k=f.attrs)===null||k===void 0?void 0:k.icon)||{}),{},{width:10,height:10,x:-5,y:-5,opacity:1}),hoverCircle:{pointerEvents:"none"}})})};return V[P]};l.on("node:mouseenter",function(g){var f,c,A=g.node,k=A.getPorts(),P={in:"active",out:"active"};((f=A.getData())===null||f===void 0?void 0:f.type)==="LoopStart"&&(P.in="normal"),((c=A.getData())===null||c===void 0?void 0:c.type)==="LoopEnd"&&(P.out="normal");var Z=k.map(function(T){var V,L=d(T,P[T.group||"in"],(V=T.attrs)===null||V===void 0||(V=V.circle)===null||V===void 0?void 0:V.fill);return L});A.prop("ports/items",Z)}),l.on("node:mouseleave",function(g){var f=g.node,c=f.getPorts(),A=c.map(function(k){var P;return d(k,"normal",(P=k.attrs)===null||P===void 0||(P=P.circle)===null||P===void 0?void 0:P.fill)});f.prop("ports/items",A)}),l.on("node:port:click",function(g){var f,c=g.node,A=g.port,k=g.e,P=(f=c.getData())===null||f===void 0?void 0:f.loopNodeId;if(P){var Z,T,V,L=A?.includes("in"),R=(Z=c.getParent())===null||Z===void 0?void 0:Z.getData(),U=((T=c.getData())===null||T===void 0?void 0:T.id)===R.innerStartNodeId,ne=((V=c.getData())===null||V===void 0?void 0:V.id)===R.innerEndNodeId;if(U&&L||ne&&!L){xt.ZP.warning("\u5FAA\u73AF\u8282\u70B9\u7684\u5F00\u59CB\u548C\u7ED3\u675F\u8282\u70B9\u4E0D\u80FD\u5FEB\u6377\u6DFB\u52A0\u5176\u4ED6\u8282\u70B9");return}}p(l,k,c.getData(),A),l.select(c)}),l.on("edge:mouseenter",function(g){var f,c,A=g.edge,k=(f=A.getSourceCell())===null||f===void 0?void 0:f.getData(),P=(c=A.getTargetCell())===null||c===void 0?void 0:c.getData();k.type==="Loop"&&P.loopNodeId||k.loopNodeId&&P?.type==="Loop"||A.addTools([{name:"button",args:{markup:[{tagName:"circle",selector:"button",attrs:{r:8,stroke:"#5147FF",strokeWidth:1,fill:"#5147FF",cursor:"pointer"}},{tagName:"image",selector:"icon",attrs:{href:ys.Z,width:10,height:10,x:-5,y:-5,pointerEvents:"none"}}],distance:"50%",offset:{x:0,y:0},onClick:function(T){var V,L,R=T.e,U=(V=A.getSourceCell())===null||V===void 0?void 0:V.getData(),ne=(L=A.getTargetCell())===null||L===void 0?void 0:L.getData(),q=A.getSourcePortId();!U||!ne||(p(l,R,U,q,ne,A.id),C?.(),l.cleanSelection())}}}])}),l.on("edge:mouseleave",function(g){var f=g.edge;f.removeTools()}),l.on("node:moved",function(g){var f=g.node,c=g.e;c.stopPropagation();var A=f.getPosition(),k=A.x,P=A.y,Z=f.getData();if(Z.nodeConfig&&Z.nodeConfig.extension?(Z.nodeConfig.extension.x=k,Z.nodeConfig.extension.y=P):Z.nodeConfig.extension={x:k,y:P},Z.loopNodeId){var T=l.getCellById(Z.loopNodeId),V=T.getPosition(),L=T.getChildren();if(L&&L.length){var R=et()(L),U;try{for(R.s();!(U=R.n()).done;){var ne=U.value;if(ne.isNode()){var q=ne.getData();q.id===Z.id&&(q.nodeConfig.extension.x=k,q.nodeConfig.extension.y=P,a({nodeData:q,update:ce.Yi.moved}))}}}catch(ue){R.e(ue)}finally{R.f()}}var te=T.getSize(),Y=T.getData();Y&&(Y.nodeConfig.extension.width=te.width,Y.nodeConfig.extension.height=te.height,Y.nodeConfig.extension.x=V.x,Y.nodeConfig.extension.y=V.y,L&&L.length&&(Y.innerNodes=L.filter(function(ue){return ue?.isNode()}).map(function(ue){return ue.getData()})),a({nodeData:Y,update:ce.Yi.moved}));return}if(Z.type===N.C8.Loop){var ie=f.getChildren(),de=Z.innerNodes||[];if(ie&&ie.length){var ge=et()(ie),Ke;try{var xn=function(){var re=Ke.value;if(re.isNode()){var ee=re.getPosition(),J=re.getData();if(J.nodeConfig.extension.x=ee.x,J.nodeConfig.extension.y=ee.y,!de.find(function(pe){return pe.id===J.id}))de.push(J);else{var ae=de.findIndex(function(pe){return pe.id===J.id});de[ae]=J}}};for(ge.s();!(Ke=ge.n()).done;)xn()}catch(ue){ge.e(ue)}finally{ge.f()}}Z.innerNodes=de,Z.nodeConfig.extension.x=k,Z.nodeConfig.extension.y=P;var De=f.getSize();Z.nodeConfig.extension.width=De.width,Z.nodeConfig.extension.height=De.height,a({nodeData:Z,update:ce.Yi.moved});return}a({nodeData:Z,update:ce.Yi.moved}),w(f)}),l.on("node:mouseleave",function(){j()}),l.on("edge:removed",function(){j(),(0,Fe.$3)(l)}),l.on("blank:click",function(){var g=l.getSelectedCells();l.unselect(g),l.cleanSelection(),C?.()}),l.on("edge:click",function(g){var f=g.edge;f.attr("line/stroke","#37D0FF"),C?.()}),l.on("edge:unselected",function(g){var f=g.edge;f.attr("line/stroke","#5147FF")}),l.on("node:change:data",function(){for(var g=arguments.length,f=new Array(g),c=0;c<g;c++)f[c]=arguments[c];console.log("node:change:data",f)}),l.on("node:custom:save",function(g){var f=g.data,c=g.payload;S(f,c)}),l.on("node:selected",function(g){var f=g.node;w(f);var c=f.getData();if(!c.isFocus){var A=h()(h()({},c),{},{id:f.id});r(A)}}),l.on("node:mousedown",function(g){var f=g.node,c=f.getData();if(c.isFocus){f.updateData({isFocus:!1}),l.cleanSelection(),l.select(f);return}});var D=function(f,c){var A,k,P=f.getSourcePortId(),Z=(A=f.getSourceNode())===null||A===void 0?void 0:A.getData(),T=(k=f.getTargetNode())===null||k===void 0?void 0:k.getData(),V=(0,Fe.y1)(f.getSourceNode(),P);if((0,Fe.Fm)(Z,V)){var L,R,U=(0,Be.Xh)(Z),ne=((L=U.nodeConfig)===null||L===void 0?void 0:L.exceptionHandleConfig)||{},q=ne.exceptionHandleNodeIds,te=q===void 0?[]:q;if(te.includes(T.id))return!0;te.push(T.id);var Y=h()(h()({},((R=U.nodeConfig)===null||R===void 0?void 0:R.exceptionHandleConfig)||{}),{},{exceptionHandleNodeIds:te});return U.nodeConfig.exceptionHandleConfig=Y,c(U),!0}return!1};return l.on("edge:mousedown",function(){l.cleanSelection(),C?.()}),l.on("edge:connected",function(g){var f,c,A=g.isNew,k=g.edge;if(j(),k.setRouter("manhattan"),!!A){var P=l.getEdges(),Z=k.getTargetCellId(),T=k.getSourcePortId(),V=k.getTargetPortId(),L=(f=k.getSourceNode())===null||f===void 0?void 0:f.getData(),R=(c=k.getTargetNode())===null||c===void 0?void 0:c.getData();if(!(!L||!R||!T||!V)){var U=(0,Fe.Uj)(k,P);if(U!==!1){k.remove(),U&&typeof U=="string"&&xt.ZP.warning(U);return}var ne=D(k,function(Y){u({nodeData:Y,targetNodeId:R.id.toString()}),l.addEdge(k),(0,Fe.qf)(k),k.toFront(),(0,Fe.$3)(l)});if(!ne){if(L.type==="Loop"||R.type==="Loop"){console.log(T);var q=(0,Fe.Ob)(L,R);if(q&&typeof q!="string"){u({nodeData:q,targetNodeId:R.id.toString()}),l.addEdge(k),(0,Fe.qf)(k),k.toFront();return}}if(L.type===N.C8.Condition||L.type===N.C8.IntentRecognition||L.type===N.C8.QA&&L.nodeConfig.answerType===N.J4.SELECT){var te=(0,Fe.i6)(L,R,T);u({nodeData:te,targetNodeId:R.id.toString()})}else i({type:ce.I3.created,targetId:Z,sourceNode:L,id:k.id});l.addEdge(k),(0,Fe.qf)(k),setTimeout(function(){L.loopNodeId||R.loopNodeId?k.prop("zIndex",15):k.prop("zIndex",1),(0,Fe.$3)(l)},0)}}}}),l.on("scale",function(g){var f=g.sx;o(f)}),l.on("node:change:size",function(g){var f=g.node,c=f.getChildren();c&&c.length&&f.prop("originSize",f.getSize())}),l.on("node:change:position",function(g){var f,c=g.node;c.getData().type!=="Loop"&&c.toFront();var A=c.getParent(),k=c.getData();if(!A&&k.loopNodeId){var P=l.getCellById(k.loopNodeId);P&&P.isNode()&&(A=P,A instanceof dt.NB&&(0,Fe.HP)(A))}A&&A.isNode()&&((f=A.getData())===null||f===void 0?void 0:f.type)==="Loop"&&(0,Fe.HP)(A)}),(0,Fe.JM)({graph:l,changeZIndex:w}),l},Ls=Ps,Os=["nodeConfig"],qt="graph-container",Ms=(0,s.forwardRef)(function(x,n){var t=x.graphParams,r=x.changeDrawer,a=x.changeEdge,i=x.changeCondition,u=x.copyNode,o=x.removeNode,y=x.changeZoom,S=x.createNodeByPortOrEdge,C=x.onSaveNode,m=x.onClickBlank,p=x.onInit,l=x.onRefresh,j=ze.Z.useApp(),w=j.modal,d=j.message;Bs();var D=(0,s.useRef)(null),g=(0,s.useRef)(null),f=(0,s.useRef)(!1);function c(){var re=D.current;if(re){var ee=document.createElement("div");ee.id=qt,re?.appendChild(ee)}}var A=function(ee){var J=g.current.getNodes().filter(function(ae){var pe=ae.getData();return ee(pe)});return J.length&&J.forEach(function(ae){var pe;ae.prop("zIndex",4);var xe=ae.getData();(pe=xe.innerNodes)!==null&&pe!==void 0&&pe.length&&xe.innerNodes.forEach(function(qe){var bn=(0,se.Tw)(xe.id,qe),Bn=g.current.addNode(bn);ae.addChild(Bn)})}),J},k=function(ee){var J=ee.map(function(ae){return(0,se.jN)(ae)}).filter(Boolean);g.current.addEdges(J),(0,Fe.$3)(g.current)},P=function(ee,J){var ae=g.current.clientToGraph(ee.x,ee.y),pe=(0,lt.KW)(J),xe=pe.width,qe=pe.height,bn=g.current.addNode({shape:J.shape,id:J.id,x:ae.x,y:ae.y,width:xe,height:qe,data:h()({},J),resizable:!0,zIndex:99,ports:(0,se.Dw)(J)});if(g.current.addNode(bn),J.loopNodeId){var Bn=g.current.getCellById(bn.id),Zn=g.current.getCellById(J.loopNodeId);Zn.addChild(Bn),(0,Fe.HP)(Zn);var Jn=Zn.getSize(),it=Zn.getPosition(),Fn=Zn.getData();Fn.nodeConfig.extension=h()(h()({},Fn.nodeConfig.extension),{},{width:Jn.width,height:Jn.height,x:it.x,y:it.y}),i({nodeData:Fn})}},Z=function(ee,J){if(g.current){P(ee,J);var ae=A(function(xe){return xe.id===J.id&&xe.type==="Loop"});if(ae.length){var pe=[];ae.forEach(function(xe){var qe=xe.getData();pe=pe.concat((0,se.W8)([qe],!1)),qe.innerNodes&&qe.innerNodes.length>0&&(pe=pe.concat((0,se.W8)(qe.innerNodes,!1)))}),k(pe)}}},T=function(ee,J){if(!(!g.current||!J)){var ae=g.current.getCellById(ee);if(ae&&ae.isNode()){var pe=ae.getPosition();if(pe&&(J.nodeConfig||(J.nodeConfig={extension:{}}),J.nodeConfig.extension=h()(h()({},J.nodeConfig.extension),{},{x:pe.x,y:pe.y})),(0,Fe.J7)(J)){var xe=(0,se.Dw)(J);if(J.type===N.C8.QA||J.type===N.C8.Condition){var qe=(0,se.ZI)({data:J,ports:xe.items,type:ce.yn.update}),bn=qe.width,Bn=qe.height;ae.setSize(bn,Bn)}ae.prop("ports",xe)}ae.updateData(J)}}},V=function(ee,J,ae){if(g.current){var pe=g.current.getCellById(ae);if(!(!pe||!pe.isNode())){var xe=pe.getData();if(xe){var qe=xe.nodeConfig,bn=Ve()(xe,Os),Bn=Object.keys(ee).reduce(function(it,Fn){return typeof Fn=="string"&&Fn&&(it[Fn]=J[Fn]),it},{});T(ae,h()(h()({},bn),{},{nodeConfig:(0,Be.Gm)((0,Be.Xh)(qe),Bn)}));var Zn=bn.loopNodeId;if(Zn){var Jn=g.current.getCellById(Zn.toString());Jn&&(0,Fe.HP)(Jn)}}}}},L=function(ee,J){if(g.current&&(g.current.removeCell(ee),J&&J.loopNodeId)){var ae=g.current.getCellById(J.loopNodeId);(0,Fe.HP)(ae)}},R=function(ee){if(g.current){var J=g.current.getCellById(ee);if(J&&J.isEdge()){var ae=J.getSourceNode();if(ae){var pe=ae.getData().nextNodeIds;pe&&ae.updateData({nextNodeIds:pe.filter(function(xe){return xe!==Number(J.getTargetNode().id)})})}}g.current.removeCell(ee)}},U=function(ee,J,ae){var pe=(0,se.jN)({source:ee,target:J,zIndex:ae?25:1});g.current&&g.current.addEdge(pe)},ne=function(ee){var J=g.current.getCellById(ee);if(!(!J||!g.current)){J.updateData({isFocus:!1}),g.current.cleanSelection();var ae=g.current.getSelectedCells();g.current.unselect(ae),g.current.select(J)}},q=function(ee,J){var ae=g.current.getCellById(ee);if(!(!ae||!g.current)){var pe=ae.getData();ae.updateData({isFocus:!0,runResults:[].concat(H()((pe.runResults||[]).filter(function(xe){return xe.status!==N.Ss.EXECUTING})),[J])}),g.current.select(ae)}},te=function(){if(g.current){var ee=g.current.getNodes();ee.forEach(function(J){J.updateData({runResults:[]})})}},Y=function(){g.current&&g.current.trigger("blank:click")},ie=function(ee){g.current&&g.current.zoomTo(Number(ee))},de=function(){g.current&&g.current.zoomToFit({padding:{top:146,left:18,right:18,bottom:18},maxScale:1,minScale:.2,preserveAspectRatio:!0,useCellGeometry:!0})},ge=function(){if(g.current&&t.nodeList.length>0){g.current.clearCells();var ee=t.nodeList.filter(function(ae){return!ae.loopNodeId}),J=ee.map(function(ae){return(0,se.QP)(ae)});g.current.fromJSON({nodes:J}),A(function(ae){return ae.type===N.C8.Loop}),k(t.edgeList),g.current.once("render:done",function(){setTimeout(function(){de(),p()},20)})}},Ke=function(){if(!g.current)return{x:0,y:0,width:0,height:0};var ee=g.current.getGraphArea();return{x:ee.x,y:ee.y,width:ee.width,height:ee.height}},xn=function(){return g.current};(0,s.useImperativeHandle)(n,function(){return{getCurrentViewPort:Ke,graphAddNode:Z,graphUpdateNode:T,graphUpdateByFormData:V,graphDeleteNode:L,graphDeleteEdge:R,graphChangeZoom:ie,graphChangeZoomToFit:de,drawGraph:ge,graphSelectNode:ne,graphCreateNewEdge:U,getGraphRef:xn,graphTriggerBlankClick:Y,graphActiveNodeRunResult:q,graphResetRunResult:te}});var De=(0,s.useCallback)(function(){var re=X()(_()().mark(function ee(J){var ae;return _()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,i(J);case 2:return ae=xe.sent,ae||l(),xe.abrupt("return",ae);case 5:case"end":return xe.stop()}},ee)}));return function(ee){return re.apply(this,arguments)}}(),[i,l]),ue=(0,s.useCallback)(function(){var re=X()(_()().mark(function ee(J){var ae;return _()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,a(J);case 2:return ae=xe.sent,ae||l(),xe.abrupt("return",ae);case 5:case"end":return xe.stop()}},ee)}));return function(ee){return re.apply(this,arguments)}}(),[a,l]);return(0,s.useEffect)(function(){if(D.current){c(),g.current=Ls({containerId:qt,changeDrawer:r,changeCondition:i,changeNodeConfigWithRefresh:De,changeEdgeConfigWithRefresh:ue,changeZoom:y,createNodeByPortOrEdge:S,onSaveNode:C,onClickBlank:m});var re=vs({graph:g.current,changeEdgeConfigWithRefresh:ue,copyNode:u,changeNodeConfigWithRefresh:De,removeNode:o,modal:w,message:d});return function(){setTimeout(function(){re(),g.current&&g.current.dispose()},100)}}},[]),(0,s.useEffect)(function(){t.nodeList.length===0&&(f.current=!1)},[t.nodeList]),(0,s.useEffect)(function(){t.nodeList.length>0&&!f.current&&(ge(),f.current=!0)},[t.nodeList]),(0,e.jsx)("div",{ref:D,id:qt})}),Vs=Ms,Us=E(86230),Ws=E(61606),Ks=E(23299),_s=E(7036),$s=function(n){var t=n.isValidLoading,r=n.info,a=n.onToggleVersionHistory,i=n.setShowCreateWorkflow,u=n.showPublish,o=(0,we.useParams)(),y=o.spaceId,S=r.name,C=r.icon,m=r.publishStatus,p=r.modified,l=r.description,j=r.publishDate,w=(0,s.useMemo)(function(){if(r){var d;return!(r!=null&&(d=r.permissions)!==null&&d!==void 0&&d.includes(N.jE.Publish))}else return!1},[r]);return(0,e.jsxs)("div",{className:"fold-header-style flex items-center gap-20",children:[(0,e.jsxs)("div",{className:"dis-left flex-1",children:[(0,e.jsx)(Ws.Z,{className:"back-icon-style",onClick:function(){return(0,Us.bC)("/space/".concat(y,"/library"))}}),(0,e.jsx)("img",{src:C||(0,se.Pk)(Se.qR.Workflow),alt:"",className:"header-icon-style"}),(0,e.jsxs)("div",{className:"dis-col header-content-style ",children:[(0,e.jsxs)("div",{className:"dis-left",children:[(0,e.jsx)("strong",{className:"header-name-style",children:S}),(0,e.jsx)(Re.Z,{content:l,children:(0,e.jsx)(En.Z,{className:"mr-6"})}),m==="Published"&&(0,e.jsx)(Re.Z,{content:"\u5DF2\u53D1\u5E03",children:(0,e.jsx)(Fa.Z,{className:"mr-6",style:{color:"#00B23C"}})}),(0,e.jsx)(Ks.Z,{onClick:i}),j===null&&(0,e.jsx)(nn.Z,{color:"default",bordered:!1,style:{marginLeft:"6px"},children:"\u672A\u53D1\u5E03"}),j!==null&&j!==p&&(0,e.jsx)(nn.Z,{bordered:!1,color:"volcano",style:{marginLeft:"6px"},children:"\u6709\u66F4\u65B0\u672A\u53D1\u5E03"})]}),(0,e.jsx)("div",{className:"header-tag-style",children:(0,e.jsxs)(nn.Z,{color:"#EBECF5",style:{color:"rgba(15,21,40,0.82)"},children:["\u5DF2\u81EA\u52A8\u4FDD\u5B58 ",(0,Nn.hK)(p??new Date().toString())]})})]})]}),(0,e.jsx)(_s.Z,{className:"ico cursor-pointer",onClick:a}),(0,e.jsx)(le.ZP,{disabled:w,onClick:u,type:"primary",loading:t,children:t?"\u6821\u9A8C\u4E2D":"\u53D1\u5E03"})]})},Gs=$s,Hs=["nodeConfig"],zs=["nodeConfig"],Qs=["nodeConfig"],Js=Xn.Ne.filter(function(x){return[Se.qR.Plugin,Se.qR.Workflow,Se.qR.Table,Se.qR.MCP].includes(x.key)}),Xs=function(){var n,t,r=(0,we.useModel)("workflow"),a=r.getWorkflow,i=r.storeWorkflow,u=r.clearWorkflow,o=r.visible,y=r.setVisible,S=r.handleInitLoading,C=r.globalLoadingTime,m=(0,we.useParams)(),p=Number(m.workflowId),l=Number(m.spaceId),j=(0,s.useState)(Ze.Ec),w=z()(j,2),d=w[0],D=w[1],g=(0,s.useState)(),f=z()(g,2),c=f[0],A=f[1],k=(0,s.useState)(""),P=z()(k,2),Z=P[0],T=P[1],V=(0,s.useState)(!1),L=z()(V,2),R=L[0],U=L[1],ne=(0,s.useState)(!1),q=z()(ne,2),te=q[0],Y=q[1],ie=(0,s.useState)(!1),de=z()(ie,2),ge=de[0],Ke=de[1],xn=(0,s.useState)(!1),De=z()(xn,2),ue=De[0],re=De[1],ee=(0,s.useState)(Se.qR.Plugin),J=z()(ee,2),ae=J[0],pe=J[1],xe=(0,s.useState)({x:0,y:0}),qe=z()(xe,2),bn=qe[0],Bn=qe[1],Zn=(0,s.useState)(!1),Jn=z()(Zn,2),it=Jn[0],Fn=Jn[1],Ge=(0,s.useRef)(null),qs=I.Z.useForm(),eo=z()(qs,1),In=eo[0],no=(0,s.useState)(!1),Aa=z()(no,2),to=Aa[0],Da=Aa[1],ao=(0,s.useState)({nodeList:[],edgeList:[]}),Ta=z()(ao,2),wa=Ta[0],ea=Ta[1],ro=(0,s.useState)({question:"",options:[]}),ka=z()(ro,2),io=ka[0],so=ka[1],oo=(0,s.useState)({}),Ra=z()(oo,2),lo=Ra[0],uo=Ra[1],co=(0,s.useState)({errorList:[],show:!1}),Ba=z()(co,2),kt=Ba[0],ct=Ba[1],po=(0,s.useState)(!1),Za=z()(po,2),vo=Za[0],Pa=Za[1],Ce=(0,s.useRef)(null),La=(0,s.useRef)(0),Rt=(0,s.useRef)(),fo=(0,s.useRef)(null),go=(0,s.useState)(!1),Oa=z()(go,2),Ma=Oa[0],na=Oa[1],mo=(0,s.useState)(!1),Va=z()(mo,2),ho=Va[0],Wn=Va[1],xo=(0,we.useModel)("model"),jt=xo.setTestRun,pt=(0,we.useModel)("workflow"),Ua=pt.setReferenceList,Pn=pt.setIsModified,Co=pt.skillChange,vt=pt.setSkillChange,Bt=pt.isModified,yo=pt.setSpaceId,ft=function(){var F=new Date;A(function(v){return v?h()(h()({},v),{},{modified:F.toString()}):null})};(0,lr.Z)(Ma),or();var No=(0,s.useCallback)(function(K,F){var v=(0,lt.ed)(K,F,Ge.current);Ge.current=v},[Ge]);(0,s.useEffect)(function(){i("drawerForm",d),Co&&(In.setFieldsValue(d.nodeConfig),vt(!1))},[d]);var ta=function(){var K=X()(_()().mark(function F(){var v,b,B;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,Ye.ZP.getDetails(p);case 3:v=M.sent,A(v.data),yo(v.data.spaceId),b=v.data.nodes,B=(0,se.W8)(b),ea({edgeList:B,nodeList:b}),M.next=14;break;case 11:M.prev=11,M.t0=M.catch(0),console.error("Failed to fetch graph data:",M.t0);case 14:case"end":return M.stop()}},F,null,[[0,11]])}));return function(){return K.apply(this,arguments)}}(),jo=function(){var K=X()(_()().mark(function F(v){var b;return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return ue&&re(!1),O.next=3,Ye.ZP.updateDetails(v);case 3:b=O.sent,b.code===on.ZP.success&&(ft(),ta());case 5:case"end":return O.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Eo=function(F){if(F===-1){var v;(v=Ce.current)===null||v===void 0||v.graphChangeZoomToFit()}else{var b;(b=Ce.current)===null||b===void 0||b.graphChangeZoom(F)}},bo=function(F){A(function(v){return v?h()(h()({},v),{},{extension:{size:F}}):null})},Et=function(){var K=X()(_()().mark(function F(v){var b,B;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(v===ce.zQ.empty||La.current===v)){M.next=2;break}return M.abrupt("return",!1);case 2:return M.next=4,Ye.ZP.getOutputArgs(v);case 4:return b=M.sent,B=b.code===on.ZP.success,B&&(b.data&&b.data.previousNodes&&b.data.previousNodes.length?Ua(b.data):Ua({previousNodes:[],innerPreviousNodes:[],argMap:{}})),M.abrupt("return",B);case 8:case"end":return M.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Wa=function(){var K=X()(_()().mark(function F(v){var b,B;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Ye.ZP.getNodeConfig(v);case 2:if(b=M.sent,b.code!==on.ZP.success){M.next=7;break}return D(b.data),(B=Ce.current)===null||B===void 0||B.graphUpdateNode(String(b.data.id),b.data),M.abrupt("return",b.data);case 7:return M.abrupt("return",!1);case 8:case"end":return M.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),bt=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe,ve,fe=arguments;return _()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(b=fe.length>1&&fe[1]!==void 0?fe[1]:function(){return Et(a("drawerForm").id)},B=v.type,O=v.targetId,M=v.sourceNode,W=v.id,Ce.current){Pe.next=4;break}return Pe.abrupt("return",!1);case 4:return $=Ce.current,G=$.graphUpdateNode,oe=$.graphDeleteEdge,Pe.next=7,dr({type:B,targetId:O,sourceNode:M,id:W,graphUpdateNode:G,graphDeleteEdge:oe,callback:b});case 7:return ve=Pe.sent,ve&&No("sourceNode",{nextNodeIds:ve}),Pe.abrupt("return",ve);case 10:case"end":return Pe.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Fo=function(){var K=X()(_()().mark(function F(v){var b,B,O,M;return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(v.id!==ce.zQ.empty){$.next=2;break}return $.abrupt("return",!1);case 2:return B=(0,Be.Xh)(v),(b=Ce.current)===null||b===void 0||b.graphUpdateNode(String(B.id),B),O=!1,$.next=7,(0,lt.zD)(B);case 7:if(M=$.sent,M.code!==on.ZP.success){$.next=14;break}return v.id===a("drawerForm").id&&D(B),$.next=12,Et(a("drawerForm").id);case 12:ft(),O=!0;case 14:return $.abrupt("return",O);case 15:case"end":return $.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Ln=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe,ve,fe,Ae,Pe=arguments;return _()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(B=v.nodeData,O=v.update,M=v.targetNodeId,W=Pe.length>1&&Pe[1]!==void 0?Pe[1]:function(){return Et(a("drawerForm").id)},$=(0,Be.Xh)(B),G=O&&O===ce.Yi.moved,G&&B.id===a("drawerForm").id&&(ve=(oe=fo.current)===null||oe===void 0?void 0:oe.getFormValues(),$=h()(h()({},B),{},{nodeConfig:h()(h()(h()({},B.nodeConfig),ve),{},{extension:h()({},B.nodeConfig.extension)})})),$.id!==ce.zQ.empty){je.next=7;break}return je.abrupt("return",!1);case 7:return(b=Ce.current)===null||b===void 0||b.graphUpdateNode(String($.id),$),je.next=10,(0,lt.zD)($);case 10:if(fe=je.sent,Ae=fe&&fe.code===on.ZP.success,!Ae){je.next=20;break}if(ft(),!G){je.next=16;break}return je.abrupt("return",!0);case 16:return M&&$.type===N.C8.Loop&&Wa(Number(B.id)),$.id===a("drawerForm").id&&D($),W(),je.abrupt("return",!0);case 20:return je.abrupt("return",!1);case 21:case"end":return je.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),gt=(0,s.useCallback)(function(){var K=X()(_()().mark(function F(v){var b,B,O,M;return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return b=!1,$.prev=1,B=In.getFieldsValue(!0),([N.C8.IntentRecognition,N.C8.Condition].includes(v.type)||v.type===N.C8.QA&&B.answerType===N.J4.SELECT)&&v.id===a("drawerForm").id?(M=(0,lt.$N)(v.type,B,v.nodeConfig),O=h()(h()({},v),{},{nodeConfig:h()(h()({},v.nodeConfig),M)})):(O=h()(h()({},v),{},{nodeConfig:h()(h()({},v.nodeConfig),B)}),v.type===N.C8.QA&&(O.nextNodeIds=[])),$.next=6,Fo(O);case 6:b=$.sent,$.next=13;break;case 9:$.prev=9,$.t0=$.catch(1),console.error("\u8868\u5355\u63D0\u4EA4\u5931\u8D25:",$.t0),b=!1;case 13:return $.abrupt("return",b);case 14:case"end":return $.stop()}},F,null,[[1,9]])}));return function(F){return K.apply(this,arguments)}}(),[In]),Zt=(0,s.useCallback)(X()(_()().mark(function K(){var F,v,b,B,O,M,W;return _()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(F=!1,v=a("skillChange"),a("isModified")!==!1){G.next=4;break}return G.abrupt("return",F);case 4:return G.prev=4,Pn(!1),G.next=8,gt(a("drawerForm"));case 8:if(F=G.sent,!v){G.next=16;break}return G.next=12,Ye.ZP.getNodeConfig(a("drawerForm").id);case 12:b=G.sent,B=b.code===on.ZP.success,O=b.data,B&&O&&O.nodeConfig[Ze.Fw]?(W=(0,lt.gc)(In.getFieldsValue(!0)[Ze.Fw]||[],O.nodeConfig[Ze.Fw]),In.setFieldValue(Ze.Fw,W),vt(!1),D(b.data),(M=Ce.current)===null||M===void 0||M.graphUpdateNode(String(O.id),O)):vt(!1);case 16:G.next=22;break;case 18:G.prev=18,G.t0=G.catch(4),console.error("Failed to fetch node config:",G.t0),vt(!1);case 22:return G.abrupt("return",F);case 23:case"end":return G.stop()}},K,null,[[4,18]])})),[Pn,In,vt]),Ft=(0,s.useCallback)(function(){var K=X()(_()().mark(function F(v){var b,B,O;return _()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:b=a("isModified"),B=a("drawerForm"),b===!0&&B?.id!==0?(Pn(!1),gt(B),Rt.current&&clearTimeout(Rt.current)):v&&v.id!==0&&Et(v.id),v&&v.type!==N.C8.Start&&(jt(!1),T("")),O=a("visible"),D(function($){return jt(!1),$.id===ce.zQ.empty&&v===null?(y(!1),$):v!==null?(O||y(!0),v):(y(!1),{id:ce.zQ.empty,shape:N.K$.General,description:"",workflowId:p,type:N.C8.Start,nodeConfig:{},name:"",icon:""})});case 6:case"end":return W.stop()}},F)}));return function(F){return K.apply(this,arguments)}}(),[]),Ka=function(F){return F===N.C8.Condition||F===N.C8.IntentRecognition},Io=function(){var K=X()(_()().mark(function F(v,b){return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return vt(!0),O.next=3,Ln({nodeData:h()(h()({},v),{},{nodeConfig:h()(h()({},v.nodeConfig),{},{knowledgeBaseConfigs:b})})});case 3:case"end":return O.stop()}},F)}));return function(v,b){return K.apply(this,arguments)}}(),So=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe,ve;return _()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return b=v.sourceNode,B=v.portId,O=v.newNodeId,M=v.targetNode,W=v.isLoop,$=(0,se.k6)(b,B,O,M),Ae.next=4,Ln({nodeData:$},Be.ZT);case 4:G=Ae.sent,G&&(ve=B.split("-").slice(0,-1).join("-"),(oe=Ce.current)===null||oe===void 0||oe.graphCreateNewEdge(ve,String(O),W));case 6:case"end":return Ae.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Ao=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe,ve;return _()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return b=v.sourceNode,B=v.portId,O=v.newNodeId,M=v.targetNode,W=v.isLoop,$=(0,se.Le)({sourceNode:b,id:O,targetNodeId:M?.id}),Ae.next=4,Ln({nodeData:$},Be.ZT);case 4:G=Ae.sent,G&&(ve=B.split("-").slice(0,-1).join("-"),(oe=Ce.current)===null||oe===void 0||oe.graphCreateNewEdge(ve,String(O),W));case 6:case"end":return Ae.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Do=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W;return _()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return b=v.newNodeId,B=v.sourceNode,O=v.isLoop,G.next=3,bt({type:ce.I3.created,targetId:b.toString(),sourceNode:B},Be.ZT);case 3:M=G.sent,M&&((W=Ce.current)===null||W===void 0||W.graphCreateNewEdge(String(B.id),String(b),O));case 5:case"end":return G.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),To=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe;return _()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return b=v.newNode,B=v.targetNode,O=v.isLoop,M=(0,se.F8)(b,B),W=M.nodeData,$=M.sourcePortId,fe.next=4,Ln({nodeData:W},Be.ZT);case 4:G=fe.sent,G&&((oe=Ce.current)===null||oe===void 0||oe.graphCreateNewEdge($,String(B.id),O));case 6:case"end":return fe.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),wo=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$;return _()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return b=v.newNodeId,B=v.targetNodeId,O=v.newNode,M=v.isLoop,oe.next=3,bt({type:ce.I3.created,targetId:B,sourceNode:O},Be.ZT);case 3:W=oe.sent,W&&(($=Ce.current)===null||$===void 0||$.graphCreateNewEdge(String(b),B,M));case 5:case"end":return oe.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),ko=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe,ve,fe,Ae,Pe;return _()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(b=v.newNode,B=v.sourceNode,O=v.portId,M=v.isLoop,W=O.split("-")[0],!Ka(b.type)){je.next=10;break}return $=(0,se.F8)(b,B),G=$.nodeData,oe=$.sourcePortId,je.next=6,Ln({nodeData:G},Be.ZT);case 6:ve=je.sent,ve&&((fe=Ce.current)===null||fe===void 0||fe.graphCreateNewEdge(oe,B.id.toString(),M)),je.next=14;break;case 10:return je.next=12,bt({type:ce.I3.created,targetId:W,sourceNode:b},Be.ZT);case 12:Ae=je.sent,Ae&&((Pe=Ce.current)===null||Pe===void 0||Pe.graphCreateNewEdge(b.id.toString(),W.toString(),M));case 14:case"end":return je.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Ro=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G;return _()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(b=v.newNode,B=v.targetNode,O=v.sourceNode,M=v.edgeId,W=v.isLoop,!Ka(b.type)){ve.next=6;break}return ve.next=4,To({newNode:b,targetNode:B,isLoop:W});case 4:ve.next=8;break;case 6:return ve.next=8,wo({newNodeId:b.id,targetNodeId:B.id.toString(),newNode:b,isLoop:W});case 8:return console.timeLog("createNoeByPortOrEdge","addNode:handleTargetNodeConnection:deleteEdge",M),ve.next=11,bt({type:ce.I3.deleted,targetId:B.id.toString(),sourceNode:O},Be.ZT);case 11:$=ve.sent,$&&((G=Ce.current)===null||G===void 0||G.graphDeleteEdge(M));case 13:case"end":return ve.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Bo=function(){var K=X()(_()().mark(function F(v,b){var B,O,M,W,$,G,oe,ve,fe,Ae,Pe,Cn,je,Me,yn,Ya;return _()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(W=(0,se.uP)(v.type),$=v.nodeConfig,G=Ve()(v,Hs),oe=b.nodeConfig||{},ve=oe.toolName,fe=oe.mcpId,Ae=h()(h()({},G),{},{shape:W,nodeConfig:h()(h()({},$),ve?{toolName:ve,mcpId:fe}:{})}),Pe=$?.extension||{},(B=Ce.current)===null||B===void 0||B.graphAddNode(Pe,Ae),!(b.type===N.C8.Knowledge&&(O=b.nodeConfig)!==null&&O!==void 0&&O.knowledgeBaseConfigs)){Te.next=9;break}return Te.next=9,Io(Ae,b.nodeConfig.knowledgeBaseConfigs);case 9:return Te.next=11,Ft(Ae);case 11:if((M=Ce.current)===null||M===void 0||M.graphSelectNode(String(v.id)),ft(),!Ge.current){Te.next=49;break}if(Cn=Ge.current,je=Cn.portId,Me=Cn.edgeId,yn=!!v.loopNodeId,Ya=je.endsWith("out"),Te.prev=17,!je.includes(ce.TG.exception)){Te.next=23;break}return Te.next=21,Ao({sourceNode:Ge.current.sourceNode,portId:je,newNodeId:v.id,targetNode:Ge.current.targetNode,isLoop:yn});case 21:Te.next=35;break;case 23:if(!(je.length>15)){Te.next=28;break}return Te.next=26,So({sourceNode:Ge.current.sourceNode,portId:je,newNodeId:v.id,targetNode:Ge.current.targetNode,isLoop:yn});case 26:Te.next=35;break;case 28:if(!Ya){Te.next=33;break}return Te.next=31,Do({newNodeId:v.id,sourceNode:Ge.current.sourceNode,isLoop:yn});case 31:Te.next=35;break;case 33:return Te.next=35,ko({newNode:Ae,sourceNode:Ge.current.sourceNode,portId:je,isLoop:yn});case 35:if(!Ge.current.targetNode){Te.next=38;break}return Te.next=38,Ro({newNode:Ae,targetNode:Ge.current.targetNode,sourceNode:Ge.current.sourceNode,edgeId:Me,isLoop:yn});case 38:return Te.next=40,Et(a("drawerForm").id);case 40:Te.next=46;break;case 42:throw Te.prev=42,Te.t0=Te.catch(17),console.error("\u5904\u7406\u8282\u70B9\u8FDE\u63A5\u65F6\u53D1\u751F\u9519\u8BEF:",Te.t0),Te.t0;case 46:return Te.prev=46,Ge.current=null,Te.finish(46);case 49:case"end":return Te.stop()}},F,null,[[17,42,46,49]])}));return function(v,b){return K.apply(this,arguments)}}(),_a=function(){var K=X()(_()().mark(function F(v,b){var B,O,M,W,$,G,oe,ve,fe,Ae,Pe,Cn;return _()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(B=JSON.parse(JSON.stringify(v)),B.workflowId=p,B.extension=b,O=(0,se.ZI)({data:B,ports:[],type:ce.yn.create}),M=O.width,W=O.height,$=[N.C8.Condition,N.C8.QA,N.C8.IntentRecognition,N.C8.Loop],v.type&&$.includes(v.type)&&(B.extension=h()(h()({},b),{},{height:W,width:M})),!(d.type===N.C8.Loop||d.loopNodeId)){Me.next=15;break}if(B.type!==N.C8.Loop){Me.next=10;break}return xt.ZP.warning("\u5FAA\u73AF\u4F53\u91CC\u8BF7\u4E0D\u8981\u518D\u6DFB\u52A0\u5FAA\u73AF\u4F53"),Me.abrupt("return",!1);case 10:return B.loopNodeId=Number(d.loopNodeId)||Number(d.id),Me.next=13,Ye.ZP.getNodeConfig(B.loopNodeId);case 13:G=Me.sent,G.code===on.ZP.success&&(oe=G.data,ve=oe.nodeConfig.extension,B.extension=h()(h()({},B.extension),{},{x:(ve?.x||0)+40,y:(ve?.y||0)+110}));case 15:return Ge.current&&(fe=Ge.current.sourceNode,fe.loopNodeId&&(B.loopNodeId=fe.loopNodeId)),Ae=B.nodeConfig,Pe=Ve()(B,zs),Me.next=19,Ye.ZP.apiAddNode(h()({nodeConfigDto:h()({},Ae)},Pe));case 19:if(Cn=Me.sent,Cn.code!==on.ZP.success){Me.next=29;break}return Me.prev=21,Me.next=24,Bo(Cn.data,v);case 24:Me.next=29;break;case 26:Me.prev=26,Me.t0=Me.catch(21),console.error("\u5904\u7406\u8282\u70B9\u521B\u5EFA\u6210\u529F\u540E\u7684\u64CD\u4F5C\u5931\u8D25:",Me.t0);case 29:case"end":return Me.stop()}},F,null,[[21,26]])}));return function(v,b){return K.apply(this,arguments)}}(),$a=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe,ve,fe,Ae,Pe,Cn,je;return _()().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:return yn.next=2,Ye.ZP.apiCopyNode(v.id.toString());case 2:b=yn.sent,b.code===on.ZP.success&&(M=b.data,W=M.nodeConfig,$=Ve()(M,Qs),G=W?.extension||{},oe=v.nodeConfig||{},ve=oe.toolName,fe=oe.mcpId,Ae=h()(h()({},$),{},{shape:(0,se.uP)(b.data.type),nodeConfig:h()(h()(h()({},W),ve?{toolName:ve,mcpId:fe}:{}),{},{extension:h()(h()({},G),{},{x:(G.x||0)+32,y:(G.y||0)+32})})}),Pe={x:(G.x||0)+20,y:(G.y||0)+20},(B=Ce.current)===null||B===void 0||B.graphAddNode(Pe,Ae),Cn=(0,se.uP)(b.data.type),je=h()(h()({},b.data),{},{shape:Cn}),Ln({nodeData:je}),(O=Ce.current)===null||O===void 0||O.graphSelectNode(String(b.data.id)));case 4:case"end":return yn.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Ga=function(){var K=X()(_()().mark(function F(v,b){var B,O;return _()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return y(!1),La.current=Number(v),D({id:0,description:"",shape:N.K$.General,workflowId:p,type:N.C8.Start,nodeConfig:{},name:"",icon:""}),W.next=5,Ye.ZP.apiDeleteNode(v);case 5:B=W.sent,B.code===on.ZP.success&&((O=Ce.current)===null||O===void 0||O.graphDeleteNode(String(v)),Rt.current&&clearTimeout(Rt.current),ft(),b&&(b.type==="Loop"?Ft(null):Wa(b.loopNodeId)));case 7:case"end":return W.stop()}},F)}));return function(v,b){return K.apply(this,arguments)}}(),Zo=function(F,v){if(!(v&&v!=="workflow")){var b;if(F.targetType===Se.qR.Knowledge||F.targetType===Se.qR.Table){var B=[h()(h()({},F),{},{type:N.C8.Knowledge,knowledgeBaseId:F.targetId})],O=sessionStorage.getItem("tableType");b={name:F.name,shape:N.K$.General,description:F.description,type:F.targetType===Se.qR.Knowledge?N.C8.Knowledge:O||N.C8.TableDataQuery,typeId:F.targetId,nodeConfig:{knowledgeBaseConfigs:B,extension:{}}}}else if(F.targetType===Se.qR.Workflow||F.targetType===Se.qR.Plugin){var M=F.targetType===Se.qR.Workflow?N.C8.Workflow:N.C8.Plugin;b={name:F.name,shape:N.K$.General,description:F.description,type:M,typeId:F.targetId}}else if(F.targetType===Se.qR.MCP)b={name:F.name,shape:N.K$.General,description:F.description,type:N.C8.MCP,typeId:F.targetId,nodeConfig:{toolName:F.toolName,mcpId:F.targetId}};else{xt.ZP.warning("\u6682\u4E0D\u652F\u6301\u8BE5\u7C7B\u578B\u7EC4\u4EF6");return}_a(b,bn),sessionStorage.getItem("tableType")&&sessionStorage.removeItem("tableType"),Ke(!1)}},Ha=function(){var K=X()(_()().mark(function F(v,b,B){var O,M,W,$,G,oe;return _()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(M=v?.type||"",W=[N.C8.Plugin,N.C8.Workflow,N.C8.MCP].includes(M),$=["TableDataAdd","TableDataDelete","TableDataUpdate","TableDataQuery","TableSQL"].includes(M),G=(O=Ce.current)===null||O===void 0?void 0:O.getCurrentViewPort(),!W){fe.next=10;break}pe(M),Ke(!0),Bn((0,Fe.Pk)(b,G,B)),fe.next=20;break;case 10:if(!$){fe.next=17;break}pe(Se.qR.Table),Ke(!0),Bn((0,Fe.Pk)(b,G,B)),sessionStorage.setItem("tableType",M),fe.next=20;break;case 17:return oe=(0,Fe.Pk)(b,G,B),fe.next=20,_a(v,oe);case 20:case"end":return fe.stop()}},F)}));return function(v,b,B){return K.apply(this,arguments)}}(),Po=function(){var K=X()(_()().mark(function F(){var v,b,B,O,M,W;return _()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(Wn(!1),a("isModified")!==!0){G.next=4;break}return G.next=4,Zt();case 4:return G.next=6,Ye.ZP.getDetails(p);case 6:return b=G.sent,B=b.data.nodes,ea(function(oe){return h()(h()({},oe),{},{nodeList:B})}),Ft(b.data.startNode),(v=Ce.current)===null||v===void 0||v.graphSelectNode(String(b.data.startNode.id)),G.next=13,Ye.ZP.validWorkflow(c?.id);case 13:if(O=G.sent,O.code!==on.ZP.success){G.next=25;break}if(M=O.data.filter(function(oe){return!oe.success}),M.length!==0){G.next=20;break}return G.abrupt("return",!0);case 20:return W=M.map(function(oe){return{nodeId:oe.nodeId,error:oe.messages.join(",")}}),ct({show:!0,errorList:W}),G.abrupt("return",!1);case 23:G.next=26;break;case 25:return G.abrupt("return",!1);case 26:case"end":return G.stop()}},F)}));return function(){return K.apply(this,arguments)}}(),Lo=function(){Y(!1);var F=new Date;A(h()(h()({},c),{},{modified:F.toString(),publishDate:F.toString(),publishStatus:"Published"}))},za=function(){var F;T(""),(F=Ce.current)===null||F===void 0||F.graphResetRunResult()},Qa=function(){var K=X()(_()().mark(function F(v){var b,B;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return b={nodeId:d.id,params:v},T(""),M.next=4,(0,ra.W)({url:"".concat("","/api/workflow/test/node/execute"),method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem(mt.LA)),Accept:" application/json, text/plain, */* "},body:b,onMessage:function($){$.success?($.complete&&($.data&&$.data.output&&T($.data.output),T(JSON.stringify($.data,null,2)),(0,se.gt)({spaceId:l,workflowId:p})),$.data.status==="STOP_WAIT_ANSWER"&&(Wn(!1),U(!0),(0,se.OF)({spaceId:l,workflowId:p,value:JSON.stringify(v)}))):$.message&&T($.message)},onError:function($){console.error("\u6D41\u5F0F\u8BF7\u6C42\u5F02\u5E38:",$)},onOpen:function($){console.log("\u8FDE\u63A5\u5DF2\u5EFA\u7ACB",$.status)},onClose:function(){Wn(!1)}});case 4:B=M.sent,B();case 6:case"end":return M.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Oo=function(){var K=X()(_()().mark(function F(v){var b;return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return Wn(!0),O.next=3,(0,ra.W)({url:"".concat("","/api/workflow/test/execute"),method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem(mt.LA)),Accept:" application/json, text/plain, */* "},body:v,onMessage:function(W){if(W.data&&W.data.nodeId){var $,G={requestId:W.requestId,options:h()(h()({},W.data.result),{},{nodeId:W.data.nodeId,nodeName:W.data.nodeName}),status:W.data.status};($=Ce.current)===null||$===void 0||$.graphActiveNodeRunResult(W.data.nodeId.toString(),G)}W.success?(W.complete&&(W.data&&W.data.output&&(T(W.data.output),(0,se.gt)({spaceId:l,workflowId:p})),uo(W.nodeExecuteResultMap[(c?.startNode.id).toString()].data),T(JSON.stringify(W.data,null,2)),Wn(!1)),W.data.status==="STOP_WAIT_ANSWER"&&(Wn(!1),U(!0),(0,se.OF)({spaceId:l,workflowId:p,value:JSON.stringify(v)}),W.data.result&&so(W.data.result.data))):ct(function(oe){return W.data&&W.data.result?{errorList:[].concat(H()(oe.errorList),[W.data.result]),show:!0}:W.data?oe:{errorList:[].concat(H()(oe.errorList),[{error:W.message}]),show:!0}})},onError:function(W){console.error("\u6D41\u5F0F\u8BF7\u6C42\u5F02\u5E38:",W)},onOpen:function(W){console.log("\u8FDE\u63A5\u5DF2\u5EFA\u7ACB",W.status)},onClose:function(){Wn(!1)}});case 3:b=O.sent,b(),ft();case 6:case"end":return O.stop()}},F)}));return function(v){return K.apply(this,arguments)}}(),Ja=function(){var K=X()(_()().mark(function F(){var v,b;return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v=setTimeout(function(){Fn(!0)},300),O.prev=1,O.next=4,Po();case 4:b=O.sent,b&&(T(""),jt(!0)),O.next=11;break;case 8:O.prev=8,O.t0=O.catch(1),console.error("\u8BD5\u8FD0\u884C\u6240\u6709\u8282\u70B9\u5931\u8D25:",O.t0);case 11:return O.prev=11,clearTimeout(v),Fn(!1),O.finish(11);case 15:case"end":return O.stop()}},F,null,[[1,8,11,15]])}));return function(){return K.apply(this,arguments)}}(),Mo=(0,s.useCallback)(function(){var K=X()(_()().mark(function F(v,b){var B,O;return _()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(ct({errorList:[],show:!1}),za(),v!=="Start"){W.next=8;break}O=(0,se.lr)({spaceId:l,workflowId:p}),O?(B=h()(h()({},JSON.parse(O)),b),U(!1),(0,se.gt)({spaceId:l,workflowId:p})):B={workflowId:c?.id,params:b,requestId:(0,Ee.Z)()},Oo(B),W.next=17;break;case 8:if(v!=="Code"){W.next=16;break}if(!Bt){W.next=13;break}return Pn(!1),W.next=13,gt(a("drawerForm"));case 13:Qa(b),W.next=17;break;case 16:Qa(b);case 17:Wn(!0);case 18:case"end":return W.stop()}},F)}));return function(F,v){return K.apply(this,arguments)}}(),[Bt,d.id]),Vo=(0,s.useCallback)(function(){var K=X()(_()().mark(function F(v){return _()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:B.t0=v,B.next=B.t0==="Rename"?3:B.t0==="Delete"?5:B.t0==="Duplicate"?7:B.t0==="TestRun"?9:21;break;case 3:return Da(!0),B.abrupt("break",22);case 5:return Ga(d.id),B.abrupt("break",22);case 7:return $a(d),B.abrupt("break",22);case 9:if(!Bt){B.next=13;break}return Pn(!1),B.next=13,gt(a("drawerForm"));case 13:if(a("drawerForm").type!==N.C8.Start){B.next=18;break}return B.next=16,Ja();case 16:B.next=20;break;case 18:T(""),jt(!0);case 20:return B.abrupt("break",22);case 21:return B.abrupt("break",22);case 22:case"end":return B.stop()}},F)}));return function(F){return K.apply(this,arguments)}}(),[Bt,d.id]),Uo=(0,s.useCallback)(function(){var K;(K=Ce.current)===null||K===void 0||K.graphTriggerBlankClick()},[]),Wo=(0,s.useCallback)(function(){Ft(null),y(!1)},[]),Ko=function(F){var v=F.name,b=F.description,B=h()(h()({},d),{},{name:v,description:b});Ln({nodeData:B}),Da(!1)},_o=(0,s.useCallback)(function(K,F){var v,b=h()(h()({},K),F);Ln({nodeData:b});var B=(v=Ce.current)===null||v===void 0?void 0:v.getGraphRef();if(B){var O=B.getCellById(K.id.toString());O&&(O.updateData({name:b.name}),D(function(M){return h()(h()({},M),{},{name:b.name})}))}else console.error("graph is null")},[Ln,D]),$o=function(F){a("visible")&&F&&F.id===a("drawerForm").id||Ft(F)},Go=function(F){var v,b=(v=Ce.current)===null||v===void 0?void 0:v.getGraphRef(),B=b?.getCellById(F.toString());if(B){var O;(O=Ce.current)===null||O===void 0||O.graphSelectNode(F.toString())}},Ho=function(F){if(!(o&&F&&F.id===a("drawerForm").id)&&F){var v,b=(v=Ce.current)===null||v===void 0?void 0:v.getGraphRef(),B=b?.getCellById(F.id.toString());B&&b?.centerCell(B),Go(F.id)}},zo=function(){var K=X()(_()().mark(function F(v){var b,B,O,M,W,$,G,oe;return _()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return B=v.child,O=v.sourceNode,M=v.portId,W=v.position,$=v.targetNode,G=v.edgeId,Ge.current={sourceNode:O,portId:M,targetNode:$,edgeId:G},oe=(0,Fe.q7)({position:W,portId:M,type:B.type,hasTargetNode:!!$,sourceNodeId:O.id.toString(),graph:(b=Ce.current)===null||b===void 0?void 0:b.getGraphRef()}),fe.next=5,Ha(B,oe);case 5:case"end":return fe.stop()}},F)}));return function(v){return K.apply(this,arguments)}}();(0,s.useEffect)(function(){return ta(),function(){Pn(function(K){return K===!0&&gt(a("drawerForm")),!1}),y(!1),jt(!1),u()}},[]),(0,s.useEffect)(function(){if(d.id!==0){var K=(0,Be.Xh)(d);In.resetFields(),In.setFieldsValue(K.nodeConfig),(0,se.wK)({type:K.type,nodeConfig:K.nodeConfig,form:In})}},[d.id,d.type]);var Qo=function(){var K=X()(_()().mark(function F(){var v,b,B;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(Wn(!1),a("isModified")!==!0){M.next=4;break}return M.next=4,Zt();case 4:return M.next=6,Ye.ZP.validWorkflow(c?.id);case 6:if(v=M.sent,v.code!==on.ZP.success){M.next=18;break}if(b=v.data.filter(function(W){return!W.success}),b.length!==0){M.next=13;break}return M.abrupt("return",!0);case 13:return B=b.map(function(W){return{nodeId:W.nodeId,error:W.messages.join(",")}}),ct({show:!0,errorList:B}),M.abrupt("return",!1);case 16:M.next=19;break;case 18:return M.abrupt("return",!1);case 19:case"end":return M.stop()}},F)}));return function(){return K.apply(this,arguments)}}(),Jo=function(){var K=X()(_()().mark(function F(){var v,b;return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v=setTimeout(function(){Pa(!0)},300),O.next=3,Qo();case 3:b=O.sent,b&&(Y(!0),ct(h()(h()({},kt),{},{errorList:[],show:!1}))),v&&clearTimeout(v),Pa(!1);case 7:case"end":return O.stop()}},F)}));return function(){return K.apply(this,arguments)}}();ur({run:(0,s.useCallback)(X()(_()().mark(function K(){var F;return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return F=a("drawerForm"),console.log("useModifiedSaveUpdate: run: onSaveWorkflow",F.id,JSON.stringify(F.nodeConfig)),b.next=4,gt(F);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},K)})),[]),doNext:(0,s.useCallback)(function(){Pn(!1)},[Pn])});var Xa=function(){var K=X()(_()().mark(function F(){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return ea({nodeList:[],edgeList:[]}),b.next=3,ta();case 3:case"end":return b.stop()}},F)}));return function(){return K.apply(this,arguments)}}(),Xo=(0,s.useCallback)(function(K,F){var v=a("drawerForm").id;!Ce.current||!v||v===ce.zQ.empty||Ce.current.graphUpdateByFormData(K,F,v.toString())},[Ce.current]),Yo=aa(function(K,F){Pn(!1),Xo(K,F),Pn(!0)},500,{leading:!0,trailing:!0});return(0,e.jsxs)("div",{id:"container",children:[(0,e.jsx)(Gs,{isValidLoading:vo,info:c??{},onToggleVersionHistory:function(){return na(!0)},setShowCreateWorkflow:function(){return re(!0)},showPublish:Jo}),(0,e.jsx)(sa.Z,{spinning:C>0,indicator:(0,e.jsx)(ia.Z,{spin:!0}),wrapperClassName:"spin-workflow-global-style",children:(0,e.jsx)(Vs,{graphParams:wa,ref:Ce,changeDrawer:$o,changeEdge:bt,changeCondition:Ln,removeNode:Ga,copyNode:$a,changeZoom:bo,createNodeByPortOrEdge:zo,onSaveNode:_o,onClickBlank:Wo,onInit:S,onRefresh:Xa})}),(0,e.jsx)(os,{dragChild:Ha,foldWrapItem:d,changeGraph:Eo,handleTestRun:Ja,testRunLoading:it,zoomSize:(n=c==null||(t=c.extension)===null||t===void 0?void 0:t.size)!==null&&n!==void 0?n:1}),(0,e.jsx)(Tn,{className:"fold-wrap-style",lineMargin:!0,title:d.name,visible:o,onClose:Uo,description:d.description,backgroundColor:(0,se.ys)(d.type),icon:(0,se.qM)(d.type),showNameInput:to,changeFoldWrap:Ko,otherAction:(0,e.jsx)(Qe,{onChange:Vo,testRun:Ze.fY.includes(d.type),nodeType:d.type,action:d.type!==N.C8.Start&&d.type!==N.C8.End}),children:(0,e.jsx)("div",{className:"dispose-node-style",children:(0,e.jsx)(I.Z,{form:In,layout:"vertical",onFinishFailed:Zt,onFinish:Zt,clearOnDestroy:!0,onValuesChange:function(F){Yo(F,In.getFieldsValue(!0))},children:(0,e.jsx)(Xi,{params:d},"".concat(d.type,"-").concat(d.id,"-nodePanelDrawer"))},"".concat(d.type,"-").concat(d.id,"-form"))})},"".concat(d.type,"-").concat(d.id,"-foldWrap")),(0,e.jsx)(dn.Z,{checkTag:ae,onAdded:Zo,open:ge,tabs:Js,addComponents:[{type:Se.qR.Workflow,targetId:p,status:Se.BQ.Added}],onCancel:function(){return Ke(!1)}}),(0,e.jsx)(rr,{node:d,run:Mo,testRunResult:Z,clearRunResult:za,loading:ho,stopWait:R,formItemValue:lo,testRunParams:io}),(0,e.jsx)(cn.Z,h()({onConfirm:jo,onCancel:function(){return re(!1)},open:ue,type:N.jA.Update},c)),(0,e.jsx)(ds,{visible:o,errorList:kt.errorList,show:kt.show,onClose:function(){return ct(h()(h()({},kt),{},{errorList:[],show:!1}))},onClickItem:Ho,nodeList:wa.nodeList}),(0,e.jsx)(Gn.Z,{mode:Se.qR.Workflow,targetId:p,spaceId:l,category:c?.category,open:te,onCancel:function(){return Y(!1)},onConfirm:Lo}),(0,e.jsx)(ir.Z,{targetId:p,targetName:c?.name,targetType:Se.qR.Workflow,permissions:c?.permissions||[],visible:Ma,isDrawer:!0,onClose:function(){return na(!1)},renderActions:function(F){return(0,e.jsx)(qi,{data:F,onRefresh:Xa,onClose:function(){return na(!1)}})}})]})},Ys=Xs},48512:function(st,Sn,E){E.d(Sn,{DJ:function(){return h},RY:function(){return z},YM:function(){return le},b9:function(){return Re},iE:function(){return Kn},x8:function(){return cn}});var An=E(65173),H=E(73415),Q=E(92122),Ve=E(56769),He=E(63619),_=E(28246),On=E(43898),X=E(52676),Kn=[{name:"",key:"group1",children:[{name:"\u5927\u6A21\u578B",icon:(0,X.jsx)(H.EF,{}),bgIcon:H.G0,type:Q.C8.LLM,shape:Q.K$.General,description:"\u8C03\u7528\u5927\u8BED\u8A00\u6A21\u578B\uFF0C\u4F7F\u7528\u53D8\u91CF\u548C\u63D0\u793A\u8BCD\u751F\u6210\u56DE\u590D"},{name:"\u63D2\u4EF6",icon:(0,X.jsx)(H.KS,{}),bgIcon:H.SU,type:Q.C8.Plugin,shape:Q.K$.General,description:"\u5FC5\u5E94\u641C\u7D22\u5F15\u64CE\u3002\u5F53\u4F60\u9700\u8981\u641C\u7D22\u4F60\u4E0D\u77E5\u9053\u7684\u4FE1\u606F\uFF0C\u6BD4\u5982\u5929\u6C14..."},{name:"\u5DE5\u4F5C\u6D41",icon:(0,X.jsx)(H.fl,{}),bgIcon:H.Ls,type:Q.C8.Workflow,shape:Q.K$.General,description:"\u5FC5\u5E94\u641C\u7D22\u5F15\u64CE\u3002\u5F53\u4F60\u9700\u8981\u641C\u7D22\u4F60\u4E0D\u77E5\u9053\u7684\u4FE1\u606F\uFF0C\u6BD4\u5982\u5929\u6C14..."},{name:"MCP",icon:(0,X.jsx)(H.VE,{}),bgIcon:H.zH,type:Q.C8.MCP,shape:Q.K$.General,description:"MCP \u7EC4\u4EF6"}]},{name:"\u4E1A\u52A1\u903B\u8F91",key:"group2",children:[{name:"\u4EE3\u7801",icon:(0,X.jsx)(H.HF,{}),bgIcon:H.Po,type:Q.C8.Code,shape:Q.K$.General,description:"\u7F16\u5199\u4EE3\u7801\uFF0C\u5904\u7406\u8F93\u5165\u53D8\u91CF\u6765\u751F\u6210\u8FD4\u56DE\u503C"},{name:"\u6761\u4EF6\u5206\u652F",icon:(0,X.jsx)(H.ZO,{}),bgIcon:H.TK,type:Q.C8.Condition,shape:Q.K$.General,description:"\u8FDE\u63A5\u591A\u4E2A\u4E0B\u6E38\u5206\u652F\uFF0C\u82E5\u8BBE\u5B9A\u7684\u6761\u4EF6\u6210\u7ACB\u5219\u4EC5\u8FD0\u884C\u5BF9\u5E94\u7684\u5206\u652F\uFF0C\u82E5 \u5747\u4E0D\u6210\u7ACB\u5219\u53EA\u8FD0\u884C\u201C\u5426\u5219\u201D\u5206\u652F"},{name:"\u610F\u56FE\u8BC6\u522B",icon:(0,X.jsx)(H.mT,{}),bgIcon:H.cp,type:Q.C8.IntentRecognition,shape:Q.K$.General,description:"\u7528\u4E8E\u7528\u6237\u8F93\u5165\u7684\u610F\u56FE\u8BC6\u522B\uFF0C\u5E76\u5C06\u5176\u4E0E\u9884\u8BBE\u610F\u56FE\u9009\u9879\u8FDB\u884C\u5339\u914D\u3002"},{name:"\u5FAA\u73AF",icon:(0,X.jsx)(H.ZX,{}),bgIcon:H.bD,type:Q.C8.Loop,shape:Q.K$.Loop,description:"\u7528\u4E8E\u901A\u8FC7\u8BBE\u5B9A\u5FAA\u73AF\u6B21\u6570\u548C\u903B\u8F91\uFF0C\u91CD\u590D\u6267\u884C\u4E00\u7CFB\u5217\u4EFB\u52A1\u3002"},{name:"\u7EE7\u7EED\u5FAA\u73AF",icon:(0,X.jsx)(H.uS,{}),bgIcon:H.jI,type:Q.C8.LoopContinue,shape:Q.K$.General,description:""},{name:"\u7EC8\u6B62\u5FAA\u73AF",icon:(0,X.jsx)(H.QL,{}),bgIcon:H.J2,type:Q.C8.LoopBreak,shape:Q.K$.General,description:""}]},{name:"\u77E5\u8BC6&\u6570\u636E",key:"group3",children:[{name:"\u77E5\u8BC6\u5E93",icon:(0,X.jsx)(H.fF,{}),bgIcon:H.Lm,type:Q.C8.Knowledge,shape:Q.K$.General,description:"\u5728\u9009\u5B9A\u7684\u77E5\u8BC6\u4E2D\uFF0C\u6839\u636E\u8F93\u5165\u53D8\u91CF\u53EC\u56DE\u6700\u5339\u914D\u7684\u4FE1\u606F"},{name:"\u53D8\u91CF",icon:(0,X.jsx)(H.JU,{}),bgIcon:H.Hl,type:Q.C8.Variable,shape:Q.K$.General,description:"\u7528\u4E8E\u8BFB\u53D6\u548C\u5199\u5165\u9879\u76EE\u4E2D\u7684\u53D8\u91CF\uFF0C\u53D8\u91CF\u540D\u987B\u4E0E\u9879\u76EE\u4E2D\u7684\u53D8\u91CF\u540D\u76F8\u5339\u914D"},{name:"\u957F\u671F\u8BB0\u5FC6",icon:(0,X.jsx)(H.GY,{}),bgIcon:H.aA,type:Q.C8.LongTermMemory,shape:Q.K$.General,description:"\u7528\u4E8E\u8C03\u7528\u957F\u671F\u8BB0\u5FC6\uFF0C\u83B7\u53D6\u7528\u6237\u7684\u4E2A\u6027\u5316\u4FE1\u606F"}]},{name:"\u6570\u636E\u8868",key:"group4",children:[{name:"\u6570\u636E\u65B0\u589E",icon:(0,X.jsx)(H.wN,{}),bgIcon:H.Te,type:Q.C8.TableDataAdd,shape:Q.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u8FDB\u884C\u6570\u636E\u5199\u5165"},{name:"\u6570\u636E\u5220\u9664",icon:(0,X.jsx)(H.t_,{}),bgIcon:H.u8,type:Q.C8.TableDataDelete,shape:Q.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9AID\u8FDB\u884C\u6570\u636E\u5220\u9664"},{name:"\u6570\u636E\u66F4\u65B0",icon:(0,X.jsx)(H.Lg,{}),bgIcon:H.Og,type:Q.C8.TableDataUpdate,shape:Q.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9A\u6761\u4EF6\u8FDB\u884C\u6570\u636E\u66F4\u65B0"},{name:"\u6570\u636E\u67E5\u8BE2",icon:(0,X.jsx)(H.Qe,{}),bgIcon:H.c7,type:Q.C8.TableDataQuery,shape:Q.K$.General,description:"\u5BF9\u9009\u5B9A\u7684\u6570\u636E\u8868\u6839\u636E\u6307\u5B9A\u6761\u4EF6\u8FDB\u884C\u6570\u636E\u67E5\u8BE2"},{name:"SQL\u81EA\u5B9A\u4E49",icon:(0,X.jsx)(H.rX,{}),bgIcon:H.D9,type:Q.C8.TableSQL,shape:Q.K$.General,description:"\u53EF\u652F\u6301\u5BF9\u6570\u636E\u8868\u7684\u67E5\u8BE2\u63A7\u5236\uFF0C\u7528\u6237\u53EF\u67E5\u8BE2\u5176\u4ED6\u7528\u6237\u63D0\u4EA4\u7684\u6570\u636E\uFF0C\u7531\u5F00\u53D1\u8005\u63A7\u5236"}]},{name:"\u7EC4\u4EF6&\u5DE5\u5177",key:"group5",children:[{name:"\u95EE\u7B54",icon:(0,X.jsx)(H.MO,{}),bgIcon:H.HI,type:Q.C8.QA,shape:Q.K$.General,description:"\u652F\u6301\u4E2D\u95F4\u5411\u7528\u6237\u63D0\u95EE\u95EE\u9898"},{name:"\u6587\u672C\u5904\u7406",icon:(0,X.jsx)(H.lR,{}),bgIcon:H.v$,type:Q.C8.TextProcessing,shape:Q.K$.General,description:"\u7528\u4E8E\u5904\u7406\u591A\u4E2A\u5B57\u7B26\u4E32\u7C7B\u578B\u53D8\u91CF\u7684\u683C\u5F0F"},{name:"\u6587\u6863\u63D0\u53D6",icon:(0,X.jsx)(H.zL,{}),bgIcon:H.AR,type:Q.C8.DocumentExtraction,shape:Q.K$.General,description:"\u7528\u4E8E\u63D0\u53D6\u6587\u6863\u5185\u5BB9\uFF0C\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B: txt\u3001 markdown\u3001pdf\u3001 html\u3001 xlsx\u3001 xls\u3001 docx\u3001 csv\u3001 md\u3001 htm"},{name:"http\u8BF7\u6C42",icon:(0,X.jsx)(H.qm,{}),bgIcon:H.L5,type:Q.C8.HTTPRequest,shape:Q.K$.General,description:"\u7528\u4E8E\u914D\u7F6Ehttp\u8BF7\u6C42\u8C03\u7528\u5DF2\u6709\u7684\u670D\u52A1"}]},{name:"\u8F93\u51FA",key:"group6",children:[{name:"\u8FC7\u7A0B\u8F93\u51FA",icon:(0,X.jsx)(H.N$,{}),bgIcon:H.bi,type:Q.C8.Output,shape:Q.K$.General,description:"\u652F\u6301\u4E2D\u95F4\u8FC7\u7A0B\u7684\u6D88\u606F\u8F93\u51FA\uFF0C\u652F\u6301\u6D41\u5F0F\u548C\u975E\u6D41\u5F0F\u4E24\u79CD\u65B9\u5F0F"}]}],h=[{label:"String",value:Q.Gi.String},{label:"Integer",value:Q.Gi.Integer},{label:"Number",value:Q.Gi.Number},{label:"File",value:"File",children:[{label:"Doc",value:Q.Gi.File_Doc},{label:"Excel",value:Q.Gi.File_Excel},{label:"PPT",value:Q.Gi.File_PPT},{label:"Txt",value:Q.Gi.File_Txt},{label:"Image",value:Q.Gi.File_Image},{label:"Audio",value:Q.Gi.File_Audio},{label:"Video",value:Q.Gi.File_Video},{label:"Svg",value:Q.Gi.File_Svg},{label:"Code",value:Q.Gi.File_Code}]},{label:"Boolean",value:Q.Gi.Boolean},{label:"Object",value:Q.Gi.Object},{label:"Array<String>",value:Q.Gi.Array_String},{label:"Array<Integer>",value:Q.Gi.Array_Integer},{label:"Array<Number>",value:Q.Gi.Array_Number},{label:"Array<Boolean>",value:Q.Gi.Array_Boolean},{label:"Array<Object>",value:Q.Gi.Array_Object},{label:"Array<File>",value:"Array_File",children:[{label:"Default",value:Q.Gi.Array_File_Default},{label:"Array<Image>",value:Q.Gi.Array_File_Image},{label:"Array<Doc>",value:Q.Gi.Array_File_Doc},{label:"Array<Code>",value:Q.Gi.Array_File_Code},{label:"Array<PPT>",value:Q.Gi.Array_File_PPT},{label:"Array<Txt>",value:Q.Gi.Array_File_Txt},{label:"Array<Excel>",value:Q.Gi.Array_File_Excel},{label:"Array<Audio>",value:Q.Gi.Array_File_Audio},{label:"Array<Zip>",value:Q.Gi.Array_File_Zip},{label:"Array<Video>",value:Q.Gi.Array_File_Video},{label:"Array<Svg>",value:Q.Gi.Array_File_Svg}]}],Mn=[{label:"\u6807\u9898\u751F\u6210",icon:(0,X.jsx)(H.nG,{}),key:"\u6807\u9898\u751F\u6210",children:[{key:"output",label:"output",tag:"String"},{key:"setting",label:"Setting",tag:"Number"}]}],z=[{label:"\u4F7F\u7528\u6570\u7EC4\u5FAA\u73AF",value:"ARRAY_LOOP"},{label:"\u6307\u5B9A\u6B21\u6570\u5FAA\u73AF",value:"SPECIFY_TIMES_LOOP"},{label:"\u65E0\u9650\u5FAA\u73AF",value:"INFINITE_LOOP"}],dn=[{name:"name",placeholder:"\u53D8\u91CF\u540D",label:"\u53D8\u91CF\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u540D"}],component:He.Z,width:140},{name:"dataType",placeholder:"\u9009\u62E9\u7C7B\u578B",label:"\u53D8\u91CF\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D8\u91CF\u7C7B\u578B"}],component:_.Z,width:110,options:h},{name:"description",placeholder:"\u63CF\u8FF0",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],component:On.Z,width:0},{name:"require",placeholder:"\u53D8\u91CF\u540D",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u540D"}],component:On.Z,width:0}],cn=[{name:"name",placeholder:"\u53C2\u6570\u540D",label:"\u53C2\u6570\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"}],component:He.Z,width:100},{name:"bindValue",placeholder:"\u8F93\u5165\u6216\u5F15\u7528\u53C2\u6570\u503C",label:"\u53C2\u6570\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u503C"}],component:An.Z,width:180},{name:"description",placeholder:"\u63CF\u8FF0",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],component:On.Z,width:0}],Dn=[{name:"intent",placeholder:"\u8F93\u5165\u53C2\u6570\u503C",label:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u610F\u56FE\u7684\u63CF\u8FF0"}],component:He.Z,width:296}],I=[{name:"name",placeholder:"\u53C2\u6570\u540D",label:"\u53C2\u6570\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"}],component:He.Z,width:140},{name:"paramsValue",placeholder:"\u8F93\u5165\u6216\u5F15\u7528\u53D8\u91CF\u503C",label:"\u53D8\u91CF\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C"}],component:An.Z,width:120}],ye=[{icon:(0,X.jsx)(Ve.Z,{}),name:"\u8D44\u6E90\u5E93\u5DE5\u4F5C\u6D41",key:"resources"},{icon:(0,X.jsx)(Ve.Z,{}),name:"\u5B98\u65B9\u793A\u4F8B",key:"example"}],le=[{label:"\u7B49\u4E8E",value:"EQUAL",displayValue:"="},{label:"\u4E0D\u7B49\u4E8E",value:"NOT_EQUAL",displayValue:"\u2260"},{label:"\u5927\u4E8E",value:"GREATER_THAN",displayValue:">"},{label:"\u5927\u4E8E\u7B49\u4E8E",value:"GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u5C0F\u4E8E",value:"LESS_THAN",displayValue:"<"},{label:"\u5C0F\u4E8E\u7B49\u4E8E",value:"LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u957F\u5EA6\u5927\u4E8E",value:"LENGTH_GREATER_THAN",displayValue:">"},{label:"\u957F\u5EA6\u5927\u4E8E\u7B49\u4E8E",value:"LENGTH_GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u957F\u5EA6\u5C0F\u4E8E",value:"LENGTH_LESS_THAN",displayValue:"<"},{label:"\u957F\u5EA6\u5C0F\u4E8E\u7B49\u4E8E",value:"LENGTH_LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u5305\u542B",value:"CONTAINS",displayValue:"\u2283"},{label:"\u4E0D\u5305\u542B",value:"NOT_CONTAINS",displayValue:"\u2285"},{label:"\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F",value:"MATCH_REGEX",displayValue:"~"},{label:"\u4E3A\u7A7A",value:"IS_NULL",displayValue:"\u2205"},{label:"\u4E0D\u4E3A\u7A7A",value:"NOT_NULL",displayValue:"!\u2205"}],Re=[{label:"\u7B49\u4E8E",value:"EQUAL",displayValue:"="},{label:"\u4E0D\u7B49\u4E8E",value:"NOT_EQUAL",displayValue:"\u2260"},{label:"\u5927\u4E8E",value:"GREATER_THAN",displayValue:">"},{label:"\u5927\u4E8E\u7B49\u4E8E",value:"GREATER_THAN_OR_EQUAL",displayValue:"\u2265"},{label:"\u5C0F\u4E8E",value:"LESS_THAN",displayValue:"<"},{label:"\u5C0F\u4E8E\u7B49\u4E8E",value:"LESS_THAN_OR_EQUAL",displayValue:"\u2264"},{label:"\u5C5E\u4E8E",value:"IN",displayValue:"\u2283"},{label:"\u4E0D\u5C5E\u4E8E",value:"NOT_IN",displayValue:"\u2285"},{label:"\u4E3A\u7A7A",value:"IS_NULL",displayValue:"\u2205"},{label:"\u4E0D\u4E3A\u7A7A",value:"NOT_NULL",displayValue:"!\u2205"}]},15457:function(){},43562:function(){},47804:function(st){st.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQySURBVHgB7ZpNTFRXFMf/M8wAE8cRyaDjTAtUFIdCSGVhVy26sDY1aaVpbbuqS1vauq5tUzcVyraVbmyiC78WigvxI5IQFd3NoCKJX3w4oAMy4wAShq9hvOcak1GeH7zz4MXc90te4F3eXM77v/vOOfecsUWj0SEojEMcXiiMHYpjCQDFsQSA4lgCQHEsAaA4lgBQHEsAKI4lABTHgQVkcnISsVgMg4OD6L9/X/x8iMSjBEYfj2JsbAzJ5IS8zuXKhXvJEniWebB8eT58K1ciEAjA5/NhxYoCOBwLZ6bhMycSCVy4eAnhUBidnZ2429UlhdCDy+VCSUkJSkvX4sMNG7Bp00Z4PB4YiU2UxNIwgKmpKfy1tw4tLS2Ixx9hIXC73aip2Yaff6o1TAhDBLgXiWDnzh/R09ODxYBWxX+N/6KwsBBc2AIkk0nUfPkVent7sZjQa3HwwAHhM/LAgR0F9u//f9Fvnrh9+w6aTp4EF9YKmJlJ4aOPq6XjM4O8vDxcuXwJdrv+58haAV1dd027eWJ4eFjY0A0OLAHC7VdhNm1tbeDAEiAUCsFsOm7cAAeWABER/symv78fHHQLkJqdxdBQDGYTi8UxK2zRi24BJicmZA5gNmTD+Pg49KJbgOnpaREGZ176d5vNhtzcXHB53RyUgr/KjtehW4CZVEqKoEVFRQXOnT2Dq+0hNDUdR1FREeZLcXExmk4cl3Ocbj6FqqoqzetSwg5TBEiL946eshYNf9eLPP1d+XtZMIhdu36ZV7JC8+7e/SvKyoLyfPXq9+S5ph1p3lZGtwBZWVnimPvxnJwcaXAmwXWlcs//ptA2+B1RD8ikovx9OJ1ObTsY9QLdApAxDocTi4nWKiI7nGYIQE/aCCfHJTs7m2UHawXQZuRFyCtHowPPjcXjcRGq3jxkknMVm7Tnxvr6+jQrS16vl1UyY2WCfr9/zhg5pb11dRgZGZHnAwODqKtvmJezIgH2NTbKzxKJxDB++/0PzWsD/lXgwKoJrhNFidbW1jnj58+34Nq16yL8FYoqUa8sjM6XcLgdX2/fLsMhCUErQIvKykpwYNUD6Ca/+fY7mMmRw4ewfv0H0AvrFSgXoclMR0iO+FmuoBeWAOR8tm79DGaxsbqa/QDYNcEdO743ZRXQ/6yt/QFc2AKsXbMGe/b8aXjD4lXQymtoqBeV4VJwMaQ3uO2Lz9G47x+xCSp/6f7ACGhu8jvHjh7BJ5s3wwgM6wwRVJjo6OhAc/Np3Lx1C93dPbpCYCbUDQqKDRV5+k+3bJFOj1MFfhFDBciExKBkKBLpk43RB+JIiCoutc1Gxfhj0RxNp59Wcuw2O9xLl4rMcpnMLgu8BfCtEg1Sf0A0Sf3Iz8839KYzWTAB3hasL0hAcSwBoDiWAFAcSwAojiUAFMcSAIpjCQDFsb4tLo4xKMwTd3B2uVYQghwAAAAASUVORK5CYII="}}]);})();
