"use strict";(()=>{(self.webpackChunknuwax_frontend=self.webpackChunknuwax_frontend||[]).push([[6319],{25318:function(w,C,r){r.d(C,{Z:function(){return T}});var Z=r(48305),u=r.n(Z),j=r(62549),d=r(66701),_=r(47383),l=r(12758),v=r(9504),M=r(68108),A=r(56555),P=r(91716),o=r(75271),a={vncPreviewContainer:"vncPreviewContainer___rLF9M",controlsBar:"controlsBar___x9VWR",statusArea:"statusArea___scBVs",actionsArea:"actionsArea___FnSn7",iframeContainer:"iframeContainer___asK55",loadingOverlay:"loadingOverlay___CfTG7",loadingText:"loadingText___R1RK4",errorOverlay:"errorOverlay___HUrSY"},n=r(52676),e=function(i){var h=i.serviceUrl,x=i.cId,F=i.readOnly,g=F===void 0?!1:F,f=i.autoConnect,m=f===void 0?!1:f,R=i.style,p=i.className,S=(0,o.useState)("disconnected"),D=u()(S,2),s=D[0],t=D[1],L=(0,o.useState)(""),y=u()(L,2),$=y[0],O=y[1],H=(0,o.useState)(null),V=u()(H,2),N=V[0],K=V[1],W=(0,o.useRef)(null),G=function(){if(!x)return O("Missing required configuration (Service URL or Container ID)"),null;var B=h?.replace(/\/+$/,""),I=new URLSearchParams;return I.set("resize","scale"),I.set("autoconnect","true"),g&&I.set("view_only","true"),"".concat(B,"/computer/desktop/").concat(x,"/vnc.html?").concat(I.toString())},E=function(){var B=G();if(!B){t("error");return}t("connecting"),O(""),K(B)},z=function(){t("disconnected"),K(null),O("")};(0,o.useEffect)(function(){m&&E()},[m]),(0,o.useEffect)(function(){(s==="connected"||s==="connecting")&&E()},[h,x,g]);var Y=function(){s==="connecting"&&t("connected")},J=function(){t("error"),O("Failed to load VNC client.")};(0,o.useEffect)(function(){var c;return s==="connecting"&&(c=setTimeout(function(){W.current&&t("connected")},5e3)),function(){c&&clearTimeout(c)}},[s]);var Q=function(){switch(s){case"connected":return(0,n.jsx)(l.Z,{color:"#52c41a",children:"Connected"});case"connecting":return(0,n.jsx)(l.Z,{color:"#1890ff",children:"Connecting..."});case"disconnected":return(0,n.jsx)(l.Z,{children:"Disconnected"});case"error":return(0,n.jsx)(l.Z,{color:"#ff4d4f",children:"Error"});default:return null}};return(0,n.jsxs)("div",{className:"".concat(a.vncPreviewContainer," ").concat(p||""),style:R,children:[(0,n.jsxs)("div",{className:a.controlsBar,children:[(0,n.jsxs)("div",{className:a.statusArea,children:[(0,n.jsx)(j.Z,{}),(0,n.jsx)("span",{style:{fontWeight:500},children:"Remote Desktop"}),Q()]}),(0,n.jsx)("div",{className:a.actionsArea,children:s==="disconnected"||s==="error"?(0,n.jsx)(v.ZP,{type:"primary",icon:(0,n.jsx)(d.Z,{}),onClick:E,size:"small",children:"Connect"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.ZP,{danger:!0,icon:(0,n.jsx)(d.Z,{}),onClick:z,size:"small",children:"Disconnect"}),(0,n.jsx)(M.Z,{title:"Reconnect",children:(0,n.jsx)(v.ZP,{icon:(0,n.jsx)(_.Z,{}),onClick:function(){z(),setTimeout(E,100)},size:"small"})})]})})]}),(0,n.jsxs)("div",{className:a.iframeContainer,children:[s==="disconnected"&&(0,n.jsxs)("div",{style:{color:"#999",flexDirection:"column",display:"flex",alignItems:"center"},children:[(0,n.jsx)(j.Z,{style:{fontSize:48,marginBottom:16}}),(0,n.jsx)("p",{children:"Ready to connect"})]}),s==="connecting"?(0,n.jsxs)("div",{className:a.loadingOverlay,children:[(0,n.jsx)(A.Z,{size:"large"}),(0,n.jsx)("span",{className:a.loadingText,children:"Connecting to remote session..."})]}):null,s==="error"&&(0,n.jsx)("div",{className:a.errorOverlay,children:(0,n.jsx)(P.Z,{message:"Connection Error",description:$||"Unable to establish connection.",type:"error",showIcon:!0,action:(0,n.jsx)(v.ZP,{size:"small",type:"primary",onClick:E,children:"Retry"})})}),N&&(0,n.jsx)("iframe",{ref:W,src:N,title:"VNC Preview",scrolling:"no",onLoad:Y,onError:J,style:{display:s==="disconnected"?"none":"block"}})]})]})},T=e},57361:function(w,C,r){r.r(C);var Z=r(48305),u=r.n(Z),j=r(25318),d=r(69219),_=r(64888),l=r(50476),v=r(15286),M=r(24113),A=r(46038),P=r(7010),o=r(7914),a=r(75271),n=r(53586),e=r(52676),T=d.Z.Title,U=d.Z.Paragraph,i=d.Z.Text,h=_.Z.Content,x=function(){var g=(0,a.useState)(!1),f=u()(g,2),m=f[0],R=f[1],p=(0,n.useSearchParams)(),S=u()(p,1),D=S[0],s=D.get("cId")||"1459972",t={serviceUrl:"",cId:s,autoConnect:!0};return(0,e.jsx)(_.Z,{style:{padding:"24px",minHeight:"100vh",background:"#f0f2f5"},children:(0,e.jsxs)(h,{children:[(0,e.jsxs)(l.Z,{style:{marginBottom:"16px"},children:[(0,e.jsx)(l.Z.Item,{href:"/examples",children:"\u793A\u4F8B\u4E2D\u5FC3"}),(0,e.jsx)(l.Z.Item,{children:"VNC \u8FDC\u7A0B\u684C\u9762\u6F14\u793A"})]}),(0,e.jsxs)(v.Z,{children:[(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(T,{level:2,children:"VNC \u8FDC\u7A0B\u684C\u9762\u6F14\u793A"}),(0,e.jsxs)(U,{children:["\u6B64\u6F14\u793A\u5C55\u793A\u4E86 ",(0,e.jsx)("code",{children:"VncPreview"})," ","\u4E1A\u52A1\u7EC4\u4EF6\u3002\u5B83\u4F7F\u7528\u4EE5\u4E0B\u53C2\u6570\u8FDE\u63A5\u5230\u8FDC\u7A0B VNC \u4F1A\u8BDD\uFF1A"]}),(0,e.jsxs)(M.Z,{gutter:24,children:[(0,e.jsx)(A.Z,{span:12,children:(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:"\u670D\u52A1\u5730\u5740:"})," ",t.serviceUrl]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:"\u5BB9\u5668 ID (cId):"})," ",t.cId]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:"\u81EA\u52A8\u8FDE\u63A5:"})," \u5DF2\u542F\u7528"]})]})}),(0,e.jsx)(A.Z,{span:12,children:(0,e.jsxs)(P.Z,{direction:"vertical",style:{background:"#fafafa",padding:16,borderRadius:8,width:"100%"},children:[(0,e.jsx)(i,{strong:!0,children:"\u63A7\u5236\u9009\u9879"}),(0,e.jsxs)(P.Z,{children:[(0,e.jsx)("span",{children:"\u53EA\u8BFB\u6A21\u5F0F (View Only):"}),(0,e.jsx)(o.Z,{checked:m,onChange:function(y){return R(y)}})]}),(0,e.jsx)(i,{type:"secondary",style:{fontSize:"12px"},children:"\u4FEE\u6539\u6B64\u9009\u9879\u5C06\u81EA\u52A8\u5237\u65B0 VNC \u8FDE\u63A5\u3002"})]})})]}),(0,e.jsxs)(U,{type:"secondary",children:["\u7EC4\u4EF6\u4F1A\u81EA\u52A8\u4E3A VNC \u5730\u5740\u6DFB\u52A0 ",(0,e.jsx)("code",{children:"autoconnect=true"})," \u548C"," ",(0,e.jsx)("code",{children:"resize=scale"})," \u53C2\u6570\u3002"]})]}),(0,e.jsx)("div",{style:{height:"600px",border:"1px solid #d9d9d9",borderRadius:"8px",overflow:"hidden"},children:(0,e.jsx)(j.Z,{serviceUrl:t.serviceUrl,cId:t.cId,autoConnect:t.autoConnect,readOnly:m})})]})]})})};C.default=x}}]);})();
