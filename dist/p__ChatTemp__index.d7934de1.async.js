"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[5403],{24969:function(Ce,z,e){e.d(z,{Z:function(){return m}});var f=e(87462),p=e(67294),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},I=y,F=e(13401),C=function(r,b){return p.createElement(F.Z,(0,f.Z)({},r,{ref:b,icon:I}))},P=p.forwardRef(C),m=P},72027:function(Ce,z,e){var f=e(5574),p=e.n(f),y=e(67294),I=e(85893),F=function(P){var m=P.config,d=P.elementId,r=P.doAction,b=P.onReady,ee=(0,y.useState)(!1),N=p()(ee,2),D=N[0],x=N[1],J=(0,y.useRef)(!1),Z=function(h){return r(h),{captchaResult:!0,bizResult:!0}},k=(0,y.useCallback)(function(){var g,h;(g=document.getElementById("aliyunCaptcha-mask"))===null||g===void 0||g.remove(),(h=document.getElementById("aliyunCaptcha-window-popup"))===null||h===void 0||h.remove()},[]),R=(0,y.useCallback)(function(g){g&&x(!0)},[]);return(0,y.useEffect)(function(){return J.current=!1,m!=null&&m.captchaSceneId&&m!==null&&m!==void 0&&m.captchaPrefix&&m!==null&&m!==void 0&&m.openCaptcha&&window.initAliyunCaptcha({SceneId:m.captchaSceneId,prefix:m.captchaPrefix,mode:"popup",element:"#captcha-element",button:"#".concat(d),captchaVerifyCallback:Z,onBizResultCallback:function(){},getInstance:R,slideStyle:{width:360,height:40},language:"cn"}),k},[m,d]),(0,y.useEffect)(function(){return D&&(b?.(),console.log("\u9A8C\u8BC1\u7801\u521D\u59CB\u5316\u5B8C\u6210\uFF0ConReady\u5DF2\u8C03\u7528")),function(){}},[D]),(0,I.jsx)("div",{className:"captcha-a",children:(0,I.jsx)("div",{id:"captcha-element"})})};z.Z=(0,y.memo)(F)},8653:function(Ce,z,e){e.r(z),e.d(z,{default:function(){return Rt}});var f=e(15009),p=e.n(f),y=e(99289),I=e.n(y),F=e(97857),C=e.n(F),P=e(19632),m=e.n(P),d=e(5574),r=e.n(d),b=e(88042),ee=e(72027),N=e(86088),D=e(9783),x=e.n(D),J=e(98761),Z=e(75216),k=e(70490),R=e(13969),g=e(1675),h=e(95141),Ke=e(24969),v=e(1912),c=e(77171),O=e(45360),A=e(75991),ve=e(25278),q=e(94184),te=e.n(q),n=e(67294),M={"chat-container":"chat-container____jWhD",input:"input___D7zPP",box:"box___fRZAD","plus-box":"plus-box___h8kAc","send-box":"send-box___AQaWk",disabled:"disabled___HTGmo","chat-action":"chat-action___dDw4S","to-bottom":"to-bottom____lbyZ",visible:"visible___vqNgs"},i=e(85893),w=te().bind(M),Se=function(fe){var me,xe=fe.className,Ee=fe.onEnter,Ye=fe.visible,ze=fe.onScrollBottom,Je=(0,n.useState)([]),ie=r()(Je,2),j=ie[0],he=ie[1],L=(0,n.useState)(""),Oe=r()(L,2),pe=Oe[0],ge=Oe[1],H=(me=localStorage.getItem(g.LA))!==null&&me!==void 0?me:"",le=(0,n.useMemo)(function(){return!pe&&!(j!=null&&j.length)},[pe,j]),Qe=function(){le||(pe||j?.length>0)&&(Ee(pe,j),he([]),ge(""))},Fe=function(s){s.preventDefault();var U=s.target,K=U.value;if(s.nativeEvent.keyCode===13&&(s.nativeEvent.shiftKey||s.nativeEvent.ctrlKey)){var ue="".concat(K,`
`);ge(ue)}else s.nativeEvent.keyCode===13&&(K.trim()||j!=null&&j.length)&&(Ee(K,j),he([]),ge(""))},Re=function(s){if(s.file.status!=="uploading"&&s.file.status==="done"){var U,K;if(((U=s.file.response)===null||U===void 0?void 0:U.code)!==k.Gh){var ue;O.ZP.warning((ue=s.file.response)===null||ue===void 0?void 0:ue.message);return}var V=(K=s.file.response)===null||K===void 0?void 0:K.data,Ie=m()(j);Ie.push({key:V?.key||"",name:V?.fileName||s.file.name||"",type:V?.mimeType||s.file.type||"",size:V?.size||s.file.size||0,url:V?.url||s.file.url||"",uid:s.file.uid,status:s.file.status||h.KM.done,percent:s.file.percent,response:s.file.response}),he(Ie)}},_e=function(s){var U=m()(j);U.splice(U.findIndex(function(K){return K.uid===s}),1),he(U)};return(0,i.jsxs)("div",{className:w("relative","w-full",xe),children:[(0,i.jsxs)("div",{className:w(M["chat-container"],"flex","flex-col"),children:[(0,i.jsx)(Z.Z,{condition:j?.length,children:(0,i.jsx)(J.Z,{files:j,onDel:_e})}),(0,i.jsxs)("div",{className:w("flex","items-center"),children:[(0,i.jsx)(A.Z,{action:R.GI,onChange:Re,headers:{Authorization:H?"Bearer ".concat(H):""},data:{type:"tmp"},showUploadList:!1,children:(0,i.jsx)("span",{className:w("flex","items-center","content-center","cursor-pointer",M.box,M["plus-box"]),children:(0,i.jsx)(Ke.Z,{})})}),(0,i.jsx)(ve.Z,{className:w("flex-1"),value:pe,onChange:function(s){return ge(s.target.value)},rootClassName:w(M.input,"flex-1"),onPressEnter:Fe,placeholder:"\u76F4\u63A5\u8F93\u5165\u6307\u4EE4\uFF1B\u53EF\u901A\u8FC7\u56DE\u8F66\u6362\u884C"}),(0,i.jsx)("span",{onClick:Qe,className:w("flex","items-center","content-center","cursor-pointer",M.box,M["send-box"],x()({},M.disabled,le)),children:(0,i.jsx)(v.Z,{})})]})]}),(0,i.jsx)("div",{className:w(M["chat-action"]),children:(0,i.jsx)("div",{className:w(M["to-bottom"],x()({},M.visible,Ye)),onClick:ze,children:(0,i.jsx)(c.Z,{})})})]})},Ve=Se,Ge=e(69478),It=e(56265),ot=e(88639),At=e(49215),it=e(7986),B=e(91120),lt=e(89575),jt=e(4948),Dt=e(50888),ut=e(99659),st=e(99859),ct=e(96486),Mt=e(30381),we=e.n(Mt),We=e(39902),He=e(88773),Q={"title-box":"title-box___h3yyc",title:"title___UZcm9","main-content":"main-content___MqMv1","chat-wrapper":"chat-wrapper___vWLVs",loading:"loading___GDPOp","chat-input-container":"chat-input-container____KoL0","welcome-text":"welcome-text___OHAOn","phone-chat-item":"phone-chat-item___h4FQ4","input-container":"input-container___rucsf","phone-container":"phone-container___JPb_R","captcha-button":"captcha-button___bPGZD"},W=te().bind(Q),Ft=function(){var fe,me,xe,Ee,Ye=(0,We.useModel)("chat"),ze=Ye.handleChatProcessingList,Je=(0,We.useParams)(),ie=Je.chatKey,j=(0,n.useState)(),he=r()(j,2),L=he[0],Oe=he[1],pe=(0,n.useState)([]),ge=r()(pe,2),H=ge[0],le=ge[1],Qe=(0,n.useState)([]),Fe=r()(Qe,2),Re=Fe[0],_e=Fe[1],ne=(0,n.useRef)(null),s=(0,n.useRef)(null),U=(0,n.useRef)(null),K=(0,n.useRef)(),ue=(0,n.useRef)(""),V=(0,n.useState)(!1),Ie=r()(V,2),Nt=Ie[0],Ae=Ie[1],Zt=(0,n.useState)(!1),dt=r()(Zt,2),Bt=dt[0],Ut=dt[1],ye=(0,n.useRef)(!0),Kt=(0,n.useState)(!1),vt=r()(Kt,2),ft=vt[0],je=vt[1],Vt=(0,n.useState)([]),mt=r()(Vt,2),Te=mt[0],Gt=mt[1],wt=(0,n.useState)([]),ht=r()(wt,2),$e=ht[0],pt=ht[1],Wt=(0,n.useState)([]),gt=r()(Wt,2),Le=gt[0],Ht=gt[1],Yt=(0,n.useState)(null),_t=r()(Yt,2),De=_t[0],zt=_t[1],Jt=(0,n.useState)([]),Ct=r()(Jt,2),Me=Ct[0],Qt=Ct[1],Ne=(0,n.useRef)(!1),St=(0,n.useRef)(""),Xe="aliyun-captcha-id",Et=(0,We.useModel)("tenantConfigInfo"),ae=Et.tenantConfigInfo,$t=Et.runTenantConfig,ke=(0,n.useRef)(),Xt=st.Z.useForm(),kt=r()(Xt,1),Pe=kt[0],qt=(0,n.useState)(null),yt=r()(qt,2),Ze=yt[0],qe=yt[1],Be=st.Z.useWatch([],{form:Pe,preserve:!0});(0,n.useEffect)(function(){Be&&Object.keys(Be).length===0||Pe.validateFields({validateOnly:!0}).then(function(){return qe(Be)}).catch(function(){return qe(null)})},[Pe,Be]),(0,n.useEffect)(function(){De&&(Pe.setFieldsValue(De),Ne.current=!0,qe(De))},[De]);var Tt=(0,n.useMemo)(function(){if(Me?.length>0){if(!Ze)return!0;var a=(0,lt.VL)(Me,Object.keys(Ze));return!a}return!1},[Me,Ze]),et=function(){ye.current&&(U.current=setTimeout(function(){var t,l;(t=ne.current)===null||t===void 0||t.scrollTo({top:(l=ne.current)===null||l===void 0?void 0:l.scrollHeight,behavior:"smooth"})},400))},en=(0,ut.Z)(it.mY,{manual:!0,debounceWait:300,onSuccess:function(t){var l,u,_,E,T,re;Ae(!1);var o=t.data;if(Oe(o),Ut(!0),document.title="\u548C".concat(o==null||(l=o.agent)===null||l===void 0?void 0:l.name,"\u5F00\u59CB\u4F1A\u8BDD")||0,o!=null&&(u=o.agent)!==null&&u!==void 0&&u.icon){var S,G=document.createElement("link");G.rel="shortcut icon",G.href=o==null||(S=o.agent)===null||S===void 0?void 0:S.icon,G.type="image/x-icon";var X=document.head||document.getElementsByTagName("head")[0];X.appendChild(G)}var $=o?.messageList||[];Gt((o==null||(_=o.agent)===null||_===void 0?void 0:_.manualComponents)||[]);var oe=(o==null||(E=o.agent)===null||E===void 0?void 0:E.variables)||[];Ht(oe),zt(o?.variables||null);var Y=oe==null||(T=oe.filter(function(be){return!be.systemVariable&&be.require}))===null||T===void 0?void 0:T.map(function(be){return be.name});Qt(Y||[]);var se=$?.length||0;if(se){var ce;le($);var de=$[se-1];if(de.type===B.Zy.QUESTION&&(ce=de.ext)!==null&&ce!==void 0&&ce.length){var fn=de.ext.map(function(be){return be.content})||[];_e(fn)}else if(se===1){var nt;_e((o==null||(nt=o.agent)===null||nt===void 0?void 0:nt.openingGuidQuestions)||[])}}else{var at;_e((o==null||(at=o.agent)===null||at===void 0?void 0:at.openingGuidQuestions)||[])}if(!($!=null&&$.length)&&o!==null&&o!==void 0&&(re=o.agent)!==null&&re!==void 0&&re.openingChatMsg){var rt,mn={role:B.hZ.ASSISTANT,type:B.Zy.CHAT,text:o==null||(rt=o.agent)===null||rt===void 0?void 0:rt.openingChatMsg,time:we()().toString(),id:(0,He.Z)(),messageType:B.DK.ASSISTANT};le([mn])}et()},onError:function(){Ae(!1)}}),Pt=en.run,tn=(0,ut.Z)(it.vU,{manual:!0,debounceWait:300}),nn=tn.runAsync,an=function(t,l){var u=t.data,_=t.eventType;s.current=setTimeout(function(){le(function(E){if(!(E!=null&&E.length))return s.current&&(clearTimeout(s.current),s.current=null),[];var T=m()(E),re=T.findIndex(function(de){return de.id===l}),o=1,S=T.find(function(de){return de.id===l});if(!S)return s.current&&(clearTimeout(s.current),s.current=null),E;var G=null;if(_===B.Xi.PROCESSING){var X=u.result||{};u.executeId=X.executeId,G=C()(C()({},S),{},{text:(0,At.tz)(S.text||"",u),status:h.ge.Loading,processingList:[].concat(m()(S?.processingList||[]),[u])}),ze([].concat(m()(S?.processingList||[]),[C()({},u)]))}if(_===B.Xi.MESSAGE){var $=u.text,oe=u.type,Y=u.ext,se=u.id,ce=u.finished;oe===B.Zy.THINK?G=C()(C()({},S),{},{think:"".concat(S.think).concat($),status:h.ge.Incomplete}):oe===B.Zy.QUESTION?(G=C()(C()({},S),{},{text:"".concat(S.text).concat($),status:h.ge.Incomplete}),Y!=null&&Y.length&&_e(Y.map(function(de){return de.content})||[])):(!ue.current||ue.current!==se)&&ce?(G=C()(C()({},S),{},{id:se,text:"".concat(S.text).concat($),status:null}),o=0):(ue.current=se,G=C()(C()({},S),{},{text:"".concat(S.text).concat($),status:h.ge.Incomplete}))}return _===B.Xi.FINAL_RESULT&&(G=C()(C()({},S),{},{status:h.ge.Complete,finalResult:u,id:t.requestId}),s.current&&(clearTimeout(s.current),s.current=null)),_===B.Xi.ERROR&&(G=C()(C()({},S),{},{status:h.ge.Error})),G&&T.splice(re,o,G),T})},200)},rn=function(){var a=I()(p()().mark(function t(l,u){return p()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,jt.W)({url:R.B_,method:"POST",headers:{Accept:"application/json, text/plain, */* "},body:l,onMessage:function(re){an(re,u),et()}});case 2:K.current=E.sent,typeof K.current=="function"&&K.current();case 4:case"end":return E.stop()}},t)}));return function(l,u){return a.apply(this,arguments)}}(),tt=function(){_e([]),s.current&&(clearTimeout(s.current),s.current=null),U.current&&(clearTimeout(U.current),U.current=null),K.current&&(typeof K.current=="function"&&K.current(),K.current=null)},on=function(){tt(),le([]),Oe(null),ye.current=!0,je(!1)},ln=function(){var a=I()(p()().mark(function t(l){var u,_,E,T,re,o,S,G,X=arguments;return p()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:u=X.length>1&&X[1]!==void 0?X[1]:[],_=X.length>2&&X[2]!==void 0?X[2]:[],E=X.length>3&&X[3]!==void 0?X[3]:null,tt(),T=u?.map(function(Y){return{fileKey:Y.key||"",fileUrl:Y.url||"",fileName:Y.name||"",mimeType:Y.type||""}})||[],re={role:B.hZ.USER,type:B.Zy.CHAT,text:l,time:we()().toString(),attachments:T,id:(0,He.Z)(),messageType:B.DK.USER},o=(0,He.Z)(),S={role:B.hZ.ASSISTANT,type:B.Zy.CHAT,text:"",think:"",time:we()().toString(),id:o,messageType:B.DK.ASSISTANT,status:h.ge.Loading},le(function(Y){var se=Y?.map(function(ce){return ce.status===h.ge.Incomplete&&(ce.status=h.ge.Complete),ce})||[];return[].concat(m()(se),[re,S])}),ye.current=!0,je(!1),et(),G={chatKey:ie,conversationUid:ke.current||"",message:l,attachments:T,variableParams:E,selectedComponents:_},rn(G,o);case 14:case"end":return oe.stop()}},t)}));return function(l){return a.apply(this,arguments)}}(),un=(0,n.useMemo)(function(){var a=L?.agent;return{assistant:{name:a?.name,avatar:a?.icon},system:{name:a?.name,avatar:a?.icon}}},[L]),bt=function(){var a=I()(p()().mark(function t(l){var u,_,E,T;return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,nn({chatKey:ie,captchaVerifyParam:l});case 2:u=o.sent,_=u.data,E=u.success,T=u.message,E?(ke.current=_.uid,sessionStorage.setItem(R.bh,_.uid),Pt({chatKey:ie,conversationUid:_.uid})):(Ae(!1),O.ZP.warning(T));case 7:case"end":return o.stop()}},t)}));return function(l){return a.apply(this,arguments)}}(),sn=(0,n.useCallback)(I()(p()().mark(function a(){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:tt(),le([]),Ae(!0),bt(St.current);case 4:case"end":return l.stop()}},a)})),[ie]),xt=function(){var a=I()(p()().mark(function t(){var l,u,_=arguments;return p()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(l=_.length>0&&_[0]!==void 0?_[0]:"",!ie){T.next=10;break}if(St.current=l,Ae(!0),u=sessionStorage.getItem(R.bh),!u){T.next=9;break}return Pt({chatKey:ie,conversationUid:u}),ke.current=u,T.abrupt("return");case 9:bt(l);case 10:case"end":return T.stop()}},t)}));return function(){return a.apply(this,arguments)}}();(0,n.useEffect)(function(){if(ae){var a=ae.captchaSceneId,t=ae.captchaPrefix,l=ae.openCaptcha,u=!!(a&&t&&l);u||xt()}},[ae]),(0,n.useEffect)(function(){var a=ne.current;if(a){var t=function(){var u=a.scrollTop,_=a.scrollHeight,E=a.clientHeight;u+E<_?(ye.current=!1,U.current&&(clearTimeout(U.current),U.current=null),je(!0)):(ye.current=!0,je(!1))};return a.addEventListener("wheel",(0,ct.throttle)(t,300)),function(){a.removeEventListener("wheel",(0,ct.throttle)(t,300)),on()}}},[]),(0,n.useEffect)(function(){$t(),(0,lt.t7)()},[]),(0,n.useEffect)(function(){if(Te!=null&&Te.length){var a=Te.filter(function(t){return t.defaultSelected===B.Km.Yes}).map(function(t){return{id:t.id,type:t.type}});pt(a||[])}},[Te]);var cn=function(t){var l=m()($e);if(l.some(function(_){return _.id===t.id})){var u=l.findIndex(function(_){return _.id===t.id});l.splice(u,1)}else l.push({id:t.id,type:t.type});pt(l)},Ue=function(t){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(Tt){Pe.validateFields(),O.ZP.warning("\u8BF7\u586B\u5199\u5FC5\u586B\u53C2\u6570");return}Ne.current=!0,ln(t,l,$e,Ze)},Ot=function(){var t,l;ye.current=!0,(t=ne.current)===null||t===void 0||t.scrollTo({top:(l=ne.current)===null||l===void 0?void 0:l.scrollHeight,behavior:"smooth"}),je(!1)},dn=function(){if(ae){var t=ae.siteUrl;window.open(t,"_blank")}},vn=function(){var t;(t=document.getElementById(Xe))===null||t===void 0||t.click()};return(0,i.jsxs)("div",{className:W(Q.container,"flex","flex-col","h-full","overflow-y"),ref:ne,children:[(0,i.jsxs)("div",{className:W("w-full","flex-1","flex","flex-col",Q["main-content"]),children:[(0,i.jsx)(Z.Z,{condition:H?.length>0,children:(0,i.jsx)("div",{className:W(Q["title-box"]),children:(0,i.jsx)("h3",{className:W(Q.title,"text-ellipsis","clip-path-animation"),children:L!=null&&(fe=L.agent)!==null&&fe!==void 0&&fe.name?"\u548C".concat(L==null||(me=L.agent)===null||me===void 0?void 0:me.name,"\u5F00\u59CB\u4F1A\u8BDD"):"\u5F00\u59CB\u4F1A\u8BDD"})})}),(0,i.jsx)("div",{className:W(Q["chat-wrapper"],"flex-1"),children:Nt?(0,i.jsx)("div",{className:W("flex","items-center","content-center","h-full"),children:(0,i.jsx)(Dt.Z,{className:W(Q.loading)})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It.Z,{className:"mb-16",form:Pe,variables:Le,isFilled:Ne.current,disabled:!!De||Ne.current}),H?.length>0?(0,i.jsxs)(i.Fragment,{children:[H?.map(function(a,t){return(0,i.jsx)(Ge.Z,{className:W(Q["phone-chat-item"]),messageInfo:a,roleInfo:un,mode:"home"},t)}),(0,i.jsx)(ot.Z,{chatSuggestList:Re,onClick:Ue})]}):Bt&&(0,i.jsx)(b.Z,{className:W({"h-full":!(Le!=null&&Le.length)}),icon:L==null||(xe=L.agent)===null||xe===void 0?void 0:xe.icon,name:(L==null||(Ee=L.agent)===null||Ee===void 0?void 0:Ee.name)||"",extra:(0,i.jsx)(ot.Z,{className:"mt-16",itemClassName:W(Q["suggest-item"]),chatSuggestList:Re,onClick:Ue})})]})}),(0,i.jsxs)("div",{className:W(Q["chat-input-container"]),children:[(0,i.jsx)(N.Z,{className:W(Q["input-container"]),clearDisabled:!(H!=null&&H.length),onEnter:Ue,onClear:sn,visible:ft,wholeDisabled:Tt,manualComponents:Te,selectedComponentList:$e,onSelectComponent:cn,onScrollBottom:Ot}),(0,i.jsx)(Ve,{className:W(Q["phone-container"]),onEnter:Ue,visible:ft,onScrollBottom:Ot}),(0,i.jsx)("p",{className:W(Q["welcome-text"],"text-ellipsis","cursor-pointer","clip-path-animation"),onClick:dn,children:"\u6B22\u8FCE\u4F7F\u7528".concat(ae?.siteName,"\u5E73\u53F0\uFF0C\u5FEB\u901F\u642D\u5EFA\u4F60\u7684\u4E2A\u6027\u5316\u667A\u80FD\u4F53")})]})]}),(0,i.jsx)("button",{id:Xe,type:"button",className:W(Q["captcha-button"])}),(0,i.jsx)(ee.Z,{config:ae,doAction:xt,elementId:Xe,onReady:vn})]})},Rt=Ft},7986:function(Ce,z,e){e.d(z,{Ai:function(){return y},is:function(){return m},kt:function(){return I},mY:function(){return F},vU:function(){return C},zZ:function(){return p}});var f=e(39902);function p(d,r){return(0,f.request)("/api/temp/chat/".concat(r,"/link/").concat(d,"/delete"),{method:"POST"})}function y(d){return(0,f.request)("/api/temp/chat/".concat(d,"/link/create"),{method:"POST"})}function I(d){return(0,f.request)("/api/temp/chat/link/update",{method:"POST",data:d})}function F(d){return(0,f.request)("/api/temp/chat/conversation/query",{method:"POST",data:d})}function C(d){return(0,f.request)("/api/temp/chat/conversation/create",{method:"POST",data:d})}function P(d){return request("/api/temp/chat/completions",{method:"POST",data:d})}function m(d){return(0,f.request)("/api/temp/chat/".concat(d,"/link/list"),{method:"GET"})}},66015:function(Ce,z,e){e.d(z,{Nq:function(){return b},TE:function(){return r},dY:function(){return d}});var f=e(15009),p=e.n(f),y=e(99289),I=e.n(y),F=e(45360),C={TEXTAREA:{position:"fixed",top:"0",left:"0",width:"2em",height:"2em",padding:"0",border:"none",outline:"none",boxShadow:"none",background:"transparent",fontSize:"16px"}},P={COPY_FAILED:"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",COPY_FAILED_NO_CONTENT:"\u6CA1\u6709\u53EF\u590D\u5236\u7684\u5185\u5BB9",COPY_SUCCESS:"\u590D\u5236\u6210\u529F"},m=function(N){if(!N)return"";var D=document.createElement("textarea");return D.innerHTML=N,D.value},d=function(N,D){var x=document.createElement("textarea");x.value=N,Object.assign(x.style,C.TEXTAREA),document.body.appendChild(x),x.focus(),x.select();try{var J=document.execCommand("copy");J&&D?D(N):J||F.ZP.error(P.COPY_FAILED)}catch(Z){console.error(P.COPY_FAILED,Z),F.ZP.error(P.COPY_FAILED)}document.body.removeChild(x)},r=function(){var ee=I()(p()().mark(function N(D,x){var J,Z,k=arguments;return p()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(J=k.length>2&&k[2]!==void 0?k[2]:!1,D){g.next=4;break}return F.ZP.error(P.COPY_FAILED_NO_CONTENT),g.abrupt("return");case 4:if(Z=m(D),!(navigator.clipboard&&navigator.clipboard.writeText)){g.next=20;break}return g.prev=6,g.next=9,navigator.clipboard.writeText(Z);case 9:J&&F.ZP.success(P.COPY_SUCCESS),x&&x(Z),g.next=18;break;case 13:g.prev=13,g.t0=g.catch(6),console.error(P.COPY_FAILED,g.t0),F.ZP.error(P.COPY_FAILED),d(Z,x);case 18:g.next=21;break;case 20:d(Z,x);case 21:case"end":return g.stop()}},N,null,[[6,13]])}));return function(D,x){return ee.apply(this,arguments)}}(),b=function(){var ee=I()(p()().mark(function N(D){var x,J,Z,k,R=arguments;return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return x=R.length>1&&R[1]!==void 0?R[1]:2,J=R.length>2?R[2]:void 0,Z=R.length>3&&R[3]!==void 0?R[3]:!1,h.prev=3,k=JSON.stringify(D,null,x),h.next=7,r(k,J,Z);case 7:h.next=13;break;case 9:h.prev=9,h.t0=h.catch(3),console.error("JSON\u683C\u5F0F\u5316\u5931\u8D25",h.t0),F.ZP.error("JSON\u683C\u5F0F\u5316\u5931\u8D25");case 13:case"end":return h.stop()}},N,null,[[3,9]])}));return function(D){return ee.apply(this,arguments)}}()},89575:function(Ce,z,e){e.d(z,{BK:function(){return k},F1:function(){return R},P4:function(){return Ke},Qb:function(){return J},VL:function(){return g},Xh:function(){return C.a},an:function(){return P},hj:function(){return m},j0:function(){return b},kj:function(){return d},t7:function(){return Z},tp:function(){return ee},uo:function(){return D},vV:function(){return r}});var f=e(5574),p=e.n(f),y=e(64599),I=e.n(y),F=e(50361),C=e.n(F),P=function(c){return c?.replace(/[^0-9]/g,"")},m=function(c){return!Number.isNaN(Number(c))};function d(v){var c=/^1[3456789]\d{9}$/;return c.test(v)}function r(v){var c=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,}$/;return c.test(v)}function b(v){var c=/^[a-zA-Z_][a-zA-Z0-9_]*$/;return c.test(v)}function ee(v){if(!v||typeof v!="string")return!1;var c=v.trim();if(!/^{/.test(c)||!/}$/.test(c))return!1;try{return JSON.parse(c),!0}catch{return!1}}function N(v){if(!v||typeof v!="string")return{isValid:!1,error:"\u8F93\u5165\u4E3A\u7A7A\u6216\u4E0D\u662F\u5B57\u7B26\u4E32"};try{var c=JSON.parse(v);return{isValid:!0,data:c}}catch(O){return{isValid:!1,error:O instanceof Error?O.message:"JSON\u683C\u5F0F\u9519\u8BEF"}}}function D(v){return v?.length>=6}var x=function(c,O){var A=new FileReader;A.addEventListener("load",function(){return O(A.result)}),A.readAsDataURL(c)},J=function(){var c=window.location.search.substring(1).split("&"),O={},A=I()(c),ve;try{for(A.s();!(ve=A.n()).done;){var q=ve.value,te=q.split("="),n=p()(te,2),M=n[0],i=n[1];O[M]=i}}catch(w){A.e(w)}finally{A.f()}return O},Z=function(){if(!document.head.querySelector("base")){var c=document.createElement("base");c.target="_blank",document.head.append(c)}};function k(v){if(!v)return"";var c=new Date().getTime(),O=new Date(v).getTime(),A=c-O,ve=Math.floor(A/1e3),q=Math.floor(ve/60),te=Math.floor(q/60),n=Math.floor(te/24);if(n>365*2)return"".concat(Math.floor(n/365),"\u5E74\u524D");if(n>365)return"\u53BB\u5E74";if(n>30){var M=new Date,i=new Date(v),w=(M.getFullYear()-i.getFullYear())*12;return w+=M.getMonth()-i.getMonth(),M.getDate()<i.getDate()&&w--,w>=1?"".concat(w," \u6708\u524D"):null}else{if(n>6)return"".concat(n,"\u5929\u524D");if(n>2){var Se=new Date(v),Ve=Se.getMonth()+1,Ge=Se.getDate()<10?"0".concat(Se.getDate()):Se.getDate();return"".concat(Ve,"-").concat(Ge)}else return n===2?"\u524D\u5929":n===1?"\u6628\u5929":te>1?"".concat(te,"\u5C0F\u65F6\u524D"):q>0?"".concat(q,"\u5206\u949F\u524D"):"\u521A\u521A"}}function R(v){return v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var g=function(c,O){var A=new Set(c),ve=new Set(O),q=I()(A),te;try{for(q.s();!(te=q.n()).done;){var n=te.value;if(!ve.has(n))return!1}}catch(M){q.e(M)}finally{q.f()}return!0},h=function(c,O){for(var A=c;A.parentElement;){if(A.parentElement.classList.contains(O))return A.parentElement;A=A.parentElement}return null},Ke=function(c,O){return c.classList.contains(O)?c:h(c,O)}},19515:function(Ce,z,e){e.d(z,{$g:function(){return C},Df:function(){return P},Nq:function(){return p.Nq},Qr:function(){return m},TE:function(){return p.TE},dY:function(){return p.dY},hK:function(){return I},n3:function(){return F}});var f=e(95141),p=e(66015);function y(d){var r=d<10?"0"+d:d;return r}var I=function(r){var b=new Date(r);return b.getFullYear()+"-"+y(b.getMonth()+1)+"-"+y(b.getDate())+" "+y(b.getHours())+":"+y(b.getMinutes())+":"+y(b.getSeconds())},F=function(r){return!r||r===void 0?[]:r.startsWith("Array_File_")?["Array_File",r]:r.startsWith("File_")?["File",r]:[r]},C=function(r){var b=r[r.length-1];return Object.values(f.Gi).includes(b)?b:f.Gi.String},P=function(r){switch(r){case f.Gi.File_Image:return"image/*";case f.Gi.File_PPT:return".ppt,.pptx";case f.Gi.File_Doc:return".doc,.docx";case f.Gi.File_PDF:return".pdf";case f.Gi.File_Txt:return".txt";case f.Gi.File_Zip:return".zip,.rar,.7z";case f.Gi.File_Excel:return".xls,.xlsx,.csv";case f.Gi.File_Video:return"video/*";case f.Gi.File_Audio:case f.Gi.File_Voice:return"audio/*";case f.Gi.File_Code:return".js,.txt,.ts,.jsx,.tsx,.py,.java,.c,.cpp,.cs,.go,.php,.rb,.sh";case f.Gi.File_Svg:return".svg";default:return""}},m=function(r){return r&&Object.keys(r).length===0&&r.constructor===Object}}}]);})();
