"use strict";(()=>{(self.webpackChunknuwax_frontend=self.webpackChunknuwax_frontend||[]).push([[9468],{61606:function(O,i,n){n.d(i,{Z:function(){return e}});var f=n(66283),u=n(75271),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},a=r,_=n(47221),l=function(E,x){return u.createElement(_.Z,(0,f.Z)({},E,{ref:x,icon:a}))},o=u.forwardRef(l),e=o},36419:function(O,i,n){var f=n(48305),u=n.n(f),r=n(75271),a=n(52676),_=function(o){var e=o.config,p=o.elementId,E=o.doAction,x=o.onReady,I=(0,r.useState)(!1),R=u()(I,2),P=R[0],c=R[1],Z=(0,r.useRef)(!1),M=function(d){return E(d),{captchaResult:!0,bizResult:!0}},U=(0,r.useCallback)(function(){var S,d;(S=document.getElementById("aliyunCaptcha-mask"))===null||S===void 0||S.remove(),(d=document.getElementById("aliyunCaptcha-window-popup"))===null||d===void 0||d.remove()},[]),K=(0,r.useCallback)(function(S){S&&c(!0)},[]);return(0,r.useEffect)(function(){return Z.current=!1,e!=null&&e.captchaSceneId&&e!==null&&e!==void 0&&e.captchaPrefix&&e!==null&&e!==void 0&&e.openCaptcha&&window.initAliyunCaptcha({SceneId:e.captchaSceneId,prefix:e.captchaPrefix,mode:"popup",element:"#captcha-element",button:"#".concat(p),captchaVerifyCallback:M,onBizResultCallback:function(){},getInstance:K,slideStyle:{width:360,height:40},language:"cn"}),U},[e,p]),(0,r.useEffect)(function(){return P&&(x?.(),console.log("\u9A8C\u8BC1\u7801\u521D\u59CB\u5316\u5B8C\u6210\uFF0ConReady\u5DF2\u8C03\u7528")),function(){}},[P]),(0,a.jsx)("div",{className:"captcha-a",children:(0,a.jsx)("div",{id:"captcha-element"})})};i.Z=(0,r.memo)(_)},65773:function(O,i,n){var f=n(75271),u=n(52676),r=function(_){var l=_.children,o=_.condition;return o?(0,u.jsx)(u.Fragment,{children:l}):null};i.Z=r},17725:function(O,i,n){var f=n(48305),u=n.n(f),r=n(79484),a=n(75271),_=function(){var o=(0,a.useState)(r.gm),e=u()(o,2),p=e[0],E=e[1],x=(0,a.useRef)(0),I=function(){clearInterval(x.current),x.current=0},R=function(){var c=r.gm;E(c),x.current=setInterval(function(){c--,E(c),c===0&&I()},1e3)};return(0,a.useEffect)(function(){return function(){I()}},[]),{countDown:p,setCountDown:E,onClearTimer:I,handleCount:R}};i.Z=_},38752:function(O,i,n){var f=n(92106),u=n(41249),r=n(53586),a=function(){var l=(0,r.useRequest)(f.Vv,{manual:!0,debounceInterval:300,onSuccess:function(){u.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001")}}),o=l.run,e=l.loading;return{runSendCode:o,sendLoading:e}};i.Z=a},21688:function(O,i,n){n.d(i,{Z:function(){return E}});var f=n(65773),u=n(94581),r=n.n(u),a=n(75271),_=n(53586),l={"xagi-nav-style2":"xagi-nav-style2___yVukr",text:"text___OI_Nm","page-container":"page-container___Pi1hD",container:"container___xhEU7","left-box":"left-box___Ntafo",logo:"logo___BYKsK","left-title-box":"left-title-box___dv69M",title:"title___p8jZZ","sub-title":"sub-title___Oiq0f","right-box":"right-box___wTEhG"},o=n(52676),e=r().bind(l),p=function(I){var R=I.children,P=(0,_.useModel)("tenantConfigInfo"),c=P.tenantConfigInfo;return(0,o.jsxs)("div",{className:e(l.container),children:[(0,o.jsxs)("div",{className:e(l["left-box"]),children:[(0,o.jsx)("div",{className:e(l.icon),children:(0,o.jsx)(f.Z,{condition:!!(c!=null&&c.siteLogo),children:(0,o.jsx)("img",{src:c?.siteLogo,className:e(l.logo),alt:""})})}),(0,o.jsxs)("div",{className:e(l["left-title-box"]),children:[(0,o.jsx)("p",{className:e(l.title,"text-ellipsis-2"),dangerouslySetInnerHTML:{__html:c?.loginPageText}}),(0,o.jsx)("p",{className:e(l["sub-title"],"text-ellipsis-2"),dangerouslySetInnerHTML:{__html:c?.loginPageSubText}})]})]}),(0,o.jsx)("div",{className:e(l["right-box"]),children:R})]})},E=p},79896:function(O,i,n){n.r(i),n.d(i,{default:function(){return an}});var f=n(82092),u=n.n(f),r=n(26068),a=n.n(r),_=n(48305),l=n.n(_),o=n(36419),e=n(79484),p=n(16722),E=n(17725),x=n(38752),I=n(21688),R=n(92106),P=n(45492),c=n(2201),Z=n(61606),M=n(9504),U=n(63619),K=n(94581),S=n.n(K),d=n(75271),A=n(53586),m={"xagi-nav-style2":"xagi-nav-style2___tuoEb",text:"text___Wy68G","page-container":"page-container___og3pJ",container:"container___nHaho",input:"input___e_Xre",inner:"inner___Sqpda",back:"back___S8ugH","code-container":"code-container___sU8BX","code-item":"code-item___KnGao",error:"error___aLTn5",active:"active___A6zKf","cursor-blink":"cursor-blink___pNG8Y","count-down-container":"count-down-container___NG91A","count-down":"count-down___CNupX","resend-btn":"resend-btn___ORbwU",phone:"phone___hSuIa"},v=n(52676),D=S().bind(m),nn=Array(e.R9).fill(null),en=function(){var tn="aliyun-captcha-sms",on=(0,A.useLocation)(),rn=(0,A.useNavigate)(),z=(0,E.Z)(),B=z.countDown,ln=z.handleCount,H=(0,x.Z)(),cn=H.runSendCode,N=H.sendLoading,sn=(0,d.useState)(""),F=l()(sn,2),C=F[0],un=F[1],dn=(0,d.useState)(""),X=l()(dn,2),W=X[0],vn=X[1],J=(0,d.useRef)(null),b=on.state,h=b.phoneOrEmail,fn=b.areaCode,hn=b.authType,_n=b.captchaVerifyParam,Y=(0,A.useModel)("tenantConfigInfo"),L=Y.tenantConfigInfo,mn=Y.setTitle,$=function(){J.current.focus({preventScroll:!0,cursor:"end"})},Cn=(0,A.useRequest)(R.JI,{manual:!0,debounceInterval:300,onSuccess:function(t,y){var g=t.resetPass,j=t.expireDate,w=t.token;localStorage.setItem(p.LA,w),localStorage.setItem(p.ZG,j),localStorage.setItem(p.Kx,y[0].phone),g?rn("/",{replace:!0}):A.history.push("/set-password")}}),G=Cn.run,Q=(0,d.useMemo)(function(){var s=nn.slice(0);if(C)for(var t=0;t<C.length;)s[t]=C.charAt(t),t++;return s},[C]),pn=(0,d.useMemo)(function(){return C?.length||0},[C]),xn=(0,d.useCallback)(function(s){var t=s.target.value,y=(0,c.an)(t),g=y.substring(0,e.R9);un(g),g.length<e.R9&&W&&vn(""),g.length===e.R9&&!N&&setTimeout(function(){var j={code:g,phoneOrEmail:h};G(j)},100)},[W,N,h,G]),gn=function(t){ln();var y=hn===1,g=a()(u()({type:P.Gk.LOGIN_OR_REGISTER},y?"phone":"email",h),t&&{captchaVerifyParam:t});cn(g)},q=function(){var t=L||{},y=t.captchaSceneId,g=t.captchaPrefix,j=t.openCaptcha;return!!(L&&y!==""&&g!==""&&j)},T=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";gn(t)};(0,d.useEffect)(function(){$(),q()||T(),mn()},[]);var En=function(){q()&&T(_n)},In=function(){var t={code:C,phoneOrEmail:h};G(t)},Sn=function(){var t=L||{},y=t.captchaSceneId,g=t.captchaPrefix,j=t.openCaptcha,w=!!(L&&y!==""&&g!==""&&j);if(w){var k;(k=document.getElementById(tn))===null||k===void 0||k.click()}else T()},yn=(0,d.useCallback)(function(){B>0||Sn()},[L,T]),V=(0,d.useCallback)(function(s){if(s.keyCode===13||s.which===13){if(C?.length!==e.R9||N)return;In()}},[C,N]);return(0,d.useEffect)(function(){return window.addEventListener("keyup",V),function(){window.removeEventListener("keyup",V)}},[V]),(0,v.jsx)(I.Z,{children:(0,v.jsxs)("div",{className:D(m.container),children:[(0,v.jsxs)("div",{className:D(m.inner,"flex","flex-col","items-center"),children:[(0,v.jsx)("div",{className:D(m.back),children:(0,v.jsx)(M.ZP,{color:"default",variant:"filled",shape:"circle",icon:(0,v.jsx)(Z.Z,{}),onClick:function(){return A.history.back()}})}),(0,v.jsx)("h3",{children:h!=null&&h.includes("@")?"\u8F93\u5165\u90AE\u7BB1\u9A8C\u8BC1\u7801":"\u8F93\u5165\u77ED\u4FE1\u9A8C\u8BC1\u7801"}),(0,v.jsxs)("p",{children:["\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\u81F3".concat(h!=null&&h.includes("@")?"\u4F60\u7684\u90AE\u7BB1 ":"\u624B\u673A\u53F7 "),"".concat(h!=null&&h.includes("@")?"":fn," ").concat(h)]}),(0,v.jsx)("div",{className:D(m["code-container"]),children:Q.map(function(s,t){return(0,v.jsx)("span",{onClick:$,className:D(m["code-item"],pn===t&&!s?m.active:null,W?m.error:null),children:s},t)})}),(0,v.jsxs)("div",{className:D(m["count-down-container"]),children:[B>0&&(0,v.jsxs)("span",{className:m["count-down"],children:[B,"s\u540E"]}),(0,v.jsx)("span",{className:D(m["resend-btn"],B>0?null:m.active,"cursor-pointer"),onClick:yn,children:"\u91CD\u65B0\u83B7\u53D6"})]})]}),(0,v.jsx)(U.Z,{ref:J,onChange:xn,className:D(m.input),autoComplete:"off",value:Q.join("")}),(0,v.jsx)(M.ZP,{id:"aliyun-captcha-sms",style:{display:"none"}}),(0,v.jsx)(o.Z,{config:L,doAction:T,onReady:En,elementId:"aliyun-captcha-sms"})]})})},an=en},45492:function(O,i,n){n.d(i,{Gk:function(){return r},TC:function(){return f}});var f=function(a){return a[a.Password=0]="Password",a[a.Code=1]="Code",a}({}),u=function(a){return a[a.Phone=0]="Phone",a[a.Email=1]="Email",a}({}),r=function(a){return a.LOGIN_OR_REGISTER="LOGIN_OR_REGISTER",a.RESET_PASSWORD="RESET_PASSWORD",a.BIND_EMAIL="BIND_EMAIL",a}({})}}]);})();
