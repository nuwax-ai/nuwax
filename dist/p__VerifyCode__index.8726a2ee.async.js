"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[9468],{61606:function(D,u,n){n.d(u,{Z:function(){return e}});var _=n(66283),d=n(75271),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},t=o,m=n(47221),r=function(x,p){return d.createElement(m.Z,(0,_.Z)({},x,{ref:p,icon:t}))},a=d.forwardRef(r),e=a},83862:function(D,u,n){var _=n(48305),d=n.n(_),o=n(75271),t=n(52676),m=function(a){var e=a.config,g=a.elementId,x=a.doAction,p=a.onReady,E=(0,o.useState)(!1),y=d()(E,2),I=y[0],s=y[1],N=(0,o.useRef)(!1),T=function(i){return x(i),{captchaResult:!0,bizResult:!0}},Z=(0,o.useCallback)(function(){var S,i;(S=document.getElementById("aliyunCaptcha-mask"))===null||S===void 0||S.remove(),(i=document.getElementById("aliyunCaptcha-window-popup"))===null||i===void 0||i.remove()},[]),U=(0,o.useCallback)(function(S){S&&s(!0)},[]);return(0,o.useEffect)(function(){return N.current=!1,e!=null&&e.captchaSceneId&&e!==null&&e!==void 0&&e.captchaPrefix&&e!==null&&e!==void 0&&e.openCaptcha&&window.initAliyunCaptcha({SceneId:e.captchaSceneId,prefix:e.captchaPrefix,mode:"popup",element:"#captcha-element",button:"#".concat(g),captchaVerifyCallback:T,onBizResultCallback:function(){},getInstance:U,slideStyle:{width:360,height:40},language:"cn"}),Z},[e,g]),(0,o.useEffect)(function(){return I&&(p?.(),console.log("\u9A8C\u8BC1\u7801\u521D\u59CB\u5316\u5B8C\u6210\uFF0ConReady\u5DF2\u8C03\u7528")),function(){}},[I]),(0,t.jsx)("div",{className:"captcha-a",children:(0,t.jsx)("div",{id:"captcha-element"})})};u.Z=(0,o.memo)(m)},59261:function(D,u,n){var _=n(75271),d=n(52676),o=function(m){var r=m.children,a=m.condition;return a?(0,d.jsx)(d.Fragment,{children:r}):null};u.Z=o},60485:function(D,u,n){var _=n(48305),d=n.n(_),o=n(61265),t=n(75271),m=function(){var a=(0,t.useState)(o.gm),e=d()(a,2),g=e[0],x=e[1],p=(0,t.useRef)(0),E=function(){clearInterval(p.current),p.current=0},y=function(){var s=o.gm;x(s),p.current=setInterval(function(){s--,x(s),s===0&&E()},1e3)};return(0,t.useEffect)(function(){return function(){E()}},[]),{countDown:g,setCountDown:x,onClearTimer:E,handleCount:y}};u.Z=m},52268:function(D,u,n){var _=n(80098),d=n(41249),o=n(56179),t=function(){var r=(0,o.useRequest)(_.Vv,{manual:!0,debounceInterval:300,onSuccess:function(){d.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001")}}),a=r.run,e=r.loading;return{runSendCode:a,sendLoading:e}};u.Z=t},76398:function(D,u,n){n.d(u,{Z:function(){return x}});var _=n(59261),d=n(94581),o=n.n(d),t=n(75271),m=n(56179),r={"xagi-nav-style2":"xagi-nav-style2___yVukr",text:"text___OI_Nm","page-container":"page-container___Pi1hD",container:"container___xhEU7","left-box":"left-box___Ntafo",logo:"logo___BYKsK","left-title-box":"left-title-box___dv69M",title:"title___p8jZZ","sub-title":"sub-title___Oiq0f","right-box":"right-box___wTEhG"},a=n(52676),e=o().bind(r),g=function(E){var y=E.children,I=(0,m.useModel)("tenantConfigInfo"),s=I.tenantConfigInfo;return(0,a.jsxs)("div",{className:e(r.container),children:[(0,a.jsxs)("div",{className:e(r["left-box"]),children:[(0,a.jsx)("div",{className:e(r.icon),children:(0,a.jsx)(_.Z,{condition:!!(s!=null&&s.siteLogo),children:(0,a.jsx)("img",{src:s?.siteLogo,className:e(r.logo),alt:""})})}),(0,a.jsxs)("div",{className:e(r["left-title-box"]),children:[(0,a.jsx)("p",{className:e(r.title),dangerouslySetInnerHTML:{__html:s?.loginPageText}}),(0,a.jsx)("p",{className:e(r["sub-title"]),dangerouslySetInnerHTML:{__html:s?.loginPageSubText}})]})]}),(0,a.jsx)("div",{className:e(r["right-box"]),children:y})]})},x=g},74992:function(D,u,n){n.r(u),n.d(u,{default:function(){return ln}});var _=n(82092),d=n.n(_),o=n(26068),t=n.n(o),m=n(48305),r=n.n(m),a=n(83862),e=n(61265),g=n(72875),x=n(60485),p=n(52268),E=n(76398),y=n(80098),I=n(76714),s=n(39373),N=n(61606),T=n(9504),Z=n(63619),U=n(94581),S=n.n(U),i=n(75271),O=n(56179),h={"xagi-nav-style2":"xagi-nav-style2___tuoEb",text:"text___Wy68G","page-container":"page-container___og3pJ",container:"container___nHaho",input:"input___e_Xre",inner:"inner___Sqpda",back:"back___S8ugH","code-container":"code-container___sU8BX","code-item":"code-item___KnGao",error:"error___aLTn5",active:"active___A6zKf","cursor-blink":"cursor-blink___pNG8Y","count-down-container":"count-down-container___NG91A","count-down":"count-down___CNupX","resend-btn":"resend-btn___ORbwU",phone:"phone___hSuIa"},v=n(52676),P=S().bind(h),rn=Array(e.R9).fill(null),sn=function(){var cn="aliyun-captcha-sms",k=(0,O.useLocation)(),un=(0,O.useNavigate)(),F=(0,x.Z)(),M=F.countDown,X=F.handleCount,w=(0,p.Z)(),J=w.runSendCode,B=w.sendLoading,dn=(0,i.useState)(""),Y=r()(dn,2),C=Y[0],vn=Y[1],fn=(0,i.useState)(""),$=r()(fn,2),K=$[0],_n=$[1],Q=(0,i.useRef)(null),V=k.state,f=V.phoneOrEmail,mn=V.areaCode,q=V.authType,hn=(0,i.useState)(k.state.captchaVerifyParam),nn=r()(hn,2),W=nn[0],Cn=nn[1],en=(0,O.useModel)("tenantConfigInfo"),b=en.tenantConfigInfo,gn=en.setTitle,tn=function(){Q.current.focus({preventScroll:!0,cursor:"end"})},pn=(0,O.useRequest)(y.JI,{manual:!0,debounceInterval:300,onSuccess:function(c,j){var R=c.resetPass,L=c.expireDate,A=c.token;localStorage.setItem(g.LA,A),localStorage.setItem(g.ZG,L),localStorage.setItem(g.Kx,j[0].phone),R?un("/",{replace:!0}):O.history.push("/set-password")}}),G=pn.run,an=(0,i.useMemo)(function(){var l=rn.slice(0);if(C)for(var c=0;c<C.length;)l[c]=C.charAt(c),c++;return l},[C]),xn=(0,i.useMemo)(function(){return C?.length||0},[C]),En=(0,i.useCallback)(function(l){var c=l.target.value,j=(0,s.an)(c),R=j.substring(0,e.R9);vn(R),R.length<e.R9&&K&&_n(""),R.length===e.R9&&!B&&setTimeout(function(){var L={code:R,phoneOrEmail:f};G(L)},100)},[K,B,f,G]),on=(0,i.useCallback)(function(){X();var l=q===1,c=t()(d()({type:I.Gk.LOGIN_OR_REGISTER},l?"phone":"email",f),W&&{captchaVerifyParam:W});J(c)},[W,q,f,J,X]);(0,i.useEffect)(function(){tn(),on(),gn()},[]);var Sn=function(){var c={code:C,phoneOrEmail:f};G(c)},z=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";Cn(c),on()},yn=(0,i.useCallback)(function(){if(!(M>0)){var l=b||{},c=l.captchaSceneId,j=l.captchaPrefix,R=l.openCaptcha,L=!!(b&&c!==""&&j!==""&&R);if(L){var A;(A=document.getElementById(cn))===null||A===void 0||A.click()}else z()}},[b,z]),H=(0,i.useCallback)(function(l){if(l.keyCode===13||l.which===13){if(C?.length!==e.R9||B)return;Sn()}},[C,B]);return(0,i.useEffect)(function(){return window.addEventListener("keyup",H),function(){window.removeEventListener("keyup",H)}},[H]),(0,v.jsx)(E.Z,{children:(0,v.jsxs)("div",{className:P(h.container),children:[(0,v.jsxs)("div",{className:P(h.inner,"flex","flex-col","items-center"),children:[(0,v.jsx)("div",{className:P(h.back),children:(0,v.jsx)(T.ZP,{color:"default",variant:"filled",shape:"circle",icon:(0,v.jsx)(N.Z,{}),onClick:function(){return O.history.back()}})}),(0,v.jsx)("h3",{children:f!=null&&f.includes("@")?"\u8F93\u5165\u90AE\u7BB1\u9A8C\u8BC1\u7801":"\u8F93\u5165\u77ED\u4FE1\u9A8C\u8BC1\u7801"}),(0,v.jsxs)("p",{children:["\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\u81F3".concat(f!=null&&f.includes("@")?"\u4F60\u7684\u90AE\u7BB1 ":"\u624B\u673A\u53F7 "),"".concat(f!=null&&f.includes("@")?"":mn," ").concat(f)]}),(0,v.jsx)("div",{className:P(h["code-container"]),children:an.map(function(l,c){return(0,v.jsx)("span",{onClick:tn,className:P(h["code-item"],xn===c&&!l?h.active:null,K?h.error:null),children:l},c)})}),(0,v.jsxs)("div",{className:P(h["count-down-container"]),children:[M>0&&(0,v.jsxs)("span",{className:h["count-down"],children:[M,"s\u540E"]}),(0,v.jsx)("span",{className:P(h["resend-btn"],M>0?null:h.active,"cursor-pointer"),onClick:yn,children:"\u91CD\u65B0\u83B7\u53D6"})]})]}),(0,v.jsx)(Z.Z,{ref:Q,onChange:En,className:P(h.input),autoComplete:"off",value:an.join("")}),(0,v.jsx)(T.ZP,{id:"aliyun-captcha-sms",style:{display:"none"}}),(0,v.jsx)(a.Z,{config:b,doAction:z,elementId:"aliyun-captcha-sms"})]})})},ln=sn},76714:function(D,u,n){n.d(u,{Gk:function(){return o},TC:function(){return _}});var _=function(t){return t[t.Password=0]="Password",t[t.Code=1]="Code",t}({}),d=function(t){return t[t.Phone=0]="Phone",t[t.Email=1]="Email",t}({}),o=function(t){return t.LOGIN_OR_REGISTER="LOGIN_OR_REGISTER",t.RESET_PASSWORD="RESET_PASSWORD",t.BIND_EMAIL="BIND_EMAIL",t}({})}}]);})();
