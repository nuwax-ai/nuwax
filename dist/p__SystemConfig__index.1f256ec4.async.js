"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[7364],{22502:function(le,J,n){n.r(J),n.d(J,{default:function(){return u}});var Y=n(15009),a=n.n(Y),X=n(99289),d=n.n(X),m=n(5574),D=n.n(m),I=n(58943),_=n(21532),N=n(80688),q=n(94184),G=n.n(q),w=n(67294),K=n(45360),x=n(99859),W=n(85804),ee=n(97857),T=n.n(ee),te=n(19632),Z=n.n(te),ne=n(48689),R=n(25035),Q=n(24969),F=n(25278),re=n(83062),k=n(75991),ae=n(34041),r=n(85893);function ie(e){var s=e.value,h=e.onChange,o=(0,w.useState)([]),j=D()(o,2),f=j[0],E=j[1];(0,w.useEffect)(function(){E(s||[])},[s]);var O=function(c){var g=f.filter(function(l,v){return v!==c});E(g),h?.(g)},P=function(c,g){var l=Z()(f);l[g]=c.target.value,E(l),h?.(l)};return f.map(function(C,c){return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:8},children:[(0,r.jsx)(F.Z,{value:C,onChange:function(l){return P(l,c)}}),(0,r.jsx)(ne.Z,{style:{marginLeft:8,cursor:"pointer"},onClick:function(){return O(c)}})]},c)})}function z(e){var s=e.props,h=e.modelList,o=e.agentList,j=e.currentTab,f=x.Z.useFormInstance(),E=function(){var c=[].concat(Z()(s.value),[""]);console.log(c,s.value),f.setFieldValue(s.name,c)},O=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{style:{marginRight:"5px"},children:s.description}),s.notice&&(0,r.jsx)(re.Z,{title:s.notice,children:(0,r.jsx)(R.Z,{className:"ant-form-item-tooltip"})}),(0,r.jsx)(Q.Z,{onClick:E,style:{marginLeft:"20px",cursor:"pointer",color:"#1D2129"}})]})},P={DomainBind:[{required:!0,validator:function(c,g){return g.length===0||g.some(function(l){return l===""})?Promise.reject(new Error("\u8BF7\u8F93\u5165\u57DF\u540D")):Promise.resolve()}}]};return(0,r.jsx)(x.Z.Item,T()(T()({name:s.name,initialValue:s.value,rules:P[j]},s.inputType==="MultiInput"?{label:(0,r.jsx)(O,{})}:{label:s.description,tooltip:s.notice&&{title:s.notice,icon:(0,r.jsx)(R.Z,{})}}),{},{children:function(){var C={placeholder:s.placeholder,name:s.name,onChange:function(v){var A=["Input","Textarea"].includes(s.inputType)?v.target.value:v;f?.setFieldValue(s.name,A)}};switch(s.inputType){case"Input":return(0,r.jsx)(F.Z,T()({},C));case"Textarea":return(0,r.jsx)(F.Z.TextArea,T()(T()({},C),{},{rows:4}));case"File":return(0,r.jsx)(k.Z,{action:"/api/file/upload",headers:{Authorization:"Bearer ".concat(localStorage.getItem("ACCESS_TOKEN"))},listType:"picture-card",accept:"image/*",maxCount:1,defaultFileList:s.value?[{url:s.value}]:[],children:(0,r.jsxs)("button",{style:{color:"inherit",cursor:"inherit",border:0,background:"none"},type:"button",children:[(0,r.jsx)(Q.Z,{}),(0,r.jsx)("div",{style:{marginTop:8},children:s.placeholder})]})});case"Select":case"MultiSelect":{var c=[],g=s.inputType==="MultiSelect"?"multiple":void 0;return j==="ModelSetting"&&(c=h.map(function(l){return{label:l.name,value:l.id}})),j==="AgentSetting"&&(c=o.map(function(l){return{label:l.name,value:l.targetId}})),j==="BaseConfig"&&(c=s.placeholder.split(",").map(function(l){var v=l.split(":"),A=D()(v,2),p=A[0],M=A[1];return{label:M,value:+p}})),(0,r.jsx)(ae.Z,T()(T()({},C),{},{mode:g,options:c}))}case"MultiInput":return(0,r.jsx)(ie,{})}}()}),s.name)}var se=z;function H(e){var s=e.config,h=e.currentTab,o=e.refresh,j=(0,w.useState)([]),f=D()(j,2),E=f[0],O=f[1],P=function(){var p=d()(a()().mark(function M(){var y;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,I.g2)();case 2:y=S.sent,O(y.data);case 4:case"end":return S.stop()}},M)}));return function(){return p.apply(this,arguments)}}(),C=(0,w.useState)([]),c=D()(C,2),g=c[0],l=c[1],v=function(){var p=d()(a()().mark(function M(){var y,b,S=arguments;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return y=S.length>0&&S[0]!==void 0?S[0]:"",L.next=3,(0,I.Nd)(y);case 3:b=L.sent,l(b.data);case 5:case"end":return L.stop()}},M)}));return function(){return p.apply(this,arguments)}}();(0,w.useEffect)(function(){h==="ModelSetting"&&P(),h==="AgentSetting"&&v()},[]);var A=function(){var p=d()(a()().mark(function M(y){var b;return a()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return b={},Object.keys(y).forEach(function(L){var ue=y[L];if(ue.file){var $;b[L]=($=ue.file.response)===null||$===void 0||($=$.data)===null||$===void 0?void 0:$.url}else b[L]=ue}),U.next=4,(0,I.Vk)(b);case 4:K.ZP.success("\u4FDD\u5B58\u6210\u529F"),o();case 6:case"end":return U.stop()}},M)}));return function(y){return p.apply(this,arguments)}}();return(0,r.jsx)("div",{style:{backgroundColor:"#f3f5fa",padding:"26px 26px 21px 22px"},children:(0,r.jsxs)(x.Z,{layout:"vertical",style:{width:"520px"},onFinish:A,children:[s.map(function(p){return(0,r.jsx)(se,{props:p,modelList:E,agentList:g,currentTab:h},p.name)}),(0,r.jsx)(x.Z.Item,{children:(0,r.jsx)(W.ZP,{type:"primary",htmlType:"submit",children:"\u63D0\u4EA4"})})]})})}var V=H,B={container:"container___g4aBz",title:"title___ytpbZ"},t=G().bind(B),i=function(){var s=(0,w.useState)(),h=D()(s,2),o=h[0],j=h[1],f=function(){var l=d()(a()().mark(function v(){var A,p;return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,I.oL)();case 2:A=y.sent,p={},A.data.forEach(function(b){p[b.category]||(p[b.category]=[]);var S=b.category;if(p[S]){var U=p[S][p[S].length-1],L=U&&U.sort>b.sort?"unshift":"push";p[S][L](b)}}),j(p);case 6:case"end":return y.stop()}},v)}));return function(){return l.apply(this,arguments)}}(),E=(0,w.useState)("BaseConfig"),O=D()(E,2),P=O[0],C=O[1],c=[{key:"BaseConfig",label:"\u57FA\u7840\u914D\u7F6E",children:o?.BaseConfig&&(0,r.jsx)(V,{currentTab:P,config:o.BaseConfig,refresh:f})},{key:"ModelSetting",label:"\u9ED8\u8BA4\u6A21\u578B\u8BBE\u7F6E",children:o?.ModelSetting&&(0,r.jsx)(V,{currentTab:P,config:o.ModelSetting,refresh:f})},{key:"AgentSetting",label:"\u7AD9\u70B9\u667A\u80FD\u4F53\u8BBE\u7F6E",children:o?.AgentSetting&&(0,r.jsx)(V,{currentTab:P,config:o.AgentSetting,refresh:f})},{key:"DomainBind",label:"\u57DF\u540D\u7ED1\u5B9A",children:o?.DomainBind&&(0,r.jsx)(V,{currentTab:P,config:o.DomainBind,refresh:f})}],g=function(v){C(v)};return(0,w.useEffect)(function(){f()},[]),(0,r.jsxs)("div",{className:t(B.container,"overflow-y"),children:[(0,r.jsx)("div",{className:t(B.title),children:"\u7CFB\u7EDF\u914D\u7F6E\u9875\u9762"}),(0,r.jsx)(_.ZP,{theme:{components:{Tabs:{itemActiveColor:"#5147FF",inkBarColor:"#5147FF",itemSelectedColor:"#5147FF",itemHoverColor:"#5147FF"}}},children:(0,r.jsx)(N.Z,{defaultActiveKey:"BaseConfig",items:c,onChange:function(v){return g(v)}})})]})},u=i},58943:function(le,J,n){n.d(J,{Dh:function(){return q},N3:function(){return w},Nd:function(){return ae},Vk:function(){return se},YS:function(){return ne},fF:function(){return V},g2:function(){return re},gg:function(){return te},nJ:function(){return D},oL:function(){return ee},q0:function(){return x},uI:function(){return _},uS:function(){return Q}});var Y=n(15009),a=n.n(Y),X=n(99289),d=n.n(X),m=n(39902);function D(t){return I.apply(this,arguments)}function I(){return I=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/user/list",{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),I.apply(this,arguments)}function _(t){return N.apply(this,arguments)}function N(){return N=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/user/add",{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),N.apply(this,arguments)}function q(t){return G.apply(this,arguments)}function G(){return G=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/user/updateById/".concat(i.id),{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),G.apply(this,arguments)}function w(t){return K.apply(this,arguments)}function K(){return K=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/user/enable/".concat(i.id),{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),K.apply(this,arguments)}function x(t){return W.apply(this,arguments)}function W(){return W=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/user/disable/".concat(i.id),{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),W.apply(this,arguments)}function ee(){return T.apply(this,arguments)}function T(){return T=d()(a()().mark(function t(){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,m.request)("/api/system/config/list",{method:"POST"}));case 1:case"end":return u.stop()}},t)})),T.apply(this,arguments)}function te(){return Z.apply(this,arguments)}function Z(){return Z=d()(a()().mark(function t(){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,m.request)("/api/system/model/list",{method:"GET"}));case 1:case"end":return u.stop()}},t)})),Z.apply(this,arguments)}function ne(t){return R.apply(this,arguments)}function R(){return R=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/model/save",{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),R.apply(this,arguments)}function Q(t){return F.apply(this,arguments)}function F(){return F=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/model/".concat(i.id,"/delete"),{method:"GET"}));case 1:case"end":return e.stop()}},t)})),F.apply(this,arguments)}function re(){return k.apply(this,arguments)}function k(){return k=d()(a()().mark(function t(){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,m.request)("/api/model/list",{method:"POST",data:{}}));case 1:case"end":return u.stop()}},t)})),k.apply(this,arguments)}function ae(t){return r.apply(this,arguments)}function r(){return r=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/publish/agent/list",{method:"POST",data:{kw:i}}));case 1:case"end":return e.stop()}},t)})),r.apply(this,arguments)}function ie(t){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime().mark(function t(i){var u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=new FormData,u.append("file",i),s.abrupt("return",request("/api/file/upload",{method:"POST",data:u}));case 3:case"end":return s.stop()}},t)})),z.apply(this,arguments)}function se(t){return H.apply(this,arguments)}function H(){return H=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/config/add",{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),H.apply(this,arguments)}function V(t){return B.apply(this,arguments)}function B(){return B=d()(a()().mark(function t(i){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/system/user/notify/message/send",{method:"POST",data:i}));case 1:case"end":return e.stop()}},t)})),B.apply(this,arguments)}}}]);})();
