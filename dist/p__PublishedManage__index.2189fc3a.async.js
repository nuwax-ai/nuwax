"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[5323],{4141:function(Q,C,e){e.d(C,{Z:function(){return g}});var f=e(5574),r=e.n(f),F=e(99859),o=e(85804),P=e(94184),b=e.n(P),y=e(67294),j={btn:"btn___T9zvq","confirm-btn":"confirm-btn___kcWcm"},x=e(85893),L=b().bind(j),T=function(t){var N=t.form,l=t.loading,d=t.okPrefixIcon,a=t.okText,p=t.onConfirm,h=(0,y.useState)(!1),c=r()(h,2),s=c[0],M=c[1],A=F.Z.useWatch([],{form:N,preserve:!0});return(0,y.useEffect)(function(){N.validateFields({validateOnly:!0}).then(function(){return M(!0)}).catch(function(){return M(!1)})},[N,A]),(0,x.jsx)(o.ZP,{type:"primary",icon:d,loading:l,onClick:p,className:L(!s&&j["confirm-btn"],j.btn),disabled:!s,children:a||"\u786E\u5B9A"})},B=T,E=e(85576),w={btn:"btn___T2mwV"},I=b().bind(w),m=function(t){var N=t.form,l=t.classNames,d=t.title,a=t.open,p=t.loading,h=t.okPrefixIcon,c=t.okText,s=t.centered,M=s===void 0?!1:s,A=t.onCancel,k=t.onConfirm,H=t.children;return(0,x.jsx)(E.Z,{title:d,open:a,centered:M,classNames:l,destroyOnClose:!0,footer:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.ZP,{className:I(w.btn),type:"default",onClick:A,children:"\u53D6\u6D88"}),(0,x.jsx)(B,{okPrefixIcon:h,loading:p,onConfirm:k,form:N,okText:c})]}),onCancel:A,children:H})},g=m},64223:function(Q,C,e){e.r(C),e.d(C,{default:function(){return k}});var f=e(5574),r=e.n(f),F=e(59442),o=e(57822),P=e(63606),b=e(68795),y=e(99659),j=e(83062),x=e(85804),L=e(34041),T=e(25278),B=e(79368),E=e(14752),w=e(94184),I=e.n(w),m=e(30381),g=e.n(m),v=e(67294),t=e(4141),N=e(30961),l=e(99859),d=e(45360),a=e(85893),p=function(Z){var S=Z.open,R=Z.onCancel,K=Z.onConfirm,Y=Z.id,z=l.Z.useForm(),D=r()(z,1),O=D[0],ne=(0,v.useState)(!1),G=r()(ne,2),J=G[0],U=G[1],te=(0,y.Z)(F.qZ,{manual:!0,loadingDelay:300,onBefore:function(){U(!0)},onSuccess:function(){d.ZP.success("\u4E0B\u67B6\u6210\u529F"),O.resetFields(),K()},onFinally:function(){U(!1)}}),q=te.run,_=function(){O.validateFields().then(function(X){q({id:Y,reason:X.reason})}).catch(function(X){console.log(X)})};return(0,a.jsx)(t.Z,{open:S,form:O,title:"\u4E0B\u67B6",onCancel:function(){O.resetFields(),R()},onConfirm:_,loading:J,children:(0,a.jsx)(l.Z,{form:O,layout:"vertical",requiredMark:N.N,children:(0,a.jsx)(l.Z.Item,{name:"reason",label:"\u8BF7\u8F93\u5165\u4E0B\u67B6\u539F\u56E0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E0B\u67B6\u539F\u56E0"}],children:(0,a.jsx)(T.Z.TextArea,{rows:4,placeholder:"\u8BF7\u8F93\u5165\u4E0B\u67B6\u539F\u56E0"})})})})},h=p,c={"system-manage-container":"system-manage-container___aH0Vl","system-manage-title":"system-manage-title___wiHH1","table-column-fixed":"table-column-fixed___eHDM7","search-section":"search-section____xD5x","select-132":"select-132___iXr_y","search-input-255":"search-input-255___U_Tte","table-row-divider":"table-row-divider___FH9NS","table-action-ant-btn-link":"table-action-ant-btn-link___Zd3u3",footer:"footer___jPqfF"},s=I().bind(c),M=[{value:"",label:"\u5168\u90E8"},{value:o.Q.Agent,label:"\u667A\u80FD\u4F53"},{value:o.Q.Plugin,label:"\u63D2\u4EF6"},{value:o.Q.Workflow,label:"\u5DE5\u4F5C\u6D41"}],A=function(){var Z=(0,v.useState)(""),S=r()(Z,2),R=S[0],K=S[1],Y=(0,v.useState)(""),z=r()(Y,2),D=z[0],O=z[1],ne=(0,v.useState)(1),G=r()(ne,2),J=G[0],U=G[1],te=(0,v.useState)(10),q=r()(te,2),_=q[0],$=q[1],X=(0,v.useState)(!1),le=r()(X,2),ue=le[0],ae=le[1],ce=(0,v.useState)(),oe=r()(ce,2),de=oe[0],fe=oe[1],me=(0,v.useState)(0),ie=r()(me,2),he=ie[0],ve=ie[1],ee=(0,y.Z)(F.kb,{debounceWait:300,defaultParams:[{pageNo:J,pageSize:10,queryFilter:{targetType:R||void 0,kw:D}}]}),V=ee.data,re=ee.run,ge=ee.refresh,pe=ee.loading;(0,v.useEffect)(function(){var u=function(){var W=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-250;ve(W)};u(),window.addEventListener("resize",u);var n=function(){setTimeout(u,100)};return window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",u),window.removeEventListener("orientationchange",n)}},[]);var se=function(n,i,W){var Oe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_;return{pageNo:n,pageSize:Oe,queryFilter:{targetType:i||void 0,kw:W}}},xe=function(n){K(n),U(1);var i=se(1,n,D);re(i)},Pe=function(n){O(n),U(1);var i=se(1,R,n);re(i)},ye=function(n,i){U(n),$(i);var W=se(n,R,D,i);re(W)},Ce=function(n){fe(n),ae(!0)},be=function(n){var i="";n.targetType===o.Q.Agent?i="/space/".concat(n.spaceId,"/agent/").concat(n.targetId,"?publishId=").concat(n.id):n.targetType===o.Q.Plugin?n.pluginType==="CODE"?i="/space/".concat(n.spaceId,"/plugin/").concat(n.targetId,"/cloud-tool?applyId=").concat(n.id):i="/space/".concat(n.spaceId,"/plugin/").concat(n.targetId,"?publishId=").concat(n.id):n.targetType===o.Q.Workflow&&(i="/space/".concat(n.spaceId,"/workflow/").concat(n.targetId,"?publishId=").concat(n.id)),i&&window.open(i,"_blank","noopener,noreferrer")},je=function(n){switch(n){case o.Q.Agent:return"\u667A\u80FD\u4F53";case o.Q.Plugin:return"\u63D2\u4EF6";case o.Q.Workflow:return"\u5DE5\u4F5C\u6D41"}},Se=[{title:"\u53D1\u5E03\u540D\u79F0",dataIndex:"name",key:"name",width:200,className:c["table-column-fixed"],render:function(n){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(0,a.jsx)("span",{className:s("text-ellipsis-2"),children:n})})}},{title:"\u7C7B\u578B",dataIndex:"targetType",key:"targetType",width:100,render:function(n){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:je(n)})}},{title:"\u63CF\u8FF0\u4FE1\u606F",dataIndex:"description",key:"description",width:200,render:function(n){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(0,a.jsx)(j.Z,{title:n,placement:"topLeft",children:(0,a.jsx)("div",{className:s("text-ellipsis-2"),children:n})})})}},{title:"\u7248\u672C\u4FE1\u606F",dataIndex:"remark",key:"remark",width:200,render:function(n){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(0,a.jsx)(j.Z,{title:n,placement:"topLeft",children:(0,a.jsx)("div",{className:s("text-ellipsis-2"),children:n})})})}},{title:"\u53D1\u5E03\u8005",dataIndex:"publishUser",key:"publishUser",width:200,render:function(n){var i;return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(i=n?.userName)!==null&&i!==void 0?i:"--"})}},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"created",key:"created",width:170,render:function(n){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:g()(n).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u64CD\u4F5C",key:"action",align:"center",width:120,fixed:"right",className:c["table-column-fixed"],render:function(n,i){return(0,a.jsxs)("div",{className:s("flex","items-center","h-full","content-center"),children:[(0,a.jsx)(x.ZP,{type:"link",className:s(c["table-action-ant-btn-link"]),onClick:function(){return be(i)},children:"\u67E5\u770B"}),(0,a.jsx)(x.ZP,{type:"link",className:s(c["table-action-ant-btn-link"]),onClick:function(){return Ce(i.id)},children:"\u4E0B\u67B6"})]})}}];return(0,a.jsxs)("div",{className:s(c["system-manage-container"],"flex","flex-col","h-full","overflow-hide"),children:[(0,a.jsx)("h3",{className:s(c["system-manage-title"]),children:"\u5DF2\u53D1\u5E03\u7BA1\u7406"}),(0,a.jsxs)("section",{className:s("flex","content-between",c["search-section"]),children:[(0,a.jsx)(L.Z,{className:s(c["select-132"]),options:M,defaultValue:"",onChange:xe,optionLabelProp:"label",dropdownRender:function(n){return(0,a.jsx)(a.Fragment,{children:n})},menuItemSelectedIcon:(0,a.jsx)(P.Z,{style:{marginRight:8}})}),(0,a.jsx)(T.Z,{className:s(c["search-input-255"]),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u5DE5\u4F5C\u6D41\u6216\u667A\u80FD\u4F53\u540D\u79F0",prefix:(0,a.jsx)(b.Z,{}),onPressEnter:function(n){n.key==="Enter"&&Pe(n.currentTarget.value)}})]}),(0,a.jsx)("div",{className:s("flex-1"),children:(0,a.jsx)(B.Z,{rowClassName:s(c["table-row-divider"],"h-full"),rowKey:"id",loading:pe,columns:Se,dataSource:V?.data.records,scroll:{x:"max-content",y:he},virtual:!0,pagination:!1})}),(0,a.jsx)("footer",{className:s("flex","content-end","items-center",c.footer),children:(0,a.jsx)(E.Z,{current:J,pageSize:_,showSizeChanger:!0,total:V?.data.total,showTotal:function(n){return"\u5171 ".concat(n," \u6761")},onChange:ye})}),(0,a.jsx)(h,{open:ue,id:de,onCancel:function(){return ae(!1)},onConfirm:function(){ae(!1),ge()}})]})},k=A},59442:function(Q,C,e){e.d(C,{Ez:function(){return b},NH:function(){return L},jw:function(){return j},kb:function(){return B},qZ:function(){return w}});var f=e(15009),r=e.n(f),F=e(99289),o=e.n(F),P=e(39902);function b(m){return y.apply(this,arguments)}function y(){return y=o()(r()().mark(function m(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,P.request)("/api/system/publish/apply/list",{method:"POST",data:g}));case 1:case"end":return t.stop()}},m)})),y.apply(this,arguments)}function j(m){return x.apply(this,arguments)}function x(){return x=o()(r()().mark(function m(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,P.request)("/api/system/publish/".concat(g.id),{method:"POST",data:g}));case 1:case"end":return t.stop()}},m)})),x.apply(this,arguments)}function L(m){return T.apply(this,arguments)}function T(){return T=o()(r()().mark(function m(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,P.request)("/api/system/publish/reject/".concat(g.id),{method:"POST",data:g}));case 1:case"end":return t.stop()}},m)})),T.apply(this,arguments)}function B(m){return E.apply(this,arguments)}function E(){return E=o()(r()().mark(function m(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,P.request)("/api/system/publish/list",{method:"POST",data:g}));case 1:case"end":return t.stop()}},m)})),E.apply(this,arguments)}function w(m){return I.apply(this,arguments)}function I(){return I=o()(r()().mark(function m(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,P.request)("/api/system/publish/offShelf/".concat(g.id),{method:"POST",data:g}));case 1:case"end":return t.stop()}},m)})),I.apply(this,arguments)}},57822:function(Q,C,e){e.d(C,{Q:function(){return f}});var f=function(r){return r.Agent="Agent",r.Plugin="Plugin",r.Workflow="Workflow",r.Knowledge="Knowledge",r.Template="Template",r}({})},30961:function(Q,C,e){e.d(C,{N:function(){return F},g:function(){return o}});var f=e(67294),r=e(85893),F=function(b,y){var j=y.required;return(0,r.jsxs)(r.Fragment,{children:[b,j?(0,r.jsx)("span",{style:{color:"red",fontWeight:600,marginLeft:"4px"},children:"*"}):null]})},o=function(b){return(0,r.jsx)(r.Fragment,{children:b})}},85576:function(Q,C,e){e.d(C,{Z:function(){return N}});var f=e(56080),r=e(38657),F=e(56745),o=e(67294),P=e(13144),b=e.n(P),y=e(31058),j=e(8745),x=e(53124),L=e(35792),T=e(32409),B=e(4941),E=e(71194),w=function(l,d){var a={};for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&d.indexOf(p)<0&&(a[p]=l[p]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,p=Object.getOwnPropertySymbols(l);h<p.length;h++)d.indexOf(p[h])<0&&Object.prototype.propertyIsEnumerable.call(l,p[h])&&(a[p[h]]=l[p[h]]);return a};const I=l=>{const{prefixCls:d,className:a,closeIcon:p,closable:h,type:c,title:s,children:M,footer:A}=l,k=w(l,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:H}=o.useContext(x.E_),Z=H(),S=d||H("modal"),R=(0,L.Z)(Z),[K,Y,z]=(0,E.ZP)(S,R),D=`${S}-confirm`;let O={};return c?O={closable:h??!1,title:"",footer:"",children:o.createElement(T.O,Object.assign({},l,{prefixCls:S,confirmPrefixCls:D,rootPrefixCls:Z,content:M}))}:O={closable:h??!0,title:s,footer:A!==null&&o.createElement(B.$,Object.assign({},l)),children:M},K(o.createElement(y.Panel,Object.assign({prefixCls:S,className:b()(Y,`${S}-pure-panel`,c&&D,c&&`${D}-${c}`,a,z,R)},k,{closeIcon:(0,B.b)(S,p),closable:h},O)))};var m=(0,j.i)(I),g=e(94423);function v(l){return(0,f.ZP)((0,f.uW)(l))}const t=F.Z;t.useModal=g.Z,t.info=function(d){return(0,f.ZP)((0,f.cw)(d))},t.success=function(d){return(0,f.ZP)((0,f.vq)(d))},t.error=function(d){return(0,f.ZP)((0,f.AQ)(d))},t.warning=v,t.warn=v,t.confirm=function(d){return(0,f.ZP)((0,f.Au)(d))},t.destroyAll=function(){for(;r.Z.length;){const d=r.Z.pop();d&&d()}},t.config=f.ai,t._InternalPanelDoNotUseOrYouWillBeFired=m;var N=t}}]);})();
