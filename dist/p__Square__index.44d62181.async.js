"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[1140],{24545:function(se,P,t){t.r(P),t.d(P,{default:function(){return s}});var L=t(19632),I=t.n(L),N=t(5574),S=t.n(N),M=t.p+"static/square_banner_image.e62d8524.png",O=t(50948),A=t(70852),R=t(1675),U=t(15036),p=t(33049),v=t(57822),B=t(89575),$=t(25278),V=t(32983),Y=t(94184),F=t.n(Y),l=t(67294),T=t(39902),f={container:"container___kyOFV",header:"header___PxGVx","title-box":"title-box___k620K","theme-title":"theme-title___cVm90","search-input":"search-input___N6lRu","min-height-300":"min-height-300___G8QW5","list-section":"list-section___Ui6B1"},Q=t(36466),Z=t(79379),K=t(32626),e=t(85893),n=F().bind(f),o=function(){var i=(0,l.useState)(),d=S()(i,2),r=d[0],m=d[1],y=(0,l.useState)(!1),g=S()(y,2),C=g[0],E=g[1],W=(0,l.useState)("\u667A\u80FD\u4F53"),X=S()(W,2),oe=X[0],b=X[1],H=(0,l.useRef)(""),J=(0,l.useRef)(v.Q.Agent),ue=(0,l.useState)(1),w=S()(ue,2),le=w[0],ie=w[1],ce=(0,l.useState)(!0),q=S()(ce,2),fe=q[0],de=q[1],ee=(0,l.useRef)(""),j=(0,l.useRef)(p._U),D=(0,U.Z)(),x=D.squareComponentList,ne=D.setSquareComponentList,k=D.handleClick,te=D.handleToggleCollectSuccess,ve=function(u){var c=u.records,h=u.pages,G=u.current,ae=c||[];ne(function(ye){return G===1?ae:[].concat(I()(ye),I()(ae))}),de(G<h),ie(G+1),E(!1)},me=(0,T.useRequest)(j.current,{manual:!0,debounceInterval:300,onSuccess:function(u){ve(u)},onError:function(){E(!1)}}),ge=me.run,he=function(){var u=(0,B.Qb)(),c=u.cate_type,h=u.cate_name;switch(J.current=c,H.current=h??c,c){case v.Q.Agent:b("\u667A\u80FD\u4F53"),j.current=p._U;break;case v.Q.Plugin:b("\u63D2\u4EF6"),j.current=p.VH;break;case v.Q.Workflow:b("\u5DE5\u4F5C\u6D41"),j.current=p.pH;break;case v.Q.Template:b("\u6A21\u677F"),j.current=p.M3;break}},z=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee.current,h={page:u,pageSize:20,category:H.current,kw:c};ge(h)},Se=function(){z(le)},re=function(){he(),ne([]),E(!0),z()};(0,l.useEffect)(function(){var a=localStorage.getItem(R.GP);a&&m(JSON.parse(a)),re();var u=T.history.listen(function(c){var h=c.location;h.pathname==="/square"&&re()});return function(){u()}},[]);var pe=function(){r!=null&&r.squareBannerLinkUrl&&window.open(r.squareBannerLinkUrl,"_blank")},_e=function(u){ee.current=u,z(1,u)};return(0,e.jsx)("div",{id:"scrollableDiv",className:n(f.container,"h-full","flex","flex-col","overflow-y"),children:(0,e.jsxs)(O.Z,{scrollableTarget:"scrollableDiv",list:x,hasMore:fe,onScroll:Se,children:[(0,e.jsxs)("header",{className:n(f.header),onClick:pe,style:{background:"url(".concat(r?.squareBanner||M,") no-repeat center center"),backgroundSize:"cover",backgroundPosition:"center center"},children:[(0,e.jsx)("h3",{className:n("text-ellipsis-2"),children:r?.squareBannerText||"\u4EBA\u4EBA\u90FD\u662F\u667A\u80FD\u8BBE\u8BA1\u5E08"}),(0,e.jsx)("p",{className:n("text-ellipsis-2"),children:r?.squareBannerSubText||`\u65B0\u4E00\u4EE3AI\u5E94\u7528\u8BBE\u8BA1\u3001\u5F00\u53D1\u3001\u5B9E\u8DF5\u5E73\u53F0 
 \u65E0\u9700\u4EE3\u7801\uFF0C\u8F7B\u677E\u521B\u5EFA\uFF0C\u9002\u5408\u5404\u7C7B\u4EBA\u7FA4\uFF0C\u652F\u6301\u591A\u79CD\u7AEF\u53D1\u5E03\u53CAAPI`})]}),(0,e.jsxs)("div",{className:n("flex","items-center","content-between",f["title-box"]),children:[(0,e.jsx)("h6",{className:n(f["theme-title"]),children:oe}),(0,e.jsx)($.Z.Search,{className:n(f["search-input"]),placeholder:"\u641C\u7D22",allowClear:!0,onSearch:_e},H.current)]}),C?(0,e.jsx)(A.Z,{className:n(f["min-height-300"])}):x?.length>0?(0,e.jsx)("div",{className:n(f["list-section"]),children:x.map(function(a,u){return J.current===v.Q.Agent?(0,e.jsx)(Q.Z,{publishedItemInfo:a,onToggleCollectSuccess:te,onClick:function(){return k(a.targetId,a.targetType)}},u):J.current===v.Q.Template?(0,e.jsx)(K.Z,{publishedItemInfo:a,onClick:function(){return k(a.targetId,a.targetType)}},u):(0,e.jsx)(Z.Z,{publishedItemInfo:a,onToggleCollectSuccess:te,onClick:function(){return k(a.targetId,a.targetType)}},u)})}):(0,e.jsx)("div",{className:n("flex","flex-1","items-center","content-center"),children:(0,e.jsx)(V.Z,{className:n(f["min-height-300"],"flex","flex-col","items-center","content-center"),description:"\u6682\u65E0\u6570\u636E"})})]})})},s=o},89575:function(se,P,t){t.d(P,{BK:function(){return T},F1:function(){return f},P4:function(){return K},Qb:function(){return F},VL:function(){return Q},Xh:function(){return O.a},an:function(){return A},hj:function(){return R},j0:function(){return v},kj:function(){return U},t7:function(){return l},tp:function(){return B},uo:function(){return V},vV:function(){return p}});var L=t(5574),I=t.n(L),N=t(64599),S=t.n(N),M=t(50361),O=t.n(M),A=function(n){return n?.replace(/[^0-9]/g,"")},R=function(n){return!Number.isNaN(Number(n))};function U(e){var n=/^1[3456789]\d{9}$/;return n.test(e)}function p(e){var n=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,}$/;return n.test(e)}function v(e){var n=/^[a-zA-Z_][a-zA-Z0-9_]*$/;return n.test(e)}function B(e){if(!e||typeof e!="string")return!1;var n=e.trim();if(!/^{/.test(n)||!/}$/.test(n))return!1;try{return JSON.parse(n),!0}catch{return!1}}function $(e){if(!e||typeof e!="string")return{isValid:!1,error:"\u8F93\u5165\u4E3A\u7A7A\u6216\u4E0D\u662F\u5B57\u7B26\u4E32"};try{var n=JSON.parse(e);return{isValid:!0,data:n}}catch(o){return{isValid:!1,error:o instanceof Error?o.message:"JSON\u683C\u5F0F\u9519\u8BEF"}}}function V(e){return e?.length>=6}var Y=function(n,o){var s=new FileReader;s.addEventListener("load",function(){return o(s.result)}),s.readAsDataURL(n)},F=function(){var n=window.location.search.substring(1).split("&"),o={},s=S()(n),_;try{for(s.s();!(_=s.n()).done;){var i=_.value,d=i.split("="),r=I()(d,2),m=r[0],y=r[1];o[m]=y}}catch(g){s.e(g)}finally{s.f()}return o},l=function(){if(!document.head.querySelector("base")){var n=document.createElement("base");n.target="_blank",document.head.append(n)}};function T(e){if(!e)return"";var n=new Date().getTime(),o=new Date(e).getTime(),s=n-o,_=Math.floor(s/1e3),i=Math.floor(_/60),d=Math.floor(i/60),r=Math.floor(d/24);if(r>365*2)return"".concat(Math.floor(r/365),"\u5E74\u524D");if(r>365)return"\u53BB\u5E74";if(r>30){var m=new Date,y=new Date(e),g=(m.getFullYear()-y.getFullYear())*12;return g+=m.getMonth()-y.getMonth(),m.getDate()<y.getDate()&&g--,g>=1?"".concat(g," \u6708\u524D"):null}else{if(r>6)return"".concat(r,"\u5929\u524D");if(r>2){var C=new Date(e),E=C.getMonth()+1,W=C.getDate()<10?"0".concat(C.getDate()):C.getDate();return"".concat(E,"-").concat(W)}else return r===2?"\u524D\u5929":r===1?"\u6628\u5929":d>1?"".concat(d,"\u5C0F\u65F6\u524D"):i>0?"".concat(i,"\u5206\u949F\u524D"):"\u521A\u521A"}}function f(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Q=function(n,o){var s=new Set(n),_=new Set(o),i=S()(s),d;try{for(i.s();!(d=i.n()).done;){var r=d.value;if(!_.has(r))return!1}}catch(m){i.e(m)}finally{i.f()}return!0},Z=function(n,o){for(var s=n;s.parentElement;){if(s.parentElement.classList.contains(o))return s.parentElement;s=s.parentElement}return null},K=function(n,o){return n.classList.contains(o)?n:Z(n,o)}}}]);})();
