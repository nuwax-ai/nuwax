"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[2667],{4141:function(U,P,e){e.d(P,{Z:function(){return x}});var h=e(5574),l=e.n(h),M=e(99859),p=e(85804),C=e(94184),v=e.n(C),j=e(67294),o={btn:"btn___T9zvq","confirm-btn":"confirm-btn___kcWcm"},d=e(85893),y=v().bind(o),I=function(n){var D=n.form,u=n.loading,m=n.okPrefixIcon,Z=n.okText,i=n.onConfirm,g=(0,j.useState)(!1),F=l()(g,2),A=F[0],a=F[1],L=M.Z.useWatch([],{form:D,preserve:!0});return(0,j.useEffect)(function(){D.validateFields({validateOnly:!0}).then(function(){return a(!0)}).catch(function(){return a(!1)})},[D,L]),(0,d.jsx)(p.ZP,{type:"primary",icon:m,loading:u,onClick:i,className:y(!A&&o["confirm-btn"],o.btn),disabled:!A,children:Z||"\u786E\u5B9A"})},B=I,S=e(85576),T={btn:"btn___T2mwV"},N=v().bind(T),f=function(n){var D=n.form,u=n.classNames,m=n.title,Z=n.open,i=n.loading,g=n.okPrefixIcon,F=n.okText,A=n.centered,a=A===void 0?!1:A,L=n.onCancel,Q=n.onConfirm,r=n.children;return(0,d.jsx)(S.Z,{title:m,open:Z,centered:a,classNames:u,destroyOnClose:!0,footer:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.ZP,{className:N(T.btn),type:"default",onClick:L,children:"\u53D6\u6D88"}),(0,d.jsx)(B,{okPrefixIcon:g,loading:i,onConfirm:Q,form:D,okText:F})]}),onCancel:L,children:r})},x=f},25458:function(U,P,e){e.r(P),e.d(P,{default:function(){return ae}});var h=e(9783),l=e.n(h),M=e(97857),p=e.n(M),C=e(5574),v=e.n(C),j=e(59442),o=e(7809),d=e(95141),y=e(57822),I=e(63606),B=e(68795),S=e(99659),T=e(45360),N=e(83062),f=e(85804),x=e(34041),b=e(25278),n=e(79368),D=e(94184),u=e.n(D),m=e(30381),Z=e.n(m),i=e(67294),g=e(4141),F=e(30961),A=e(99859),a=e(85893),L=function(w){var V=w.open,O=w.onCancel,le=w.onConfirm,re=w.id,X=A.Z.useForm(),$=v()(X,1),k=$[0],oe=(0,i.useState)(!1),K=v()(oe,2),H=K[0],q=K[1],ue=(0,S.Z)(j.NH,{manual:!0,loadingDelay:300,onBefore:function(){q(!0)},onSuccess:function(){T.ZP.success("\u62D2\u7EDD\u5BA1\u6838\u6210\u529F"),k.resetFields(),le()},onFinally:function(){q(!1)}}),_=ue.run,ie=function(){k.validateFields().then(function(Y){_({id:re,reason:Y.reason})}).catch(function(Y){console.log(Y)})};return(0,a.jsx)(g.Z,{open:V,form:k,title:"\u62D2\u7EDD\u5BA1\u6838",onCancel:function(){k.resetFields(),O()},onConfirm:ie,loading:H,children:(0,a.jsx)(A.Z,{form:k,layout:"vertical",requiredMark:F.N,children:(0,a.jsx)(A.Z.Item,{name:"reason",label:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0"}],children:(0,a.jsx)(b.Z.TextArea,{rows:4,placeholder:"\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0"})})})})},Q=L,r=u().bind(o.Z),G=[{value:"",label:"\u5168\u90E8"},{value:y.Q.Agent,label:"\u667A\u80FD\u4F53"},{value:y.Q.Plugin,label:"\u63D2\u4EF6"},{value:y.Q.Workflow,label:"\u5DE5\u4F5C\u6D41"}],W=[{value:"",label:"\u5168\u90E8"},{value:d.xH.Applying,label:"\u5F85\u5BA1\u6838"},{value:d.xH.Published,label:"\u901A\u8FC7"},{value:d.xH.Rejected,label:"\u62D2\u7EDD"}],J=function(){var w=(0,i.useState)(""),V=v()(w,2),O=V[0],le=V[1],re=(0,i.useState)(d.xH.Applying),X=v()(re,2),$=X[0],k=X[1],oe=(0,i.useState)(""),K=v()(oe,2),H=K[0],q=K[1],ue=(0,i.useState)(1),_=v()(ue,2),ie=_[0],E=_[1],Y=(0,i.useState)({}),de=v()(Y,2),ve=de[0],fe=de[1],ee=(0,S.Z)(j.Ez,{debounceWait:300,defaultParams:[{pageNo:ie,pageSize:10,queryFilter:{targetType:O||void 0,publishStatus:$||void 0,kw:H}}]}),z=ee.data,te=ee.run,me=ee.refresh,ge=ee.loading,ne=function(t,s,R,De){return{pageNo:t,pageSize:10,queryFilter:{targetType:s||void 0,publishStatus:R||void 0,kw:De}}},xe=function(t){le(t),E(1);var s=ne(1,t,$,H);te(s)},ye=function(t){k(t),E(1);var s=ne(1,O,t,H);te(s)},Pe=function(t){q(t),E(1);var s=ne(1,O,$,t);te(s)},je=function(t){E(t);var s=ne(t,O,$,H);te(s)},Ce=(0,S.Z)(j.jw,{manual:!0,loadingDelay:300,onBefore:function(t){fe(function(s){return p()(p()({},s),{},l()({},t[0].id,!0))})},onSuccess:function(){T.ZP.success("\u901A\u8FC7\u5BA1\u6838\u6210\u529F"),me()},onFinally:function(t){fe(function(s){return p()(p()({},s),{},l()({},t[0].id,!1))})}}),be=Ce.run,Se=(0,i.useState)(!1),he=v()(Se,2),Ze=he[0],ce=he[1],Fe=(0,i.useState)(),pe=v()(Fe,2),Ae=pe[0],Ie=pe[1],Ne=function(t){Ie(t),ce(!0)},Oe=function(t){var s="";t.targetType===y.Q.Agent&&(s="/space/".concat(t.spaceId,"/agent/").concat(t.targetId,"?applyId=").concat(t.id)),t.targetType===y.Q.Plugin&&(t.pluginType==="CODE"?s="/space/".concat(t.spaceId,"/plugin/").concat(t.targetId,"/cloud-tool?applyId=").concat(t.id):s="/space/".concat(t.spaceId,"/plugin/").concat(t.targetId,"?applyId=").concat(t.id)),t.targetType===y.Q.Workflow&&(s="/space/".concat(t.spaceId,"/workflow/").concat(t.targetId,"?applyId=").concat(t.id)),s&&window.open(s,"_blank","noopener,noreferrer")},Me=function(t){switch(t){case y.Q.Agent:return"\u667A\u80FD\u4F53";case y.Q.Plugin:return"\u63D2\u4EF6";case y.Q.Workflow:return"\u5DE5\u4F5C\u6D41"}},Te=[{title:"\u53D1\u5E03\u540D\u79F0",dataIndex:"name",key:"name",width:200,className:o.Z["table-column-fixed"],render:function(t){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(0,a.jsx)("span",{className:r("text-ellipsis-2"),children:t})})}},{title:"\u7C7B\u578B",dataIndex:"targetType",key:"targetType",width:100,render:function(t){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:Me(t)})}},{title:"\u63CF\u8FF0\u4FE1\u606F",dataIndex:"description",key:"description",width:200,render:function(t){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(0,a.jsx)(N.Z,{title:t,placement:"topLeft",children:(0,a.jsx)("div",{className:r("text-ellipsis-2"),children:t})})})}},{title:"\u7248\u672C\u4FE1\u606F",dataIndex:"remark",key:"remark",width:200,render:function(t){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(0,a.jsx)(N.Z,{title:t,placement:"topLeft",children:(0,a.jsx)("div",{className:r("text-ellipsis-2"),children:t})})})}},{title:"\u53D1\u5E03\u8005",dataIndex:"applyUser",key:"applyUser",width:200,render:function(t){var s;return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:(s=t?.userName)!==null&&s!==void 0?s:"--"})}},{title:"\u72B6\u6001",dataIndex:"publishStatus",key:"publishStatus",width:100,render:function(t){var s="",R="";switch(t){case d.xH.Published:s="\u901A\u8FC7",R=o.Z["dot-green"];break;case d.xH.Rejected:s="\u62D2\u7EDD",R=o.Z["dot-red"];break;case d.xH.Applying:s="\u5F85\u5BA1\u6838",R=o.Z["dot-blue"];break}return(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:r(o.Z.dot,R)}),s]})}},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"created",key:"created",width:180,render:function(t){return(0,a.jsx)("div",{className:r("flex","items-center","h-full"),children:Z()(t).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u64CD\u4F5C",key:"action",width:200,align:"center",fixed:"right",className:o.Z["table-column-fixed"],render:function(t,s){return(0,a.jsxs)(a.Fragment,{children:[s.publishStatus===d.xH.Applying?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.ZP,{type:"link",className:r(o.Z["table-action-ant-btn-link"]),loading:ve[s.id]||!1,onClick:function(){return be({id:s.id})},children:"\u901A\u8FC7"}),(0,a.jsx)(f.ZP,{type:"link",className:r(o.Z["table-action-ant-btn-link"]),onClick:function(){return Ne(s.id)},children:"\u62D2\u7EDD"})]}):null,(0,a.jsx)(f.ZP,{type:"link",onClick:function(){return Oe(s)},children:"\u67E5\u770B"})]})}}];return(0,a.jsxs)("div",{className:r(o.Z["system-manage-container"],"overflow-y"),children:[(0,a.jsx)("h3",{className:r(o.Z["system-manage-title"]),children:"\u53D1\u5E03\u5BA1\u6838"}),(0,a.jsxs)("section",{className:r("flex","content-between"),children:[(0,a.jsxs)("div",{className:r("flex"),children:[(0,a.jsx)(x.Z,{className:r(o.Z["select-132"],"mr-16"),options:G,defaultValue:"",onChange:xe,optionLabelProp:"label",dropdownRender:function(t){return(0,a.jsx)(a.Fragment,{children:t})},menuItemSelectedIcon:(0,a.jsx)(I.Z,{style:{marginRight:8}})}),(0,a.jsx)(x.Z,{className:r(o.Z["select-132"]),options:W,onChange:ye,optionLabelProp:"label",dropdownRender:function(t){return(0,a.jsx)(a.Fragment,{children:t})},defaultValue:d.xH.Applying,menuItemSelectedIcon:(0,a.jsx)(I.Z,{style:{marginRight:8}})})]}),(0,a.jsx)(b.Z,{className:r(o.Z["search-input-255"]),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u5DE5\u4F5C\u6D41\u6216\u667A\u80FD\u4F53\u540D\u79F0",prefix:(0,a.jsx)(B.Z,{}),onPressEnter:function(t){t.key==="Enter"&&Pe(t.currentTarget.value)}})]}),(0,a.jsx)(n.Z,{rowClassName:r(o.Z["table-row-divider"]),className:r("mt-30"),rowKey:"id",loading:ge,columns:Te,dataSource:z?.data.records,scroll:{x:"max-content"},virtual:!0,pagination:{total:z?.data.total,onChange:je,showTotal:function(t){return"\u5171 ".concat(t," \u6761")}}}),(0,a.jsx)(Q,{open:Ze,id:Ae,onCancel:function(){return ce(!1)},onConfirm:function(){ce(!1),me()}})]})},ae=J},59442:function(U,P,e){e.d(P,{Ez:function(){return v},NH:function(){return y},jw:function(){return o},kb:function(){return B},qZ:function(){return T}});var h=e(15009),l=e.n(h),M=e(99289),p=e.n(M),C=e(39902);function v(f){return j.apply(this,arguments)}function j(){return j=p()(l()().mark(function f(x){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.request)("/api/system/publish/apply/list",{method:"POST",data:x}));case 1:case"end":return n.stop()}},f)})),j.apply(this,arguments)}function o(f){return d.apply(this,arguments)}function d(){return d=p()(l()().mark(function f(x){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.request)("/api/system/publish/".concat(x.id),{method:"POST",data:x}));case 1:case"end":return n.stop()}},f)})),d.apply(this,arguments)}function y(f){return I.apply(this,arguments)}function I(){return I=p()(l()().mark(function f(x){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.request)("/api/system/publish/reject/".concat(x.id),{method:"POST",data:x}));case 1:case"end":return n.stop()}},f)})),I.apply(this,arguments)}function B(f){return S.apply(this,arguments)}function S(){return S=p()(l()().mark(function f(x){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.request)("/api/system/publish/list",{method:"POST",data:x}));case 1:case"end":return n.stop()}},f)})),S.apply(this,arguments)}function T(f){return N.apply(this,arguments)}function N(){return N=p()(l()().mark(function f(x){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.request)("/api/system/publish/offShelf/".concat(x.id),{method:"POST",data:x}));case 1:case"end":return n.stop()}},f)})),N.apply(this,arguments)}},57822:function(U,P,e){e.d(P,{Q:function(){return h}});var h=function(l){return l.Agent="Agent",l.Plugin="Plugin",l.Workflow="Workflow",l.Knowledge="Knowledge",l.Template="Template",l}({})},30961:function(U,P,e){e.d(P,{N:function(){return M},g:function(){return p}});var h=e(67294),l=e(85893),M=function(v,j){var o=j.required;return(0,l.jsxs)(l.Fragment,{children:[v,o?(0,l.jsx)("span",{style:{color:"red",fontWeight:600,marginLeft:"4px"},children:"*"}):null]})},p=function(v){return(0,l.jsx)(l.Fragment,{children:v})}},7809:function(U,P){P.Z={"system-manage-container":"system-manage-container___LMJ0u","system-manage-title":"system-manage-title___WRyi3","table-column-fixed":"table-column-fixed___VLdtk","select-132":"select-132___xi4Oi","search-input-225":"search-input-225___qkYcd","search-input-255":"search-input-255___xY2Zb","dot-circle":"dot-circle___q_zNW","dot-red":"dot-red___eP5AX","dot-green":"dot-green___E1FGA","table-row-divider":"table-row-divider___Pw0Mu","table-action-ant-btn-link":"table-action-ant-btn-link___itR3h"}},85576:function(U,P,e){e.d(P,{Z:function(){return D}});var h=e(56080),l=e(38657),M=e(56745),p=e(67294),C=e(13144),v=e.n(C),j=e(31058),o=e(8745),d=e(53124),y=e(35792),I=e(32409),B=e(4941),S=e(71194),T=function(u,m){var Z={};for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&m.indexOf(i)<0&&(Z[i]=u[i]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,i=Object.getOwnPropertySymbols(u);g<i.length;g++)m.indexOf(i[g])<0&&Object.prototype.propertyIsEnumerable.call(u,i[g])&&(Z[i[g]]=u[i[g]]);return Z};const N=u=>{const{prefixCls:m,className:Z,closeIcon:i,closable:g,type:F,title:A,children:a,footer:L}=u,Q=T(u,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=p.useContext(d.E_),G=r(),W=m||r("modal"),J=(0,y.Z)(G),[ae,se,w]=(0,S.ZP)(W,J),V=`${W}-confirm`;let O={};return F?O={closable:g??!1,title:"",footer:"",children:p.createElement(I.O,Object.assign({},u,{prefixCls:W,confirmPrefixCls:V,rootPrefixCls:G,content:a}))}:O={closable:g??!0,title:A,footer:L!==null&&p.createElement(B.$,Object.assign({},u)),children:a},ae(p.createElement(j.Panel,Object.assign({prefixCls:W,className:v()(se,`${W}-pure-panel`,F&&V,F&&`${V}-${F}`,Z,w,J)},Q,{closeIcon:(0,B.b)(W,i),closable:g},O)))};var f=(0,o.i)(N),x=e(94423);function b(u){return(0,h.ZP)((0,h.uW)(u))}const n=M.Z;n.useModal=x.Z,n.info=function(m){return(0,h.ZP)((0,h.cw)(m))},n.success=function(m){return(0,h.ZP)((0,h.vq)(m))},n.error=function(m){return(0,h.ZP)((0,h.AQ)(m))},n.warning=b,n.warn=b,n.confirm=function(m){return(0,h.ZP)((0,h.Au)(m))},n.destroyAll=function(){for(;l.Z.length;){const m=l.Z.pop();m&&m()}},n.config=h.ai,n._InternalPanelDoNotUseOrYouWillBeFired=f;var D=n}}]);})();
