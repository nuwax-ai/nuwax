"use strict";(()=>{(self.webpackChunknuwax_frontend=self.webpackChunknuwax_frontend||[]).push([[3988],{59602:function(T,o,e){e.d(o,{Z:function(){return v}});var c=e(24573),i=e(94581),h=e.n(i),O=e(75271),u={"xagi-nav-style2":"xagi-nav-style2___xuAte",text:"text___sfO7S","page-container":"page-container___rvj3b",container:"container___MWZZN"},r=e(52676),f=h().bind(u),t=function(_){var s=_.className;return(0,r.jsxs)("div",{className:f("flex","flex-1","items-center","content-center",u.container,s),children:[(0,r.jsx)(c.Z,{}),(0,r.jsx)("span",{children:"\u52A0\u8F7D\u4E2D..."})]})},v=t},9676:function(T,o,e){e.r(o);var c=e(90228),i=e.n(c),h=e(87999),O=e.n(h),u=e(48305),r=e.n(u),f=e(59602),t=e(94447),v=e(86834),L=e(75271),_=e(53586),s=e(52676),U=function(){var I=(0,L.useState)(!0),P=r()(I,2),x=P[0],p=P[1],E=(0,_.useLocation)(),g=500,A=["/login","/verify-code","/set-password","/chat-temp"],j=A.some(function(l){return E.pathname.includes(l)}),D=function(d,m){var a=Date.now()-m;a>=g?d():setTimeout(d,g-a<=0?0:g-a)};return(0,L.useEffect)(function(){console.time("authWithLoading");var l=function(){var d=O()(i()().mark(function m(){var a,W,M;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=Date.now(),n.prev=1,W=(0,t.Kf)(),W===null){n.next=7;break}p(!1),n.next=13;break;case 7:return console.timeLog("authWithLoading","fetchUserInfoFromServer:start"),n.next=10,t.KD.fetchUserInfoFromServer(!1);case 10:M=n.sent,console.timeLog("authWithLoading","fetchUserInfoFromServer:data",M),M?(console.timeLog("authWithLoading","fetchUserInfoFromServer:success"),(0,t.me)(!0)):((0,t.om)(),D(function(){console.timeLog("authWithLoading","fetchUserInfoFromServer:error","setLoading(false)"),p(!1)},a));case 13:n.next=21;break;case 15:n.prev=15,n.t0=n.catch(1),console.timeLog("authWithLoading","catch",n.t0),console.error("\u9A8C\u8BC1\u767B\u5F55\u72B6\u6001\u5931\u8D25:",n.t0),(0,t.om)(),D(function(){console.timeLog("authWithLoading","catch","redirectToLogin",E.pathname),(0,v.rf)("-1")},a);case 21:return n.prev=21,D(function(){p(!1)},a),n.finish(21);case 24:case"end":return n.stop()}},m,null,[[1,15,21,24]])}));return function(){return d.apply(this,arguments)}}();return l(),function(){console.timeEnd("authWithLoading")}},[E.pathname]),j?(0,s.jsx)(_.Outlet,{}):x?(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)(f.Z,{})}):(0,s.jsx)(_.Outlet,{})};o.default=U}}]);})();
