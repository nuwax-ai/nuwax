"use strict";(()=>{(self.webpackChunknuwax_frontend=self.webpackChunknuwax_frontend||[]).push([[5323],{80723:function(D,y,n){n.d(y,{Z:function(){return v}});var b=n(48305),r=n.n(b),l=n(28190),i=n(9504),f=n(94581),c=n.n(f),x=n(75271),p={btn:"btn___T9zvq","confirm-btn":"confirm-btn___kcWcm"},m=n(52676),B=c().bind(p),S=function(t){var j=t.form,w=t.loading,Z=t.okPrefixIcon,a=t.okText,R=t.onConfirm,L=(0,x.useState)(!1),h=r()(L,2),s=h[0],O=h[1],F=l.Z.useWatch([],{form:j,preserve:!0});return(0,x.useEffect)(function(){j.validateFields({validateOnly:!0}).then(function(){return O(!0)}).catch(function(){return O(!1)})},[j,F]),(0,m.jsx)(i.ZP,{type:"primary",icon:Z,loading:w,onClick:R,className:B(!s&&p["confirm-btn"],p.btn),disabled:!s,children:a||"\u786E\u5B9A"})},A=S,C=n(14719),E={btn:"btn___T2mwV"},P=c().bind(E),d=function(t){var j=t.form,w=t.classNames,Z=t.title,a=t.open,R=t.loading,L=t.okPrefixIcon,h=t.okText,s=t.centered,O=s===void 0?!1:s,F=t.onCancel,X=t.onConfirm,J=t.children;return(0,m.jsx)(C.Z,{title:Z,open:a,centered:O,classNames:w,destroyOnHidden:!0,footer:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.ZP,{className:P(E.btn),type:"default",onClick:F,children:"\u53D6\u6D88"}),(0,m.jsx)(A,{okPrefixIcon:L,loading:R,onConfirm:X,form:j,okText:h})]}),onCancel:F,children:J})},v=d},64720:function(D,y,n){n.r(y),n.d(y,{default:function(){return X}});var b=n(48305),r=n.n(b),l=n(76026),i=n(65104),f=n(3642),c=n(17023),x=n(29333),p=n(68108),m=n(9504),B=n(17701),S=n(63619),A=n(78321),C=n(50490),E=n(94581),P=n.n(E),d=n(16483),v=n.n(d),g=n(75271),t=n(80723),j=n(60393),w=n(28190),Z=n(41249),a=n(52676),R=function(k){var Q=k.open,W=k.onCancel,q=k.onConfirm,ee=k.id,K=w.Z.useForm(),H=r()(K,1),I=H[0],ne=(0,g.useState)(!1),U=r()(ne,2),V=U[0],T=U[1],te=(0,x.Z)(l.qZ,{manual:!0,loadingDelay:300,onBefore:function(){T(!0)},onSuccess:function(){Z.ZP.success("\u4E0B\u67B6\u6210\u529F"),I.resetFields(),q()},onFinally:function(){T(!1)}}),$=te.run,G=function(){I.validateFields().then(function(z){$({id:ee,reason:z.reason})}).catch(function(z){console.log(z)})};return(0,a.jsx)(t.Z,{open:Q,form:I,title:"\u4E0B\u67B6",onCancel:function(){I.resetFields(),W()},onConfirm:G,loading:V,children:(0,a.jsx)(w.Z,{form:I,layout:"vertical",requiredMark:j.N,children:(0,a.jsx)(w.Z.Item,{name:"reason",label:"\u8BF7\u8F93\u5165\u4E0B\u67B6\u539F\u56E0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E0B\u67B6\u539F\u56E0"}],children:(0,a.jsx)(S.Z.TextArea,{rows:4,placeholder:"\u8BF7\u8F93\u5165\u4E0B\u67B6\u539F\u56E0"})})})})},L=R,h={"xagi-nav-style2":"xagi-nav-style2___dr7hw",text:"text___w28bI","page-container":"page-container___BaGMz","system-manage-container":"system-manage-container___aH0Vl","system-manage-title":"system-manage-title___wiHH1","table-column-fixed":"table-column-fixed___eHDM7","search-section":"search-section____xD5x","select-132":"select-132___iXr_y","search-input-255":"search-input-255___U_Tte","table-action-ant-btn-link":"table-action-ant-btn-link___Zd3u3",footer:"footer___jPqfF"},s=P().bind(h),O=[{value:"",label:"\u5168\u90E8"},{value:i.Q.Agent,label:"\u667A\u80FD\u4F53"},{value:i.Q.Plugin,label:"\u63D2\u4EF6"},{value:i.Q.Workflow,label:"\u5DE5\u4F5C\u6D41"},{value:i.Q.Skill,label:"\u6280\u80FD"}],F=function(){var k=(0,g.useState)(""),Q=r()(k,2),W=Q[0],q=Q[1],ee=(0,g.useState)(""),K=r()(ee,2),H=K[0],I=K[1],ne=(0,g.useState)(1),U=r()(ne,2),V=U[0],T=U[1],te=(0,g.useState)(10),$=r()(te,2),G=$[0],N=$[1],z=(0,g.useState)(!1),le=r()(z,2),oe=le[0],ae=le[1],ce=(0,g.useState)(),ie=r()(ce,2),de=ie[0],fe=ie[1],me=(0,g.useState)(0),ue=r()(me,2),he=ue[0],pe=ue[1],Y=(0,x.Z)(l.kb,{debounceWait:300,defaultParams:[{pageNo:V,pageSize:10,queryFilter:{targetType:W||void 0,kw:H}}]}),_=Y.data,re=Y.run,ve=Y.refresh,ge=Y.loading;(0,g.useEffect)(function(){var o=function(){var M=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-250;pe(M)};o(),window.addEventListener("resize",o);var e=function(){setTimeout(o,100)};return window.addEventListener("orientationchange",e),function(){window.removeEventListener("resize",o),window.removeEventListener("orientationchange",e)}},[]);var se=function(e,u,M){var we=arguments.length>3&&arguments[3]!==void 0?arguments[3]:G;return{pageNo:e,pageSize:we,queryFilter:{targetType:u||void 0,kw:M}}},xe=function(e){q(e),T(1);var u=se(1,e,H);re(u)},ye=function(e){I(e),T(1);var u=se(1,W,e);re(u)},be=function(e,u){T(e),N(u);var M=se(e,W,H,u);re(M)},Se=function(e){fe(e),ae(!0)},Ce=function(e){var u="";e.targetType===i.Q.Agent?u="/space/".concat(e.spaceId,"/agent/").concat(e.targetId,"?publishId=").concat(e.id):e.targetType===i.Q.Plugin?e.pluginType==="CODE"?u="/space/".concat(e.spaceId,"/plugin/").concat(e.targetId,"/cloud-tool?applyId=").concat(e.id):u="/space/".concat(e.spaceId,"/plugin/").concat(e.targetId,"?publishId=").concat(e.id):e.targetType===i.Q.Workflow?u="/space/".concat(e.spaceId,"/workflow/").concat(e.targetId,"?publishId=").concat(e.id):e.targetType===i.Q.Skill&&(u="/space/".concat(e.spaceId,"/skill-details/").concat(e.targetId,"?publishId=").concat(e.id)),u&&window.open(u,"_blank","noopener,noreferrer")},Pe=function(e){switch(e){case i.Q.Agent:return"\u667A\u80FD\u4F53";case i.Q.Plugin:return"\u63D2\u4EF6";case i.Q.Workflow:return"\u5DE5\u4F5C\u6D41";case i.Q.Skill:return"\u6280\u80FD"}},je=[{title:"\u53D1\u5E03\u540D\u79F0",dataIndex:"name",key:"name",width:200,className:h["table-column-fixed"],render:function(e){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(0,a.jsx)("span",{className:s("text-ellipsis-2"),children:e})})}},{title:"\u7C7B\u578B",dataIndex:"targetType",key:"targetType",width:100,render:function(e){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:Pe(e)})}},{title:"\u63CF\u8FF0\u4FE1\u606F",dataIndex:"description",key:"description",width:200,render:function(e){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(0,a.jsx)(p.Z,{title:e,placement:"topLeft",children:(0,a.jsx)("div",{className:s("text-ellipsis-2"),children:e})})})}},{title:"\u7248\u672C\u4FE1\u606F",dataIndex:"remark",key:"remark",width:200,render:function(e){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(0,a.jsx)(p.Z,{title:e,placement:"topLeft",children:(0,a.jsx)("div",{className:s("text-ellipsis-2"),children:e})})})}},{title:"\u53D1\u5E03\u8005",dataIndex:"publishUser",key:"publishUser",width:200,render:function(e){var u;return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:(u=e?.userName)!==null&&u!==void 0?u:"--"})}},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"created",key:"created",width:170,render:function(e){return(0,a.jsx)("div",{className:s("flex","items-center","h-full"),children:v()(e).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u64CD\u4F5C",key:"action",align:"center",width:120,fixed:"right",className:h["table-column-fixed"],render:function(e,u){return(0,a.jsxs)("div",{className:s("flex","items-center","h-full","content-center"),children:[(0,a.jsx)(m.ZP,{type:"link",className:s(h["table-action-ant-btn-link"]),onClick:function(){return Ce(u)},children:"\u67E5\u770B"}),(0,a.jsx)(m.ZP,{type:"link",className:s(h["table-action-ant-btn-link"]),onClick:function(){return Se(u.id)},children:"\u4E0B\u67B6"})]})}}];return(0,a.jsxs)("div",{className:s(h["system-manage-container"],"flex","flex-col","h-full","overflow-hide"),children:[(0,a.jsx)("h3",{className:s(h["system-manage-title"]),children:"\u5DF2\u53D1\u5E03\u7BA1\u7406"}),(0,a.jsxs)("section",{className:s("flex","content-between",h["search-section"]),children:[(0,a.jsx)(B.default,{className:s(h["select-132"]),options:O,defaultValue:"",onChange:xe,optionLabelProp:"label",popupRender:function(e){return(0,a.jsx)(a.Fragment,{children:e})},menuItemSelectedIcon:(0,a.jsx)(f.Z,{style:{marginRight:8}})}),(0,a.jsx)(S.Z,{className:s(h["search-input-255"]),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u5DE5\u4F5C\u6D41\u6216\u667A\u80FD\u4F53\u540D\u79F0",prefix:(0,a.jsx)(c.Z,{}),onPressEnter:function(e){e.key==="Enter"&&ye(e.currentTarget.value)}})]}),(0,a.jsx)("div",{className:s("flex-1"),children:(0,a.jsx)(A.Z,{rowClassName:s(h["table-row-divider"],"h-full"),rowKey:"id",loading:ge,columns:je,dataSource:_?.data.records,scroll:{x:"max-content",y:he},virtual:!0,pagination:!1})}),(0,a.jsx)("footer",{className:s("flex","content-end","items-center",h.footer),children:(0,a.jsx)(C.Z,{current:V,pageSize:G,showSizeChanger:!0,total:_?.data.total,showTotal:function(e){return"\u5171 ".concat(e," \u6761")},onChange:be})}),(0,a.jsx)(L,{open:oe,id:de,onCancel:function(){return ae(!1)},onConfirm:function(){ae(!1),ve()}})]})},X=F},76026:function(D,y,n){n.d(y,{Ez:function(){return c},NH:function(){return B},jw:function(){return p},kb:function(){return A},qZ:function(){return E}});var b=n(90228),r=n.n(b),l=n(87999),i=n.n(l),f=n(53586);function c(d){return x.apply(this,arguments)}function x(){return x=i()(r()().mark(function d(v){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/system/publish/apply/list",{method:"POST",data:v}));case 1:case"end":return t.stop()}},d)})),x.apply(this,arguments)}function p(d){return m.apply(this,arguments)}function m(){return m=i()(r()().mark(function d(v){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/system/publish/".concat(v.id),{method:"POST",data:v}));case 1:case"end":return t.stop()}},d)})),m.apply(this,arguments)}function B(d){return S.apply(this,arguments)}function S(){return S=i()(r()().mark(function d(v){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/system/publish/reject/".concat(v.id),{method:"POST",data:v}));case 1:case"end":return t.stop()}},d)})),S.apply(this,arguments)}function A(d){return C.apply(this,arguments)}function C(){return C=i()(r()().mark(function d(v){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/system/publish/list",{method:"POST",data:v}));case 1:case"end":return t.stop()}},d)})),C.apply(this,arguments)}function E(d){return P.apply(this,arguments)}function P(){return P=i()(r()().mark(function d(v){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/system/publish/offShelf/".concat(v.id),{method:"POST",data:v}));case 1:case"end":return t.stop()}},d)})),P.apply(this,arguments)}},65104:function(D,y,n){n.d(y,{Q:function(){return b},b:function(){return r}});var b=function(l){return l.Agent="Agent",l.Plugin="Plugin",l.Workflow="Workflow",l.Knowledge="Knowledge",l.Template="Template",l.Skill="Skill",l}({}),r=function(l){return l.All="All",l.Agent="Agent",l.Workflow="Workflow",l.Page="Page",l.Skill="Skill",l}({})},60393:function(D,y,n){n.d(y,{N:function(){return l},g:function(){return i}});var b=n(75271),r=n(52676),l=function(c,x){var p=x.required;return(0,r.jsxs)(r.Fragment,{children:[c,p?(0,r.jsx)("span",{style:{color:"red",fontWeight:600,marginLeft:"4px"},children:"*"}):null]})},i=function(c){return(0,r.jsx)(r.Fragment,{children:c})}},40595:function(D,y,n){n.d(y,{G:function(){return i}});var b=n(18415),r=function(c){if((0,b.Z)()&&window.document.documentElement){var x=Array.isArray(c)?c:[c],p=window.document.documentElement;return x.some(function(m){return m in p.style})}return!1},l=function(c,x){if(!r(c))return!1;var p=document.createElement("div"),m=p.style[c];return p.style[c]=x,p.style[c]!==m};function i(f,c){return!Array.isArray(f)&&c!==void 0?l(f,c):r(f)}}}]);})();
